"use strict";
(self["webpackChunksynview"] = self["webpackChunksynview"] || []).push([["vendors-node_modules_arcgis_core_symbols_cim_rasterizingUtils_js-node_modules_arcgis_core_vie-dabb1e"],{

/***/ "./node_modules/@arcgis/core/core/floatRGBA.js":
/*!*****************************************************!*\
  !*** ./node_modules/@arcgis/core/core/floatRGBA.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   packFloatRGBA: () => (/* binding */ o),
/* harmony export */   unpackFloatRGBA: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _mathUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mathUtils.js */ "./node_modules/@arcgis/core/core/mathUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function o(o,r,e=0){const i=(0,_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.clamp)(o,0,f);for(let t=0;t<4;t++)r[e+t]=Math.floor(256*l(i*n[t]))}function r(t,o=0){let r=0;for(let n=0;n<4;n++)r+=t[o+n]*e[n];return r}const n=[1,256,65536,16777216],e=[1/256,1/65536,1/16777216,1/4294967296],f=r(new Uint8ClampedArray([255,255,255,255]));function l(t){return t-Math.floor(t)}


/***/ }),

/***/ "./node_modules/@arcgis/core/symbols/cim/rasterizingUtils.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@arcgis/core/symbols/cim/rasterizingUtils.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   rasterizeDash: () => (/* binding */ e),
/* harmony export */   rasterizeSimpleFill: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _core_floatRGBA_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/floatRGBA.js */ "./node_modules/@arcgis/core/core/floatRGBA.js");
/* harmony import */ var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/mathUtils.js */ "./node_modules/@arcgis/core/core/mathUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const a=o=>"vertical"===o||"horizontal"===o||"cross"===o||"esriSFSCross"===o||"esriSFSVertical"===o||"esriSFSHorizontal"===o;function r(o,r,e){const i=(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_1__.nextPowerOfTwo)(Math.ceil(e)),n=a(r)?8*i:16*i,s=2*i;o.width=n,o.height=n;const l=o.getContext("2d");l.strokeStyle="#FFFFFF",l.lineWidth=i,l.beginPath(),"vertical"!==r&&"cross"!==r&&"esriSFSCross"!==r&&"esriSFSVertical"!==r||(l.moveTo(n/2,-s),l.lineTo(n/2,n+s)),"horizontal"!==r&&"cross"!==r&&"esriSFSCross"!==r&&"esriSFSHorizontal"!==r||(l.moveTo(-s,n/2),l.lineTo(n+s,n/2)),"forward-diagonal"!==r&&"diagonal-cross"!==r&&"esriSFSDiagonalCross"!==r&&"esriSFSForwardDiagonal"!==r||(l.moveTo(-s,-s),l.lineTo(n+s,n+s),l.moveTo(n-s,-s),l.lineTo(n+s,s),l.moveTo(-s,n-s),l.lineTo(s,n+s)),"backward-diagonal"!==r&&"diagonal-cross"!==r&&"esriSFSBackwardDiagonal"!==r&&"esriSFSDiagonalCross"!==r||(l.moveTo(n+s,-s),l.lineTo(-s,n+s),l.moveTo(s,-s),l.lineTo(-s,s),l.moveTo(n+s,n-s),l.lineTo(n-s,n+s)),l.stroke();const h=l.getImageData(0,0,o.width,o.height),c=new Uint8Array(h.data);let m;for(let t=0;t<c.length;t+=4)m=c[t+3]/255,c[t]=c[t]*m,c[t+1]=c[t+1]*m,c[t+2]=c[t+2]*m;return[c,o.width,o.height]}function e(t,a){const r="Butt"===a,e="Square"===a,i=!r&&!e;t.length%2==1&&(t=[...t,...t]);const n=15.5,s=2*n;let l=0;for(const o of t)l+=o;const h=Math.round(l*n),c=new Float32Array(h*s),m=.5*n;let S=0,F=0,g=.5,T=!0;for(const o of t){for(S=F,F+=o*n;g<=F;){let o=.5;for(;o<s;){const t=(o-.5)*h+g-.5,a=i?(o-n)*(o-n):Math.abs(o-n);c[t]=T?r?Math.max(Math.max(S+m-g,a),Math.max(g-F+m,a)):a:i?Math.min((g-S)*(g-S)+a,(g-F)*(g-F)+a):e?Math.min(Math.max(g-S,a),Math.max(F-g,a)):Math.min(Math.max(g-S+m,a),Math.max(F+m-g,a)),o++}g++}T=!T}const d=c.length,f=new Uint8Array(4*d);for(let M=0;M<d;++M){const t=(i?Math.sqrt(c[M]):c[M])/n;(0,_core_floatRGBA_js__WEBPACK_IMPORTED_MODULE_0__.packFloatRGBA)(t,f,4*M)}return[f,h,s]}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/TileManager.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/TileManager.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TileManager: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _core_LRUCache_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/LRUCache.js */ "./node_modules/@arcgis/core/core/LRUCache.js");
/* harmony import */ var _tiling_TileCoverage_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../tiling/TileCoverage.js */ "./node_modules/@arcgis/core/views/2d/tiling/TileCoverage.js");
/* harmony import */ var _tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../tiling/TileKey.js */ "./node_modules/@arcgis/core/views/2d/tiling/TileKey.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const l=512,s=1e-6,r=(e,i)=>e+1/(1<<2*i);class o{constructor(i,t){this._tiles=new Map,this._tileCache=new _core_LRUCache_js__WEBPACK_IMPORTED_MODULE_0__.LRUCache(40,(e=>e.dispose())),this._viewSize=[0,0],this._visibleTiles=new Map,this.acquireTile=i.acquireTile,this.releaseTile=i.releaseTile,this.tileInfoView=i.tileInfoView,this._container=t}destroy(){for(const[e,i]of this._tiles)i.dispose();this._tiles=null,this._tileCache.clear(),this._tileCache=null}update(e){this._updateCacheSize(e);const l=this.tileInfoView,s=l.getTileCoverage(e.state,0,!0,"smallest");if(!s)return!0;const{spans:r,lodInfo:o}=s,{level:n}=o,a=this._tiles,c=new Set,h=new Set;for(const{row:i,colFrom:_,colTo:f}of r)for(let e=_;e<=f;e++){const l=_tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_2__["default"].getId(n,i,o.normalizeCol(e),o.getWorldForColumn(e)),s=this._getOrAcquireTile(l);c.add(l),s.processed()?this._addToContainer(s):h.add(new _tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_2__["default"](l))}for(const[i,t]of a)t.isCoverage=c.has(i);for(const i of h)this._findPlaceholdersForMissingTiles(i,c);let d=!1;for(const[i,t]of a)t.neededForCoverage=c.has(i),t.neededForCoverage||t.isHoldingForFade&&l.intersects(s,t.key)&&c.add(i),t.isFading&&(d=!0);for(const[i,t]of this._tiles)c.has(i)||this._releaseTile(i);return _tiling_TileCoverage_js__WEBPACK_IMPORTED_MODULE_1__["default"].pool.release(s),!d}clear(){this._tiles.clear(),this._tileCache.clear(),this._visibleTiles.clear()}clearCache(){this._tileCache.clear()}_findPlaceholdersForMissingTiles(e,i){const t=[];for(const[s,r]of this._tiles)this._addPlaceholderChild(t,r,e,i);const l=t.reduce(r,0);Math.abs(1-l)<s||this._addPlaceholderParent(e.id,i)}_addPlaceholderChild(e,i,t,l){i.key.level<=t.level||!i.hasData()||a(t,i.key)&&(this._addToContainer(i),l.add(i.id),e.push(i.key.level-t.level))}_addPlaceholderParent(e,i){const t=this._tiles;let l=e;for(;;){if(l=n(l),!l||i.has(l))return;const e=t.get(l);if(e&&e.hasData())return this._addToContainer(e),void i.add(e.id)}}_getOrAcquireTile(e){let i=this._tiles.get(e);return i||(i=this._tileCache.pop(e),i||(i=this.acquireTile(new _tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_2__["default"](e))),this._tiles.set(e,i),i)}_releaseTile(e){const i=this._tiles.get(e);this.releaseTile(i),this._removeFromContainer(i),this._tiles.delete(e),i.hasData()?this._tileCache.put(e,i,1):i.dispose()}_addToContainer(e){let i;const t=[],l=this._container;if(l.contains(e))return;const s=this._visibleTiles;for(const[r,o]of s)this._canConnectDirectly(e,o)&&t.push(o),null==i&&this._canConnectDirectly(o,e)&&(i=o);if(null!=i){for(const l of t)i.childrenTiles.delete(l),e.childrenTiles.add(l),l.parentTile=e;i.childrenTiles.add(e),e.parentTile=i}else for(const r of t)e.childrenTiles.add(r),r.parentTile=e;s.set(e.id,e),l.addChild(e)}_removeFromContainer(e){if(this._visibleTiles.delete(e.id),this._container.removeChild(e),null!=e.parentTile){e.parentTile.childrenTiles.delete(e);for(const i of e.childrenTiles)null!=e.parentTile&&e.parentTile.childrenTiles.add(i)}for(const i of e.childrenTiles)i.parentTile=e.parentTile;e.parentTile=null,e.childrenTiles.clear()}_canConnectDirectly(e,i){const t=e.key;let{level:l,row:s,col:r,world:o}=i.key;const n=this._visibleTiles;for(;l>0;){if(l--,s>>=1,r>>=1,t.level===l&&t.row===s&&t.col===r&&t.world===o)return!0;if(n.has(`${l}/${s}/${r}/${o}`))return!1}return!1}_updateCacheSize(e){const i=e.state.size;if(i[0]===this._viewSize[0]&&i[1]===this._viewSize[1])return;const t=Math.ceil(i[0]/l)+1,s=Math.ceil(i[1]/l)+1;this._viewSize[0]=i[0],this._viewSize[1]=i[1],this._tileCache.maxSize=5*t*s}}function n(e){const[i,t,l,s]=e.split("/"),r=parseInt(i,10);return 0===r?null:`${r-1}/${parseInt(t,10)>>1}/${parseInt(l,10)>>1}/${parseInt(s,10)}`}function a(e,i){const t=i.level-e.level;return e.row===i.row>>t&&e.col===i.col>>t&&e.world===i.world}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/VectorTileContainer.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/VectorTileContainer.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   VectorTileContainer: () => (/* binding */ m)
/* harmony export */ });
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../geometry/support/aaBoundingRect.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js");
/* harmony import */ var _decluttering_SymbolFader_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./decluttering/SymbolFader.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/SymbolFader.js");
/* harmony import */ var _style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./style/StyleDefinition.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/style/StyleDefinition.js");
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../webgl/enums.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/enums.js");
/* harmony import */ var _webgl_RenderableTile_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../webgl/RenderableTile.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/RenderableTile.js");
/* harmony import */ var _webgl_TileContainer_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../webgl/TileContainer.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/TileContainer.js");
/* harmony import */ var _tiling_TileCoverage_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../tiling/TileCoverage.js */ "./node_modules/@arcgis/core/views/2d/tiling/TileCoverage.js");
/* harmony import */ var _tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../tiling/TileKey.js */ "./node_modules/@arcgis/core/views/2d/tiling/TileKey.js");
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../webgl/enums.js */ "./node_modules/@arcgis/core/views/webgl/enums.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const y=1e-6;function p(e,t){if(e){const s=e.getLayoutProperty("visibility");if(!s||s.getValue()!==_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_3__.Visibility.NONE&&(void 0===e.minzoom||e.minzoom<t+y)&&(void 0===e.maxzoom||e.maxzoom>=t-y))return!0}return!1}class m extends _webgl_TileContainer_js__WEBPACK_IMPORTED_MODULE_6__["default"]{constructor(e){super(e),this._backgroundTiles=[],this._pointToCallbacks=new Map}destroy(){this.removeAllChildren(),this._spriteMosaic?.dispose(),this._spriteMosaic=null,this._glyphMosaic?.dispose(),this._glyphMosaic=null,null!=this._symbolFader&&(this._symbolFader.clear(),this._symbolFader=null),this._styleRepository=null,this._backgroundTiles=[],this._pointToCallbacks.clear()}get fading(){return this._symbolFader?.fading??!1}setStyleResources(e,t,r){this._spriteMosaic=e,this._glyphMosaic=t,this._styleRepository=r,null==this._symbolFader&&(this._symbolFader=new _decluttering_SymbolFader_js__WEBPACK_IMPORTED_MODULE_2__.SymbolFader(this._styleRepository,this.children)),this._symbolFader.styleRepository=r}setSpriteMosaic(e){this._spriteMosaic?.dispose(),this._spriteMosaic=e}deleteStyleLayers(e){null!=this._symbolFader&&this._symbolFader.deleteStyleLayers(e)}async hitTest(t){const s=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.createResolver)();return this._pointToCallbacks.set(t,s),this.requestRender(),s.promise}createRenderParams(e){return{...super.createRenderParams(e),renderPass:null,styleLayer:null,styleLayerUID:-1,glyphMosaic:this._glyphMosaic,spriteMosaic:this._spriteMosaic,hasClipping:!!this._clippingInfos}}doRender(e){!this.visible||e.drawPhase!==_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__.WGLDrawPhase.MAP&&e.drawPhase!==_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__.WGLDrawPhase.DEBUG||void 0===this._spriteMosaic||super.doRender(e)}addChild(e){return super.addChild(e),null!=this._symbolFader?this._symbolFader.addTile(e):e.decluttered=!0,this.requestRender(),e}removeChild(e){return null!=this._symbolFader&&this._symbolFader.removeTile(e),this.requestRender(),super.removeChild(e)}renderChildren(e){const{drawPhase:t}=e;if(t!==_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__.WGLDrawPhase.DEBUG){if(this._doRender(e),this._pointToCallbacks.size>0){e.drawPhase=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__.WGLDrawPhase.HITTEST;const s=e.painter.effects.hittestVTL;s.bind(e),this._doRender(e),s.draw(e,this._pointToCallbacks),s.unbind(e),e.drawPhase=t}}else super.renderChildren(e)}removeAllChildren(){for(let e=0;e<this.children.length;e++){const t=this.children[e];null!=this._symbolFader&&this._symbolFader.removeTile(t),t.dispose()}super.removeAllChildren()}getStencilTarget(){return this.children.filter((e=>e.neededForCoverage&&e.hasData()))}restartDeclutter(){null!=this._symbolFader&&this._symbolFader.restartDeclutter()}_doRender(e){const{context:t}=e,s=this._styleRepository;if(!s)return;const r=s.layers;let i=!0;e.drawPhase===_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__.WGLDrawPhase.HITTEST&&(i=!1),s.backgroundBucketIds.length>0&&(e.renderPass="background",this._renderBackgroundLayers(e,s.backgroundBucketIds)),super.renderChildren(e),e.drawPhase===_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__.WGLDrawPhase.MAP&&this._fade(e.displayLevel,e.state);const o=this.children.filter((e=>e.visible&&e.hasData()));if(!o||0===o.length)return t.bindVAO(),t.setStencilTestEnabled(!0),void t.setBlendingEnabled(!0);for(const l of o)l.triangleCount=0;t.setStencilWriteMask(0),t.setColorMask(!0,!0,!0,!0),t.setStencilOp(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_9__.StencilOperation.KEEP,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_9__.StencilOperation.KEEP,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_9__.StencilOperation.REPLACE),t.setStencilTestEnabled(!0),t.setBlendingEnabled(!1),t.setDepthTestEnabled(!0),t.setDepthWriteEnabled(!0),t.setDepthFunction(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_9__.CompareFunction.LEQUAL),t.setClearDepth(1),t.clear(t.gl.DEPTH_BUFFER_BIT),e.renderPass="opaque";for(let l=r.length-1;l>=0;l--)this._renderStyleLayer(r[l],e,o);t.setDepthWriteEnabled(!1),t.setBlendingEnabled(i),t.setBlendFunctionSeparate(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_9__.BlendFactor.ONE,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_9__.BlendFactor.ONE_MINUS_SRC_ALPHA,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_9__.BlendFactor.ONE,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_9__.BlendFactor.ONE_MINUS_SRC_ALPHA),e.renderPass="translucent";for(let l=0;l<r.length;l++)this._renderStyleLayer(r[l],e,o);t.bindVAO(),t.setStencilTestEnabled(!0),t.setBlendingEnabled(!0)}_fade(e,t){null!=this._symbolFader&&(this._symbolFader.update(e,t)||this.requestRender())}_renderStyleLayer(e,t,s){const{painter:l,renderPass:o}=t;if(void 0===e)return;const n=e.getLayoutProperty("visibility");if(n&&n.getValue()===_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_3__.Visibility.NONE)return;let a;switch(e.type){case _style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_3__.StyleLayerType.BACKGROUND:return;case _style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_3__.StyleLayerType.FILL:if("opaque"!==o&&"translucent"!==t.renderPass)return;a="vtlFill";break;case _style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_3__.StyleLayerType.LINE:if("translucent"!==o)return;a="vtlLine";break;case _style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_3__.StyleLayerType.CIRCLE:if("translucent"!==o)return;a="vtlCircle";break;case _style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_3__.StyleLayerType.SYMBOL:if("translucent"!==o)return;a="vtlSymbol"}if(s=e.type===_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_3__.StyleLayerType.SYMBOL?s.filter((e=>e.decluttered)):s.filter((e=>e.neededForCoverage)),"vtlSymbol"!==a){const r=t.displayLevel;if(0===s.length||void 0!==e.minzoom&&e.minzoom>=r+y||void 0!==e.maxzoom&&e.maxzoom<r-y)return}const d=e.uid;t.styleLayerUID=d,t.styleLayer=e;for(const r of s)if(r.layerData.has(d)){l.renderObjects(t,s,a);break}}_renderBackgroundLayers(e,s){const{context:r,displayLevel:n,painter:u,state:y}=e,m=this._styleRepository;let _=!1;for(const t of s){if(m.getLayerById(t).type===_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_3__.StyleLayerType.BACKGROUND&&p(m.getLayerById(t),n)){_=!0;break}}if(!_)return;const b=this._tileInfoView.getTileCoverage(e.state,0,!0,"smallest"),{spans:f,lodInfo:g}=b,{level:T}=g,E=(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_1__.create)(),C=[];if(this._renderPasses){const t=this._renderPasses[0];null!=this._clippingInfos&&(t.brushes[0].prepareState(e),t.brushes[0].drawMany(e,this._clippingInfos))}const L=this._backgroundTiles;let v,F=0;for(const{row:i,colFrom:l,colTo:a}of f)for(let e=l;e<=a;e++){if(F<L.length)v=L[F],v.key.set(T,i,g.normalizeCol(e),g.getWorldForColumn(e)),this._tileInfoView.getTileBounds(E,v.key,!1),v.x=E[0],v.y=E[3],v.resolution=this._tileInfoView.getTileResolution(T);else{const s=new _tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_8__["default"](T,i,g.normalizeCol(e),g.getWorldForColumn(e)),r=this._tileInfoView.getTileBounds((0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_1__.create)(),s),l=this._tileInfoView.getTileResolution(T);v=new _webgl_RenderableTile_js__WEBPACK_IMPORTED_MODULE_5__.RenderableTile(s,l,r[0],r[3],512,512,4096,4096),L.push(v)}v.setTransform(y),C.push(v),F++}r.setStencilWriteMask(0),r.setColorMask(!0,!0,!0,!0),r.setStencilOp(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_9__.StencilOperation.KEEP,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_9__.StencilOperation.KEEP,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_9__.StencilOperation.REPLACE),r.setStencilFunction(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_9__.CompareFunction.EQUAL,0,255);let S=!0;e.drawPhase===_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__.WGLDrawPhase.HITTEST&&(S=!1),r.setStencilTestEnabled(S);for(const t of s){const s=m.getLayerById(t);s.type===_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_3__.StyleLayerType.BACKGROUND&&p(s,n)&&(e.styleLayerUID=s.uid,e.styleLayer=s,u.renderObjects(e,C,"vtlBackground"))}_tiling_TileCoverage_js__WEBPACK_IMPORTED_MODULE_7__["default"].pool.release(b)}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/SymbolFader.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/SymbolFader.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SymbolFader: () => (/* binding */ _)
/* harmony export */ });
/* harmony import */ var _core_signal_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../core/signal.js */ "./node_modules/@arcgis/core/core/signal.js");
/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/config.js");
/* harmony import */ var _core_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/core.js");
/* harmony import */ var _jobs_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./jobs.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/jobs.js");
/* harmony import */ var _SymbolDeclutterer_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./SymbolDeclutterer.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/SymbolDeclutterer.js");
/* harmony import */ var _SymbolRepository_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./SymbolRepository.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/SymbolRepository.js");
/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./util.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/util.js");
/* harmony import */ var _style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../style/StyleDefinition.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/style/StyleDefinition.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const n=.5,c=1e-6;class _{constructor(e,i){this.styleRepository=e,this._tileToHandle=new Map,this._viewState={scale:0,rotation:0,center:[0,0],size:[0,0]},this._declutterViewState={scale:0,rotation:0,center:[0,0],size:[0,0]},this._completed=!1,this._fading=(0,_core_signal_js__WEBPACK_IMPORTED_MODULE_0__.signal)(!1),this._symbolRepository=new _SymbolRepository_js__WEBPACK_IMPORTED_MODULE_5__.SymbolRepository(4096,i,(()=>new _core_js__WEBPACK_IMPORTED_MODULE_2__.VTLUniqueSymbol)),this._symbolDeclutterer=new _SymbolDeclutterer_js__WEBPACK_IMPORTED_MODULE_4__.SymbolDeclutterer(i,this._symbolRepository,((t,e,i)=>new _jobs_js__WEBPACK_IMPORTED_MODULE_3__.CollisionJob(t,e,i,this.styleRepository,this._zoom,this._viewState.rotation)),((t,e)=>{t.allSymbolsFadingOut=!0,t.lastOpacityUpdate=e,(0,_util_js__WEBPACK_IMPORTED_MODULE_6__.writeOpacityToBuffers)(t,e,!0),t.decluttered=!0,t.requestRender()}),((t,e)=>this.styleRepository.getStyleLayerByUID(t.styleLayerUID).z-this.styleRepository.getStyleLayerByUID(e.styleLayerUID).z),(t=>{const e=this.styleRepository.getStyleLayerByUID(t);if(this._zoom+c<e.minzoom||this._zoom-c>=e.maxzoom)return!1;const i=e.getLayoutProperty("visibility");return!i||i.getValue()!==_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_7__.Visibility.NONE}))}get fading(){return this._fading.value}addTile(t){t.decluttered=!1,this._tileToHandle.set(t,t.on("symbols-changed",(()=>{this._symbolRepository.add(t),this.restartDeclutter()}))),this._symbolRepository.add(t),this.restartDeclutter()}removeTile(t){const e=this._tileToHandle.get(t);e&&(this._symbolRepository.removeTile(t),this.restartDeclutter(),e.remove(),this._tileToHandle.delete(t))}update(t,e){return this._zoom=t,this._viewState={scale:e.scale,rotation:e.rotation,center:[e.center[0],e.center[1]],size:[e.size[0],e.size[1]]},this._continueDeclutter(),this._completed}restartDeclutter(){this._completed=!1,this._symbolDeclutterer.restart(),this._notifyUnstable()}clear(){this._completed=!1,this._symbolRepository=null,this._symbolDeclutterer.restart(),this._tileToHandle.forEach((t=>t.remove())),this._tileToHandle.clear()}get stale(){return this._zoom!==this._declutterZoom||this._viewState.size[0]!==this._declutterViewState.size[0]||this._viewState.size[1]!==this._declutterViewState.size[1]||this._viewState.scale!==this._declutterViewState.scale||this._viewState.rotation!==this._declutterViewState.rotation}deleteStyleLayers(t){this._symbolRepository.deleteStyleLayers(t)}_continueDeclutter(){this._completed&&!this.stale||(this._symbolDeclutterer.running||(this._declutterZoom=this._zoom,this._declutterViewState.center[0]=this._viewState.center[0],this._declutterViewState.center[1]=this._viewState.center[1],this._declutterViewState.rotation=this._viewState.rotation,this._declutterViewState.scale=this._viewState.scale,this._declutterViewState.size[0]=this._viewState.size[0],this._declutterViewState.size[1]=this._viewState.size[1],this._symbolDeclutterer.restart()),this._symbolDeclutterer.setScreenSize(this._viewState.size[0],this._viewState.size[1]),this._completed=this._symbolDeclutterer.continue(_config_js__WEBPACK_IMPORTED_MODULE_1__.declutterBudget),this._completed&&this._scheduleNotifyStable())}_scheduleNotifyStable(){null!=this._stableNotificationHandle&&clearTimeout(this._stableNotificationHandle),this._stableNotificationHandle=setTimeout((()=>{this._stableNotificationHandle=null,this._fading.value=!1}),(1+n)*_config_js__WEBPACK_IMPORTED_MODULE_1__.fadeDuration)}_notifyUnstable(){null!=this._stableNotificationHandle&&(clearTimeout(this._stableNotificationHandle),this._stableNotificationHandle=null),this._fading.value=!0}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/enums.js":
/*!************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/enums.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BucketType: () => (/* binding */ E),
/* harmony export */   ShaderProgramType: () => (/* binding */ L),
/* harmony export */   StyleUpdateType: () => (/* binding */ I)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var E,L,I;!function(E){E[E.FILL=1]="FILL",E[E.LINE=2]="LINE",E[E.SYMBOL=3]="SYMBOL",E[E.CIRCLE=4]="CIRCLE"}(E||(E={})),function(E){E[E.BACKGROUND=0]="BACKGROUND",E[E.FILL=1]="FILL",E[E.OUTLINE=2]="OUTLINE",E[E.LINE=3]="LINE",E[E.ICON=4]="ICON",E[E.CIRCLE=5]="CIRCLE",E[E.TEXT=6]="TEXT",E[E.TILEINFO=7]="TILEINFO"}(L||(L={})),function(E){E[E.PAINTER_CHANGED=0]="PAINTER_CHANGED",E[E.LAYOUT_CHANGED=1]="LAYOUT_CHANGED",E[E.LAYER_CHANGED=2]="LAYER_CHANGED",E[E.LAYER_REMOVED=3]="LAYER_REMOVED",E[E.SPRITES_CHANGED=4]="SPRITES_CHANGED"}(I||(I={}));


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/webgl/TileContainer.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/webgl/TileContainer.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./enums.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/enums.js");
/* harmony import */ var _WGLContainer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./WGLContainer.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/WGLContainer.js");
/* harmony import */ var _brushes_WGLBrushInfo_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./brushes/WGLBrushInfo.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushInfo.js");
/* harmony import */ var _brushes_WGLBrushStencil_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./brushes/WGLBrushStencil.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushStencil.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const n=(e,r)=>e.key.level-r.key.level!=0?e.key.level-r.key.level:e.key.row-r.key.row!=0?e.key.row-r.key.row:e.key.col-r.key.col;class i extends _WGLContainer_js__WEBPACK_IMPORTED_MODULE_2__["default"]{constructor(e){super(),this._tileInfoView=e}renderChildren(e){this.sortChildren(n),this.setStencilReference(e),super.renderChildren(e)}createRenderParams(e){const{state:r}=e,s=super.createRenderParams(e);return s.requiredLevel=this._tileInfoView.getClosestInfoForScale(r.scale).level,s.displayLevel=this._tileInfoView.tileInfo.scaleToZoom(r.scale),s}prepareRenderPasses(r){const n=super.prepareRenderPasses(r);return n.push(r.registerRenderPass({name:"stencil",brushes:[_brushes_WGLBrushStencil_js__WEBPACK_IMPORTED_MODULE_4__["default"]],drawPhase:_enums_js__WEBPACK_IMPORTED_MODULE_1__.WGLDrawPhase.DEBUG|_enums_js__WEBPACK_IMPORTED_MODULE_1__.WGLDrawPhase.MAP|_enums_js__WEBPACK_IMPORTED_MODULE_1__.WGLDrawPhase.HIGHLIGHT,target:()=>this.getStencilTarget()})),(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__["default"])("esri-tiles-debug")&&n.push(r.registerRenderPass({name:"tileInfo",brushes:[_brushes_WGLBrushInfo_js__WEBPACK_IMPORTED_MODULE_3__["default"]],drawPhase:_enums_js__WEBPACK_IMPORTED_MODULE_1__.WGLDrawPhase.DEBUG,target:()=>this.children})),n}getStencilTarget(){return this.children}setStencilReference(e){let r=1;for(const s of this.children)s.stencilRef=r++}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/VectorTileLayerView2D.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/VectorTileLayerView2D.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ w)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _Graphic_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../Graphic.js */ "./node_modules/@arcgis/core/Graphic.js");
/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/lang.js */ "./node_modules/@arcgis/core/core/lang.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _core_accessorSupport_diffUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../core/accessorSupport/diffUtils.js */ "./node_modules/@arcgis/core/core/accessorSupport/diffUtils.js");
/* harmony import */ var _geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../geometry/support/aaBoundingRect.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js");
/* harmony import */ var _geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../geometry/support/spatialReferenceUtils.js */ "./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js");
/* harmony import */ var _engine_vectorTiles_enums_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../engine/vectorTiles/enums.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/enums.js");
/* harmony import */ var _engine_vectorTiles_TileHandler_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../engine/vectorTiles/TileHandler.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/TileHandler.js");
/* harmony import */ var _engine_vectorTiles_TileManager_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../engine/vectorTiles/TileManager.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/TileManager.js");
/* harmony import */ var _engine_vectorTiles_VectorTile_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../engine/vectorTiles/VectorTile.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/VectorTile.js");
/* harmony import */ var _engine_vectorTiles_VectorTileContainer_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../engine/vectorTiles/VectorTileContainer.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/VectorTileContainer.js");
/* harmony import */ var _engine_vectorTiles_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../engine/vectorTiles/style/StyleDefinition.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/style/StyleDefinition.js");
/* harmony import */ var _engine_vectorTiles_style_StyleRepository_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../engine/vectorTiles/style/StyleRepository.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/style/StyleRepository.js");
/* harmony import */ var _LayerView2D_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./LayerView2D.js */ "./node_modules/@arcgis/core/views/2d/layers/LayerView2D.js");
/* harmony import */ var _tiling_TileInfoViewPOT_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../tiling/TileInfoViewPOT.js */ "./node_modules/@arcgis/core/views/2d/tiling/TileInfoViewPOT.js");
/* harmony import */ var _tiling_TileQueue_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../tiling/TileQueue.js */ "./node_modules/@arcgis/core/views/2d/tiling/TileQueue.js");
/* harmony import */ var _layers_LayerView_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../layers/LayerView.js */ "./node_modules/@arcgis/core/views/layers/LayerView.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
let v=class extends((0,_LayerView2D_js__WEBPACK_IMPORTED_MODULE_19__.LayerView2DMixin)(_layers_LayerView_js__WEBPACK_IMPORTED_MODULE_22__["default"])){constructor(){super(...arguments),this._styleChanges=[],this._fetchQueue=null,this._parseQueue=null,this._tileHandlerPromise=null,this._isTileHandlerReady=!1}get fading(){return this._vectorTileContainer?.fading??!1}async hitTest(e,i){if(!this._tileHandlerPromise)return null;await this._tileHandlerPromise;const s=await this._vectorTileContainer.hitTest(i);if(!s||0===s.length)return null;const r=s[0]-1,a=this._styleRepository,l=a.getStyleLayerByUID(r);if(!l)return null;const o=a.getStyleLayerIndex(l.id);return[{type:"graphic",mapPoint:e,layer:this.layer,graphic:new _Graphic_js__WEBPACK_IMPORTED_MODULE_1__["default"]({attributes:{layerId:o,layerName:l.id,layerUID:r},layer:this.layer,sourceLayer:this.layer})}]}update(e){if(this._tileHandlerPromise&&this._isTileHandlerReady)return e.pixelRatio!==this._tileHandler.devicePixelRatio?(this._start(),void(this._tileHandler.devicePixelRatio=e.pixelRatio)):void(this._styleChanges.length>0?this._tileHandlerPromise=this._applyStyleChanges():(this._fetchQueue.pause(),this._parseQueue.pause(),this._fetchQueue.state=e.state,this._parseQueue.state=e.state,this._tileManager.update(e)||this.requestUpdate(),this._parseQueue.resume(),this._fetchQueue.resume()))}attach(){const{style:e}=this.layer.currentStyleInfo;this._styleRepository=new _engine_vectorTiles_style_StyleRepository_js__WEBPACK_IMPORTED_MODULE_18__["default"](e),this._tileInfoView=new _tiling_TileInfoViewPOT_js__WEBPACK_IMPORTED_MODULE_20__["default"](this.layer.tileInfo,this.layer.fullExtent),this._vectorTileContainer=new _engine_vectorTiles_VectorTileContainer_js__WEBPACK_IMPORTED_MODULE_16__.VectorTileContainer(this._tileInfoView),this._tileHandler=new _engine_vectorTiles_TileHandler_js__WEBPACK_IMPORTED_MODULE_13__.TileHandler(this.layer,this._styleRepository,window.devicePixelRatio||1),this.container.addChild(this._vectorTileContainer),this._start(),this.addAttachHandles([this.layer.on("paint-change",(e=>{if(e.isDataDriven)this._styleChanges.push({type:_engine_vectorTiles_enums_js__WEBPACK_IMPORTED_MODULE_12__.StyleUpdateType.PAINTER_CHANGED,data:e}),this.requestUpdate();else{const t=this._styleRepository,i=t.getLayerById(e.layer);if(!i)return;const s=i.type===_engine_vectorTiles_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_17__.StyleLayerType.SYMBOL;t.setPaintProperties(e.layer,e.paint),s&&this._vectorTileContainer?.restartDeclutter(),this._vectorTileContainer?.requestRender()}})),this.layer.on("layout-change",(e=>{const t=this._styleRepository,i=t.getLayerById(e.layer);if(!i)return;const s=(0,_core_accessorSupport_diffUtils_js__WEBPACK_IMPORTED_MODULE_9__.diff)(i.layout,e.layout);if(null!=s){if((0,_core_accessorSupport_diffUtils_js__WEBPACK_IMPORTED_MODULE_9__.hasDiff)(s,"visibility")&&1===D(s))return t.setLayoutProperties(e.layer,e.layout),i.type===_engine_vectorTiles_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_17__.StyleLayerType.SYMBOL&&this._vectorTileContainer?.restartDeclutter(),void this._vectorTileContainer?.requestRender();this._styleChanges.push({type:_engine_vectorTiles_enums_js__WEBPACK_IMPORTED_MODULE_12__.StyleUpdateType.LAYOUT_CHANGED,data:e}),this.requestUpdate()}})),this.layer.on("style-layer-visibility-change",(e=>{const t=this._styleRepository,i=t.getLayerById(e.layer);i&&(t.setStyleLayerVisibility(e.layer,e.visibility),i.type===_engine_vectorTiles_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_17__.StyleLayerType.SYMBOL&&this._vectorTileContainer?.restartDeclutter(),this._vectorTileContainer?.requestRender())})),this.layer.on("style-layer-change",(e=>{this._styleChanges.push({type:_engine_vectorTiles_enums_js__WEBPACK_IMPORTED_MODULE_12__.StyleUpdateType.LAYER_CHANGED,data:e}),this.requestUpdate()})),this.layer.on("delete-style-layer",(e=>{this._styleChanges.push({type:_engine_vectorTiles_enums_js__WEBPACK_IMPORTED_MODULE_12__.StyleUpdateType.LAYER_REMOVED,data:e}),this.requestUpdate()})),this.layer.on("load-style",(()=>this._loadStyle())),this.layer.on("spriteSource-change",(e=>{this._styleChanges.push({type:_engine_vectorTiles_enums_js__WEBPACK_IMPORTED_MODULE_12__.StyleUpdateType.SPRITES_CHANGED,data:e});const t=this._styleRepository.layers;for(const i of t)switch(i.type){case _engine_vectorTiles_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_17__.StyleLayerType.SYMBOL:i.getLayoutProperty("icon-image")&&this._styleChanges.push({type:_engine_vectorTiles_enums_js__WEBPACK_IMPORTED_MODULE_12__.StyleUpdateType.LAYOUT_CHANGED,data:{layer:i.id,layout:i.layout}});break;case _engine_vectorTiles_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_17__.StyleLayerType.LINE:i.getPaintProperty("line-pattern")&&this._styleChanges.push({type:_engine_vectorTiles_enums_js__WEBPACK_IMPORTED_MODULE_12__.StyleUpdateType.PAINTER_CHANGED,data:{layer:i.id,paint:i.paint,isDataDriven:i.isPainterDataDriven()}});break;case _engine_vectorTiles_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_17__.StyleLayerType.FILL:i.getLayoutProperty("fill-pattern")&&this._styleChanges.push({type:_engine_vectorTiles_enums_js__WEBPACK_IMPORTED_MODULE_12__.StyleUpdateType.PAINTER_CHANGED,data:{layer:i.id,paint:i.paint,isDataDriven:i.isPainterDataDriven()}})}this.requestUpdate()}))])}detach(){this._stop(),this.container.removeAllChildren(),this._vectorTileContainer=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.destroyMaybe)(this._vectorTileContainer),this._tileHandler=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.destroyMaybe)(this._tileHandler)}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}supportsSpatialReference(e){return (0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_11__.equals)(this.layer.tileInfo?.spatialReference,e)}canResume(){let e=super.canResume();const{currentStyleInfo:t}=this.layer;if(e&&t?.layerDefinition){const i=this.view.scale,{minScale:s,maxScale:r}=t.layerDefinition;t?.layerDefinition&&(s&&s<i&&(e=!1),r&&r>i&&(e=!1))}return e}isUpdating(){return this.fading}acquireTile(e){const t=this._createVectorTile(e);return this._updatingHandles.addPromise(this._fetchQueue.push(t.key).then((e=>this._parseQueue.push({key:t.key,data:e}))).then((e=>{t.once("attach",(()=>this.requestUpdate())),t.setData(e),this.requestUpdate()})).catch((e=>{(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__.isAbortError)(e)||_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger(this).error(e)}))),t}releaseTile(e){const t=e.key.id;this._fetchQueue.abort(t),this._parseQueue.abort(t),this.requestUpdate()}_start(){if(this._stop(),this._tileManager=new _engine_vectorTiles_TileManager_js__WEBPACK_IMPORTED_MODULE_14__.TileManager({acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),tileInfoView:this._tileInfoView},this._vectorTileContainer),!this.layer.currentStyleInfo)return;const e=new AbortController,t=this._tileHandler.start({signal:e.signal}).then((()=>{this._fetchQueue=new _tiling_TileQueue_js__WEBPACK_IMPORTED_MODULE_21__["default"]({tileInfoView:this._tileInfoView,process:(e,t)=>this._getTileData(e,t),concurrency:15}),this._parseQueue=new _tiling_TileQueue_js__WEBPACK_IMPORTED_MODULE_21__["default"]({tileInfoView:this._tileInfoView,process:(e,t)=>this._parseTileData(e,t),concurrency:8}),this.requestUpdate(),this._isTileHandlerReady=!0}));this._tileHandler.spriteMosaic.then((e=>{this._vectorTileContainer.setStyleResources(e,this._tileHandler.glyphMosaic,this._styleRepository),this.requestUpdate()})),this._tileHandlerAbortController=e,this._tileHandlerPromise=t}_stop(){if(!this._tileHandlerAbortController||!this._vectorTileContainer)return;const e=this._tileHandlerAbortController;e&&e.abort(),this._tileHandlerPromise=null,this._isTileHandlerReady=!1,this._fetchQueue=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.destroyMaybe)(this._fetchQueue),this._parseQueue=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.destroyMaybe)(this._parseQueue),this._tileManager=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.destroyMaybe)(this._tileManager),this._vectorTileContainer.removeAllChildren()}async _getTileData(e,t){return this._tileHandler.fetchTileData(e,t)}async _parseTileData(e,t){return this._tileHandler.parseTileData(e,t)}async _applyStyleChanges(){this._isTileHandlerReady=!1,this._fetchQueue.pause(),this._parseQueue.pause(),this._fetchQueue.clear(),this._parseQueue.clear(),this._tileManager.clearCache();const e=this._styleChanges;try{await this._tileHandler.updateStyle(e)}catch(l){_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger(this).error("error applying vector-tiles style update",l.message),this._fetchQueue.resume(),this._parseQueue.resume(),this._isTileHandlerReady=!0}const t=this._styleRepository,i=new Set;e.forEach((e=>{if(e.type!==_engine_vectorTiles_enums_js__WEBPACK_IMPORTED_MODULE_12__.StyleUpdateType.LAYER_REMOVED)return;const s=e.data,r=t.getLayerById(s.layer);r&&i.add(r.uid)}));const r=new Set;e.forEach((e=>{let i;switch(e.type){case _engine_vectorTiles_enums_js__WEBPACK_IMPORTED_MODULE_12__.StyleUpdateType.PAINTER_CHANGED:t.setPaintProperties(e.data.layer,e.data.paint),i=e.data.layer;break;case _engine_vectorTiles_enums_js__WEBPACK_IMPORTED_MODULE_12__.StyleUpdateType.LAYOUT_CHANGED:t.setLayoutProperties(e.data.layer,e.data.layout),i=e.data.layer;break;case _engine_vectorTiles_enums_js__WEBPACK_IMPORTED_MODULE_12__.StyleUpdateType.LAYER_REMOVED:return void t.deleteStyleLayer(e.data.layer);case _engine_vectorTiles_enums_js__WEBPACK_IMPORTED_MODULE_12__.StyleUpdateType.LAYER_CHANGED:t.setStyleLayer(e.data.layer,e.data.index),i=e.data.layer.id;break;case _engine_vectorTiles_enums_js__WEBPACK_IMPORTED_MODULE_12__.StyleUpdateType.SPRITES_CHANGED:this._vectorTileContainer.setSpriteMosaic(this._tileHandler.setSpriteSource(e.data.spriteSource))}if(i){const e=t.getLayerById(i);e&&r.add(e.uid)}}));const a=this._vectorTileContainer.children;if(i.size>0){const e=Array.from(i);this._vectorTileContainer.deleteStyleLayers(e);for(const t of a)t.deleteLayerData(e)}if(this._fetchQueue.resume(),this._parseQueue.resume(),r.size>0){const e=Array.from(r),t=[];for(const i of a){const s=this._updatingHandles.addPromise(this._fetchQueue.push(i.key).then((t=>this._parseQueue.push({key:i.key,data:t,styleLayerUIDs:e}))).then((e=>i.setData(e))));t.push(s)}await Promise.all(t)}this._styleChanges=[],this._isTileHandlerReady=!0,this.requestUpdate()}async _loadStyle(){const{style:e}=this.layer.currentStyleInfo,t=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_2__.clone)(e);this._isTileHandlerReady=!1,this._fetchQueue.pause(),this._parseQueue.pause(),this._fetchQueue.clear(),this._parseQueue.clear(),this._styleRepository=new _engine_vectorTiles_style_StyleRepository_js__WEBPACK_IMPORTED_MODULE_18__["default"](t),this._vectorTileContainer.destroy(),this._tileManager.clear(),this._tileHandlerAbortController.abort(),this._tileHandlerAbortController=new AbortController;const{signal:s}=this._tileHandlerAbortController;try{this._tileHandlerPromise=this._tileHandler.setStyle(this._styleRepository,t),await this._tileHandlerPromise}catch(l){if(!(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__.isAbortError)(l))throw l}if(s.aborted)return this._fetchQueue.resume(),this._parseQueue.resume(),this._isTileHandlerReady=!0,void this.requestUpdate();const r=await this._tileHandler.spriteMosaic;this._vectorTileContainer.setStyleResources(r,this._tileHandler.glyphMosaic,this._styleRepository),this._fetchQueue.resume(),this._parseQueue.resume(),this._isTileHandlerReady=!0,this.requestUpdate()}_createVectorTile(e){const t=this._tileInfoView.getTileBounds((0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_10__.create)(),e),i=this._tileInfoView.getTileResolution(e.level);return new _engine_vectorTiles_VectorTile_js__WEBPACK_IMPORTED_MODULE_15__.VectorTile(e,i,t[0],t[3],512,512,this._styleRepository)}};function D(e){if(null==e)return 0;switch(e.type){case"partial":return Object.keys(e.diff).length;case"complete":return Math.max(Object.keys(e.oldValue).length,Object.keys(e.newValue).length);case"collection":return Object.keys(e.added).length+Object.keys(e.changed).length+Object.keys(e.removed).length}}(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)()],v.prototype,"_isTileHandlerReady",void 0),v=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__.subclass)("esri.views.2d.layers.VectorTileLayerView2D")],v);const w=v;


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfYXJjZ2lzX2NvcmVfc3ltYm9sc19jaW1fcmFzdGVyaXppbmdVdGlsc19qcy1ub2RlX21vZHVsZXNfYXJjZ2lzX2NvcmVfdmllLWRhYmIxZS5idW5kbGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDdUMsb0JBQW9CLFFBQVEsb0RBQUMsUUFBUSxZQUFZLElBQUkscUNBQXFDLGtCQUFrQixRQUFRLFlBQVksSUFBSSxtQkFBbUIsU0FBUyx1SEFBdUgsY0FBYyx1QkFBdUU7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0puWjtBQUNBO0FBQ0E7QUFDQTtBQUNpSCw2SEFBNkgsa0JBQWtCLFFBQVEsa0VBQUMscUNBQXFDLHFCQUFxQiwyQkFBMkIsMnJCQUEyckIsc0VBQXNFLE1BQU0sWUFBWSxXQUFXLDhEQUE4RCwyQkFBMkIsZ0JBQWdCLDJDQUEyQywrQkFBK0IsbUJBQW1CLFFBQVEsc0JBQXNCLHVEQUF1RCxzQkFBc0Isa0JBQWtCLGVBQWUsS0FBSyxFQUFFLFNBQVMsS0FBSyxJQUFJLEVBQUUsb0RBQW9ELCtMQUErTCxJQUFJLEtBQUssdUNBQXVDLFlBQVksSUFBSSxLQUFLLG1DQUFtQyxpRUFBQyxVQUFVLGNBQWtFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKajVEO0FBQ0E7QUFDQTtBQUNBO0FBQzJJLHlDQUF5QyxRQUFRLGlCQUFpQix3Q0FBd0MsdURBQUMsdUxBQXVMLFVBQVUseUNBQXlDLDhEQUE4RCxVQUFVLHlCQUF5Qix1RUFBdUUsZUFBZSxNQUFNLGtCQUFrQixJQUFJLFFBQVEscUNBQXFDLFVBQVUsd0JBQXdCLGlCQUFpQixLQUFLLEtBQUssUUFBUSwwREFBQyxpRkFBaUYseURBQXlELDBEQUFDLEtBQUsseUNBQXlDLDREQUE0RCxTQUFTLDRJQUE0SSw0REFBNEQsT0FBTywrREFBQyxvQkFBb0IsUUFBUSx1RUFBdUUsYUFBYSx3QkFBd0Isc0NBQXNDLFdBQVcsZ0VBQWdFLHNCQUFz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V0FBVywwRUFBQyxnREFBZ0QsY0FBYyxvQkFBb0IsZUFBZSxnREFBZ0QsOEZBQThGLGlIQUFpSCx1REFBQyxFQUFFLHNGQUFDLGdEQUFnRCx1REFBQyxFQUFFLHNGQUFDLG1EQUFtRCxVQUErQiIsInNvdXJjZXMiOlsid2VicGFjazovL3N5bnZpZXcvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL2NvcmUvZmxvYXRSR0JBLmpzIiwid2VicGFjazovL3N5bnZpZXcvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3N5bWJvbHMvY2ltL3Jhc3Rlcml6aW5nVXRpbHMuanMiLCJ3ZWJwYWNrOi8vc3ludmlldy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvMmQvZW5naW5lL3ZlY3RvclRpbGVzL1RpbGVNYW5hZ2VyLmpzIiwid2VicGFjazovL3N5bnZpZXcvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzJkL2VuZ2luZS92ZWN0b3JUaWxlcy9WZWN0b3JUaWxlQ29udGFpbmVyLmpzIiwid2VicGFjazovL3N5bnZpZXcvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzJkL2VuZ2luZS92ZWN0b3JUaWxlcy9kZWNsdXR0ZXJpbmcvU3ltYm9sRmFkZXIuanMiLCJ3ZWJwYWNrOi8vc3ludmlldy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvMmQvZW5naW5lL3ZlY3RvclRpbGVzL2VudW1zLmpzIiwid2VicGFjazovL3N5bnZpZXcvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzJkL2VuZ2luZS93ZWJnbC9UaWxlQ29udGFpbmVyLmpzIiwid2VicGFjazovL3N5bnZpZXcvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzJkL2xheWVycy9WZWN0b3JUaWxlTGF5ZXJWaWV3MkQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtjbGFtcCBhcyB0fWZyb21cIi4vbWF0aFV0aWxzLmpzXCI7ZnVuY3Rpb24gbyhvLHIsZT0wKXtjb25zdCBpPXQobywwLGYpO2ZvcihsZXQgdD0wO3Q8NDt0KyspcltlK3RdPU1hdGguZmxvb3IoMjU2KmwoaSpuW3RdKSl9ZnVuY3Rpb24gcih0LG89MCl7bGV0IHI9MDtmb3IobGV0IG49MDtuPDQ7bisrKXIrPXRbbytuXSplW25dO3JldHVybiByfWNvbnN0IG49WzEsMjU2LDY1NTM2LDE2Nzc3MjE2XSxlPVsxLzI1NiwxLzY1NTM2LDEvMTY3NzcyMTYsMS80Mjk0OTY3Mjk2XSxmPXIobmV3IFVpbnQ4Q2xhbXBlZEFycmF5KFsyNTUsMjU1LDI1NSwyNTVdKSk7ZnVuY3Rpb24gbCh0KXtyZXR1cm4gdC1NYXRoLmZsb29yKHQpfWV4cG9ydHtvIGFzIHBhY2tGbG9hdFJHQkEsciBhcyB1bnBhY2tGbG9hdFJHQkF9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtwYWNrRmxvYXRSR0JBIGFzIG99ZnJvbVwiLi4vLi4vY29yZS9mbG9hdFJHQkEuanNcIjtpbXBvcnR7bmV4dFBvd2VyT2ZUd28gYXMgdH1mcm9tXCIuLi8uLi9jb3JlL21hdGhVdGlscy5qc1wiO2NvbnN0IGE9bz0+XCJ2ZXJ0aWNhbFwiPT09b3x8XCJob3Jpem9udGFsXCI9PT1vfHxcImNyb3NzXCI9PT1vfHxcImVzcmlTRlNDcm9zc1wiPT09b3x8XCJlc3JpU0ZTVmVydGljYWxcIj09PW98fFwiZXNyaVNGU0hvcml6b250YWxcIj09PW87ZnVuY3Rpb24gcihvLHIsZSl7Y29uc3QgaT10KE1hdGguY2VpbChlKSksbj1hKHIpPzgqaToxNippLHM9MippO28ud2lkdGg9bixvLmhlaWdodD1uO2NvbnN0IGw9by5nZXRDb250ZXh0KFwiMmRcIik7bC5zdHJva2VTdHlsZT1cIiNGRkZGRkZcIixsLmxpbmVXaWR0aD1pLGwuYmVnaW5QYXRoKCksXCJ2ZXJ0aWNhbFwiIT09ciYmXCJjcm9zc1wiIT09ciYmXCJlc3JpU0ZTQ3Jvc3NcIiE9PXImJlwiZXNyaVNGU1ZlcnRpY2FsXCIhPT1yfHwobC5tb3ZlVG8obi8yLC1zKSxsLmxpbmVUbyhuLzIsbitzKSksXCJob3Jpem9udGFsXCIhPT1yJiZcImNyb3NzXCIhPT1yJiZcImVzcmlTRlNDcm9zc1wiIT09ciYmXCJlc3JpU0ZTSG9yaXpvbnRhbFwiIT09cnx8KGwubW92ZVRvKC1zLG4vMiksbC5saW5lVG8obitzLG4vMikpLFwiZm9yd2FyZC1kaWFnb25hbFwiIT09ciYmXCJkaWFnb25hbC1jcm9zc1wiIT09ciYmXCJlc3JpU0ZTRGlhZ29uYWxDcm9zc1wiIT09ciYmXCJlc3JpU0ZTRm9yd2FyZERpYWdvbmFsXCIhPT1yfHwobC5tb3ZlVG8oLXMsLXMpLGwubGluZVRvKG4rcyxuK3MpLGwubW92ZVRvKG4tcywtcyksbC5saW5lVG8obitzLHMpLGwubW92ZVRvKC1zLG4tcyksbC5saW5lVG8ocyxuK3MpKSxcImJhY2t3YXJkLWRpYWdvbmFsXCIhPT1yJiZcImRpYWdvbmFsLWNyb3NzXCIhPT1yJiZcImVzcmlTRlNCYWNrd2FyZERpYWdvbmFsXCIhPT1yJiZcImVzcmlTRlNEaWFnb25hbENyb3NzXCIhPT1yfHwobC5tb3ZlVG8obitzLC1zKSxsLmxpbmVUbygtcyxuK3MpLGwubW92ZVRvKHMsLXMpLGwubGluZVRvKC1zLHMpLGwubW92ZVRvKG4rcyxuLXMpLGwubGluZVRvKG4tcyxuK3MpKSxsLnN0cm9rZSgpO2NvbnN0IGg9bC5nZXRJbWFnZURhdGEoMCwwLG8ud2lkdGgsby5oZWlnaHQpLGM9bmV3IFVpbnQ4QXJyYXkoaC5kYXRhKTtsZXQgbTtmb3IobGV0IHQ9MDt0PGMubGVuZ3RoO3QrPTQpbT1jW3QrM10vMjU1LGNbdF09Y1t0XSptLGNbdCsxXT1jW3QrMV0qbSxjW3QrMl09Y1t0KzJdKm07cmV0dXJuW2Msby53aWR0aCxvLmhlaWdodF19ZnVuY3Rpb24gZSh0LGEpe2NvbnN0IHI9XCJCdXR0XCI9PT1hLGU9XCJTcXVhcmVcIj09PWEsaT0hciYmIWU7dC5sZW5ndGglMj09MSYmKHQ9Wy4uLnQsLi4udF0pO2NvbnN0IG49MTUuNSxzPTIqbjtsZXQgbD0wO2Zvcihjb25zdCBvIG9mIHQpbCs9bztjb25zdCBoPU1hdGgucm91bmQobCpuKSxjPW5ldyBGbG9hdDMyQXJyYXkoaCpzKSxtPS41Km47bGV0IFM9MCxGPTAsZz0uNSxUPSEwO2Zvcihjb25zdCBvIG9mIHQpe2ZvcihTPUYsRis9bypuO2c8PUY7KXtsZXQgbz0uNTtmb3IoO288czspe2NvbnN0IHQ9KG8tLjUpKmgrZy0uNSxhPWk/KG8tbikqKG8tbik6TWF0aC5hYnMoby1uKTtjW3RdPVQ/cj9NYXRoLm1heChNYXRoLm1heChTK20tZyxhKSxNYXRoLm1heChnLUYrbSxhKSk6YTppP01hdGgubWluKChnLVMpKihnLVMpK2EsKGctRikqKGctRikrYSk6ZT9NYXRoLm1pbihNYXRoLm1heChnLVMsYSksTWF0aC5tYXgoRi1nLGEpKTpNYXRoLm1pbihNYXRoLm1heChnLVMrbSxhKSxNYXRoLm1heChGK20tZyxhKSksbysrfWcrK31UPSFUfWNvbnN0IGQ9Yy5sZW5ndGgsZj1uZXcgVWludDhBcnJheSg0KmQpO2ZvcihsZXQgTT0wO008ZDsrK00pe2NvbnN0IHQ9KGk/TWF0aC5zcXJ0KGNbTV0pOmNbTV0pL247byh0LGYsNCpNKX1yZXR1cm5bZixoLHNdfWV4cG9ydHtlIGFzIHJhc3Rlcml6ZURhc2gsciBhcyByYXN0ZXJpemVTaW1wbGVGaWxsfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7TFJVQ2FjaGUgYXMgZX1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL0xSVUNhY2hlLmpzXCI7aW1wb3J0IGkgZnJvbVwiLi4vLi4vdGlsaW5nL1RpbGVDb3ZlcmFnZS5qc1wiO2ltcG9ydCB0IGZyb21cIi4uLy4uL3RpbGluZy9UaWxlS2V5LmpzXCI7Y29uc3QgbD01MTIscz0xZS02LHI9KGUsaSk9PmUrMS8oMTw8MippKTtjbGFzcyBve2NvbnN0cnVjdG9yKGksdCl7dGhpcy5fdGlsZXM9bmV3IE1hcCx0aGlzLl90aWxlQ2FjaGU9bmV3IGUoNDAsKGU9PmUuZGlzcG9zZSgpKSksdGhpcy5fdmlld1NpemU9WzAsMF0sdGhpcy5fdmlzaWJsZVRpbGVzPW5ldyBNYXAsdGhpcy5hY3F1aXJlVGlsZT1pLmFjcXVpcmVUaWxlLHRoaXMucmVsZWFzZVRpbGU9aS5yZWxlYXNlVGlsZSx0aGlzLnRpbGVJbmZvVmlldz1pLnRpbGVJbmZvVmlldyx0aGlzLl9jb250YWluZXI9dH1kZXN0cm95KCl7Zm9yKGNvbnN0W2UsaV1vZiB0aGlzLl90aWxlcylpLmRpc3Bvc2UoKTt0aGlzLl90aWxlcz1udWxsLHRoaXMuX3RpbGVDYWNoZS5jbGVhcigpLHRoaXMuX3RpbGVDYWNoZT1udWxsfXVwZGF0ZShlKXt0aGlzLl91cGRhdGVDYWNoZVNpemUoZSk7Y29uc3QgbD10aGlzLnRpbGVJbmZvVmlldyxzPWwuZ2V0VGlsZUNvdmVyYWdlKGUuc3RhdGUsMCwhMCxcInNtYWxsZXN0XCIpO2lmKCFzKXJldHVybiEwO2NvbnN0e3NwYW5zOnIsbG9kSW5mbzpvfT1zLHtsZXZlbDpufT1vLGE9dGhpcy5fdGlsZXMsYz1uZXcgU2V0LGg9bmV3IFNldDtmb3IoY29uc3R7cm93OmksY29sRnJvbTpfLGNvbFRvOmZ9b2Ygcilmb3IobGV0IGU9XztlPD1mO2UrKyl7Y29uc3QgbD10LmdldElkKG4saSxvLm5vcm1hbGl6ZUNvbChlKSxvLmdldFdvcmxkRm9yQ29sdW1uKGUpKSxzPXRoaXMuX2dldE9yQWNxdWlyZVRpbGUobCk7Yy5hZGQobCkscy5wcm9jZXNzZWQoKT90aGlzLl9hZGRUb0NvbnRhaW5lcihzKTpoLmFkZChuZXcgdChsKSl9Zm9yKGNvbnN0W2ksdF1vZiBhKXQuaXNDb3ZlcmFnZT1jLmhhcyhpKTtmb3IoY29uc3QgaSBvZiBoKXRoaXMuX2ZpbmRQbGFjZWhvbGRlcnNGb3JNaXNzaW5nVGlsZXMoaSxjKTtsZXQgZD0hMTtmb3IoY29uc3RbaSx0XW9mIGEpdC5uZWVkZWRGb3JDb3ZlcmFnZT1jLmhhcyhpKSx0Lm5lZWRlZEZvckNvdmVyYWdlfHx0LmlzSG9sZGluZ0ZvckZhZGUmJmwuaW50ZXJzZWN0cyhzLHQua2V5KSYmYy5hZGQoaSksdC5pc0ZhZGluZyYmKGQ9ITApO2Zvcihjb25zdFtpLHRdb2YgdGhpcy5fdGlsZXMpYy5oYXMoaSl8fHRoaXMuX3JlbGVhc2VUaWxlKGkpO3JldHVybiBpLnBvb2wucmVsZWFzZShzKSwhZH1jbGVhcigpe3RoaXMuX3RpbGVzLmNsZWFyKCksdGhpcy5fdGlsZUNhY2hlLmNsZWFyKCksdGhpcy5fdmlzaWJsZVRpbGVzLmNsZWFyKCl9Y2xlYXJDYWNoZSgpe3RoaXMuX3RpbGVDYWNoZS5jbGVhcigpfV9maW5kUGxhY2Vob2xkZXJzRm9yTWlzc2luZ1RpbGVzKGUsaSl7Y29uc3QgdD1bXTtmb3IoY29uc3RbcyxyXW9mIHRoaXMuX3RpbGVzKXRoaXMuX2FkZFBsYWNlaG9sZGVyQ2hpbGQodCxyLGUsaSk7Y29uc3QgbD10LnJlZHVjZShyLDApO01hdGguYWJzKDEtbCk8c3x8dGhpcy5fYWRkUGxhY2Vob2xkZXJQYXJlbnQoZS5pZCxpKX1fYWRkUGxhY2Vob2xkZXJDaGlsZChlLGksdCxsKXtpLmtleS5sZXZlbDw9dC5sZXZlbHx8IWkuaGFzRGF0YSgpfHxhKHQsaS5rZXkpJiYodGhpcy5fYWRkVG9Db250YWluZXIoaSksbC5hZGQoaS5pZCksZS5wdXNoKGkua2V5LmxldmVsLXQubGV2ZWwpKX1fYWRkUGxhY2Vob2xkZXJQYXJlbnQoZSxpKXtjb25zdCB0PXRoaXMuX3RpbGVzO2xldCBsPWU7Zm9yKDs7KXtpZihsPW4obCksIWx8fGkuaGFzKGwpKXJldHVybjtjb25zdCBlPXQuZ2V0KGwpO2lmKGUmJmUuaGFzRGF0YSgpKXJldHVybiB0aGlzLl9hZGRUb0NvbnRhaW5lcihlKSx2b2lkIGkuYWRkKGUuaWQpfX1fZ2V0T3JBY3F1aXJlVGlsZShlKXtsZXQgaT10aGlzLl90aWxlcy5nZXQoZSk7cmV0dXJuIGl8fChpPXRoaXMuX3RpbGVDYWNoZS5wb3AoZSksaXx8KGk9dGhpcy5hY3F1aXJlVGlsZShuZXcgdChlKSkpLHRoaXMuX3RpbGVzLnNldChlLGkpLGkpfV9yZWxlYXNlVGlsZShlKXtjb25zdCBpPXRoaXMuX3RpbGVzLmdldChlKTt0aGlzLnJlbGVhc2VUaWxlKGkpLHRoaXMuX3JlbW92ZUZyb21Db250YWluZXIoaSksdGhpcy5fdGlsZXMuZGVsZXRlKGUpLGkuaGFzRGF0YSgpP3RoaXMuX3RpbGVDYWNoZS5wdXQoZSxpLDEpOmkuZGlzcG9zZSgpfV9hZGRUb0NvbnRhaW5lcihlKXtsZXQgaTtjb25zdCB0PVtdLGw9dGhpcy5fY29udGFpbmVyO2lmKGwuY29udGFpbnMoZSkpcmV0dXJuO2NvbnN0IHM9dGhpcy5fdmlzaWJsZVRpbGVzO2Zvcihjb25zdFtyLG9db2Ygcyl0aGlzLl9jYW5Db25uZWN0RGlyZWN0bHkoZSxvKSYmdC5wdXNoKG8pLG51bGw9PWkmJnRoaXMuX2NhbkNvbm5lY3REaXJlY3RseShvLGUpJiYoaT1vKTtpZihudWxsIT1pKXtmb3IoY29uc3QgbCBvZiB0KWkuY2hpbGRyZW5UaWxlcy5kZWxldGUobCksZS5jaGlsZHJlblRpbGVzLmFkZChsKSxsLnBhcmVudFRpbGU9ZTtpLmNoaWxkcmVuVGlsZXMuYWRkKGUpLGUucGFyZW50VGlsZT1pfWVsc2UgZm9yKGNvbnN0IHIgb2YgdCllLmNoaWxkcmVuVGlsZXMuYWRkKHIpLHIucGFyZW50VGlsZT1lO3Muc2V0KGUuaWQsZSksbC5hZGRDaGlsZChlKX1fcmVtb3ZlRnJvbUNvbnRhaW5lcihlKXtpZih0aGlzLl92aXNpYmxlVGlsZXMuZGVsZXRlKGUuaWQpLHRoaXMuX2NvbnRhaW5lci5yZW1vdmVDaGlsZChlKSxudWxsIT1lLnBhcmVudFRpbGUpe2UucGFyZW50VGlsZS5jaGlsZHJlblRpbGVzLmRlbGV0ZShlKTtmb3IoY29uc3QgaSBvZiBlLmNoaWxkcmVuVGlsZXMpbnVsbCE9ZS5wYXJlbnRUaWxlJiZlLnBhcmVudFRpbGUuY2hpbGRyZW5UaWxlcy5hZGQoaSl9Zm9yKGNvbnN0IGkgb2YgZS5jaGlsZHJlblRpbGVzKWkucGFyZW50VGlsZT1lLnBhcmVudFRpbGU7ZS5wYXJlbnRUaWxlPW51bGwsZS5jaGlsZHJlblRpbGVzLmNsZWFyKCl9X2NhbkNvbm5lY3REaXJlY3RseShlLGkpe2NvbnN0IHQ9ZS5rZXk7bGV0e2xldmVsOmwscm93OnMsY29sOnIsd29ybGQ6b309aS5rZXk7Y29uc3Qgbj10aGlzLl92aXNpYmxlVGlsZXM7Zm9yKDtsPjA7KXtpZihsLS0scz4+PTEscj4+PTEsdC5sZXZlbD09PWwmJnQucm93PT09cyYmdC5jb2w9PT1yJiZ0LndvcmxkPT09bylyZXR1cm4hMDtpZihuLmhhcyhgJHtsfS8ke3N9LyR7cn0vJHtvfWApKXJldHVybiExfXJldHVybiExfV91cGRhdGVDYWNoZVNpemUoZSl7Y29uc3QgaT1lLnN0YXRlLnNpemU7aWYoaVswXT09PXRoaXMuX3ZpZXdTaXplWzBdJiZpWzFdPT09dGhpcy5fdmlld1NpemVbMV0pcmV0dXJuO2NvbnN0IHQ9TWF0aC5jZWlsKGlbMF0vbCkrMSxzPU1hdGguY2VpbChpWzFdL2wpKzE7dGhpcy5fdmlld1NpemVbMF09aVswXSx0aGlzLl92aWV3U2l6ZVsxXT1pWzFdLHRoaXMuX3RpbGVDYWNoZS5tYXhTaXplPTUqdCpzfX1mdW5jdGlvbiBuKGUpe2NvbnN0W2ksdCxsLHNdPWUuc3BsaXQoXCIvXCIpLHI9cGFyc2VJbnQoaSwxMCk7cmV0dXJuIDA9PT1yP251bGw6YCR7ci0xfS8ke3BhcnNlSW50KHQsMTApPj4xfS8ke3BhcnNlSW50KGwsMTApPj4xfS8ke3BhcnNlSW50KHMsMTApfWB9ZnVuY3Rpb24gYShlLGkpe2NvbnN0IHQ9aS5sZXZlbC1lLmxldmVsO3JldHVybiBlLnJvdz09PWkucm93Pj50JiZlLmNvbD09PWkuY29sPj50JiZlLndvcmxkPT09aS53b3JsZH1leHBvcnR7byBhcyBUaWxlTWFuYWdlcn07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e2NyZWF0ZVJlc29sdmVyIGFzIGV9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9wcm9taXNlVXRpbHMuanNcIjtpbXBvcnR7Y3JlYXRlIGFzIHR9ZnJvbVwiLi4vLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9hYUJvdW5kaW5nUmVjdC5qc1wiO2ltcG9ydHtTeW1ib2xGYWRlciBhcyBzfWZyb21cIi4vZGVjbHV0dGVyaW5nL1N5bWJvbEZhZGVyLmpzXCI7aW1wb3J0e1Zpc2liaWxpdHkgYXMgcixTdHlsZUxheWVyVHlwZSBhcyBpfWZyb21cIi4vc3R5bGUvU3R5bGVEZWZpbml0aW9uLmpzXCI7aW1wb3J0e1dHTERyYXdQaGFzZSBhcyBsfWZyb21cIi4uL3dlYmdsL2VudW1zLmpzXCI7aW1wb3J0e1JlbmRlcmFibGVUaWxlIGFzIG99ZnJvbVwiLi4vd2ViZ2wvUmVuZGVyYWJsZVRpbGUuanNcIjtpbXBvcnQgbiBmcm9tXCIuLi93ZWJnbC9UaWxlQ29udGFpbmVyLmpzXCI7aW1wb3J0IGEgZnJvbVwiLi4vLi4vdGlsaW5nL1RpbGVDb3ZlcmFnZS5qc1wiO2ltcG9ydCBkIGZyb21cIi4uLy4uL3RpbGluZy9UaWxlS2V5LmpzXCI7aW1wb3J0e1N0ZW5jaWxPcGVyYXRpb24gYXMgaCxDb21wYXJlRnVuY3Rpb24gYXMgYyxCbGVuZEZhY3RvciBhcyB1fWZyb21cIi4uLy4uLy4uL3dlYmdsL2VudW1zLmpzXCI7Y29uc3QgeT0xZS02O2Z1bmN0aW9uIHAoZSx0KXtpZihlKXtjb25zdCBzPWUuZ2V0TGF5b3V0UHJvcGVydHkoXCJ2aXNpYmlsaXR5XCIpO2lmKCFzfHxzLmdldFZhbHVlKCkhPT1yLk5PTkUmJih2b2lkIDA9PT1lLm1pbnpvb218fGUubWluem9vbTx0K3kpJiYodm9pZCAwPT09ZS5tYXh6b29tfHxlLm1heHpvb20+PXQteSkpcmV0dXJuITB9cmV0dXJuITF9Y2xhc3MgbSBleHRlbmRzIG57Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5fYmFja2dyb3VuZFRpbGVzPVtdLHRoaXMuX3BvaW50VG9DYWxsYmFja3M9bmV3IE1hcH1kZXN0cm95KCl7dGhpcy5yZW1vdmVBbGxDaGlsZHJlbigpLHRoaXMuX3Nwcml0ZU1vc2FpYz8uZGlzcG9zZSgpLHRoaXMuX3Nwcml0ZU1vc2FpYz1udWxsLHRoaXMuX2dseXBoTW9zYWljPy5kaXNwb3NlKCksdGhpcy5fZ2x5cGhNb3NhaWM9bnVsbCxudWxsIT10aGlzLl9zeW1ib2xGYWRlciYmKHRoaXMuX3N5bWJvbEZhZGVyLmNsZWFyKCksdGhpcy5fc3ltYm9sRmFkZXI9bnVsbCksdGhpcy5fc3R5bGVSZXBvc2l0b3J5PW51bGwsdGhpcy5fYmFja2dyb3VuZFRpbGVzPVtdLHRoaXMuX3BvaW50VG9DYWxsYmFja3MuY2xlYXIoKX1nZXQgZmFkaW5nKCl7cmV0dXJuIHRoaXMuX3N5bWJvbEZhZGVyPy5mYWRpbmc/PyExfXNldFN0eWxlUmVzb3VyY2VzKGUsdCxyKXt0aGlzLl9zcHJpdGVNb3NhaWM9ZSx0aGlzLl9nbHlwaE1vc2FpYz10LHRoaXMuX3N0eWxlUmVwb3NpdG9yeT1yLG51bGw9PXRoaXMuX3N5bWJvbEZhZGVyJiYodGhpcy5fc3ltYm9sRmFkZXI9bmV3IHModGhpcy5fc3R5bGVSZXBvc2l0b3J5LHRoaXMuY2hpbGRyZW4pKSx0aGlzLl9zeW1ib2xGYWRlci5zdHlsZVJlcG9zaXRvcnk9cn1zZXRTcHJpdGVNb3NhaWMoZSl7dGhpcy5fc3ByaXRlTW9zYWljPy5kaXNwb3NlKCksdGhpcy5fc3ByaXRlTW9zYWljPWV9ZGVsZXRlU3R5bGVMYXllcnMoZSl7bnVsbCE9dGhpcy5fc3ltYm9sRmFkZXImJnRoaXMuX3N5bWJvbEZhZGVyLmRlbGV0ZVN0eWxlTGF5ZXJzKGUpfWFzeW5jIGhpdFRlc3QodCl7Y29uc3Qgcz1lKCk7cmV0dXJuIHRoaXMuX3BvaW50VG9DYWxsYmFja3Muc2V0KHQscyksdGhpcy5yZXF1ZXN0UmVuZGVyKCkscy5wcm9taXNlfWNyZWF0ZVJlbmRlclBhcmFtcyhlKXtyZXR1cm57Li4uc3VwZXIuY3JlYXRlUmVuZGVyUGFyYW1zKGUpLHJlbmRlclBhc3M6bnVsbCxzdHlsZUxheWVyOm51bGwsc3R5bGVMYXllclVJRDotMSxnbHlwaE1vc2FpYzp0aGlzLl9nbHlwaE1vc2FpYyxzcHJpdGVNb3NhaWM6dGhpcy5fc3ByaXRlTW9zYWljLGhhc0NsaXBwaW5nOiEhdGhpcy5fY2xpcHBpbmdJbmZvc319ZG9SZW5kZXIoZSl7IXRoaXMudmlzaWJsZXx8ZS5kcmF3UGhhc2UhPT1sLk1BUCYmZS5kcmF3UGhhc2UhPT1sLkRFQlVHfHx2b2lkIDA9PT10aGlzLl9zcHJpdGVNb3NhaWN8fHN1cGVyLmRvUmVuZGVyKGUpfWFkZENoaWxkKGUpe3JldHVybiBzdXBlci5hZGRDaGlsZChlKSxudWxsIT10aGlzLl9zeW1ib2xGYWRlcj90aGlzLl9zeW1ib2xGYWRlci5hZGRUaWxlKGUpOmUuZGVjbHV0dGVyZWQ9ITAsdGhpcy5yZXF1ZXN0UmVuZGVyKCksZX1yZW1vdmVDaGlsZChlKXtyZXR1cm4gbnVsbCE9dGhpcy5fc3ltYm9sRmFkZXImJnRoaXMuX3N5bWJvbEZhZGVyLnJlbW92ZVRpbGUoZSksdGhpcy5yZXF1ZXN0UmVuZGVyKCksc3VwZXIucmVtb3ZlQ2hpbGQoZSl9cmVuZGVyQ2hpbGRyZW4oZSl7Y29uc3R7ZHJhd1BoYXNlOnR9PWU7aWYodCE9PWwuREVCVUcpe2lmKHRoaXMuX2RvUmVuZGVyKGUpLHRoaXMuX3BvaW50VG9DYWxsYmFja3Muc2l6ZT4wKXtlLmRyYXdQaGFzZT1sLkhJVFRFU1Q7Y29uc3Qgcz1lLnBhaW50ZXIuZWZmZWN0cy5oaXR0ZXN0VlRMO3MuYmluZChlKSx0aGlzLl9kb1JlbmRlcihlKSxzLmRyYXcoZSx0aGlzLl9wb2ludFRvQ2FsbGJhY2tzKSxzLnVuYmluZChlKSxlLmRyYXdQaGFzZT10fX1lbHNlIHN1cGVyLnJlbmRlckNoaWxkcmVuKGUpfXJlbW92ZUFsbENoaWxkcmVuKCl7Zm9yKGxldCBlPTA7ZTx0aGlzLmNoaWxkcmVuLmxlbmd0aDtlKyspe2NvbnN0IHQ9dGhpcy5jaGlsZHJlbltlXTtudWxsIT10aGlzLl9zeW1ib2xGYWRlciYmdGhpcy5fc3ltYm9sRmFkZXIucmVtb3ZlVGlsZSh0KSx0LmRpc3Bvc2UoKX1zdXBlci5yZW1vdmVBbGxDaGlsZHJlbigpfWdldFN0ZW5jaWxUYXJnZXQoKXtyZXR1cm4gdGhpcy5jaGlsZHJlbi5maWx0ZXIoKGU9PmUubmVlZGVkRm9yQ292ZXJhZ2UmJmUuaGFzRGF0YSgpKSl9cmVzdGFydERlY2x1dHRlcigpe251bGwhPXRoaXMuX3N5bWJvbEZhZGVyJiZ0aGlzLl9zeW1ib2xGYWRlci5yZXN0YXJ0RGVjbHV0dGVyKCl9X2RvUmVuZGVyKGUpe2NvbnN0e2NvbnRleHQ6dH09ZSxzPXRoaXMuX3N0eWxlUmVwb3NpdG9yeTtpZighcylyZXR1cm47Y29uc3Qgcj1zLmxheWVycztsZXQgaT0hMDtlLmRyYXdQaGFzZT09PWwuSElUVEVTVCYmKGk9ITEpLHMuYmFja2dyb3VuZEJ1Y2tldElkcy5sZW5ndGg+MCYmKGUucmVuZGVyUGFzcz1cImJhY2tncm91bmRcIix0aGlzLl9yZW5kZXJCYWNrZ3JvdW5kTGF5ZXJzKGUscy5iYWNrZ3JvdW5kQnVja2V0SWRzKSksc3VwZXIucmVuZGVyQ2hpbGRyZW4oZSksZS5kcmF3UGhhc2U9PT1sLk1BUCYmdGhpcy5fZmFkZShlLmRpc3BsYXlMZXZlbCxlLnN0YXRlKTtjb25zdCBvPXRoaXMuY2hpbGRyZW4uZmlsdGVyKChlPT5lLnZpc2libGUmJmUuaGFzRGF0YSgpKSk7aWYoIW98fDA9PT1vLmxlbmd0aClyZXR1cm4gdC5iaW5kVkFPKCksdC5zZXRTdGVuY2lsVGVzdEVuYWJsZWQoITApLHZvaWQgdC5zZXRCbGVuZGluZ0VuYWJsZWQoITApO2Zvcihjb25zdCBsIG9mIG8pbC50cmlhbmdsZUNvdW50PTA7dC5zZXRTdGVuY2lsV3JpdGVNYXNrKDApLHQuc2V0Q29sb3JNYXNrKCEwLCEwLCEwLCEwKSx0LnNldFN0ZW5jaWxPcChoLktFRVAsaC5LRUVQLGguUkVQTEFDRSksdC5zZXRTdGVuY2lsVGVzdEVuYWJsZWQoITApLHQuc2V0QmxlbmRpbmdFbmFibGVkKCExKSx0LnNldERlcHRoVGVzdEVuYWJsZWQoITApLHQuc2V0RGVwdGhXcml0ZUVuYWJsZWQoITApLHQuc2V0RGVwdGhGdW5jdGlvbihjLkxFUVVBTCksdC5zZXRDbGVhckRlcHRoKDEpLHQuY2xlYXIodC5nbC5ERVBUSF9CVUZGRVJfQklUKSxlLnJlbmRlclBhc3M9XCJvcGFxdWVcIjtmb3IobGV0IGw9ci5sZW5ndGgtMTtsPj0wO2wtLSl0aGlzLl9yZW5kZXJTdHlsZUxheWVyKHJbbF0sZSxvKTt0LnNldERlcHRoV3JpdGVFbmFibGVkKCExKSx0LnNldEJsZW5kaW5nRW5hYmxlZChpKSx0LnNldEJsZW5kRnVuY3Rpb25TZXBhcmF0ZSh1Lk9ORSx1Lk9ORV9NSU5VU19TUkNfQUxQSEEsdS5PTkUsdS5PTkVfTUlOVVNfU1JDX0FMUEhBKSxlLnJlbmRlclBhc3M9XCJ0cmFuc2x1Y2VudFwiO2ZvcihsZXQgbD0wO2w8ci5sZW5ndGg7bCsrKXRoaXMuX3JlbmRlclN0eWxlTGF5ZXIocltsXSxlLG8pO3QuYmluZFZBTygpLHQuc2V0U3RlbmNpbFRlc3RFbmFibGVkKCEwKSx0LnNldEJsZW5kaW5nRW5hYmxlZCghMCl9X2ZhZGUoZSx0KXtudWxsIT10aGlzLl9zeW1ib2xGYWRlciYmKHRoaXMuX3N5bWJvbEZhZGVyLnVwZGF0ZShlLHQpfHx0aGlzLnJlcXVlc3RSZW5kZXIoKSl9X3JlbmRlclN0eWxlTGF5ZXIoZSx0LHMpe2NvbnN0e3BhaW50ZXI6bCxyZW5kZXJQYXNzOm99PXQ7aWYodm9pZCAwPT09ZSlyZXR1cm47Y29uc3Qgbj1lLmdldExheW91dFByb3BlcnR5KFwidmlzaWJpbGl0eVwiKTtpZihuJiZuLmdldFZhbHVlKCk9PT1yLk5PTkUpcmV0dXJuO2xldCBhO3N3aXRjaChlLnR5cGUpe2Nhc2UgaS5CQUNLR1JPVU5EOnJldHVybjtjYXNlIGkuRklMTDppZihcIm9wYXF1ZVwiIT09byYmXCJ0cmFuc2x1Y2VudFwiIT09dC5yZW5kZXJQYXNzKXJldHVybjthPVwidnRsRmlsbFwiO2JyZWFrO2Nhc2UgaS5MSU5FOmlmKFwidHJhbnNsdWNlbnRcIiE9PW8pcmV0dXJuO2E9XCJ2dGxMaW5lXCI7YnJlYWs7Y2FzZSBpLkNJUkNMRTppZihcInRyYW5zbHVjZW50XCIhPT1vKXJldHVybjthPVwidnRsQ2lyY2xlXCI7YnJlYWs7Y2FzZSBpLlNZTUJPTDppZihcInRyYW5zbHVjZW50XCIhPT1vKXJldHVybjthPVwidnRsU3ltYm9sXCJ9aWYocz1lLnR5cGU9PT1pLlNZTUJPTD9zLmZpbHRlcigoZT0+ZS5kZWNsdXR0ZXJlZCkpOnMuZmlsdGVyKChlPT5lLm5lZWRlZEZvckNvdmVyYWdlKSksXCJ2dGxTeW1ib2xcIiE9PWEpe2NvbnN0IHI9dC5kaXNwbGF5TGV2ZWw7aWYoMD09PXMubGVuZ3RofHx2b2lkIDAhPT1lLm1pbnpvb20mJmUubWluem9vbT49cit5fHx2b2lkIDAhPT1lLm1heHpvb20mJmUubWF4em9vbTxyLXkpcmV0dXJufWNvbnN0IGQ9ZS51aWQ7dC5zdHlsZUxheWVyVUlEPWQsdC5zdHlsZUxheWVyPWU7Zm9yKGNvbnN0IHIgb2YgcylpZihyLmxheWVyRGF0YS5oYXMoZCkpe2wucmVuZGVyT2JqZWN0cyh0LHMsYSk7YnJlYWt9fV9yZW5kZXJCYWNrZ3JvdW5kTGF5ZXJzKGUscyl7Y29uc3R7Y29udGV4dDpyLGRpc3BsYXlMZXZlbDpuLHBhaW50ZXI6dSxzdGF0ZTp5fT1lLG09dGhpcy5fc3R5bGVSZXBvc2l0b3J5O2xldCBfPSExO2Zvcihjb25zdCB0IG9mIHMpe2lmKG0uZ2V0TGF5ZXJCeUlkKHQpLnR5cGU9PT1pLkJBQ0tHUk9VTkQmJnAobS5nZXRMYXllckJ5SWQodCksbikpe189ITA7YnJlYWt9fWlmKCFfKXJldHVybjtjb25zdCBiPXRoaXMuX3RpbGVJbmZvVmlldy5nZXRUaWxlQ292ZXJhZ2UoZS5zdGF0ZSwwLCEwLFwic21hbGxlc3RcIikse3NwYW5zOmYsbG9kSW5mbzpnfT1iLHtsZXZlbDpUfT1nLEU9dCgpLEM9W107aWYodGhpcy5fcmVuZGVyUGFzc2VzKXtjb25zdCB0PXRoaXMuX3JlbmRlclBhc3Nlc1swXTtudWxsIT10aGlzLl9jbGlwcGluZ0luZm9zJiYodC5icnVzaGVzWzBdLnByZXBhcmVTdGF0ZShlKSx0LmJydXNoZXNbMF0uZHJhd01hbnkoZSx0aGlzLl9jbGlwcGluZ0luZm9zKSl9Y29uc3QgTD10aGlzLl9iYWNrZ3JvdW5kVGlsZXM7bGV0IHYsRj0wO2Zvcihjb25zdHtyb3c6aSxjb2xGcm9tOmwsY29sVG86YX1vZiBmKWZvcihsZXQgZT1sO2U8PWE7ZSsrKXtpZihGPEwubGVuZ3RoKXY9TFtGXSx2LmtleS5zZXQoVCxpLGcubm9ybWFsaXplQ29sKGUpLGcuZ2V0V29ybGRGb3JDb2x1bW4oZSkpLHRoaXMuX3RpbGVJbmZvVmlldy5nZXRUaWxlQm91bmRzKEUsdi5rZXksITEpLHYueD1FWzBdLHYueT1FWzNdLHYucmVzb2x1dGlvbj10aGlzLl90aWxlSW5mb1ZpZXcuZ2V0VGlsZVJlc29sdXRpb24oVCk7ZWxzZXtjb25zdCBzPW5ldyBkKFQsaSxnLm5vcm1hbGl6ZUNvbChlKSxnLmdldFdvcmxkRm9yQ29sdW1uKGUpKSxyPXRoaXMuX3RpbGVJbmZvVmlldy5nZXRUaWxlQm91bmRzKHQoKSxzKSxsPXRoaXMuX3RpbGVJbmZvVmlldy5nZXRUaWxlUmVzb2x1dGlvbihUKTt2PW5ldyBvKHMsbCxyWzBdLHJbM10sNTEyLDUxMiw0MDk2LDQwOTYpLEwucHVzaCh2KX12LnNldFRyYW5zZm9ybSh5KSxDLnB1c2godiksRisrfXIuc2V0U3RlbmNpbFdyaXRlTWFzaygwKSxyLnNldENvbG9yTWFzayghMCwhMCwhMCwhMCksci5zZXRTdGVuY2lsT3AoaC5LRUVQLGguS0VFUCxoLlJFUExBQ0UpLHIuc2V0U3RlbmNpbEZ1bmN0aW9uKGMuRVFVQUwsMCwyNTUpO2xldCBTPSEwO2UuZHJhd1BoYXNlPT09bC5ISVRURVNUJiYoUz0hMSksci5zZXRTdGVuY2lsVGVzdEVuYWJsZWQoUyk7Zm9yKGNvbnN0IHQgb2Ygcyl7Y29uc3Qgcz1tLmdldExheWVyQnlJZCh0KTtzLnR5cGU9PT1pLkJBQ0tHUk9VTkQmJnAocyxuKSYmKGUuc3R5bGVMYXllclVJRD1zLnVpZCxlLnN0eWxlTGF5ZXI9cyx1LnJlbmRlck9iamVjdHMoZSxDLFwidnRsQmFja2dyb3VuZFwiKSl9YS5wb29sLnJlbGVhc2UoYil9fWV4cG9ydHttIGFzIFZlY3RvclRpbGVDb250YWluZXJ9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtzaWduYWwgYXMgdH1mcm9tXCIuLi8uLi8uLi8uLi8uLi9jb3JlL3NpZ25hbC5qc1wiO2ltcG9ydHtkZWNsdXR0ZXJCdWRnZXQgYXMgZSxmYWRlRHVyYXRpb24gYXMgaX1mcm9tXCIuL2NvbmZpZy5qc1wiO2ltcG9ydHtWVExVbmlxdWVTeW1ib2wgYXMgc31mcm9tXCIuL2NvcmUuanNcIjtpbXBvcnR7Q29sbGlzaW9uSm9iIGFzIG99ZnJvbVwiLi9qb2JzLmpzXCI7aW1wb3J0e1N5bWJvbERlY2x1dHRlcmVyIGFzIGx9ZnJvbVwiLi9TeW1ib2xEZWNsdXR0ZXJlci5qc1wiO2ltcG9ydHtTeW1ib2xSZXBvc2l0b3J5IGFzIHJ9ZnJvbVwiLi9TeW1ib2xSZXBvc2l0b3J5LmpzXCI7aW1wb3J0e3dyaXRlT3BhY2l0eVRvQnVmZmVycyBhcyBhfWZyb21cIi4vdXRpbC5qc1wiO2ltcG9ydHtWaXNpYmlsaXR5IGFzIGh9ZnJvbVwiLi4vc3R5bGUvU3R5bGVEZWZpbml0aW9uLmpzXCI7Y29uc3Qgbj0uNSxjPTFlLTY7Y2xhc3MgX3tjb25zdHJ1Y3RvcihlLGkpe3RoaXMuc3R5bGVSZXBvc2l0b3J5PWUsdGhpcy5fdGlsZVRvSGFuZGxlPW5ldyBNYXAsdGhpcy5fdmlld1N0YXRlPXtzY2FsZTowLHJvdGF0aW9uOjAsY2VudGVyOlswLDBdLHNpemU6WzAsMF19LHRoaXMuX2RlY2x1dHRlclZpZXdTdGF0ZT17c2NhbGU6MCxyb3RhdGlvbjowLGNlbnRlcjpbMCwwXSxzaXplOlswLDBdfSx0aGlzLl9jb21wbGV0ZWQ9ITEsdGhpcy5fZmFkaW5nPXQoITEpLHRoaXMuX3N5bWJvbFJlcG9zaXRvcnk9bmV3IHIoNDA5NixpLCgoKT0+bmV3IHMpKSx0aGlzLl9zeW1ib2xEZWNsdXR0ZXJlcj1uZXcgbChpLHRoaXMuX3N5bWJvbFJlcG9zaXRvcnksKCh0LGUsaSk9Pm5ldyBvKHQsZSxpLHRoaXMuc3R5bGVSZXBvc2l0b3J5LHRoaXMuX3pvb20sdGhpcy5fdmlld1N0YXRlLnJvdGF0aW9uKSksKCh0LGUpPT57dC5hbGxTeW1ib2xzRmFkaW5nT3V0PSEwLHQubGFzdE9wYWNpdHlVcGRhdGU9ZSxhKHQsZSwhMCksdC5kZWNsdXR0ZXJlZD0hMCx0LnJlcXVlc3RSZW5kZXIoKX0pLCgodCxlKT0+dGhpcy5zdHlsZVJlcG9zaXRvcnkuZ2V0U3R5bGVMYXllckJ5VUlEKHQuc3R5bGVMYXllclVJRCkuei10aGlzLnN0eWxlUmVwb3NpdG9yeS5nZXRTdHlsZUxheWVyQnlVSUQoZS5zdHlsZUxheWVyVUlEKS56KSwodD0+e2NvbnN0IGU9dGhpcy5zdHlsZVJlcG9zaXRvcnkuZ2V0U3R5bGVMYXllckJ5VUlEKHQpO2lmKHRoaXMuX3pvb20rYzxlLm1pbnpvb218fHRoaXMuX3pvb20tYz49ZS5tYXh6b29tKXJldHVybiExO2NvbnN0IGk9ZS5nZXRMYXlvdXRQcm9wZXJ0eShcInZpc2liaWxpdHlcIik7cmV0dXJuIWl8fGkuZ2V0VmFsdWUoKSE9PWguTk9ORX0pKX1nZXQgZmFkaW5nKCl7cmV0dXJuIHRoaXMuX2ZhZGluZy52YWx1ZX1hZGRUaWxlKHQpe3QuZGVjbHV0dGVyZWQ9ITEsdGhpcy5fdGlsZVRvSGFuZGxlLnNldCh0LHQub24oXCJzeW1ib2xzLWNoYW5nZWRcIiwoKCk9Pnt0aGlzLl9zeW1ib2xSZXBvc2l0b3J5LmFkZCh0KSx0aGlzLnJlc3RhcnREZWNsdXR0ZXIoKX0pKSksdGhpcy5fc3ltYm9sUmVwb3NpdG9yeS5hZGQodCksdGhpcy5yZXN0YXJ0RGVjbHV0dGVyKCl9cmVtb3ZlVGlsZSh0KXtjb25zdCBlPXRoaXMuX3RpbGVUb0hhbmRsZS5nZXQodCk7ZSYmKHRoaXMuX3N5bWJvbFJlcG9zaXRvcnkucmVtb3ZlVGlsZSh0KSx0aGlzLnJlc3RhcnREZWNsdXR0ZXIoKSxlLnJlbW92ZSgpLHRoaXMuX3RpbGVUb0hhbmRsZS5kZWxldGUodCkpfXVwZGF0ZSh0LGUpe3JldHVybiB0aGlzLl96b29tPXQsdGhpcy5fdmlld1N0YXRlPXtzY2FsZTplLnNjYWxlLHJvdGF0aW9uOmUucm90YXRpb24sY2VudGVyOltlLmNlbnRlclswXSxlLmNlbnRlclsxXV0sc2l6ZTpbZS5zaXplWzBdLGUuc2l6ZVsxXV19LHRoaXMuX2NvbnRpbnVlRGVjbHV0dGVyKCksdGhpcy5fY29tcGxldGVkfXJlc3RhcnREZWNsdXR0ZXIoKXt0aGlzLl9jb21wbGV0ZWQ9ITEsdGhpcy5fc3ltYm9sRGVjbHV0dGVyZXIucmVzdGFydCgpLHRoaXMuX25vdGlmeVVuc3RhYmxlKCl9Y2xlYXIoKXt0aGlzLl9jb21wbGV0ZWQ9ITEsdGhpcy5fc3ltYm9sUmVwb3NpdG9yeT1udWxsLHRoaXMuX3N5bWJvbERlY2x1dHRlcmVyLnJlc3RhcnQoKSx0aGlzLl90aWxlVG9IYW5kbGUuZm9yRWFjaCgodD0+dC5yZW1vdmUoKSkpLHRoaXMuX3RpbGVUb0hhbmRsZS5jbGVhcigpfWdldCBzdGFsZSgpe3JldHVybiB0aGlzLl96b29tIT09dGhpcy5fZGVjbHV0dGVyWm9vbXx8dGhpcy5fdmlld1N0YXRlLnNpemVbMF0hPT10aGlzLl9kZWNsdXR0ZXJWaWV3U3RhdGUuc2l6ZVswXXx8dGhpcy5fdmlld1N0YXRlLnNpemVbMV0hPT10aGlzLl9kZWNsdXR0ZXJWaWV3U3RhdGUuc2l6ZVsxXXx8dGhpcy5fdmlld1N0YXRlLnNjYWxlIT09dGhpcy5fZGVjbHV0dGVyVmlld1N0YXRlLnNjYWxlfHx0aGlzLl92aWV3U3RhdGUucm90YXRpb24hPT10aGlzLl9kZWNsdXR0ZXJWaWV3U3RhdGUucm90YXRpb259ZGVsZXRlU3R5bGVMYXllcnModCl7dGhpcy5fc3ltYm9sUmVwb3NpdG9yeS5kZWxldGVTdHlsZUxheWVycyh0KX1fY29udGludWVEZWNsdXR0ZXIoKXt0aGlzLl9jb21wbGV0ZWQmJiF0aGlzLnN0YWxlfHwodGhpcy5fc3ltYm9sRGVjbHV0dGVyZXIucnVubmluZ3x8KHRoaXMuX2RlY2x1dHRlclpvb209dGhpcy5fem9vbSx0aGlzLl9kZWNsdXR0ZXJWaWV3U3RhdGUuY2VudGVyWzBdPXRoaXMuX3ZpZXdTdGF0ZS5jZW50ZXJbMF0sdGhpcy5fZGVjbHV0dGVyVmlld1N0YXRlLmNlbnRlclsxXT10aGlzLl92aWV3U3RhdGUuY2VudGVyWzFdLHRoaXMuX2RlY2x1dHRlclZpZXdTdGF0ZS5yb3RhdGlvbj10aGlzLl92aWV3U3RhdGUucm90YXRpb24sdGhpcy5fZGVjbHV0dGVyVmlld1N0YXRlLnNjYWxlPXRoaXMuX3ZpZXdTdGF0ZS5zY2FsZSx0aGlzLl9kZWNsdXR0ZXJWaWV3U3RhdGUuc2l6ZVswXT10aGlzLl92aWV3U3RhdGUuc2l6ZVswXSx0aGlzLl9kZWNsdXR0ZXJWaWV3U3RhdGUuc2l6ZVsxXT10aGlzLl92aWV3U3RhdGUuc2l6ZVsxXSx0aGlzLl9zeW1ib2xEZWNsdXR0ZXJlci5yZXN0YXJ0KCkpLHRoaXMuX3N5bWJvbERlY2x1dHRlcmVyLnNldFNjcmVlblNpemUodGhpcy5fdmlld1N0YXRlLnNpemVbMF0sdGhpcy5fdmlld1N0YXRlLnNpemVbMV0pLHRoaXMuX2NvbXBsZXRlZD10aGlzLl9zeW1ib2xEZWNsdXR0ZXJlci5jb250aW51ZShlKSx0aGlzLl9jb21wbGV0ZWQmJnRoaXMuX3NjaGVkdWxlTm90aWZ5U3RhYmxlKCkpfV9zY2hlZHVsZU5vdGlmeVN0YWJsZSgpe251bGwhPXRoaXMuX3N0YWJsZU5vdGlmaWNhdGlvbkhhbmRsZSYmY2xlYXJUaW1lb3V0KHRoaXMuX3N0YWJsZU5vdGlmaWNhdGlvbkhhbmRsZSksdGhpcy5fc3RhYmxlTm90aWZpY2F0aW9uSGFuZGxlPXNldFRpbWVvdXQoKCgpPT57dGhpcy5fc3RhYmxlTm90aWZpY2F0aW9uSGFuZGxlPW51bGwsdGhpcy5fZmFkaW5nLnZhbHVlPSExfSksKDErbikqaSl9X25vdGlmeVVuc3RhYmxlKCl7bnVsbCE9dGhpcy5fc3RhYmxlTm90aWZpY2F0aW9uSGFuZGxlJiYoY2xlYXJUaW1lb3V0KHRoaXMuX3N0YWJsZU5vdGlmaWNhdGlvbkhhbmRsZSksdGhpcy5fc3RhYmxlTm90aWZpY2F0aW9uSGFuZGxlPW51bGwpLHRoaXMuX2ZhZGluZy52YWx1ZT0hMH19ZXhwb3J0e18gYXMgU3ltYm9sRmFkZXJ9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbnZhciBFLEwsSTshZnVuY3Rpb24oRSl7RVtFLkZJTEw9MV09XCJGSUxMXCIsRVtFLkxJTkU9Ml09XCJMSU5FXCIsRVtFLlNZTUJPTD0zXT1cIlNZTUJPTFwiLEVbRS5DSVJDTEU9NF09XCJDSVJDTEVcIn0oRXx8KEU9e30pKSxmdW5jdGlvbihFKXtFW0UuQkFDS0dST1VORD0wXT1cIkJBQ0tHUk9VTkRcIixFW0UuRklMTD0xXT1cIkZJTExcIixFW0UuT1VUTElORT0yXT1cIk9VVExJTkVcIixFW0UuTElORT0zXT1cIkxJTkVcIixFW0UuSUNPTj00XT1cIklDT05cIixFW0UuQ0lSQ0xFPTVdPVwiQ0lSQ0xFXCIsRVtFLlRFWFQ9Nl09XCJURVhUXCIsRVtFLlRJTEVJTkZPPTddPVwiVElMRUlORk9cIn0oTHx8KEw9e30pKSxmdW5jdGlvbihFKXtFW0UuUEFJTlRFUl9DSEFOR0VEPTBdPVwiUEFJTlRFUl9DSEFOR0VEXCIsRVtFLkxBWU9VVF9DSEFOR0VEPTFdPVwiTEFZT1VUX0NIQU5HRURcIixFW0UuTEFZRVJfQ0hBTkdFRD0yXT1cIkxBWUVSX0NIQU5HRURcIixFW0UuTEFZRVJfUkVNT1ZFRD0zXT1cIkxBWUVSX1JFTU9WRURcIixFW0UuU1BSSVRFU19DSEFOR0VEPTRdPVwiU1BSSVRFU19DSEFOR0VEXCJ9KEl8fChJPXt9KSk7ZXhwb3J0e0UgYXMgQnVja2V0VHlwZSxMIGFzIFNoYWRlclByb2dyYW1UeXBlLEkgYXMgU3R5bGVVcGRhdGVUeXBlfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnQgaGFzIGZyb21cIi4uLy4uLy4uLy4uL2NvcmUvaGFzLmpzXCI7aW1wb3J0e1dHTERyYXdQaGFzZSBhcyBlfWZyb21cIi4vZW51bXMuanNcIjtpbXBvcnQgciBmcm9tXCIuL1dHTENvbnRhaW5lci5qc1wiO2ltcG9ydCBzIGZyb21cIi4vYnJ1c2hlcy9XR0xCcnVzaEluZm8uanNcIjtpbXBvcnQgdCBmcm9tXCIuL2JydXNoZXMvV0dMQnJ1c2hTdGVuY2lsLmpzXCI7Y29uc3Qgbj0oZSxyKT0+ZS5rZXkubGV2ZWwtci5rZXkubGV2ZWwhPTA/ZS5rZXkubGV2ZWwtci5rZXkubGV2ZWw6ZS5rZXkucm93LXIua2V5LnJvdyE9MD9lLmtleS5yb3ctci5rZXkucm93OmUua2V5LmNvbC1yLmtleS5jb2w7Y2xhc3MgaSBleHRlbmRzIHJ7Y29uc3RydWN0b3IoZSl7c3VwZXIoKSx0aGlzLl90aWxlSW5mb1ZpZXc9ZX1yZW5kZXJDaGlsZHJlbihlKXt0aGlzLnNvcnRDaGlsZHJlbihuKSx0aGlzLnNldFN0ZW5jaWxSZWZlcmVuY2UoZSksc3VwZXIucmVuZGVyQ2hpbGRyZW4oZSl9Y3JlYXRlUmVuZGVyUGFyYW1zKGUpe2NvbnN0e3N0YXRlOnJ9PWUscz1zdXBlci5jcmVhdGVSZW5kZXJQYXJhbXMoZSk7cmV0dXJuIHMucmVxdWlyZWRMZXZlbD10aGlzLl90aWxlSW5mb1ZpZXcuZ2V0Q2xvc2VzdEluZm9Gb3JTY2FsZShyLnNjYWxlKS5sZXZlbCxzLmRpc3BsYXlMZXZlbD10aGlzLl90aWxlSW5mb1ZpZXcudGlsZUluZm8uc2NhbGVUb1pvb20oci5zY2FsZSksc31wcmVwYXJlUmVuZGVyUGFzc2VzKHIpe2NvbnN0IG49c3VwZXIucHJlcGFyZVJlbmRlclBhc3NlcyhyKTtyZXR1cm4gbi5wdXNoKHIucmVnaXN0ZXJSZW5kZXJQYXNzKHtuYW1lOlwic3RlbmNpbFwiLGJydXNoZXM6W3RdLGRyYXdQaGFzZTplLkRFQlVHfGUuTUFQfGUuSElHSExJR0hULHRhcmdldDooKT0+dGhpcy5nZXRTdGVuY2lsVGFyZ2V0KCl9KSksaGFzKFwiZXNyaS10aWxlcy1kZWJ1Z1wiKSYmbi5wdXNoKHIucmVnaXN0ZXJSZW5kZXJQYXNzKHtuYW1lOlwidGlsZUluZm9cIixicnVzaGVzOltzXSxkcmF3UGhhc2U6ZS5ERUJVRyx0YXJnZXQ6KCk9PnRoaXMuY2hpbGRyZW59KSksbn1nZXRTdGVuY2lsVGFyZ2V0KCl7cmV0dXJuIHRoaXMuY2hpbGRyZW59c2V0U3RlbmNpbFJlZmVyZW5jZShlKXtsZXQgcj0xO2Zvcihjb25zdCBzIG9mIHRoaXMuY2hpbGRyZW4pcy5zdGVuY2lsUmVmPXIrK319ZXhwb3J0e2kgYXMgZGVmYXVsdH07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e18gYXMgZX1mcm9tXCIuLi8uLi8uLi9jaHVua3MvdHNsaWIuZXM2LmpzXCI7aW1wb3J0IHQgZnJvbVwiLi4vLi4vLi4vR3JhcGhpYy5qc1wiO2ltcG9ydHtjbG9uZSBhcyBpfWZyb21cIi4uLy4uLy4uL2NvcmUvbGFuZy5qc1wiO2ltcG9ydCBzIGZyb21cIi4uLy4uLy4uL2NvcmUvTG9nZ2VyLmpzXCI7aW1wb3J0e2Rlc3Ryb3lNYXliZSBhcyByfWZyb21cIi4uLy4uLy4uL2NvcmUvbWF5YmUuanNcIjtpbXBvcnR7aXNBYm9ydEVycm9yIGFzIGF9ZnJvbVwiLi4vLi4vLi4vY29yZS9wcm9taXNlVXRpbHMuanNcIjtpbXBvcnR7cHJvcGVydHkgYXMgbH1mcm9tXCIuLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3Byb3BlcnR5LmpzXCI7aW1wb3J0XCIuLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9lbnN1cmVUeXBlLmpzXCI7aW1wb3J0e3N1YmNsYXNzIGFzIG99ZnJvbVwiLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9zdWJjbGFzcy5qc1wiO2ltcG9ydHtkaWZmIGFzIG4saGFzRGlmZiBhcyBofWZyb21cIi4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RpZmZVdGlscy5qc1wiO2ltcG9ydHtjcmVhdGUgYXMgeX1mcm9tXCIuLi8uLi8uLi9nZW9tZXRyeS9zdXBwb3J0L2FhQm91bmRpbmdSZWN0LmpzXCI7aW1wb3J0e2VxdWFscyBhcyB1fWZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvc3BhdGlhbFJlZmVyZW5jZVV0aWxzLmpzXCI7aW1wb3J0e1N0eWxlVXBkYXRlVHlwZSBhcyBjfWZyb21cIi4uL2VuZ2luZS92ZWN0b3JUaWxlcy9lbnVtcy5qc1wiO2ltcG9ydHtUaWxlSGFuZGxlciBhcyBwfWZyb21cIi4uL2VuZ2luZS92ZWN0b3JUaWxlcy9UaWxlSGFuZGxlci5qc1wiO2ltcG9ydHtUaWxlTWFuYWdlciBhcyBkfWZyb21cIi4uL2VuZ2luZS92ZWN0b3JUaWxlcy9UaWxlTWFuYWdlci5qc1wiO2ltcG9ydHtWZWN0b3JUaWxlIGFzIF99ZnJvbVwiLi4vZW5naW5lL3ZlY3RvclRpbGVzL1ZlY3RvclRpbGUuanNcIjtpbXBvcnR7VmVjdG9yVGlsZUNvbnRhaW5lciBhcyBmfWZyb21cIi4uL2VuZ2luZS92ZWN0b3JUaWxlcy9WZWN0b3JUaWxlQ29udGFpbmVyLmpzXCI7aW1wb3J0e1N0eWxlTGF5ZXJUeXBlIGFzIG19ZnJvbVwiLi4vZW5naW5lL3ZlY3RvclRpbGVzL3N0eWxlL1N0eWxlRGVmaW5pdGlvbi5qc1wiO2ltcG9ydCBnIGZyb21cIi4uL2VuZ2luZS92ZWN0b3JUaWxlcy9zdHlsZS9TdHlsZVJlcG9zaXRvcnkuanNcIjtpbXBvcnR7TGF5ZXJWaWV3MkRNaXhpbiBhcyBUfWZyb21cIi4vTGF5ZXJWaWV3MkQuanNcIjtpbXBvcnQgQyBmcm9tXCIuLi90aWxpbmcvVGlsZUluZm9WaWV3UE9ULmpzXCI7aW1wb3J0IEggZnJvbVwiLi4vdGlsaW5nL1RpbGVRdWV1ZS5qc1wiO2ltcG9ydCBSIGZyb21cIi4uLy4uL2xheWVycy9MYXllclZpZXcuanNcIjtsZXQgdj1jbGFzcyBleHRlbmRzKFQoUikpe2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLl9zdHlsZUNoYW5nZXM9W10sdGhpcy5fZmV0Y2hRdWV1ZT1udWxsLHRoaXMuX3BhcnNlUXVldWU9bnVsbCx0aGlzLl90aWxlSGFuZGxlclByb21pc2U9bnVsbCx0aGlzLl9pc1RpbGVIYW5kbGVyUmVhZHk9ITF9Z2V0IGZhZGluZygpe3JldHVybiB0aGlzLl92ZWN0b3JUaWxlQ29udGFpbmVyPy5mYWRpbmc/PyExfWFzeW5jIGhpdFRlc3QoZSxpKXtpZighdGhpcy5fdGlsZUhhbmRsZXJQcm9taXNlKXJldHVybiBudWxsO2F3YWl0IHRoaXMuX3RpbGVIYW5kbGVyUHJvbWlzZTtjb25zdCBzPWF3YWl0IHRoaXMuX3ZlY3RvclRpbGVDb250YWluZXIuaGl0VGVzdChpKTtpZighc3x8MD09PXMubGVuZ3RoKXJldHVybiBudWxsO2NvbnN0IHI9c1swXS0xLGE9dGhpcy5fc3R5bGVSZXBvc2l0b3J5LGw9YS5nZXRTdHlsZUxheWVyQnlVSUQocik7aWYoIWwpcmV0dXJuIG51bGw7Y29uc3Qgbz1hLmdldFN0eWxlTGF5ZXJJbmRleChsLmlkKTtyZXR1cm5be3R5cGU6XCJncmFwaGljXCIsbWFwUG9pbnQ6ZSxsYXllcjp0aGlzLmxheWVyLGdyYXBoaWM6bmV3IHQoe2F0dHJpYnV0ZXM6e2xheWVySWQ6byxsYXllck5hbWU6bC5pZCxsYXllclVJRDpyfSxsYXllcjp0aGlzLmxheWVyLHNvdXJjZUxheWVyOnRoaXMubGF5ZXJ9KX1dfXVwZGF0ZShlKXtpZih0aGlzLl90aWxlSGFuZGxlclByb21pc2UmJnRoaXMuX2lzVGlsZUhhbmRsZXJSZWFkeSlyZXR1cm4gZS5waXhlbFJhdGlvIT09dGhpcy5fdGlsZUhhbmRsZXIuZGV2aWNlUGl4ZWxSYXRpbz8odGhpcy5fc3RhcnQoKSx2b2lkKHRoaXMuX3RpbGVIYW5kbGVyLmRldmljZVBpeGVsUmF0aW89ZS5waXhlbFJhdGlvKSk6dm9pZCh0aGlzLl9zdHlsZUNoYW5nZXMubGVuZ3RoPjA/dGhpcy5fdGlsZUhhbmRsZXJQcm9taXNlPXRoaXMuX2FwcGx5U3R5bGVDaGFuZ2VzKCk6KHRoaXMuX2ZldGNoUXVldWUucGF1c2UoKSx0aGlzLl9wYXJzZVF1ZXVlLnBhdXNlKCksdGhpcy5fZmV0Y2hRdWV1ZS5zdGF0ZT1lLnN0YXRlLHRoaXMuX3BhcnNlUXVldWUuc3RhdGU9ZS5zdGF0ZSx0aGlzLl90aWxlTWFuYWdlci51cGRhdGUoZSl8fHRoaXMucmVxdWVzdFVwZGF0ZSgpLHRoaXMuX3BhcnNlUXVldWUucmVzdW1lKCksdGhpcy5fZmV0Y2hRdWV1ZS5yZXN1bWUoKSkpfWF0dGFjaCgpe2NvbnN0e3N0eWxlOmV9PXRoaXMubGF5ZXIuY3VycmVudFN0eWxlSW5mbzt0aGlzLl9zdHlsZVJlcG9zaXRvcnk9bmV3IGcoZSksdGhpcy5fdGlsZUluZm9WaWV3PW5ldyBDKHRoaXMubGF5ZXIudGlsZUluZm8sdGhpcy5sYXllci5mdWxsRXh0ZW50KSx0aGlzLl92ZWN0b3JUaWxlQ29udGFpbmVyPW5ldyBmKHRoaXMuX3RpbGVJbmZvVmlldyksdGhpcy5fdGlsZUhhbmRsZXI9bmV3IHAodGhpcy5sYXllcix0aGlzLl9zdHlsZVJlcG9zaXRvcnksd2luZG93LmRldmljZVBpeGVsUmF0aW98fDEpLHRoaXMuY29udGFpbmVyLmFkZENoaWxkKHRoaXMuX3ZlY3RvclRpbGVDb250YWluZXIpLHRoaXMuX3N0YXJ0KCksdGhpcy5hZGRBdHRhY2hIYW5kbGVzKFt0aGlzLmxheWVyLm9uKFwicGFpbnQtY2hhbmdlXCIsKGU9PntpZihlLmlzRGF0YURyaXZlbil0aGlzLl9zdHlsZUNoYW5nZXMucHVzaCh7dHlwZTpjLlBBSU5URVJfQ0hBTkdFRCxkYXRhOmV9KSx0aGlzLnJlcXVlc3RVcGRhdGUoKTtlbHNle2NvbnN0IHQ9dGhpcy5fc3R5bGVSZXBvc2l0b3J5LGk9dC5nZXRMYXllckJ5SWQoZS5sYXllcik7aWYoIWkpcmV0dXJuO2NvbnN0IHM9aS50eXBlPT09bS5TWU1CT0w7dC5zZXRQYWludFByb3BlcnRpZXMoZS5sYXllcixlLnBhaW50KSxzJiZ0aGlzLl92ZWN0b3JUaWxlQ29udGFpbmVyPy5yZXN0YXJ0RGVjbHV0dGVyKCksdGhpcy5fdmVjdG9yVGlsZUNvbnRhaW5lcj8ucmVxdWVzdFJlbmRlcigpfX0pKSx0aGlzLmxheWVyLm9uKFwibGF5b3V0LWNoYW5nZVwiLChlPT57Y29uc3QgdD10aGlzLl9zdHlsZVJlcG9zaXRvcnksaT10LmdldExheWVyQnlJZChlLmxheWVyKTtpZighaSlyZXR1cm47Y29uc3Qgcz1uKGkubGF5b3V0LGUubGF5b3V0KTtpZihudWxsIT1zKXtpZihoKHMsXCJ2aXNpYmlsaXR5XCIpJiYxPT09RChzKSlyZXR1cm4gdC5zZXRMYXlvdXRQcm9wZXJ0aWVzKGUubGF5ZXIsZS5sYXlvdXQpLGkudHlwZT09PW0uU1lNQk9MJiZ0aGlzLl92ZWN0b3JUaWxlQ29udGFpbmVyPy5yZXN0YXJ0RGVjbHV0dGVyKCksdm9pZCB0aGlzLl92ZWN0b3JUaWxlQ29udGFpbmVyPy5yZXF1ZXN0UmVuZGVyKCk7dGhpcy5fc3R5bGVDaGFuZ2VzLnB1c2goe3R5cGU6Yy5MQVlPVVRfQ0hBTkdFRCxkYXRhOmV9KSx0aGlzLnJlcXVlc3RVcGRhdGUoKX19KSksdGhpcy5sYXllci5vbihcInN0eWxlLWxheWVyLXZpc2liaWxpdHktY2hhbmdlXCIsKGU9Pntjb25zdCB0PXRoaXMuX3N0eWxlUmVwb3NpdG9yeSxpPXQuZ2V0TGF5ZXJCeUlkKGUubGF5ZXIpO2kmJih0LnNldFN0eWxlTGF5ZXJWaXNpYmlsaXR5KGUubGF5ZXIsZS52aXNpYmlsaXR5KSxpLnR5cGU9PT1tLlNZTUJPTCYmdGhpcy5fdmVjdG9yVGlsZUNvbnRhaW5lcj8ucmVzdGFydERlY2x1dHRlcigpLHRoaXMuX3ZlY3RvclRpbGVDb250YWluZXI/LnJlcXVlc3RSZW5kZXIoKSl9KSksdGhpcy5sYXllci5vbihcInN0eWxlLWxheWVyLWNoYW5nZVwiLChlPT57dGhpcy5fc3R5bGVDaGFuZ2VzLnB1c2goe3R5cGU6Yy5MQVlFUl9DSEFOR0VELGRhdGE6ZX0pLHRoaXMucmVxdWVzdFVwZGF0ZSgpfSkpLHRoaXMubGF5ZXIub24oXCJkZWxldGUtc3R5bGUtbGF5ZXJcIiwoZT0+e3RoaXMuX3N0eWxlQ2hhbmdlcy5wdXNoKHt0eXBlOmMuTEFZRVJfUkVNT1ZFRCxkYXRhOmV9KSx0aGlzLnJlcXVlc3RVcGRhdGUoKX0pKSx0aGlzLmxheWVyLm9uKFwibG9hZC1zdHlsZVwiLCgoKT0+dGhpcy5fbG9hZFN0eWxlKCkpKSx0aGlzLmxheWVyLm9uKFwic3ByaXRlU291cmNlLWNoYW5nZVwiLChlPT57dGhpcy5fc3R5bGVDaGFuZ2VzLnB1c2goe3R5cGU6Yy5TUFJJVEVTX0NIQU5HRUQsZGF0YTplfSk7Y29uc3QgdD10aGlzLl9zdHlsZVJlcG9zaXRvcnkubGF5ZXJzO2Zvcihjb25zdCBpIG9mIHQpc3dpdGNoKGkudHlwZSl7Y2FzZSBtLlNZTUJPTDppLmdldExheW91dFByb3BlcnR5KFwiaWNvbi1pbWFnZVwiKSYmdGhpcy5fc3R5bGVDaGFuZ2VzLnB1c2goe3R5cGU6Yy5MQVlPVVRfQ0hBTkdFRCxkYXRhOntsYXllcjppLmlkLGxheW91dDppLmxheW91dH19KTticmVhaztjYXNlIG0uTElORTppLmdldFBhaW50UHJvcGVydHkoXCJsaW5lLXBhdHRlcm5cIikmJnRoaXMuX3N0eWxlQ2hhbmdlcy5wdXNoKHt0eXBlOmMuUEFJTlRFUl9DSEFOR0VELGRhdGE6e2xheWVyOmkuaWQscGFpbnQ6aS5wYWludCxpc0RhdGFEcml2ZW46aS5pc1BhaW50ZXJEYXRhRHJpdmVuKCl9fSk7YnJlYWs7Y2FzZSBtLkZJTEw6aS5nZXRMYXlvdXRQcm9wZXJ0eShcImZpbGwtcGF0dGVyblwiKSYmdGhpcy5fc3R5bGVDaGFuZ2VzLnB1c2goe3R5cGU6Yy5QQUlOVEVSX0NIQU5HRUQsZGF0YTp7bGF5ZXI6aS5pZCxwYWludDppLnBhaW50LGlzRGF0YURyaXZlbjppLmlzUGFpbnRlckRhdGFEcml2ZW4oKX19KX10aGlzLnJlcXVlc3RVcGRhdGUoKX0pKV0pfWRldGFjaCgpe3RoaXMuX3N0b3AoKSx0aGlzLmNvbnRhaW5lci5yZW1vdmVBbGxDaGlsZHJlbigpLHRoaXMuX3ZlY3RvclRpbGVDb250YWluZXI9cih0aGlzLl92ZWN0b3JUaWxlQ29udGFpbmVyKSx0aGlzLl90aWxlSGFuZGxlcj1yKHRoaXMuX3RpbGVIYW5kbGVyKX1tb3ZlU3RhcnQoKXt0aGlzLnJlcXVlc3RVcGRhdGUoKX12aWV3Q2hhbmdlKCl7dGhpcy5yZXF1ZXN0VXBkYXRlKCl9bW92ZUVuZCgpe3RoaXMucmVxdWVzdFVwZGF0ZSgpfXN1cHBvcnRzU3BhdGlhbFJlZmVyZW5jZShlKXtyZXR1cm4gdSh0aGlzLmxheWVyLnRpbGVJbmZvPy5zcGF0aWFsUmVmZXJlbmNlLGUpfWNhblJlc3VtZSgpe2xldCBlPXN1cGVyLmNhblJlc3VtZSgpO2NvbnN0e2N1cnJlbnRTdHlsZUluZm86dH09dGhpcy5sYXllcjtpZihlJiZ0Py5sYXllckRlZmluaXRpb24pe2NvbnN0IGk9dGhpcy52aWV3LnNjYWxlLHttaW5TY2FsZTpzLG1heFNjYWxlOnJ9PXQubGF5ZXJEZWZpbml0aW9uO3Q/LmxheWVyRGVmaW5pdGlvbiYmKHMmJnM8aSYmKGU9ITEpLHImJnI+aSYmKGU9ITEpKX1yZXR1cm4gZX1pc1VwZGF0aW5nKCl7cmV0dXJuIHRoaXMuZmFkaW5nfWFjcXVpcmVUaWxlKGUpe2NvbnN0IHQ9dGhpcy5fY3JlYXRlVmVjdG9yVGlsZShlKTtyZXR1cm4gdGhpcy5fdXBkYXRpbmdIYW5kbGVzLmFkZFByb21pc2UodGhpcy5fZmV0Y2hRdWV1ZS5wdXNoKHQua2V5KS50aGVuKChlPT50aGlzLl9wYXJzZVF1ZXVlLnB1c2goe2tleTp0LmtleSxkYXRhOmV9KSkpLnRoZW4oKGU9Pnt0Lm9uY2UoXCJhdHRhY2hcIiwoKCk9PnRoaXMucmVxdWVzdFVwZGF0ZSgpKSksdC5zZXREYXRhKGUpLHRoaXMucmVxdWVzdFVwZGF0ZSgpfSkpLmNhdGNoKChlPT57YShlKXx8cy5nZXRMb2dnZXIodGhpcykuZXJyb3IoZSl9KSkpLHR9cmVsZWFzZVRpbGUoZSl7Y29uc3QgdD1lLmtleS5pZDt0aGlzLl9mZXRjaFF1ZXVlLmFib3J0KHQpLHRoaXMuX3BhcnNlUXVldWUuYWJvcnQodCksdGhpcy5yZXF1ZXN0VXBkYXRlKCl9X3N0YXJ0KCl7aWYodGhpcy5fc3RvcCgpLHRoaXMuX3RpbGVNYW5hZ2VyPW5ldyBkKHthY3F1aXJlVGlsZTplPT50aGlzLmFjcXVpcmVUaWxlKGUpLHJlbGVhc2VUaWxlOmU9PnRoaXMucmVsZWFzZVRpbGUoZSksdGlsZUluZm9WaWV3OnRoaXMuX3RpbGVJbmZvVmlld30sdGhpcy5fdmVjdG9yVGlsZUNvbnRhaW5lciksIXRoaXMubGF5ZXIuY3VycmVudFN0eWxlSW5mbylyZXR1cm47Y29uc3QgZT1uZXcgQWJvcnRDb250cm9sbGVyLHQ9dGhpcy5fdGlsZUhhbmRsZXIuc3RhcnQoe3NpZ25hbDplLnNpZ25hbH0pLnRoZW4oKCgpPT57dGhpcy5fZmV0Y2hRdWV1ZT1uZXcgSCh7dGlsZUluZm9WaWV3OnRoaXMuX3RpbGVJbmZvVmlldyxwcm9jZXNzOihlLHQpPT50aGlzLl9nZXRUaWxlRGF0YShlLHQpLGNvbmN1cnJlbmN5OjE1fSksdGhpcy5fcGFyc2VRdWV1ZT1uZXcgSCh7dGlsZUluZm9WaWV3OnRoaXMuX3RpbGVJbmZvVmlldyxwcm9jZXNzOihlLHQpPT50aGlzLl9wYXJzZVRpbGVEYXRhKGUsdCksY29uY3VycmVuY3k6OH0pLHRoaXMucmVxdWVzdFVwZGF0ZSgpLHRoaXMuX2lzVGlsZUhhbmRsZXJSZWFkeT0hMH0pKTt0aGlzLl90aWxlSGFuZGxlci5zcHJpdGVNb3NhaWMudGhlbigoZT0+e3RoaXMuX3ZlY3RvclRpbGVDb250YWluZXIuc2V0U3R5bGVSZXNvdXJjZXMoZSx0aGlzLl90aWxlSGFuZGxlci5nbHlwaE1vc2FpYyx0aGlzLl9zdHlsZVJlcG9zaXRvcnkpLHRoaXMucmVxdWVzdFVwZGF0ZSgpfSkpLHRoaXMuX3RpbGVIYW5kbGVyQWJvcnRDb250cm9sbGVyPWUsdGhpcy5fdGlsZUhhbmRsZXJQcm9taXNlPXR9X3N0b3AoKXtpZighdGhpcy5fdGlsZUhhbmRsZXJBYm9ydENvbnRyb2xsZXJ8fCF0aGlzLl92ZWN0b3JUaWxlQ29udGFpbmVyKXJldHVybjtjb25zdCBlPXRoaXMuX3RpbGVIYW5kbGVyQWJvcnRDb250cm9sbGVyO2UmJmUuYWJvcnQoKSx0aGlzLl90aWxlSGFuZGxlclByb21pc2U9bnVsbCx0aGlzLl9pc1RpbGVIYW5kbGVyUmVhZHk9ITEsdGhpcy5fZmV0Y2hRdWV1ZT1yKHRoaXMuX2ZldGNoUXVldWUpLHRoaXMuX3BhcnNlUXVldWU9cih0aGlzLl9wYXJzZVF1ZXVlKSx0aGlzLl90aWxlTWFuYWdlcj1yKHRoaXMuX3RpbGVNYW5hZ2VyKSx0aGlzLl92ZWN0b3JUaWxlQ29udGFpbmVyLnJlbW92ZUFsbENoaWxkcmVuKCl9YXN5bmMgX2dldFRpbGVEYXRhKGUsdCl7cmV0dXJuIHRoaXMuX3RpbGVIYW5kbGVyLmZldGNoVGlsZURhdGEoZSx0KX1hc3luYyBfcGFyc2VUaWxlRGF0YShlLHQpe3JldHVybiB0aGlzLl90aWxlSGFuZGxlci5wYXJzZVRpbGVEYXRhKGUsdCl9YXN5bmMgX2FwcGx5U3R5bGVDaGFuZ2VzKCl7dGhpcy5faXNUaWxlSGFuZGxlclJlYWR5PSExLHRoaXMuX2ZldGNoUXVldWUucGF1c2UoKSx0aGlzLl9wYXJzZVF1ZXVlLnBhdXNlKCksdGhpcy5fZmV0Y2hRdWV1ZS5jbGVhcigpLHRoaXMuX3BhcnNlUXVldWUuY2xlYXIoKSx0aGlzLl90aWxlTWFuYWdlci5jbGVhckNhY2hlKCk7Y29uc3QgZT10aGlzLl9zdHlsZUNoYW5nZXM7dHJ5e2F3YWl0IHRoaXMuX3RpbGVIYW5kbGVyLnVwZGF0ZVN0eWxlKGUpfWNhdGNoKGwpe3MuZ2V0TG9nZ2VyKHRoaXMpLmVycm9yKFwiZXJyb3IgYXBwbHlpbmcgdmVjdG9yLXRpbGVzIHN0eWxlIHVwZGF0ZVwiLGwubWVzc2FnZSksdGhpcy5fZmV0Y2hRdWV1ZS5yZXN1bWUoKSx0aGlzLl9wYXJzZVF1ZXVlLnJlc3VtZSgpLHRoaXMuX2lzVGlsZUhhbmRsZXJSZWFkeT0hMH1jb25zdCB0PXRoaXMuX3N0eWxlUmVwb3NpdG9yeSxpPW5ldyBTZXQ7ZS5mb3JFYWNoKChlPT57aWYoZS50eXBlIT09Yy5MQVlFUl9SRU1PVkVEKXJldHVybjtjb25zdCBzPWUuZGF0YSxyPXQuZ2V0TGF5ZXJCeUlkKHMubGF5ZXIpO3ImJmkuYWRkKHIudWlkKX0pKTtjb25zdCByPW5ldyBTZXQ7ZS5mb3JFYWNoKChlPT57bGV0IGk7c3dpdGNoKGUudHlwZSl7Y2FzZSBjLlBBSU5URVJfQ0hBTkdFRDp0LnNldFBhaW50UHJvcGVydGllcyhlLmRhdGEubGF5ZXIsZS5kYXRhLnBhaW50KSxpPWUuZGF0YS5sYXllcjticmVhaztjYXNlIGMuTEFZT1VUX0NIQU5HRUQ6dC5zZXRMYXlvdXRQcm9wZXJ0aWVzKGUuZGF0YS5sYXllcixlLmRhdGEubGF5b3V0KSxpPWUuZGF0YS5sYXllcjticmVhaztjYXNlIGMuTEFZRVJfUkVNT1ZFRDpyZXR1cm4gdm9pZCB0LmRlbGV0ZVN0eWxlTGF5ZXIoZS5kYXRhLmxheWVyKTtjYXNlIGMuTEFZRVJfQ0hBTkdFRDp0LnNldFN0eWxlTGF5ZXIoZS5kYXRhLmxheWVyLGUuZGF0YS5pbmRleCksaT1lLmRhdGEubGF5ZXIuaWQ7YnJlYWs7Y2FzZSBjLlNQUklURVNfQ0hBTkdFRDp0aGlzLl92ZWN0b3JUaWxlQ29udGFpbmVyLnNldFNwcml0ZU1vc2FpYyh0aGlzLl90aWxlSGFuZGxlci5zZXRTcHJpdGVTb3VyY2UoZS5kYXRhLnNwcml0ZVNvdXJjZSkpfWlmKGkpe2NvbnN0IGU9dC5nZXRMYXllckJ5SWQoaSk7ZSYmci5hZGQoZS51aWQpfX0pKTtjb25zdCBhPXRoaXMuX3ZlY3RvclRpbGVDb250YWluZXIuY2hpbGRyZW47aWYoaS5zaXplPjApe2NvbnN0IGU9QXJyYXkuZnJvbShpKTt0aGlzLl92ZWN0b3JUaWxlQ29udGFpbmVyLmRlbGV0ZVN0eWxlTGF5ZXJzKGUpO2Zvcihjb25zdCB0IG9mIGEpdC5kZWxldGVMYXllckRhdGEoZSl9aWYodGhpcy5fZmV0Y2hRdWV1ZS5yZXN1bWUoKSx0aGlzLl9wYXJzZVF1ZXVlLnJlc3VtZSgpLHIuc2l6ZT4wKXtjb25zdCBlPUFycmF5LmZyb20ociksdD1bXTtmb3IoY29uc3QgaSBvZiBhKXtjb25zdCBzPXRoaXMuX3VwZGF0aW5nSGFuZGxlcy5hZGRQcm9taXNlKHRoaXMuX2ZldGNoUXVldWUucHVzaChpLmtleSkudGhlbigodD0+dGhpcy5fcGFyc2VRdWV1ZS5wdXNoKHtrZXk6aS5rZXksZGF0YTp0LHN0eWxlTGF5ZXJVSURzOmV9KSkpLnRoZW4oKGU9Pmkuc2V0RGF0YShlKSkpKTt0LnB1c2gocyl9YXdhaXQgUHJvbWlzZS5hbGwodCl9dGhpcy5fc3R5bGVDaGFuZ2VzPVtdLHRoaXMuX2lzVGlsZUhhbmRsZXJSZWFkeT0hMCx0aGlzLnJlcXVlc3RVcGRhdGUoKX1hc3luYyBfbG9hZFN0eWxlKCl7Y29uc3R7c3R5bGU6ZX09dGhpcy5sYXllci5jdXJyZW50U3R5bGVJbmZvLHQ9aShlKTt0aGlzLl9pc1RpbGVIYW5kbGVyUmVhZHk9ITEsdGhpcy5fZmV0Y2hRdWV1ZS5wYXVzZSgpLHRoaXMuX3BhcnNlUXVldWUucGF1c2UoKSx0aGlzLl9mZXRjaFF1ZXVlLmNsZWFyKCksdGhpcy5fcGFyc2VRdWV1ZS5jbGVhcigpLHRoaXMuX3N0eWxlUmVwb3NpdG9yeT1uZXcgZyh0KSx0aGlzLl92ZWN0b3JUaWxlQ29udGFpbmVyLmRlc3Ryb3koKSx0aGlzLl90aWxlTWFuYWdlci5jbGVhcigpLHRoaXMuX3RpbGVIYW5kbGVyQWJvcnRDb250cm9sbGVyLmFib3J0KCksdGhpcy5fdGlsZUhhbmRsZXJBYm9ydENvbnRyb2xsZXI9bmV3IEFib3J0Q29udHJvbGxlcjtjb25zdHtzaWduYWw6c309dGhpcy5fdGlsZUhhbmRsZXJBYm9ydENvbnRyb2xsZXI7dHJ5e3RoaXMuX3RpbGVIYW5kbGVyUHJvbWlzZT10aGlzLl90aWxlSGFuZGxlci5zZXRTdHlsZSh0aGlzLl9zdHlsZVJlcG9zaXRvcnksdCksYXdhaXQgdGhpcy5fdGlsZUhhbmRsZXJQcm9taXNlfWNhdGNoKGwpe2lmKCFhKGwpKXRocm93IGx9aWYocy5hYm9ydGVkKXJldHVybiB0aGlzLl9mZXRjaFF1ZXVlLnJlc3VtZSgpLHRoaXMuX3BhcnNlUXVldWUucmVzdW1lKCksdGhpcy5faXNUaWxlSGFuZGxlclJlYWR5PSEwLHZvaWQgdGhpcy5yZXF1ZXN0VXBkYXRlKCk7Y29uc3Qgcj1hd2FpdCB0aGlzLl90aWxlSGFuZGxlci5zcHJpdGVNb3NhaWM7dGhpcy5fdmVjdG9yVGlsZUNvbnRhaW5lci5zZXRTdHlsZVJlc291cmNlcyhyLHRoaXMuX3RpbGVIYW5kbGVyLmdseXBoTW9zYWljLHRoaXMuX3N0eWxlUmVwb3NpdG9yeSksdGhpcy5fZmV0Y2hRdWV1ZS5yZXN1bWUoKSx0aGlzLl9wYXJzZVF1ZXVlLnJlc3VtZSgpLHRoaXMuX2lzVGlsZUhhbmRsZXJSZWFkeT0hMCx0aGlzLnJlcXVlc3RVcGRhdGUoKX1fY3JlYXRlVmVjdG9yVGlsZShlKXtjb25zdCB0PXRoaXMuX3RpbGVJbmZvVmlldy5nZXRUaWxlQm91bmRzKHkoKSxlKSxpPXRoaXMuX3RpbGVJbmZvVmlldy5nZXRUaWxlUmVzb2x1dGlvbihlLmxldmVsKTtyZXR1cm4gbmV3IF8oZSxpLHRbMF0sdFszXSw1MTIsNTEyLHRoaXMuX3N0eWxlUmVwb3NpdG9yeSl9fTtmdW5jdGlvbiBEKGUpe2lmKG51bGw9PWUpcmV0dXJuIDA7c3dpdGNoKGUudHlwZSl7Y2FzZVwicGFydGlhbFwiOnJldHVybiBPYmplY3Qua2V5cyhlLmRpZmYpLmxlbmd0aDtjYXNlXCJjb21wbGV0ZVwiOnJldHVybiBNYXRoLm1heChPYmplY3Qua2V5cyhlLm9sZFZhbHVlKS5sZW5ndGgsT2JqZWN0LmtleXMoZS5uZXdWYWx1ZSkubGVuZ3RoKTtjYXNlXCJjb2xsZWN0aW9uXCI6cmV0dXJuIE9iamVjdC5rZXlzKGUuYWRkZWQpLmxlbmd0aCtPYmplY3Qua2V5cyhlLmNoYW5nZWQpLmxlbmd0aCtPYmplY3Qua2V5cyhlLnJlbW92ZWQpLmxlbmd0aH19ZShbbCgpXSx2LnByb3RvdHlwZSxcIl9pc1RpbGVIYW5kbGVyUmVhZHlcIix2b2lkIDApLHY9ZShbbyhcImVzcmkudmlld3MuMmQubGF5ZXJzLlZlY3RvclRpbGVMYXllclZpZXcyRFwiKV0sdik7Y29uc3Qgdz12O2V4cG9ydHt3IGFzIGRlZmF1bHR9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9