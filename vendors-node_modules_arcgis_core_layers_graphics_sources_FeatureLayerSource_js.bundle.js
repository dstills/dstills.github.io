"use strict";
(self["webpackChunksynview"] = self["webpackChunksynview"] || []).push([["vendors-node_modules_arcgis_core_layers_graphics_sources_FeatureLayerSource_js"],{

/***/ "./node_modules/@arcgis/core/chunks/mat4f64.js":
/*!*****************************************************!*\
  !*** ./node_modules/@arcgis/core/chunks/mat4f64.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I: () => (/* binding */ o),
/* harmony export */   a: () => (/* binding */ e),
/* harmony export */   b: () => (/* binding */ r),
/* harmony export */   c: () => (/* binding */ n),
/* harmony export */   f: () => (/* binding */ t),
/* harmony export */   m: () => (/* binding */ a)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function e(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function r(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]}function t(e,r,t,n,o,a,u,c,f,l,s,i,b,_,m,p){return[e,r,t,n,o,a,u,c,f,l,s,i,b,_,m,p]}function n(e,r){return new Float64Array(e,r,16)}const o=e(),a=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:o,clone:r,create:e,createView:n,fromValues:t},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ "./node_modules/@arcgis/core/chunks/vec32.js":
/*!***************************************************!*\
  !*** ./node_modules/@arcgis/core/chunks/vec32.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ n),
/* harmony export */   b: () => (/* binding */ f),
/* harmony export */   c: () => (/* binding */ t),
/* harmony export */   d: () => (/* binding */ i),
/* harmony export */   e: () => (/* binding */ o),
/* harmony export */   f: () => (/* binding */ a),
/* harmony export */   n: () => (/* binding */ s),
/* harmony export */   s: () => (/* binding */ u),
/* harmony export */   t: () => (/* binding */ r),
/* harmony export */   v: () => (/* binding */ d)
/* harmony export */ });
/* harmony import */ var _geometry_support_buffer_math_common_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../geometry/support/buffer/math/common.js */ "./node_modules/@arcgis/core/geometry/support/buffer/math/common.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function t(e,t,f){r(e.typedBuffer,t.typedBuffer,f,e.typedBufferStride,t.typedBufferStride)}function r(t,r,f,n=3,o=n){if(t.length/n!==Math.ceil(r.length/o))return _geometry_support_buffer_math_common_js__WEBPACK_IMPORTED_MODULE_0__.mathLogger.error("source and destination buffers need to have the same number of elements"),t;const u=t.length/n,i=f[0],s=f[1],a=f[2],d=f[4],c=f[5],l=f[6],p=f[8],y=f[9],h=f[10],m=f[12],B=f[13],g=f[14];let S=0,M=0;for(let e=0;e<u;e++){const e=r[S],f=r[S+1],u=r[S+2];t[M]=i*e+d*f+p*u+m,t[M+1]=s*e+c*f+y*u+B,t[M+2]=a*e+l*f+h*u+g,S+=o,M+=n}return t}function f(e,t,r){n(e.typedBuffer,t.typedBuffer,r,e.typedBufferStride,t.typedBufferStride)}function n(t,r,f,n=3,o=n){if(t.length/n!==Math.ceil(r.length/o))return void _geometry_support_buffer_math_common_js__WEBPACK_IMPORTED_MODULE_0__.mathLogger.error("source and destination buffers need to have the same number of elements");const u=t.length/n,i=f[0],s=f[1],a=f[2],d=f[3],c=f[4],l=f[5],p=f[6],y=f[7],h=f[8];let m=0,B=0;for(let e=0;e<u;e++){const e=r[m],f=r[m+1],u=r[m+2];t[B]=i*e+d*f+p*u,t[B+1]=s*e+c*f+y*u,t[B+2]=a*e+l*f+h*u,m+=o,B+=n}}function o(e,t,r){u(e.typedBuffer,t,r,e.typedBufferStride)}function u(e,t,r,f=3){const n=Math.min(e.length/f,t.count),o=t.typedBuffer,u=t.typedBufferStride;let i=0,s=0;for(let a=0;a<n;a++)e[s]=r*o[i],e[s+1]=r*o[i+1],e[s+2]=r*o[i+2],i+=u,s+=f}function i(e,t){s(e.typedBuffer,t.typedBuffer,e.typedBufferStride,t.typedBufferStride)}function s(e,t,r=3,f=r){const n=Math.min(e.length/r,t.length/f);let o=0,u=0;for(let i=0;i<n;i++){const n=t[o],i=t[o+1],s=t[o+2],a=n*n+i*i+s*s;if(a>0){const t=1/Math.sqrt(a);e[u]=t*n,e[u+1]=t*i,e[u+2]=t*s}o+=f,u+=r}}function a(e,t,r){const f=Math.min(e.count,t.count),n=e.typedBuffer,o=e.typedBufferStride,u=t.typedBuffer,i=t.typedBufferStride;let s=0,a=0;for(let d=0;d<f;d++)n[a]=u[s]>>r,n[a+1]=u[s+1]>>r,n[a+2]=u[s+2]>>r,s+=i,a+=o}const d=Object.freeze(Object.defineProperty({__proto__:null,normalize:s,normalizeView:i,scale:u,scaleView:o,shiftRight:a,transformMat3:n,transformMat3View:f,transformMat4:r,transformMat4View:t},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ "./node_modules/@arcgis/core/geometry/support/MeshGeoreferencedRelativeVertexSpace.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/geometry/support/MeshGeoreferencedRelativeVertexSpace.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ m)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Clonable_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/Clonable.js */ "./node_modules/@arcgis/core/core/Clonable.js");
/* harmony import */ var _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/JSONSupport.js */ "./node_modules/@arcgis/core/core/JSONSupport.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_enumeration_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/enumeration.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/enumeration.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../chunks/vec3f64.js */ "./node_modules/@arcgis/core/chunks/vec3f64.js");
/* harmony import */ var _Point_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../Point.js */ "./node_modules/@arcgis/core/geometry/Point.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
let a=class extends((0,_core_Clonable_js__WEBPACK_IMPORTED_MODULE_1__.ClonableMixin)(_core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_2__.JSONSupport)){constructor(e){super(e),this.type="georeferenced-relative",this.isRelative=!0,this.isGeoreferenced=!0,this.origin=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_9__.c)()}getOriginPoint(e){const[r,o,t]=this.origin;return new _Point_js__WEBPACK_IMPORTED_MODULE_10__["default"]({x:r,y:o,z:t,spatialReference:e})}setOriginFromPoint({x:e,y:r,z:o}){this.origin=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_9__.f)(e,r,o??0)}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_enumeration_js__WEBPACK_IMPORTED_MODULE_7__.enumeration)({georeferencedRelative:"georeferenced-relative"},{readOnly:!0})],a.prototype,"type",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)({type:[Number],nonNullable:!0,json:{write:!0}})],a.prototype,"origin",void 0),a=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__.subclass)("esri.geometry.support.MeshGeoreferencedRelativeVertexSpace")],a);const m=a;


/***/ }),

/***/ "./node_modules/@arcgis/core/geometry/support/buffer/math/common.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@arcgis/core/geometry/support/buffer/math/common.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   mathLogger: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const e=_core_Logger_js__WEBPACK_IMPORTED_MODULE_0__["default"].getLogger("esri.views.3d.support.buffer.math");


/***/ }),

/***/ "./node_modules/@arcgis/core/geometry/support/meshUtils/External.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@arcgis/core/geometry/support/meshUtils/External.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ServiceAsset: () => (/* binding */ i),
/* harmony export */   ServiceAssetPart: () => (/* binding */ o),
/* harmony export */   assetFormatId: () => (/* binding */ N),
/* harmony export */   assetIsOnService: () => (/* binding */ b),
/* harmony export */   externalIsOnService: () => (/* binding */ h),
/* harmony export */   externalSourceToMultiPart: () => (/* binding */ A),
/* harmony export */   externalSourcesAreEqual: () => (/* binding */ y),
/* harmony export */   isDisplayAsset: () => (/* binding */ m),
/* harmony export */   isDisplayExternal: () => (/* binding */ u),
/* harmony export */   isDisplaySource: () => (/* binding */ p),
/* harmony export */   isOriginalExternal: () => (/* binding */ v),
/* harmony export */   sourceIsOnService: () => (/* binding */ g)
/* harmony export */ });
/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../request.js */ "./node_modules/@arcgis/core/request.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _layers_support_infoFor3D_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../layers/support/infoFor3D.js */ "./node_modules/@arcgis/core/layers/support/infoFor3D.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class i{constructor(t,r,e){this.assetName=t,this.assetMimeType=r,this.parts=e}equals(t){return this===t||this.assetName===t.assetName&&this.assetMimeType===t.assetMimeType&&(0,_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_1__.equals)(this.parts,t.parts,((t,r)=>t.equals(r)))}isOnService(t){return this.parts.every((r=>r.isOnService(t)))}makeHash(){let t="";for(const r of this.parts)t+=r.partHash;return t}async toBlob(t){const{parts:r}=this;if(1===r.length)return r[0].toBlob(t);const s=await Promise.all(r.map((r=>r.toBlob(t))));return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.throwIfAborted)(t),new Blob(s)}}class o{constructor(t,r){this.partUrl=t,this.partHash=r}equals(t){return this===t||this.partUrl===t.partUrl&&this.partHash===t.partHash}isOnService(t){return this.partUrl.startsWith(`${t.path}/assets/`)}async toBlob(r){const{data:s}=await (0,_request_js__WEBPACK_IMPORTED_MODULE_0__["default"])(this.partUrl,{responseType:"blob"});return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.throwIfAborted)(r),s}}function u(t){return p(t?.source)}function c(t){if(!Array.isArray(t))return!1;return t.every((t=>t instanceof i))}const f=/^(model\/gltf\+json)|(model\/gltf-binary)$/,l=/\.(gltf|glb)/i;function p(t){if(!t)return!1;if(Array.isArray(t)){return t.some(m)}return m(t)}function m(t){if(t instanceof File){const{type:r,name:e}=t;return f.test(r)||l.test(e)}return f.test(t.assetMimeType)||l.test(t.assetName)}function h(t,r){if(!t)return!1;const{source:e}=t;return g(e,r)}function y(t,r){if(t===r)return!0;const{source:e}=t,{source:s}=r;if(e===s)return!0;if(c(e)&&c(s)){if(e.length!==s.length)return!1;const t=(t,r)=>t.assetName<r.assetName?-1:t.assetName>r.assetName?1:0,r=[...e].sort(t),n=[...s].sort(t);for(let e=0;e<r.length;++e)if(!r[e].equals(n[e]))return!1;return!0}return!1}function g(t,r){if(Array.isArray(t)){const e=t;return e.length>0&&e.every((t=>b(t,r)))}return b(t,r)}function b(t,r){return t instanceof i&&t.isOnService(r)}function N(t,r){return t instanceof File?(0,_layers_support_infoFor3D_js__WEBPACK_IMPORTED_MODULE_3__.getFileFormatId)(t,r):(0,_layers_support_infoFor3D_js__WEBPACK_IMPORTED_MODULE_3__.getMimeTypeFormatId)(t.assetMimeType,r)??(0,_layers_support_infoFor3D_js__WEBPACK_IMPORTED_MODULE_3__.getFilenameFormatId)(t.assetName,r)}function A(t){return Array.isArray(t)?t:[t]}function v(t){return!!t.original}


/***/ }),

/***/ "./node_modules/@arcgis/core/geometry/support/meshVertexSpaceUtils.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@arcgis/core/geometry/support/meshVertexSpaceUtils.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   toRelativeVertexSpace: () => (/* binding */ n)
/* harmony export */ });
/* harmony import */ var _chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/mat4.js */ "./node_modules/@arcgis/core/chunks/mat4.js");
/* harmony import */ var _chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../chunks/mat4f64.js */ "./node_modules/@arcgis/core/chunks/mat4f64.js");
/* harmony import */ var _MeshGeoreferencedRelativeVertexSpace_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./MeshGeoreferencedRelativeVertexSpace.js */ "./node_modules/@arcgis/core/geometry/support/MeshGeoreferencedRelativeVertexSpace.js");
/* harmony import */ var _chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../chunks/vec32.js */ "./node_modules/@arcgis/core/chunks/vec32.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function n(t){const{vertexSpace:n}=t;if(n.isRelative)return t.clone();const{anchor:i}=t,c=i.clone(),a=(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.d)(s,[-c.x,-c.y,-c.z]),m=new _MeshGeoreferencedRelativeVertexSpace_js__WEBPACK_IMPORTED_MODULE_2__["default"]({origin:[c.x,c.y,c.z]}),p=t.cloneWithVertexSpace(m),{position:u}=p.vertexAttributes;return p.vertexAttributes.position=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.t)(new Float64Array(u.length),u,a),p.vertexAttributesChanged(),p}const s=(0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__.a)();


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/applyEditsUtils.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/applyEditsUtils.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createEditedFeatures: () => (/* binding */ R),
/* harmony export */   createFeatureEditResult: () => (/* binding */ g),
/* harmony export */   getAttachmentEditsJSON: () => (/* binding */ c),
/* harmony export */   getFeatureIds: () => (/* binding */ m),
/* harmony export */   getFeatureJSON: () => (/* binding */ u),
/* harmony export */   isProtectedOrPrivateVersionError: () => (/* binding */ I),
/* harmony export */   unpackEditResultData: () => (/* binding */ f)
/* harmony export */ });
/* harmony import */ var _Graphic_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Graphic.js */ "./node_modules/@arcgis/core/Graphic.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_unitUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/unitUtils.js */ "./node_modules/@arcgis/core/core/unitUtils.js");
/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/urlUtils.js */ "./node_modules/@arcgis/core/core/urlUtils.js");
/* harmony import */ var _geometry_projection_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../geometry/projection.js */ "./node_modules/@arcgis/core/geometry/projection.js");
/* harmony import */ var _geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../geometry/support/jsonUtils.js */ "./node_modules/@arcgis/core/geometry/support/jsonUtils.js");
/* harmony import */ var _editingSupport_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./editingSupport.js */ "./node_modules/@arcgis/core/layers/graphics/editingSupport.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
async function u(e,t,a){const{geometry:s}=t,l={...t.attributes};if(null!=a&&"mesh"===s?.type){const{transformFieldRoles:t}=a,{origin:i,spatialReference:d,transform:u}=s,c=e.spatialReference;await (0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_5__.initializeProjection)(d,c);const p=(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_5__.project)(i,c);if(l[t.originX]=p.x,l[t.originY]=p.y,l[t.originZ]=p.z??0,null!=u){const{translation:e,scale:a,rotation:o}=u,{vertexSpace:n}=s,i=n.isGeoreferenced?1:(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_3__.getMetersPerCartesianUnitForSR)(d)/(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_3__.getMetersPerCartesianUnitForSR)(c);l[t.translationX]=e[0]*i,l[t.translationY]=e[2]*i,l[t.translationZ]=-e[1]*i,l[t.scaleX]=a[0],l[t.scaleY]=a[2],l[t.scaleZ]=a[1],l[t.rotationX]=o[0],l[t.rotationY]=o[2],l[t.rotationZ]=-o[1],l[t.rotationDeg]=o[3]}return{attributes:l}}return null==s?{attributes:l}:"mesh"===s.type||"extent"===s.type?null:{geometry:s.toJSON(),attributes:l}}async function c(e,t){const a=await Promise.all((t.addAttachments??[]).map((t=>p(e,t)))),r=await Promise.all((t.updateAttachments??[]).map((t=>p(e,t)))),s=t.deleteAttachments??[];return a.length||r.length||s.length?{adds:a,updates:r,deletes:[...s]}:null}async function p(e,t){const{feature:a,attachment:r}=t,{globalId:o,name:n,contentType:l,data:i,uploadId:d}=r,u={globalId:o};if(a&&("attributes"in a?u.parentGlobalId=a.attributes?.[e.globalIdField]:a.globalId&&(u.parentGlobalId=a.globalId)),d)u.uploadId=d;else if(i){const e=await (0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_4__.parseData)(i);e&&(u.contentType=e.mediaType,u.data=e.data),i instanceof File&&(u.name=i.name)}return n&&(u.name=n),l&&(u.contentType=l),u}function m(e,t,a){if(!t||0===t.length)return[];if(a&&(0,_editingSupport_js__WEBPACK_IMPORTED_MODULE_7__.isFeatureIdentifierArrayWithGlobalId)(t))return t.map((e=>e.globalId));if((0,_editingSupport_js__WEBPACK_IMPORTED_MODULE_7__.isFeatureIdentifierArrayWithObjectId)(t))return t.map((e=>e.objectId));const r=a?e.globalIdField:e.objectIdField;return r?t.map((e=>e.getAttribute(r))):[]}function f(e){const t=e?.assetMaps;if(t){for(const e of t.addResults)e.success||_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger("esri.layers.graphics.sources.support.sourceUtils").error(`Failed to map asset to feature with globalId ${e.globalId}.`);for(const e of t.updateResults)e.success||_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger("esri.layers.graphics.sources.support.sourceUtils").error(`Failed to map asset to feature with globalId ${e.globalId}.`)}const r=e?.attachments,s={addFeatureResults:e?.addResults?.map(g)??[],updateFeatureResults:e?.updateResults?.map(g)??[],deleteFeatureResults:e?.deleteResults?.map(g)??[],addAttachmentResults:r?.addResults?r.addResults.map(g):[],updateAttachmentResults:r?.updateResults?r.updateResults.map(g):[],deleteAttachmentResults:r?.deleteResults?r.deleteResults.map(g):[]};return e?.editMoment&&(s.editMoment=e.editMoment),s}function g(e){const a=!0===e.success?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:a?new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("feature-layer-source:edit-failure",a.description,{code:a.code}):null}}function b(t,a){return new _Graphic_js__WEBPACK_IMPORTED_MODULE_0__["default"]({attributes:t.attributes,geometry:(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_6__.fromJSON)({...t.geometry,spatialReference:a})})}function R(e,t){return{adds:e?.adds?.map((e=>b(e,t)))||[],updates:e?.updates?.map((e=>({original:b(e[0],t),current:b(e[1],t)})))||[],deletes:e?.deletes?.map((e=>b(e,t)))||[],spatialReference:t}}function I(e){const t=e.details.raw,a=+t.code,r=+t.extendedCode;return 500===a&&(-2147217144===r||-2147467261===r)}


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/sources/FeatureLayerSource.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/sources/FeatureLayerSource.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ $)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _geometry_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../geometry.js */ "./node_modules/@arcgis/core/geometry.js");
/* harmony import */ var _kernel_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../kernel.js */ "./node_modules/@arcgis/core/kernel.js");
/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../request.js */ "./node_modules/@arcgis/core/request.js");
/* harmony import */ var _TimeExtent_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../TimeExtent.js */ "./node_modules/@arcgis/core/TimeExtent.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_jsonMap_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../core/jsonMap.js */ "./node_modules/@arcgis/core/core/jsonMap.js");
/* harmony import */ var _core_Loadable_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../core/Loadable.js */ "./node_modules/@arcgis/core/core/Loadable.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_object_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../core/object.js */ "./node_modules/@arcgis/core/core/object.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../core/urlUtils.js */ "./node_modules/@arcgis/core/core/urlUtils.js");
/* harmony import */ var _core_uuid_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../core/uuid.js */ "./node_modules/@arcgis/core/core/uuid.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _geometry_Extent_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../geometry/Extent.js */ "./node_modules/@arcgis/core/geometry/Extent.js");
/* harmony import */ var _geometry_support_meshVertexSpaceUtils_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../geometry/support/meshVertexSpaceUtils.js */ "./node_modules/@arcgis/core/geometry/support/meshVertexSpaceUtils.js");
/* harmony import */ var _geometry_support_meshUtils_External_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../geometry/support/meshUtils/External.js */ "./node_modules/@arcgis/core/geometry/support/meshUtils/External.js");
/* harmony import */ var _applyEditsUtils_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../applyEditsUtils.js */ "./node_modules/@arcgis/core/layers/graphics/applyEditsUtils.js");
/* harmony import */ var _support_clientSideDefaults_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./support/clientSideDefaults.js */ "./node_modules/@arcgis/core/layers/graphics/sources/support/clientSideDefaults.js");
/* harmony import */ var _support_QueryTask_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./support/QueryTask.js */ "./node_modules/@arcgis/core/layers/graphics/sources/support/QueryTask.js");
/* harmony import */ var _support_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../../support/arcgisLayerUrl.js */ "./node_modules/@arcgis/core/layers/support/arcgisLayerUrl.js");
/* harmony import */ var _support_featureLayerUtils_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../../support/featureLayerUtils.js */ "./node_modules/@arcgis/core/layers/support/featureLayerUtils.js");
/* harmony import */ var _support_infoFor3D_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../../support/infoFor3D.js */ "./node_modules/@arcgis/core/layers/support/infoFor3D.js");
/* harmony import */ var _rest_query_executeQueryJSON_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../../../rest/query/executeQueryJSON.js */ "./node_modules/@arcgis/core/rest/query/executeQueryJSON.js");
/* harmony import */ var _rest_query_operations_editsZScale_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../../../rest/query/operations/editsZScale.js */ "./node_modules/@arcgis/core/rest/query/operations/editsZScale.js");
/* harmony import */ var _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ../../../rest/support/Query.js */ "./node_modules/@arcgis/core/rest/support/Query.js");
/* harmony import */ var _versionManagement_support_versionManagementUtils_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ../../../versionManagement/support/versionManagementUtils.js */ "./node_modules/@arcgis/core/versionManagement/support/versionManagementUtils.js");
/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ../../../geometry/SpatialReference.js */ "./node_modules/@arcgis/core/geometry/SpatialReference.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const L=new _core_jsonMap_js__WEBPACK_IMPORTED_MODULE_8__.JSONMap({originalAndCurrentFeatures:"original-and-current-features",none:"none"}),Q=new Set(["Feature Layer","Oriented Imagery Layer","Table"]),D=new _core_jsonMap_js__WEBPACK_IMPORTED_MODULE_8__.JSONMap({Started:"published",Publishing:"publishing",Stopped:"unavailable"});let P=class extends _core_Loadable_js__WEBPACK_IMPORTED_MODULE_9__["default"]{constructor(){super(...arguments),this.type="feature-layer",this.refresh=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_12__.debounce)((async()=>{await this.load();const e=this.sourceJSON.editingInfo?.lastEditDate;if(null==e)return{dataChanged:!0,updates:{}};try{await this._fetchService(null)}catch{return{dataChanged:!0,updates:{}}}const t=e!==this.sourceJSON.editingInfo?.lastEditDate;return{dataChanged:t,updates:t?{editingInfo:this.sourceJSON.editingInfo,extent:this.sourceJSON.extent}:null}})),this._ongoingAssetUploads=new Map}load(e){const t=this.layer.sourceJSON,s=this._fetchService(t,{...e}).then((()=>this.layer.setUserPrivileges(this.sourceJSON.serviceItemId,e))).then((()=>this._ensureLatestMetadata(e)));return this.addResolvingPromise(s),Promise.resolve(this)}get queryTask(){const{capabilities:e,parsedUrl:t,dynamicDataSource:s,infoFor3D:r,gdbVersion:a,spatialReference:i,fieldsIndex:o}=this.layer,n=(0,_core_has_js__WEBPACK_IMPORTED_MODULE_7__["default"])("featurelayer-pbf")&&e?.query.supportsFormatPBF&&null==r,u=e?.operations?.supportsQueryAttachments??!1;return new _support_QueryTask_js__WEBPACK_IMPORTED_MODULE_23__["default"]({url:t.path,pbfSupported:n,fieldsIndex:o,infoFor3D:r,dynamicDataSource:s,gdbVersion:a,sourceSpatialReference:i,queryAttachmentsSupported:u})}async addAttachment(e,t){await this.load();const{layer:r}=this;await (0,_support_featureLayerUtils_js__WEBPACK_IMPORTED_MODULE_25__.ensureLayerCredential)(r,"editing");const a=e.attributes[r.objectIdField],i=r.parsedUrl.path+"/"+a+"/addAttachment",o=this._getLayerRequestOptions(),n=this._getFormDataForAttachment(t,o.query);try{const e=await (0,_request_js__WEBPACK_IMPORTED_MODULE_3__["default"])(i,{body:n});return (0,_applyEditsUtils_js__WEBPACK_IMPORTED_MODULE_21__.createFeatureEditResult)(e.data.addAttachmentResult)}catch(u){throw this._createAttachmentErrorResult(a,u)}}async updateAttachment(e,t,r){await this.load();const{layer:a}=this;await (0,_support_featureLayerUtils_js__WEBPACK_IMPORTED_MODULE_25__.ensureLayerCredential)(a,"editing");const i=e.attributes[a.objectIdField],o=a.parsedUrl.path+"/"+i+"/updateAttachment",n=this._getLayerRequestOptions({query:{attachmentId:t}}),u=this._getFormDataForAttachment(r,n.query);try{const e=await (0,_request_js__WEBPACK_IMPORTED_MODULE_3__["default"])(o,{body:u});return (0,_applyEditsUtils_js__WEBPACK_IMPORTED_MODULE_21__.createFeatureEditResult)(e.data.updateAttachmentResult)}catch(l){throw this._createAttachmentErrorResult(i,l)}}async applyEdits(e,r){await this.load();const{layer:i}=this;await (0,_support_featureLayerUtils_js__WEBPACK_IMPORTED_MODULE_25__.ensureLayerCredential)(i,"editing");const o=i.infoFor3D,n=null!=o,u=n||(r?.globalIdUsed??!1),l=n?await this._uploadMeshesAndGetAssetMapEditsJSON(e):null,c=e.addFeatures?.map((e=>(0,_applyEditsUtils_js__WEBPACK_IMPORTED_MODULE_21__.getFeatureJSON)(this.layer,e,o)))??[],d=(await Promise.all(c)).filter(_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_5__.isSome),p=e.updateFeatures?.map((e=>(0,_applyEditsUtils_js__WEBPACK_IMPORTED_MODULE_21__.getFeatureJSON)(this.layer,e,o)))??[],y=(await Promise.all(p)).filter(_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_5__.isSome),h=(0,_applyEditsUtils_js__WEBPACK_IMPORTED_MODULE_21__.getFeatureIds)(this.layer,e.deleteFeatures,u);(0,_rest_query_operations_editsZScale_js__WEBPACK_IMPORTED_MODULE_28__.unapplyEditsZUnitScaling)(d,y,i.spatialReference);const m=await (0,_applyEditsUtils_js__WEBPACK_IMPORTED_MODULE_21__.getAttachmentEditsJSON)(this.layer,e),f=i.capabilities.editing.supportsAsyncApplyEdits&&n,g=r?.gdbVersion||i.gdbVersion,S={gdbVersion:g,rollbackOnFailure:r?.rollbackOnFailureEnabled,useGlobalIds:u,returnEditMoment:r?.returnEditMoment,usePreviousEditMoment:r?.usePreviousEditMoment,async:f};await (0,_versionManagement_support_versionManagementUtils_js__WEBPACK_IMPORTED_MODULE_30__.isSafeToEditVersion)(this.layer.url,g,!0);const w=(0,_versionManagement_support_versionManagementUtils_js__WEBPACK_IMPORTED_MODULE_30__.isVersionInEditSession)(this.layer.url,g||null);r?.returnServiceEditsOption?(S.edits=JSON.stringify([{id:i.layerId,adds:d,updates:y,deletes:h,attachments:m,assetMaps:l}]),S.returnServiceEditsOption=L.toJSON(r?.returnServiceEditsOption),S.returnServiceEditsInSourceSR=r?.returnServiceEditsInSourceSR):(S.adds=d.length?JSON.stringify(d):null,S.updates=y.length?JSON.stringify(y):null,S.deletes=h.length?u?JSON.stringify(h):h.join(","):null,S.attachments=m&&JSON.stringify(m),S.assetMaps=null!=l?JSON.stringify(l):void 0);const q=this._getLayerRequestOptions({method:"post",query:S});w&&(q.authMode="immediate",q.query.returnEditMoment=!0,q.query.sessionId=_versionManagement_support_versionManagementUtils_js__WEBPACK_IMPORTED_MODULE_30__.currentSessionId);const A=r?.returnServiceEditsOption?i.url:i.parsedUrl.path;let F;try{F=f?await this._asyncApplyEdits(A+"/applyEdits",q):await (0,_request_js__WEBPACK_IMPORTED_MODULE_3__["default"])(A+"/applyEdits",q)}catch(_){if(!(0,_applyEditsUtils_js__WEBPACK_IMPORTED_MODULE_21__.isProtectedOrPrivateVersionError)(_))throw _;q.authMode="immediate",F=f?await this._asyncApplyEdits(A+"/applyEdits",q):await (0,_request_js__WEBPACK_IMPORTED_MODULE_3__["default"])(A+"/applyEdits",q)}if(!i.capabilities.operations?.supportsEditing&&i.effectiveCapabilities?.operations?.supportsEditing){const e=_kernel_js__WEBPACK_IMPORTED_MODULE_2__.id?.findCredential(i.url);await(e?.refreshToken())}return this._createEditsResult(F)}async deleteAttachments(e,t){await this.load();const{layer:r}=this;await (0,_support_featureLayerUtils_js__WEBPACK_IMPORTED_MODULE_25__.ensureLayerCredential)(r,"editing");const a=e.attributes[r.objectIdField],i=r.parsedUrl.path+"/"+a+"/deleteAttachments";try{return(await (0,_request_js__WEBPACK_IMPORTED_MODULE_3__["default"])(i,this._getLayerRequestOptions({query:{attachmentIds:t.join(",")},method:"post"}))).data.deleteAttachmentResults.map(_applyEditsUtils_js__WEBPACK_IMPORTED_MODULE_21__.createFeatureEditResult)}catch(o){throw this._createAttachmentErrorResult(a,o)}}fetchRecomputedExtents(e={}){const t=e.signal;return this.load({signal:t}).then((async()=>{const t=this._getLayerRequestOptions({...e,query:{returnUpdates:!0}}),{layerId:a,url:i}=this.layer,{data:o}=await (0,_request_js__WEBPACK_IMPORTED_MODULE_3__["default"])(`${i}/${a}`,t),{id:n,extent:u,fullExtent:l,timeExtent:c}=o,d=u||l;return{id:n,fullExtent:d&&_geometry_Extent_js__WEBPACK_IMPORTED_MODULE_18__["default"].fromJSON(d),timeExtent:c&&_TimeExtent_js__WEBPACK_IMPORTED_MODULE_4__["default"].fromJSON({start:c[0],end:c[1]})}}))}async queryAttachments(e,t={}){await this.load();const s=this._getLayerRequestOptions(t);return this.queryTask.executeAttachmentQuery(e,s)}async queryFeatures(e,t){await this.load();const s=await this.queryTask.execute(e,{...t,query:this._createRequestQueryOptions(t)});return e.outStatistics?.length&&s.features.length&&s.features.forEach((t=>{const s=t.attributes;e.outStatistics?.forEach((({outStatisticFieldName:e})=>{if(e){const t=e.toLowerCase();t&&t in s&&e!==t&&(s[e]=s[t],delete s[t])}}))})),s}async queryFeaturesJSON(e,t){return await this.load(),this.queryTask.executeJSON(e,{...t,query:this._createRequestQueryOptions(t)})}async queryObjectIds(e,t){return await this.load(),this.queryTask.executeForIds(e,{...t,query:this._createRequestQueryOptions(t)})}async queryFeatureCount(e,t){return await this.load(),this.queryTask.executeForCount(e,{...t,query:this._createRequestQueryOptions(t)})}async queryExtent(e,t){return await this.load(),this.queryTask.executeForExtent(e,{...t,query:this._createRequestQueryOptions(t)})}async queryRelatedFeatures(e,t){return await this.load(),this.queryTask.executeRelationshipQuery(e,{...t,query:this._createRequestQueryOptions(t)})}async queryRelatedFeaturesCount(e,t){return await this.load(),this.queryTask.executeRelationshipQueryForCount(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopFeatures(e,t){return await this.load(),this.queryTask.executeTopFeaturesQuery(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopObjectIds(e,t){return await this.load(),this.queryTask.executeForTopIds(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopExtents(e,t){return await this.load(),this.queryTask.executeForTopExtents(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopCount(e,t){return await this.load(),this.queryTask.executeForTopCount(e,{...t,query:this._createRequestQueryOptions(t)})}async fetchPublishingStatus(){if(!(0,_support_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_24__.isHostedAgolService)(this.layer.url))return"unavailable";const e=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_13__.join)(this.layer.url,"status"),t=await (0,_request_js__WEBPACK_IMPORTED_MODULE_3__["default"])(e,{query:{f:"json"}});return D.fromJSON(t.data.status)}async uploadAssets(e,t){const{uploadAssets:s}=await __webpack_require__.e(/*! import() */ "vendors-node_modules_arcgis_core_layers_graphics_sources_support_uploadAssets_js").then(__webpack_require__.bind(__webpack_require__, /*! ./support/uploadAssets.js */ "./node_modules/@arcgis/core/layers/graphics/sources/support/uploadAssets.js"));return s(e,{layer:this.layer,ongoingUploads:this._ongoingAssetUploads},t)}async _asyncApplyEdits(e,t){const r=(await (0,_request_js__WEBPACK_IMPORTED_MODULE_3__["default"])(e,t)).data.statusUrl;for(;;){const e=(await (0,_request_js__WEBPACK_IMPORTED_MODULE_3__["default"])(r,{query:{f:"json"},responseType:"json"})).data;switch(e.status){case"Completed":return (0,_request_js__WEBPACK_IMPORTED_MODULE_3__["default"])(e.resultUrl,{query:{f:"json"},responseType:"json"});case"CompletedWithErrors":throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_6__["default"]("async-applyEdits-failed","asynchronous applyEdits call failed.");case"Failed ImportChanges":case"InProgress":case"Pending":case"ExportAttachments":case"ExportChanges":case"ExportingData":case"ExportingSnapshot":case"ImportAttachments":case"ProvisioningReplica":case"UnRegisteringReplica":break;default:throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_6__["default"]("async-applyEdits-failed","asynchronous applyEdits call failed (undefined response status)")}await (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_12__.after)(V)}}_createRequestQueryOptions(e){const t={...this.layer.customParameters,token:this.layer.apiKey,...e?.query};return this.layer.datesInUnknownTimezone&&(t.timeReferenceUnknownClient=!0),t}async _fetchService(e,t){if(!e){const r={};(0,_core_has_js__WEBPACK_IMPORTED_MODULE_7__["default"])("featurelayer-advanced-symbols")&&(r.returnAdvancedSymbols=!0),t?.cacheBust&&(r._ts=Date.now());const{data:a}=await (0,_request_js__WEBPACK_IMPORTED_MODULE_3__["default"])(this.layer.parsedUrl.path,this._getLayerRequestOptions({query:r,signal:t?.signal}));e=a}this.sourceJSON=await this._patchServiceJSON(e,t?.signal);const r=e.type;if(!Q.has(r))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_6__["default"]("feature-layer-source:unsupported-type",`Source type "${r}" is not supported`)}async _patchServiceJSON(e,t){if("Table"!==e.type&&e.geometryType&&!e?.drawingInfo?.renderer&&!e.defaultSymbol){const t=(0,_support_clientSideDefaults_js__WEBPACK_IMPORTED_MODULE_22__.createDrawingInfo)(e.geometryType).renderer;(0,_core_object_js__WEBPACK_IMPORTED_MODULE_11__.setDeepValue)("drawingInfo.renderer",t,e)}if("esriGeometryMultiPatch"===e.geometryType&&e.infoFor3D&&(e.geometryType="mesh"),null==e.extent)try{const{data:r}=await (0,_request_js__WEBPACK_IMPORTED_MODULE_3__["default"])(this.layer.url,this._getLayerRequestOptions({signal:t}));r.spatialReference&&(e.extent={xmin:0,ymin:0,xmax:0,ymax:0,spatialReference:r.spatialReference})}catch(r){(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_12__.throwIfAbortError)(r)}return e}async _ensureLatestMetadata(e){if(this.layer.userHasUpdateItemPrivileges&&this.sourceJSON.cacheMaxAge>0)return this._fetchService(null,{...e,cacheBust:!0})}async _uploadMeshesAndGetAssetMapEditsJSON(e){const{addAssetFeatures:t}=e;if(!t?.length)return null;const s=await this._filterRedundantAssetMaps(t);if(!t?.length)return null;const r=new Array,a=new Map;for(const i of s){const{geometry:e}=i,{vertexSpace:t}=e;if(t.isRelative)r.push(e);else{const t=(0,_geometry_support_meshVertexSpaceUtils_js__WEBPACK_IMPORTED_MODULE_19__.toRelativeVertexSpace)(e);a.set(t,e),i.geometry=t,r.push(t)}}await this.uploadAssets(r);for(const[i,o]of a)o.addExternalSources(i.metadata.externalSources.items);return{adds:this._getAssetMapEditsJSON(s),updates:[],deletes:[]}}_getAssetMapEditsJSON(e){const t=new Array,s=this.layer.globalIdField,r=this.layer.parsedUrl;for(const a of e){const e=a.geometry,{metadata:i}=e,o=i.getExternalSourcesOnService(r),n=a.getAttribute(s);if(0===o.length){_core_Logger_js__WEBPACK_IMPORTED_MODULE_10__["default"].getLogger(this).error(`Skipping feature ${n}. The mesh it is associated with has not been uploaded to the service and cannot be mapped to it.`);continue}const{source:l}=o.find(_geometry_support_meshUtils_External_js__WEBPACK_IMPORTED_MODULE_20__.isOriginalExternal)??o[0],{vertexSpace:c}=e,d=c.isGeoreferenced?["PROJECT_VERTICES"]:[];for(const s of l)1===s.parts.length?t.push({globalId:(0,_core_uuid_js__WEBPACK_IMPORTED_MODULE_14__.generateBracedUUID)(),parentGlobalId:n,assetName:s.assetName,assetHash:s.parts[0].partHash,flags:d}):_core_Logger_js__WEBPACK_IMPORTED_MODULE_10__["default"].getLogger(this).error(`Skipping asset ${s.assetName}. It does not have exactly one part, so we cannot map it to a feature.`)}return t}_createEditsResult(e){const t=e.data,{layerId:s}=this.layer,r=[];let a=null;if(Array.isArray(t))for(const o of t)r.push({id:o.id,editedFeatures:o.editedFeatures}),o.id===s&&(a={addResults:o.addResults??[],updateResults:o.updateResults??[],deleteResults:o.deleteResults??[],attachments:o.attachments,editMoment:o.editMoment});else a=t;const i=(0,_applyEditsUtils_js__WEBPACK_IMPORTED_MODULE_21__.unpackEditResultData)(a);if(r.length>0){i.editedFeatureResults=[];for(const e of r){const{editedFeatures:t}=e,s=t?.spatialReference?new _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_31__["default"](t.spatialReference):null;i.editedFeatureResults.push({layerId:e.id,editedFeatures:(0,_applyEditsUtils_js__WEBPACK_IMPORTED_MODULE_21__.createEditedFeatures)(t,s)})}}return i}_createAttachmentErrorResult(e,t){const s=t.details.messages?.[0]||t.message,r=t.details.httpStatus||t.details.messageCode;return{objectId:e,globalId:null,error:new _core_Error_js__WEBPACK_IMPORTED_MODULE_6__["default"]("feature-layer-source:attachment-failure",s,{code:r})}}_getFormDataForAttachment(e,t){const s=e instanceof FormData?e:e&&e.elements?new FormData(e):null;if(s)for(const r in t){const e=t[r];null!=e&&(s.set?s.set(r,e):s.append(r,e))}return s}_getLayerRequestOptions(e={}){const{parsedUrl:t,gdbVersion:s,dynamicDataSource:r}=this.layer;return{...e,query:{gdbVersion:s,layer:r?JSON.stringify({source:r}):void 0,...t.query,f:"json",...this._createRequestQueryOptions(e)},responseType:"json"}}async _filterRedundantAssetMaps(e){const{layer:t}=this,{globalIdField:s,infoFor3D:r,parsedUrl:i}=t;if(null==r||null==s)return e;const o=(0,_support_infoFor3D_js__WEBPACK_IMPORTED_MODULE_26__.getAssetMapTable)(r);if(null==o)return e;const n=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_13__.join)(i.path,`../${o.id}`),u=new Array,l=new Array;for(const a of e)a.geometry.metadata.getExternalSourcesOnService(i).length>0?l.push(a):u.push(a);const c=l.map((e=>e.getAttribute(s))).filter(_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_5__.isSome);if(0===c.length)return e;const{assetMapFieldRoles:{parentGlobalId:d,assetHash:p}}=r,h=new _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_29__["default"];h.where=`${d} IN (${c.map((e=>`'${e}'`))})`,h.outFields=[p,d],h.returnGeometry=!1;const m=await (0,_rest_query_executeQueryJSON_js__WEBPACK_IMPORTED_MODULE_27__.executeQueryJSON)(n,h),{features:f}=m;return 0===f.length?e:[...u,...l.filter((e=>{const t=e.getAttribute(s);if(!t)return!0;const{metadata:r}=e.geometry,a=f.filter((e=>e.getAttribute(d)===t));if(0===a.length)return!0;const o=a.map((e=>e.getAttribute(p)));return r.getExternalSourcesOnService(i).flatMap((({source:e})=>e.flatMap((e=>e.parts.map((e=>e.partHash)))))).some((e=>o.every((t=>e!==t))))}))]}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)()],P.prototype,"type",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)({constructOnly:!0})],P.prototype,"layer",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)({readOnly:!0})],P.prototype,"queryTask",null),P=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_17__.subclass)("esri.layers.graphics.sources.FeatureLayerSource")],P);const V=1e3,$=P;


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfYXJjZ2lzX2NvcmVfbGF5ZXJzX2dyYXBoaWNzX3NvdXJjZXNfRmVhdHVyZUxheWVyU291cmNlX2pzLmJ1bmRsZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsd0NBQXdDLGNBQWMsOEZBQThGLDRDQUE0Qyx3Q0FBd0MsZ0JBQWdCLGdDQUFnQyxtREFBbUQscUVBQXFFLHFCQUFxQixlQUFlLEdBQXFEOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDSnRmO0FBQ0E7QUFDQTtBQUNBO0FBQ3VFLGtCQUFrQix5RUFBeUUsMEJBQTBCLDZDQUE2QywrRUFBQyxvRkFBb0YsMkdBQTJHLFlBQVksWUFBWSxJQUFJLEtBQUssK0JBQStCLHVFQUF1RSxTQUFTLGtCQUFrQix5RUFBeUUsMEJBQTBCLGtEQUFrRCwrRUFBQyxrRkFBa0Ysa0ZBQWtGLFlBQVksWUFBWSxJQUFJLEtBQUssK0JBQStCLGtFQUFrRSxrQkFBa0IseUNBQXlDLHNCQUFzQiwyRUFBMkUsWUFBWSxZQUFZLElBQUksMERBQTBELGdCQUFnQix1RUFBdUUsd0JBQXdCLHdDQUF3QyxZQUFZLFlBQVksSUFBSSxLQUFLLDZDQUE2QyxRQUFRLHVCQUF1QiwrQkFBK0IsV0FBVyxrQkFBa0IsOEdBQThHLFlBQVksWUFBWSxJQUFJLDZEQUE2RCw2Q0FBNkMsb0pBQW9KLHFCQUFxQixlQUFlLEdBQWlGOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0p0akU7QUFDQTtBQUNBO0FBQ0E7QUFDb2tCLG9CQUFvQixnRUFBQyxDQUFDLDZEQUFDLEdBQUcsZUFBZSxtR0FBbUcscURBQUMsR0FBRyxrQkFBa0IseUJBQXlCLFdBQVcsa0RBQUMsRUFBRSwrQkFBK0IsRUFBRSxvQkFBb0IsWUFBWSxFQUFFLFlBQVkscURBQUMsYUFBYSx1REFBQyxFQUFFLDRGQUFDLEVBQUUsK0NBQStDLEVBQUUsWUFBWSw4QkFBOEIsdURBQUMs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QVMsNEJBQTRCLEVBQUUsTUFBTSw2Q0FBNkMsWUFBWSxPQUFPLFlBQVkscUNBQXFDLFNBQVMsbUVBQW1FLHNCQUFzQixtQ0FBbUMsTUFBTSxRQUFRLE9BQU8sd0NBQXdDLEdBQUcsNkJBQTZCLFFBQVEsd0VBQUMsSUFBSSxvQkFBb0IsUUFBUSx3REFBQyxjQUFjLEtBQUssMkJBQTJCLGlHQUFpRyw2Q0FBNkMsdURBQUMsRUFBRSx5QkFBeUIsTUFBTSxvQkFBb0IsOEJBQThCLFNBQVMsK0RBQUMsQ0FBQyxXQUFXLEdBQUcsTUFBTSxjQUFjLEVBQUUsS0FBSyx5Q0FBeUMsY0FBYyxrRkFBQyxPQUFPLFdBQVcsR0FBRyw2Q0FBNkMsMEJBQTBCLGVBQWUsTUFBTSxXQUFXLG1EQUFtRCx5QkFBeUIsc0NBQXNDLG1EQUFtRCxTQUFTLGlGQUFpRixNQUFNLHVEQUFDLEVBQUUsdUZBQUMsK0JBQStCLHVEQUFDLEVBQUUsdUZBQUMsRUFBRSxpQkFBaUIsK0JBQStCLHVEQUFDLEVBQUUsdUZBQUMsRUFBRSxZQUFZLG1DQUFtQyx1REFBQyxFQUFFLHVGQUFDLHdEQUF3RCxnQkFBcUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zeW52aWV3Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9jaHVua3MvbWF0NGY2NC5qcyIsIndlYnBhY2s6Ly9zeW52aWV3Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9jaHVua3MvdmVjMzIuanMiLCJ3ZWJwYWNrOi8vc3ludmlldy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvZ2VvbWV0cnkvc3VwcG9ydC9NZXNoR2VvcmVmZXJlbmNlZFJlbGF0aXZlVmVydGV4U3BhY2UuanMiLCJ3ZWJwYWNrOi8vc3ludmlldy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvZ2VvbWV0cnkvc3VwcG9ydC9idWZmZXIvbWF0aC9jb21tb24uanMiLCJ3ZWJwYWNrOi8vc3ludmlldy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvZ2VvbWV0cnkvc3VwcG9ydC9tZXNoVXRpbHMvRXh0ZXJuYWwuanMiLCJ3ZWJwYWNrOi8vc3ludmlldy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvZ2VvbWV0cnkvc3VwcG9ydC9tZXNoVmVydGV4U3BhY2VVdGlscy5qcyIsIndlYnBhY2s6Ly9zeW52aWV3Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9sYXllcnMvZ3JhcGhpY3MvYXBwbHlFZGl0c1V0aWxzLmpzIiwid2VicGFjazovL3N5bnZpZXcvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL2xheWVycy9ncmFwaGljcy9zb3VyY2VzL0ZlYXR1cmVMYXllclNvdXJjZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuZnVuY3Rpb24gZSgpe3JldHVyblsxLDAsMCwwLDAsMSwwLDAsMCwwLDEsMCwwLDAsMCwxXX1mdW5jdGlvbiByKGUpe3JldHVybltlWzBdLGVbMV0sZVsyXSxlWzNdLGVbNF0sZVs1XSxlWzZdLGVbN10sZVs4XSxlWzldLGVbMTBdLGVbMTFdLGVbMTJdLGVbMTNdLGVbMTRdLGVbMTVdXX1mdW5jdGlvbiB0KGUscix0LG4sbyxhLHUsYyxmLGwscyxpLGIsXyxtLHApe3JldHVybltlLHIsdCxuLG8sYSx1LGMsZixsLHMsaSxiLF8sbSxwXX1mdW5jdGlvbiBuKGUscil7cmV0dXJuIG5ldyBGbG9hdDY0QXJyYXkoZSxyLDE2KX1jb25zdCBvPWUoKSxhPU9iamVjdC5mcmVlemUoT2JqZWN0LmRlZmluZVByb3BlcnR5KHtfX3Byb3RvX186bnVsbCxJREVOVElUWTpvLGNsb25lOnIsY3JlYXRlOmUsY3JlYXRlVmlldzpuLGZyb21WYWx1ZXM6dH0sU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZTpcIk1vZHVsZVwifSkpO2V4cG9ydHtvIGFzIEksZSBhcyBhLHIgYXMgYixuIGFzIGMsdCBhcyBmLGEgYXMgbX07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e21hdGhMb2dnZXIgYXMgZX1mcm9tXCIuLi9nZW9tZXRyeS9zdXBwb3J0L2J1ZmZlci9tYXRoL2NvbW1vbi5qc1wiO2Z1bmN0aW9uIHQoZSx0LGYpe3IoZS50eXBlZEJ1ZmZlcix0LnR5cGVkQnVmZmVyLGYsZS50eXBlZEJ1ZmZlclN0cmlkZSx0LnR5cGVkQnVmZmVyU3RyaWRlKX1mdW5jdGlvbiByKHQscixmLG49MyxvPW4pe2lmKHQubGVuZ3RoL24hPT1NYXRoLmNlaWwoci5sZW5ndGgvbykpcmV0dXJuIGUuZXJyb3IoXCJzb3VyY2UgYW5kIGRlc3RpbmF0aW9uIGJ1ZmZlcnMgbmVlZCB0byBoYXZlIHRoZSBzYW1lIG51bWJlciBvZiBlbGVtZW50c1wiKSx0O2NvbnN0IHU9dC5sZW5ndGgvbixpPWZbMF0scz1mWzFdLGE9ZlsyXSxkPWZbNF0sYz1mWzVdLGw9Zls2XSxwPWZbOF0seT1mWzldLGg9ZlsxMF0sbT1mWzEyXSxCPWZbMTNdLGc9ZlsxNF07bGV0IFM9MCxNPTA7Zm9yKGxldCBlPTA7ZTx1O2UrKyl7Y29uc3QgZT1yW1NdLGY9cltTKzFdLHU9cltTKzJdO3RbTV09aSplK2QqZitwKnUrbSx0W00rMV09cyplK2MqZit5KnUrQix0W00rMl09YSplK2wqZitoKnUrZyxTKz1vLE0rPW59cmV0dXJuIHR9ZnVuY3Rpb24gZihlLHQscil7bihlLnR5cGVkQnVmZmVyLHQudHlwZWRCdWZmZXIscixlLnR5cGVkQnVmZmVyU3RyaWRlLHQudHlwZWRCdWZmZXJTdHJpZGUpfWZ1bmN0aW9uIG4odCxyLGYsbj0zLG89bil7aWYodC5sZW5ndGgvbiE9PU1hdGguY2VpbChyLmxlbmd0aC9vKSlyZXR1cm4gdm9pZCBlLmVycm9yKFwic291cmNlIGFuZCBkZXN0aW5hdGlvbiBidWZmZXJzIG5lZWQgdG8gaGF2ZSB0aGUgc2FtZSBudW1iZXIgb2YgZWxlbWVudHNcIik7Y29uc3QgdT10Lmxlbmd0aC9uLGk9ZlswXSxzPWZbMV0sYT1mWzJdLGQ9ZlszXSxjPWZbNF0sbD1mWzVdLHA9Zls2XSx5PWZbN10saD1mWzhdO2xldCBtPTAsQj0wO2ZvcihsZXQgZT0wO2U8dTtlKyspe2NvbnN0IGU9clttXSxmPXJbbSsxXSx1PXJbbSsyXTt0W0JdPWkqZStkKmYrcCp1LHRbQisxXT1zKmUrYypmK3kqdSx0W0IrMl09YSplK2wqZitoKnUsbSs9byxCKz1ufX1mdW5jdGlvbiBvKGUsdCxyKXt1KGUudHlwZWRCdWZmZXIsdCxyLGUudHlwZWRCdWZmZXJTdHJpZGUpfWZ1bmN0aW9uIHUoZSx0LHIsZj0zKXtjb25zdCBuPU1hdGgubWluKGUubGVuZ3RoL2YsdC5jb3VudCksbz10LnR5cGVkQnVmZmVyLHU9dC50eXBlZEJ1ZmZlclN0cmlkZTtsZXQgaT0wLHM9MDtmb3IobGV0IGE9MDthPG47YSsrKWVbc109cipvW2ldLGVbcysxXT1yKm9baSsxXSxlW3MrMl09cipvW2krMl0saSs9dSxzKz1mfWZ1bmN0aW9uIGkoZSx0KXtzKGUudHlwZWRCdWZmZXIsdC50eXBlZEJ1ZmZlcixlLnR5cGVkQnVmZmVyU3RyaWRlLHQudHlwZWRCdWZmZXJTdHJpZGUpfWZ1bmN0aW9uIHMoZSx0LHI9MyxmPXIpe2NvbnN0IG49TWF0aC5taW4oZS5sZW5ndGgvcix0Lmxlbmd0aC9mKTtsZXQgbz0wLHU9MDtmb3IobGV0IGk9MDtpPG47aSsrKXtjb25zdCBuPXRbb10saT10W28rMV0scz10W28rMl0sYT1uKm4raSppK3MqcztpZihhPjApe2NvbnN0IHQ9MS9NYXRoLnNxcnQoYSk7ZVt1XT10Km4sZVt1KzFdPXQqaSxlW3UrMl09dCpzfW8rPWYsdSs9cn19ZnVuY3Rpb24gYShlLHQscil7Y29uc3QgZj1NYXRoLm1pbihlLmNvdW50LHQuY291bnQpLG49ZS50eXBlZEJ1ZmZlcixvPWUudHlwZWRCdWZmZXJTdHJpZGUsdT10LnR5cGVkQnVmZmVyLGk9dC50eXBlZEJ1ZmZlclN0cmlkZTtsZXQgcz0wLGE9MDtmb3IobGV0IGQ9MDtkPGY7ZCsrKW5bYV09dVtzXT4+cixuW2ErMV09dVtzKzFdPj5yLG5bYSsyXT11W3MrMl0+PnIscys9aSxhKz1vfWNvbnN0IGQ9T2JqZWN0LmZyZWV6ZShPYmplY3QuZGVmaW5lUHJvcGVydHkoe19fcHJvdG9fXzpudWxsLG5vcm1hbGl6ZTpzLG5vcm1hbGl6ZVZpZXc6aSxzY2FsZTp1LHNjYWxlVmlldzpvLHNoaWZ0UmlnaHQ6YSx0cmFuc2Zvcm1NYXQzOm4sdHJhbnNmb3JtTWF0M1ZpZXc6Zix0cmFuc2Zvcm1NYXQ0OnIsdHJhbnNmb3JtTWF0NFZpZXc6dH0sU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZTpcIk1vZHVsZVwifSkpO2V4cG9ydHtuIGFzIGEsZiBhcyBiLHQgYXMgYyxpIGFzIGQsbyBhcyBlLGEgYXMgZixzIGFzIG4sdSBhcyBzLHIgYXMgdCxkIGFzIHZ9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtfIGFzIGV9ZnJvbVwiLi4vLi4vY2h1bmtzL3RzbGliLmVzNi5qc1wiO2ltcG9ydHtDbG9uYWJsZU1peGluIGFzIHJ9ZnJvbVwiLi4vLi4vY29yZS9DbG9uYWJsZS5qc1wiO2ltcG9ydHtKU09OU3VwcG9ydCBhcyBvfWZyb21cIi4uLy4uL2NvcmUvSlNPTlN1cHBvcnQuanNcIjtpbXBvcnR7cHJvcGVydHkgYXMgdH1mcm9tXCIuLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3Byb3BlcnR5LmpzXCI7aW1wb3J0XCIuLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9lbnN1cmVUeXBlLmpzXCI7aW1wb3J0XCIuLi8uLi9jb3JlL2FycmF5VXRpbHMuanNcIjtpbXBvcnRcIi4uLy4uL2NvcmUvaGFzLmpzXCI7aW1wb3J0e2VudW1lcmF0aW9uIGFzIHN9ZnJvbVwiLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9lbnVtZXJhdGlvbi5qc1wiO2ltcG9ydHtzdWJjbGFzcyBhcyBpfWZyb21cIi4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvc3ViY2xhc3MuanNcIjtpbXBvcnR7YyBhcyBwLGYgYXMgY31mcm9tXCIuLi8uLi9jaHVua3MvdmVjM2Y2NC5qc1wiO2ltcG9ydCBuIGZyb21cIi4uL1BvaW50LmpzXCI7bGV0IGE9Y2xhc3MgZXh0ZW5kcyhyKG8pKXtjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLnR5cGU9XCJnZW9yZWZlcmVuY2VkLXJlbGF0aXZlXCIsdGhpcy5pc1JlbGF0aXZlPSEwLHRoaXMuaXNHZW9yZWZlcmVuY2VkPSEwLHRoaXMub3JpZ2luPXAoKX1nZXRPcmlnaW5Qb2ludChlKXtjb25zdFtyLG8sdF09dGhpcy5vcmlnaW47cmV0dXJuIG5ldyBuKHt4OnIseTpvLHo6dCxzcGF0aWFsUmVmZXJlbmNlOmV9KX1zZXRPcmlnaW5Gcm9tUG9pbnQoe3g6ZSx5OnIsejpvfSl7dGhpcy5vcmlnaW49YyhlLHIsbz8/MCl9fTtlKFtzKHtnZW9yZWZlcmVuY2VkUmVsYXRpdmU6XCJnZW9yZWZlcmVuY2VkLXJlbGF0aXZlXCJ9LHtyZWFkT25seTohMH0pXSxhLnByb3RvdHlwZSxcInR5cGVcIix2b2lkIDApLGUoW3Qoe3R5cGU6W051bWJlcl0sbm9uTnVsbGFibGU6ITAsanNvbjp7d3JpdGU6ITB9fSldLGEucHJvdG90eXBlLFwib3JpZ2luXCIsdm9pZCAwKSxhPWUoW2koXCJlc3JpLmdlb21ldHJ5LnN1cHBvcnQuTWVzaEdlb3JlZmVyZW5jZWRSZWxhdGl2ZVZlcnRleFNwYWNlXCIpXSxhKTtjb25zdCBtPWE7ZXhwb3J0e20gYXMgZGVmYXVsdH07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0IHIgZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9Mb2dnZXIuanNcIjtjb25zdCBlPXIuZ2V0TG9nZ2VyKFwiZXNyaS52aWV3cy4zZC5zdXBwb3J0LmJ1ZmZlci5tYXRoXCIpO2V4cG9ydHtlIGFzIG1hdGhMb2dnZXJ9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydCB0IGZyb21cIi4uLy4uLy4uL3JlcXVlc3QuanNcIjtpbXBvcnR7ZXF1YWxzIGFzIHJ9ZnJvbVwiLi4vLi4vLi4vY29yZS9hcnJheVV0aWxzLmpzXCI7aW1wb3J0e3Rocm93SWZBYm9ydGVkIGFzIGV9ZnJvbVwiLi4vLi4vLi4vY29yZS9wcm9taXNlVXRpbHMuanNcIjtpbXBvcnR7Z2V0RmlsZUZvcm1hdElkIGFzIHMsZ2V0TWltZVR5cGVGb3JtYXRJZCBhcyBuLGdldEZpbGVuYW1lRm9ybWF0SWQgYXMgYX1mcm9tXCIuLi8uLi8uLi9sYXllcnMvc3VwcG9ydC9pbmZvRm9yM0QuanNcIjtjbGFzcyBpe2NvbnN0cnVjdG9yKHQscixlKXt0aGlzLmFzc2V0TmFtZT10LHRoaXMuYXNzZXRNaW1lVHlwZT1yLHRoaXMucGFydHM9ZX1lcXVhbHModCl7cmV0dXJuIHRoaXM9PT10fHx0aGlzLmFzc2V0TmFtZT09PXQuYXNzZXROYW1lJiZ0aGlzLmFzc2V0TWltZVR5cGU9PT10LmFzc2V0TWltZVR5cGUmJnIodGhpcy5wYXJ0cyx0LnBhcnRzLCgodCxyKT0+dC5lcXVhbHMocikpKX1pc09uU2VydmljZSh0KXtyZXR1cm4gdGhpcy5wYXJ0cy5ldmVyeSgocj0+ci5pc09uU2VydmljZSh0KSkpfW1ha2VIYXNoKCl7bGV0IHQ9XCJcIjtmb3IoY29uc3QgciBvZiB0aGlzLnBhcnRzKXQrPXIucGFydEhhc2g7cmV0dXJuIHR9YXN5bmMgdG9CbG9iKHQpe2NvbnN0e3BhcnRzOnJ9PXRoaXM7aWYoMT09PXIubGVuZ3RoKXJldHVybiByWzBdLnRvQmxvYih0KTtjb25zdCBzPWF3YWl0IFByb21pc2UuYWxsKHIubWFwKChyPT5yLnRvQmxvYih0KSkpKTtyZXR1cm4gZSh0KSxuZXcgQmxvYihzKX19Y2xhc3Mgb3tjb25zdHJ1Y3Rvcih0LHIpe3RoaXMucGFydFVybD10LHRoaXMucGFydEhhc2g9cn1lcXVhbHModCl7cmV0dXJuIHRoaXM9PT10fHx0aGlzLnBhcnRVcmw9PT10LnBhcnRVcmwmJnRoaXMucGFydEhhc2g9PT10LnBhcnRIYXNofWlzT25TZXJ2aWNlKHQpe3JldHVybiB0aGlzLnBhcnRVcmwuc3RhcnRzV2l0aChgJHt0LnBhdGh9L2Fzc2V0cy9gKX1hc3luYyB0b0Jsb2Iocil7Y29uc3R7ZGF0YTpzfT1hd2FpdCB0KHRoaXMucGFydFVybCx7cmVzcG9uc2VUeXBlOlwiYmxvYlwifSk7cmV0dXJuIGUociksc319ZnVuY3Rpb24gdSh0KXtyZXR1cm4gcCh0Py5zb3VyY2UpfWZ1bmN0aW9uIGModCl7aWYoIUFycmF5LmlzQXJyYXkodCkpcmV0dXJuITE7cmV0dXJuIHQuZXZlcnkoKHQ9PnQgaW5zdGFuY2VvZiBpKSl9Y29uc3QgZj0vXihtb2RlbFxcL2dsdGZcXCtqc29uKXwobW9kZWxcXC9nbHRmLWJpbmFyeSkkLyxsPS9cXC4oZ2x0ZnxnbGIpL2k7ZnVuY3Rpb24gcCh0KXtpZighdClyZXR1cm4hMTtpZihBcnJheS5pc0FycmF5KHQpKXtyZXR1cm4gdC5zb21lKG0pfXJldHVybiBtKHQpfWZ1bmN0aW9uIG0odCl7aWYodCBpbnN0YW5jZW9mIEZpbGUpe2NvbnN0e3R5cGU6cixuYW1lOmV9PXQ7cmV0dXJuIGYudGVzdChyKXx8bC50ZXN0KGUpfXJldHVybiBmLnRlc3QodC5hc3NldE1pbWVUeXBlKXx8bC50ZXN0KHQuYXNzZXROYW1lKX1mdW5jdGlvbiBoKHQscil7aWYoIXQpcmV0dXJuITE7Y29uc3R7c291cmNlOmV9PXQ7cmV0dXJuIGcoZSxyKX1mdW5jdGlvbiB5KHQscil7aWYodD09PXIpcmV0dXJuITA7Y29uc3R7c291cmNlOmV9PXQse3NvdXJjZTpzfT1yO2lmKGU9PT1zKXJldHVybiEwO2lmKGMoZSkmJmMocykpe2lmKGUubGVuZ3RoIT09cy5sZW5ndGgpcmV0dXJuITE7Y29uc3QgdD0odCxyKT0+dC5hc3NldE5hbWU8ci5hc3NldE5hbWU/LTE6dC5hc3NldE5hbWU+ci5hc3NldE5hbWU/MTowLHI9Wy4uLmVdLnNvcnQodCksbj1bLi4uc10uc29ydCh0KTtmb3IobGV0IGU9MDtlPHIubGVuZ3RoOysrZSlpZighcltlXS5lcXVhbHMobltlXSkpcmV0dXJuITE7cmV0dXJuITB9cmV0dXJuITF9ZnVuY3Rpb24gZyh0LHIpe2lmKEFycmF5LmlzQXJyYXkodCkpe2NvbnN0IGU9dDtyZXR1cm4gZS5sZW5ndGg+MCYmZS5ldmVyeSgodD0+Yih0LHIpKSl9cmV0dXJuIGIodCxyKX1mdW5jdGlvbiBiKHQscil7cmV0dXJuIHQgaW5zdGFuY2VvZiBpJiZ0LmlzT25TZXJ2aWNlKHIpfWZ1bmN0aW9uIE4odCxyKXtyZXR1cm4gdCBpbnN0YW5jZW9mIEZpbGU/cyh0LHIpOm4odC5hc3NldE1pbWVUeXBlLHIpPz9hKHQuYXNzZXROYW1lLHIpfWZ1bmN0aW9uIEEodCl7cmV0dXJuIEFycmF5LmlzQXJyYXkodCk/dDpbdF19ZnVuY3Rpb24gdih0KXtyZXR1cm4hIXQub3JpZ2luYWx9ZXhwb3J0e2kgYXMgU2VydmljZUFzc2V0LG8gYXMgU2VydmljZUFzc2V0UGFydCxOIGFzIGFzc2V0Rm9ybWF0SWQsYiBhcyBhc3NldElzT25TZXJ2aWNlLGggYXMgZXh0ZXJuYWxJc09uU2VydmljZSxBIGFzIGV4dGVybmFsU291cmNlVG9NdWx0aVBhcnQseSBhcyBleHRlcm5hbFNvdXJjZXNBcmVFcXVhbCxtIGFzIGlzRGlzcGxheUFzc2V0LHUgYXMgaXNEaXNwbGF5RXh0ZXJuYWwscCBhcyBpc0Rpc3BsYXlTb3VyY2UsdiBhcyBpc09yaWdpbmFsRXh0ZXJuYWwsZyBhcyBzb3VyY2VJc09uU2VydmljZX07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e2QgYXMgZX1mcm9tXCIuLi8uLi9jaHVua3MvbWF0NC5qc1wiO2ltcG9ydHthIGFzIHR9ZnJvbVwiLi4vLi4vY2h1bmtzL21hdDRmNjQuanNcIjtpbXBvcnQgciBmcm9tXCIuL01lc2hHZW9yZWZlcmVuY2VkUmVsYXRpdmVWZXJ0ZXhTcGFjZS5qc1wiO2ltcG9ydHt0IGFzIG99ZnJvbVwiLi4vLi4vY2h1bmtzL3ZlYzMyLmpzXCI7ZnVuY3Rpb24gbih0KXtjb25zdHt2ZXJ0ZXhTcGFjZTpufT10O2lmKG4uaXNSZWxhdGl2ZSlyZXR1cm4gdC5jbG9uZSgpO2NvbnN0e2FuY2hvcjppfT10LGM9aS5jbG9uZSgpLGE9ZShzLFstYy54LC1jLnksLWMuel0pLG09bmV3IHIoe29yaWdpbjpbYy54LGMueSxjLnpdfSkscD10LmNsb25lV2l0aFZlcnRleFNwYWNlKG0pLHtwb3NpdGlvbjp1fT1wLnZlcnRleEF0dHJpYnV0ZXM7cmV0dXJuIHAudmVydGV4QXR0cmlidXRlcy5wb3NpdGlvbj1vKG5ldyBGbG9hdDY0QXJyYXkodS5sZW5ndGgpLHUsYSkscC52ZXJ0ZXhBdHRyaWJ1dGVzQ2hhbmdlZCgpLHB9Y29uc3Qgcz10KCk7ZXhwb3J0e24gYXMgdG9SZWxhdGl2ZVZlcnRleFNwYWNlfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnQgZSBmcm9tXCIuLi8uLi9HcmFwaGljLmpzXCI7aW1wb3J0IHQgZnJvbVwiLi4vLi4vY29yZS9FcnJvci5qc1wiO2ltcG9ydCBhIGZyb21cIi4uLy4uL2NvcmUvTG9nZ2VyLmpzXCI7aW1wb3J0e2dldE1ldGVyc1BlckNhcnRlc2lhblVuaXRGb3JTUiBhcyByfWZyb21cIi4uLy4uL2NvcmUvdW5pdFV0aWxzLmpzXCI7aW1wb3J0e3BhcnNlRGF0YSBhcyBzfWZyb21cIi4uLy4uL2NvcmUvdXJsVXRpbHMuanNcIjtpbXBvcnR7aW5pdGlhbGl6ZVByb2plY3Rpb24gYXMgbyxwcm9qZWN0IGFzIG59ZnJvbVwiLi4vLi4vZ2VvbWV0cnkvcHJvamVjdGlvbi5qc1wiO2ltcG9ydHtmcm9tSlNPTiBhcyBsfWZyb21cIi4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvanNvblV0aWxzLmpzXCI7aW1wb3J0e2lzRmVhdHVyZUlkZW50aWZpZXJBcnJheVdpdGhHbG9iYWxJZCBhcyBpLGlzRmVhdHVyZUlkZW50aWZpZXJBcnJheVdpdGhPYmplY3RJZCBhcyBkfWZyb21cIi4vZWRpdGluZ1N1cHBvcnQuanNcIjthc3luYyBmdW5jdGlvbiB1KGUsdCxhKXtjb25zdHtnZW9tZXRyeTpzfT10LGw9ey4uLnQuYXR0cmlidXRlc307aWYobnVsbCE9YSYmXCJtZXNoXCI9PT1zPy50eXBlKXtjb25zdHt0cmFuc2Zvcm1GaWVsZFJvbGVzOnR9PWEse29yaWdpbjppLHNwYXRpYWxSZWZlcmVuY2U6ZCx0cmFuc2Zvcm06dX09cyxjPWUuc3BhdGlhbFJlZmVyZW5jZTthd2FpdCBvKGQsYyk7Y29uc3QgcD1uKGksYyk7aWYobFt0Lm9yaWdpblhdPXAueCxsW3Qub3JpZ2luWV09cC55LGxbdC5vcmlnaW5aXT1wLno/PzAsbnVsbCE9dSl7Y29uc3R7dHJhbnNsYXRpb246ZSxzY2FsZTphLHJvdGF0aW9uOm99PXUse3ZlcnRleFNwYWNlOm59PXMsaT1uLmlzR2VvcmVmZXJlbmNlZD8xOnIoZCkvcihjKTtsW3QudHJhbnNsYXRpb25YXT1lWzBdKmksbFt0LnRyYW5zbGF0aW9uWV09ZVsyXSppLGxbdC50cmFuc2xhdGlvblpdPS1lWzFdKmksbFt0LnNjYWxlWF09YVswXSxsW3Quc2NhbGVZXT1hWzJdLGxbdC5zY2FsZVpdPWFbMV0sbFt0LnJvdGF0aW9uWF09b1swXSxsW3Qucm90YXRpb25ZXT1vWzJdLGxbdC5yb3RhdGlvblpdPS1vWzFdLGxbdC5yb3RhdGlvbkRlZ109b1szXX1yZXR1cm57YXR0cmlidXRlczpsfX1yZXR1cm4gbnVsbD09cz97YXR0cmlidXRlczpsfTpcIm1lc2hcIj09PXMudHlwZXx8XCJleHRlbnRcIj09PXMudHlwZT9udWxsOntnZW9tZXRyeTpzLnRvSlNPTigpLGF0dHJpYnV0ZXM6bH19YXN5bmMgZnVuY3Rpb24gYyhlLHQpe2NvbnN0IGE9YXdhaXQgUHJvbWlzZS5hbGwoKHQuYWRkQXR0YWNobWVudHM/P1tdKS5tYXAoKHQ9PnAoZSx0KSkpKSxyPWF3YWl0IFByb21pc2UuYWxsKCh0LnVwZGF0ZUF0dGFjaG1lbnRzPz9bXSkubWFwKCh0PT5wKGUsdCkpKSkscz10LmRlbGV0ZUF0dGFjaG1lbnRzPz9bXTtyZXR1cm4gYS5sZW5ndGh8fHIubGVuZ3RofHxzLmxlbmd0aD97YWRkczphLHVwZGF0ZXM6cixkZWxldGVzOlsuLi5zXX06bnVsbH1hc3luYyBmdW5jdGlvbiBwKGUsdCl7Y29uc3R7ZmVhdHVyZTphLGF0dGFjaG1lbnQ6cn09dCx7Z2xvYmFsSWQ6byxuYW1lOm4sY29udGVudFR5cGU6bCxkYXRhOmksdXBsb2FkSWQ6ZH09cix1PXtnbG9iYWxJZDpvfTtpZihhJiYoXCJhdHRyaWJ1dGVzXCJpbiBhP3UucGFyZW50R2xvYmFsSWQ9YS5hdHRyaWJ1dGVzPy5bZS5nbG9iYWxJZEZpZWxkXTphLmdsb2JhbElkJiYodS5wYXJlbnRHbG9iYWxJZD1hLmdsb2JhbElkKSksZCl1LnVwbG9hZElkPWQ7ZWxzZSBpZihpKXtjb25zdCBlPWF3YWl0IHMoaSk7ZSYmKHUuY29udGVudFR5cGU9ZS5tZWRpYVR5cGUsdS5kYXRhPWUuZGF0YSksaSBpbnN0YW5jZW9mIEZpbGUmJih1Lm5hbWU9aS5uYW1lKX1yZXR1cm4gbiYmKHUubmFtZT1uKSxsJiYodS5jb250ZW50VHlwZT1sKSx1fWZ1bmN0aW9uIG0oZSx0LGEpe2lmKCF0fHwwPT09dC5sZW5ndGgpcmV0dXJuW107aWYoYSYmaSh0KSlyZXR1cm4gdC5tYXAoKGU9PmUuZ2xvYmFsSWQpKTtpZihkKHQpKXJldHVybiB0Lm1hcCgoZT0+ZS5vYmplY3RJZCkpO2NvbnN0IHI9YT9lLmdsb2JhbElkRmllbGQ6ZS5vYmplY3RJZEZpZWxkO3JldHVybiByP3QubWFwKChlPT5lLmdldEF0dHJpYnV0ZShyKSkpOltdfWZ1bmN0aW9uIGYoZSl7Y29uc3QgdD1lPy5hc3NldE1hcHM7aWYodCl7Zm9yKGNvbnN0IGUgb2YgdC5hZGRSZXN1bHRzKWUuc3VjY2Vzc3x8YS5nZXRMb2dnZXIoXCJlc3JpLmxheWVycy5ncmFwaGljcy5zb3VyY2VzLnN1cHBvcnQuc291cmNlVXRpbHNcIikuZXJyb3IoYEZhaWxlZCB0byBtYXAgYXNzZXQgdG8gZmVhdHVyZSB3aXRoIGdsb2JhbElkICR7ZS5nbG9iYWxJZH0uYCk7Zm9yKGNvbnN0IGUgb2YgdC51cGRhdGVSZXN1bHRzKWUuc3VjY2Vzc3x8YS5nZXRMb2dnZXIoXCJlc3JpLmxheWVycy5ncmFwaGljcy5zb3VyY2VzLnN1cHBvcnQuc291cmNlVXRpbHNcIikuZXJyb3IoYEZhaWxlZCB0byBtYXAgYXNzZXQgdG8gZmVhdHVyZSB3aXRoIGdsb2JhbElkICR7ZS5nbG9iYWxJZH0uYCl9Y29uc3Qgcj1lPy5hdHRhY2htZW50cyxzPXthZGRGZWF0dXJlUmVzdWx0czplPy5hZGRSZXN1bHRzPy5tYXAoZyk/P1tdLHVwZGF0ZUZlYXR1cmVSZXN1bHRzOmU/LnVwZGF0ZVJlc3VsdHM/Lm1hcChnKT8/W10sZGVsZXRlRmVhdHVyZVJlc3VsdHM6ZT8uZGVsZXRlUmVzdWx0cz8ubWFwKGcpPz9bXSxhZGRBdHRhY2htZW50UmVzdWx0czpyPy5hZGRSZXN1bHRzP3IuYWRkUmVzdWx0cy5tYXAoZyk6W10sdXBkYXRlQXR0YWNobWVudFJlc3VsdHM6cj8udXBkYXRlUmVzdWx0cz9yLnVwZGF0ZVJlc3VsdHMubWFwKGcpOltdLGRlbGV0ZUF0dGFjaG1lbnRSZXN1bHRzOnI/LmRlbGV0ZVJlc3VsdHM/ci5kZWxldGVSZXN1bHRzLm1hcChnKTpbXX07cmV0dXJuIGU/LmVkaXRNb21lbnQmJihzLmVkaXRNb21lbnQ9ZS5lZGl0TW9tZW50KSxzfWZ1bmN0aW9uIGcoZSl7Y29uc3QgYT0hMD09PWUuc3VjY2Vzcz9udWxsOmUuZXJyb3J8fHtjb2RlOnZvaWQgMCxkZXNjcmlwdGlvbjp2b2lkIDB9O3JldHVybntvYmplY3RJZDplLm9iamVjdElkLGdsb2JhbElkOmUuZ2xvYmFsSWQsZXJyb3I6YT9uZXcgdChcImZlYXR1cmUtbGF5ZXItc291cmNlOmVkaXQtZmFpbHVyZVwiLGEuZGVzY3JpcHRpb24se2NvZGU6YS5jb2RlfSk6bnVsbH19ZnVuY3Rpb24gYih0LGEpe3JldHVybiBuZXcgZSh7YXR0cmlidXRlczp0LmF0dHJpYnV0ZXMsZ2VvbWV0cnk6bCh7Li4udC5nZW9tZXRyeSxzcGF0aWFsUmVmZXJlbmNlOmF9KX0pfWZ1bmN0aW9uIFIoZSx0KXtyZXR1cm57YWRkczplPy5hZGRzPy5tYXAoKGU9PmIoZSx0KSkpfHxbXSx1cGRhdGVzOmU/LnVwZGF0ZXM/Lm1hcCgoZT0+KHtvcmlnaW5hbDpiKGVbMF0sdCksY3VycmVudDpiKGVbMV0sdCl9KSkpfHxbXSxkZWxldGVzOmU/LmRlbGV0ZXM/Lm1hcCgoZT0+YihlLHQpKSl8fFtdLHNwYXRpYWxSZWZlcmVuY2U6dH19ZnVuY3Rpb24gSShlKXtjb25zdCB0PWUuZGV0YWlscy5yYXcsYT0rdC5jb2RlLHI9K3QuZXh0ZW5kZWRDb2RlO3JldHVybiA1MDA9PT1hJiYoLTIxNDcyMTcxNDQ9PT1yfHwtMjE0NzQ2NzI2MT09PXIpfWV4cG9ydHtSIGFzIGNyZWF0ZUVkaXRlZEZlYXR1cmVzLGcgYXMgY3JlYXRlRmVhdHVyZUVkaXRSZXN1bHQsYyBhcyBnZXRBdHRhY2htZW50RWRpdHNKU09OLG0gYXMgZ2V0RmVhdHVyZUlkcyx1IGFzIGdldEZlYXR1cmVKU09OLEkgYXMgaXNQcm90ZWN0ZWRPclByaXZhdGVWZXJzaW9uRXJyb3IsZiBhcyB1bnBhY2tFZGl0UmVzdWx0RGF0YX07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e18gYXMgZX1mcm9tXCIuLi8uLi8uLi9jaHVua3MvdHNsaWIuZXM2LmpzXCI7aW1wb3J0XCIuLi8uLi8uLi9nZW9tZXRyeS5qc1wiO2ltcG9ydHtpZCBhcyB0fWZyb21cIi4uLy4uLy4uL2tlcm5lbC5qc1wiO2ltcG9ydCBzIGZyb21cIi4uLy4uLy4uL3JlcXVlc3QuanNcIjtpbXBvcnQgciBmcm9tXCIuLi8uLi8uLi9UaW1lRXh0ZW50LmpzXCI7aW1wb3J0e2lzU29tZSBhcyBhfWZyb21cIi4uLy4uLy4uL2NvcmUvYXJyYXlVdGlscy5qc1wiO2ltcG9ydCBpIGZyb21cIi4uLy4uLy4uL2NvcmUvRXJyb3IuanNcIjtpbXBvcnQgaGFzIGZyb21cIi4uLy4uLy4uL2NvcmUvaGFzLmpzXCI7aW1wb3J0e0pTT05NYXAgYXMgb31mcm9tXCIuLi8uLi8uLi9jb3JlL2pzb25NYXAuanNcIjtpbXBvcnQgbiBmcm9tXCIuLi8uLi8uLi9jb3JlL0xvYWRhYmxlLmpzXCI7aW1wb3J0IHUgZnJvbVwiLi4vLi4vLi4vY29yZS9Mb2dnZXIuanNcIjtpbXBvcnR7c2V0RGVlcFZhbHVlIGFzIGx9ZnJvbVwiLi4vLi4vLi4vY29yZS9vYmplY3QuanNcIjtpbXBvcnR7ZGVib3VuY2UgYXMgYyxhZnRlciBhcyBkLHRocm93SWZBYm9ydEVycm9yIGFzIHB9ZnJvbVwiLi4vLi4vLi4vY29yZS9wcm9taXNlVXRpbHMuanNcIjtpbXBvcnR7am9pbiBhcyB5fWZyb21cIi4uLy4uLy4uL2NvcmUvdXJsVXRpbHMuanNcIjtpbXBvcnR7Z2VuZXJhdGVCcmFjZWRVVUlEIGFzIGh9ZnJvbVwiLi4vLi4vLi4vY29yZS91dWlkLmpzXCI7aW1wb3J0e3Byb3BlcnR5IGFzIG19ZnJvbVwiLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9wcm9wZXJ0eS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZW5zdXJlVHlwZS5qc1wiO2ltcG9ydHtzdWJjbGFzcyBhcyBmfWZyb21cIi4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvc3ViY2xhc3MuanNcIjtpbXBvcnQgZyBmcm9tXCIuLi8uLi8uLi9nZW9tZXRyeS9FeHRlbnQuanNcIjtpbXBvcnR7dG9SZWxhdGl2ZVZlcnRleFNwYWNlIGFzIFN9ZnJvbVwiLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9tZXNoVmVydGV4U3BhY2VVdGlscy5qc1wiO2ltcG9ydHtpc09yaWdpbmFsRXh0ZXJuYWwgYXMgd31mcm9tXCIuLi8uLi8uLi9nZW9tZXRyeS9zdXBwb3J0L21lc2hVdGlscy9FeHRlcm5hbC5qc1wiO2ltcG9ydHtjcmVhdGVGZWF0dXJlRWRpdFJlc3VsdCBhcyBxLGdldEZlYXR1cmVKU09OIGFzIEUsZ2V0RmVhdHVyZUlkcyBhcyBSLGdldEF0dGFjaG1lbnRFZGl0c0pTT04gYXMgTyxpc1Byb3RlY3RlZE9yUHJpdmF0ZVZlcnNpb25FcnJvciBhcyBiLHVucGFja0VkaXRSZXN1bHREYXRhIGFzIEEsY3JlYXRlRWRpdGVkRmVhdHVyZXMgYXMgRn1mcm9tXCIuLi9hcHBseUVkaXRzVXRpbHMuanNcIjtpbXBvcnR7Y3JlYXRlRHJhd2luZ0luZm8gYXMgX31mcm9tXCIuL3N1cHBvcnQvY2xpZW50U2lkZURlZmF1bHRzLmpzXCI7aW1wb3J0IHggZnJvbVwiLi9zdXBwb3J0L1F1ZXJ5VGFzay5qc1wiO2ltcG9ydHtpc0hvc3RlZEFnb2xTZXJ2aWNlIGFzIGp9ZnJvbVwiLi4vLi4vc3VwcG9ydC9hcmNnaXNMYXllclVybC5qc1wiO2ltcG9ydHtlbnN1cmVMYXllckNyZWRlbnRpYWwgYXMgSX1mcm9tXCIuLi8uLi9zdXBwb3J0L2ZlYXR1cmVMYXllclV0aWxzLmpzXCI7aW1wb3J0e2dldEFzc2V0TWFwVGFibGUgYXMgdn1mcm9tXCIuLi8uLi9zdXBwb3J0L2luZm9Gb3IzRC5qc1wiO2ltcG9ydHtleGVjdXRlUXVlcnlKU09OIGFzIFR9ZnJvbVwiLi4vLi4vLi4vcmVzdC9xdWVyeS9leGVjdXRlUXVlcnlKU09OLmpzXCI7aW1wb3J0e3VuYXBwbHlFZGl0c1pVbml0U2NhbGluZyBhcyBOfWZyb21cIi4uLy4uLy4uL3Jlc3QvcXVlcnkvb3BlcmF0aW9ucy9lZGl0c1pTY2FsZS5qc1wiO2ltcG9ydCBNIGZyb21cIi4uLy4uLy4uL3Jlc3Qvc3VwcG9ydC9RdWVyeS5qc1wiO2ltcG9ydHtpc1NhZmVUb0VkaXRWZXJzaW9uIGFzIFUsaXNWZXJzaW9uSW5FZGl0U2Vzc2lvbiBhcyBKLGN1cnJlbnRTZXNzaW9uSWQgYXMga31mcm9tXCIuLi8uLi8uLi92ZXJzaW9uTWFuYWdlbWVudC9zdXBwb3J0L3ZlcnNpb25NYW5hZ2VtZW50VXRpbHMuanNcIjtpbXBvcnQgQyBmcm9tXCIuLi8uLi8uLi9nZW9tZXRyeS9TcGF0aWFsUmVmZXJlbmNlLmpzXCI7Y29uc3QgTD1uZXcgbyh7b3JpZ2luYWxBbmRDdXJyZW50RmVhdHVyZXM6XCJvcmlnaW5hbC1hbmQtY3VycmVudC1mZWF0dXJlc1wiLG5vbmU6XCJub25lXCJ9KSxRPW5ldyBTZXQoW1wiRmVhdHVyZSBMYXllclwiLFwiT3JpZW50ZWQgSW1hZ2VyeSBMYXllclwiLFwiVGFibGVcIl0pLEQ9bmV3IG8oe1N0YXJ0ZWQ6XCJwdWJsaXNoZWRcIixQdWJsaXNoaW5nOlwicHVibGlzaGluZ1wiLFN0b3BwZWQ6XCJ1bmF2YWlsYWJsZVwifSk7bGV0IFA9Y2xhc3MgZXh0ZW5kcyBue2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLnR5cGU9XCJmZWF0dXJlLWxheWVyXCIsdGhpcy5yZWZyZXNoPWMoKGFzeW5jKCk9Pnthd2FpdCB0aGlzLmxvYWQoKTtjb25zdCBlPXRoaXMuc291cmNlSlNPTi5lZGl0aW5nSW5mbz8ubGFzdEVkaXREYXRlO2lmKG51bGw9PWUpcmV0dXJue2RhdGFDaGFuZ2VkOiEwLHVwZGF0ZXM6e319O3RyeXthd2FpdCB0aGlzLl9mZXRjaFNlcnZpY2UobnVsbCl9Y2F0Y2h7cmV0dXJue2RhdGFDaGFuZ2VkOiEwLHVwZGF0ZXM6e319fWNvbnN0IHQ9ZSE9PXRoaXMuc291cmNlSlNPTi5lZGl0aW5nSW5mbz8ubGFzdEVkaXREYXRlO3JldHVybntkYXRhQ2hhbmdlZDp0LHVwZGF0ZXM6dD97ZWRpdGluZ0luZm86dGhpcy5zb3VyY2VKU09OLmVkaXRpbmdJbmZvLGV4dGVudDp0aGlzLnNvdXJjZUpTT04uZXh0ZW50fTpudWxsfX0pKSx0aGlzLl9vbmdvaW5nQXNzZXRVcGxvYWRzPW5ldyBNYXB9bG9hZChlKXtjb25zdCB0PXRoaXMubGF5ZXIuc291cmNlSlNPTixzPXRoaXMuX2ZldGNoU2VydmljZSh0LHsuLi5lfSkudGhlbigoKCk9PnRoaXMubGF5ZXIuc2V0VXNlclByaXZpbGVnZXModGhpcy5zb3VyY2VKU09OLnNlcnZpY2VJdGVtSWQsZSkpKS50aGVuKCgoKT0+dGhpcy5fZW5zdXJlTGF0ZXN0TWV0YWRhdGEoZSkpKTtyZXR1cm4gdGhpcy5hZGRSZXNvbHZpbmdQcm9taXNlKHMpLFByb21pc2UucmVzb2x2ZSh0aGlzKX1nZXQgcXVlcnlUYXNrKCl7Y29uc3R7Y2FwYWJpbGl0aWVzOmUscGFyc2VkVXJsOnQsZHluYW1pY0RhdGFTb3VyY2U6cyxpbmZvRm9yM0Q6cixnZGJWZXJzaW9uOmEsc3BhdGlhbFJlZmVyZW5jZTppLGZpZWxkc0luZGV4Om99PXRoaXMubGF5ZXIsbj1oYXMoXCJmZWF0dXJlbGF5ZXItcGJmXCIpJiZlPy5xdWVyeS5zdXBwb3J0c0Zvcm1hdFBCRiYmbnVsbD09cix1PWU/Lm9wZXJhdGlvbnM/LnN1cHBvcnRzUXVlcnlBdHRhY2htZW50cz8/ITE7cmV0dXJuIG5ldyB4KHt1cmw6dC5wYXRoLHBiZlN1cHBvcnRlZDpuLGZpZWxkc0luZGV4Om8saW5mb0ZvcjNEOnIsZHluYW1pY0RhdGFTb3VyY2U6cyxnZGJWZXJzaW9uOmEsc291cmNlU3BhdGlhbFJlZmVyZW5jZTppLHF1ZXJ5QXR0YWNobWVudHNTdXBwb3J0ZWQ6dX0pfWFzeW5jIGFkZEF0dGFjaG1lbnQoZSx0KXthd2FpdCB0aGlzLmxvYWQoKTtjb25zdHtsYXllcjpyfT10aGlzO2F3YWl0IEkocixcImVkaXRpbmdcIik7Y29uc3QgYT1lLmF0dHJpYnV0ZXNbci5vYmplY3RJZEZpZWxkXSxpPXIucGFyc2VkVXJsLnBhdGgrXCIvXCIrYStcIi9hZGRBdHRhY2htZW50XCIsbz10aGlzLl9nZXRMYXllclJlcXVlc3RPcHRpb25zKCksbj10aGlzLl9nZXRGb3JtRGF0YUZvckF0dGFjaG1lbnQodCxvLnF1ZXJ5KTt0cnl7Y29uc3QgZT1hd2FpdCBzKGkse2JvZHk6bn0pO3JldHVybiBxKGUuZGF0YS5hZGRBdHRhY2htZW50UmVzdWx0KX1jYXRjaCh1KXt0aHJvdyB0aGlzLl9jcmVhdGVBdHRhY2htZW50RXJyb3JSZXN1bHQoYSx1KX19YXN5bmMgdXBkYXRlQXR0YWNobWVudChlLHQscil7YXdhaXQgdGhpcy5sb2FkKCk7Y29uc3R7bGF5ZXI6YX09dGhpczthd2FpdCBJKGEsXCJlZGl0aW5nXCIpO2NvbnN0IGk9ZS5hdHRyaWJ1dGVzW2Eub2JqZWN0SWRGaWVsZF0sbz1hLnBhcnNlZFVybC5wYXRoK1wiL1wiK2krXCIvdXBkYXRlQXR0YWNobWVudFwiLG49dGhpcy5fZ2V0TGF5ZXJSZXF1ZXN0T3B0aW9ucyh7cXVlcnk6e2F0dGFjaG1lbnRJZDp0fX0pLHU9dGhpcy5fZ2V0Rm9ybURhdGFGb3JBdHRhY2htZW50KHIsbi5xdWVyeSk7dHJ5e2NvbnN0IGU9YXdhaXQgcyhvLHtib2R5OnV9KTtyZXR1cm4gcShlLmRhdGEudXBkYXRlQXR0YWNobWVudFJlc3VsdCl9Y2F0Y2gobCl7dGhyb3cgdGhpcy5fY3JlYXRlQXR0YWNobWVudEVycm9yUmVzdWx0KGksbCl9fWFzeW5jIGFwcGx5RWRpdHMoZSxyKXthd2FpdCB0aGlzLmxvYWQoKTtjb25zdHtsYXllcjppfT10aGlzO2F3YWl0IEkoaSxcImVkaXRpbmdcIik7Y29uc3Qgbz1pLmluZm9Gb3IzRCxuPW51bGwhPW8sdT1ufHwocj8uZ2xvYmFsSWRVc2VkPz8hMSksbD1uP2F3YWl0IHRoaXMuX3VwbG9hZE1lc2hlc0FuZEdldEFzc2V0TWFwRWRpdHNKU09OKGUpOm51bGwsYz1lLmFkZEZlYXR1cmVzPy5tYXAoKGU9PkUodGhpcy5sYXllcixlLG8pKSk/P1tdLGQ9KGF3YWl0IFByb21pc2UuYWxsKGMpKS5maWx0ZXIoYSkscD1lLnVwZGF0ZUZlYXR1cmVzPy5tYXAoKGU9PkUodGhpcy5sYXllcixlLG8pKSk/P1tdLHk9KGF3YWl0IFByb21pc2UuYWxsKHApKS5maWx0ZXIoYSksaD1SKHRoaXMubGF5ZXIsZS5kZWxldGVGZWF0dXJlcyx1KTtOKGQseSxpLnNwYXRpYWxSZWZlcmVuY2UpO2NvbnN0IG09YXdhaXQgTyh0aGlzLmxheWVyLGUpLGY9aS5jYXBhYmlsaXRpZXMuZWRpdGluZy5zdXBwb3J0c0FzeW5jQXBwbHlFZGl0cyYmbixnPXI/LmdkYlZlcnNpb258fGkuZ2RiVmVyc2lvbixTPXtnZGJWZXJzaW9uOmcscm9sbGJhY2tPbkZhaWx1cmU6cj8ucm9sbGJhY2tPbkZhaWx1cmVFbmFibGVkLHVzZUdsb2JhbElkczp1LHJldHVybkVkaXRNb21lbnQ6cj8ucmV0dXJuRWRpdE1vbWVudCx1c2VQcmV2aW91c0VkaXRNb21lbnQ6cj8udXNlUHJldmlvdXNFZGl0TW9tZW50LGFzeW5jOmZ9O2F3YWl0IFUodGhpcy5sYXllci51cmwsZywhMCk7Y29uc3Qgdz1KKHRoaXMubGF5ZXIudXJsLGd8fG51bGwpO3I/LnJldHVyblNlcnZpY2VFZGl0c09wdGlvbj8oUy5lZGl0cz1KU09OLnN0cmluZ2lmeShbe2lkOmkubGF5ZXJJZCxhZGRzOmQsdXBkYXRlczp5LGRlbGV0ZXM6aCxhdHRhY2htZW50czptLGFzc2V0TWFwczpsfV0pLFMucmV0dXJuU2VydmljZUVkaXRzT3B0aW9uPUwudG9KU09OKHI/LnJldHVyblNlcnZpY2VFZGl0c09wdGlvbiksUy5yZXR1cm5TZXJ2aWNlRWRpdHNJblNvdXJjZVNSPXI/LnJldHVyblNlcnZpY2VFZGl0c0luU291cmNlU1IpOihTLmFkZHM9ZC5sZW5ndGg/SlNPTi5zdHJpbmdpZnkoZCk6bnVsbCxTLnVwZGF0ZXM9eS5sZW5ndGg/SlNPTi5zdHJpbmdpZnkoeSk6bnVsbCxTLmRlbGV0ZXM9aC5sZW5ndGg/dT9KU09OLnN0cmluZ2lmeShoKTpoLmpvaW4oXCIsXCIpOm51bGwsUy5hdHRhY2htZW50cz1tJiZKU09OLnN0cmluZ2lmeShtKSxTLmFzc2V0TWFwcz1udWxsIT1sP0pTT04uc3RyaW5naWZ5KGwpOnZvaWQgMCk7Y29uc3QgcT10aGlzLl9nZXRMYXllclJlcXVlc3RPcHRpb25zKHttZXRob2Q6XCJwb3N0XCIscXVlcnk6U30pO3cmJihxLmF1dGhNb2RlPVwiaW1tZWRpYXRlXCIscS5xdWVyeS5yZXR1cm5FZGl0TW9tZW50PSEwLHEucXVlcnkuc2Vzc2lvbklkPWspO2NvbnN0IEE9cj8ucmV0dXJuU2VydmljZUVkaXRzT3B0aW9uP2kudXJsOmkucGFyc2VkVXJsLnBhdGg7bGV0IEY7dHJ5e0Y9Zj9hd2FpdCB0aGlzLl9hc3luY0FwcGx5RWRpdHMoQStcIi9hcHBseUVkaXRzXCIscSk6YXdhaXQgcyhBK1wiL2FwcGx5RWRpdHNcIixxKX1jYXRjaChfKXtpZighYihfKSl0aHJvdyBfO3EuYXV0aE1vZGU9XCJpbW1lZGlhdGVcIixGPWY/YXdhaXQgdGhpcy5fYXN5bmNBcHBseUVkaXRzKEErXCIvYXBwbHlFZGl0c1wiLHEpOmF3YWl0IHMoQStcIi9hcHBseUVkaXRzXCIscSl9aWYoIWkuY2FwYWJpbGl0aWVzLm9wZXJhdGlvbnM/LnN1cHBvcnRzRWRpdGluZyYmaS5lZmZlY3RpdmVDYXBhYmlsaXRpZXM/Lm9wZXJhdGlvbnM/LnN1cHBvcnRzRWRpdGluZyl7Y29uc3QgZT10Py5maW5kQ3JlZGVudGlhbChpLnVybCk7YXdhaXQoZT8ucmVmcmVzaFRva2VuKCkpfXJldHVybiB0aGlzLl9jcmVhdGVFZGl0c1Jlc3VsdChGKX1hc3luYyBkZWxldGVBdHRhY2htZW50cyhlLHQpe2F3YWl0IHRoaXMubG9hZCgpO2NvbnN0e2xheWVyOnJ9PXRoaXM7YXdhaXQgSShyLFwiZWRpdGluZ1wiKTtjb25zdCBhPWUuYXR0cmlidXRlc1tyLm9iamVjdElkRmllbGRdLGk9ci5wYXJzZWRVcmwucGF0aCtcIi9cIithK1wiL2RlbGV0ZUF0dGFjaG1lbnRzXCI7dHJ5e3JldHVybihhd2FpdCBzKGksdGhpcy5fZ2V0TGF5ZXJSZXF1ZXN0T3B0aW9ucyh7cXVlcnk6e2F0dGFjaG1lbnRJZHM6dC5qb2luKFwiLFwiKX0sbWV0aG9kOlwicG9zdFwifSkpKS5kYXRhLmRlbGV0ZUF0dGFjaG1lbnRSZXN1bHRzLm1hcChxKX1jYXRjaChvKXt0aHJvdyB0aGlzLl9jcmVhdGVBdHRhY2htZW50RXJyb3JSZXN1bHQoYSxvKX19ZmV0Y2hSZWNvbXB1dGVkRXh0ZW50cyhlPXt9KXtjb25zdCB0PWUuc2lnbmFsO3JldHVybiB0aGlzLmxvYWQoe3NpZ25hbDp0fSkudGhlbigoYXN5bmMoKT0+e2NvbnN0IHQ9dGhpcy5fZ2V0TGF5ZXJSZXF1ZXN0T3B0aW9ucyh7Li4uZSxxdWVyeTp7cmV0dXJuVXBkYXRlczohMH19KSx7bGF5ZXJJZDphLHVybDppfT10aGlzLmxheWVyLHtkYXRhOm99PWF3YWl0IHMoYCR7aX0vJHthfWAsdCkse2lkOm4sZXh0ZW50OnUsZnVsbEV4dGVudDpsLHRpbWVFeHRlbnQ6Y309byxkPXV8fGw7cmV0dXJue2lkOm4sZnVsbEV4dGVudDpkJiZnLmZyb21KU09OKGQpLHRpbWVFeHRlbnQ6YyYmci5mcm9tSlNPTih7c3RhcnQ6Y1swXSxlbmQ6Y1sxXX0pfX0pKX1hc3luYyBxdWVyeUF0dGFjaG1lbnRzKGUsdD17fSl7YXdhaXQgdGhpcy5sb2FkKCk7Y29uc3Qgcz10aGlzLl9nZXRMYXllclJlcXVlc3RPcHRpb25zKHQpO3JldHVybiB0aGlzLnF1ZXJ5VGFzay5leGVjdXRlQXR0YWNobWVudFF1ZXJ5KGUscyl9YXN5bmMgcXVlcnlGZWF0dXJlcyhlLHQpe2F3YWl0IHRoaXMubG9hZCgpO2NvbnN0IHM9YXdhaXQgdGhpcy5xdWVyeVRhc2suZXhlY3V0ZShlLHsuLi50LHF1ZXJ5OnRoaXMuX2NyZWF0ZVJlcXVlc3RRdWVyeU9wdGlvbnModCl9KTtyZXR1cm4gZS5vdXRTdGF0aXN0aWNzPy5sZW5ndGgmJnMuZmVhdHVyZXMubGVuZ3RoJiZzLmZlYXR1cmVzLmZvckVhY2goKHQ9Pntjb25zdCBzPXQuYXR0cmlidXRlcztlLm91dFN0YXRpc3RpY3M/LmZvckVhY2goKCh7b3V0U3RhdGlzdGljRmllbGROYW1lOmV9KT0+e2lmKGUpe2NvbnN0IHQ9ZS50b0xvd2VyQ2FzZSgpO3QmJnQgaW4gcyYmZSE9PXQmJihzW2VdPXNbdF0sZGVsZXRlIHNbdF0pfX0pKX0pKSxzfWFzeW5jIHF1ZXJ5RmVhdHVyZXNKU09OKGUsdCl7cmV0dXJuIGF3YWl0IHRoaXMubG9hZCgpLHRoaXMucXVlcnlUYXNrLmV4ZWN1dGVKU09OKGUsey4uLnQscXVlcnk6dGhpcy5fY3JlYXRlUmVxdWVzdFF1ZXJ5T3B0aW9ucyh0KX0pfWFzeW5jIHF1ZXJ5T2JqZWN0SWRzKGUsdCl7cmV0dXJuIGF3YWl0IHRoaXMubG9hZCgpLHRoaXMucXVlcnlUYXNrLmV4ZWN1dGVGb3JJZHMoZSx7Li4udCxxdWVyeTp0aGlzLl9jcmVhdGVSZXF1ZXN0UXVlcnlPcHRpb25zKHQpfSl9YXN5bmMgcXVlcnlGZWF0dXJlQ291bnQoZSx0KXtyZXR1cm4gYXdhaXQgdGhpcy5sb2FkKCksdGhpcy5xdWVyeVRhc2suZXhlY3V0ZUZvckNvdW50KGUsey4uLnQscXVlcnk6dGhpcy5fY3JlYXRlUmVxdWVzdFF1ZXJ5T3B0aW9ucyh0KX0pfWFzeW5jIHF1ZXJ5RXh0ZW50KGUsdCl7cmV0dXJuIGF3YWl0IHRoaXMubG9hZCgpLHRoaXMucXVlcnlUYXNrLmV4ZWN1dGVGb3JFeHRlbnQoZSx7Li4udCxxdWVyeTp0aGlzLl9jcmVhdGVSZXF1ZXN0UXVlcnlPcHRpb25zKHQpfSl9YXN5bmMgcXVlcnlSZWxhdGVkRmVhdHVyZXMoZSx0KXtyZXR1cm4gYXdhaXQgdGhpcy5sb2FkKCksdGhpcy5xdWVyeVRhc2suZXhlY3V0ZVJlbGF0aW9uc2hpcFF1ZXJ5KGUsey4uLnQscXVlcnk6dGhpcy5fY3JlYXRlUmVxdWVzdFF1ZXJ5T3B0aW9ucyh0KX0pfWFzeW5jIHF1ZXJ5UmVsYXRlZEZlYXR1cmVzQ291bnQoZSx0KXtyZXR1cm4gYXdhaXQgdGhpcy5sb2FkKCksdGhpcy5xdWVyeVRhc2suZXhlY3V0ZVJlbGF0aW9uc2hpcFF1ZXJ5Rm9yQ291bnQoZSx7Li4udCxxdWVyeTp0aGlzLl9jcmVhdGVSZXF1ZXN0UXVlcnlPcHRpb25zKHQpfSl9YXN5bmMgcXVlcnlUb3BGZWF0dXJlcyhlLHQpe3JldHVybiBhd2FpdCB0aGlzLmxvYWQoKSx0aGlzLnF1ZXJ5VGFzay5leGVjdXRlVG9wRmVhdHVyZXNRdWVyeShlLHsuLi50LHF1ZXJ5OnRoaXMuX2NyZWF0ZVJlcXVlc3RRdWVyeU9wdGlvbnModCl9KX1hc3luYyBxdWVyeVRvcE9iamVjdElkcyhlLHQpe3JldHVybiBhd2FpdCB0aGlzLmxvYWQoKSx0aGlzLnF1ZXJ5VGFzay5leGVjdXRlRm9yVG9wSWRzKGUsey4uLnQscXVlcnk6dGhpcy5fY3JlYXRlUmVxdWVzdFF1ZXJ5T3B0aW9ucyh0KX0pfWFzeW5jIHF1ZXJ5VG9wRXh0ZW50cyhlLHQpe3JldHVybiBhd2FpdCB0aGlzLmxvYWQoKSx0aGlzLnF1ZXJ5VGFzay5leGVjdXRlRm9yVG9wRXh0ZW50cyhlLHsuLi50LHF1ZXJ5OnRoaXMuX2NyZWF0ZVJlcXVlc3RRdWVyeU9wdGlvbnModCl9KX1hc3luYyBxdWVyeVRvcENvdW50KGUsdCl7cmV0dXJuIGF3YWl0IHRoaXMubG9hZCgpLHRoaXMucXVlcnlUYXNrLmV4ZWN1dGVGb3JUb3BDb3VudChlLHsuLi50LHF1ZXJ5OnRoaXMuX2NyZWF0ZVJlcXVlc3RRdWVyeU9wdGlvbnModCl9KX1hc3luYyBmZXRjaFB1Ymxpc2hpbmdTdGF0dXMoKXtpZighaih0aGlzLmxheWVyLnVybCkpcmV0dXJuXCJ1bmF2YWlsYWJsZVwiO2NvbnN0IGU9eSh0aGlzLmxheWVyLnVybCxcInN0YXR1c1wiKSx0PWF3YWl0IHMoZSx7cXVlcnk6e2Y6XCJqc29uXCJ9fSk7cmV0dXJuIEQuZnJvbUpTT04odC5kYXRhLnN0YXR1cyl9YXN5bmMgdXBsb2FkQXNzZXRzKGUsdCl7Y29uc3R7dXBsb2FkQXNzZXRzOnN9PWF3YWl0IGltcG9ydChcIi4vc3VwcG9ydC91cGxvYWRBc3NldHMuanNcIik7cmV0dXJuIHMoZSx7bGF5ZXI6dGhpcy5sYXllcixvbmdvaW5nVXBsb2Fkczp0aGlzLl9vbmdvaW5nQXNzZXRVcGxvYWRzfSx0KX1hc3luYyBfYXN5bmNBcHBseUVkaXRzKGUsdCl7Y29uc3Qgcj0oYXdhaXQgcyhlLHQpKS5kYXRhLnN0YXR1c1VybDtmb3IoOzspe2NvbnN0IGU9KGF3YWl0IHMocix7cXVlcnk6e2Y6XCJqc29uXCJ9LHJlc3BvbnNlVHlwZTpcImpzb25cIn0pKS5kYXRhO3N3aXRjaChlLnN0YXR1cyl7Y2FzZVwiQ29tcGxldGVkXCI6cmV0dXJuIHMoZS5yZXN1bHRVcmwse3F1ZXJ5OntmOlwianNvblwifSxyZXNwb25zZVR5cGU6XCJqc29uXCJ9KTtjYXNlXCJDb21wbGV0ZWRXaXRoRXJyb3JzXCI6dGhyb3cgbmV3IGkoXCJhc3luYy1hcHBseUVkaXRzLWZhaWxlZFwiLFwiYXN5bmNocm9ub3VzIGFwcGx5RWRpdHMgY2FsbCBmYWlsZWQuXCIpO2Nhc2VcIkZhaWxlZCBJbXBvcnRDaGFuZ2VzXCI6Y2FzZVwiSW5Qcm9ncmVzc1wiOmNhc2VcIlBlbmRpbmdcIjpjYXNlXCJFeHBvcnRBdHRhY2htZW50c1wiOmNhc2VcIkV4cG9ydENoYW5nZXNcIjpjYXNlXCJFeHBvcnRpbmdEYXRhXCI6Y2FzZVwiRXhwb3J0aW5nU25hcHNob3RcIjpjYXNlXCJJbXBvcnRBdHRhY2htZW50c1wiOmNhc2VcIlByb3Zpc2lvbmluZ1JlcGxpY2FcIjpjYXNlXCJVblJlZ2lzdGVyaW5nUmVwbGljYVwiOmJyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IGkoXCJhc3luYy1hcHBseUVkaXRzLWZhaWxlZFwiLFwiYXN5bmNocm9ub3VzIGFwcGx5RWRpdHMgY2FsbCBmYWlsZWQgKHVuZGVmaW5lZCByZXNwb25zZSBzdGF0dXMpXCIpfWF3YWl0IGQoVil9fV9jcmVhdGVSZXF1ZXN0UXVlcnlPcHRpb25zKGUpe2NvbnN0IHQ9ey4uLnRoaXMubGF5ZXIuY3VzdG9tUGFyYW1ldGVycyx0b2tlbjp0aGlzLmxheWVyLmFwaUtleSwuLi5lPy5xdWVyeX07cmV0dXJuIHRoaXMubGF5ZXIuZGF0ZXNJblVua25vd25UaW1lem9uZSYmKHQudGltZVJlZmVyZW5jZVVua25vd25DbGllbnQ9ITApLHR9YXN5bmMgX2ZldGNoU2VydmljZShlLHQpe2lmKCFlKXtjb25zdCByPXt9O2hhcyhcImZlYXR1cmVsYXllci1hZHZhbmNlZC1zeW1ib2xzXCIpJiYoci5yZXR1cm5BZHZhbmNlZFN5bWJvbHM9ITApLHQ/LmNhY2hlQnVzdCYmKHIuX3RzPURhdGUubm93KCkpO2NvbnN0e2RhdGE6YX09YXdhaXQgcyh0aGlzLmxheWVyLnBhcnNlZFVybC5wYXRoLHRoaXMuX2dldExheWVyUmVxdWVzdE9wdGlvbnMoe3F1ZXJ5OnIsc2lnbmFsOnQ/LnNpZ25hbH0pKTtlPWF9dGhpcy5zb3VyY2VKU09OPWF3YWl0IHRoaXMuX3BhdGNoU2VydmljZUpTT04oZSx0Py5zaWduYWwpO2NvbnN0IHI9ZS50eXBlO2lmKCFRLmhhcyhyKSl0aHJvdyBuZXcgaShcImZlYXR1cmUtbGF5ZXItc291cmNlOnVuc3VwcG9ydGVkLXR5cGVcIixgU291cmNlIHR5cGUgXCIke3J9XCIgaXMgbm90IHN1cHBvcnRlZGApfWFzeW5jIF9wYXRjaFNlcnZpY2VKU09OKGUsdCl7aWYoXCJUYWJsZVwiIT09ZS50eXBlJiZlLmdlb21ldHJ5VHlwZSYmIWU/LmRyYXdpbmdJbmZvPy5yZW5kZXJlciYmIWUuZGVmYXVsdFN5bWJvbCl7Y29uc3QgdD1fKGUuZ2VvbWV0cnlUeXBlKS5yZW5kZXJlcjtsKFwiZHJhd2luZ0luZm8ucmVuZGVyZXJcIix0LGUpfWlmKFwiZXNyaUdlb21ldHJ5TXVsdGlQYXRjaFwiPT09ZS5nZW9tZXRyeVR5cGUmJmUuaW5mb0ZvcjNEJiYoZS5nZW9tZXRyeVR5cGU9XCJtZXNoXCIpLG51bGw9PWUuZXh0ZW50KXRyeXtjb25zdHtkYXRhOnJ9PWF3YWl0IHModGhpcy5sYXllci51cmwsdGhpcy5fZ2V0TGF5ZXJSZXF1ZXN0T3B0aW9ucyh7c2lnbmFsOnR9KSk7ci5zcGF0aWFsUmVmZXJlbmNlJiYoZS5leHRlbnQ9e3htaW46MCx5bWluOjAseG1heDowLHltYXg6MCxzcGF0aWFsUmVmZXJlbmNlOnIuc3BhdGlhbFJlZmVyZW5jZX0pfWNhdGNoKHIpe3Aocil9cmV0dXJuIGV9YXN5bmMgX2Vuc3VyZUxhdGVzdE1ldGFkYXRhKGUpe2lmKHRoaXMubGF5ZXIudXNlckhhc1VwZGF0ZUl0ZW1Qcml2aWxlZ2VzJiZ0aGlzLnNvdXJjZUpTT04uY2FjaGVNYXhBZ2U+MClyZXR1cm4gdGhpcy5fZmV0Y2hTZXJ2aWNlKG51bGwsey4uLmUsY2FjaGVCdXN0OiEwfSl9YXN5bmMgX3VwbG9hZE1lc2hlc0FuZEdldEFzc2V0TWFwRWRpdHNKU09OKGUpe2NvbnN0e2FkZEFzc2V0RmVhdHVyZXM6dH09ZTtpZighdD8ubGVuZ3RoKXJldHVybiBudWxsO2NvbnN0IHM9YXdhaXQgdGhpcy5fZmlsdGVyUmVkdW5kYW50QXNzZXRNYXBzKHQpO2lmKCF0Py5sZW5ndGgpcmV0dXJuIG51bGw7Y29uc3Qgcj1uZXcgQXJyYXksYT1uZXcgTWFwO2Zvcihjb25zdCBpIG9mIHMpe2NvbnN0e2dlb21ldHJ5OmV9PWkse3ZlcnRleFNwYWNlOnR9PWU7aWYodC5pc1JlbGF0aXZlKXIucHVzaChlKTtlbHNle2NvbnN0IHQ9UyhlKTthLnNldCh0LGUpLGkuZ2VvbWV0cnk9dCxyLnB1c2godCl9fWF3YWl0IHRoaXMudXBsb2FkQXNzZXRzKHIpO2Zvcihjb25zdFtpLG9db2YgYSlvLmFkZEV4dGVybmFsU291cmNlcyhpLm1ldGFkYXRhLmV4dGVybmFsU291cmNlcy5pdGVtcyk7cmV0dXJue2FkZHM6dGhpcy5fZ2V0QXNzZXRNYXBFZGl0c0pTT04ocyksdXBkYXRlczpbXSxkZWxldGVzOltdfX1fZ2V0QXNzZXRNYXBFZGl0c0pTT04oZSl7Y29uc3QgdD1uZXcgQXJyYXkscz10aGlzLmxheWVyLmdsb2JhbElkRmllbGQscj10aGlzLmxheWVyLnBhcnNlZFVybDtmb3IoY29uc3QgYSBvZiBlKXtjb25zdCBlPWEuZ2VvbWV0cnkse21ldGFkYXRhOml9PWUsbz1pLmdldEV4dGVybmFsU291cmNlc09uU2VydmljZShyKSxuPWEuZ2V0QXR0cmlidXRlKHMpO2lmKDA9PT1vLmxlbmd0aCl7dS5nZXRMb2dnZXIodGhpcykuZXJyb3IoYFNraXBwaW5nIGZlYXR1cmUgJHtufS4gVGhlIG1lc2ggaXQgaXMgYXNzb2NpYXRlZCB3aXRoIGhhcyBub3QgYmVlbiB1cGxvYWRlZCB0byB0aGUgc2VydmljZSBhbmQgY2Fubm90IGJlIG1hcHBlZCB0byBpdC5gKTtjb250aW51ZX1jb25zdHtzb3VyY2U6bH09by5maW5kKHcpPz9vWzBdLHt2ZXJ0ZXhTcGFjZTpjfT1lLGQ9Yy5pc0dlb3JlZmVyZW5jZWQ/W1wiUFJPSkVDVF9WRVJUSUNFU1wiXTpbXTtmb3IoY29uc3QgcyBvZiBsKTE9PT1zLnBhcnRzLmxlbmd0aD90LnB1c2goe2dsb2JhbElkOmgoKSxwYXJlbnRHbG9iYWxJZDpuLGFzc2V0TmFtZTpzLmFzc2V0TmFtZSxhc3NldEhhc2g6cy5wYXJ0c1swXS5wYXJ0SGFzaCxmbGFnczpkfSk6dS5nZXRMb2dnZXIodGhpcykuZXJyb3IoYFNraXBwaW5nIGFzc2V0ICR7cy5hc3NldE5hbWV9LiBJdCBkb2VzIG5vdCBoYXZlIGV4YWN0bHkgb25lIHBhcnQsIHNvIHdlIGNhbm5vdCBtYXAgaXQgdG8gYSBmZWF0dXJlLmApfXJldHVybiB0fV9jcmVhdGVFZGl0c1Jlc3VsdChlKXtjb25zdCB0PWUuZGF0YSx7bGF5ZXJJZDpzfT10aGlzLmxheWVyLHI9W107bGV0IGE9bnVsbDtpZihBcnJheS5pc0FycmF5KHQpKWZvcihjb25zdCBvIG9mIHQpci5wdXNoKHtpZDpvLmlkLGVkaXRlZEZlYXR1cmVzOm8uZWRpdGVkRmVhdHVyZXN9KSxvLmlkPT09cyYmKGE9e2FkZFJlc3VsdHM6by5hZGRSZXN1bHRzPz9bXSx1cGRhdGVSZXN1bHRzOm8udXBkYXRlUmVzdWx0cz8/W10sZGVsZXRlUmVzdWx0czpvLmRlbGV0ZVJlc3VsdHM/P1tdLGF0dGFjaG1lbnRzOm8uYXR0YWNobWVudHMsZWRpdE1vbWVudDpvLmVkaXRNb21lbnR9KTtlbHNlIGE9dDtjb25zdCBpPUEoYSk7aWYoci5sZW5ndGg+MCl7aS5lZGl0ZWRGZWF0dXJlUmVzdWx0cz1bXTtmb3IoY29uc3QgZSBvZiByKXtjb25zdHtlZGl0ZWRGZWF0dXJlczp0fT1lLHM9dD8uc3BhdGlhbFJlZmVyZW5jZT9uZXcgQyh0LnNwYXRpYWxSZWZlcmVuY2UpOm51bGw7aS5lZGl0ZWRGZWF0dXJlUmVzdWx0cy5wdXNoKHtsYXllcklkOmUuaWQsZWRpdGVkRmVhdHVyZXM6Rih0LHMpfSl9fXJldHVybiBpfV9jcmVhdGVBdHRhY2htZW50RXJyb3JSZXN1bHQoZSx0KXtjb25zdCBzPXQuZGV0YWlscy5tZXNzYWdlcz8uWzBdfHx0Lm1lc3NhZ2Uscj10LmRldGFpbHMuaHR0cFN0YXR1c3x8dC5kZXRhaWxzLm1lc3NhZ2VDb2RlO3JldHVybntvYmplY3RJZDplLGdsb2JhbElkOm51bGwsZXJyb3I6bmV3IGkoXCJmZWF0dXJlLWxheWVyLXNvdXJjZTphdHRhY2htZW50LWZhaWx1cmVcIixzLHtjb2RlOnJ9KX19X2dldEZvcm1EYXRhRm9yQXR0YWNobWVudChlLHQpe2NvbnN0IHM9ZSBpbnN0YW5jZW9mIEZvcm1EYXRhP2U6ZSYmZS5lbGVtZW50cz9uZXcgRm9ybURhdGEoZSk6bnVsbDtpZihzKWZvcihjb25zdCByIGluIHQpe2NvbnN0IGU9dFtyXTtudWxsIT1lJiYocy5zZXQ/cy5zZXQocixlKTpzLmFwcGVuZChyLGUpKX1yZXR1cm4gc31fZ2V0TGF5ZXJSZXF1ZXN0T3B0aW9ucyhlPXt9KXtjb25zdHtwYXJzZWRVcmw6dCxnZGJWZXJzaW9uOnMsZHluYW1pY0RhdGFTb3VyY2U6cn09dGhpcy5sYXllcjtyZXR1cm57Li4uZSxxdWVyeTp7Z2RiVmVyc2lvbjpzLGxheWVyOnI/SlNPTi5zdHJpbmdpZnkoe3NvdXJjZTpyfSk6dm9pZCAwLC4uLnQucXVlcnksZjpcImpzb25cIiwuLi50aGlzLl9jcmVhdGVSZXF1ZXN0UXVlcnlPcHRpb25zKGUpfSxyZXNwb25zZVR5cGU6XCJqc29uXCJ9fWFzeW5jIF9maWx0ZXJSZWR1bmRhbnRBc3NldE1hcHMoZSl7Y29uc3R7bGF5ZXI6dH09dGhpcyx7Z2xvYmFsSWRGaWVsZDpzLGluZm9Gb3IzRDpyLHBhcnNlZFVybDppfT10O2lmKG51bGw9PXJ8fG51bGw9PXMpcmV0dXJuIGU7Y29uc3Qgbz12KHIpO2lmKG51bGw9PW8pcmV0dXJuIGU7Y29uc3Qgbj15KGkucGF0aCxgLi4vJHtvLmlkfWApLHU9bmV3IEFycmF5LGw9bmV3IEFycmF5O2Zvcihjb25zdCBhIG9mIGUpYS5nZW9tZXRyeS5tZXRhZGF0YS5nZXRFeHRlcm5hbFNvdXJjZXNPblNlcnZpY2UoaSkubGVuZ3RoPjA/bC5wdXNoKGEpOnUucHVzaChhKTtjb25zdCBjPWwubWFwKChlPT5lLmdldEF0dHJpYnV0ZShzKSkpLmZpbHRlcihhKTtpZigwPT09Yy5sZW5ndGgpcmV0dXJuIGU7Y29uc3R7YXNzZXRNYXBGaWVsZFJvbGVzOntwYXJlbnRHbG9iYWxJZDpkLGFzc2V0SGFzaDpwfX09cixoPW5ldyBNO2gud2hlcmU9YCR7ZH0gSU4gKCR7Yy5tYXAoKGU9PmAnJHtlfSdgKSl9KWAsaC5vdXRGaWVsZHM9W3AsZF0saC5yZXR1cm5HZW9tZXRyeT0hMTtjb25zdCBtPWF3YWl0IFQobixoKSx7ZmVhdHVyZXM6Zn09bTtyZXR1cm4gMD09PWYubGVuZ3RoP2U6Wy4uLnUsLi4ubC5maWx0ZXIoKGU9Pntjb25zdCB0PWUuZ2V0QXR0cmlidXRlKHMpO2lmKCF0KXJldHVybiEwO2NvbnN0e21ldGFkYXRhOnJ9PWUuZ2VvbWV0cnksYT1mLmZpbHRlcigoZT0+ZS5nZXRBdHRyaWJ1dGUoZCk9PT10KSk7aWYoMD09PWEubGVuZ3RoKXJldHVybiEwO2NvbnN0IG89YS5tYXAoKGU9PmUuZ2V0QXR0cmlidXRlKHApKSk7cmV0dXJuIHIuZ2V0RXh0ZXJuYWxTb3VyY2VzT25TZXJ2aWNlKGkpLmZsYXRNYXAoKCh7c291cmNlOmV9KT0+ZS5mbGF0TWFwKChlPT5lLnBhcnRzLm1hcCgoZT0+ZS5wYXJ0SGFzaCkpKSkpKS5zb21lKChlPT5vLmV2ZXJ5KCh0PT5lIT09dCkpKSl9KSldfX07ZShbbSgpXSxQLnByb3RvdHlwZSxcInR5cGVcIix2b2lkIDApLGUoW20oe2NvbnN0cnVjdE9ubHk6ITB9KV0sUC5wcm90b3R5cGUsXCJsYXllclwiLHZvaWQgMCksZShbbSh7cmVhZE9ubHk6ITB9KV0sUC5wcm90b3R5cGUsXCJxdWVyeVRhc2tcIixudWxsKSxQPWUoW2YoXCJlc3JpLmxheWVycy5ncmFwaGljcy5zb3VyY2VzLkZlYXR1cmVMYXllclNvdXJjZVwiKV0sUCk7Y29uc3QgVj0xZTMsJD1QO2V4cG9ydHskIGFzIGRlZmF1bHR9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9