"use strict";
(self["webpackChunksynview"] = self["webpackChunksynview"] || []).push([["vendors-node_modules_esri_calcite-components_dist_components_calcite-input-time-picker_js"],{

/***/ "./node_modules/@esri/calcite-components/dist/components/calcite-input-time-picker.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/components/calcite-input-time-picker.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CalciteInputTimePicker: () => (/* binding */ CalciteInputTimePicker),
/* harmony export */   d: () => (/* binding */ dayjs),
/* harmony export */   defineCustomElement: () => (/* binding */ defineCustomElement)
/* harmony export */ });
/* harmony import */ var _stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @stencil/core/internal/client/index.js */ "./node_modules/@stencil/core/internal/client/index.js");
/* harmony import */ var _form_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./form.js */ "./node_modules/@esri/calcite-components/dist/components/form.js");
/* harmony import */ var _guid_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./guid.js */ "./node_modules/@esri/calcite-components/dist/components/guid.js");
/* harmony import */ var _interactive_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./interactive.js */ "./node_modules/@esri/calcite-components/dist/components/interactive.js");
/* harmony import */ var _key_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./key.js */ "./node_modules/@esri/calcite-components/dist/components/key.js");
/* harmony import */ var _label2_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./label2.js */ "./node_modules/@esri/calcite-components/dist/components/label2.js");
/* harmony import */ var _loadable_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./loadable.js */ "./node_modules/@esri/calcite-components/dist/components/loadable.js");
/* harmony import */ var _locale_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./locale.js */ "./node_modules/@esri/calcite-components/dist/components/locale.js");
/* harmony import */ var _focusTrapComponent_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./focusTrapComponent.js */ "./node_modules/@esri/calcite-components/dist/components/focusTrapComponent.js");
/* harmony import */ var _time_picker_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./time-picker.js */ "./node_modules/@esri/calcite-components/dist/components/time-picker.js");
/* harmony import */ var _t9n_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./t9n.js */ "./node_modules/@esri/calcite-components/dist/components/t9n.js");
/* harmony import */ var _math_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./math.js */ "./node_modules/@esri/calcite-components/dist/components/math.js");
/* harmony import */ var _action_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./action.js */ "./node_modules/@esri/calcite-components/dist/components/action.js");
/* harmony import */ var _icon_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./icon.js */ "./node_modules/@esri/calcite-components/dist/components/icon.js");
/* harmony import */ var _input_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./input.js */ "./node_modules/@esri/calcite-components/dist/components/input.js");
/* harmony import */ var _loader_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./loader.js */ "./node_modules/@esri/calcite-components/dist/components/loader.js");
/* harmony import */ var _popover_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./popover.js */ "./node_modules/@esri/calcite-components/dist/components/popover.js");
/* harmony import */ var _progress_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./progress.js */ "./node_modules/@esri/calcite-components/dist/components/progress.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.7.0
 */



















const CSS = {
  toggleIcon: "toggle-icon",
};

var SECONDS_A_MINUTE = 60;
var SECONDS_A_HOUR = SECONDS_A_MINUTE * 60;
var SECONDS_A_DAY = SECONDS_A_HOUR * 24;
var SECONDS_A_WEEK = SECONDS_A_DAY * 7;
var MILLISECONDS_A_SECOND = 1e3;
var MILLISECONDS_A_MINUTE = SECONDS_A_MINUTE * MILLISECONDS_A_SECOND;
var MILLISECONDS_A_HOUR = SECONDS_A_HOUR * MILLISECONDS_A_SECOND;
var MILLISECONDS_A_DAY = SECONDS_A_DAY * MILLISECONDS_A_SECOND;
var MILLISECONDS_A_WEEK = SECONDS_A_WEEK * MILLISECONDS_A_SECOND; // English locales

var MS = 'millisecond';
var S = 'second';
var MIN = 'minute';
var H = 'hour';
var D = 'day';
var W = 'week';
var M = 'month';
var Q = 'quarter';
var Y = 'year';
var DATE = 'date';
var FORMAT_DEFAULT = 'YYYY-MM-DDTHH:mm:ssZ';
var INVALID_DATE_STRING = 'Invalid Date'; // regex

var REGEX_PARSE = /^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/;
var REGEX_FORMAT = /\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g;

// English [en]
// We don't need weekdaysShort, weekdaysMin, monthsShort in en.js locale
const en = {
  name: 'en',
  weekdays: 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),
  months: 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),
  ordinal: function ordinal(n) {
    var s = ['th', 'st', 'nd', 'rd'];
    var v = n % 100;
    return "[" + n + (s[(v - 20) % 10] || s[v] || s[0]) + "]";
  }
};

const en$1 = /*#__PURE__*/Object.freeze({
  __proto__: null,
  'default': en
});

var padStart = function padStart(string, length, pad) {
  var s = String(string);
  if (!s || s.length >= length) return string;
  return "" + Array(length + 1 - s.length).join(pad) + string;
};

var padZoneStr = function padZoneStr(instance) {
  var negMinutes = -instance.utcOffset();
  var minutes = Math.abs(negMinutes);
  var hourOffset = Math.floor(minutes / 60);
  var minuteOffset = minutes % 60;
  return "" + (negMinutes <= 0 ? '+' : '-') + padStart(hourOffset, 2, '0') + ":" + padStart(minuteOffset, 2, '0');
};

var monthDiff = function monthDiff(a, b) {
  // function from moment.js in order to keep the same result
  if (a.date() < b.date()) return -monthDiff(b, a);
  var wholeMonthDiff = (b.year() - a.year()) * 12 + (b.month() - a.month());
  var anchor = a.clone().add(wholeMonthDiff, M);
  var c = b - anchor < 0;
  var anchor2 = a.clone().add(wholeMonthDiff + (c ? -1 : 1), M);
  return +(-(wholeMonthDiff + (b - anchor) / (c ? anchor - anchor2 : anchor2 - anchor)) || 0);
};

var absFloor = function absFloor(n) {
  return n < 0 ? Math.ceil(n) || 0 : Math.floor(n);
};

var prettyUnit = function prettyUnit(u) {
  var special = {
    M: M,
    y: Y,
    w: W,
    d: D,
    D: DATE,
    h: H,
    m: MIN,
    s: S,
    ms: MS,
    Q: Q
  };
  return special[u] || String(u || '').toLowerCase().replace(/s$/, '');
};

var isUndefined = function isUndefined(s) {
  return s === undefined;
};

const U = {
  s: padStart,
  z: padZoneStr,
  m: monthDiff,
  a: absFloor,
  p: prettyUnit,
  u: isUndefined
};

var L = 'en'; // global locale

var Ls = {}; // global loaded locale

Ls[L] = en;

var isDayjs = function isDayjs(d) {
  return d instanceof Dayjs;
}; // eslint-disable-line no-use-before-define


var parseLocale = function parseLocale(preset, object, isLocal) {
  var l;
  if (!preset) return L;

  if (typeof preset === 'string') {
    var presetLower = preset.toLowerCase();

    if (Ls[presetLower]) {
      l = presetLower;
    }

    if (object) {
      Ls[presetLower] = object;
      l = presetLower;
    }

    var presetSplit = preset.split('-');

    if (!l && presetSplit.length > 1) {
      return parseLocale(presetSplit[0]);
    }
  } else {
    var name = preset.name;
    Ls[name] = preset;
    l = name;
  }

  if (!isLocal && l) L = l;
  return l || !isLocal && L;
};

var dayjs = function dayjs(date, c) {
  if (isDayjs(date)) {
    return date.clone();
  } // eslint-disable-next-line no-nested-ternary


  var cfg = typeof c === 'object' ? c : {};
  cfg.date = date;
  cfg.args = arguments; // eslint-disable-line prefer-rest-params

  return new Dayjs(cfg); // eslint-disable-line no-use-before-define
};

var wrapper = function wrapper(date, instance) {
  return dayjs(date, {
    locale: instance.$L,
    utc: instance.$u,
    x: instance.$x,
    $offset: instance.$offset // todo: refactor; do not use this.$offset in you code

  });
};

var Utils = U; // for plugin use

Utils.l = parseLocale;
Utils.i = isDayjs;
Utils.w = wrapper;

var parseDate = function parseDate(cfg) {
  var date = cfg.date,
      utc = cfg.utc;
  if (date === null) return new Date(NaN); // null is invalid

  if (Utils.u(date)) return new Date(); // today

  if (date instanceof Date) return new Date(date);

  if (typeof date === 'string' && !/Z$/i.test(date)) {
    var d = date.match(REGEX_PARSE);

    if (d) {
      var m = d[2] - 1 || 0;
      var ms = (d[7] || '0').substring(0, 3);

      if (utc) {
        return new Date(Date.UTC(d[1], m, d[3] || 1, d[4] || 0, d[5] || 0, d[6] || 0, ms));
      }

      return new Date(d[1], m, d[3] || 1, d[4] || 0, d[5] || 0, d[6] || 0, ms);
    }
  }

  return new Date(date); // everything else
};

var Dayjs = /*#__PURE__*/function () {
  function Dayjs(cfg) {
    this.$L = parseLocale(cfg.locale, null, true);
    this.parse(cfg); // for plugin
  }

  var _proto = Dayjs.prototype;

  _proto.parse = function parse(cfg) {
    this.$d = parseDate(cfg);
    this.$x = cfg.x || {};
    this.init();
  };

  _proto.init = function init() {
    var $d = this.$d;
    this.$y = $d.getFullYear();
    this.$M = $d.getMonth();
    this.$D = $d.getDate();
    this.$W = $d.getDay();
    this.$H = $d.getHours();
    this.$m = $d.getMinutes();
    this.$s = $d.getSeconds();
    this.$ms = $d.getMilliseconds();
  } // eslint-disable-next-line class-methods-use-this
  ;

  _proto.$utils = function $utils() {
    return Utils;
  };

  _proto.isValid = function isValid() {
    return !(this.$d.toString() === INVALID_DATE_STRING);
  };

  _proto.isSame = function isSame(that, units) {
    var other = dayjs(that);
    return this.startOf(units) <= other && other <= this.endOf(units);
  };

  _proto.isAfter = function isAfter(that, units) {
    return dayjs(that) < this.startOf(units);
  };

  _proto.isBefore = function isBefore(that, units) {
    return this.endOf(units) < dayjs(that);
  };

  _proto.$g = function $g(input, get, set) {
    if (Utils.u(input)) return this[get];
    return this.set(set, input);
  };

  _proto.unix = function unix() {
    return Math.floor(this.valueOf() / 1000);
  };

  _proto.valueOf = function valueOf() {
    // timezone(hour) * 60 * 60 * 1000 => ms
    return this.$d.getTime();
  };

  _proto.startOf = function startOf(units, _startOf) {
    var _this = this;

    // startOf -> endOf
    var isStartOf = !Utils.u(_startOf) ? _startOf : true;
    var unit = Utils.p(units);

    var instanceFactory = function instanceFactory(d, m) {
      var ins = Utils.w(_this.$u ? Date.UTC(_this.$y, m, d) : new Date(_this.$y, m, d), _this);
      return isStartOf ? ins : ins.endOf(D);
    };

    var instanceFactorySet = function instanceFactorySet(method, slice) {
      var argumentStart = [0, 0, 0, 0];
      var argumentEnd = [23, 59, 59, 999];
      return Utils.w(_this.toDate()[method].apply( // eslint-disable-line prefer-spread
      _this.toDate('s'), (isStartOf ? argumentStart : argumentEnd).slice(slice)), _this);
    };

    var $W = this.$W,
        $M = this.$M,
        $D = this.$D;
    var utcPad = "set" + (this.$u ? 'UTC' : '');

    switch (unit) {
      case Y:
        return isStartOf ? instanceFactory(1, 0) : instanceFactory(31, 11);

      case M:
        return isStartOf ? instanceFactory(1, $M) : instanceFactory(0, $M + 1);

      case W:
        {
          var weekStart = this.$locale().weekStart || 0;
          var gap = ($W < weekStart ? $W + 7 : $W) - weekStart;
          return instanceFactory(isStartOf ? $D - gap : $D + (6 - gap), $M);
        }

      case D:
      case DATE:
        return instanceFactorySet(utcPad + "Hours", 0);

      case H:
        return instanceFactorySet(utcPad + "Minutes", 1);

      case MIN:
        return instanceFactorySet(utcPad + "Seconds", 2);

      case S:
        return instanceFactorySet(utcPad + "Milliseconds", 3);

      default:
        return this.clone();
    }
  };

  _proto.endOf = function endOf(arg) {
    return this.startOf(arg, false);
  };

  _proto.$set = function $set(units, _int) {
    var _C$D$C$DATE$C$M$C$Y$C;

    // private set
    var unit = Utils.p(units);
    var utcPad = "set" + (this.$u ? 'UTC' : '');
    var name = (_C$D$C$DATE$C$M$C$Y$C = {}, _C$D$C$DATE$C$M$C$Y$C[D] = utcPad + "Date", _C$D$C$DATE$C$M$C$Y$C[DATE] = utcPad + "Date", _C$D$C$DATE$C$M$C$Y$C[M] = utcPad + "Month", _C$D$C$DATE$C$M$C$Y$C[Y] = utcPad + "FullYear", _C$D$C$DATE$C$M$C$Y$C[H] = utcPad + "Hours", _C$D$C$DATE$C$M$C$Y$C[MIN] = utcPad + "Minutes", _C$D$C$DATE$C$M$C$Y$C[S] = utcPad + "Seconds", _C$D$C$DATE$C$M$C$Y$C[MS] = utcPad + "Milliseconds", _C$D$C$DATE$C$M$C$Y$C)[unit];
    var arg = unit === D ? this.$D + (_int - this.$W) : _int;

    if (unit === M || unit === Y) {
      // clone is for badMutable plugin
      var date = this.clone().set(DATE, 1);
      date.$d[name](arg);
      date.init();
      this.$d = date.set(DATE, Math.min(this.$D, date.daysInMonth())).$d;
    } else if (name) this.$d[name](arg);

    this.init();
    return this;
  };

  _proto.set = function set(string, _int2) {
    return this.clone().$set(string, _int2);
  };

  _proto.get = function get(unit) {
    return this[Utils.p(unit)]();
  };

  _proto.add = function add(number, units) {
    var _this2 = this,
        _C$MIN$C$H$C$S$unit;

    number = Number(number); // eslint-disable-line no-param-reassign

    var unit = Utils.p(units);

    var instanceFactorySet = function instanceFactorySet(n) {
      var d = dayjs(_this2);
      return Utils.w(d.date(d.date() + Math.round(n * number)), _this2);
    };

    if (unit === M) {
      return this.set(M, this.$M + number);
    }

    if (unit === Y) {
      return this.set(Y, this.$y + number);
    }

    if (unit === D) {
      return instanceFactorySet(1);
    }

    if (unit === W) {
      return instanceFactorySet(7);
    }

    var step = (_C$MIN$C$H$C$S$unit = {}, _C$MIN$C$H$C$S$unit[MIN] = MILLISECONDS_A_MINUTE, _C$MIN$C$H$C$S$unit[H] = MILLISECONDS_A_HOUR, _C$MIN$C$H$C$S$unit[S] = MILLISECONDS_A_SECOND, _C$MIN$C$H$C$S$unit)[unit] || 1; // ms

    var nextTimeStamp = this.$d.getTime() + number * step;
    return Utils.w(nextTimeStamp, this);
  };

  _proto.subtract = function subtract(number, string) {
    return this.add(number * -1, string);
  };

  _proto.format = function format(formatStr) {
    var _this3 = this;

    var locale = this.$locale();
    if (!this.isValid()) return locale.invalidDate || INVALID_DATE_STRING;
    var str = formatStr || FORMAT_DEFAULT;
    var zoneStr = Utils.z(this);
    var $H = this.$H,
        $m = this.$m,
        $M = this.$M;
    var weekdays = locale.weekdays,
        months = locale.months,
        meridiem = locale.meridiem;

    var getShort = function getShort(arr, index, full, length) {
      return arr && (arr[index] || arr(_this3, str)) || full[index].slice(0, length);
    };

    var get$H = function get$H(num) {
      return Utils.s($H % 12 || 12, num, '0');
    };

    var meridiemFunc = meridiem || function (hour, minute, isLowercase) {
      var m = hour < 12 ? 'AM' : 'PM';
      return isLowercase ? m.toLowerCase() : m;
    };

    var matches = function matches(match) {
      switch (match) {
        case 'YY':
          return String(_this3.$y).slice(-2);

        case 'YYYY':
          return Utils.s(_this3.$y, 4, '0');

        case 'M':
          return $M + 1;

        case 'MM':
          return Utils.s($M + 1, 2, '0');

        case 'MMM':
          return getShort(locale.monthsShort, $M, months, 3);

        case 'MMMM':
          return getShort(months, $M);

        case 'D':
          return _this3.$D;

        case 'DD':
          return Utils.s(_this3.$D, 2, '0');

        case 'd':
          return String(_this3.$W);

        case 'dd':
          return getShort(locale.weekdaysMin, _this3.$W, weekdays, 2);

        case 'ddd':
          return getShort(locale.weekdaysShort, _this3.$W, weekdays, 3);

        case 'dddd':
          return weekdays[_this3.$W];

        case 'H':
          return String($H);

        case 'HH':
          return Utils.s($H, 2, '0');

        case 'h':
          return get$H(1);

        case 'hh':
          return get$H(2);

        case 'a':
          return meridiemFunc($H, $m, true);

        case 'A':
          return meridiemFunc($H, $m, false);

        case 'm':
          return String($m);

        case 'mm':
          return Utils.s($m, 2, '0');

        case 's':
          return String(_this3.$s);

        case 'ss':
          return Utils.s(_this3.$s, 2, '0');

        case 'SSS':
          return Utils.s(_this3.$ms, 3, '0');

        case 'Z':
          return zoneStr;
      }

      return null;
    };

    return str.replace(REGEX_FORMAT, function (match, $1) {
      return $1 || matches(match) || zoneStr.replace(':', '');
    }); // 'ZZ'
  };

  _proto.utcOffset = function utcOffset() {
    // Because a bug at FF24, we're rounding the timezone offset around 15 minutes
    // https://github.com/moment/moment/pull/1871
    return -Math.round(this.$d.getTimezoneOffset() / 15) * 15;
  };

  _proto.diff = function diff(input, units, _float) {
    var _this4 = this;

    var unit = Utils.p(units);
    var that = dayjs(input);
    var zoneDelta = (that.utcOffset() - this.utcOffset()) * MILLISECONDS_A_MINUTE;
    var diff = this - that;

    var getMonth = function getMonth() {
      return Utils.m(_this4, that);
    };

    var result;

    switch (unit) {
      case Y:
        result = getMonth() / 12;
        break;

      case M:
        result = getMonth();
        break;

      case Q:
        result = getMonth() / 3;
        break;

      case W:
        result = (diff - zoneDelta) / MILLISECONDS_A_WEEK;
        break;

      case D:
        result = (diff - zoneDelta) / MILLISECONDS_A_DAY;
        break;

      case H:
        result = diff / MILLISECONDS_A_HOUR;
        break;

      case MIN:
        result = diff / MILLISECONDS_A_MINUTE;
        break;

      case S:
        result = diff / MILLISECONDS_A_SECOND;
        break;

      default:
        result = diff; // milliseconds

        break;
    }

    return _float ? result : Utils.a(result);
  };

  _proto.daysInMonth = function daysInMonth() {
    return this.endOf(M).$D;
  };

  _proto.$locale = function $locale() {
    // get locale object
    return Ls[this.$L];
  };

  _proto.locale = function locale(preset, object) {
    if (!preset) return this.$L;
    var that = this.clone();
    var nextLocaleName = parseLocale(preset, object, true);
    if (nextLocaleName) that.$L = nextLocaleName;
    return that;
  };

  _proto.clone = function clone() {
    return Utils.w(this.$d, this);
  };

  _proto.toDate = function toDate() {
    return new Date(this.valueOf());
  };

  _proto.toJSON = function toJSON() {
    return this.isValid() ? this.toISOString() : null;
  };

  _proto.toISOString = function toISOString() {
    // ie 8 return
    // new Dayjs(this.valueOf() + this.$d.getTimezoneOffset() * 60000)
    // .format('YYYY-MM-DDTHH:mm:ss.SSS[Z]')
    return this.$d.toISOString();
  };

  _proto.toString = function toString() {
    return this.$d.toUTCString();
  };

  return Dayjs;
}();

var proto = Dayjs.prototype;
dayjs.prototype = proto;
[['$ms', MS], ['$s', S], ['$m', MIN], ['$H', H], ['$W', D], ['$M', M], ['$y', Y], ['$D', DATE]].forEach(function (g) {
  proto[g[1]] = function (input) {
    return this.$g(input, g[0], g[1]);
  };
});

dayjs.extend = function (plugin, option) {
  if (!plugin.$i) {
    // install plugin only once
    plugin(option, Dayjs, dayjs);
    plugin.$i = true;
  }

  return dayjs;
};

dayjs.locale = parseLocale;
dayjs.isDayjs = isDayjs;

dayjs.unix = function (timestamp) {
  return dayjs(timestamp * 1e3);
};

dayjs.en = Ls[L];
dayjs.Ls = Ls;
dayjs.p = {};

// eslint-disable-next-line import/prefer-default-export
var t = function t(format) {
  return format.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g, function (_, a, b) {
    return a || b.slice(1);
  });
};
var englishFormats = {
  LTS: 'h:mm:ss A',
  LT: 'h:mm A',
  L: 'MM/DD/YYYY',
  LL: 'MMMM D, YYYY',
  LLL: 'MMMM D, YYYY h:mm A',
  LLLL: 'dddd, MMMM D, YYYY h:mm A'
};
var u = function u(formatStr, formats) {
  return formatStr.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g, function (_, a, b) {
    var B = b && b.toUpperCase();
    return a || formats[b] || englishFormats[b] || t(formats[B]);
  });
};

var formattingTokens = /(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g;
var match1 = /\d/; // 0 - 9

var match2 = /\d\d/; // 00 - 99

var match3 = /\d{3}/; // 000 - 999

var match4 = /\d{4}/; // 0000 - 9999

var match1to2 = /\d\d?/; // 0 - 99

var matchSigned = /[+-]?\d+/; // -inf - inf

var matchOffset = /[+-]\d\d:?(\d\d)?|Z/; // +00:00 -00:00 +0000 or -0000 +00 or Z

var matchWord = /\d*[^-_:/,()\s\d]+/; // Word

var locale = {};

var parseTwoDigitYear = function parseTwoDigitYear(input) {
  input = +input;
  return input + (input > 68 ? 1900 : 2000);
};

function offsetFromString(string) {
  if (!string) return 0;
  if (string === 'Z') return 0;
  var parts = string.match(/([+-]|\d\d)/g);
  var minutes = +(parts[1] * 60) + (+parts[2] || 0);
  return minutes === 0 ? 0 : parts[0] === '+' ? -minutes : minutes; // eslint-disable-line no-nested-ternary
}

var addInput = function addInput(property) {
  return function (input) {
    this[property] = +input;
  };
};

var zoneExpressions = [matchOffset, function (input) {
  var zone = this.zone || (this.zone = {});
  zone.offset = offsetFromString(input);
}];

var getLocalePart = function getLocalePart(name) {
  var part = locale[name];
  return part && (part.indexOf ? part : part.s.concat(part.f));
};

var meridiemMatch = function meridiemMatch(input, isLowerCase) {
  var isAfternoon;
  var _locale = locale,
      meridiem = _locale.meridiem;

  if (!meridiem) {
    isAfternoon = input === (isLowerCase ? 'pm' : 'PM');
  } else {
    for (var i = 1; i <= 24; i += 1) {
      // todo: fix input === meridiem(i, 0, isLowerCase)
      if (input.indexOf(meridiem(i, 0, isLowerCase)) > -1) {
        isAfternoon = i > 12;
        break;
      }
    }
  }

  return isAfternoon;
};

var expressions = {
  A: [matchWord, function (input) {
    this.afternoon = meridiemMatch(input, false);
  }],
  a: [matchWord, function (input) {
    this.afternoon = meridiemMatch(input, true);
  }],
  S: [match1, function (input) {
    this.milliseconds = +input * 100;
  }],
  SS: [match2, function (input) {
    this.milliseconds = +input * 10;
  }],
  SSS: [match3, function (input) {
    this.milliseconds = +input;
  }],
  s: [match1to2, addInput('seconds')],
  ss: [match1to2, addInput('seconds')],
  m: [match1to2, addInput('minutes')],
  mm: [match1to2, addInput('minutes')],
  H: [match1to2, addInput('hours')],
  h: [match1to2, addInput('hours')],
  HH: [match1to2, addInput('hours')],
  hh: [match1to2, addInput('hours')],
  D: [match1to2, addInput('day')],
  DD: [match2, addInput('day')],
  Do: [matchWord, function (input) {
    var _locale2 = locale,
        ordinal = _locale2.ordinal;

    var _input$match = input.match(/\d+/);

    this.day = _input$match[0];
    if (!ordinal) return;

    for (var i = 1; i <= 31; i += 1) {
      if (ordinal(i).replace(/\[|\]/g, '') === input) {
        this.day = i;
      }
    }
  }],
  M: [match1to2, addInput('month')],
  MM: [match2, addInput('month')],
  MMM: [matchWord, function (input) {
    var months = getLocalePart('months');
    var monthsShort = getLocalePart('monthsShort');
    var matchIndex = (monthsShort || months.map(function (_) {
      return _.slice(0, 3);
    })).indexOf(input) + 1;

    if (matchIndex < 1) {
      throw new Error();
    }

    this.month = matchIndex % 12 || matchIndex;
  }],
  MMMM: [matchWord, function (input) {
    var months = getLocalePart('months');
    var matchIndex = months.indexOf(input) + 1;

    if (matchIndex < 1) {
      throw new Error();
    }

    this.month = matchIndex % 12 || matchIndex;
  }],
  Y: [matchSigned, addInput('year')],
  YY: [match2, function (input) {
    this.year = parseTwoDigitYear(input);
  }],
  YYYY: [match4, addInput('year')],
  Z: zoneExpressions,
  ZZ: zoneExpressions
};

function correctHours(time) {
  var afternoon = time.afternoon;

  if (afternoon !== undefined) {
    var hours = time.hours;

    if (afternoon) {
      if (hours < 12) {
        time.hours += 12;
      }
    } else if (hours === 12) {
      time.hours = 0;
    }

    delete time.afternoon;
  }
}

function makeParser(format) {
  format = u(format, locale && locale.formats);
  var array = format.match(formattingTokens);
  var length = array.length;

  for (var i = 0; i < length; i += 1) {
    var token = array[i];
    var parseTo = expressions[token];
    var regex = parseTo && parseTo[0];
    var parser = parseTo && parseTo[1];

    if (parser) {
      array[i] = {
        regex: regex,
        parser: parser
      };
    } else {
      array[i] = token.replace(/^\[|\]$/g, '');
    }
  }

  return function (input) {
    var time = {};

    for (var _i = 0, start = 0; _i < length; _i += 1) {
      var _token = array[_i];

      if (typeof _token === 'string') {
        start += _token.length;
      } else {
        var _regex = _token.regex,
            _parser = _token.parser;
        var part = input.slice(start);

        var match = _regex.exec(part);

        var value = match[0];

        _parser.call(time, value);

        input = input.replace(value, '');
      }
    }

    correctHours(time);
    return time;
  };
}

var parseFormattedInput = function parseFormattedInput(input, format, utc) {
  try {
    if (['x', 'X'].indexOf(format) > -1) return new Date((format === 'X' ? 1000 : 1) * input);
    var parser = makeParser(format);

    var _parser2 = parser(input),
        year = _parser2.year,
        month = _parser2.month,
        day = _parser2.day,
        hours = _parser2.hours,
        minutes = _parser2.minutes,
        seconds = _parser2.seconds,
        milliseconds = _parser2.milliseconds,
        zone = _parser2.zone;

    var now = new Date();
    var d = day || (!year && !month ? now.getDate() : 1);
    var y = year || now.getFullYear();
    var M = 0;

    if (!(year && !month)) {
      M = month > 0 ? month - 1 : now.getMonth();
    }

    var h = hours || 0;
    var m = minutes || 0;
    var s = seconds || 0;
    var ms = milliseconds || 0;

    if (zone) {
      return new Date(Date.UTC(y, M, d, h, m, s, ms + zone.offset * 60 * 1000));
    }

    if (utc) {
      return new Date(Date.UTC(y, M, d, h, m, s, ms));
    }

    return new Date(y, M, d, h, m, s, ms);
  } catch (e) {
    return new Date(''); // Invalid Date
  }
};

const customParseFormat = (function (o, C, d) {
  d.p.customParseFormat = true;

  if (o && o.parseTwoDigitYear) {
    parseTwoDigitYear = o.parseTwoDigitYear;
  }

  var proto = C.prototype;
  var oldParse = proto.parse;

  proto.parse = function (cfg) {
    var date = cfg.date,
        utc = cfg.utc,
        args = cfg.args;
    this.$u = utc;
    var format = args[1];

    if (typeof format === 'string') {
      var isStrictWithoutLocale = args[2] === true;
      var isStrictWithLocale = args[3] === true;
      var isStrict = isStrictWithoutLocale || isStrictWithLocale;
      var pl = args[2];

      if (isStrictWithLocale) {
        pl = args[2];
      }

      locale = this.$locale();

      if (!isStrictWithoutLocale && pl) {
        locale = d.Ls[pl];
      }

      this.$d = parseFormattedInput(date, format, utc);
      this.init();
      if (pl && pl !== true) this.$L = this.locale(pl).$L; // use != to treat
      // input number 1410715640579 and format string '1410715640579' equal
      // eslint-disable-next-line eqeqeq

      if (isStrict && date != this.format(format)) {
        this.$d = new Date('');
      } // reset global locale to make parallel unit test


      locale = {};
    } else if (format instanceof Array) {
      var len = format.length;

      for (var i = 1; i <= len; i += 1) {
        args[1] = format[i - 1];
        var result = d.apply(this, args);

        if (result.isValid()) {
          this.$d = result.$d;
          this.$L = result.$L;
          this.init();
          break;
        }

        if (i === len) this.$d = new Date('');
      }
    } else {
      oldParse.call(this, cfg);
    }
  };
});

const localeData = (function (o, c, dayjs) {
  // locale needed later
  var proto = c.prototype;

  var getLocalePart = function getLocalePart(part) {
    return part && (part.indexOf ? part : part.s);
  };

  var getShort = function getShort(ins, target, full, num, localeOrder) {
    var locale = ins.name ? ins : ins.$locale();
    var targetLocale = getLocalePart(locale[target]);
    var fullLocale = getLocalePart(locale[full]);
    var result = targetLocale || fullLocale.map(function (f) {
      return f.slice(0, num);
    });
    if (!localeOrder) return result;
    var weekStart = locale.weekStart;
    return result.map(function (_, index) {
      return result[(index + (weekStart || 0)) % 7];
    });
  };

  var getDayjsLocaleObject = function getDayjsLocaleObject() {
    return dayjs.Ls[dayjs.locale()];
  };

  var getLongDateFormat = function getLongDateFormat(l, format) {
    return l.formats[format] || t(l.formats[format.toUpperCase()]);
  };

  var localeData = function localeData() {
    var _this = this;

    return {
      months: function months(instance) {
        return instance ? instance.format('MMMM') : getShort(_this, 'months');
      },
      monthsShort: function monthsShort(instance) {
        return instance ? instance.format('MMM') : getShort(_this, 'monthsShort', 'months', 3);
      },
      firstDayOfWeek: function firstDayOfWeek() {
        return _this.$locale().weekStart || 0;
      },
      weekdays: function weekdays(instance) {
        return instance ? instance.format('dddd') : getShort(_this, 'weekdays');
      },
      weekdaysMin: function weekdaysMin(instance) {
        return instance ? instance.format('dd') : getShort(_this, 'weekdaysMin', 'weekdays', 2);
      },
      weekdaysShort: function weekdaysShort(instance) {
        return instance ? instance.format('ddd') : getShort(_this, 'weekdaysShort', 'weekdays', 3);
      },
      longDateFormat: function longDateFormat(format) {
        return getLongDateFormat(_this.$locale(), format);
      },
      meridiem: this.$locale().meridiem,
      ordinal: this.$locale().ordinal
    };
  };

  proto.localeData = function () {
    return localeData.bind(this)();
  };

  dayjs.localeData = function () {
    var localeObject = getDayjsLocaleObject();
    return {
      firstDayOfWeek: function firstDayOfWeek() {
        return localeObject.weekStart || 0;
      },
      weekdays: function weekdays() {
        return dayjs.weekdays();
      },
      weekdaysShort: function weekdaysShort() {
        return dayjs.weekdaysShort();
      },
      weekdaysMin: function weekdaysMin() {
        return dayjs.weekdaysMin();
      },
      months: function months() {
        return dayjs.months();
      },
      monthsShort: function monthsShort() {
        return dayjs.monthsShort();
      },
      longDateFormat: function longDateFormat(format) {
        return getLongDateFormat(localeObject, format);
      },
      meridiem: localeObject.meridiem,
      ordinal: localeObject.ordinal
    };
  };

  dayjs.months = function () {
    return getShort(getDayjsLocaleObject(), 'months');
  };

  dayjs.monthsShort = function () {
    return getShort(getDayjsLocaleObject(), 'monthsShort', 'months', 3);
  };

  dayjs.weekdays = function (localeOrder) {
    return getShort(getDayjsLocaleObject(), 'weekdays', null, null, localeOrder);
  };

  dayjs.weekdaysShort = function (localeOrder) {
    return getShort(getDayjsLocaleObject(), 'weekdaysShort', 'weekdays', 3, localeOrder);
  };

  dayjs.weekdaysMin = function (localeOrder) {
    return getShort(getDayjsLocaleObject(), 'weekdaysMin', 'weekdays', 2, localeOrder);
  };
});

const localizedFormat = (function (o, c, d) {
  var proto = c.prototype;
  var oldFormat = proto.format;
  d.en.formats = englishFormats;

  proto.format = function (formatStr) {
    if (formatStr === void 0) {
      formatStr = FORMAT_DEFAULT;
    }

    var _this$$locale = this.$locale(),
        _this$$locale$formats = _this$$locale.formats,
        formats = _this$$locale$formats === void 0 ? {} : _this$$locale$formats;

    var result = u(formatStr, formats);
    return oldFormat.call(this, result);
  };
});

// Plugin template from https://day.js.org/docs/en/plugin/plugin
const preParsePostFormat = (function (option, dayjsClass) {
  var oldParse = dayjsClass.prototype.parse;

  dayjsClass.prototype.parse = function (cfg) {
    if (typeof cfg.date === 'string') {
      var locale = this.$locale();
      cfg.date = locale && locale.preparse ? locale.preparse(cfg.date) : cfg.date;
    } // original parse result


    return oldParse.bind(this)(cfg);
  }; // // overriding existing API
  // // e.g. extend dayjs().format()


  var oldFormat = dayjsClass.prototype.format;

  dayjsClass.prototype.format = function () {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    // original format result
    var result = oldFormat.call.apply(oldFormat, [this].concat(args)); // return modified result

    var locale = this.$locale();
    return locale && locale.postformat ? locale.postformat(result) : result;
  };

  var oldFromTo = dayjsClass.prototype.fromToBase;

  if (oldFromTo) {
    dayjsClass.prototype.fromToBase = function (input, withoutSuffix, instance, isFrom) {
      var locale = this.$locale() || instance.$locale(); // original format result

      return oldFromTo.call(this, input, withoutSuffix, instance, isFrom, locale && locale.postformat);
    };
  }
});

const updateLocale = (function (option, Dayjs, dayjs) {
  dayjs.updateLocale = function (locale, customConfig) {
    var localeList = dayjs.Ls;
    var localeConfig = localeList[locale];
    if (!localeConfig) return;
    var customConfigKeys = customConfig ? Object.keys(customConfig) : [];
    customConfigKeys.forEach(function (c) {
      localeConfig[c] = customConfig[c];
    });
    return localeConfig; // eslint-disable-line consistent-return
  };
});

const inputTimePickerCss = ":host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-block;-webkit-user-select:none;user-select:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}::slotted(input[slot=hidden-form-input]){margin:0 !important;opacity:0 !important;outline:none !important;padding:0 !important;position:absolute !important;inset:0 !important;transform:none !important;-webkit-appearance:none !important;z-index:-1 !important}:host([scale=s]){--calcite-toggle-spacing:0.5rem}:host([scale=m]){--calcite-toggle-spacing:0.75rem}:host([scale=l]){--calcite-toggle-spacing:1rem}.input-wrapper{position:relative}.toggle-icon{position:absolute;display:flex;inline-size:1rem;cursor:pointer;align-items:center;inset-inline-end:0;inset-block:0;padding-inline:var(--calcite-toggle-spacing)}:host([hidden]){display:none}[hidden]{display:none}";

// some bundlers (e.g., Webpack) need dynamic import paths to be static
const supportedDayjsLocaleToLocaleConfigImport = new Map([
  ["ar", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_ar_js-_56e51").then(__webpack_require__.bind(__webpack_require__, /*! ./ar.js */ "./node_modules/@esri/calcite-components/dist/components/ar.js"))],
  ["bg", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_bg_js-_a1681").then(__webpack_require__.bind(__webpack_require__, /*! ./bg.js */ "./node_modules/@esri/calcite-components/dist/components/bg.js"))],
  ["bs", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_bs_js-_a0bc1").then(__webpack_require__.bind(__webpack_require__, /*! ./bs.js */ "./node_modules/@esri/calcite-components/dist/components/bs.js"))],
  ["ca", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_ca_js-_00ad1").then(__webpack_require__.bind(__webpack_require__, /*! ./ca.js */ "./node_modules/@esri/calcite-components/dist/components/ca.js"))],
  ["cs", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_cs_js-_55b21").then(__webpack_require__.bind(__webpack_require__, /*! ./cs.js */ "./node_modules/@esri/calcite-components/dist/components/cs.js"))],
  ["da", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_da_js-_ff211").then(__webpack_require__.bind(__webpack_require__, /*! ./da.js */ "./node_modules/@esri/calcite-components/dist/components/da.js"))],
  ["de", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_de_js-_58a61").then(__webpack_require__.bind(__webpack_require__, /*! ./de.js */ "./node_modules/@esri/calcite-components/dist/components/de.js"))],
  ["de-at", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_de-at_js-_354a1").then(__webpack_require__.bind(__webpack_require__, /*! ./de-at.js */ "./node_modules/@esri/calcite-components/dist/components/de-at.js"))],
  ["de-ch", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_de-ch_js-_2e531").then(__webpack_require__.bind(__webpack_require__, /*! ./de-ch.js */ "./node_modules/@esri/calcite-components/dist/components/de-ch.js"))],
  ["el", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_el_js-_3ddc1").then(__webpack_require__.bind(__webpack_require__, /*! ./el.js */ "./node_modules/@esri/calcite-components/dist/components/el.js"))],
  ["en", () => Promise.resolve().then(function () { return en$1; })],
  ["en-au", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_en-au_js-_20de1").then(__webpack_require__.bind(__webpack_require__, /*! ./en-au.js */ "./node_modules/@esri/calcite-components/dist/components/en-au.js"))],
  ["en-ca", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_en-ca_js-_20081").then(__webpack_require__.bind(__webpack_require__, /*! ./en-ca.js */ "./node_modules/@esri/calcite-components/dist/components/en-ca.js"))],
  ["en-gb", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_en-gb_js-_1ac31").then(__webpack_require__.bind(__webpack_require__, /*! ./en-gb.js */ "./node_modules/@esri/calcite-components/dist/components/en-gb.js"))],
  ["es", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_es_js-_60ce1").then(__webpack_require__.bind(__webpack_require__, /*! ./es.js */ "./node_modules/@esri/calcite-components/dist/components/es.js"))],
  ["es-mx", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_es-mx_js-_fb321").then(__webpack_require__.bind(__webpack_require__, /*! ./es-mx.js */ "./node_modules/@esri/calcite-components/dist/components/es-mx.js"))],
  ["et", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_et_js-_c70b1").then(__webpack_require__.bind(__webpack_require__, /*! ./et.js */ "./node_modules/@esri/calcite-components/dist/components/et.js"))],
  ["fi", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_fi_js-_feaa1").then(__webpack_require__.bind(__webpack_require__, /*! ./fi.js */ "./node_modules/@esri/calcite-components/dist/components/fi.js"))],
  ["fr", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_fr_js-_a3271").then(__webpack_require__.bind(__webpack_require__, /*! ./fr.js */ "./node_modules/@esri/calcite-components/dist/components/fr.js"))],
  ["fr-ch", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_fr-ch_js-_bdb71").then(__webpack_require__.bind(__webpack_require__, /*! ./fr-ch.js */ "./node_modules/@esri/calcite-components/dist/components/fr-ch.js"))],
  ["he", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_he_js-_49781").then(__webpack_require__.bind(__webpack_require__, /*! ./he.js */ "./node_modules/@esri/calcite-components/dist/components/he.js"))],
  ["hi", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_hi_js-_01a61").then(__webpack_require__.bind(__webpack_require__, /*! ./hi.js */ "./node_modules/@esri/calcite-components/dist/components/hi.js"))],
  ["hr", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_hr_js-_27b61").then(__webpack_require__.bind(__webpack_require__, /*! ./hr.js */ "./node_modules/@esri/calcite-components/dist/components/hr.js"))],
  ["hu", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_hu_js-_f5c21").then(__webpack_require__.bind(__webpack_require__, /*! ./hu.js */ "./node_modules/@esri/calcite-components/dist/components/hu.js"))],
  ["id", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_id_js-_73431").then(__webpack_require__.bind(__webpack_require__, /*! ./id.js */ "./node_modules/@esri/calcite-components/dist/components/id.js"))],
  ["it", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_it_js-_4b721").then(__webpack_require__.bind(__webpack_require__, /*! ./it.js */ "./node_modules/@esri/calcite-components/dist/components/it.js"))],
  ["it-ch", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_it-ch_js-_a6231").then(__webpack_require__.bind(__webpack_require__, /*! ./it-ch.js */ "./node_modules/@esri/calcite-components/dist/components/it-ch.js"))],
  ["ja", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_ja_js-_12c81").then(__webpack_require__.bind(__webpack_require__, /*! ./ja.js */ "./node_modules/@esri/calcite-components/dist/components/ja.js"))],
  ["ko", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_ko_js-_58151").then(__webpack_require__.bind(__webpack_require__, /*! ./ko.js */ "./node_modules/@esri/calcite-components/dist/components/ko.js"))],
  ["lt", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_lt_js-_82f61").then(__webpack_require__.bind(__webpack_require__, /*! ./lt.js */ "./node_modules/@esri/calcite-components/dist/components/lt.js"))],
  ["lv", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_lv_js-_58651").then(__webpack_require__.bind(__webpack_require__, /*! ./lv.js */ "./node_modules/@esri/calcite-components/dist/components/lv.js"))],
  ["mk", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_mk_js-_a7401").then(__webpack_require__.bind(__webpack_require__, /*! ./mk.js */ "./node_modules/@esri/calcite-components/dist/components/mk.js"))],
  ["nl", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_nl_js-_8d361").then(__webpack_require__.bind(__webpack_require__, /*! ./nl.js */ "./node_modules/@esri/calcite-components/dist/components/nl.js"))],
  ["nb", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_nb_js-_b5e01").then(__webpack_require__.bind(__webpack_require__, /*! ./nb.js */ "./node_modules/@esri/calcite-components/dist/components/nb.js"))],
  ["pl", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_pl_js-_677a1").then(__webpack_require__.bind(__webpack_require__, /*! ./pl.js */ "./node_modules/@esri/calcite-components/dist/components/pl.js"))],
  ["pt", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_pt_js-_6b311").then(__webpack_require__.bind(__webpack_require__, /*! ./pt.js */ "./node_modules/@esri/calcite-components/dist/components/pt.js"))],
  ["pt-br", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_pt-br_js-_1fed1").then(__webpack_require__.bind(__webpack_require__, /*! ./pt-br.js */ "./node_modules/@esri/calcite-components/dist/components/pt-br.js"))],
  ["ro", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_ro_js-_fe661").then(__webpack_require__.bind(__webpack_require__, /*! ./ro.js */ "./node_modules/@esri/calcite-components/dist/components/ro.js"))],
  ["ru", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_ru_js-_55eb1").then(__webpack_require__.bind(__webpack_require__, /*! ./ru.js */ "./node_modules/@esri/calcite-components/dist/components/ru.js"))],
  ["sk", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_sk_js-_e6841").then(__webpack_require__.bind(__webpack_require__, /*! ./sk.js */ "./node_modules/@esri/calcite-components/dist/components/sk.js"))],
  ["sl", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_sl_js-_c8951").then(__webpack_require__.bind(__webpack_require__, /*! ./sl.js */ "./node_modules/@esri/calcite-components/dist/components/sl.js"))],
  ["sr", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_sr_js-_fad61").then(__webpack_require__.bind(__webpack_require__, /*! ./sr.js */ "./node_modules/@esri/calcite-components/dist/components/sr.js"))],
  ["sv", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_sv_js-_0ea31").then(__webpack_require__.bind(__webpack_require__, /*! ./sv.js */ "./node_modules/@esri/calcite-components/dist/components/sv.js"))],
  ["th", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_th_js-_b3811").then(__webpack_require__.bind(__webpack_require__, /*! ./th.js */ "./node_modules/@esri/calcite-components/dist/components/th.js"))],
  ["tr", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_tr_js-_de1d1").then(__webpack_require__.bind(__webpack_require__, /*! ./tr.js */ "./node_modules/@esri/calcite-components/dist/components/tr.js"))],
  ["uk", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_uk_js-_3cae1").then(__webpack_require__.bind(__webpack_require__, /*! ./uk.js */ "./node_modules/@esri/calcite-components/dist/components/uk.js"))],
  ["vi", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_vi_js-_00db1").then(__webpack_require__.bind(__webpack_require__, /*! ./vi.js */ "./node_modules/@esri/calcite-components/dist/components/vi.js"))],
  ["zh-cn", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_zh-cn_js-_e72a1").then(__webpack_require__.bind(__webpack_require__, /*! ./zh-cn.js */ "./node_modules/@esri/calcite-components/dist/components/zh-cn.js"))],
  ["zh-hk", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_zh-hk_js-_00361").then(__webpack_require__.bind(__webpack_require__, /*! ./zh-hk.js */ "./node_modules/@esri/calcite-components/dist/components/zh-hk.js"))],
  ["zh-tw", () => __webpack_require__.e(/*! import() */ "node_modules_esri_calcite-components_dist_components_zh-tw_js-_b6481").then(__webpack_require__.bind(__webpack_require__, /*! ./zh-tw.js */ "./node_modules/@esri/calcite-components/dist/components/zh-tw.js"))],
]);
dayjs.extend(customParseFormat);
dayjs.extend(localeData);
dayjs.extend(localizedFormat);
dayjs.extend(preParsePostFormat);
dayjs.extend(updateLocale);
const InputTimePicker = /*@__PURE__*/ (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_17__.proxyCustomElement)(class extends _stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_17__.HTMLElement {
  constructor() {
    super();
    this.__registerHost();
    this.__attachShadow();
    this.calciteInputTimePickerChange = (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_17__.createEvent)(this, "calciteInputTimePickerChange", 7);
    this.focusOnOpen = false;
    this.dialogId = `time-picker-dialog--${(0,_guid_js__WEBPACK_IMPORTED_MODULE_1__.g)()}`;
    /** whether the value of the input was changed as a result of user typing or not */
    this.userChangedValue = false;
    this.referenceElementId = `input-time-picker-${(0,_guid_js__WEBPACK_IMPORTED_MODULE_1__.g)()}`;
    //--------------------------------------------------------------------------
    //
    //  Event Listeners
    //
    //--------------------------------------------------------------------------
    this.hostBlurHandler = () => {
      const inputValue = this.calciteInputEl.value;
      const delocalizedInputValue = this.delocalizeTimeString(inputValue);
      if (!delocalizedInputValue) {
        this.setValue("");
        return;
      }
      if (delocalizedInputValue !== this.value) {
        this.setValue(delocalizedInputValue);
      }
      const localizedTimeString = (0,_time_picker_js__WEBPACK_IMPORTED_MODULE_8__.l)({
        value: this.value,
        locale: this.effectiveLocale,
        numberingSystem: this.numberingSystem,
        includeSeconds: this.shouldIncludeSeconds(),
        fractionalSecondDigits: (0,_math_js__WEBPACK_IMPORTED_MODULE_10__.d)(this.step),
      });
      if (localizedTimeString !== inputValue) {
        this.setInputValue(localizedTimeString);
      }
      this.deactivate();
    };
    this.calciteInternalInputFocusHandler = (event) => {
      if (!this.readOnly) {
        event.stopPropagation();
      }
    };
    this.calciteInternalInputInputHandler = (event) => {
      const { effectiveLocale: locale, numberingSystem } = this;
      if (numberingSystem && numberingSystem !== "latn") {
        const target = event.target;
        _locale_js__WEBPACK_IMPORTED_MODULE_6__.n.numberFormatOptions = {
          locale,
          numberingSystem,
          useGrouping: false,
        };
        const valueInNumberingSystem = _locale_js__WEBPACK_IMPORTED_MODULE_6__.n
          .delocalize(target.value)
          .split("")
          .map((char) => _key_js__WEBPACK_IMPORTED_MODULE_3__.n.includes(char)
          ? _locale_js__WEBPACK_IMPORTED_MODULE_6__.n.numberFormatter.format(Number(char))
          : char)
          .join("");
        this.setInputValue(valueInNumberingSystem);
      }
    };
    this.timePickerChangeHandler = (event) => {
      event.stopPropagation();
      const target = event.target;
      const value = target.value;
      const includeSeconds = this.shouldIncludeSeconds();
      this.setValue((0,_time_picker_js__WEBPACK_IMPORTED_MODULE_8__.t)(value, includeSeconds));
      this.setInputValue((0,_time_picker_js__WEBPACK_IMPORTED_MODULE_8__.l)({
        value,
        locale: this.effectiveLocale,
        numberingSystem: this.numberingSystem,
        includeSeconds,
        fractionalSecondDigits: (0,_math_js__WEBPACK_IMPORTED_MODULE_10__.d)(this.step),
      }));
    };
    this.popoverCloseHandler = () => {
      (0,_focusTrapComponent_js__WEBPACK_IMPORTED_MODULE_7__.d)(this, {
        onDeactivate: () => {
          this.calciteInputEl.setFocus();
          this.focusOnOpen = false;
        },
      });
    };
    this.popoverOpenHandler = () => {
      (0,_focusTrapComponent_js__WEBPACK_IMPORTED_MODULE_7__.a)(this, {
        onActivate: () => {
          if (this.focusOnOpen) {
            this.calciteTimePickerEl.setFocus();
            this.focusOnOpen = false;
          }
        },
      });
    };
    this.keyDownHandler = (event) => {
      const { defaultPrevented, key } = event;
      if (defaultPrevented) {
        return;
      }
      if (key === "Enter") {
        if ((0,_form_js__WEBPACK_IMPORTED_MODULE_0__.s)(this)) {
          event.preventDefault();
          this.calciteInputEl.setFocus();
        }
        if (event.composedPath().includes(this.calciteTimePickerEl)) {
          return;
        }
        const newValue = this.delocalizeTimeString(this.calciteInputEl.value);
        if ((0,_time_picker_js__WEBPACK_IMPORTED_MODULE_8__.i)(newValue)) {
          this.setValue(newValue);
          const localizedTimeString = (0,_time_picker_js__WEBPACK_IMPORTED_MODULE_8__.l)({
            value: this.value,
            locale: this.effectiveLocale,
            numberingSystem: this.numberingSystem,
            includeSeconds: this.shouldIncludeSeconds(),
            fractionalSecondDigits: (0,_math_js__WEBPACK_IMPORTED_MODULE_10__.d)(this.step),
          });
          if (newValue && this.calciteInputEl.value !== localizedTimeString) {
            this.setInputValue(localizedTimeString);
          }
        }
      }
      else if (key === "ArrowDown") {
        this.open = true;
        this.focusOnOpen = true;
        event.preventDefault();
      }
      else if (key === "Escape" && this.open) {
        this.open = false;
        event.preventDefault();
        this.calciteInputEl.setFocus();
      }
    };
    this.setCalcitePopoverEl = (el) => {
      this.popoverEl = el;
    };
    this.setCalciteInputEl = (el) => {
      this.calciteInputEl = el;
    };
    this.setCalciteTimePickerEl = (el) => {
      this.calciteTimePickerEl = el;
      (0,_focusTrapComponent_js__WEBPACK_IMPORTED_MODULE_7__.c)(this, {
        focusTrapEl: el,
        focusTrapOptions: {
          initialFocus: false,
          setReturnFocus: false,
        },
      });
    };
    this.setInputValue = (newInputValue) => {
      if (!this.calciteInputEl) {
        return;
      }
      this.calciteInputEl.value = newInputValue;
    };
    /**
     * Sets the value and emits a change event.
     * This is used to update the value as a result of user interaction.
     *
     * @param value
     */
    this.setValue = (value) => {
      const oldValue = this.value;
      const newValue = (0,_time_picker_js__WEBPACK_IMPORTED_MODULE_8__.f)(value) || "";
      if (newValue === oldValue) {
        return;
      }
      this.userChangedValue = true;
      this.value = newValue || "";
      const changeEvent = this.calciteInputTimePickerChange.emit();
      if (changeEvent.defaultPrevented) {
        this.userChangedValue = false;
        this.value = oldValue;
        this.setInputValue((0,_time_picker_js__WEBPACK_IMPORTED_MODULE_8__.l)({
          value: oldValue,
          locale: this.effectiveLocale,
          numberingSystem: this.numberingSystem,
          includeSeconds: this.shouldIncludeSeconds(),
          fractionalSecondDigits: (0,_math_js__WEBPACK_IMPORTED_MODULE_10__.d)(this.step),
        }));
      }
    };
    /**
     * Sets the value directly without emitting a change event.
     * This is used to update the value on initial load and when props change that are not the result of user interaction.
     *
     * @param value
     */
    this.setValueDirectly = (value) => {
      const includeSeconds = this.shouldIncludeSeconds();
      this.value = (0,_time_picker_js__WEBPACK_IMPORTED_MODULE_8__.t)(value, includeSeconds);
      this.setInputValue(this.value
        ? (0,_time_picker_js__WEBPACK_IMPORTED_MODULE_8__.l)({
          value: this.value,
          includeSeconds,
          locale: this.effectiveLocale,
          numberingSystem: this.numberingSystem,
          fractionalSecondDigits: (0,_math_js__WEBPACK_IMPORTED_MODULE_10__.d)(this.step),
        })
        : "");
    };
    this.onInputWrapperClick = () => {
      this.open = !this.open;
    };
    this.deactivate = () => {
      this.open = false;
    };
    this.open = false;
    this.disabled = false;
    this.focusTrapDisabled = false;
    this.form = undefined;
    this.readOnly = false;
    this.messageOverrides = undefined;
    this.messages = undefined;
    this.name = undefined;
    this.numberingSystem = undefined;
    this.required = false;
    this.scale = "m";
    this.overlayPositioning = "absolute";
    this.placement = "auto";
    this.step = 60;
    this.value = null;
    this.defaultMessages = undefined;
    this.effectiveLocale = "";
  }
  openHandler(value) {
    if (this.disabled || this.readOnly) {
      this.open = false;
      return;
    }
    if (value) {
      this.reposition(true);
    }
  }
  handleFocusTrapDisabled(focusTrapDisabled) {
    if (!this.open) {
      return;
    }
    focusTrapDisabled ? (0,_focusTrapComponent_js__WEBPACK_IMPORTED_MODULE_7__.d)(this) : (0,_focusTrapComponent_js__WEBPACK_IMPORTED_MODULE_7__.a)(this);
  }
  handleDisabledAndReadOnlyChange(value) {
    if (!value) {
      this.open = false;
    }
  }
  onMessagesChange() {
    /* wired up by t9n util */
  }
  numberingSystemWatcher(numberingSystem) {
    this.setInputValue((0,_time_picker_js__WEBPACK_IMPORTED_MODULE_8__.l)({
      value: this.value,
      locale: this.effectiveLocale,
      numberingSystem,
      includeSeconds: this.shouldIncludeSeconds(),
      fractionalSecondDigits: (0,_math_js__WEBPACK_IMPORTED_MODULE_10__.d)(this.step),
    }));
  }
  stepWatcher(newStep, oldStep) {
    if ((oldStep >= 60 && newStep > 0 && newStep < 60) ||
      (newStep >= 60 && oldStep > 0 && oldStep < 60)) {
      this.setValueDirectly(this.value);
    }
  }
  valueWatcher(newValue) {
    if (!this.userChangedValue) {
      this.setValueDirectly(newValue);
    }
    this.userChangedValue = false;
  }
  async effectiveLocaleWatcher(locale) {
    await this.loadDateTimeLocaleData();
    this.setInputValue((0,_time_picker_js__WEBPACK_IMPORTED_MODULE_8__.l)({
      value: this.value,
      locale,
      numberingSystem: this.numberingSystem,
      includeSeconds: this.shouldIncludeSeconds(),
      fractionalSecondDigits: (0,_math_js__WEBPACK_IMPORTED_MODULE_10__.d)(this.step),
    }));
  }
  // --------------------------------------------------------------------------
  //
  //  Public Methods
  //
  // --------------------------------------------------------------------------
  /** Sets focus on the component. */
  async setFocus() {
    await (0,_loadable_js__WEBPACK_IMPORTED_MODULE_5__.c)(this);
    this.el.focus();
  }
  /**
   * Updates the position of the component.
   *
   * @param delayed
   */
  async reposition(delayed = false) {
    this.popoverEl?.reposition(delayed);
  }
  // --------------------------------------------------------------------------
  //
  //  Private Methods
  //
  // --------------------------------------------------------------------------
  delocalizeTimeString(value) {
    // we need to set the corresponding locale before parsing, otherwise it defaults to English (possible dayjs bug)
    dayjs.locale(this.effectiveLocale.toLowerCase());
    const nonFractionalSecondParts = this.delocalizeTimeStringToParts(value);
    let delocalizedTimeString;
    if (this.shouldIncludeFractionalSeconds()) {
      const stepPrecision = (0,_math_js__WEBPACK_IMPORTED_MODULE_10__.d)(this.step);
      const centisecondParts = this.delocalizeTimeStringToParts(value, "S");
      if (stepPrecision === 1) {
        delocalizedTimeString =
          centisecondParts.millisecond !== 0
            ? this.getTimeStringFromParts(centisecondParts)
            : this.getTimeStringFromParts(nonFractionalSecondParts);
      }
      else {
        const decisecondParts = this.delocalizeTimeStringToParts(value, "SS");
        if (stepPrecision === 2) {
          if (decisecondParts.millisecond !== 0) {
            delocalizedTimeString = this.getTimeStringFromParts(decisecondParts);
          }
          else if (centisecondParts.millisecond !== 0) {
            delocalizedTimeString = this.getTimeStringFromParts(centisecondParts);
          }
          else {
            delocalizedTimeString = this.getTimeStringFromParts(nonFractionalSecondParts);
          }
        }
        else if (stepPrecision >= 3) {
          const millisecondParts = this.delocalizeTimeStringToParts(value, "SSS");
          if (millisecondParts.millisecond !== 0) {
            delocalizedTimeString = this.getTimeStringFromParts(millisecondParts);
          }
          else if (decisecondParts.millisecond !== 0) {
            delocalizedTimeString = this.getTimeStringFromParts(decisecondParts);
          }
          else if (centisecondParts.millisecond !== 0) {
            delocalizedTimeString = this.getTimeStringFromParts(centisecondParts);
          }
          else {
            delocalizedTimeString = this.getTimeStringFromParts(nonFractionalSecondParts);
          }
        }
      }
    }
    else {
      delocalizedTimeString = this.getTimeStringFromParts(nonFractionalSecondParts);
    }
    return delocalizedTimeString;
  }
  delocalizeTimeStringToParts(localizedTimeString, fractionalSecondFormatToken) {
    const ltsFormatString = this.localeConfig?.formats?.LTS;
    const fractionalSecondTokenMatch = ltsFormatString.match(/ss\.*(S+)/g);
    if (fractionalSecondFormatToken && this.shouldIncludeFractionalSeconds()) {
      const secondFormatToken = `ss.${fractionalSecondFormatToken}`;
      this.localeConfig.formats.LTS = fractionalSecondTokenMatch
        ? ltsFormatString.replace(fractionalSecondTokenMatch[0], secondFormatToken)
        : ltsFormatString.replace("ss", secondFormatToken);
    }
    else if (fractionalSecondTokenMatch) {
      this.localeConfig.formats.LTS = ltsFormatString.replace(fractionalSecondTokenMatch[0], "ss");
    }
    dayjs.updateLocale(this.getSupportedDayjsLocale((0,_locale_js__WEBPACK_IMPORTED_MODULE_6__.g)(this.effectiveLocale)), this.localeConfig);
    const dayjsParseResult = dayjs(localizedTimeString, ["LTS", "LT"]);
    if (dayjsParseResult.isValid()) {
      return {
        hour: dayjsParseResult.get("hour"),
        minute: dayjsParseResult.get("minute"),
        second: dayjsParseResult.get("second"),
        millisecond: dayjsParseResult.get("millisecond"),
      };
    }
    return {
      hour: null,
      minute: null,
      second: null,
      millisecond: null,
    };
  }
  getTimeStringFromParts(parts) {
    let timeString = "";
    if (!parts) {
      return timeString;
    }
    if (parts.hour !== null && parts.minute !== null) {
      timeString = `${(0,_time_picker_js__WEBPACK_IMPORTED_MODULE_8__.a)(parts.hour)}:${(0,_time_picker_js__WEBPACK_IMPORTED_MODULE_8__.a)(parts.minute)}`;
      if (this.shouldIncludeSeconds() && parts.second !== null) {
        timeString += `:${(0,_time_picker_js__WEBPACK_IMPORTED_MODULE_8__.a)(parts.second)}`;
        if (this.shouldIncludeFractionalSeconds() && parts.millisecond !== null) {
          const second = (parts.millisecond * 0.001).toFixed((0,_math_js__WEBPACK_IMPORTED_MODULE_10__.d)(this.step));
          timeString += `.${second.toString().replace("0.", "")}`;
        }
      }
    }
    return timeString;
  }
  getSupportedDayjsLocale(locale) {
    const dayjsLocale = locale.toLowerCase();
    if (dayjsLocale === "no") {
      return "nb";
    }
    if (dayjsLocale === "pt-pt") {
      return "pt";
    }
    return dayjsLocale;
  }
  async loadDateTimeLocaleData() {
    let supportedLocale = (0,_locale_js__WEBPACK_IMPORTED_MODULE_6__.g)(this.effectiveLocale).toLowerCase();
    supportedLocale = this.getSupportedDayjsLocale(supportedLocale);
    const { default: localeConfig } = await supportedDayjsLocaleToLocaleConfigImport.get(supportedLocale)();
    this.localeConfig = localeConfig;
    dayjs.locale(this.localeConfig, null, true);
    dayjs.updateLocale(supportedLocale, this.getExtendedLocaleConfig(supportedLocale));
  }
  getExtendedLocaleConfig(locale) {
    if (locale === "ar") {
      return {
        meridiem: (hour) => (hour > 12 ? "م" : "ص"),
        formats: {
          LT: "HH:mm A",
          LTS: "HH:mm:ss A",
          L: "DD/MM/YYYY",
          LL: "D MMMM YYYY",
          LLL: "D MMMM YYYY HH:mm A",
          LLLL: "dddd D MMMM YYYY HH:mm A",
        },
      };
    }
    if (locale === "en-au") {
      return {
        meridiem: (hour) => (hour > 12 ? "pm" : "am"),
      };
    }
    if (locale === "en-ca") {
      return {
        meridiem: (hour) => (hour > 12 ? "p.m." : "a.m."),
      };
    }
    if (locale === "el") {
      return {
        meridiem: (hour) => (hour > 12 ? "μ.μ." : "π.μ."),
      };
    }
    if (locale === "hi") {
      return {
        formats: {
          LT: "h:mm A",
          LTS: "h:mm:ss A",
          L: "DD/MM/YYYY",
          LL: "D MMMM YYYY",
          LLL: "D MMMM YYYY, h:mm A",
          LLLL: "dddd, D MMMM YYYY, h:mm A",
        },
        meridiem: (hour) => (hour > 12 ? "pm" : "am"),
      };
    }
    if (locale === "ko") {
      return {
        meridiem: (hour) => (hour > 12 ? "오후" : "오전"),
      };
    }
    if (locale === "zh-tw") {
      return {
        formats: {
          LT: "AHH:mm",
          LTS: "AHH:mm:ss",
        },
      };
    }
    if (locale === "zh-hk") {
      return {
        formats: {
          LT: "AHH:mm",
          LTS: "AHH:mm:ss",
        },
        meridiem: (hour) => (hour > 12 ? "下午" : "上午"),
      };
    }
  }
  onLabelClick() {
    this.setFocus();
  }
  shouldIncludeSeconds() {
    return this.step < 60;
  }
  shouldIncludeFractionalSeconds() {
    return (0,_math_js__WEBPACK_IMPORTED_MODULE_10__.d)(this.step) > 0;
  }
  //--------------------------------------------------------------------------
  //
  //  Lifecycle
  //
  //--------------------------------------------------------------------------
  connectedCallback() {
    (0,_interactive_js__WEBPACK_IMPORTED_MODULE_2__.c)(this);
    (0,_locale_js__WEBPACK_IMPORTED_MODULE_6__.c)(this);
    if ((0,_time_picker_js__WEBPACK_IMPORTED_MODULE_8__.i)(this.value)) {
      this.setValueDirectly(this.value);
    }
    else {
      this.value = undefined;
    }
    (0,_label2_js__WEBPACK_IMPORTED_MODULE_4__.c)(this);
    (0,_form_js__WEBPACK_IMPORTED_MODULE_0__.c)(this);
    (0,_t9n_js__WEBPACK_IMPORTED_MODULE_9__.c)(this);
  }
  async componentWillLoad() {
    (0,_loadable_js__WEBPACK_IMPORTED_MODULE_5__.a)(this);
    await Promise.all([(0,_t9n_js__WEBPACK_IMPORTED_MODULE_9__.s)(this), this.loadDateTimeLocaleData()]);
  }
  componentDidLoad() {
    (0,_loadable_js__WEBPACK_IMPORTED_MODULE_5__.s)(this);
    if ((0,_time_picker_js__WEBPACK_IMPORTED_MODULE_8__.i)(this.value)) {
      this.setInputValue((0,_time_picker_js__WEBPACK_IMPORTED_MODULE_8__.l)({
        value: this.value,
        locale: this.effectiveLocale,
        numberingSystem: this.numberingSystem,
        includeSeconds: this.shouldIncludeSeconds(),
        fractionalSecondDigits: (0,_math_js__WEBPACK_IMPORTED_MODULE_10__.d)(this.step),
      }));
    }
  }
  disconnectedCallback() {
    (0,_interactive_js__WEBPACK_IMPORTED_MODULE_2__.d)(this);
    (0,_label2_js__WEBPACK_IMPORTED_MODULE_4__.d)(this);
    (0,_form_js__WEBPACK_IMPORTED_MODULE_0__.d)(this);
    (0,_locale_js__WEBPACK_IMPORTED_MODULE_6__.d)(this);
    (0,_focusTrapComponent_js__WEBPACK_IMPORTED_MODULE_7__.d)(this);
    (0,_t9n_js__WEBPACK_IMPORTED_MODULE_9__.d)(this);
  }
  componentDidRender() {
    (0,_interactive_js__WEBPACK_IMPORTED_MODULE_2__.u)(this);
  }
  // --------------------------------------------------------------------------
  //
  //  Render Methods
  //
  // --------------------------------------------------------------------------
  render() {
    const { disabled, messages, readOnly, dialogId } = this;
    return ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_17__.h)(_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_17__.Host, { onBlur: this.hostBlurHandler, onKeyDown: this.keyDownHandler }, (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_17__.h)("div", { class: "input-wrapper", onClick: this.onInputWrapperClick }, (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_17__.h)("calcite-input", { "aria-autocomplete": "none", "aria-haspopup": "dialog", disabled: disabled, icon: "clock", id: this.referenceElementId, label: (0,_label2_js__WEBPACK_IMPORTED_MODULE_4__.g)(this), lang: this.effectiveLocale, onCalciteInputInput: this.calciteInternalInputInputHandler, onCalciteInternalInputFocus: this.calciteInternalInputFocusHandler, readOnly: readOnly, role: "combobox", scale: this.scale, step: this.step,
      // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)
      ref: this.setCalciteInputEl }), !this.readOnly && this.renderToggleIcon(this.open)), (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_17__.h)("calcite-popover", { focusTrapDisabled: true, id: dialogId, label: messages.chooseTime, lang: this.effectiveLocale, onCalcitePopoverClose: this.popoverCloseHandler, onCalcitePopoverOpen: this.popoverOpenHandler, open: this.open, overlayPositioning: this.overlayPositioning, placement: this.placement, referenceElement: this.referenceElementId, triggerDisabled: true,
      // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)
      ref: this.setCalcitePopoverEl }, (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_17__.h)("calcite-time-picker", { lang: this.effectiveLocale, messageOverrides: this.messageOverrides, numberingSystem: this.numberingSystem, onCalciteInternalTimePickerChange: this.timePickerChangeHandler, scale: this.scale, step: this.step, tabIndex: this.open ? undefined : -1, value: this.value,
      // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)
      ref: this.setCalciteTimePickerEl })), (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_17__.h)(_form_js__WEBPACK_IMPORTED_MODULE_0__.H, { component: this })));
  }
  renderToggleIcon(open) {
    return ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_17__.h)("span", { class: CSS.toggleIcon }, (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_17__.h)("calcite-icon", { icon: open ? "chevron-up" : "chevron-down", scale: "s" })));
  }
  static get delegatesFocus() { return true; }
  static get assetsDirs() { return ["assets"]; }
  get el() { return this; }
  static get watchers() { return {
    "open": ["openHandler"],
    "focusTrapDisabled": ["handleFocusTrapDisabled"],
    "disabled": ["handleDisabledAndReadOnlyChange"],
    "readOnly": ["handleDisabledAndReadOnlyChange"],
    "messageOverrides": ["onMessagesChange"],
    "numberingSystem": ["numberingSystemWatcher"],
    "step": ["stepWatcher"],
    "value": ["valueWatcher"],
    "effectiveLocale": ["effectiveLocaleWatcher"]
  }; }
  static get style() { return inputTimePickerCss; }
}, [17, "calcite-input-time-picker", {
    "open": [1540],
    "disabled": [516],
    "focusTrapDisabled": [516, "focus-trap-disabled"],
    "form": [513],
    "readOnly": [516, "read-only"],
    "messageOverrides": [1040],
    "messages": [1040],
    "name": [1],
    "numberingSystem": [1, "numbering-system"],
    "required": [516],
    "scale": [513],
    "overlayPositioning": [1, "overlay-positioning"],
    "placement": [513],
    "step": [2],
    "value": [1025],
    "defaultMessages": [32],
    "effectiveLocale": [32],
    "setFocus": [64],
    "reposition": [64]
  }]);
function defineCustomElement$1() {
  if (typeof customElements === "undefined") {
    return;
  }
  const components = ["calcite-input-time-picker", "calcite-action", "calcite-icon", "calcite-input", "calcite-loader", "calcite-popover", "calcite-progress", "calcite-time-picker"];
  components.forEach(tagName => { switch (tagName) {
    case "calcite-input-time-picker":
      if (!customElements.get(tagName)) {
        customElements.define(tagName, InputTimePicker);
      }
      break;
    case "calcite-action":
      if (!customElements.get(tagName)) {
        (0,_action_js__WEBPACK_IMPORTED_MODULE_11__.d)();
      }
      break;
    case "calcite-icon":
      if (!customElements.get(tagName)) {
        (0,_icon_js__WEBPACK_IMPORTED_MODULE_12__.d)();
      }
      break;
    case "calcite-input":
      if (!customElements.get(tagName)) {
        (0,_input_js__WEBPACK_IMPORTED_MODULE_13__.d)();
      }
      break;
    case "calcite-loader":
      if (!customElements.get(tagName)) {
        (0,_loader_js__WEBPACK_IMPORTED_MODULE_14__.d)();
      }
      break;
    case "calcite-popover":
      if (!customElements.get(tagName)) {
        (0,_popover_js__WEBPACK_IMPORTED_MODULE_15__.d)();
      }
      break;
    case "calcite-progress":
      if (!customElements.get(tagName)) {
        (0,_progress_js__WEBPACK_IMPORTED_MODULE_16__.d)();
      }
      break;
    case "calcite-time-picker":
      if (!customElements.get(tagName)) {
        (0,_time_picker_js__WEBPACK_IMPORTED_MODULE_8__.d)();
      }
      break;
  } });
}
defineCustomElement$1();

const CalciteInputTimePicker = InputTimePicker;
const defineCustomElement = defineCustomElement$1;




/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfZXNyaV9jYWxjaXRlLWNvbXBvbmVudHNfZGlzdF9jb21wb25lbnRzX2NhbGNpdGUtaW5wdXQtdGltZS1waWNrZXJfanMuYnVuZGxlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDK0c7QUFDRjtBQUN2RTtBQUM2RTtBQUN4RTtBQUM4QztBQUNxQjtBQUNxQjtBQUNqQjtBQUN5RDtBQUM5RTtBQUM5QztBQUNVO0FBQ0Y7QUFDQztBQUNDO0FBQ0M7QUFDQzs7QUFFM0Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrRUFBa0U7O0FBRWxFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEM7O0FBRTFDLHdCQUF3QixFQUFFLFVBQVUsSUFBSSxXQUFXLElBQUksWUFBWSxJQUFJLFFBQVEsSUFBSSxRQUFRLElBQUk7QUFDL0Ysa0NBQWtDLElBQUksR0FBRyxJQUFJLEdBQUcsSUFBSSxHQUFHLElBQUksR0FBRyxJQUFJLEdBQUcsSUFBSSxPQUFPLElBQUksR0FBRyxJQUFJLEdBQUcsSUFBSTs7QUFFbEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxjQUFjOztBQUVkLGFBQWE7O0FBRWI7O0FBRUE7QUFDQTtBQUNBLEdBQUc7OztBQUdIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7OztBQUdKO0FBQ0E7QUFDQSx3QkFBd0I7O0FBRXhCLHlCQUF5QjtBQUN6Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlEOztBQUVqRCxHQUFHO0FBQ0g7O0FBRUEsZUFBZTs7QUFFZjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDOztBQUUzQyx3Q0FBd0M7O0FBRXhDOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEseUJBQXlCO0FBQ3pCOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsMENBQTBDO0FBQzFDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07O0FBRU47QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLDZCQUE2Qjs7QUFFN0I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLHdDQUF3QyxtTEFBbUw7O0FBRTNOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUssR0FBRztBQUNSOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7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O0FBQ2hDLGVBQWUsOE9BQWlCO0FBQ2hDLGVBQWUsOE9BQWlCO0FBQ2hDLGVBQWUsOE9BQWlCO0FBQ2hDLGVBQWUsOE9BQWlCO0FBQ2hDLGVBQWUsOE9BQWlCO0FBQ2hDLGVBQWUsOE9BQWlCO0FBQ2hDLGtCQUFrQix1UEFBb0I7QUFDdEMsa0JBQWtCLHVQQUFvQjtBQUN0QyxlQUFlLDhPQUFpQjtBQUNoQyxvREFBb0QsY0FBYztBQUNsRSxrQkFBa0IsdVBBQW9CO0FBQ3RDLGtCQUFrQix1UEFBb0I7QUFDdEMsa0JBQWtCLHVQQUFvQjtBQUN0QyxlQUFlLDhPQUFpQjtBQUNoQyxrQkFBa0IsdVBBQW9CO0FBQ3RDLGVBQWUsOE9BQWlCO0FBQ2hDLGVBQWUsOE9BQWlCO0FBQ2hDLGVBQWUsOE9BQWlCO0FBQ2hDLGtCQUFrQix1UEFBb0I7QUFDdEMsZUFBZSw4T0FBaUI7QUFDaEMsZUFBZSw4T0FBaUI7QUFDaEMsZUFBZSw4T0FBaUI7QUFDaEMsZUFBZSw4T0FBaUI7QUFDaEMsZUFBZSw4T0FBaUI7QUFDaEMsZUFBZSw4T0FBaUI7QUFDaEMsa0JBQWtCLHVQQUFvQjtBQUN0QyxlQUFlLDhPQUFpQjtBQUNoQyxlQUFlLDhPQUFpQjtBQUNoQyxlQUFlLDhPQUFpQjtBQUNoQyxlQUFlLDhPQUFpQjtBQUNoQyxlQUFlLDhPQUFpQjtBQUNoQyxlQUFlLDhPQUFpQjtBQUNoQyxlQUFlLDhPQUFpQjtBQUNoQyxlQUFlLDhPQUFpQjtBQUNoQyxlQUFlLDhPQUFpQjtBQUNoQyxrQkFBa0IsdVBBQW9CO0FBQ3RDLGVBQWUsOE9BQWlCO0FBQ2hDLGVBQWUsOE9BQWlCO0FBQ2hDLGVBQWUsOE9BQWlCO0FBQ2hDLGVBQWUsOE9BQWlCO0FBQ2hDLGVBQWUsOE9BQWlCO0FBQ2hDLGVBQWUsOE9BQWlCO0FBQ2hDLGVBQWUsOE9BQWlCO0FBQ2hDLGVBQWUsOE9BQWlCO0FBQ2hDLGVBQWUsOE9BQWlCO0FBQ2hDLGVBQWUsOE9BQWlCO0FBQ2hDLGtCQUFrQix1UEFBb0I7QUFDdEMsa0JBQWtCLHVQQUFvQjtBQUN0QyxrQkFBa0Is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QUNBO0FBQ0EsUUFBUSwrQ0FBcUI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLGdEQUFxQjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsa0RBQXFCO0FBQzdCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBOztBQUVtRSIsInNvdXJjZXMiOlsid2VicGFjazovL3N5bnZpZXcvLi9ub2RlX21vZHVsZXMvQGVzcmkvY2FsY2l0ZS1jb21wb25lbnRzL2Rpc3QvY29tcG9uZW50cy9jYWxjaXRlLWlucHV0LXRpbWUtcGlja2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWRlc2lnbi1zeXN0ZW0vYmxvYi9tYWluL0xJQ0VOU0UubWQgZm9yIGRldGFpbHMuXG4gKiB2MS43LjBcbiAqL1xuaW1wb3J0IHsgcHJveHlDdXN0b21FbGVtZW50LCBIVE1MRWxlbWVudCwgY3JlYXRlRXZlbnQsIGgsIEhvc3QgfSBmcm9tICdAc3RlbmNpbC9jb3JlL2ludGVybmFsL2NsaWVudC9pbmRleC5qcyc7XG5pbXBvcnQgeyBzIGFzIHN1Ym1pdEZvcm0sIGMgYXMgY29ubmVjdEZvcm0sIGQgYXMgZGlzY29ubmVjdEZvcm0sIEggYXMgSGlkZGVuRm9ybUlucHV0U2xvdCB9IGZyb20gJy4vZm9ybS5qcyc7XG5pbXBvcnQgeyBnIGFzIGd1aWQgfSBmcm9tICcuL2d1aWQuanMnO1xuaW1wb3J0IHsgYyBhcyBjb25uZWN0SW50ZXJhY3RpdmUsIGQgYXMgZGlzY29ubmVjdEludGVyYWN0aXZlLCB1IGFzIHVwZGF0ZUhvc3RJbnRlcmFjdGlvbiB9IGZyb20gJy4vaW50ZXJhY3RpdmUuanMnO1xuaW1wb3J0IHsgbiBhcyBudW1iZXJLZXlzIH0gZnJvbSAnLi9rZXkuanMnO1xuaW1wb3J0IHsgYyBhcyBjb25uZWN0TGFiZWwsIGQgYXMgZGlzY29ubmVjdExhYmVsLCBnIGFzIGdldExhYmVsVGV4dCB9IGZyb20gJy4vbGFiZWwyLmpzJztcbmltcG9ydCB7IGMgYXMgY29tcG9uZW50Rm9jdXNhYmxlLCBhIGFzIHNldFVwTG9hZGFibGVDb21wb25lbnQsIHMgYXMgc2V0Q29tcG9uZW50TG9hZGVkIH0gZnJvbSAnLi9sb2FkYWJsZS5qcyc7XG5pbXBvcnQgeyBuIGFzIG51bWJlclN0cmluZ0Zvcm1hdHRlciwgZyBhcyBnZXRTdXBwb3J0ZWRMb2NhbGUsIGMgYXMgY29ubmVjdExvY2FsaXplZCwgZCBhcyBkaXNjb25uZWN0TG9jYWxpemVkIH0gZnJvbSAnLi9sb2NhbGUuanMnO1xuaW1wb3J0IHsgZCBhcyBkZWFjdGl2YXRlRm9jdXNUcmFwLCBhIGFzIGFjdGl2YXRlRm9jdXNUcmFwLCBjIGFzIGNvbm5lY3RGb2N1c1RyYXAgfSBmcm9tICcuL2ZvY3VzVHJhcENvbXBvbmVudC5qcyc7XG5pbXBvcnQgeyBsIGFzIGxvY2FsaXplVGltZVN0cmluZywgdCBhcyB0b0lTT1RpbWVTdHJpbmcsIGkgYXMgaXNWYWxpZFRpbWUsIGYgYXMgZm9ybWF0VGltZVN0cmluZywgYSBhcyBmb3JtYXRUaW1lUGFydCwgZCBhcyBkZWZpbmVDdXN0b21FbGVtZW50JDIgfSBmcm9tICcuL3RpbWUtcGlja2VyLmpzJztcbmltcG9ydCB7IGMgYXMgY29ubmVjdE1lc3NhZ2VzLCBzIGFzIHNldFVwTWVzc2FnZXMsIGQgYXMgZGlzY29ubmVjdE1lc3NhZ2VzIH0gZnJvbSAnLi90OW4uanMnO1xuaW1wb3J0IHsgZCBhcyBkZWNpbWFsUGxhY2VzIH0gZnJvbSAnLi9tYXRoLmpzJztcbmltcG9ydCB7IGQgYXMgZGVmaW5lQ3VzdG9tRWxlbWVudCQ4IH0gZnJvbSAnLi9hY3Rpb24uanMnO1xuaW1wb3J0IHsgZCBhcyBkZWZpbmVDdXN0b21FbGVtZW50JDcgfSBmcm9tICcuL2ljb24uanMnO1xuaW1wb3J0IHsgZCBhcyBkZWZpbmVDdXN0b21FbGVtZW50JDYgfSBmcm9tICcuL2lucHV0LmpzJztcbmltcG9ydCB7IGQgYXMgZGVmaW5lQ3VzdG9tRWxlbWVudCQ1IH0gZnJvbSAnLi9sb2FkZXIuanMnO1xuaW1wb3J0IHsgZCBhcyBkZWZpbmVDdXN0b21FbGVtZW50JDQgfSBmcm9tICcuL3BvcG92ZXIuanMnO1xuaW1wb3J0IHsgZCBhcyBkZWZpbmVDdXN0b21FbGVtZW50JDMgfSBmcm9tICcuL3Byb2dyZXNzLmpzJztcblxuY29uc3QgQ1NTID0ge1xuICB0b2dnbGVJY29uOiBcInRvZ2dsZS1pY29uXCIsXG59O1xuXG52YXIgU0VDT05EU19BX01JTlVURSA9IDYwO1xudmFyIFNFQ09ORFNfQV9IT1VSID0gU0VDT05EU19BX01JTlVURSAqIDYwO1xudmFyIFNFQ09ORFNfQV9EQVkgPSBTRUNPTkRTX0FfSE9VUiAqIDI0O1xudmFyIFNFQ09ORFNfQV9XRUVLID0gU0VDT05EU19BX0RBWSAqIDc7XG52YXIgTUlMTElTRUNPTkRTX0FfU0VDT05EID0gMWUzO1xudmFyIE1JTExJU0VDT05EU19BX01JTlVURSA9IFNFQ09ORFNfQV9NSU5VVEUgKiBNSUxMSVNFQ09ORFNfQV9TRUNPTkQ7XG52YXIgTUlMTElTRUNPTkRTX0FfSE9VUiA9IFNFQ09ORFNfQV9IT1VSICogTUlMTElTRUNPTkRTX0FfU0VDT05EO1xudmFyIE1JTExJU0VDT05EU19BX0RBWSA9IFNFQ09ORFNfQV9EQVkgKiBNSUxMSVNFQ09ORFNfQV9TRUNPTkQ7XG52YXIgTUlMTElTRUNPTkRTX0FfV0VFSyA9IFNFQ09ORFNfQV9XRUVLICogTUlMTElTRUNPTkRTX0FfU0VDT05EOyAvLyBFbmdsaXNoIGxvY2FsZXNcblxudmFyIE1TID0gJ21pbGxpc2Vjb25kJztcbnZhciBTID0gJ3NlY29uZCc7XG52YXIgTUlOID0gJ21pbnV0ZSc7XG52YXIgSCA9ICdob3VyJztcbnZhciBEID0gJ2RheSc7XG52YXIgVyA9ICd3ZWVrJztcbnZhciBNID0gJ21vbnRoJztcbnZhciBRID0gJ3F1YXJ0ZXInO1xudmFyIFkgPSAneWVhcic7XG52YXIgREFURSA9ICdkYXRlJztcbnZhciBGT1JNQVRfREVGQVVMVCA9ICdZWVlZLU1NLUREVEhIOm1tOnNzWic7XG52YXIgSU5WQUxJRF9EQVRFX1NUUklORyA9ICdJbnZhbGlkIERhdGUnOyAvLyByZWdleFxuXG52YXIgUkVHRVhfUEFSU0UgPSAvXihcXGR7NH0pWy0vXT8oXFxkezEsMn0pP1stL10/KFxcZHswLDJ9KVtUdFxcc10qKFxcZHsxLDJ9KT86PyhcXGR7MSwyfSk/Oj8oXFxkezEsMn0pP1suOl0/KFxcZCspPyQvO1xudmFyIFJFR0VYX0ZPUk1BVCA9IC9cXFsoW15cXF1dKyldfFl7MSw0fXxNezEsNH18RHsxLDJ9fGR7MSw0fXxIezEsMn18aHsxLDJ9fGF8QXxtezEsMn18c3sxLDJ9fFp7MSwyfXxTU1MvZztcblxuLy8gRW5nbGlzaCBbZW5dXG4vLyBXZSBkb24ndCBuZWVkIHdlZWtkYXlzU2hvcnQsIHdlZWtkYXlzTWluLCBtb250aHNTaG9ydCBpbiBlbi5qcyBsb2NhbGVcbmNvbnN0IGVuID0ge1xuICBuYW1lOiAnZW4nLFxuICB3ZWVrZGF5czogJ1N1bmRheV9Nb25kYXlfVHVlc2RheV9XZWRuZXNkYXlfVGh1cnNkYXlfRnJpZGF5X1NhdHVyZGF5Jy5zcGxpdCgnXycpLFxuICBtb250aHM6ICdKYW51YXJ5X0ZlYnJ1YXJ5X01hcmNoX0FwcmlsX01heV9KdW5lX0p1bHlfQXVndXN0X1NlcHRlbWJlcl9PY3RvYmVyX05vdmVtYmVyX0RlY2VtYmVyJy5zcGxpdCgnXycpLFxuICBvcmRpbmFsOiBmdW5jdGlvbiBvcmRpbmFsKG4pIHtcbiAgICB2YXIgcyA9IFsndGgnLCAnc3QnLCAnbmQnLCAncmQnXTtcbiAgICB2YXIgdiA9IG4gJSAxMDA7XG4gICAgcmV0dXJuIFwiW1wiICsgbiArIChzWyh2IC0gMjApICUgMTBdIHx8IHNbdl0gfHwgc1swXSkgKyBcIl1cIjtcbiAgfVxufTtcblxuY29uc3QgZW4kMSA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHtcbiAgX19wcm90b19fOiBudWxsLFxuICAnZGVmYXVsdCc6IGVuXG59KTtcblxudmFyIHBhZFN0YXJ0ID0gZnVuY3Rpb24gcGFkU3RhcnQoc3RyaW5nLCBsZW5ndGgsIHBhZCkge1xuICB2YXIgcyA9IFN0cmluZyhzdHJpbmcpO1xuICBpZiAoIXMgfHwgcy5sZW5ndGggPj0gbGVuZ3RoKSByZXR1cm4gc3RyaW5nO1xuICByZXR1cm4gXCJcIiArIEFycmF5KGxlbmd0aCArIDEgLSBzLmxlbmd0aCkuam9pbihwYWQpICsgc3RyaW5nO1xufTtcblxudmFyIHBhZFpvbmVTdHIgPSBmdW5jdGlvbiBwYWRab25lU3RyKGluc3RhbmNlKSB7XG4gIHZhciBuZWdNaW51dGVzID0gLWluc3RhbmNlLnV0Y09mZnNldCgpO1xuICB2YXIgbWludXRlcyA9IE1hdGguYWJzKG5lZ01pbnV0ZXMpO1xuICB2YXIgaG91ck9mZnNldCA9IE1hdGguZmxvb3IobWludXRlcyAvIDYwKTtcbiAgdmFyIG1pbnV0ZU9mZnNldCA9IG1pbnV0ZXMgJSA2MDtcbiAgcmV0dXJuIFwiXCIgKyAobmVnTWludXRlcyA8PSAwID8gJysnIDogJy0nKSArIHBhZFN0YXJ0KGhvdXJPZmZzZXQsIDIsICcwJykgKyBcIjpcIiArIHBhZFN0YXJ0KG1pbnV0ZU9mZnNldCwgMiwgJzAnKTtcbn07XG5cbnZhciBtb250aERpZmYgPSBmdW5jdGlvbiBtb250aERpZmYoYSwgYikge1xuICAvLyBmdW5jdGlvbiBmcm9tIG1vbWVudC5qcyBpbiBvcmRlciB0byBrZWVwIHRoZSBzYW1lIHJlc3VsdFxuICBpZiAoYS5kYXRlKCkgPCBiLmRhdGUoKSkgcmV0dXJuIC1tb250aERpZmYoYiwgYSk7XG4gIHZhciB3aG9sZU1vbnRoRGlmZiA9IChiLnllYXIoKSAtIGEueWVhcigpKSAqIDEyICsgKGIubW9udGgoKSAtIGEubW9udGgoKSk7XG4gIHZhciBhbmNob3IgPSBhLmNsb25lKCkuYWRkKHdob2xlTW9udGhEaWZmLCBNKTtcbiAgdmFyIGMgPSBiIC0gYW5jaG9yIDwgMDtcbiAgdmFyIGFuY2hvcjIgPSBhLmNsb25lKCkuYWRkKHdob2xlTW9udGhEaWZmICsgKGMgPyAtMSA6IDEpLCBNKTtcbiAgcmV0dXJuICsoLSh3aG9sZU1vbnRoRGlmZiArIChiIC0gYW5jaG9yKSAvIChjID8gYW5jaG9yIC0gYW5jaG9yMiA6IGFuY2hvcjIgLSBhbmNob3IpKSB8fCAwKTtcbn07XG5cbnZhciBhYnNGbG9vciA9IGZ1bmN0aW9uIGFic0Zsb29yKG4pIHtcbiAgcmV0dXJuIG4gPCAwID8gTWF0aC5jZWlsKG4pIHx8IDAgOiBNYXRoLmZsb29yKG4pO1xufTtcblxudmFyIHByZXR0eVVuaXQgPSBmdW5jdGlvbiBwcmV0dHlVbml0KHUpIHtcbiAgdmFyIHNwZWNpYWwgPSB7XG4gICAgTTogTSxcbiAgICB5OiBZLFxuICAgIHc6IFcsXG4gICAgZDogRCxcbiAgICBEOiBEQVRFLFxuICAgIGg6IEgsXG4gICAgbTogTUlOLFxuICAgIHM6IFMsXG4gICAgbXM6IE1TLFxuICAgIFE6IFFcbiAgfTtcbiAgcmV0dXJuIHNwZWNpYWxbdV0gfHwgU3RyaW5nKHUgfHwgJycpLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvcyQvLCAnJyk7XG59O1xuXG52YXIgaXNVbmRlZmluZWQgPSBmdW5jdGlvbiBpc1VuZGVmaW5lZChzKSB7XG4gIHJldHVybiBzID09PSB1bmRlZmluZWQ7XG59O1xuXG5jb25zdCBVID0ge1xuICBzOiBwYWRTdGFydCxcbiAgejogcGFkWm9uZVN0cixcbiAgbTogbW9udGhEaWZmLFxuICBhOiBhYnNGbG9vcixcbiAgcDogcHJldHR5VW5pdCxcbiAgdTogaXNVbmRlZmluZWRcbn07XG5cbnZhciBMID0gJ2VuJzsgLy8gZ2xvYmFsIGxvY2FsZVxuXG52YXIgTHMgPSB7fTsgLy8gZ2xvYmFsIGxvYWRlZCBsb2NhbGVcblxuTHNbTF0gPSBlbjtcblxudmFyIGlzRGF5anMgPSBmdW5jdGlvbiBpc0RheWpzKGQpIHtcbiAgcmV0dXJuIGQgaW5zdGFuY2VvZiBEYXlqcztcbn07IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdXNlLWJlZm9yZS1kZWZpbmVcblxuXG52YXIgcGFyc2VMb2NhbGUgPSBmdW5jdGlvbiBwYXJzZUxvY2FsZShwcmVzZXQsIG9iamVjdCwgaXNMb2NhbCkge1xuICB2YXIgbDtcbiAgaWYgKCFwcmVzZXQpIHJldHVybiBMO1xuXG4gIGlmICh0eXBlb2YgcHJlc2V0ID09PSAnc3RyaW5nJykge1xuICAgIHZhciBwcmVzZXRMb3dlciA9IHByZXNldC50b0xvd2VyQ2FzZSgpO1xuXG4gICAgaWYgKExzW3ByZXNldExvd2VyXSkge1xuICAgICAgbCA9IHByZXNldExvd2VyO1xuICAgIH1cblxuICAgIGlmIChvYmplY3QpIHtcbiAgICAgIExzW3ByZXNldExvd2VyXSA9IG9iamVjdDtcbiAgICAgIGwgPSBwcmVzZXRMb3dlcjtcbiAgICB9XG5cbiAgICB2YXIgcHJlc2V0U3BsaXQgPSBwcmVzZXQuc3BsaXQoJy0nKTtcblxuICAgIGlmICghbCAmJiBwcmVzZXRTcGxpdC5sZW5ndGggPiAxKSB7XG4gICAgICByZXR1cm4gcGFyc2VMb2NhbGUocHJlc2V0U3BsaXRbMF0pO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB2YXIgbmFtZSA9IHByZXNldC5uYW1lO1xuICAgIExzW25hbWVdID0gcHJlc2V0O1xuICAgIGwgPSBuYW1lO1xuICB9XG5cbiAgaWYgKCFpc0xvY2FsICYmIGwpIEwgPSBsO1xuICByZXR1cm4gbCB8fCAhaXNMb2NhbCAmJiBMO1xufTtcblxudmFyIGRheWpzID0gZnVuY3Rpb24gZGF5anMoZGF0ZSwgYykge1xuICBpZiAoaXNEYXlqcyhkYXRlKSkge1xuICAgIHJldHVybiBkYXRlLmNsb25lKCk7XG4gIH0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLW5lc3RlZC10ZXJuYXJ5XG5cblxuICB2YXIgY2ZnID0gdHlwZW9mIGMgPT09ICdvYmplY3QnID8gYyA6IHt9O1xuICBjZmcuZGF0ZSA9IGRhdGU7XG4gIGNmZy5hcmdzID0gYXJndW1lbnRzOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIHByZWZlci1yZXN0LXBhcmFtc1xuXG4gIHJldHVybiBuZXcgRGF5anMoY2ZnKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11c2UtYmVmb3JlLWRlZmluZVxufTtcblxudmFyIHdyYXBwZXIgPSBmdW5jdGlvbiB3cmFwcGVyKGRhdGUsIGluc3RhbmNlKSB7XG4gIHJldHVybiBkYXlqcyhkYXRlLCB7XG4gICAgbG9jYWxlOiBpbnN0YW5jZS4kTCxcbiAgICB1dGM6IGluc3RhbmNlLiR1LFxuICAgIHg6IGluc3RhbmNlLiR4LFxuICAgICRvZmZzZXQ6IGluc3RhbmNlLiRvZmZzZXQgLy8gdG9kbzogcmVmYWN0b3I7IGRvIG5vdCB1c2UgdGhpcy4kb2Zmc2V0IGluIHlvdSBjb2RlXG5cbiAgfSk7XG59O1xuXG52YXIgVXRpbHMgPSBVOyAvLyBmb3IgcGx1Z2luIHVzZVxuXG5VdGlscy5sID0gcGFyc2VMb2NhbGU7XG5VdGlscy5pID0gaXNEYXlqcztcblV0aWxzLncgPSB3cmFwcGVyO1xuXG52YXIgcGFyc2VEYXRlID0gZnVuY3Rpb24gcGFyc2VEYXRlKGNmZykge1xuICB2YXIgZGF0ZSA9IGNmZy5kYXRlLFxuICAgICAgdXRjID0gY2ZnLnV0YztcbiAgaWYgKGRhdGUgPT09IG51bGwpIHJldHVybiBuZXcgRGF0ZShOYU4pOyAvLyBudWxsIGlzIGludmFsaWRcblxuICBpZiAoVXRpbHMudShkYXRlKSkgcmV0dXJuIG5ldyBEYXRlKCk7IC8vIHRvZGF5XG5cbiAgaWYgKGRhdGUgaW5zdGFuY2VvZiBEYXRlKSByZXR1cm4gbmV3IERhdGUoZGF0ZSk7XG5cbiAgaWYgKHR5cGVvZiBkYXRlID09PSAnc3RyaW5nJyAmJiAhL1okL2kudGVzdChkYXRlKSkge1xuICAgIHZhciBkID0gZGF0ZS5tYXRjaChSRUdFWF9QQVJTRSk7XG5cbiAgICBpZiAoZCkge1xuICAgICAgdmFyIG0gPSBkWzJdIC0gMSB8fCAwO1xuICAgICAgdmFyIG1zID0gKGRbN10gfHwgJzAnKS5zdWJzdHJpbmcoMCwgMyk7XG5cbiAgICAgIGlmICh1dGMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKERhdGUuVVRDKGRbMV0sIG0sIGRbM10gfHwgMSwgZFs0XSB8fCAwLCBkWzVdIHx8IDAsIGRbNl0gfHwgMCwgbXMpKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5ldyBEYXRlKGRbMV0sIG0sIGRbM10gfHwgMSwgZFs0XSB8fCAwLCBkWzVdIHx8IDAsIGRbNl0gfHwgMCwgbXMpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXcgRGF0ZShkYXRlKTsgLy8gZXZlcnl0aGluZyBlbHNlXG59O1xuXG52YXIgRGF5anMgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBEYXlqcyhjZmcpIHtcbiAgICB0aGlzLiRMID0gcGFyc2VMb2NhbGUoY2ZnLmxvY2FsZSwgbnVsbCwgdHJ1ZSk7XG4gICAgdGhpcy5wYXJzZShjZmcpOyAvLyBmb3IgcGx1Z2luXG4gIH1cblxuICB2YXIgX3Byb3RvID0gRGF5anMucHJvdG90eXBlO1xuXG4gIF9wcm90by5wYXJzZSA9IGZ1bmN0aW9uIHBhcnNlKGNmZykge1xuICAgIHRoaXMuJGQgPSBwYXJzZURhdGUoY2ZnKTtcbiAgICB0aGlzLiR4ID0gY2ZnLnggfHwge307XG4gICAgdGhpcy5pbml0KCk7XG4gIH07XG5cbiAgX3Byb3RvLmluaXQgPSBmdW5jdGlvbiBpbml0KCkge1xuICAgIHZhciAkZCA9IHRoaXMuJGQ7XG4gICAgdGhpcy4keSA9ICRkLmdldEZ1bGxZZWFyKCk7XG4gICAgdGhpcy4kTSA9ICRkLmdldE1vbnRoKCk7XG4gICAgdGhpcy4kRCA9ICRkLmdldERhdGUoKTtcbiAgICB0aGlzLiRXID0gJGQuZ2V0RGF5KCk7XG4gICAgdGhpcy4kSCA9ICRkLmdldEhvdXJzKCk7XG4gICAgdGhpcy4kbSA9ICRkLmdldE1pbnV0ZXMoKTtcbiAgICB0aGlzLiRzID0gJGQuZ2V0U2Vjb25kcygpO1xuICAgIHRoaXMuJG1zID0gJGQuZ2V0TWlsbGlzZWNvbmRzKCk7XG4gIH0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNsYXNzLW1ldGhvZHMtdXNlLXRoaXNcbiAgO1xuXG4gIF9wcm90by4kdXRpbHMgPSBmdW5jdGlvbiAkdXRpbHMoKSB7XG4gICAgcmV0dXJuIFV0aWxzO1xuICB9O1xuXG4gIF9wcm90by5pc1ZhbGlkID0gZnVuY3Rpb24gaXNWYWxpZCgpIHtcbiAgICByZXR1cm4gISh0aGlzLiRkLnRvU3RyaW5nKCkgPT09IElOVkFMSURfREFURV9TVFJJTkcpO1xuICB9O1xuXG4gIF9wcm90by5pc1NhbWUgPSBmdW5jdGlvbiBpc1NhbWUodGhhdCwgdW5pdHMpIHtcbiAgICB2YXIgb3RoZXIgPSBkYXlqcyh0aGF0KTtcbiAgICByZXR1cm4gdGhpcy5zdGFydE9mKHVuaXRzKSA8PSBvdGhlciAmJiBvdGhlciA8PSB0aGlzLmVuZE9mKHVuaXRzKTtcbiAgfTtcblxuICBfcHJvdG8uaXNBZnRlciA9IGZ1bmN0aW9uIGlzQWZ0ZXIodGhhdCwgdW5pdHMpIHtcbiAgICByZXR1cm4gZGF5anModGhhdCkgPCB0aGlzLnN0YXJ0T2YodW5pdHMpO1xuICB9O1xuXG4gIF9wcm90by5pc0JlZm9yZSA9IGZ1bmN0aW9uIGlzQmVmb3JlKHRoYXQsIHVuaXRzKSB7XG4gICAgcmV0dXJuIHRoaXMuZW5kT2YodW5pdHMpIDwgZGF5anModGhhdCk7XG4gIH07XG5cbiAgX3Byb3RvLiRnID0gZnVuY3Rpb24gJGcoaW5wdXQsIGdldCwgc2V0KSB7XG4gICAgaWYgKFV0aWxzLnUoaW5wdXQpKSByZXR1cm4gdGhpc1tnZXRdO1xuICAgIHJldHVybiB0aGlzLnNldChzZXQsIGlucHV0KTtcbiAgfTtcblxuICBfcHJvdG8udW5peCA9IGZ1bmN0aW9uIHVuaXgoKSB7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IodGhpcy52YWx1ZU9mKCkgLyAxMDAwKTtcbiAgfTtcblxuICBfcHJvdG8udmFsdWVPZiA9IGZ1bmN0aW9uIHZhbHVlT2YoKSB7XG4gICAgLy8gdGltZXpvbmUoaG91cikgKiA2MCAqIDYwICogMTAwMCA9PiBtc1xuICAgIHJldHVybiB0aGlzLiRkLmdldFRpbWUoKTtcbiAgfTtcblxuICBfcHJvdG8uc3RhcnRPZiA9IGZ1bmN0aW9uIHN0YXJ0T2YodW5pdHMsIF9zdGFydE9mKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIC8vIHN0YXJ0T2YgLT4gZW5kT2ZcbiAgICB2YXIgaXNTdGFydE9mID0gIVV0aWxzLnUoX3N0YXJ0T2YpID8gX3N0YXJ0T2YgOiB0cnVlO1xuICAgIHZhciB1bml0ID0gVXRpbHMucCh1bml0cyk7XG5cbiAgICB2YXIgaW5zdGFuY2VGYWN0b3J5ID0gZnVuY3Rpb24gaW5zdGFuY2VGYWN0b3J5KGQsIG0pIHtcbiAgICAgIHZhciBpbnMgPSBVdGlscy53KF90aGlzLiR1ID8gRGF0ZS5VVEMoX3RoaXMuJHksIG0sIGQpIDogbmV3IERhdGUoX3RoaXMuJHksIG0sIGQpLCBfdGhpcyk7XG4gICAgICByZXR1cm4gaXNTdGFydE9mID8gaW5zIDogaW5zLmVuZE9mKEQpO1xuICAgIH07XG5cbiAgICB2YXIgaW5zdGFuY2VGYWN0b3J5U2V0ID0gZnVuY3Rpb24gaW5zdGFuY2VGYWN0b3J5U2V0KG1ldGhvZCwgc2xpY2UpIHtcbiAgICAgIHZhciBhcmd1bWVudFN0YXJ0ID0gWzAsIDAsIDAsIDBdO1xuICAgICAgdmFyIGFyZ3VtZW50RW5kID0gWzIzLCA1OSwgNTksIDk5OV07XG4gICAgICByZXR1cm4gVXRpbHMudyhfdGhpcy50b0RhdGUoKVttZXRob2RdLmFwcGx5KCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIHByZWZlci1zcHJlYWRcbiAgICAgIF90aGlzLnRvRGF0ZSgncycpLCAoaXNTdGFydE9mID8gYXJndW1lbnRTdGFydCA6IGFyZ3VtZW50RW5kKS5zbGljZShzbGljZSkpLCBfdGhpcyk7XG4gICAgfTtcblxuICAgIHZhciAkVyA9IHRoaXMuJFcsXG4gICAgICAgICRNID0gdGhpcy4kTSxcbiAgICAgICAgJEQgPSB0aGlzLiREO1xuICAgIHZhciB1dGNQYWQgPSBcInNldFwiICsgKHRoaXMuJHUgPyAnVVRDJyA6ICcnKTtcblxuICAgIHN3aXRjaCAodW5pdCkge1xuICAgICAgY2FzZSBZOlxuICAgICAgICByZXR1cm4gaXNTdGFydE9mID8gaW5zdGFuY2VGYWN0b3J5KDEsIDApIDogaW5zdGFuY2VGYWN0b3J5KDMxLCAxMSk7XG5cbiAgICAgIGNhc2UgTTpcbiAgICAgICAgcmV0dXJuIGlzU3RhcnRPZiA/IGluc3RhbmNlRmFjdG9yeSgxLCAkTSkgOiBpbnN0YW5jZUZhY3RvcnkoMCwgJE0gKyAxKTtcblxuICAgICAgY2FzZSBXOlxuICAgICAgICB7XG4gICAgICAgICAgdmFyIHdlZWtTdGFydCA9IHRoaXMuJGxvY2FsZSgpLndlZWtTdGFydCB8fCAwO1xuICAgICAgICAgIHZhciBnYXAgPSAoJFcgPCB3ZWVrU3RhcnQgPyAkVyArIDcgOiAkVykgLSB3ZWVrU3RhcnQ7XG4gICAgICAgICAgcmV0dXJuIGluc3RhbmNlRmFjdG9yeShpc1N0YXJ0T2YgPyAkRCAtIGdhcCA6ICREICsgKDYgLSBnYXApLCAkTSk7XG4gICAgICAgIH1cblxuICAgICAgY2FzZSBEOlxuICAgICAgY2FzZSBEQVRFOlxuICAgICAgICByZXR1cm4gaW5zdGFuY2VGYWN0b3J5U2V0KHV0Y1BhZCArIFwiSG91cnNcIiwgMCk7XG5cbiAgICAgIGNhc2UgSDpcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlRmFjdG9yeVNldCh1dGNQYWQgKyBcIk1pbnV0ZXNcIiwgMSk7XG5cbiAgICAgIGNhc2UgTUlOOlxuICAgICAgICByZXR1cm4gaW5zdGFuY2VGYWN0b3J5U2V0KHV0Y1BhZCArIFwiU2Vjb25kc1wiLCAyKTtcblxuICAgICAgY2FzZSBTOlxuICAgICAgICByZXR1cm4gaW5zdGFuY2VGYWN0b3J5U2V0KHV0Y1BhZCArIFwiTWlsbGlzZWNvbmRzXCIsIDMpO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gdGhpcy5jbG9uZSgpO1xuICAgIH1cbiAgfTtcblxuICBfcHJvdG8uZW5kT2YgPSBmdW5jdGlvbiBlbmRPZihhcmcpIHtcbiAgICByZXR1cm4gdGhpcy5zdGFydE9mKGFyZywgZmFsc2UpO1xuICB9O1xuXG4gIF9wcm90by4kc2V0ID0gZnVuY3Rpb24gJHNldCh1bml0cywgX2ludCkge1xuICAgIHZhciBfQyREJEMkREFURSRDJE0kQyRZJEM7XG5cbiAgICAvLyBwcml2YXRlIHNldFxuICAgIHZhciB1bml0ID0gVXRpbHMucCh1bml0cyk7XG4gICAgdmFyIHV0Y1BhZCA9IFwic2V0XCIgKyAodGhpcy4kdSA/ICdVVEMnIDogJycpO1xuICAgIHZhciBuYW1lID0gKF9DJEQkQyREQVRFJEMkTSRDJFkkQyA9IHt9LCBfQyREJEMkREFURSRDJE0kQyRZJENbRF0gPSB1dGNQYWQgKyBcIkRhdGVcIiwgX0MkRCRDJERBVEUkQyRNJEMkWSRDW0RBVEVdID0gdXRjUGFkICsgXCJEYXRlXCIsIF9DJEQkQyREQVRFJEMkTSRDJFkkQ1tNXSA9IHV0Y1BhZCArIFwiTW9udGhcIiwgX0MkRCRDJERBVEUkQyRNJEMkWSRDW1ldID0gdXRjUGFkICsgXCJGdWxsWWVhclwiLCBfQyREJEMkREFURSRDJE0kQyRZJENbSF0gPSB1dGNQYWQgKyBcIkhvdXJzXCIsIF9DJEQkQyREQVRFJEMkTSRDJFkkQ1tNSU5dID0gdXRjUGFkICsgXCJNaW51dGVzXCIsIF9DJEQkQyREQVRFJEMkTSRDJFkkQ1tTXSA9IHV0Y1BhZCArIFwiU2Vjb25kc1wiLCBfQyREJEMkREFURSRDJE0kQyRZJENbTVNdID0gdXRjUGFkICsgXCJNaWxsaXNlY29uZHNcIiwgX0MkRCRDJERBVEUkQyRNJEMkWSRDKVt1bml0XTtcbiAgICB2YXIgYXJnID0gdW5pdCA9PT0gRCA/IHRoaXMuJEQgKyAoX2ludCAtIHRoaXMuJFcpIDogX2ludDtcblxuICAgIGlmICh1bml0ID09PSBNIHx8IHVuaXQgPT09IFkpIHtcbiAgICAgIC8vIGNsb25lIGlzIGZvciBiYWRNdXRhYmxlIHBsdWdpblxuICAgICAgdmFyIGRhdGUgPSB0aGlzLmNsb25lKCkuc2V0KERBVEUsIDEpO1xuICAgICAgZGF0ZS4kZFtuYW1lXShhcmcpO1xuICAgICAgZGF0ZS5pbml0KCk7XG4gICAgICB0aGlzLiRkID0gZGF0ZS5zZXQoREFURSwgTWF0aC5taW4odGhpcy4kRCwgZGF0ZS5kYXlzSW5Nb250aCgpKSkuJGQ7XG4gICAgfSBlbHNlIGlmIChuYW1lKSB0aGlzLiRkW25hbWVdKGFyZyk7XG5cbiAgICB0aGlzLmluaXQoKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBfcHJvdG8uc2V0ID0gZnVuY3Rpb24gc2V0KHN0cmluZywgX2ludDIpIHtcbiAgICByZXR1cm4gdGhpcy5jbG9uZSgpLiRzZXQoc3RyaW5nLCBfaW50Mik7XG4gIH07XG5cbiAgX3Byb3RvLmdldCA9IGZ1bmN0aW9uIGdldCh1bml0KSB7XG4gICAgcmV0dXJuIHRoaXNbVXRpbHMucCh1bml0KV0oKTtcbiAgfTtcblxuICBfcHJvdG8uYWRkID0gZnVuY3Rpb24gYWRkKG51bWJlciwgdW5pdHMpIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcyxcbiAgICAgICAgX0MkTUlOJEMkSCRDJFMkdW5pdDtcblxuICAgIG51bWJlciA9IE51bWJlcihudW1iZXIpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG5cbiAgICB2YXIgdW5pdCA9IFV0aWxzLnAodW5pdHMpO1xuXG4gICAgdmFyIGluc3RhbmNlRmFjdG9yeVNldCA9IGZ1bmN0aW9uIGluc3RhbmNlRmFjdG9yeVNldChuKSB7XG4gICAgICB2YXIgZCA9IGRheWpzKF90aGlzMik7XG4gICAgICByZXR1cm4gVXRpbHMudyhkLmRhdGUoZC5kYXRlKCkgKyBNYXRoLnJvdW5kKG4gKiBudW1iZXIpKSwgX3RoaXMyKTtcbiAgICB9O1xuXG4gICAgaWYgKHVuaXQgPT09IE0pIHtcbiAgICAgIHJldHVybiB0aGlzLnNldChNLCB0aGlzLiRNICsgbnVtYmVyKTtcbiAgICB9XG5cbiAgICBpZiAodW5pdCA9PT0gWSkge1xuICAgICAgcmV0dXJuIHRoaXMuc2V0KFksIHRoaXMuJHkgKyBudW1iZXIpO1xuICAgIH1cblxuICAgIGlmICh1bml0ID09PSBEKSB7XG4gICAgICByZXR1cm4gaW5zdGFuY2VGYWN0b3J5U2V0KDEpO1xuICAgIH1cblxuICAgIGlmICh1bml0ID09PSBXKSB7XG4gICAgICByZXR1cm4gaW5zdGFuY2VGYWN0b3J5U2V0KDcpO1xuICAgIH1cblxuICAgIHZhciBzdGVwID0gKF9DJE1JTiRDJEgkQyRTJHVuaXQgPSB7fSwgX0MkTUlOJEMkSCRDJFMkdW5pdFtNSU5dID0gTUlMTElTRUNPTkRTX0FfTUlOVVRFLCBfQyRNSU4kQyRIJEMkUyR1bml0W0hdID0gTUlMTElTRUNPTkRTX0FfSE9VUiwgX0MkTUlOJEMkSCRDJFMkdW5pdFtTXSA9IE1JTExJU0VDT05EU19BX1NFQ09ORCwgX0MkTUlOJEMkSCRDJFMkdW5pdClbdW5pdF0gfHwgMTsgLy8gbXNcblxuICAgIHZhciBuZXh0VGltZVN0YW1wID0gdGhpcy4kZC5nZXRUaW1lKCkgKyBudW1iZXIgKiBzdGVwO1xuICAgIHJldHVybiBVdGlscy53KG5leHRUaW1lU3RhbXAsIHRoaXMpO1xuICB9O1xuXG4gIF9wcm90by5zdWJ0cmFjdCA9IGZ1bmN0aW9uIHN1YnRyYWN0KG51bWJlciwgc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuYWRkKG51bWJlciAqIC0xLCBzdHJpbmcpO1xuICB9O1xuXG4gIF9wcm90by5mb3JtYXQgPSBmdW5jdGlvbiBmb3JtYXQoZm9ybWF0U3RyKSB7XG4gICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICB2YXIgbG9jYWxlID0gdGhpcy4kbG9jYWxlKCk7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQoKSkgcmV0dXJuIGxvY2FsZS5pbnZhbGlkRGF0ZSB8fCBJTlZBTElEX0RBVEVfU1RSSU5HO1xuICAgIHZhciBzdHIgPSBmb3JtYXRTdHIgfHwgRk9STUFUX0RFRkFVTFQ7XG4gICAgdmFyIHpvbmVTdHIgPSBVdGlscy56KHRoaXMpO1xuICAgIHZhciAkSCA9IHRoaXMuJEgsXG4gICAgICAgICRtID0gdGhpcy4kbSxcbiAgICAgICAgJE0gPSB0aGlzLiRNO1xuICAgIHZhciB3ZWVrZGF5cyA9IGxvY2FsZS53ZWVrZGF5cyxcbiAgICAgICAgbW9udGhzID0gbG9jYWxlLm1vbnRocyxcbiAgICAgICAgbWVyaWRpZW0gPSBsb2NhbGUubWVyaWRpZW07XG5cbiAgICB2YXIgZ2V0U2hvcnQgPSBmdW5jdGlvbiBnZXRTaG9ydChhcnIsIGluZGV4LCBmdWxsLCBsZW5ndGgpIHtcbiAgICAgIHJldHVybiBhcnIgJiYgKGFycltpbmRleF0gfHwgYXJyKF90aGlzMywgc3RyKSkgfHwgZnVsbFtpbmRleF0uc2xpY2UoMCwgbGVuZ3RoKTtcbiAgICB9O1xuXG4gICAgdmFyIGdldCRIID0gZnVuY3Rpb24gZ2V0JEgobnVtKSB7XG4gICAgICByZXR1cm4gVXRpbHMucygkSCAlIDEyIHx8IDEyLCBudW0sICcwJyk7XG4gICAgfTtcblxuICAgIHZhciBtZXJpZGllbUZ1bmMgPSBtZXJpZGllbSB8fCBmdW5jdGlvbiAoaG91ciwgbWludXRlLCBpc0xvd2VyY2FzZSkge1xuICAgICAgdmFyIG0gPSBob3VyIDwgMTIgPyAnQU0nIDogJ1BNJztcbiAgICAgIHJldHVybiBpc0xvd2VyY2FzZSA/IG0udG9Mb3dlckNhc2UoKSA6IG07XG4gICAgfTtcblxuICAgIHZhciBtYXRjaGVzID0gZnVuY3Rpb24gbWF0Y2hlcyhtYXRjaCkge1xuICAgICAgc3dpdGNoIChtYXRjaCkge1xuICAgICAgICBjYXNlICdZWSc6XG4gICAgICAgICAgcmV0dXJuIFN0cmluZyhfdGhpczMuJHkpLnNsaWNlKC0yKTtcblxuICAgICAgICBjYXNlICdZWVlZJzpcbiAgICAgICAgICByZXR1cm4gVXRpbHMucyhfdGhpczMuJHksIDQsICcwJyk7XG5cbiAgICAgICAgY2FzZSAnTSc6XG4gICAgICAgICAgcmV0dXJuICRNICsgMTtcblxuICAgICAgICBjYXNlICdNTSc6XG4gICAgICAgICAgcmV0dXJuIFV0aWxzLnMoJE0gKyAxLCAyLCAnMCcpO1xuXG4gICAgICAgIGNhc2UgJ01NTSc6XG4gICAgICAgICAgcmV0dXJuIGdldFNob3J0KGxvY2FsZS5tb250aHNTaG9ydCwgJE0sIG1vbnRocywgMyk7XG5cbiAgICAgICAgY2FzZSAnTU1NTSc6XG4gICAgICAgICAgcmV0dXJuIGdldFNob3J0KG1vbnRocywgJE0pO1xuXG4gICAgICAgIGNhc2UgJ0QnOlxuICAgICAgICAgIHJldHVybiBfdGhpczMuJEQ7XG5cbiAgICAgICAgY2FzZSAnREQnOlxuICAgICAgICAgIHJldHVybiBVdGlscy5zKF90aGlzMy4kRCwgMiwgJzAnKTtcblxuICAgICAgICBjYXNlICdkJzpcbiAgICAgICAgICByZXR1cm4gU3RyaW5nKF90aGlzMy4kVyk7XG5cbiAgICAgICAgY2FzZSAnZGQnOlxuICAgICAgICAgIHJldHVybiBnZXRTaG9ydChsb2NhbGUud2Vla2RheXNNaW4sIF90aGlzMy4kVywgd2Vla2RheXMsIDIpO1xuXG4gICAgICAgIGNhc2UgJ2RkZCc6XG4gICAgICAgICAgcmV0dXJuIGdldFNob3J0KGxvY2FsZS53ZWVrZGF5c1Nob3J0LCBfdGhpczMuJFcsIHdlZWtkYXlzLCAzKTtcblxuICAgICAgICBjYXNlICdkZGRkJzpcbiAgICAgICAgICByZXR1cm4gd2Vla2RheXNbX3RoaXMzLiRXXTtcblxuICAgICAgICBjYXNlICdIJzpcbiAgICAgICAgICByZXR1cm4gU3RyaW5nKCRIKTtcblxuICAgICAgICBjYXNlICdISCc6XG4gICAgICAgICAgcmV0dXJuIFV0aWxzLnMoJEgsIDIsICcwJyk7XG5cbiAgICAgICAgY2FzZSAnaCc6XG4gICAgICAgICAgcmV0dXJuIGdldCRIKDEpO1xuXG4gICAgICAgIGNhc2UgJ2hoJzpcbiAgICAgICAgICByZXR1cm4gZ2V0JEgoMik7XG5cbiAgICAgICAgY2FzZSAnYSc6XG4gICAgICAgICAgcmV0dXJuIG1lcmlkaWVtRnVuYygkSCwgJG0sIHRydWUpO1xuXG4gICAgICAgIGNhc2UgJ0EnOlxuICAgICAgICAgIHJldHVybiBtZXJpZGllbUZ1bmMoJEgsICRtLCBmYWxzZSk7XG5cbiAgICAgICAgY2FzZSAnbSc6XG4gICAgICAgICAgcmV0dXJuIFN0cmluZygkbSk7XG5cbiAgICAgICAgY2FzZSAnbW0nOlxuICAgICAgICAgIHJldHVybiBVdGlscy5zKCRtLCAyLCAnMCcpO1xuXG4gICAgICAgIGNhc2UgJ3MnOlxuICAgICAgICAgIHJldHVybiBTdHJpbmcoX3RoaXMzLiRzKTtcblxuICAgICAgICBjYXNlICdzcyc6XG4gICAgICAgICAgcmV0dXJuIFV0aWxzLnMoX3RoaXMzLiRzLCAyLCAnMCcpO1xuXG4gICAgICAgIGNhc2UgJ1NTUyc6XG4gICAgICAgICAgcmV0dXJuIFV0aWxzLnMoX3RoaXMzLiRtcywgMywgJzAnKTtcblxuICAgICAgICBjYXNlICdaJzpcbiAgICAgICAgICByZXR1cm4gem9uZVN0cjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcblxuICAgIHJldHVybiBzdHIucmVwbGFjZShSRUdFWF9GT1JNQVQsIGZ1bmN0aW9uIChtYXRjaCwgJDEpIHtcbiAgICAgIHJldHVybiAkMSB8fCBtYXRjaGVzKG1hdGNoKSB8fCB6b25lU3RyLnJlcGxhY2UoJzonLCAnJyk7XG4gICAgfSk7IC8vICdaWidcbiAgfTtcblxuICBfcHJvdG8udXRjT2Zmc2V0ID0gZnVuY3Rpb24gdXRjT2Zmc2V0KCkge1xuICAgIC8vIEJlY2F1c2UgYSBidWcgYXQgRkYyNCwgd2UncmUgcm91bmRpbmcgdGhlIHRpbWV6b25lIG9mZnNldCBhcm91bmQgMTUgbWludXRlc1xuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9tb21lbnQvbW9tZW50L3B1bGwvMTg3MVxuICAgIHJldHVybiAtTWF0aC5yb3VuZCh0aGlzLiRkLmdldFRpbWV6b25lT2Zmc2V0KCkgLyAxNSkgKiAxNTtcbiAgfTtcblxuICBfcHJvdG8uZGlmZiA9IGZ1bmN0aW9uIGRpZmYoaW5wdXQsIHVuaXRzLCBfZmxvYXQpIHtcbiAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgIHZhciB1bml0ID0gVXRpbHMucCh1bml0cyk7XG4gICAgdmFyIHRoYXQgPSBkYXlqcyhpbnB1dCk7XG4gICAgdmFyIHpvbmVEZWx0YSA9ICh0aGF0LnV0Y09mZnNldCgpIC0gdGhpcy51dGNPZmZzZXQoKSkgKiBNSUxMSVNFQ09ORFNfQV9NSU5VVEU7XG4gICAgdmFyIGRpZmYgPSB0aGlzIC0gdGhhdDtcblxuICAgIHZhciBnZXRNb250aCA9IGZ1bmN0aW9uIGdldE1vbnRoKCkge1xuICAgICAgcmV0dXJuIFV0aWxzLm0oX3RoaXM0LCB0aGF0KTtcbiAgICB9O1xuXG4gICAgdmFyIHJlc3VsdDtcblxuICAgIHN3aXRjaCAodW5pdCkge1xuICAgICAgY2FzZSBZOlxuICAgICAgICByZXN1bHQgPSBnZXRNb250aCgpIC8gMTI7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIE06XG4gICAgICAgIHJlc3VsdCA9IGdldE1vbnRoKCk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIFE6XG4gICAgICAgIHJlc3VsdCA9IGdldE1vbnRoKCkgLyAzO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBXOlxuICAgICAgICByZXN1bHQgPSAoZGlmZiAtIHpvbmVEZWx0YSkgLyBNSUxMSVNFQ09ORFNfQV9XRUVLO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBEOlxuICAgICAgICByZXN1bHQgPSAoZGlmZiAtIHpvbmVEZWx0YSkgLyBNSUxMSVNFQ09ORFNfQV9EQVk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIEg6XG4gICAgICAgIHJlc3VsdCA9IGRpZmYgLyBNSUxMSVNFQ09ORFNfQV9IT1VSO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBNSU46XG4gICAgICAgIHJlc3VsdCA9IGRpZmYgLyBNSUxMSVNFQ09ORFNfQV9NSU5VVEU7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIFM6XG4gICAgICAgIHJlc3VsdCA9IGRpZmYgLyBNSUxMSVNFQ09ORFNfQV9TRUNPTkQ7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXN1bHQgPSBkaWZmOyAvLyBtaWxsaXNlY29uZHNcblxuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICByZXR1cm4gX2Zsb2F0ID8gcmVzdWx0IDogVXRpbHMuYShyZXN1bHQpO1xuICB9O1xuXG4gIF9wcm90by5kYXlzSW5Nb250aCA9IGZ1bmN0aW9uIGRheXNJbk1vbnRoKCkge1xuICAgIHJldHVybiB0aGlzLmVuZE9mKE0pLiREO1xuICB9O1xuXG4gIF9wcm90by4kbG9jYWxlID0gZnVuY3Rpb24gJGxvY2FsZSgpIHtcbiAgICAvLyBnZXQgbG9jYWxlIG9iamVjdFxuICAgIHJldHVybiBMc1t0aGlzLiRMXTtcbiAgfTtcblxuICBfcHJvdG8ubG9jYWxlID0gZnVuY3Rpb24gbG9jYWxlKHByZXNldCwgb2JqZWN0KSB7XG4gICAgaWYgKCFwcmVzZXQpIHJldHVybiB0aGlzLiRMO1xuICAgIHZhciB0aGF0ID0gdGhpcy5jbG9uZSgpO1xuICAgIHZhciBuZXh0TG9jYWxlTmFtZSA9IHBhcnNlTG9jYWxlKHByZXNldCwgb2JqZWN0LCB0cnVlKTtcbiAgICBpZiAobmV4dExvY2FsZU5hbWUpIHRoYXQuJEwgPSBuZXh0TG9jYWxlTmFtZTtcbiAgICByZXR1cm4gdGhhdDtcbiAgfTtcblxuICBfcHJvdG8uY2xvbmUgPSBmdW5jdGlvbiBjbG9uZSgpIHtcbiAgICByZXR1cm4gVXRpbHMudyh0aGlzLiRkLCB0aGlzKTtcbiAgfTtcblxuICBfcHJvdG8udG9EYXRlID0gZnVuY3Rpb24gdG9EYXRlKCkge1xuICAgIHJldHVybiBuZXcgRGF0ZSh0aGlzLnZhbHVlT2YoKSk7XG4gIH07XG5cbiAgX3Byb3RvLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkKCkgPyB0aGlzLnRvSVNPU3RyaW5nKCkgOiBudWxsO1xuICB9O1xuXG4gIF9wcm90by50b0lTT1N0cmluZyA9IGZ1bmN0aW9uIHRvSVNPU3RyaW5nKCkge1xuICAgIC8vIGllIDggcmV0dXJuXG4gICAgLy8gbmV3IERheWpzKHRoaXMudmFsdWVPZigpICsgdGhpcy4kZC5nZXRUaW1lem9uZU9mZnNldCgpICogNjAwMDApXG4gICAgLy8gLmZvcm1hdCgnWVlZWS1NTS1ERFRISDptbTpzcy5TU1NbWl0nKVxuICAgIHJldHVybiB0aGlzLiRkLnRvSVNPU3RyaW5nKCk7XG4gIH07XG5cbiAgX3Byb3RvLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMuJGQudG9VVENTdHJpbmcoKTtcbiAgfTtcblxuICByZXR1cm4gRGF5anM7XG59KCk7XG5cbnZhciBwcm90byA9IERheWpzLnByb3RvdHlwZTtcbmRheWpzLnByb3RvdHlwZSA9IHByb3RvO1xuW1snJG1zJywgTVNdLCBbJyRzJywgU10sIFsnJG0nLCBNSU5dLCBbJyRIJywgSF0sIFsnJFcnLCBEXSwgWyckTScsIE1dLCBbJyR5JywgWV0sIFsnJEQnLCBEQVRFXV0uZm9yRWFjaChmdW5jdGlvbiAoZykge1xuICBwcm90b1tnWzFdXSA9IGZ1bmN0aW9uIChpbnB1dCkge1xuICAgIHJldHVybiB0aGlzLiRnKGlucHV0LCBnWzBdLCBnWzFdKTtcbiAgfTtcbn0pO1xuXG5kYXlqcy5leHRlbmQgPSBmdW5jdGlvbiAocGx1Z2luLCBvcHRpb24pIHtcbiAgaWYgKCFwbHVnaW4uJGkpIHtcbiAgICAvLyBpbnN0YWxsIHBsdWdpbiBvbmx5IG9uY2VcbiAgICBwbHVnaW4ob3B0aW9uLCBEYXlqcywgZGF5anMpO1xuICAgIHBsdWdpbi4kaSA9IHRydWU7XG4gIH1cblxuICByZXR1cm4gZGF5anM7XG59O1xuXG5kYXlqcy5sb2NhbGUgPSBwYXJzZUxvY2FsZTtcbmRheWpzLmlzRGF5anMgPSBpc0RheWpzO1xuXG5kYXlqcy51bml4ID0gZnVuY3Rpb24gKHRpbWVzdGFtcCkge1xuICByZXR1cm4gZGF5anModGltZXN0YW1wICogMWUzKTtcbn07XG5cbmRheWpzLmVuID0gTHNbTF07XG5kYXlqcy5McyA9IExzO1xuZGF5anMucCA9IHt9O1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L3ByZWZlci1kZWZhdWx0LWV4cG9ydFxudmFyIHQgPSBmdW5jdGlvbiB0KGZvcm1hdCkge1xuICByZXR1cm4gZm9ybWF0LnJlcGxhY2UoLyhcXFtbXlxcXV0rXSl8KE1NTU18TU18RER8ZGRkZCkvZywgZnVuY3Rpb24gKF8sIGEsIGIpIHtcbiAgICByZXR1cm4gYSB8fCBiLnNsaWNlKDEpO1xuICB9KTtcbn07XG52YXIgZW5nbGlzaEZvcm1hdHMgPSB7XG4gIExUUzogJ2g6bW06c3MgQScsXG4gIExUOiAnaDptbSBBJyxcbiAgTDogJ01NL0REL1lZWVknLFxuICBMTDogJ01NTU0gRCwgWVlZWScsXG4gIExMTDogJ01NTU0gRCwgWVlZWSBoOm1tIEEnLFxuICBMTExMOiAnZGRkZCwgTU1NTSBELCBZWVlZIGg6bW0gQSdcbn07XG52YXIgdSA9IGZ1bmN0aW9uIHUoZm9ybWF0U3RyLCBmb3JtYXRzKSB7XG4gIHJldHVybiBmb3JtYXRTdHIucmVwbGFjZSgvKFxcW1teXFxdXStdKXwoTFRTP3xsezEsNH18THsxLDR9KS9nLCBmdW5jdGlvbiAoXywgYSwgYikge1xuICAgIHZhciBCID0gYiAmJiBiLnRvVXBwZXJDYXNlKCk7XG4gICAgcmV0dXJuIGEgfHwgZm9ybWF0c1tiXSB8fCBlbmdsaXNoRm9ybWF0c1tiXSB8fCB0KGZvcm1hdHNbQl0pO1xuICB9KTtcbn07XG5cbnZhciBmb3JtYXR0aW5nVG9rZW5zID0gLyhcXFtbXltdKlxcXSl8KFstXzovLiwoKVxcc10rKXwoQXxhfFlZWVl8WVk/fE1NP00/TT98RG98REQ/fGhoP3xISD98bW0/fHNzP3xTezEsM318enxaWj8pL2c7XG52YXIgbWF0Y2gxID0gL1xcZC87IC8vIDAgLSA5XG5cbnZhciBtYXRjaDIgPSAvXFxkXFxkLzsgLy8gMDAgLSA5OVxuXG52YXIgbWF0Y2gzID0gL1xcZHszfS87IC8vIDAwMCAtIDk5OVxuXG52YXIgbWF0Y2g0ID0gL1xcZHs0fS87IC8vIDAwMDAgLSA5OTk5XG5cbnZhciBtYXRjaDF0bzIgPSAvXFxkXFxkPy87IC8vIDAgLSA5OVxuXG52YXIgbWF0Y2hTaWduZWQgPSAvWystXT9cXGQrLzsgLy8gLWluZiAtIGluZlxuXG52YXIgbWF0Y2hPZmZzZXQgPSAvWystXVxcZFxcZDo/KFxcZFxcZCk/fFovOyAvLyArMDA6MDAgLTAwOjAwICswMDAwIG9yIC0wMDAwICswMCBvciBaXG5cbnZhciBtYXRjaFdvcmQgPSAvXFxkKlteLV86LywoKVxcc1xcZF0rLzsgLy8gV29yZFxuXG52YXIgbG9jYWxlID0ge307XG5cbnZhciBwYXJzZVR3b0RpZ2l0WWVhciA9IGZ1bmN0aW9uIHBhcnNlVHdvRGlnaXRZZWFyKGlucHV0KSB7XG4gIGlucHV0ID0gK2lucHV0O1xuICByZXR1cm4gaW5wdXQgKyAoaW5wdXQgPiA2OCA/IDE5MDAgOiAyMDAwKTtcbn07XG5cbmZ1bmN0aW9uIG9mZnNldEZyb21TdHJpbmcoc3RyaW5nKSB7XG4gIGlmICghc3RyaW5nKSByZXR1cm4gMDtcbiAgaWYgKHN0cmluZyA9PT0gJ1onKSByZXR1cm4gMDtcbiAgdmFyIHBhcnRzID0gc3RyaW5nLm1hdGNoKC8oWystXXxcXGRcXGQpL2cpO1xuICB2YXIgbWludXRlcyA9ICsocGFydHNbMV0gKiA2MCkgKyAoK3BhcnRzWzJdIHx8IDApO1xuICByZXR1cm4gbWludXRlcyA9PT0gMCA/IDAgOiBwYXJ0c1swXSA9PT0gJysnID8gLW1pbnV0ZXMgOiBtaW51dGVzOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLW5lc3RlZC10ZXJuYXJ5XG59XG5cbnZhciBhZGRJbnB1dCA9IGZ1bmN0aW9uIGFkZElucHV0KHByb3BlcnR5KSB7XG4gIHJldHVybiBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICB0aGlzW3Byb3BlcnR5XSA9ICtpbnB1dDtcbiAgfTtcbn07XG5cbnZhciB6b25lRXhwcmVzc2lvbnMgPSBbbWF0Y2hPZmZzZXQsIGZ1bmN0aW9uIChpbnB1dCkge1xuICB2YXIgem9uZSA9IHRoaXMuem9uZSB8fCAodGhpcy56b25lID0ge30pO1xuICB6b25lLm9mZnNldCA9IG9mZnNldEZyb21TdHJpbmcoaW5wdXQpO1xufV07XG5cbnZhciBnZXRMb2NhbGVQYXJ0ID0gZnVuY3Rpb24gZ2V0TG9jYWxlUGFydChuYW1lKSB7XG4gIHZhciBwYXJ0ID0gbG9jYWxlW25hbWVdO1xuICByZXR1cm4gcGFydCAmJiAocGFydC5pbmRleE9mID8gcGFydCA6IHBhcnQucy5jb25jYXQocGFydC5mKSk7XG59O1xuXG52YXIgbWVyaWRpZW1NYXRjaCA9IGZ1bmN0aW9uIG1lcmlkaWVtTWF0Y2goaW5wdXQsIGlzTG93ZXJDYXNlKSB7XG4gIHZhciBpc0FmdGVybm9vbjtcbiAgdmFyIF9sb2NhbGUgPSBsb2NhbGUsXG4gICAgICBtZXJpZGllbSA9IF9sb2NhbGUubWVyaWRpZW07XG5cbiAgaWYgKCFtZXJpZGllbSkge1xuICAgIGlzQWZ0ZXJub29uID0gaW5wdXQgPT09IChpc0xvd2VyQ2FzZSA/ICdwbScgOiAnUE0nKTtcbiAgfSBlbHNlIHtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8PSAyNDsgaSArPSAxKSB7XG4gICAgICAvLyB0b2RvOiBmaXggaW5wdXQgPT09IG1lcmlkaWVtKGksIDAsIGlzTG93ZXJDYXNlKVxuICAgICAgaWYgKGlucHV0LmluZGV4T2YobWVyaWRpZW0oaSwgMCwgaXNMb3dlckNhc2UpKSA+IC0xKSB7XG4gICAgICAgIGlzQWZ0ZXJub29uID0gaSA+IDEyO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gaXNBZnRlcm5vb247XG59O1xuXG52YXIgZXhwcmVzc2lvbnMgPSB7XG4gIEE6IFttYXRjaFdvcmQsIGZ1bmN0aW9uIChpbnB1dCkge1xuICAgIHRoaXMuYWZ0ZXJub29uID0gbWVyaWRpZW1NYXRjaChpbnB1dCwgZmFsc2UpO1xuICB9XSxcbiAgYTogW21hdGNoV29yZCwgZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgdGhpcy5hZnRlcm5vb24gPSBtZXJpZGllbU1hdGNoKGlucHV0LCB0cnVlKTtcbiAgfV0sXG4gIFM6IFttYXRjaDEsIGZ1bmN0aW9uIChpbnB1dCkge1xuICAgIHRoaXMubWlsbGlzZWNvbmRzID0gK2lucHV0ICogMTAwO1xuICB9XSxcbiAgU1M6IFttYXRjaDIsIGZ1bmN0aW9uIChpbnB1dCkge1xuICAgIHRoaXMubWlsbGlzZWNvbmRzID0gK2lucHV0ICogMTA7XG4gIH1dLFxuICBTU1M6IFttYXRjaDMsIGZ1bmN0aW9uIChpbnB1dCkge1xuICAgIHRoaXMubWlsbGlzZWNvbmRzID0gK2lucHV0O1xuICB9XSxcbiAgczogW21hdGNoMXRvMiwgYWRkSW5wdXQoJ3NlY29uZHMnKV0sXG4gIHNzOiBbbWF0Y2gxdG8yLCBhZGRJbnB1dCgnc2Vjb25kcycpXSxcbiAgbTogW21hdGNoMXRvMiwgYWRkSW5wdXQoJ21pbnV0ZXMnKV0sXG4gIG1tOiBbbWF0Y2gxdG8yLCBhZGRJbnB1dCgnbWludXRlcycpXSxcbiAgSDogW21hdGNoMXRvMiwgYWRkSW5wdXQoJ2hvdXJzJyldLFxuICBoOiBbbWF0Y2gxdG8yLCBhZGRJbnB1dCgnaG91cnMnKV0sXG4gIEhIOiBbbWF0Y2gxdG8yLCBhZGRJbnB1dCgnaG91cnMnKV0sXG4gIGhoOiBbbWF0Y2gxdG8yLCBhZGRJbnB1dCgnaG91cnMnKV0sXG4gIEQ6IFttYXRjaDF0bzIsIGFkZElucHV0KCdkYXknKV0sXG4gIEREOiBbbWF0Y2gyLCBhZGRJbnB1dCgnZGF5JyldLFxuICBEbzogW21hdGNoV29yZCwgZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgdmFyIF9sb2NhbGUyID0gbG9jYWxlLFxuICAgICAgICBvcmRpbmFsID0gX2xvY2FsZTIub3JkaW5hbDtcblxuICAgIHZhciBfaW5wdXQkbWF0Y2ggPSBpbnB1dC5tYXRjaCgvXFxkKy8pO1xuXG4gICAgdGhpcy5kYXkgPSBfaW5wdXQkbWF0Y2hbMF07XG4gICAgaWYgKCFvcmRpbmFsKSByZXR1cm47XG5cbiAgICBmb3IgKHZhciBpID0gMTsgaSA8PSAzMTsgaSArPSAxKSB7XG4gICAgICBpZiAob3JkaW5hbChpKS5yZXBsYWNlKC9cXFt8XFxdL2csICcnKSA9PT0gaW5wdXQpIHtcbiAgICAgICAgdGhpcy5kYXkgPSBpO1xuICAgICAgfVxuICAgIH1cbiAgfV0sXG4gIE06IFttYXRjaDF0bzIsIGFkZElucHV0KCdtb250aCcpXSxcbiAgTU06IFttYXRjaDIsIGFkZElucHV0KCdtb250aCcpXSxcbiAgTU1NOiBbbWF0Y2hXb3JkLCBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICB2YXIgbW9udGhzID0gZ2V0TG9jYWxlUGFydCgnbW9udGhzJyk7XG4gICAgdmFyIG1vbnRoc1Nob3J0ID0gZ2V0TG9jYWxlUGFydCgnbW9udGhzU2hvcnQnKTtcbiAgICB2YXIgbWF0Y2hJbmRleCA9IChtb250aHNTaG9ydCB8fCBtb250aHMubWFwKGZ1bmN0aW9uIChfKSB7XG4gICAgICByZXR1cm4gXy5zbGljZSgwLCAzKTtcbiAgICB9KSkuaW5kZXhPZihpbnB1dCkgKyAxO1xuXG4gICAgaWYgKG1hdGNoSW5kZXggPCAxKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICB9XG5cbiAgICB0aGlzLm1vbnRoID0gbWF0Y2hJbmRleCAlIDEyIHx8IG1hdGNoSW5kZXg7XG4gIH1dLFxuICBNTU1NOiBbbWF0Y2hXb3JkLCBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICB2YXIgbW9udGhzID0gZ2V0TG9jYWxlUGFydCgnbW9udGhzJyk7XG4gICAgdmFyIG1hdGNoSW5kZXggPSBtb250aHMuaW5kZXhPZihpbnB1dCkgKyAxO1xuXG4gICAgaWYgKG1hdGNoSW5kZXggPCAxKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICB9XG5cbiAgICB0aGlzLm1vbnRoID0gbWF0Y2hJbmRleCAlIDEyIHx8IG1hdGNoSW5kZXg7XG4gIH1dLFxuICBZOiBbbWF0Y2hTaWduZWQsIGFkZElucHV0KCd5ZWFyJyldLFxuICBZWTogW21hdGNoMiwgZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgdGhpcy55ZWFyID0gcGFyc2VUd29EaWdpdFllYXIoaW5wdXQpO1xuICB9XSxcbiAgWVlZWTogW21hdGNoNCwgYWRkSW5wdXQoJ3llYXInKV0sXG4gIFo6IHpvbmVFeHByZXNzaW9ucyxcbiAgWlo6IHpvbmVFeHByZXNzaW9uc1xufTtcblxuZnVuY3Rpb24gY29ycmVjdEhvdXJzKHRpbWUpIHtcbiAgdmFyIGFmdGVybm9vbiA9IHRpbWUuYWZ0ZXJub29uO1xuXG4gIGlmIChhZnRlcm5vb24gIT09IHVuZGVmaW5lZCkge1xuICAgIHZhciBob3VycyA9IHRpbWUuaG91cnM7XG5cbiAgICBpZiAoYWZ0ZXJub29uKSB7XG4gICAgICBpZiAoaG91cnMgPCAxMikge1xuICAgICAgICB0aW1lLmhvdXJzICs9IDEyO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaG91cnMgPT09IDEyKSB7XG4gICAgICB0aW1lLmhvdXJzID0gMDtcbiAgICB9XG5cbiAgICBkZWxldGUgdGltZS5hZnRlcm5vb247XG4gIH1cbn1cblxuZnVuY3Rpb24gbWFrZVBhcnNlcihmb3JtYXQpIHtcbiAgZm9ybWF0ID0gdShmb3JtYXQsIGxvY2FsZSAmJiBsb2NhbGUuZm9ybWF0cyk7XG4gIHZhciBhcnJheSA9IGZvcm1hdC5tYXRjaChmb3JtYXR0aW5nVG9rZW5zKTtcbiAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgdmFyIHRva2VuID0gYXJyYXlbaV07XG4gICAgdmFyIHBhcnNlVG8gPSBleHByZXNzaW9uc1t0b2tlbl07XG4gICAgdmFyIHJlZ2V4ID0gcGFyc2VUbyAmJiBwYXJzZVRvWzBdO1xuICAgIHZhciBwYXJzZXIgPSBwYXJzZVRvICYmIHBhcnNlVG9bMV07XG5cbiAgICBpZiAocGFyc2VyKSB7XG4gICAgICBhcnJheVtpXSA9IHtcbiAgICAgICAgcmVnZXg6IHJlZ2V4LFxuICAgICAgICBwYXJzZXI6IHBhcnNlclxuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXJyYXlbaV0gPSB0b2tlbi5yZXBsYWNlKC9eXFxbfFxcXSQvZywgJycpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICB2YXIgdGltZSA9IHt9O1xuXG4gICAgZm9yICh2YXIgX2kgPSAwLCBzdGFydCA9IDA7IF9pIDwgbGVuZ3RoOyBfaSArPSAxKSB7XG4gICAgICB2YXIgX3Rva2VuID0gYXJyYXlbX2ldO1xuXG4gICAgICBpZiAodHlwZW9mIF90b2tlbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgc3RhcnQgKz0gX3Rva2VuLmxlbmd0aDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBfcmVnZXggPSBfdG9rZW4ucmVnZXgsXG4gICAgICAgICAgICBfcGFyc2VyID0gX3Rva2VuLnBhcnNlcjtcbiAgICAgICAgdmFyIHBhcnQgPSBpbnB1dC5zbGljZShzdGFydCk7XG5cbiAgICAgICAgdmFyIG1hdGNoID0gX3JlZ2V4LmV4ZWMocGFydCk7XG5cbiAgICAgICAgdmFyIHZhbHVlID0gbWF0Y2hbMF07XG5cbiAgICAgICAgX3BhcnNlci5jYWxsKHRpbWUsIHZhbHVlKTtcblxuICAgICAgICBpbnB1dCA9IGlucHV0LnJlcGxhY2UodmFsdWUsICcnKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb3JyZWN0SG91cnModGltZSk7XG4gICAgcmV0dXJuIHRpbWU7XG4gIH07XG59XG5cbnZhciBwYXJzZUZvcm1hdHRlZElucHV0ID0gZnVuY3Rpb24gcGFyc2VGb3JtYXR0ZWRJbnB1dChpbnB1dCwgZm9ybWF0LCB1dGMpIHtcbiAgdHJ5IHtcbiAgICBpZiAoWyd4JywgJ1gnXS5pbmRleE9mKGZvcm1hdCkgPiAtMSkgcmV0dXJuIG5ldyBEYXRlKChmb3JtYXQgPT09ICdYJyA/IDEwMDAgOiAxKSAqIGlucHV0KTtcbiAgICB2YXIgcGFyc2VyID0gbWFrZVBhcnNlcihmb3JtYXQpO1xuXG4gICAgdmFyIF9wYXJzZXIyID0gcGFyc2VyKGlucHV0KSxcbiAgICAgICAgeWVhciA9IF9wYXJzZXIyLnllYXIsXG4gICAgICAgIG1vbnRoID0gX3BhcnNlcjIubW9udGgsXG4gICAgICAgIGRheSA9IF9wYXJzZXIyLmRheSxcbiAgICAgICAgaG91cnMgPSBfcGFyc2VyMi5ob3VycyxcbiAgICAgICAgbWludXRlcyA9IF9wYXJzZXIyLm1pbnV0ZXMsXG4gICAgICAgIHNlY29uZHMgPSBfcGFyc2VyMi5zZWNvbmRzLFxuICAgICAgICBtaWxsaXNlY29uZHMgPSBfcGFyc2VyMi5taWxsaXNlY29uZHMsXG4gICAgICAgIHpvbmUgPSBfcGFyc2VyMi56b25lO1xuXG4gICAgdmFyIG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgdmFyIGQgPSBkYXkgfHwgKCF5ZWFyICYmICFtb250aCA/IG5vdy5nZXREYXRlKCkgOiAxKTtcbiAgICB2YXIgeSA9IHllYXIgfHwgbm93LmdldEZ1bGxZZWFyKCk7XG4gICAgdmFyIE0gPSAwO1xuXG4gICAgaWYgKCEoeWVhciAmJiAhbW9udGgpKSB7XG4gICAgICBNID0gbW9udGggPiAwID8gbW9udGggLSAxIDogbm93LmdldE1vbnRoKCk7XG4gICAgfVxuXG4gICAgdmFyIGggPSBob3VycyB8fCAwO1xuICAgIHZhciBtID0gbWludXRlcyB8fCAwO1xuICAgIHZhciBzID0gc2Vjb25kcyB8fCAwO1xuICAgIHZhciBtcyA9IG1pbGxpc2Vjb25kcyB8fCAwO1xuXG4gICAgaWYgKHpvbmUpIHtcbiAgICAgIHJldHVybiBuZXcgRGF0ZShEYXRlLlVUQyh5LCBNLCBkLCBoLCBtLCBzLCBtcyArIHpvbmUub2Zmc2V0ICogNjAgKiAxMDAwKSk7XG4gICAgfVxuXG4gICAgaWYgKHV0Yykge1xuICAgICAgcmV0dXJuIG5ldyBEYXRlKERhdGUuVVRDKHksIE0sIGQsIGgsIG0sIHMsIG1zKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBEYXRlKHksIE0sIGQsIGgsIG0sIHMsIG1zKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBuZXcgRGF0ZSgnJyk7IC8vIEludmFsaWQgRGF0ZVxuICB9XG59O1xuXG5jb25zdCBjdXN0b21QYXJzZUZvcm1hdCA9IChmdW5jdGlvbiAobywgQywgZCkge1xuICBkLnAuY3VzdG9tUGFyc2VGb3JtYXQgPSB0cnVlO1xuXG4gIGlmIChvICYmIG8ucGFyc2VUd29EaWdpdFllYXIpIHtcbiAgICBwYXJzZVR3b0RpZ2l0WWVhciA9IG8ucGFyc2VUd29EaWdpdFllYXI7XG4gIH1cblxuICB2YXIgcHJvdG8gPSBDLnByb3RvdHlwZTtcbiAgdmFyIG9sZFBhcnNlID0gcHJvdG8ucGFyc2U7XG5cbiAgcHJvdG8ucGFyc2UgPSBmdW5jdGlvbiAoY2ZnKSB7XG4gICAgdmFyIGRhdGUgPSBjZmcuZGF0ZSxcbiAgICAgICAgdXRjID0gY2ZnLnV0YyxcbiAgICAgICAgYXJncyA9IGNmZy5hcmdzO1xuICAgIHRoaXMuJHUgPSB1dGM7XG4gICAgdmFyIGZvcm1hdCA9IGFyZ3NbMV07XG5cbiAgICBpZiAodHlwZW9mIGZvcm1hdCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHZhciBpc1N0cmljdFdpdGhvdXRMb2NhbGUgPSBhcmdzWzJdID09PSB0cnVlO1xuICAgICAgdmFyIGlzU3RyaWN0V2l0aExvY2FsZSA9IGFyZ3NbM10gPT09IHRydWU7XG4gICAgICB2YXIgaXNTdHJpY3QgPSBpc1N0cmljdFdpdGhvdXRMb2NhbGUgfHwgaXNTdHJpY3RXaXRoTG9jYWxlO1xuICAgICAgdmFyIHBsID0gYXJnc1syXTtcblxuICAgICAgaWYgKGlzU3RyaWN0V2l0aExvY2FsZSkge1xuICAgICAgICBwbCA9IGFyZ3NbMl07XG4gICAgICB9XG5cbiAgICAgIGxvY2FsZSA9IHRoaXMuJGxvY2FsZSgpO1xuXG4gICAgICBpZiAoIWlzU3RyaWN0V2l0aG91dExvY2FsZSAmJiBwbCkge1xuICAgICAgICBsb2NhbGUgPSBkLkxzW3BsXTtcbiAgICAgIH1cblxuICAgICAgdGhpcy4kZCA9IHBhcnNlRm9ybWF0dGVkSW5wdXQoZGF0ZSwgZm9ybWF0LCB1dGMpO1xuICAgICAgdGhpcy5pbml0KCk7XG4gICAgICBpZiAocGwgJiYgcGwgIT09IHRydWUpIHRoaXMuJEwgPSB0aGlzLmxvY2FsZShwbCkuJEw7IC8vIHVzZSAhPSB0byB0cmVhdFxuICAgICAgLy8gaW5wdXQgbnVtYmVyIDE0MTA3MTU2NDA1NzkgYW5kIGZvcm1hdCBzdHJpbmcgJzE0MTA3MTU2NDA1NzknIGVxdWFsXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZXFlcWVxXG5cbiAgICAgIGlmIChpc1N0cmljdCAmJiBkYXRlICE9IHRoaXMuZm9ybWF0KGZvcm1hdCkpIHtcbiAgICAgICAgdGhpcy4kZCA9IG5ldyBEYXRlKCcnKTtcbiAgICAgIH0gLy8gcmVzZXQgZ2xvYmFsIGxvY2FsZSB0byBtYWtlIHBhcmFsbGVsIHVuaXQgdGVzdFxuXG5cbiAgICAgIGxvY2FsZSA9IHt9O1xuICAgIH0gZWxzZSBpZiAoZm9ybWF0IGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgIHZhciBsZW4gPSBmb3JtYXQubGVuZ3RoO1xuXG4gICAgICBmb3IgKHZhciBpID0gMTsgaSA8PSBsZW47IGkgKz0gMSkge1xuICAgICAgICBhcmdzWzFdID0gZm9ybWF0W2kgLSAxXTtcbiAgICAgICAgdmFyIHJlc3VsdCA9IGQuYXBwbHkodGhpcywgYXJncyk7XG5cbiAgICAgICAgaWYgKHJlc3VsdC5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICB0aGlzLiRkID0gcmVzdWx0LiRkO1xuICAgICAgICAgIHRoaXMuJEwgPSByZXN1bHQuJEw7XG4gICAgICAgICAgdGhpcy5pbml0KCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaSA9PT0gbGVuKSB0aGlzLiRkID0gbmV3IERhdGUoJycpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBvbGRQYXJzZS5jYWxsKHRoaXMsIGNmZyk7XG4gICAgfVxuICB9O1xufSk7XG5cbmNvbnN0IGxvY2FsZURhdGEgPSAoZnVuY3Rpb24gKG8sIGMsIGRheWpzKSB7XG4gIC8vIGxvY2FsZSBuZWVkZWQgbGF0ZXJcbiAgdmFyIHByb3RvID0gYy5wcm90b3R5cGU7XG5cbiAgdmFyIGdldExvY2FsZVBhcnQgPSBmdW5jdGlvbiBnZXRMb2NhbGVQYXJ0KHBhcnQpIHtcbiAgICByZXR1cm4gcGFydCAmJiAocGFydC5pbmRleE9mID8gcGFydCA6IHBhcnQucyk7XG4gIH07XG5cbiAgdmFyIGdldFNob3J0ID0gZnVuY3Rpb24gZ2V0U2hvcnQoaW5zLCB0YXJnZXQsIGZ1bGwsIG51bSwgbG9jYWxlT3JkZXIpIHtcbiAgICB2YXIgbG9jYWxlID0gaW5zLm5hbWUgPyBpbnMgOiBpbnMuJGxvY2FsZSgpO1xuICAgIHZhciB0YXJnZXRMb2NhbGUgPSBnZXRMb2NhbGVQYXJ0KGxvY2FsZVt0YXJnZXRdKTtcbiAgICB2YXIgZnVsbExvY2FsZSA9IGdldExvY2FsZVBhcnQobG9jYWxlW2Z1bGxdKTtcbiAgICB2YXIgcmVzdWx0ID0gdGFyZ2V0TG9jYWxlIHx8IGZ1bGxMb2NhbGUubWFwKGZ1bmN0aW9uIChmKSB7XG4gICAgICByZXR1cm4gZi5zbGljZSgwLCBudW0pO1xuICAgIH0pO1xuICAgIGlmICghbG9jYWxlT3JkZXIpIHJldHVybiByZXN1bHQ7XG4gICAgdmFyIHdlZWtTdGFydCA9IGxvY2FsZS53ZWVrU3RhcnQ7XG4gICAgcmV0dXJuIHJlc3VsdC5tYXAoZnVuY3Rpb24gKF8sIGluZGV4KSB7XG4gICAgICByZXR1cm4gcmVzdWx0WyhpbmRleCArICh3ZWVrU3RhcnQgfHwgMCkpICUgN107XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIGdldERheWpzTG9jYWxlT2JqZWN0ID0gZnVuY3Rpb24gZ2V0RGF5anNMb2NhbGVPYmplY3QoKSB7XG4gICAgcmV0dXJuIGRheWpzLkxzW2RheWpzLmxvY2FsZSgpXTtcbiAgfTtcblxuICB2YXIgZ2V0TG9uZ0RhdGVGb3JtYXQgPSBmdW5jdGlvbiBnZXRMb25nRGF0ZUZvcm1hdChsLCBmb3JtYXQpIHtcbiAgICByZXR1cm4gbC5mb3JtYXRzW2Zvcm1hdF0gfHwgdChsLmZvcm1hdHNbZm9ybWF0LnRvVXBwZXJDYXNlKCldKTtcbiAgfTtcblxuICB2YXIgbG9jYWxlRGF0YSA9IGZ1bmN0aW9uIGxvY2FsZURhdGEoKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHJldHVybiB7XG4gICAgICBtb250aHM6IGZ1bmN0aW9uIG1vbnRocyhpbnN0YW5jZSkge1xuICAgICAgICByZXR1cm4gaW5zdGFuY2UgPyBpbnN0YW5jZS5mb3JtYXQoJ01NTU0nKSA6IGdldFNob3J0KF90aGlzLCAnbW9udGhzJyk7XG4gICAgICB9LFxuICAgICAgbW9udGhzU2hvcnQ6IGZ1bmN0aW9uIG1vbnRoc1Nob3J0KGluc3RhbmNlKSB7XG4gICAgICAgIHJldHVybiBpbnN0YW5jZSA/IGluc3RhbmNlLmZvcm1hdCgnTU1NJykgOiBnZXRTaG9ydChfdGhpcywgJ21vbnRoc1Nob3J0JywgJ21vbnRocycsIDMpO1xuICAgICAgfSxcbiAgICAgIGZpcnN0RGF5T2ZXZWVrOiBmdW5jdGlvbiBmaXJzdERheU9mV2VlaygpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLiRsb2NhbGUoKS53ZWVrU3RhcnQgfHwgMDtcbiAgICAgIH0sXG4gICAgICB3ZWVrZGF5czogZnVuY3Rpb24gd2Vla2RheXMoaW5zdGFuY2UpIHtcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlID8gaW5zdGFuY2UuZm9ybWF0KCdkZGRkJykgOiBnZXRTaG9ydChfdGhpcywgJ3dlZWtkYXlzJyk7XG4gICAgICB9LFxuICAgICAgd2Vla2RheXNNaW46IGZ1bmN0aW9uIHdlZWtkYXlzTWluKGluc3RhbmNlKSB7XG4gICAgICAgIHJldHVybiBpbnN0YW5jZSA/IGluc3RhbmNlLmZvcm1hdCgnZGQnKSA6IGdldFNob3J0KF90aGlzLCAnd2Vla2RheXNNaW4nLCAnd2Vla2RheXMnLCAyKTtcbiAgICAgIH0sXG4gICAgICB3ZWVrZGF5c1Nob3J0OiBmdW5jdGlvbiB3ZWVrZGF5c1Nob3J0KGluc3RhbmNlKSB7XG4gICAgICAgIHJldHVybiBpbnN0YW5jZSA/IGluc3RhbmNlLmZvcm1hdCgnZGRkJykgOiBnZXRTaG9ydChfdGhpcywgJ3dlZWtkYXlzU2hvcnQnLCAnd2Vla2RheXMnLCAzKTtcbiAgICAgIH0sXG4gICAgICBsb25nRGF0ZUZvcm1hdDogZnVuY3Rpb24gbG9uZ0RhdGVGb3JtYXQoZm9ybWF0KSB7XG4gICAgICAgIHJldHVybiBnZXRMb25nRGF0ZUZvcm1hdChfdGhpcy4kbG9jYWxlKCksIGZvcm1hdCk7XG4gICAgICB9LFxuICAgICAgbWVyaWRpZW06IHRoaXMuJGxvY2FsZSgpLm1lcmlkaWVtLFxuICAgICAgb3JkaW5hbDogdGhpcy4kbG9jYWxlKCkub3JkaW5hbFxuICAgIH07XG4gIH07XG5cbiAgcHJvdG8ubG9jYWxlRGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gbG9jYWxlRGF0YS5iaW5kKHRoaXMpKCk7XG4gIH07XG5cbiAgZGF5anMubG9jYWxlRGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbG9jYWxlT2JqZWN0ID0gZ2V0RGF5anNMb2NhbGVPYmplY3QoKTtcbiAgICByZXR1cm4ge1xuICAgICAgZmlyc3REYXlPZldlZWs6IGZ1bmN0aW9uIGZpcnN0RGF5T2ZXZWVrKCkge1xuICAgICAgICByZXR1cm4gbG9jYWxlT2JqZWN0LndlZWtTdGFydCB8fCAwO1xuICAgICAgfSxcbiAgICAgIHdlZWtkYXlzOiBmdW5jdGlvbiB3ZWVrZGF5cygpIHtcbiAgICAgICAgcmV0dXJuIGRheWpzLndlZWtkYXlzKCk7XG4gICAgICB9LFxuICAgICAgd2Vla2RheXNTaG9ydDogZnVuY3Rpb24gd2Vla2RheXNTaG9ydCgpIHtcbiAgICAgICAgcmV0dXJuIGRheWpzLndlZWtkYXlzU2hvcnQoKTtcbiAgICAgIH0sXG4gICAgICB3ZWVrZGF5c01pbjogZnVuY3Rpb24gd2Vla2RheXNNaW4oKSB7XG4gICAgICAgIHJldHVybiBkYXlqcy53ZWVrZGF5c01pbigpO1xuICAgICAgfSxcbiAgICAgIG1vbnRoczogZnVuY3Rpb24gbW9udGhzKCkge1xuICAgICAgICByZXR1cm4gZGF5anMubW9udGhzKCk7XG4gICAgICB9LFxuICAgICAgbW9udGhzU2hvcnQ6IGZ1bmN0aW9uIG1vbnRoc1Nob3J0KCkge1xuICAgICAgICByZXR1cm4gZGF5anMubW9udGhzU2hvcnQoKTtcbiAgICAgIH0sXG4gICAgICBsb25nRGF0ZUZvcm1hdDogZnVuY3Rpb24gbG9uZ0RhdGVGb3JtYXQoZm9ybWF0KSB7XG4gICAgICAgIHJldHVybiBnZXRMb25nRGF0ZUZvcm1hdChsb2NhbGVPYmplY3QsIGZvcm1hdCk7XG4gICAgICB9LFxuICAgICAgbWVyaWRpZW06IGxvY2FsZU9iamVjdC5tZXJpZGllbSxcbiAgICAgIG9yZGluYWw6IGxvY2FsZU9iamVjdC5vcmRpbmFsXG4gICAgfTtcbiAgfTtcblxuICBkYXlqcy5tb250aHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGdldFNob3J0KGdldERheWpzTG9jYWxlT2JqZWN0KCksICdtb250aHMnKTtcbiAgfTtcblxuICBkYXlqcy5tb250aHNTaG9ydCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZ2V0U2hvcnQoZ2V0RGF5anNMb2NhbGVPYmplY3QoKSwgJ21vbnRoc1Nob3J0JywgJ21vbnRocycsIDMpO1xuICB9O1xuXG4gIGRheWpzLndlZWtkYXlzID0gZnVuY3Rpb24gKGxvY2FsZU9yZGVyKSB7XG4gICAgcmV0dXJuIGdldFNob3J0KGdldERheWpzTG9jYWxlT2JqZWN0KCksICd3ZWVrZGF5cycsIG51bGwsIG51bGwsIGxvY2FsZU9yZGVyKTtcbiAgfTtcblxuICBkYXlqcy53ZWVrZGF5c1Nob3J0ID0gZnVuY3Rpb24gKGxvY2FsZU9yZGVyKSB7XG4gICAgcmV0dXJuIGdldFNob3J0KGdldERheWpzTG9jYWxlT2JqZWN0KCksICd3ZWVrZGF5c1Nob3J0JywgJ3dlZWtkYXlzJywgMywgbG9jYWxlT3JkZXIpO1xuICB9O1xuXG4gIGRheWpzLndlZWtkYXlzTWluID0gZnVuY3Rpb24gKGxvY2FsZU9yZGVyKSB7XG4gICAgcmV0dXJuIGdldFNob3J0KGdldERheWpzTG9jYWxlT2JqZWN0KCksICd3ZWVrZGF5c01pbicsICd3ZWVrZGF5cycsIDIsIGxvY2FsZU9yZGVyKTtcbiAgfTtcbn0pO1xuXG5jb25zdCBsb2NhbGl6ZWRGb3JtYXQgPSAoZnVuY3Rpb24gKG8sIGMsIGQpIHtcbiAgdmFyIHByb3RvID0gYy5wcm90b3R5cGU7XG4gIHZhciBvbGRGb3JtYXQgPSBwcm90by5mb3JtYXQ7XG4gIGQuZW4uZm9ybWF0cyA9IGVuZ2xpc2hGb3JtYXRzO1xuXG4gIHByb3RvLmZvcm1hdCA9IGZ1bmN0aW9uIChmb3JtYXRTdHIpIHtcbiAgICBpZiAoZm9ybWF0U3RyID09PSB2b2lkIDApIHtcbiAgICAgIGZvcm1hdFN0ciA9IEZPUk1BVF9ERUZBVUxUO1xuICAgIH1cblxuICAgIHZhciBfdGhpcyQkbG9jYWxlID0gdGhpcy4kbG9jYWxlKCksXG4gICAgICAgIF90aGlzJCRsb2NhbGUkZm9ybWF0cyA9IF90aGlzJCRsb2NhbGUuZm9ybWF0cyxcbiAgICAgICAgZm9ybWF0cyA9IF90aGlzJCRsb2NhbGUkZm9ybWF0cyA9PT0gdm9pZCAwID8ge30gOiBfdGhpcyQkbG9jYWxlJGZvcm1hdHM7XG5cbiAgICB2YXIgcmVzdWx0ID0gdShmb3JtYXRTdHIsIGZvcm1hdHMpO1xuICAgIHJldHVybiBvbGRGb3JtYXQuY2FsbCh0aGlzLCByZXN1bHQpO1xuICB9O1xufSk7XG5cbi8vIFBsdWdpbiB0ZW1wbGF0ZSBmcm9tIGh0dHBzOi8vZGF5LmpzLm9yZy9kb2NzL2VuL3BsdWdpbi9wbHVnaW5cbmNvbnN0IHByZVBhcnNlUG9zdEZvcm1hdCA9IChmdW5jdGlvbiAob3B0aW9uLCBkYXlqc0NsYXNzKSB7XG4gIHZhciBvbGRQYXJzZSA9IGRheWpzQ2xhc3MucHJvdG90eXBlLnBhcnNlO1xuXG4gIGRheWpzQ2xhc3MucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24gKGNmZykge1xuICAgIGlmICh0eXBlb2YgY2ZnLmRhdGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICB2YXIgbG9jYWxlID0gdGhpcy4kbG9jYWxlKCk7XG4gICAgICBjZmcuZGF0ZSA9IGxvY2FsZSAmJiBsb2NhbGUucHJlcGFyc2UgPyBsb2NhbGUucHJlcGFyc2UoY2ZnLmRhdGUpIDogY2ZnLmRhdGU7XG4gICAgfSAvLyBvcmlnaW5hbCBwYXJzZSByZXN1bHRcblxuXG4gICAgcmV0dXJuIG9sZFBhcnNlLmJpbmQodGhpcykoY2ZnKTtcbiAgfTsgLy8gLy8gb3ZlcnJpZGluZyBleGlzdGluZyBBUElcbiAgLy8gLy8gZS5nLiBleHRlbmQgZGF5anMoKS5mb3JtYXQoKVxuXG5cbiAgdmFyIG9sZEZvcm1hdCA9IGRheWpzQ2xhc3MucHJvdG90eXBlLmZvcm1hdDtcblxuICBkYXlqc0NsYXNzLnByb3RvdHlwZS5mb3JtYXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIC8vIG9yaWdpbmFsIGZvcm1hdCByZXN1bHRcbiAgICB2YXIgcmVzdWx0ID0gb2xkRm9ybWF0LmNhbGwuYXBwbHkob2xkRm9ybWF0LCBbdGhpc10uY29uY2F0KGFyZ3MpKTsgLy8gcmV0dXJuIG1vZGlmaWVkIHJlc3VsdFxuXG4gICAgdmFyIGxvY2FsZSA9IHRoaXMuJGxvY2FsZSgpO1xuICAgIHJldHVybiBsb2NhbGUgJiYgbG9jYWxlLnBvc3Rmb3JtYXQgPyBsb2NhbGUucG9zdGZvcm1hdChyZXN1bHQpIDogcmVzdWx0O1xuICB9O1xuXG4gIHZhciBvbGRGcm9tVG8gPSBkYXlqc0NsYXNzLnByb3RvdHlwZS5mcm9tVG9CYXNlO1xuXG4gIGlmIChvbGRGcm9tVG8pIHtcbiAgICBkYXlqc0NsYXNzLnByb3RvdHlwZS5mcm9tVG9CYXNlID0gZnVuY3Rpb24gKGlucHV0LCB3aXRob3V0U3VmZml4LCBpbnN0YW5jZSwgaXNGcm9tKSB7XG4gICAgICB2YXIgbG9jYWxlID0gdGhpcy4kbG9jYWxlKCkgfHwgaW5zdGFuY2UuJGxvY2FsZSgpOyAvLyBvcmlnaW5hbCBmb3JtYXQgcmVzdWx0XG5cbiAgICAgIHJldHVybiBvbGRGcm9tVG8uY2FsbCh0aGlzLCBpbnB1dCwgd2l0aG91dFN1ZmZpeCwgaW5zdGFuY2UsIGlzRnJvbSwgbG9jYWxlICYmIGxvY2FsZS5wb3N0Zm9ybWF0KTtcbiAgICB9O1xuICB9XG59KTtcblxuY29uc3QgdXBkYXRlTG9jYWxlID0gKGZ1bmN0aW9uIChvcHRpb24sIERheWpzLCBkYXlqcykge1xuICBkYXlqcy51cGRhdGVMb2NhbGUgPSBmdW5jdGlvbiAobG9jYWxlLCBjdXN0b21Db25maWcpIHtcbiAgICB2YXIgbG9jYWxlTGlzdCA9IGRheWpzLkxzO1xuICAgIHZhciBsb2NhbGVDb25maWcgPSBsb2NhbGVMaXN0W2xvY2FsZV07XG4gICAgaWYgKCFsb2NhbGVDb25maWcpIHJldHVybjtcbiAgICB2YXIgY3VzdG9tQ29uZmlnS2V5cyA9IGN1c3RvbUNvbmZpZyA/IE9iamVjdC5rZXlzKGN1c3RvbUNvbmZpZykgOiBbXTtcbiAgICBjdXN0b21Db25maWdLZXlzLmZvckVhY2goZnVuY3Rpb24gKGMpIHtcbiAgICAgIGxvY2FsZUNvbmZpZ1tjXSA9IGN1c3RvbUNvbmZpZ1tjXTtcbiAgICB9KTtcbiAgICByZXR1cm4gbG9jYWxlQ29uZmlnOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGNvbnNpc3RlbnQtcmV0dXJuXG4gIH07XG59KTtcblxuY29uc3QgaW5wdXRUaW1lUGlja2VyQ3NzID0gXCI6aG9zdChbZGlzYWJsZWRdKXtjdXJzb3I6ZGVmYXVsdDstd2Via2l0LXVzZXItc2VsZWN0Om5vbmU7dXNlci1zZWxlY3Q6bm9uZTtvcGFjaXR5OnZhcigtLWNhbGNpdGUtdWktb3BhY2l0eS1kaXNhYmxlZCl9Omhvc3QoW2Rpc2FibGVkXSkgKiw6aG9zdChbZGlzYWJsZWRdKSA6OnNsb3R0ZWQoKil7cG9pbnRlci1ldmVudHM6bm9uZX06aG9zdHtkaXNwbGF5OmlubGluZS1ibG9jazstd2Via2l0LXVzZXItc2VsZWN0Om5vbmU7dXNlci1zZWxlY3Q6bm9uZX06aG9zdChbZGlzYWJsZWRdKSA6OnNsb3R0ZWQoW2NhbGNpdGUtaHlkcmF0ZWRdW2Rpc2FibGVkXSksOmhvc3QoW2Rpc2FibGVkXSkgW2NhbGNpdGUtaHlkcmF0ZWRdW2Rpc2FibGVkXXtvcGFjaXR5OjF9OjpzbG90dGVkKGlucHV0W3Nsb3Q9aGlkZGVuLWZvcm0taW5wdXRdKXttYXJnaW46MCAhaW1wb3J0YW50O29wYWNpdHk6MCAhaW1wb3J0YW50O291dGxpbmU6bm9uZSAhaW1wb3J0YW50O3BhZGRpbmc6MCAhaW1wb3J0YW50O3Bvc2l0aW9uOmFic29sdXRlICFpbXBvcnRhbnQ7aW5zZXQ6MCAhaW1wb3J0YW50O3RyYW5zZm9ybTpub25lICFpbXBvcnRhbnQ7LXdlYmtpdC1hcHBlYXJhbmNlOm5vbmUgIWltcG9ydGFudDt6LWluZGV4Oi0xICFpbXBvcnRhbnR9Omhvc3QoW3NjYWxlPXNdKXstLWNhbGNpdGUtdG9nZ2xlLXNwYWNpbmc6MC41cmVtfTpob3N0KFtzY2FsZT1tXSl7LS1jYWxjaXRlLXRvZ2dsZS1zcGFjaW5nOjAuNzVyZW19Omhvc3QoW3NjYWxlPWxdKXstLWNhbGNpdGUtdG9nZ2xlLXNwYWNpbmc6MXJlbX0uaW5wdXQtd3JhcHBlcntwb3NpdGlvbjpyZWxhdGl2ZX0udG9nZ2xlLWljb257cG9zaXRpb246YWJzb2x1dGU7ZGlzcGxheTpmbGV4O2lubGluZS1zaXplOjFyZW07Y3Vyc29yOnBvaW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyO2luc2V0LWlubGluZS1lbmQ6MDtpbnNldC1ibG9jazowO3BhZGRpbmctaW5saW5lOnZhcigtLWNhbGNpdGUtdG9nZ2xlLXNwYWNpbmcpfTpob3N0KFtoaWRkZW5dKXtkaXNwbGF5Om5vbmV9W2hpZGRlbl17ZGlzcGxheTpub25lfVwiO1xuXG4vLyBzb21lIGJ1bmRsZXJzIChlLmcuLCBXZWJwYWNrKSBuZWVkIGR5bmFtaWMgaW1wb3J0IHBhdGhzIHRvIGJlIHN0YXRpY1xuY29uc3Qgc3VwcG9ydGVkRGF5anNMb2NhbGVUb0xvY2FsZUNvbmZpZ0ltcG9ydCA9IG5ldyBNYXAoW1xuICBbXCJhclwiLCAoKSA9PiBpbXBvcnQoJy4vYXIuanMnKV0sXG4gIFtcImJnXCIsICgpID0+IGltcG9ydCgnLi9iZy5qcycpXSxcbiAgW1wiYnNcIiwgKCkgPT4gaW1wb3J0KCcuL2JzLmpzJyldLFxuICBbXCJjYVwiLCAoKSA9PiBpbXBvcnQoJy4vY2EuanMnKV0sXG4gIFtcImNzXCIsICgpID0+IGltcG9ydCgnLi9jcy5qcycpXSxcbiAgW1wiZGFcIiwgKCkgPT4gaW1wb3J0KCcuL2RhLmpzJyldLFxuICBbXCJkZVwiLCAoKSA9PiBpbXBvcnQoJy4vZGUuanMnKV0sXG4gIFtcImRlLWF0XCIsICgpID0+IGltcG9ydCgnLi9kZS1hdC5qcycpXSxcbiAgW1wiZGUtY2hcIiwgKCkgPT4gaW1wb3J0KCcuL2RlLWNoLmpzJyldLFxuICBbXCJlbFwiLCAoKSA9PiBpbXBvcnQoJy4vZWwuanMnKV0sXG4gIFtcImVuXCIsICgpID0+IFByb21pc2UucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gZW4kMTsgfSldLFxuICBbXCJlbi1hdVwiLCAoKSA9PiBpbXBvcnQoJy4vZW4tYXUuanMnKV0sXG4gIFtcImVuLWNhXCIsICgpID0+IGltcG9ydCgnLi9lbi1jYS5qcycpXSxcbiAgW1wiZW4tZ2JcIiwgKCkgPT4gaW1wb3J0KCcuL2VuLWdiLmpzJyldLFxuICBbXCJlc1wiLCAoKSA9PiBpbXBvcnQoJy4vZXMuanMnKV0sXG4gIFtcImVzLW14XCIsICgpID0+IGltcG9ydCgnLi9lcy1teC5qcycpXSxcbiAgW1wiZXRcIiwgKCkgPT4gaW1wb3J0KCcuL2V0LmpzJyldLFxuICBbXCJmaVwiLCAoKSA9PiBpbXBvcnQoJy4vZmkuanMnKV0sXG4gIFtcImZyXCIsICgpID0+IGltcG9ydCgnLi9mci5qcycpXSxcbiAgW1wiZnItY2hcIiwgKCkgPT4gaW1wb3J0KCcuL2ZyLWNoLmpzJyldLFxuICBbXCJoZVwiLCAoKSA9PiBpbXBvcnQoJy4vaGUuanMnKV0sXG4gIFtcImhpXCIsICgpID0+IGltcG9ydCgnLi9oaS5qcycpXSxcbiAgW1wiaHJcIiwgKCkgPT4gaW1wb3J0KCcuL2hyLmpzJyldLFxuICBbXCJodVwiLCAoKSA9PiBpbXBvcnQoJy4vaHUuanMnKV0sXG4gIFtcImlkXCIsICgpID0+IGltcG9ydCgnLi9pZC5qcycpXSxcbiAgW1wiaXRcIiwgKCkgPT4gaW1wb3J0KCcuL2l0LmpzJyldLFxuICBbXCJpdC1jaFwiLCAoKSA9PiBpbXBvcnQoJy4vaXQtY2guanMnKV0sXG4gIFtcImphXCIsICgpID0+IGltcG9ydCgnLi9qYS5qcycpXSxcbiAgW1wia29cIiwgKCkgPT4gaW1wb3J0KCcuL2tvLmpzJyldLFxuICBbXCJsdFwiLCAoKSA9PiBpbXBvcnQoJy4vbHQuanMnKV0sXG4gIFtcImx2XCIsICgpID0+IGltcG9ydCgnLi9sdi5qcycpXSxcbiAgW1wibWtcIiwgKCkgPT4gaW1wb3J0KCcuL21rLmpzJyldLFxuICBbXCJubFwiLCAoKSA9PiBpbXBvcnQoJy4vbmwuanMnKV0sXG4gIFtcIm5iXCIsICgpID0+IGltcG9ydCgnLi9uYi5qcycpXSxcbiAgW1wicGxcIiwgKCkgPT4gaW1wb3J0KCcuL3BsLmpzJyldLFxuICBbXCJwdFwiLCAoKSA9PiBpbXBvcnQoJy4vcHQuanMnKV0sXG4gIFtcInB0LWJyXCIsICgpID0+IGltcG9ydCgnLi9wdC1ici5qcycpXSxcbiAgW1wicm9cIiwgKCkgPT4gaW1wb3J0KCcuL3JvLmpzJyldLFxuICBbXCJydVwiLCAoKSA9PiBpbXBvcnQoJy4vcnUuanMnKV0sXG4gIFtcInNrXCIsICgpID0+IGltcG9ydCgnLi9zay5qcycpXSxcbiAgW1wic2xcIiwgKCkgPT4gaW1wb3J0KCcuL3NsLmpzJyldLFxuICBbXCJzclwiLCAoKSA9PiBpbXBvcnQoJy4vc3IuanMnKV0sXG4gIFtcInN2XCIsICgpID0+IGltcG9ydCgnLi9zdi5qcycpXSxcbiAgW1widGhcIiwgKCkgPT4gaW1wb3J0KCcuL3RoLmpzJyldLFxuICBbXCJ0clwiLCAoKSA9PiBpbXBvcnQoJy4vdHIuanMnKV0sXG4gIFtcInVrXCIsICgpID0+IGltcG9ydCgnLi91ay5qcycpXSxcbiAgW1widmlcIiwgKCkgPT4gaW1wb3J0KCcuL3ZpLmpzJyldLFxuICBbXCJ6aC1jblwiLCAoKSA9PiBpbXBvcnQoJy4vemgtY24uanMnKV0sXG4gIFtcInpoLWhrXCIsICgpID0+IGltcG9ydCgnLi96aC1oay5qcycpXSxcbiAgW1wiemgtdHdcIiwgKCkgPT4gaW1wb3J0KCcuL3poLXR3LmpzJyldLFxuXSk7XG5kYXlqcy5leHRlbmQoY3VzdG9tUGFyc2VGb3JtYXQpO1xuZGF5anMuZXh0ZW5kKGxvY2FsZURhdGEpO1xuZGF5anMuZXh0ZW5kKGxvY2FsaXplZEZvcm1hdCk7XG5kYXlqcy5leHRlbmQocHJlUGFyc2VQb3N0Rm9ybWF0KTtcbmRheWpzLmV4dGVuZCh1cGRhdGVMb2NhbGUpO1xuY29uc3QgSW5wdXRUaW1lUGlja2VyID0gLypAX19QVVJFX18qLyBwcm94eUN1c3RvbUVsZW1lbnQoY2xhc3MgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5fX3JlZ2lzdGVySG9zdCgpO1xuICAgIHRoaXMuX19hdHRhY2hTaGFkb3coKTtcbiAgICB0aGlzLmNhbGNpdGVJbnB1dFRpbWVQaWNrZXJDaGFuZ2UgPSBjcmVhdGVFdmVudCh0aGlzLCBcImNhbGNpdGVJbnB1dFRpbWVQaWNrZXJDaGFuZ2VcIiwgNyk7XG4gICAgdGhpcy5mb2N1c09uT3BlbiA9IGZhbHNlO1xuICAgIHRoaXMuZGlhbG9nSWQgPSBgdGltZS1waWNrZXItZGlhbG9nLS0ke2d1aWQoKX1gO1xuICAgIC8qKiB3aGV0aGVyIHRoZSB2YWx1ZSBvZiB0aGUgaW5wdXQgd2FzIGNoYW5nZWQgYXMgYSByZXN1bHQgb2YgdXNlciB0eXBpbmcgb3Igbm90ICovXG4gICAgdGhpcy51c2VyQ2hhbmdlZFZhbHVlID0gZmFsc2U7XG4gICAgdGhpcy5yZWZlcmVuY2VFbGVtZW50SWQgPSBgaW5wdXQtdGltZS1waWNrZXItJHtndWlkKCl9YDtcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy9cbiAgICAvLyAgRXZlbnQgTGlzdGVuZXJzXG4gICAgLy9cbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgdGhpcy5ob3N0Qmx1ckhhbmRsZXIgPSAoKSA9PiB7XG4gICAgICBjb25zdCBpbnB1dFZhbHVlID0gdGhpcy5jYWxjaXRlSW5wdXRFbC52YWx1ZTtcbiAgICAgIGNvbnN0IGRlbG9jYWxpemVkSW5wdXRWYWx1ZSA9IHRoaXMuZGVsb2NhbGl6ZVRpbWVTdHJpbmcoaW5wdXRWYWx1ZSk7XG4gICAgICBpZiAoIWRlbG9jYWxpemVkSW5wdXRWYWx1ZSkge1xuICAgICAgICB0aGlzLnNldFZhbHVlKFwiXCIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoZGVsb2NhbGl6ZWRJbnB1dFZhbHVlICE9PSB0aGlzLnZhbHVlKSB7XG4gICAgICAgIHRoaXMuc2V0VmFsdWUoZGVsb2NhbGl6ZWRJbnB1dFZhbHVlKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGxvY2FsaXplZFRpbWVTdHJpbmcgPSBsb2NhbGl6ZVRpbWVTdHJpbmcoe1xuICAgICAgICB2YWx1ZTogdGhpcy52YWx1ZSxcbiAgICAgICAgbG9jYWxlOiB0aGlzLmVmZmVjdGl2ZUxvY2FsZSxcbiAgICAgICAgbnVtYmVyaW5nU3lzdGVtOiB0aGlzLm51bWJlcmluZ1N5c3RlbSxcbiAgICAgICAgaW5jbHVkZVNlY29uZHM6IHRoaXMuc2hvdWxkSW5jbHVkZVNlY29uZHMoKSxcbiAgICAgICAgZnJhY3Rpb25hbFNlY29uZERpZ2l0czogZGVjaW1hbFBsYWNlcyh0aGlzLnN0ZXApLFxuICAgICAgfSk7XG4gICAgICBpZiAobG9jYWxpemVkVGltZVN0cmluZyAhPT0gaW5wdXRWYWx1ZSkge1xuICAgICAgICB0aGlzLnNldElucHV0VmFsdWUobG9jYWxpemVkVGltZVN0cmluZyk7XG4gICAgICB9XG4gICAgICB0aGlzLmRlYWN0aXZhdGUoKTtcbiAgICB9O1xuICAgIHRoaXMuY2FsY2l0ZUludGVybmFsSW5wdXRGb2N1c0hhbmRsZXIgPSAoZXZlbnQpID0+IHtcbiAgICAgIGlmICghdGhpcy5yZWFkT25seSkge1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMuY2FsY2l0ZUludGVybmFsSW5wdXRJbnB1dEhhbmRsZXIgPSAoZXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IHsgZWZmZWN0aXZlTG9jYWxlOiBsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSB9ID0gdGhpcztcbiAgICAgIGlmIChudW1iZXJpbmdTeXN0ZW0gJiYgbnVtYmVyaW5nU3lzdGVtICE9PSBcImxhdG5cIikge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQ7XG4gICAgICAgIG51bWJlclN0cmluZ0Zvcm1hdHRlci5udW1iZXJGb3JtYXRPcHRpb25zID0ge1xuICAgICAgICAgIGxvY2FsZSxcbiAgICAgICAgICBudW1iZXJpbmdTeXN0ZW0sXG4gICAgICAgICAgdXNlR3JvdXBpbmc6IGZhbHNlLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCB2YWx1ZUluTnVtYmVyaW5nU3lzdGVtID0gbnVtYmVyU3RyaW5nRm9ybWF0dGVyXG4gICAgICAgICAgLmRlbG9jYWxpemUodGFyZ2V0LnZhbHVlKVxuICAgICAgICAgIC5zcGxpdChcIlwiKVxuICAgICAgICAgIC5tYXAoKGNoYXIpID0+IG51bWJlcktleXMuaW5jbHVkZXMoY2hhcilcbiAgICAgICAgICA/IG51bWJlclN0cmluZ0Zvcm1hdHRlci5udW1iZXJGb3JtYXR0ZXIuZm9ybWF0KE51bWJlcihjaGFyKSlcbiAgICAgICAgICA6IGNoYXIpXG4gICAgICAgICAgLmpvaW4oXCJcIik7XG4gICAgICAgIHRoaXMuc2V0SW5wdXRWYWx1ZSh2YWx1ZUluTnVtYmVyaW5nU3lzdGVtKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMudGltZVBpY2tlckNoYW5nZUhhbmRsZXIgPSAoZXZlbnQpID0+IHtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xuICAgICAgY29uc3QgdmFsdWUgPSB0YXJnZXQudmFsdWU7XG4gICAgICBjb25zdCBpbmNsdWRlU2Vjb25kcyA9IHRoaXMuc2hvdWxkSW5jbHVkZVNlY29uZHMoKTtcbiAgICAgIHRoaXMuc2V0VmFsdWUodG9JU09UaW1lU3RyaW5nKHZhbHVlLCBpbmNsdWRlU2Vjb25kcykpO1xuICAgICAgdGhpcy5zZXRJbnB1dFZhbHVlKGxvY2FsaXplVGltZVN0cmluZyh7XG4gICAgICAgIHZhbHVlLFxuICAgICAgICBsb2NhbGU6IHRoaXMuZWZmZWN0aXZlTG9jYWxlLFxuICAgICAgICBudW1iZXJpbmdTeXN0ZW06IHRoaXMubnVtYmVyaW5nU3lzdGVtLFxuICAgICAgICBpbmNsdWRlU2Vjb25kcyxcbiAgICAgICAgZnJhY3Rpb25hbFNlY29uZERpZ2l0czogZGVjaW1hbFBsYWNlcyh0aGlzLnN0ZXApLFxuICAgICAgfSkpO1xuICAgIH07XG4gICAgdGhpcy5wb3BvdmVyQ2xvc2VIYW5kbGVyID0gKCkgPT4ge1xuICAgICAgZGVhY3RpdmF0ZUZvY3VzVHJhcCh0aGlzLCB7XG4gICAgICAgIG9uRGVhY3RpdmF0ZTogKCkgPT4ge1xuICAgICAgICAgIHRoaXMuY2FsY2l0ZUlucHV0RWwuc2V0Rm9jdXMoKTtcbiAgICAgICAgICB0aGlzLmZvY3VzT25PcGVuID0gZmFsc2U7XG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9O1xuICAgIHRoaXMucG9wb3Zlck9wZW5IYW5kbGVyID0gKCkgPT4ge1xuICAgICAgYWN0aXZhdGVGb2N1c1RyYXAodGhpcywge1xuICAgICAgICBvbkFjdGl2YXRlOiAoKSA9PiB7XG4gICAgICAgICAgaWYgKHRoaXMuZm9jdXNPbk9wZW4pIHtcbiAgICAgICAgICAgIHRoaXMuY2FsY2l0ZVRpbWVQaWNrZXJFbC5zZXRGb2N1cygpO1xuICAgICAgICAgICAgdGhpcy5mb2N1c09uT3BlbiA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH07XG4gICAgdGhpcy5rZXlEb3duSGFuZGxlciA9IChldmVudCkgPT4ge1xuICAgICAgY29uc3QgeyBkZWZhdWx0UHJldmVudGVkLCBrZXkgfSA9IGV2ZW50O1xuICAgICAgaWYgKGRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKGtleSA9PT0gXCJFbnRlclwiKSB7XG4gICAgICAgIGlmIChzdWJtaXRGb3JtKHRoaXMpKSB7XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB0aGlzLmNhbGNpdGVJbnB1dEVsLnNldEZvY3VzKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50LmNvbXBvc2VkUGF0aCgpLmluY2x1ZGVzKHRoaXMuY2FsY2l0ZVRpbWVQaWNrZXJFbCkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmV3VmFsdWUgPSB0aGlzLmRlbG9jYWxpemVUaW1lU3RyaW5nKHRoaXMuY2FsY2l0ZUlucHV0RWwudmFsdWUpO1xuICAgICAgICBpZiAoaXNWYWxpZFRpbWUobmV3VmFsdWUpKSB7XG4gICAgICAgICAgdGhpcy5zZXRWYWx1ZShuZXdWYWx1ZSk7XG4gICAgICAgICAgY29uc3QgbG9jYWxpemVkVGltZVN0cmluZyA9IGxvY2FsaXplVGltZVN0cmluZyh7XG4gICAgICAgICAgICB2YWx1ZTogdGhpcy52YWx1ZSxcbiAgICAgICAgICAgIGxvY2FsZTogdGhpcy5lZmZlY3RpdmVMb2NhbGUsXG4gICAgICAgICAgICBudW1iZXJpbmdTeXN0ZW06IHRoaXMubnVtYmVyaW5nU3lzdGVtLFxuICAgICAgICAgICAgaW5jbHVkZVNlY29uZHM6IHRoaXMuc2hvdWxkSW5jbHVkZVNlY29uZHMoKSxcbiAgICAgICAgICAgIGZyYWN0aW9uYWxTZWNvbmREaWdpdHM6IGRlY2ltYWxQbGFjZXModGhpcy5zdGVwKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAobmV3VmFsdWUgJiYgdGhpcy5jYWxjaXRlSW5wdXRFbC52YWx1ZSAhPT0gbG9jYWxpemVkVGltZVN0cmluZykge1xuICAgICAgICAgICAgdGhpcy5zZXRJbnB1dFZhbHVlKGxvY2FsaXplZFRpbWVTdHJpbmcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSBpZiAoa2V5ID09PSBcIkFycm93RG93blwiKSB7XG4gICAgICAgIHRoaXMub3BlbiA9IHRydWU7XG4gICAgICAgIHRoaXMuZm9jdXNPbk9wZW4gPSB0cnVlO1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoa2V5ID09PSBcIkVzY2FwZVwiICYmIHRoaXMub3Blbikge1xuICAgICAgICB0aGlzLm9wZW4gPSBmYWxzZTtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpcy5jYWxjaXRlSW5wdXRFbC5zZXRGb2N1cygpO1xuICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5zZXRDYWxjaXRlUG9wb3ZlckVsID0gKGVsKSA9PiB7XG4gICAgICB0aGlzLnBvcG92ZXJFbCA9IGVsO1xuICAgIH07XG4gICAgdGhpcy5zZXRDYWxjaXRlSW5wdXRFbCA9IChlbCkgPT4ge1xuICAgICAgdGhpcy5jYWxjaXRlSW5wdXRFbCA9IGVsO1xuICAgIH07XG4gICAgdGhpcy5zZXRDYWxjaXRlVGltZVBpY2tlckVsID0gKGVsKSA9PiB7XG4gICAgICB0aGlzLmNhbGNpdGVUaW1lUGlja2VyRWwgPSBlbDtcbiAgICAgIGNvbm5lY3RGb2N1c1RyYXAodGhpcywge1xuICAgICAgICBmb2N1c1RyYXBFbDogZWwsXG4gICAgICAgIGZvY3VzVHJhcE9wdGlvbnM6IHtcbiAgICAgICAgICBpbml0aWFsRm9jdXM6IGZhbHNlLFxuICAgICAgICAgIHNldFJldHVybkZvY3VzOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH07XG4gICAgdGhpcy5zZXRJbnB1dFZhbHVlID0gKG5ld0lucHV0VmFsdWUpID0+IHtcbiAgICAgIGlmICghdGhpcy5jYWxjaXRlSW5wdXRFbCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLmNhbGNpdGVJbnB1dEVsLnZhbHVlID0gbmV3SW5wdXRWYWx1ZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHZhbHVlIGFuZCBlbWl0cyBhIGNoYW5nZSBldmVudC5cbiAgICAgKiBUaGlzIGlzIHVzZWQgdG8gdXBkYXRlIHRoZSB2YWx1ZSBhcyBhIHJlc3VsdCBvZiB1c2VyIGludGVyYWN0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHZhbHVlXG4gICAgICovXG4gICAgdGhpcy5zZXRWYWx1ZSA9ICh2YWx1ZSkgPT4ge1xuICAgICAgY29uc3Qgb2xkVmFsdWUgPSB0aGlzLnZhbHVlO1xuICAgICAgY29uc3QgbmV3VmFsdWUgPSBmb3JtYXRUaW1lU3RyaW5nKHZhbHVlKSB8fCBcIlwiO1xuICAgICAgaWYgKG5ld1ZhbHVlID09PSBvbGRWYWx1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLnVzZXJDaGFuZ2VkVmFsdWUgPSB0cnVlO1xuICAgICAgdGhpcy52YWx1ZSA9IG5ld1ZhbHVlIHx8IFwiXCI7XG4gICAgICBjb25zdCBjaGFuZ2VFdmVudCA9IHRoaXMuY2FsY2l0ZUlucHV0VGltZVBpY2tlckNoYW5nZS5lbWl0KCk7XG4gICAgICBpZiAoY2hhbmdlRXZlbnQuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICB0aGlzLnVzZXJDaGFuZ2VkVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IG9sZFZhbHVlO1xuICAgICAgICB0aGlzLnNldElucHV0VmFsdWUobG9jYWxpemVUaW1lU3RyaW5nKHtcbiAgICAgICAgICB2YWx1ZTogb2xkVmFsdWUsXG4gICAgICAgICAgbG9jYWxlOiB0aGlzLmVmZmVjdGl2ZUxvY2FsZSxcbiAgICAgICAgICBudW1iZXJpbmdTeXN0ZW06IHRoaXMubnVtYmVyaW5nU3lzdGVtLFxuICAgICAgICAgIGluY2x1ZGVTZWNvbmRzOiB0aGlzLnNob3VsZEluY2x1ZGVTZWNvbmRzKCksXG4gICAgICAgICAgZnJhY3Rpb25hbFNlY29uZERpZ2l0czogZGVjaW1hbFBsYWNlcyh0aGlzLnN0ZXApLFxuICAgICAgICB9KSk7XG4gICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSB2YWx1ZSBkaXJlY3RseSB3aXRob3V0IGVtaXR0aW5nIGEgY2hhbmdlIGV2ZW50LlxuICAgICAqIFRoaXMgaXMgdXNlZCB0byB1cGRhdGUgdGhlIHZhbHVlIG9uIGluaXRpYWwgbG9hZCBhbmQgd2hlbiBwcm9wcyBjaGFuZ2UgdGhhdCBhcmUgbm90IHRoZSByZXN1bHQgb2YgdXNlciBpbnRlcmFjdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2YWx1ZVxuICAgICAqL1xuICAgIHRoaXMuc2V0VmFsdWVEaXJlY3RseSA9ICh2YWx1ZSkgPT4ge1xuICAgICAgY29uc3QgaW5jbHVkZVNlY29uZHMgPSB0aGlzLnNob3VsZEluY2x1ZGVTZWNvbmRzKCk7XG4gICAgICB0aGlzLnZhbHVlID0gdG9JU09UaW1lU3RyaW5nKHZhbHVlLCBpbmNsdWRlU2Vjb25kcyk7XG4gICAgICB0aGlzLnNldElucHV0VmFsdWUodGhpcy52YWx1ZVxuICAgICAgICA/IGxvY2FsaXplVGltZVN0cmluZyh7XG4gICAgICAgICAgdmFsdWU6IHRoaXMudmFsdWUsXG4gICAgICAgICAgaW5jbHVkZVNlY29uZHMsXG4gICAgICAgICAgbG9jYWxlOiB0aGlzLmVmZmVjdGl2ZUxvY2FsZSxcbiAgICAgICAgICBudW1iZXJpbmdTeXN0ZW06IHRoaXMubnVtYmVyaW5nU3lzdGVtLFxuICAgICAgICAgIGZyYWN0aW9uYWxTZWNvbmREaWdpdHM6IGRlY2ltYWxQbGFjZXModGhpcy5zdGVwKSxcbiAgICAgICAgfSlcbiAgICAgICAgOiBcIlwiKTtcbiAgICB9O1xuICAgIHRoaXMub25JbnB1dFdyYXBwZXJDbGljayA9ICgpID0+IHtcbiAgICAgIHRoaXMub3BlbiA9ICF0aGlzLm9wZW47XG4gICAgfTtcbiAgICB0aGlzLmRlYWN0aXZhdGUgPSAoKSA9PiB7XG4gICAgICB0aGlzLm9wZW4gPSBmYWxzZTtcbiAgICB9O1xuICAgIHRoaXMub3BlbiA9IGZhbHNlO1xuICAgIHRoaXMuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB0aGlzLmZvY3VzVHJhcERpc2FibGVkID0gZmFsc2U7XG4gICAgdGhpcy5mb3JtID0gdW5kZWZpbmVkO1xuICAgIHRoaXMucmVhZE9ubHkgPSBmYWxzZTtcbiAgICB0aGlzLm1lc3NhZ2VPdmVycmlkZXMgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5tZXNzYWdlcyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLm5hbWUgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5udW1iZXJpbmdTeXN0ZW0gPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5yZXF1aXJlZCA9IGZhbHNlO1xuICAgIHRoaXMuc2NhbGUgPSBcIm1cIjtcbiAgICB0aGlzLm92ZXJsYXlQb3NpdGlvbmluZyA9IFwiYWJzb2x1dGVcIjtcbiAgICB0aGlzLnBsYWNlbWVudCA9IFwiYXV0b1wiO1xuICAgIHRoaXMuc3RlcCA9IDYwO1xuICAgIHRoaXMudmFsdWUgPSBudWxsO1xuICAgIHRoaXMuZGVmYXVsdE1lc3NhZ2VzID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuZWZmZWN0aXZlTG9jYWxlID0gXCJcIjtcbiAgfVxuICBvcGVuSGFuZGxlcih2YWx1ZSkge1xuICAgIGlmICh0aGlzLmRpc2FibGVkIHx8IHRoaXMucmVhZE9ubHkpIHtcbiAgICAgIHRoaXMub3BlbiA9IGZhbHNlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIHRoaXMucmVwb3NpdGlvbih0cnVlKTtcbiAgICB9XG4gIH1cbiAgaGFuZGxlRm9jdXNUcmFwRGlzYWJsZWQoZm9jdXNUcmFwRGlzYWJsZWQpIHtcbiAgICBpZiAoIXRoaXMub3Blbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmb2N1c1RyYXBEaXNhYmxlZCA/IGRlYWN0aXZhdGVGb2N1c1RyYXAodGhpcykgOiBhY3RpdmF0ZUZvY3VzVHJhcCh0aGlzKTtcbiAgfVxuICBoYW5kbGVEaXNhYmxlZEFuZFJlYWRPbmx5Q2hhbmdlKHZhbHVlKSB7XG4gICAgaWYgKCF2YWx1ZSkge1xuICAgICAgdGhpcy5vcGVuID0gZmFsc2U7XG4gICAgfVxuICB9XG4gIG9uTWVzc2FnZXNDaGFuZ2UoKSB7XG4gICAgLyogd2lyZWQgdXAgYnkgdDluIHV0aWwgKi9cbiAgfVxuICBudW1iZXJpbmdTeXN0ZW1XYXRjaGVyKG51bWJlcmluZ1N5c3RlbSkge1xuICAgIHRoaXMuc2V0SW5wdXRWYWx1ZShsb2NhbGl6ZVRpbWVTdHJpbmcoe1xuICAgICAgdmFsdWU6IHRoaXMudmFsdWUsXG4gICAgICBsb2NhbGU6IHRoaXMuZWZmZWN0aXZlTG9jYWxlLFxuICAgICAgbnVtYmVyaW5nU3lzdGVtLFxuICAgICAgaW5jbHVkZVNlY29uZHM6IHRoaXMuc2hvdWxkSW5jbHVkZVNlY29uZHMoKSxcbiAgICAgIGZyYWN0aW9uYWxTZWNvbmREaWdpdHM6IGRlY2ltYWxQbGFjZXModGhpcy5zdGVwKSxcbiAgICB9KSk7XG4gIH1cbiAgc3RlcFdhdGNoZXIobmV3U3RlcCwgb2xkU3RlcCkge1xuICAgIGlmICgob2xkU3RlcCA+PSA2MCAmJiBuZXdTdGVwID4gMCAmJiBuZXdTdGVwIDwgNjApIHx8XG4gICAgICAobmV3U3RlcCA+PSA2MCAmJiBvbGRTdGVwID4gMCAmJiBvbGRTdGVwIDwgNjApKSB7XG4gICAgICB0aGlzLnNldFZhbHVlRGlyZWN0bHkodGhpcy52YWx1ZSk7XG4gICAgfVxuICB9XG4gIHZhbHVlV2F0Y2hlcihuZXdWYWx1ZSkge1xuICAgIGlmICghdGhpcy51c2VyQ2hhbmdlZFZhbHVlKSB7XG4gICAgICB0aGlzLnNldFZhbHVlRGlyZWN0bHkobmV3VmFsdWUpO1xuICAgIH1cbiAgICB0aGlzLnVzZXJDaGFuZ2VkVmFsdWUgPSBmYWxzZTtcbiAgfVxuICBhc3luYyBlZmZlY3RpdmVMb2NhbGVXYXRjaGVyKGxvY2FsZSkge1xuICAgIGF3YWl0IHRoaXMubG9hZERhdGVUaW1lTG9jYWxlRGF0YSgpO1xuICAgIHRoaXMuc2V0SW5wdXRWYWx1ZShsb2NhbGl6ZVRpbWVTdHJpbmcoe1xuICAgICAgdmFsdWU6IHRoaXMudmFsdWUsXG4gICAgICBsb2NhbGUsXG4gICAgICBudW1iZXJpbmdTeXN0ZW06IHRoaXMubnVtYmVyaW5nU3lzdGVtLFxuICAgICAgaW5jbHVkZVNlY29uZHM6IHRoaXMuc2hvdWxkSW5jbHVkZVNlY29uZHMoKSxcbiAgICAgIGZyYWN0aW9uYWxTZWNvbmREaWdpdHM6IGRlY2ltYWxQbGFjZXModGhpcy5zdGVwKSxcbiAgICB9KSk7XG4gIH1cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy9cbiAgLy8gIFB1YmxpYyBNZXRob2RzXG4gIC8vXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8qKiBTZXRzIGZvY3VzIG9uIHRoZSBjb21wb25lbnQuICovXG4gIGFzeW5jIHNldEZvY3VzKCkge1xuICAgIGF3YWl0IGNvbXBvbmVudEZvY3VzYWJsZSh0aGlzKTtcbiAgICB0aGlzLmVsLmZvY3VzKCk7XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIHBvc2l0aW9uIG9mIHRoZSBjb21wb25lbnQuXG4gICAqXG4gICAqIEBwYXJhbSBkZWxheWVkXG4gICAqL1xuICBhc3luYyByZXBvc2l0aW9uKGRlbGF5ZWQgPSBmYWxzZSkge1xuICAgIHRoaXMucG9wb3ZlckVsPy5yZXBvc2l0aW9uKGRlbGF5ZWQpO1xuICB9XG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vXG4gIC8vICBQcml2YXRlIE1ldGhvZHNcbiAgLy9cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgZGVsb2NhbGl6ZVRpbWVTdHJpbmcodmFsdWUpIHtcbiAgICAvLyB3ZSBuZWVkIHRvIHNldCB0aGUgY29ycmVzcG9uZGluZyBsb2NhbGUgYmVmb3JlIHBhcnNpbmcsIG90aGVyd2lzZSBpdCBkZWZhdWx0cyB0byBFbmdsaXNoIChwb3NzaWJsZSBkYXlqcyBidWcpXG4gICAgZGF5anMubG9jYWxlKHRoaXMuZWZmZWN0aXZlTG9jYWxlLnRvTG93ZXJDYXNlKCkpO1xuICAgIGNvbnN0IG5vbkZyYWN0aW9uYWxTZWNvbmRQYXJ0cyA9IHRoaXMuZGVsb2NhbGl6ZVRpbWVTdHJpbmdUb1BhcnRzKHZhbHVlKTtcbiAgICBsZXQgZGVsb2NhbGl6ZWRUaW1lU3RyaW5nO1xuICAgIGlmICh0aGlzLnNob3VsZEluY2x1ZGVGcmFjdGlvbmFsU2Vjb25kcygpKSB7XG4gICAgICBjb25zdCBzdGVwUHJlY2lzaW9uID0gZGVjaW1hbFBsYWNlcyh0aGlzLnN0ZXApO1xuICAgICAgY29uc3QgY2VudGlzZWNvbmRQYXJ0cyA9IHRoaXMuZGVsb2NhbGl6ZVRpbWVTdHJpbmdUb1BhcnRzKHZhbHVlLCBcIlNcIik7XG4gICAgICBpZiAoc3RlcFByZWNpc2lvbiA9PT0gMSkge1xuICAgICAgICBkZWxvY2FsaXplZFRpbWVTdHJpbmcgPVxuICAgICAgICAgIGNlbnRpc2Vjb25kUGFydHMubWlsbGlzZWNvbmQgIT09IDBcbiAgICAgICAgICAgID8gdGhpcy5nZXRUaW1lU3RyaW5nRnJvbVBhcnRzKGNlbnRpc2Vjb25kUGFydHMpXG4gICAgICAgICAgICA6IHRoaXMuZ2V0VGltZVN0cmluZ0Zyb21QYXJ0cyhub25GcmFjdGlvbmFsU2Vjb25kUGFydHMpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IGRlY2lzZWNvbmRQYXJ0cyA9IHRoaXMuZGVsb2NhbGl6ZVRpbWVTdHJpbmdUb1BhcnRzKHZhbHVlLCBcIlNTXCIpO1xuICAgICAgICBpZiAoc3RlcFByZWNpc2lvbiA9PT0gMikge1xuICAgICAgICAgIGlmIChkZWNpc2Vjb25kUGFydHMubWlsbGlzZWNvbmQgIT09IDApIHtcbiAgICAgICAgICAgIGRlbG9jYWxpemVkVGltZVN0cmluZyA9IHRoaXMuZ2V0VGltZVN0cmluZ0Zyb21QYXJ0cyhkZWNpc2Vjb25kUGFydHMpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmIChjZW50aXNlY29uZFBhcnRzLm1pbGxpc2Vjb25kICE9PSAwKSB7XG4gICAgICAgICAgICBkZWxvY2FsaXplZFRpbWVTdHJpbmcgPSB0aGlzLmdldFRpbWVTdHJpbmdGcm9tUGFydHMoY2VudGlzZWNvbmRQYXJ0cyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGVsb2NhbGl6ZWRUaW1lU3RyaW5nID0gdGhpcy5nZXRUaW1lU3RyaW5nRnJvbVBhcnRzKG5vbkZyYWN0aW9uYWxTZWNvbmRQYXJ0cyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHN0ZXBQcmVjaXNpb24gPj0gMykge1xuICAgICAgICAgIGNvbnN0IG1pbGxpc2Vjb25kUGFydHMgPSB0aGlzLmRlbG9jYWxpemVUaW1lU3RyaW5nVG9QYXJ0cyh2YWx1ZSwgXCJTU1NcIik7XG4gICAgICAgICAgaWYgKG1pbGxpc2Vjb25kUGFydHMubWlsbGlzZWNvbmQgIT09IDApIHtcbiAgICAgICAgICAgIGRlbG9jYWxpemVkVGltZVN0cmluZyA9IHRoaXMuZ2V0VGltZVN0cmluZ0Zyb21QYXJ0cyhtaWxsaXNlY29uZFBhcnRzKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZiAoZGVjaXNlY29uZFBhcnRzLm1pbGxpc2Vjb25kICE9PSAwKSB7XG4gICAgICAgICAgICBkZWxvY2FsaXplZFRpbWVTdHJpbmcgPSB0aGlzLmdldFRpbWVTdHJpbmdGcm9tUGFydHMoZGVjaXNlY29uZFBhcnRzKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZiAoY2VudGlzZWNvbmRQYXJ0cy5taWxsaXNlY29uZCAhPT0gMCkge1xuICAgICAgICAgICAgZGVsb2NhbGl6ZWRUaW1lU3RyaW5nID0gdGhpcy5nZXRUaW1lU3RyaW5nRnJvbVBhcnRzKGNlbnRpc2Vjb25kUGFydHMpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRlbG9jYWxpemVkVGltZVN0cmluZyA9IHRoaXMuZ2V0VGltZVN0cmluZ0Zyb21QYXJ0cyhub25GcmFjdGlvbmFsU2Vjb25kUGFydHMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGRlbG9jYWxpemVkVGltZVN0cmluZyA9IHRoaXMuZ2V0VGltZVN0cmluZ0Zyb21QYXJ0cyhub25GcmFjdGlvbmFsU2Vjb25kUGFydHMpO1xuICAgIH1cbiAgICByZXR1cm4gZGVsb2NhbGl6ZWRUaW1lU3RyaW5nO1xuICB9XG4gIGRlbG9jYWxpemVUaW1lU3RyaW5nVG9QYXJ0cyhsb2NhbGl6ZWRUaW1lU3RyaW5nLCBmcmFjdGlvbmFsU2Vjb25kRm9ybWF0VG9rZW4pIHtcbiAgICBjb25zdCBsdHNGb3JtYXRTdHJpbmcgPSB0aGlzLmxvY2FsZUNvbmZpZz8uZm9ybWF0cz8uTFRTO1xuICAgIGNvbnN0IGZyYWN0aW9uYWxTZWNvbmRUb2tlbk1hdGNoID0gbHRzRm9ybWF0U3RyaW5nLm1hdGNoKC9zc1xcLiooUyspL2cpO1xuICAgIGlmIChmcmFjdGlvbmFsU2Vjb25kRm9ybWF0VG9rZW4gJiYgdGhpcy5zaG91bGRJbmNsdWRlRnJhY3Rpb25hbFNlY29uZHMoKSkge1xuICAgICAgY29uc3Qgc2Vjb25kRm9ybWF0VG9rZW4gPSBgc3MuJHtmcmFjdGlvbmFsU2Vjb25kRm9ybWF0VG9rZW59YDtcbiAgICAgIHRoaXMubG9jYWxlQ29uZmlnLmZvcm1hdHMuTFRTID0gZnJhY3Rpb25hbFNlY29uZFRva2VuTWF0Y2hcbiAgICAgICAgPyBsdHNGb3JtYXRTdHJpbmcucmVwbGFjZShmcmFjdGlvbmFsU2Vjb25kVG9rZW5NYXRjaFswXSwgc2Vjb25kRm9ybWF0VG9rZW4pXG4gICAgICAgIDogbHRzRm9ybWF0U3RyaW5nLnJlcGxhY2UoXCJzc1wiLCBzZWNvbmRGb3JtYXRUb2tlbik7XG4gICAgfVxuICAgIGVsc2UgaWYgKGZyYWN0aW9uYWxTZWNvbmRUb2tlbk1hdGNoKSB7XG4gICAgICB0aGlzLmxvY2FsZUNvbmZpZy5mb3JtYXRzLkxUUyA9IGx0c0Zvcm1hdFN0cmluZy5yZXBsYWNlKGZyYWN0aW9uYWxTZWNvbmRUb2tlbk1hdGNoWzBdLCBcInNzXCIpO1xuICAgIH1cbiAgICBkYXlqcy51cGRhdGVMb2NhbGUodGhpcy5nZXRTdXBwb3J0ZWREYXlqc0xvY2FsZShnZXRTdXBwb3J0ZWRMb2NhbGUodGhpcy5lZmZlY3RpdmVMb2NhbGUpKSwgdGhpcy5sb2NhbGVDb25maWcpO1xuICAgIGNvbnN0IGRheWpzUGFyc2VSZXN1bHQgPSBkYXlqcyhsb2NhbGl6ZWRUaW1lU3RyaW5nLCBbXCJMVFNcIiwgXCJMVFwiXSk7XG4gICAgaWYgKGRheWpzUGFyc2VSZXN1bHQuaXNWYWxpZCgpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBob3VyOiBkYXlqc1BhcnNlUmVzdWx0LmdldChcImhvdXJcIiksXG4gICAgICAgIG1pbnV0ZTogZGF5anNQYXJzZVJlc3VsdC5nZXQoXCJtaW51dGVcIiksXG4gICAgICAgIHNlY29uZDogZGF5anNQYXJzZVJlc3VsdC5nZXQoXCJzZWNvbmRcIiksXG4gICAgICAgIG1pbGxpc2Vjb25kOiBkYXlqc1BhcnNlUmVzdWx0LmdldChcIm1pbGxpc2Vjb25kXCIpLFxuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGhvdXI6IG51bGwsXG4gICAgICBtaW51dGU6IG51bGwsXG4gICAgICBzZWNvbmQ6IG51bGwsXG4gICAgICBtaWxsaXNlY29uZDogbnVsbCxcbiAgICB9O1xuICB9XG4gIGdldFRpbWVTdHJpbmdGcm9tUGFydHMocGFydHMpIHtcbiAgICBsZXQgdGltZVN0cmluZyA9IFwiXCI7XG4gICAgaWYgKCFwYXJ0cykge1xuICAgICAgcmV0dXJuIHRpbWVTdHJpbmc7XG4gICAgfVxuICAgIGlmIChwYXJ0cy5ob3VyICE9PSBudWxsICYmIHBhcnRzLm1pbnV0ZSAhPT0gbnVsbCkge1xuICAgICAgdGltZVN0cmluZyA9IGAke2Zvcm1hdFRpbWVQYXJ0KHBhcnRzLmhvdXIpfToke2Zvcm1hdFRpbWVQYXJ0KHBhcnRzLm1pbnV0ZSl9YDtcbiAgICAgIGlmICh0aGlzLnNob3VsZEluY2x1ZGVTZWNvbmRzKCkgJiYgcGFydHMuc2Vjb25kICE9PSBudWxsKSB7XG4gICAgICAgIHRpbWVTdHJpbmcgKz0gYDoke2Zvcm1hdFRpbWVQYXJ0KHBhcnRzLnNlY29uZCl9YDtcbiAgICAgICAgaWYgKHRoaXMuc2hvdWxkSW5jbHVkZUZyYWN0aW9uYWxTZWNvbmRzKCkgJiYgcGFydHMubWlsbGlzZWNvbmQgIT09IG51bGwpIHtcbiAgICAgICAgICBjb25zdCBzZWNvbmQgPSAocGFydHMubWlsbGlzZWNvbmQgKiAwLjAwMSkudG9GaXhlZChkZWNpbWFsUGxhY2VzKHRoaXMuc3RlcCkpO1xuICAgICAgICAgIHRpbWVTdHJpbmcgKz0gYC4ke3NlY29uZC50b1N0cmluZygpLnJlcGxhY2UoXCIwLlwiLCBcIlwiKX1gO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aW1lU3RyaW5nO1xuICB9XG4gIGdldFN1cHBvcnRlZERheWpzTG9jYWxlKGxvY2FsZSkge1xuICAgIGNvbnN0IGRheWpzTG9jYWxlID0gbG9jYWxlLnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKGRheWpzTG9jYWxlID09PSBcIm5vXCIpIHtcbiAgICAgIHJldHVybiBcIm5iXCI7XG4gICAgfVxuICAgIGlmIChkYXlqc0xvY2FsZSA9PT0gXCJwdC1wdFwiKSB7XG4gICAgICByZXR1cm4gXCJwdFwiO1xuICAgIH1cbiAgICByZXR1cm4gZGF5anNMb2NhbGU7XG4gIH1cbiAgYXN5bmMgbG9hZERhdGVUaW1lTG9jYWxlRGF0YSgpIHtcbiAgICBsZXQgc3VwcG9ydGVkTG9jYWxlID0gZ2V0U3VwcG9ydGVkTG9jYWxlKHRoaXMuZWZmZWN0aXZlTG9jYWxlKS50b0xvd2VyQ2FzZSgpO1xuICAgIHN1cHBvcnRlZExvY2FsZSA9IHRoaXMuZ2V0U3VwcG9ydGVkRGF5anNMb2NhbGUoc3VwcG9ydGVkTG9jYWxlKTtcbiAgICBjb25zdCB7IGRlZmF1bHQ6IGxvY2FsZUNvbmZpZyB9ID0gYXdhaXQgc3VwcG9ydGVkRGF5anNMb2NhbGVUb0xvY2FsZUNvbmZpZ0ltcG9ydC5nZXQoc3VwcG9ydGVkTG9jYWxlKSgpO1xuICAgIHRoaXMubG9jYWxlQ29uZmlnID0gbG9jYWxlQ29uZmlnO1xuICAgIGRheWpzLmxvY2FsZSh0aGlzLmxvY2FsZUNvbmZpZywgbnVsbCwgdHJ1ZSk7XG4gICAgZGF5anMudXBkYXRlTG9jYWxlKHN1cHBvcnRlZExvY2FsZSwgdGhpcy5nZXRFeHRlbmRlZExvY2FsZUNvbmZpZyhzdXBwb3J0ZWRMb2NhbGUpKTtcbiAgfVxuICBnZXRFeHRlbmRlZExvY2FsZUNvbmZpZyhsb2NhbGUpIHtcbiAgICBpZiAobG9jYWxlID09PSBcImFyXCIpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG1lcmlkaWVtOiAoaG91cikgPT4gKGhvdXIgPiAxMiA/IFwi2YVcIiA6IFwi2LVcIiksXG4gICAgICAgIGZvcm1hdHM6IHtcbiAgICAgICAgICBMVDogXCJISDptbSBBXCIsXG4gICAgICAgICAgTFRTOiBcIkhIOm1tOnNzIEFcIixcbiAgICAgICAgICBMOiBcIkREL01NL1lZWVlcIixcbiAgICAgICAgICBMTDogXCJEIE1NTU0gWVlZWVwiLFxuICAgICAgICAgIExMTDogXCJEIE1NTU0gWVlZWSBISDptbSBBXCIsXG4gICAgICAgICAgTExMTDogXCJkZGRkIEQgTU1NTSBZWVlZIEhIOm1tIEFcIixcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgfVxuICAgIGlmIChsb2NhbGUgPT09IFwiZW4tYXVcIikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbWVyaWRpZW06IChob3VyKSA9PiAoaG91ciA+IDEyID8gXCJwbVwiIDogXCJhbVwiKSxcbiAgICAgIH07XG4gICAgfVxuICAgIGlmIChsb2NhbGUgPT09IFwiZW4tY2FcIikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbWVyaWRpZW06IChob3VyKSA9PiAoaG91ciA+IDEyID8gXCJwLm0uXCIgOiBcImEubS5cIiksXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAobG9jYWxlID09PSBcImVsXCIpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG1lcmlkaWVtOiAoaG91cikgPT4gKGhvdXIgPiAxMiA/IFwizrwuzrwuXCIgOiBcIs+ALs68LlwiKSxcbiAgICAgIH07XG4gICAgfVxuICAgIGlmIChsb2NhbGUgPT09IFwiaGlcIikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZm9ybWF0czoge1xuICAgICAgICAgIExUOiBcImg6bW0gQVwiLFxuICAgICAgICAgIExUUzogXCJoOm1tOnNzIEFcIixcbiAgICAgICAgICBMOiBcIkREL01NL1lZWVlcIixcbiAgICAgICAgICBMTDogXCJEIE1NTU0gWVlZWVwiLFxuICAgICAgICAgIExMTDogXCJEIE1NTU0gWVlZWSwgaDptbSBBXCIsXG4gICAgICAgICAgTExMTDogXCJkZGRkLCBEIE1NTU0gWVlZWSwgaDptbSBBXCIsXG4gICAgICAgIH0sXG4gICAgICAgIG1lcmlkaWVtOiAoaG91cikgPT4gKGhvdXIgPiAxMiA/IFwicG1cIiA6IFwiYW1cIiksXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAobG9jYWxlID09PSBcImtvXCIpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG1lcmlkaWVtOiAoaG91cikgPT4gKGhvdXIgPiAxMiA/IFwi7Jik7ZuEXCIgOiBcIuyYpOyghFwiKSxcbiAgICAgIH07XG4gICAgfVxuICAgIGlmIChsb2NhbGUgPT09IFwiemgtdHdcIikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZm9ybWF0czoge1xuICAgICAgICAgIExUOiBcIkFISDptbVwiLFxuICAgICAgICAgIExUUzogXCJBSEg6bW06c3NcIixcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgfVxuICAgIGlmIChsb2NhbGUgPT09IFwiemgtaGtcIikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZm9ybWF0czoge1xuICAgICAgICAgIExUOiBcIkFISDptbVwiLFxuICAgICAgICAgIExUUzogXCJBSEg6bW06c3NcIixcbiAgICAgICAgfSxcbiAgICAgICAgbWVyaWRpZW06IChob3VyKSA9PiAoaG91ciA+IDEyID8gXCLkuIvljYhcIiA6IFwi5LiK5Y2IXCIpLFxuICAgICAgfTtcbiAgICB9XG4gIH1cbiAgb25MYWJlbENsaWNrKCkge1xuICAgIHRoaXMuc2V0Rm9jdXMoKTtcbiAgfVxuICBzaG91bGRJbmNsdWRlU2Vjb25kcygpIHtcbiAgICByZXR1cm4gdGhpcy5zdGVwIDwgNjA7XG4gIH1cbiAgc2hvdWxkSW5jbHVkZUZyYWN0aW9uYWxTZWNvbmRzKCkge1xuICAgIHJldHVybiBkZWNpbWFsUGxhY2VzKHRoaXMuc3RlcCkgPiAwO1xuICB9XG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy9cbiAgLy8gIExpZmVjeWNsZVxuICAvL1xuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIGNvbm5lY3RJbnRlcmFjdGl2ZSh0aGlzKTtcbiAgICBjb25uZWN0TG9jYWxpemVkKHRoaXMpO1xuICAgIGlmIChpc1ZhbGlkVGltZSh0aGlzLnZhbHVlKSkge1xuICAgICAgdGhpcy5zZXRWYWx1ZURpcmVjdGx5KHRoaXMudmFsdWUpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHRoaXMudmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbm5lY3RMYWJlbCh0aGlzKTtcbiAgICBjb25uZWN0Rm9ybSh0aGlzKTtcbiAgICBjb25uZWN0TWVzc2FnZXModGhpcyk7XG4gIH1cbiAgYXN5bmMgY29tcG9uZW50V2lsbExvYWQoKSB7XG4gICAgc2V0VXBMb2FkYWJsZUNvbXBvbmVudCh0aGlzKTtcbiAgICBhd2FpdCBQcm9taXNlLmFsbChbc2V0VXBNZXNzYWdlcyh0aGlzKSwgdGhpcy5sb2FkRGF0ZVRpbWVMb2NhbGVEYXRhKCldKTtcbiAgfVxuICBjb21wb25lbnREaWRMb2FkKCkge1xuICAgIHNldENvbXBvbmVudExvYWRlZCh0aGlzKTtcbiAgICBpZiAoaXNWYWxpZFRpbWUodGhpcy52YWx1ZSkpIHtcbiAgICAgIHRoaXMuc2V0SW5wdXRWYWx1ZShsb2NhbGl6ZVRpbWVTdHJpbmcoe1xuICAgICAgICB2YWx1ZTogdGhpcy52YWx1ZSxcbiAgICAgICAgbG9jYWxlOiB0aGlzLmVmZmVjdGl2ZUxvY2FsZSxcbiAgICAgICAgbnVtYmVyaW5nU3lzdGVtOiB0aGlzLm51bWJlcmluZ1N5c3RlbSxcbiAgICAgICAgaW5jbHVkZVNlY29uZHM6IHRoaXMuc2hvdWxkSW5jbHVkZVNlY29uZHMoKSxcbiAgICAgICAgZnJhY3Rpb25hbFNlY29uZERpZ2l0czogZGVjaW1hbFBsYWNlcyh0aGlzLnN0ZXApLFxuICAgICAgfSkpO1xuICAgIH1cbiAgfVxuICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBkaXNjb25uZWN0SW50ZXJhY3RpdmUodGhpcyk7XG4gICAgZGlzY29ubmVjdExhYmVsKHRoaXMpO1xuICAgIGRpc2Nvbm5lY3RGb3JtKHRoaXMpO1xuICAgIGRpc2Nvbm5lY3RMb2NhbGl6ZWQodGhpcyk7XG4gICAgZGVhY3RpdmF0ZUZvY3VzVHJhcCh0aGlzKTtcbiAgICBkaXNjb25uZWN0TWVzc2FnZXModGhpcyk7XG4gIH1cbiAgY29tcG9uZW50RGlkUmVuZGVyKCkge1xuICAgIHVwZGF0ZUhvc3RJbnRlcmFjdGlvbih0aGlzKTtcbiAgfVxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvL1xuICAvLyAgUmVuZGVyIE1ldGhvZHNcbiAgLy9cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHsgZGlzYWJsZWQsIG1lc3NhZ2VzLCByZWFkT25seSwgZGlhbG9nSWQgfSA9IHRoaXM7XG4gICAgcmV0dXJuIChoKEhvc3QsIHsgb25CbHVyOiB0aGlzLmhvc3RCbHVySGFuZGxlciwgb25LZXlEb3duOiB0aGlzLmtleURvd25IYW5kbGVyIH0sIGgoXCJkaXZcIiwgeyBjbGFzczogXCJpbnB1dC13cmFwcGVyXCIsIG9uQ2xpY2s6IHRoaXMub25JbnB1dFdyYXBwZXJDbGljayB9LCBoKFwiY2FsY2l0ZS1pbnB1dFwiLCB7IFwiYXJpYS1hdXRvY29tcGxldGVcIjogXCJub25lXCIsIFwiYXJpYS1oYXNwb3B1cFwiOiBcImRpYWxvZ1wiLCBkaXNhYmxlZDogZGlzYWJsZWQsIGljb246IFwiY2xvY2tcIiwgaWQ6IHRoaXMucmVmZXJlbmNlRWxlbWVudElkLCBsYWJlbDogZ2V0TGFiZWxUZXh0KHRoaXMpLCBsYW5nOiB0aGlzLmVmZmVjdGl2ZUxvY2FsZSwgb25DYWxjaXRlSW5wdXRJbnB1dDogdGhpcy5jYWxjaXRlSW50ZXJuYWxJbnB1dElucHV0SGFuZGxlciwgb25DYWxjaXRlSW50ZXJuYWxJbnB1dEZvY3VzOiB0aGlzLmNhbGNpdGVJbnRlcm5hbElucHV0Rm9jdXNIYW5kbGVyLCByZWFkT25seTogcmVhZE9ubHksIHJvbGU6IFwiY29tYm9ib3hcIiwgc2NhbGU6IHRoaXMuc2NhbGUsIHN0ZXA6IHRoaXMuc3RlcCxcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC9qc3gtc29ydC1wcm9wcyAtLSByZWYgc2hvdWxkIGJlIGxhc3Qgc28gbm9kZSBhdHRycy9wcm9wcyBhcmUgaW4gc3luYyAoc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtZGVzaWduLXN5c3RlbS9wdWxsLzY1MzApXG4gICAgICByZWY6IHRoaXMuc2V0Q2FsY2l0ZUlucHV0RWwgfSksICF0aGlzLnJlYWRPbmx5ICYmIHRoaXMucmVuZGVyVG9nZ2xlSWNvbih0aGlzLm9wZW4pKSwgaChcImNhbGNpdGUtcG9wb3ZlclwiLCB7IGZvY3VzVHJhcERpc2FibGVkOiB0cnVlLCBpZDogZGlhbG9nSWQsIGxhYmVsOiBtZXNzYWdlcy5jaG9vc2VUaW1lLCBsYW5nOiB0aGlzLmVmZmVjdGl2ZUxvY2FsZSwgb25DYWxjaXRlUG9wb3ZlckNsb3NlOiB0aGlzLnBvcG92ZXJDbG9zZUhhbmRsZXIsIG9uQ2FsY2l0ZVBvcG92ZXJPcGVuOiB0aGlzLnBvcG92ZXJPcGVuSGFuZGxlciwgb3BlbjogdGhpcy5vcGVuLCBvdmVybGF5UG9zaXRpb25pbmc6IHRoaXMub3ZlcmxheVBvc2l0aW9uaW5nLCBwbGFjZW1lbnQ6IHRoaXMucGxhY2VtZW50LCByZWZlcmVuY2VFbGVtZW50OiB0aGlzLnJlZmVyZW5jZUVsZW1lbnRJZCwgdHJpZ2dlckRpc2FibGVkOiB0cnVlLFxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0L2pzeC1zb3J0LXByb3BzIC0tIHJlZiBzaG91bGQgYmUgbGFzdCBzbyBub2RlIGF0dHJzL3Byb3BzIGFyZSBpbiBzeW5jIChzZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1kZXNpZ24tc3lzdGVtL3B1bGwvNjUzMClcbiAgICAgIHJlZjogdGhpcy5zZXRDYWxjaXRlUG9wb3ZlckVsIH0sIGgoXCJjYWxjaXRlLXRpbWUtcGlja2VyXCIsIHsgbGFuZzogdGhpcy5lZmZlY3RpdmVMb2NhbGUsIG1lc3NhZ2VPdmVycmlkZXM6IHRoaXMubWVzc2FnZU92ZXJyaWRlcywgbnVtYmVyaW5nU3lzdGVtOiB0aGlzLm51bWJlcmluZ1N5c3RlbSwgb25DYWxjaXRlSW50ZXJuYWxUaW1lUGlja2VyQ2hhbmdlOiB0aGlzLnRpbWVQaWNrZXJDaGFuZ2VIYW5kbGVyLCBzY2FsZTogdGhpcy5zY2FsZSwgc3RlcDogdGhpcy5zdGVwLCB0YWJJbmRleDogdGhpcy5vcGVuID8gdW5kZWZpbmVkIDogLTEsIHZhbHVlOiB0aGlzLnZhbHVlLFxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0L2pzeC1zb3J0LXByb3BzIC0tIHJlZiBzaG91bGQgYmUgbGFzdCBzbyBub2RlIGF0dHJzL3Byb3BzIGFyZSBpbiBzeW5jIChzZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1kZXNpZ24tc3lzdGVtL3B1bGwvNjUzMClcbiAgICAgIHJlZjogdGhpcy5zZXRDYWxjaXRlVGltZVBpY2tlckVsIH0pKSwgaChIaWRkZW5Gb3JtSW5wdXRTbG90LCB7IGNvbXBvbmVudDogdGhpcyB9KSkpO1xuICB9XG4gIHJlbmRlclRvZ2dsZUljb24ob3Blbikge1xuICAgIHJldHVybiAoaChcInNwYW5cIiwgeyBjbGFzczogQ1NTLnRvZ2dsZUljb24gfSwgaChcImNhbGNpdGUtaWNvblwiLCB7IGljb246IG9wZW4gPyBcImNoZXZyb24tdXBcIiA6IFwiY2hldnJvbi1kb3duXCIsIHNjYWxlOiBcInNcIiB9KSkpO1xuICB9XG4gIHN0YXRpYyBnZXQgZGVsZWdhdGVzRm9jdXMoKSB7IHJldHVybiB0cnVlOyB9XG4gIHN0YXRpYyBnZXQgYXNzZXRzRGlycygpIHsgcmV0dXJuIFtcImFzc2V0c1wiXTsgfVxuICBnZXQgZWwoKSB7IHJldHVybiB0aGlzOyB9XG4gIHN0YXRpYyBnZXQgd2F0Y2hlcnMoKSB7IHJldHVybiB7XG4gICAgXCJvcGVuXCI6IFtcIm9wZW5IYW5kbGVyXCJdLFxuICAgIFwiZm9jdXNUcmFwRGlzYWJsZWRcIjogW1wiaGFuZGxlRm9jdXNUcmFwRGlzYWJsZWRcIl0sXG4gICAgXCJkaXNhYmxlZFwiOiBbXCJoYW5kbGVEaXNhYmxlZEFuZFJlYWRPbmx5Q2hhbmdlXCJdLFxuICAgIFwicmVhZE9ubHlcIjogW1wiaGFuZGxlRGlzYWJsZWRBbmRSZWFkT25seUNoYW5nZVwiXSxcbiAgICBcIm1lc3NhZ2VPdmVycmlkZXNcIjogW1wib25NZXNzYWdlc0NoYW5nZVwiXSxcbiAgICBcIm51bWJlcmluZ1N5c3RlbVwiOiBbXCJudW1iZXJpbmdTeXN0ZW1XYXRjaGVyXCJdLFxuICAgIFwic3RlcFwiOiBbXCJzdGVwV2F0Y2hlclwiXSxcbiAgICBcInZhbHVlXCI6IFtcInZhbHVlV2F0Y2hlclwiXSxcbiAgICBcImVmZmVjdGl2ZUxvY2FsZVwiOiBbXCJlZmZlY3RpdmVMb2NhbGVXYXRjaGVyXCJdXG4gIH07IH1cbiAgc3RhdGljIGdldCBzdHlsZSgpIHsgcmV0dXJuIGlucHV0VGltZVBpY2tlckNzczsgfVxufSwgWzE3LCBcImNhbGNpdGUtaW5wdXQtdGltZS1waWNrZXJcIiwge1xuICAgIFwib3BlblwiOiBbMTU0MF0sXG4gICAgXCJkaXNhYmxlZFwiOiBbNTE2XSxcbiAgICBcImZvY3VzVHJhcERpc2FibGVkXCI6IFs1MTYsIFwiZm9jdXMtdHJhcC1kaXNhYmxlZFwiXSxcbiAgICBcImZvcm1cIjogWzUxM10sXG4gICAgXCJyZWFkT25seVwiOiBbNTE2LCBcInJlYWQtb25seVwiXSxcbiAgICBcIm1lc3NhZ2VPdmVycmlkZXNcIjogWzEwNDBdLFxuICAgIFwibWVzc2FnZXNcIjogWzEwNDBdLFxuICAgIFwibmFtZVwiOiBbMV0sXG4gICAgXCJudW1iZXJpbmdTeXN0ZW1cIjogWzEsIFwibnVtYmVyaW5nLXN5c3RlbVwiXSxcbiAgICBcInJlcXVpcmVkXCI6IFs1MTZdLFxuICAgIFwic2NhbGVcIjogWzUxM10sXG4gICAgXCJvdmVybGF5UG9zaXRpb25pbmdcIjogWzEsIFwib3ZlcmxheS1wb3NpdGlvbmluZ1wiXSxcbiAgICBcInBsYWNlbWVudFwiOiBbNTEzXSxcbiAgICBcInN0ZXBcIjogWzJdLFxuICAgIFwidmFsdWVcIjogWzEwMjVdLFxuICAgIFwiZGVmYXVsdE1lc3NhZ2VzXCI6IFszMl0sXG4gICAgXCJlZmZlY3RpdmVMb2NhbGVcIjogWzMyXSxcbiAgICBcInNldEZvY3VzXCI6IFs2NF0sXG4gICAgXCJyZXBvc2l0aW9uXCI6IFs2NF1cbiAgfV0pO1xuZnVuY3Rpb24gZGVmaW5lQ3VzdG9tRWxlbWVudCQxKCkge1xuICBpZiAodHlwZW9mIGN1c3RvbUVsZW1lbnRzID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IGNvbXBvbmVudHMgPSBbXCJjYWxjaXRlLWlucHV0LXRpbWUtcGlja2VyXCIsIFwiY2FsY2l0ZS1hY3Rpb25cIiwgXCJjYWxjaXRlLWljb25cIiwgXCJjYWxjaXRlLWlucHV0XCIsIFwiY2FsY2l0ZS1sb2FkZXJcIiwgXCJjYWxjaXRlLXBvcG92ZXJcIiwgXCJjYWxjaXRlLXByb2dyZXNzXCIsIFwiY2FsY2l0ZS10aW1lLXBpY2tlclwiXTtcbiAgY29tcG9uZW50cy5mb3JFYWNoKHRhZ05hbWUgPT4geyBzd2l0Y2ggKHRhZ05hbWUpIHtcbiAgICBjYXNlIFwiY2FsY2l0ZS1pbnB1dC10aW1lLXBpY2tlclwiOlxuICAgICAgaWYgKCFjdXN0b21FbGVtZW50cy5nZXQodGFnTmFtZSkpIHtcbiAgICAgICAgY3VzdG9tRWxlbWVudHMuZGVmaW5lKHRhZ05hbWUsIElucHV0VGltZVBpY2tlcik7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwiY2FsY2l0ZS1hY3Rpb25cIjpcbiAgICAgIGlmICghY3VzdG9tRWxlbWVudHMuZ2V0KHRhZ05hbWUpKSB7XG4gICAgICAgIGRlZmluZUN1c3RvbUVsZW1lbnQkOCgpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcImNhbGNpdGUtaWNvblwiOlxuICAgICAgaWYgKCFjdXN0b21FbGVtZW50cy5nZXQodGFnTmFtZSkpIHtcbiAgICAgICAgZGVmaW5lQ3VzdG9tRWxlbWVudCQ3KCk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwiY2FsY2l0ZS1pbnB1dFwiOlxuICAgICAgaWYgKCFjdXN0b21FbGVtZW50cy5nZXQodGFnTmFtZSkpIHtcbiAgICAgICAgZGVmaW5lQ3VzdG9tRWxlbWVudCQ2KCk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwiY2FsY2l0ZS1sb2FkZXJcIjpcbiAgICAgIGlmICghY3VzdG9tRWxlbWVudHMuZ2V0KHRhZ05hbWUpKSB7XG4gICAgICAgIGRlZmluZUN1c3RvbUVsZW1lbnQkNSgpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcImNhbGNpdGUtcG9wb3ZlclwiOlxuICAgICAgaWYgKCFjdXN0b21FbGVtZW50cy5nZXQodGFnTmFtZSkpIHtcbiAgICAgICAgZGVmaW5lQ3VzdG9tRWxlbWVudCQ0KCk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwiY2FsY2l0ZS1wcm9ncmVzc1wiOlxuICAgICAgaWYgKCFjdXN0b21FbGVtZW50cy5nZXQodGFnTmFtZSkpIHtcbiAgICAgICAgZGVmaW5lQ3VzdG9tRWxlbWVudCQzKCk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwiY2FsY2l0ZS10aW1lLXBpY2tlclwiOlxuICAgICAgaWYgKCFjdXN0b21FbGVtZW50cy5nZXQodGFnTmFtZSkpIHtcbiAgICAgICAgZGVmaW5lQ3VzdG9tRWxlbWVudCQyKCk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgfSB9KTtcbn1cbmRlZmluZUN1c3RvbUVsZW1lbnQkMSgpO1xuXG5jb25zdCBDYWxjaXRlSW5wdXRUaW1lUGlja2VyID0gSW5wdXRUaW1lUGlja2VyO1xuY29uc3QgZGVmaW5lQ3VzdG9tRWxlbWVudCA9IGRlZmluZUN1c3RvbUVsZW1lbnQkMTtcblxuZXhwb3J0IHsgQ2FsY2l0ZUlucHV0VGltZVBpY2tlciwgZGF5anMgYXMgZCwgZGVmaW5lQ3VzdG9tRWxlbWVudCB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9