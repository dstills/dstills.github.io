"use strict";
(self["webpackChunksynview"] = self["webpackChunksynview"] || []).push([["vendors-node_modules_arcgis_core_views_3d_layers_I3SMeshView3D_js"],{

/***/ "./node_modules/@arcgis/core/core/accessorSupport/decorators/persistable.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/core/accessorSupport/decorators/persistable.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   persistable: () => (/* binding */ j)
/* harmony export */ });
/* harmony import */ var _Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _MD5_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../MD5.js */ "./node_modules/@arcgis/core/core/MD5.js");
/* harmony import */ var _multiOriginJSONSupportUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../multiOriginJSONSupportUtils.js */ "./node_modules/@arcgis/core/core/multiOriginJSONSupportUtils.js");
/* harmony import */ var _urlUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../urlUtils.js */ "./node_modules/@arcgis/core/core/urlUtils.js");
/* harmony import */ var _uuid_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../uuid.js */ "./node_modules/@arcgis/core/core/uuid.js");
/* harmony import */ var _metadata_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../metadata.js */ "./node_modules/@arcgis/core/core/accessorSupport/metadata.js");
/* harmony import */ var _PropertyOrigin_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../PropertyOrigin.js */ "./node_modules/@arcgis/core/core/accessorSupport/PropertyOrigin.js");
/* harmony import */ var _property_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _portal_support_resourceExtension_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../portal/support/resourceExtension.js */ "./node_modules/@arcgis/core/portal/support/resourceExtension.js");
/* harmony import */ var _chunks_persistableUrlUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../chunks/persistableUrlUtils.js */ "./node_modules/@arcgis/core/chunks/persistableUrlUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function j(t){const r=t?.origins??[void 0];return(e,o)=>{const s=U(t,e,o);for(const t of r){const r=(0,_property_js__WEBPACK_IMPORTED_MODULE_7__.propertyJSONMeta)(e,t,o);for(const t in s)r[t]=s[t]}}}function U(t,r,e){if("resource"===t?.type)return w(t,r,e);switch(t?.type??"other"){case"other":return{read:!0,write:!0};case"url":{const{read:t,write:r}=_chunks_persistableUrlUtils_js__WEBPACK_IMPORTED_MODULE_9__.a;return{read:t,write:r}}}}function w(t,r,n){const i=(0,_metadata_js__WEBPACK_IMPORTED_MODULE_5__.getPropertyMetadata)(r,n);return{type:String,read:(t,r,e)=>{const o=(0,_chunks_persistableUrlUtils_js__WEBPACK_IMPORTED_MODULE_9__.r)(t,r,e);return i.type===String?o:"function"==typeof i.type?new i.type({url:o}):void 0},write:{writer(r,p,c,u){if(!u?.resources)return"string"==typeof r?void(p[c]=(0,_chunks_persistableUrlUtils_js__WEBPACK_IMPORTED_MODULE_9__.t)(r,u)):void(p[c]=r.write({},u));const l=x(r),m=(0,_chunks_persistableUrlUtils_js__WEBPACK_IMPORTED_MODULE_9__.t)(l,{...u,verifyItemRelativeUrls:u?.verifyItemRelativeUrls?{writtenUrls:u.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},_chunks_persistableUrlUtils_js__WEBPACK_IMPORTED_MODULE_9__.M.NO),d=i.type!==String&&(!(0,_multiOriginJSONSupportUtils_js__WEBPACK_IMPORTED_MODULE_2__.isMultiOriginJSONMixin)(this)||u?.origin&&this.originIdOf(n)>(0,_PropertyOrigin_js__WEBPACK_IMPORTED_MODULE_6__.nameToId)(u.origin)),h={object:this,propertyName:n,value:r,targetUrl:m,dest:p,targetPropertyName:c,context:u,params:t};u?.portalItem&&m&&!(0,_urlUtils_js__WEBPACK_IMPORTED_MODULE_3__.isAbsolute)(m)?d&&t?.contentAddressed?I(h):d?N(h):P(h):u?.portalItem&&(null==m||null!=(0,_chunks_persistableUrlUtils_js__WEBPACK_IMPORTED_MODULE_9__.i)(m)||(0,_urlUtils_js__WEBPACK_IMPORTED_MODULE_3__.isBlobProtocol)(m)||d)?I(h):p[c]=m}}}}function I(e){const{targetUrl:o,params:p,value:u,context:a,dest:l,targetPropertyName:d}=e;if(!a.portalItem)return;const f=(0,_chunks_persistableUrlUtils_js__WEBPACK_IMPORTED_MODULE_9__.p)(o),y=b(u,o,a);if(p?.contentAddressed&&"json"!==y.type)return void a.messages?.push(new _Error_js__WEBPACK_IMPORTED_MODULE_0__["default"]("persistable:contentAddressingUnsupported",`Property "${d}" is trying to serializing a resource with content of type ${y.type} with content addressing. Content addressing is only supported for json resources.`,{content:y}));const g=p?.contentAddressed&&"json"===y.type?(0,_MD5_js__WEBPACK_IMPORTED_MODULE_1__.createMD5Hash)(y.jsonString):f?.filename??(0,_uuid_js__WEBPACK_IMPORTED_MODULE_4__.generateUUID)(),v=(0,_urlUtils_js__WEBPACK_IMPORTED_MODULE_3__.join)(p?.prefix??f?.prefix,g),j=`${v}.${(0,_portal_support_resourceExtension_js__WEBPACK_IMPORTED_MODULE_8__.getResourceContentExtension)(y)}`;if(p?.contentAddressed&&a.resources&&"json"===y.type){const t=a.resources.toKeep.find((t=>t.resource.path===j))??a.resources.toAdd.find((t=>t.resource.path===j));if(t)return void(l[d]=t.resource.itemRelativeUrl)}const U=a.portalItem.resourceFromPath(j);(0,_urlUtils_js__WEBPACK_IMPORTED_MODULE_3__.isBlobProtocol)(o)&&a.resources&&a.resources.pendingOperations.push((0,_urlUtils_js__WEBPACK_IMPORTED_MODULE_3__.blobUrlToBlob)(o).then((t=>{U.path=`${v}.${(0,_portal_support_resourceExtension_js__WEBPACK_IMPORTED_MODULE_8__.getResourceContentExtension)({type:"blob",blob:t})}`,l[d]=U.itemRelativeUrl})).catch((()=>{})));const w=p?.compress??!1;a.resources&&S({...e,resource:U,content:y,compress:w,updates:a.resources.toAdd}),l[d]=U.itemRelativeUrl}function N(t){const{context:r,targetUrl:e,params:o,value:s,dest:n,targetPropertyName:i}=t;if(!r.portalItem)return;const c=r.portalItem.resourceFromPath(e),u=b(s,e,r),a=(0,_portal_support_resourceExtension_js__WEBPACK_IMPORTED_MODULE_8__.getResourceContentExtension)(u),l=(0,_urlUtils_js__WEBPACK_IMPORTED_MODULE_3__.getPathExtension)(c.path),d=o?.compress??!1;a===l?(r.resources&&S({...t,resource:c,content:u,compress:d,updates:r.resources.toUpdate}),n[i]=e):I(t)}function P({context:t,targetUrl:r,dest:e,targetPropertyName:o}){t.portalItem&&t.resources&&(t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(r),compress:!1}),e[o]=r)}function S({object:t,propertyName:r,updates:e,resource:o,content:s,compress:n}){e.push({resource:o,content:s,compress:n,finish:e=>{O(t,r,e)}})}function b(t,r,e){return"string"==typeof t?{type:"url",url:r}:{type:"json",jsonString:JSON.stringify(t.toJSON(e))}}function x(t){return null==t?null:"string"==typeof t?t:t.url}function O(t,r,e){"string"==typeof t[r]?t[r]=e.url:t[r].url=e.url}


/***/ }),

/***/ "./node_modules/@arcgis/core/core/multiOriginJSONSupportUtils.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@arcgis/core/core/multiOriginJSONSupportUtils.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isMultiOriginJSONMixin: () => (/* binding */ i)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function i(i){return i&&"getAtOrigin"in i&&"originOf"in i}


/***/ }),

/***/ "./node_modules/@arcgis/core/geometry/projection/localLinearScaleFactors.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/geometry/projection/localLinearScaleFactors.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   localLinearScaleFactors: () => (/* binding */ f)
/* harmony export */ });
/* harmony import */ var _chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/vec3.js */ "./node_modules/@arcgis/core/chunks/vec3.js");
/* harmony import */ var _projectors_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./projectors.js */ "./node_modules/@arcgis/core/geometry/projection/projectors.js");
/* harmony import */ var _support_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../support/Ellipsoid.js */ "./node_modules/@arcgis/core/geometry/support/Ellipsoid.js");
/* harmony import */ var _support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../support/spatialReferenceUtils.js */ "./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function f(f,p,E,c){if(null==p||null==c)return!1;const l=(0,_projectors_js__WEBPACK_IMPORTED_MODULE_1__.classifySpatialReference)(p,_projectors_js__WEBPACK_IMPORTED_MODULE_1__.sourceClassificationCache),C=(0,_projectors_js__WEBPACK_IMPORTED_MODULE_1__.classifySpatialReference)(c,_projectors_js__WEBPACK_IMPORTED_MODULE_1__.destClassificationCache);if(l===C&&l!==_projectors_js__WEBPACK_IMPORTED_MODULE_1__.ProjectionID.UNKNOWN||(0,_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_3__.equals)(p,c))return E[0]=1,E[1]=1,E[2]=1,!0;if(l===_projectors_js__WEBPACK_IMPORTED_MODULE_1__.ProjectionID.SPHERICAL_ECEF){const t=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.l)(f),s=t/Math.sqrt(f[0]*f[0]+f[1]*f[1]),o=t/_support_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_2__.earth.radius;if(C===_projectors_js__WEBPACK_IMPORTED_MODULE_1__.ProjectionID.WEB_MERCATOR)return E[0]=s*o,E[1]=s*o,E[2]=1,!0;if(C===_projectors_js__WEBPACK_IMPORTED_MODULE_1__.ProjectionID.WGS84||C===_projectors_js__WEBPACK_IMPORTED_MODULE_1__.ProjectionID.CGCS2000){const r=_projectors_js__WEBPACK_IMPORTED_MODULE_1__.invPlateCarreeScale;return E[0]=r*s*o,E[1]=r*o,E[2]=1,!0}}else if(l===_projectors_js__WEBPACK_IMPORTED_MODULE_1__.ProjectionID.PLATE_CARREE){if(C===_projectors_js__WEBPACK_IMPORTED_MODULE_1__.ProjectionID.WGS84||C===_projectors_js__WEBPACK_IMPORTED_MODULE_1__.ProjectionID.CGCS2000)return E[0]=_projectors_js__WEBPACK_IMPORTED_MODULE_1__.invPlateCarreeScale,E[1]=_projectors_js__WEBPACK_IMPORTED_MODULE_1__.invPlateCarreeScale,E[2]=1,!0;if(C===_projectors_js__WEBPACK_IMPORTED_MODULE_1__.ProjectionID.WEB_MERCATOR){const r=f[1]/_support_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_2__.earth.radius;return E[0]=1,E[1]=1/Math.cos(r),E[2]=1,!0}}return!1}


/***/ }),

/***/ "./node_modules/@arcgis/core/geometry/support/UByteArray.js":
/*!******************************************************************!*\
  !*** ./node_modules/@arcgis/core/geometry/support/UByteArray.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   newUByteArray: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/typedArrayUtil.js */ "./node_modules/@arcgis/core/core/typedArrayUtil.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function e(e,n=!1){return e<=_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__.nativeArrayMaxSize?n?new Array(e).fill(0):new Array(e):new Uint8Array(e)}


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/support/SceneModification.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/support/SceneModification.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ f)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _geometry_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../geometry.js */ "./node_modules/@arcgis/core/geometry.js");
/* harmony import */ var _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/JSONSupport.js */ "./node_modules/@arcgis/core/core/JSONSupport.js");
/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/lang.js */ "./node_modules/@arcgis/core/core/lang.js");
/* harmony import */ var _core_Warning_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/Warning.js */ "./node_modules/@arcgis/core/core/Warning.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _core_accessorSupport_decorators_writer_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/writer.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/writer.js");
/* harmony import */ var _core_accessorSupport_decorators_persistable_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/persistable.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/persistable.js");
/* harmony import */ var _geometry_projection_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../geometry/projection.js */ "./node_modules/@arcgis/core/geometry/projection.js");
/* harmony import */ var _geometry_Polygon_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../geometry/Polygon.js */ "./node_modules/@arcgis/core/geometry/Polygon.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var l;let y=l=class extends _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_2__.JSONSupport{constructor(e){super(e),this.geometry=null,this.type="clip"}writeGeometry(e,r,o,s){if(s.layer?.spatialReference&&!s.layer.spatialReference.equals(this.geometry.spatialReference)){if(!(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_10__.canProjectWithoutEngine)(e.spatialReference,s.layer.spatialReference))return void(s?.messages&&s.messages.push(new _core_Warning_js__WEBPACK_IMPORTED_MODULE_4__["default"]("scenemodification:unsupported","Scene modifications with incompatible spatial references are not supported",{modification:this,spatialReference:s.layer.spatialReference,context:s})));const p=new _geometry_Polygon_js__WEBPACK_IMPORTED_MODULE_11__["default"];(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_10__.projectPolygon)(e,p,s.layer.spatialReference),r[o]=p.toJSON(s)}else r[o]=e.toJSON(s);delete r[o].spatialReference}clone(){return new l({geometry:(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_3__.clone)(this.geometry),type:this.type})}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)({type:_geometry_Polygon_js__WEBPACK_IMPORTED_MODULE_11__["default"]}),(0,_core_accessorSupport_decorators_persistable_js__WEBPACK_IMPORTED_MODULE_9__.persistable)()],y.prototype,"geometry",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_writer_js__WEBPACK_IMPORTED_MODULE_8__.writer)(["web-scene","portal-item"],"geometry")],y.prototype,"writeGeometry",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)({type:["clip","mask","replace"],nonNullable:!0}),(0,_core_accessorSupport_decorators_persistable_js__WEBPACK_IMPORTED_MODULE_9__.persistable)()],y.prototype,"type",void 0),y=l=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__.subclass)("esri.layers.support.SceneModification")],y);const f=y;


/***/ }),

/***/ "./node_modules/@arcgis/core/libs/i3s/I3SModule.js":
/*!*********************************************************!*\
  !*** ./node_modules/@arcgis/core/libs/i3s/I3SModule.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   get: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _assets_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../assets.js */ "./node_modules/@arcgis/core/assets.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function e(){return n||(n=new Promise((t=>__webpack_require__.e(/*! import() */ "vendors-node_modules_arcgis_core_chunks_i3s_js").then(__webpack_require__.bind(__webpack_require__, /*! ../../chunks/i3s.js */ "./node_modules/@arcgis/core/chunks/i3s.js")).then((t=>t.i)).then((({default:e})=>{const n=e({locateFile:i,onRuntimeInitialized:()=>t(n)});delete n.then})))).catch((t=>{throw t}))),n}function i(e){return (0,_assets_js__WEBPACK_IMPORTED_MODULE_0__.getAssetUrl)(`esri/libs/i3s/${e}`)}let n;


/***/ }),

/***/ "./node_modules/@arcgis/core/libs/i3s/enums.js":
/*!*****************************************************!*\
  !*** ./node_modules/@arcgis/core/libs/i3s/enums.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   IndexType: () => (/* binding */ n),
/* harmony export */   ModificationType: () => (/* binding */ e)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var n,e;!function(n){n[n.None=0]="None",n[n.Int16=1]="Int16",n[n.Int32=2]="Int32"}(n||(n={})),function(n){n[n.Replace=0]="Replace",n[n.Outside=1]="Outside",n[n.Inside=2]="Inside",n[n.Finished=3]="Finished"}(e||(e={}));


/***/ }),

/***/ "./node_modules/@arcgis/core/portal/support/resourceExtension.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@arcgis/core/portal/support/resourceExtension.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getResourceContentExtension: () => (/* binding */ p)
/* harmony export */ });
/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/urlUtils.js */ "./node_modules/@arcgis/core/core/urlUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function p(i){return o[t(i)]||e}function t(i){return"json"===i.type?"application/json":"blob"===i.type?i.blob.type:n(i.url)}function n(p){const t=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_0__.getPathExtension)(p);return g[t]||a}const o={},a="text/plain",e=o[a],g={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const l in g)o[g[l]]=l;


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/I3SMeshView3D.js":
/*!********************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/I3SMeshView3D.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ElevationMode: () => (/* binding */ Bt),
/* harmony export */   I3SMeshView3D: () => (/* binding */ Et),
/* harmony export */   makeScheduleFunction: () => (/* binding */ Wt)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _Color_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../Color.js */ "./node_modules/@arcgis/core/Color.js");
/* harmony import */ var _Graphic_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../Graphic.js */ "./node_modules/@arcgis/core/Graphic.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_ByteSizeUnit_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../core/ByteSizeUnit.js */ "./node_modules/@arcgis/core/core/ByteSizeUnit.js");
/* harmony import */ var _core_Collection_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../core/Collection.js */ "./node_modules/@arcgis/core/core/Collection.js");
/* harmony import */ var _core_handleUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../core/handleUtils.js */ "./node_modules/@arcgis/core/core/handleUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_MapUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../core/MapUtils.js */ "./node_modules/@arcgis/core/core/MapUtils.js");
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../core/PooledArray.js */ "./node_modules/@arcgis/core/core/PooledArray.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../core/reactiveUtils.js */ "./node_modules/@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _core_scheduling_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../core/scheduling.js */ "./node_modules/@arcgis/core/core/scheduling.js");
/* harmony import */ var _core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../core/typedArrayUtil.js */ "./node_modules/@arcgis/core/core/typedArrayUtil.js");
/* harmony import */ var _core_unitUtils_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../core/unitUtils.js */ "./node_modules/@arcgis/core/core/unitUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _chunks_mat3_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../chunks/mat3.js */ "./node_modules/@arcgis/core/chunks/mat3.js");
/* harmony import */ var _chunks_mat3f64_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../chunks/mat3f64.js */ "./node_modules/@arcgis/core/chunks/mat3f64.js");
/* harmony import */ var _chunks_mat4_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../chunks/mat4.js */ "./node_modules/@arcgis/core/chunks/mat4.js");
/* harmony import */ var _chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../../chunks/mat4f64.js */ "./node_modules/@arcgis/core/chunks/mat4f64.js");
/* harmony import */ var _chunks_quatf64_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../../../chunks/quatf64.js */ "./node_modules/@arcgis/core/chunks/quatf64.js");
/* harmony import */ var _chunks_vec3_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../../../chunks/vec3.js */ "./node_modules/@arcgis/core/chunks/vec3.js");
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../../../chunks/vec3f64.js */ "./node_modules/@arcgis/core/chunks/vec3f64.js");
/* harmony import */ var _chunks_vec4_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../../../chunks/vec4.js */ "./node_modules/@arcgis/core/chunks/vec4.js");
/* harmony import */ var _chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../../../chunks/vec4f64.js */ "./node_modules/@arcgis/core/chunks/vec4f64.js");
/* harmony import */ var _core_support_UpdatingHandles_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ../../../core/support/UpdatingHandles.js */ "./node_modules/@arcgis/core/core/support/UpdatingHandles.js");
/* harmony import */ var _geometry_ellipsoidUtils_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ../../../geometry/ellipsoidUtils.js */ "./node_modules/@arcgis/core/geometry/ellipsoidUtils.js");
/* harmony import */ var _geometry_projection_localLinearScaleFactors_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ../../../geometry/projection/localLinearScaleFactors.js */ "./node_modules/@arcgis/core/geometry/projection/localLinearScaleFactors.js");
/* harmony import */ var _geometry_projection_projectBoundingSphere_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ../../../geometry/projection/projectBoundingSphere.js */ "./node_modules/@arcgis/core/geometry/projection/projectBoundingSphere.js");
/* harmony import */ var _geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ../../../geometry/projection/projectBuffer.js */ "./node_modules/@arcgis/core/geometry/projection/projectBuffer.js");
/* harmony import */ var _geometry_projection_projectors_js__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ../../../geometry/projection/projectors.js */ "./node_modules/@arcgis/core/geometry/projection/projectors.js");
/* harmony import */ var _geometry_projection_projectVectorToVector_js__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ../../../geometry/projection/projectVectorToVector.js */ "./node_modules/@arcgis/core/geometry/projection/projectVectorToVector.js");
/* harmony import */ var _geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ../../../geometry/support/aaBoundingBox.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingBox.js");
/* harmony import */ var _geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ../../../geometry/support/aaBoundingRect.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js");
/* harmony import */ var _geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ../../../geometry/support/DoubleArray.js */ "./node_modules/@arcgis/core/geometry/support/DoubleArray.js");
/* harmony import */ var _geometry_support_FloatArray_js__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ../../../geometry/support/FloatArray.js */ "./node_modules/@arcgis/core/geometry/support/FloatArray.js");
/* harmony import */ var _geometry_support_Indices_js__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ../../../geometry/support/Indices.js */ "./node_modules/@arcgis/core/geometry/support/Indices.js");
/* harmony import */ var _chunks_sphere_js__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ../../../chunks/sphere.js */ "./node_modules/@arcgis/core/chunks/sphere.js");
/* harmony import */ var _geometry_support_UByteArray_js__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! ../../../geometry/support/UByteArray.js */ "./node_modules/@arcgis/core/geometry/support/UByteArray.js");
/* harmony import */ var _layers_LayerConstants_js__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! ../../../layers/LayerConstants.js */ "./node_modules/@arcgis/core/layers/LayerConstants.js");
/* harmony import */ var _layers_graphics_controllers_I3SOnDemandController_js__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! ../../../layers/graphics/controllers/I3SOnDemandController.js */ "./node_modules/@arcgis/core/layers/graphics/controllers/I3SOnDemandController.js");
/* harmony import */ var _layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! ../../../layers/support/fieldUtils.js */ "./node_modules/@arcgis/core/layers/support/fieldUtils.js");
/* harmony import */ var _layers_support_SceneModification_js__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! ../../../layers/support/SceneModification.js */ "./node_modules/@arcgis/core/layers/support/SceneModification.js");
/* harmony import */ var _renderers_visualVariables_support_visualVariableUtils_js__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! ../../../renderers/visualVariables/support/visualVariableUtils.js */ "./node_modules/@arcgis/core/renderers/visualVariables/support/visualVariableUtils.js");
/* harmony import */ var _support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! ../../../support/arcadeOnDemand.js */ "./node_modules/@arcgis/core/support/arcadeOnDemand.js");
/* harmony import */ var _support_basemapUtils_js__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! ../../../support/basemapUtils.js */ "./node_modules/@arcgis/core/support/basemapUtils.js");
/* harmony import */ var _symbols_Symbol3D_js__WEBPACK_IMPORTED_MODULE_50__ = __webpack_require__(/*! ../../../symbols/Symbol3D.js */ "./node_modules/@arcgis/core/symbols/Symbol3D.js");
/* harmony import */ var _symbols_support_unitConversionUtils_js__WEBPACK_IMPORTED_MODULE_51__ = __webpack_require__(/*! ../../../symbols/support/unitConversionUtils.js */ "./node_modules/@arcgis/core/symbols/support/unitConversionUtils.js");
/* harmony import */ var _I3SMeshViewLabeler_js__WEBPACK_IMPORTED_MODULE_52__ = __webpack_require__(/*! ./I3SMeshViewLabeler.js */ "./node_modules/@arcgis/core/views/3d/layers/I3SMeshViewLabeler.js");
/* harmony import */ var _I3SMeshWorkerHandle_js__WEBPACK_IMPORTED_MODULE_53__ = __webpack_require__(/*! ./I3SMeshWorkerHandle.js */ "./node_modules/@arcgis/core/views/3d/layers/I3SMeshWorkerHandle.js");
/* harmony import */ var _II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_54__ = __webpack_require__(/*! ./II3SMeshView3D.js */ "./node_modules/@arcgis/core/views/3d/layers/II3SMeshView3D.js");
/* harmony import */ var _SceneLayerWorker_js__WEBPACK_IMPORTED_MODULE_55__ = __webpack_require__(/*! ./SceneLayerWorker.js */ "./node_modules/@arcgis/core/views/3d/layers/SceneLayerWorker.js");
/* harmony import */ var _graphics_graphicUtils_js__WEBPACK_IMPORTED_MODULE_56__ = __webpack_require__(/*! ./graphics/graphicUtils.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/graphicUtils.js");
/* harmony import */ var _graphics_Labeler_js__WEBPACK_IMPORTED_MODULE_57__ = __webpack_require__(/*! ./graphics/Labeler.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/Labeler.js");
/* harmony import */ var _i3s_enums_js__WEBPACK_IMPORTED_MODULE_58__ = __webpack_require__(/*! ./i3s/enums.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/enums.js");
/* harmony import */ var _i3s_Highlights_js__WEBPACK_IMPORTED_MODULE_59__ = __webpack_require__(/*! ./i3s/Highlights.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/Highlights.js");
/* harmony import */ var _i3s_I3SAsyncElevationUpdater_js__WEBPACK_IMPORTED_MODULE_60__ = __webpack_require__(/*! ./i3s/I3SAsyncElevationUpdater.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SAsyncElevationUpdater.js");
/* harmony import */ var _i3s_I3SCrossfadeHelper_js__WEBPACK_IMPORTED_MODULE_61__ = __webpack_require__(/*! ./i3s/I3SCrossfadeHelper.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SCrossfadeHelper.js");
/* harmony import */ var _i3s_I3SElevationProvider_js__WEBPACK_IMPORTED_MODULE_62__ = __webpack_require__(/*! ./i3s/I3SElevationProvider.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SElevationProvider.js");
/* harmony import */ var _i3s_I3SGeometryUtil_js__WEBPACK_IMPORTED_MODULE_63__ = __webpack_require__(/*! ./i3s/I3SGeometryUtil.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SGeometryUtil.js");
/* harmony import */ var _i3s_I3SIntersectionHandler_js__WEBPACK_IMPORTED_MODULE_64__ = __webpack_require__(/*! ./i3s/I3SIntersectionHandler.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SIntersectionHandler.js");
/* harmony import */ var _i3s_I3SMaterialUtil_js__WEBPACK_IMPORTED_MODULE_65__ = __webpack_require__(/*! ./i3s/I3SMaterialUtil.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SMaterialUtil.js");
/* harmony import */ var _i3s_I3SNode_js__WEBPACK_IMPORTED_MODULE_66__ = __webpack_require__(/*! ./i3s/I3SNode.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SNode.js");
/* harmony import */ var _i3s_I3SOverrides_js__WEBPACK_IMPORTED_MODULE_67__ = __webpack_require__(/*! ./i3s/I3SOverrides.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SOverrides.js");
/* harmony import */ var _i3s_I3SProjectionUtil_js__WEBPACK_IMPORTED_MODULE_68__ = __webpack_require__(/*! ./i3s/I3SProjectionUtil.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SProjectionUtil.js");
/* harmony import */ var _i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_69__ = __webpack_require__(/*! ./i3s/I3SUtil.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SUtil.js");
/* harmony import */ var _i3s_IDBCache_js__WEBPACK_IMPORTED_MODULE_70__ = __webpack_require__(/*! ./i3s/IDBCache.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/IDBCache.js");
/* harmony import */ var _i3s_IDBMockCache_js__WEBPACK_IMPORTED_MODULE_71__ = __webpack_require__(/*! ./i3s/IDBMockCache.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/IDBMockCache.js");
/* harmony import */ var _support_attributeUtils_js__WEBPACK_IMPORTED_MODULE_72__ = __webpack_require__(/*! ./support/attributeUtils.js */ "./node_modules/@arcgis/core/views/3d/layers/support/attributeUtils.js");
/* harmony import */ var _support_symbolColorUtils_js__WEBPACK_IMPORTED_MODULE_73__ = __webpack_require__(/*! ./support/symbolColorUtils.js */ "./node_modules/@arcgis/core/views/3d/layers/support/symbolColorUtils.js");
/* harmony import */ var _support_debugFlags_js__WEBPACK_IMPORTED_MODULE_74__ = __webpack_require__(/*! ../support/debugFlags.js */ "./node_modules/@arcgis/core/views/3d/support/debugFlags.js");
/* harmony import */ var _support_extentUtils_js__WEBPACK_IMPORTED_MODULE_75__ = __webpack_require__(/*! ../support/extentUtils.js */ "./node_modules/@arcgis/core/views/3d/support/extentUtils.js");
/* harmony import */ var _support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_76__ = __webpack_require__(/*! ../support/orientedBoundingBox.js */ "./node_modules/@arcgis/core/views/3d/support/orientedBoundingBox.js");
/* harmony import */ var _support_updatingProperties_js__WEBPACK_IMPORTED_MODULE_77__ = __webpack_require__(/*! ../support/updatingProperties.js */ "./node_modules/@arcgis/core/views/3d/support/updatingProperties.js");
/* harmony import */ var _support_buffer_glUtil_js__WEBPACK_IMPORTED_MODULE_78__ = __webpack_require__(/*! ../support/buffer/glUtil.js */ "./node_modules/@arcgis/core/views/3d/support/buffer/glUtil.js");
/* harmony import */ var _webgl_engine_collections_Component_ComponentObject_js__WEBPACK_IMPORTED_MODULE_79__ = __webpack_require__(/*! ../webgl-engine/collections/Component/ComponentObject.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/collections/Component/ComponentObject.js");
/* harmony import */ var _webgl_engine_collections_Component_SourceGeometry_js__WEBPACK_IMPORTED_MODULE_80__ = __webpack_require__(/*! ../webgl-engine/collections/Component/SourceGeometry.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/collections/Component/SourceGeometry.js");
/* harmony import */ var _webgl_engine_core_shaderLibrary_attributes_TextureCoordinateAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_81__ = __webpack_require__(/*! ../webgl-engine/core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js");
/* harmony import */ var _webgl_engine_lib_BasisUtil_js__WEBPACK_IMPORTED_MODULE_82__ = __webpack_require__(/*! ../webgl-engine/lib/BasisUtil.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/BasisUtil.js");
/* harmony import */ var _webgl_engine_lib_edgeRendering_interfaces_js__WEBPACK_IMPORTED_MODULE_83__ = __webpack_require__(/*! ../webgl-engine/lib/edgeRendering/interfaces.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/edgeRendering/interfaces.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const yt="esri.views.3d.layers.I3SMeshView3D",vt=_core_Logger_js__WEBPACK_IMPORTED_MODULE_8__["default"].getLogger(yt),It=[1,1,1,1];class Mt extends _i3s_I3SCrossfadeHelper_js__WEBPACK_IMPORTED_MODULE_61__.NodeCrossfadeMetaData{constructor(e,t,i,s,r,o,a,n,l){super(),this.node=e,this.featureIds=t,this.objectHandle=i,this.cachedRendererVersion=s,this.attributeInfo=r,this.material=o,this.textures=a,this.anchorIds=n,this.anchors=l,this.cachedElevationAnchors=null,this.cachedEdgeMaterials=new Array,this.edgeMemoryUsage=0}}var Ct;!function(e){e[e.CastShadows=4]="CastShadows",e[e.Pickable=5]="Pickable"}(Ct||(Ct={}));const Ot=23,xt=100*_core_ByteSizeUnit_js__WEBPACK_IMPORTED_MODULE_4__.ByteSizeUnit.MEGABYTES,Et=t=>{let o=class extends t{constructor(...e){super(e),this._updatingHandles=new _core_support_UpdatingHandles_js__WEBPACK_IMPORTED_MODULE_29__.UpdatingHandles,this._nodeId2Meta=new Map,this._nodeId2MetaReloading=new Map,this._i3sWasmLoaded=!1,this._snappingSourcesTrackers=[],this._hasLoadedPBRTextures=!1,this._asyncModuleLoading=0,this._addTasks=new Map,this._currentRenderer=null,this._rendererVersion=0,this._colorVariable=null,this._opacityVariable=null,this._rendererFields=null,this._symbologyFields=null,this._symbologyOverride=null,this._symbologyOverrideFields=null,this._symbolInfos=new Map,this._visibleGeometryChangedSchedulerHandle=null,this._hasComponentData=!1,this._hasVertexColors=!1,this._nodeColorOverride=null,this.updating=!0,this.holeFilling="auto",this._hasColors=!1,this._hasTextures=!1,this._hasData=!1,this.slicePlaneEnabled=!1,this._modifications=new Array,this.ignoresMemoryFactor=!1,this._layerUrl="",this._cacheKeySuffix=null,this._elevationTask=null,this._filters=[],this._arcade=null,this._tmpAttributeOnlyGraphic=new _Graphic_js__WEBPACK_IMPORTED_MODULE_2__["default"](null,null,{}),this._crossfadeHelper=new _i3s_I3SCrossfadeHelper_js__WEBPACK_IMPORTED_MODULE_61__.I3SCrossfadeHelper(this)}get lodCrossfadeoutDuration(){return 0}get lodCrossfadeinDuration(){return 0}get lodCrossfadeUncoveredDuration(){return 0}get layerUid(){return this.i3slayer&&this.i3slayer.uid}get sublayerUid(){return null}get layerId(){return this.i3slayer&&this.i3slayer.id}get sublayerId(){return null}get contentVisible(){return!this.suspended&&this._controller?.rootNodeVisible}get legendEnabled(){return this.contentVisible&&!0===this.i3slayer?.legendEnabled}get updatingProgressValue(){return this._controller?.updatingProgress??0}get hasTexturesOrVertexColors(){return this._hasData?this._hasTextures||this._hasColors?"yes":"probably-not":"unknown"}get rendererTextureUsage(){return (0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_69__.rendererNeedsTextures)(this._currentRenderer)?this._usePBR||this._hasLoadedPBRTextures?_i3s_enums_js__WEBPACK_IMPORTED_MODULE_58__.TextureUsage.AllTexturesPBR:_i3s_enums_js__WEBPACK_IMPORTED_MODULE_58__.TextureUsage.AllTextures:this._usePBR||this._hasLoadedPBRTextures?_i3s_enums_js__WEBPACK_IMPORTED_MODULE_58__.TextureUsage.GeometryTexturesPBR:_i3s_enums_js__WEBPACK_IMPORTED_MODULE_58__.TextureUsage.GeometryTextures}get elevationOffset(){const e=null!=this.i3slayer?this.i3slayer.elevationInfo:null;if(null!=e&&"absolute-height"===e.mode){const t=(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_16__.getMetersPerVerticalUnitForSR)(this.i3slayer.spatialReference),i=(0,_symbols_support_unitConversionUtils_js__WEBPACK_IMPORTED_MODULE_51__.getMetersPerUnit)(e.unit);return(e.offset??0)*i/t}return 0}get elevationInfo(){const e=null!=this.i3slayer?this.i3slayer.elevationInfo:null;if(null==e)return{mode:Bt.Absolute,offset:0};const t=(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_16__.getMetersPerVerticalUnitForSR)(this.i3slayer.spatialReference),i=(0,_symbols_support_unitConversionUtils_js__WEBPACK_IMPORTED_MODULE_51__.getMetersPerUnit)(e.unit),s=(e.offset??0)*i/t;switch(e.mode){case"absolute-height":return{mode:Bt.Absolute,offset:s};case"relative-to-ground":return{mode:Bt.RelativeToGround,offset:s};case"on-the-ground":return{mode:Bt.OnTheGround,offset:0};default:return{mode:Bt.Absolute,offset:0}}}get supportedTextureEncodings(){return (0,_i3s_I3SMaterialUtil_js__WEBPACK_IMPORTED_MODULE_65__.getSupportedEncodings)(this.view._stage.renderView.capabilities)}get uncompressedTextureDownsamplingEnabled(){const e=this.view?.qualitySettings.sceneService.uncompressedTextureDownsamplingEnabled,t=0==(this.supportedTextureEncodings&_i3s_enums_js__WEBPACK_IMPORTED_MODULE_58__.TextureEncoding.DDS_S3TC);return e&&t}get clientGeometry(){return this.i3sOverrides.geometryOverrides}get elevationRange(){const e=this._nodeId2Meta;let t=1/0,i=-1/0;for(const s of e.values()){if(null==s)continue;const{node:{mbs:e}}=s,[,r,o]=e;t=Math.min(t,r-o),i=Math.max(i,r+o)}return Number.isFinite(t)&&Number.isFinite(i)?{min:t,max:i}:null}initialize(){const e=(0,_core_has_js__WEBPACK_IMPORTED_MODULE_7__["default"])("enable-feature:idb-mock-cache");this._idbCache=e?new _i3s_IDBMockCache_js__WEBPACK_IMPORTED_MODULE_71__.IDBMockCache(this.view,e):new _i3s_IDBCache_js__WEBPACK_IMPORTED_MODULE_70__.IDBCache("esri-scenelayer-cache","geometries"),this._preLoadBasis(),this.addResolvingPromise(this.i3slayer.indexInfo);const t=this.view.resourceController,i=t.memoryController;this.i3sOverrides=new _i3s_I3SOverrides_js__WEBPACK_IMPORTED_MODULE_67__.I3SOverrides({view:this.view,layer:this.i3slayer,memoryController:i}),this._worker=new _I3SMeshWorkerHandle_js__WEBPACK_IMPORTED_MODULE_53__.I3SMeshWorkerHandle(Wt(t)),this.addResolvingPromise(this._worker.promise);const s=this.i3slayer.store;this._worker.setLegacySchema(this.uid,s.defaultGeometrySchema),(0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_69__.checkSceneLayerValid)(this.i3slayer),(0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_69__.checkSceneLayerCompatibleWithView)(this.i3slayer,this.view),this._layerUrl=this.i3slayer.parsedUrl.path,this._controller=new _layers_graphics_controllers_I3SOnDemandController_js__WEBPACK_IMPORTED_MODULE_44__["default"]({layerView:this,worker:this._worker}),this._gpuMemoryEstimate=0,this._texMemoryEstimate=0,this._geoMemoryEstimate=0,this._stage=this.view._stage,this._collection=this._stage.renderView.componentObjectCollection,this.resetHighlights();const r=s.defaultGeometrySchema;if(this._isIntegratedMesh||!r)this._hasComponentData=!1;else{const e=r.featureAttributes;this._hasComponentData=!!(e&&e.faceRange&&e.id)}this._hasVertexColors=null!=(r?.vertexAttributes.color??null)&&!this.i3slayer.cachedDrawingInfo?.color,this._isIntegratedMesh||(this._edgeView=this._stage.renderer.ensureEdgeView());const o=this.view.resourceController.memoryController.newCache(`sl-${this.uid}`,(e=>this._deleteComponentObject(e)));this._memCache=o;const a=e=>null!=this._controller.index?.rootNode?this._controller.index.traverse(this._controller.index.rootNode,(t=>{const i=t.index,s=this._nodeId2Meta.get(i)||this._nodeId2MetaReloading.get(i);return e(t,null!=s?s.objectHandle:null)})):()=>{};this._intersectionHandler=new _i3s_I3SIntersectionHandler_js__WEBPACK_IMPORTED_MODULE_64__.I3SIntersectionHandler({layerUid:this.layerUid,sublayerUid:this.sublayerUid,collection:this._collection,slicePlaneEnabled:this.slicePlaneEnabled,isGround:this._isIntegratedMesh,traverseNodeHierarchy:a}),this._updatingHandles.add((()=>this.layerUid),(e=>this._intersectionHandler.layerUid=e)),this._updatingHandles.add((()=>this.sublayerUid),(e=>this._intersectionHandler.sublayerUid=e)),this._elevationProvider=new _i3s_I3SElevationProvider_js__WEBPACK_IMPORTED_MODULE_62__["default"]({layerView:this,intersectionHandler:this._intersectionHandler}),this._hasLoadedPBRTextures=this._usePBR,this._updatingHandles.add((()=>this.view.clippingArea),(()=>this._clippingAreaChanged()),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_13__.initial),this._updatingHandles.add((()=>this.fullOpacity),(e=>this._opacityChange(e))),this._updatingHandles.add((()=>this.slicePlaneEnabled),(e=>this._slicePlaneEnabledChange(e))),this._updatingHandles.add((()=>this.elevationOffset),((e,t)=>{this._reloadAll(t),this._controller.invalidateVisibilityObbs()})),this._updatingHandles.add((()=>this.elevationInfo),((e,t)=>this._elevationInfoChanged(e,t)),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_13__.initial),this._updatingHandles.add((()=>!this.suspended&&this.elevationInfo.mode!==Bt.Absolute),((e,t)=>{e?this.addHandles(this.view.basemapTerrain.on("elevation-change",(({extent:e})=>this._ensureElevationTask().addExtent(e))),Kt):t&&this.removeHandles(Kt)}),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_13__.initial),this._updatingHandles.add((()=>this._usePBR),(e=>this._updatePBR(e)));const n=()=>{this._reloadAll(),this.clearMemCache()};this._updatingHandles.add((()=>this.rendererTextureUsage),n),this._updatingHandles.add((()=>this.uncompressedTextureDownsamplingEnabled),n),this._updatingHandles.add((()=>this.contentVisible),(e=>this._contentVisibleChanged(e)),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_13__.initial),this._updatingHandles.add((()=>this.i3slayer.labelsVisible),(()=>this._labelingChanged()),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_13__.initial),this._updatingHandles.add((()=>this.i3slayer.labelingInfo),(()=>this._labelingChanged()),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_13__.initial),this._updatingHandles.add((()=>this._modifications),(()=>this._modificationsChanged()),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_13__.initial),this.addHandles([(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_13__.watch)((()=>_support_debugFlags_js__WEBPACK_IMPORTED_MODULE_74__.debugFlags.I3S_TREE_SHOW_TILES),(e=>{if(e&&!this._treeDebugger){const e=this._controller.crsIndex;__webpack_require__.e(/*! import() */ "node_modules_arcgis_core_views_3d_layers_support_I3STreeDebugger_js").then(__webpack_require__.bind(__webpack_require__, /*! ./support/I3STreeDebugger.js */ "./node_modules/@arcgis/core/views/3d/layers/support/I3STreeDebugger.js")).then((({I3STreeDebugger:t})=>{!this._treeDebugger&&_support_debugFlags_js__WEBPACK_IMPORTED_MODULE_74__.debugFlags.I3S_TREE_SHOW_TILES&&(this._treeDebugger=new t({lv:this,view:this.view,nodeSR:e}))}))}else e||_support_debugFlags_js__WEBPACK_IMPORTED_MODULE_74__.debugFlags.I3S_TREE_SHOW_TILES||(this._treeDebugger=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_10__.destroyMaybe)(this._treeDebugger))}),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_13__.initial),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_13__.watch)((()=>_support_debugFlags_js__WEBPACK_IMPORTED_MODULE_74__.debugFlags.I3S_SHOW_MODIFICATIONS),(()=>this._showModifications()),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_13__.initial)]),this._cacheKeySuffix=(0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_69__.getCacheKeySuffix)(this.i3slayer.spatialReference,this.view.renderSpatialReference),this._idbCache.init().catch((e=>vt.warn(`Failed to initialize IndexedDB cache: ${e}`)))}destroy(){this._clearAddTasks(),this._elevationTask=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_10__.destroyMaybe)(this._elevationTask),this.i3sOverrides=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_10__.destroyMaybe)(this.i3sOverrides),this._elevationProvider&&(this._elevationProvider.layerChanged(),this.view.elevationProvider.unregister(this._elevationProvider),this._elevationProvider=null),this._intersectionHandler&&(this._stage.view.sceneIntersectionHelper.removeIntersectionHandler(this._intersectionHandler),this._intersectionHandler=null);const e=this._worker;e&&(e.destroyContext(this.uid).then((()=>e.destroy())),this._worker=null),this._removeAllNodeDataFromStage(),this._memCache=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_10__.destroyMaybe)(this._memCache),this._collection=null,this._stage=null,this._edgeView=null,this._labeler=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_10__.destroyMaybe)(this._labeler),this._treeDebugger=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_10__.destroyMaybe)(this._treeDebugger),this._controller=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_10__.destroyMaybe)(this._controller),this._highlights.destroy(),this._nodeId2Meta.clear(),this._nodeId2MetaReloading.clear(),this._crossfadeHelper=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_10__.destroyMaybe)(this._crossfadeHelper),this.emit("visible-geometry-changed"),this._visibleGeometryChangedSchedulerHandle&&(this._visibleGeometryChangedSchedulerHandle.remove(),this._visibleGeometryChangedSchedulerHandle=null),this._updatingHandles=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_10__.destroyMaybe)(this._updatingHandles)}_memEstimateTextureAdded(e){const t=e.memoryEstimate;return this._gpuMemoryEstimate+=t,this._texMemoryEstimate+=t,t}_memEstimateTextureRemoved(e){if(null!=e){const t=e.memoryEstimate;this._gpuMemoryEstimate-=t,this._texMemoryEstimate-=t}}_memEstimateGeometryAdded(e){const t=this._collection.getObjectGPUMemoryUsage(e);return this._gpuMemoryEstimate+=t,this._geoMemoryEstimate+=t,t}_memEstimateGeometryRemoved(e){const t=this._collection.getObjectGPUMemoryUsage(e);this._gpuMemoryEstimate-=t,this._geoMemoryEstimate-=t}isNodeLoaded(e){return this._nodeId2Meta.has(e)}isNodeReloading(e){return this._nodeId2MetaReloading.has(e)}get usedMemory(){let e=null!=this._labeler?this._labeler.usedMemory:0;return this._nodeId2Meta.forEach((t=>e+=null!=t?t.node.memory:0)),this._nodeId2MetaReloading.forEach((t=>e+=null!=t?t.node.memory:0)),e}get unloadedMemory(){return(null!=this._controller?this._controller.unloadedMemoryEstimate:0)+(null!=this._labeler?this._labeler.unloadedMemoryEstimate:0)}_labelingChanged(){if(!((0,_graphics_Labeler_js__WEBPACK_IMPORTED_MODULE_57__.areLabelsVisible)(this.i3slayer)&&this._supportsLabeling))return void(null!=this._labeler&&(this._labeler.destroy(),this._labeler=null));if(null!=this._labeler)return;const e=new _I3SMeshViewLabeler_js__WEBPACK_IMPORTED_MODULE_52__["default"]({view:this.view,layer:this.i3slayer,collection:this._collection,overrides:this.i3sOverrides});this._nodeId2Meta.forEach((t=>null!=t&&this._addMetaToLabeler(e,t))),this._labeler=e}_loadAsyncModule(e){return++this._asyncModuleLoading,e.then((e=>(--this._asyncModuleLoading,e)),(e=>{throw--this._asyncModuleLoading,e}))}_modificationsChanged(){if(!this._i3sWasmLoaded&&this.hasModifications)return this._i3sWasmLoaded=(0,_SceneLayerWorker_js__WEBPACK_IMPORTED_MODULE_55__.initialize)().then((()=>{this._i3sWasmLoaded=!0,this._modificationsChanged(),this.notifyUpdate()})),void this.notifyUpdate();if(!0!==this._i3sWasmLoaded)return;const e=this.uid,t=this.i3slayer.spatialReference;this._worker.setModifications(e,this._layerClippingArea,this._modifications,t);const i=(0,_I3SMeshWorkerHandle_js__WEBPACK_IMPORTED_MODULE_53__.toWasmModification)(this._layerClippingArea,this._modifications,t);(0,_SceneLayerWorker_js__WEBPACK_IMPORTED_MODULE_55__.setModificationsSync)({context:e,modifications:i,isGeodetic:t.isGeographic}),this._controller.modificationsChanged();const s=this.hasModifications?new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_11__["default"]:null;this._nodeId2Meta.forEach(((e,t)=>{null==e?(this._nodeId2Meta.delete(t),this._controller.updateLoadStatus(t,!1)):e.node.hasModifications?(this._nodeId2Meta.delete(t),this._nodeId2MetaReloading.set(t,e)):null!=s&&s.push(e.node)})),this.notifyChange("elevationRange"),null!=s&&this._nodeId2MetaReloading.forEach((e=>s.push(e.node))),null!=s&&s.length>0&&(this.updateNodeModificationStatus(s),s.forAll((e=>{if(e.imModificationImpact!==_i3s_I3SNode_js__WEBPACK_IMPORTED_MODULE_66__.NodeIMModificationImpact.Culled){const t=this._nodeId2Meta.get(e.index);this._controller.invalidateGeometryVisibility(e.index),null!=t?(this._nodeId2Meta.delete(e.index),this._nodeId2MetaReloading.set(e.index,t),this.notifyChange("elevationRange")):this._nodeId2Meta.has(e.index)&&(this._nodeId2Meta.delete(e.index),this._controller.updateLoadStatus(e.index,!1))}}))),this.clearMemCache(),this._controller.restartNodeLoading(),this._showModifications()}_showModifications(){if(null!=this._modificationGraphics&&(this.view.graphics.removeMany(this._modificationGraphics),this._modificationGraphics=null),!_support_debugFlags_js__WEBPACK_IMPORTED_MODULE_74__.debugFlags.I3S_SHOW_MODIFICATIONS||0===this._modifications.length)return;const e={clip:[227,227,79,.8],mask:[227,139,79,.8],replace:[139,227,79,.8]},t={type:"simple-fill",outline:{color:[255,255,255],width:1}};this._modificationGraphics=new Array;for(const s of this._modifications){const r=s.geometry;r.spatialReference=this.i3slayer.spatialReference;const o={...t,color:e[s.type]};this._modificationGraphics.push(new _Graphic_js__WEBPACK_IMPORTED_MODULE_2__["default"]({geometry:r,symbol:o}))}this.view.graphics.addMany(this._modificationGraphics)}_addMetaToLabeler(e,t){e.addNodeMeta(t,((e,t)=>this._createAttributes(e,t)))}_contentVisibleChanged(e){e?(this.view.elevationProvider.register(this._elevationContext,this._elevationProvider),this._stage.view.sceneIntersectionHelper.addIntersectionHandler(this._intersectionHandler)):(this._removeAllNodeDataFromStage(),this.view.elevationProvider&&this.view.elevationProvider.unregister(this._elevationProvider),this._stage.view.sceneIntersectionHelper.removeIntersectionHandler(this._intersectionHandler))}getLoadedAttributes(e){const t=this._nodeId2Meta.get(e);if(null!=t?.attributeInfo)return t.attributeInfo.loadedAttributes}getAttributeData(e){const t=this._nodeId2Meta.get(e);if(null!=t?.attributeInfo)return t.attributeInfo.attributeData}setAttributeData(e,t){const i=this._nodeId2Meta.get(e);null!=i?.attributeInfo&&(i.attributeInfo.attributeData=t,this._attributeValuesChanged(i))}async updateAttributes(e,t,i){const s=this._nodeId2Meta.get(e);null!=s&&(await this.i3sOverrides.applyAttributeOverrides(s.featureIds,t,i,this._controller.requiredAttributes),s.attributeInfo=t,this._controller.reschedule((()=>this._attributeValuesChanged(s)),i).catch((e=>{(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_12__.isAbortError)(e)||vt.warn("Error while updating attribute values. Layer might not display correctly.",e)})))}_attributeValuesChanged(e){e.cachedRendererVersion=this._getInvalidRendererVersion(),e.filteredIds=null,null!=this._labeler&&this._labeler.setNodeMetaAttributes(e,((e,t)=>this._createAttributes(e,t))),this._updateEngineObject(e)}clearMemCache(){null!=this._memCache&&this._memCache.clear()}getVisibleNodes(){const e=new Array;return this._nodeId2Meta.forEach((t=>null!=t&&e.push(t.node))),e}getNodeComponentObb(e){const t=this._nodeId2Meta.get(e.index)??this._nodeId2MetaReloading.get(e.index);return null!=t?this._collection.getComponentObb(t.objectHandle):null}getLoadedNodeIndices(e){this._nodeId2Meta.forEach(((t,i)=>e.push(i))),this._nodeId2MetaReloading.forEach(((t,i)=>e.push(i)))}_preLoadBasis(){!(0,_core_has_js__WEBPACK_IMPORTED_MODULE_7__["default"])("disable-feature:i3s-basis")&&0!=(this.supportedTextureEncodings&_i3s_enums_js__WEBPACK_IMPORTED_MODULE_58__.TextureEncoding.Basis)&&this.i3slayer.textureSetDefinitions?.some((e=>e.formats.some((e=>"basis"===e.format||"ktx2"===e.format))))&&(0,_webgl_engine_lib_BasisUtil_js__WEBPACK_IMPORTED_MODULE_82__.loadBasis)()}_getVertexBufferLayout(e,t){const i={hasTexture:Vt(e.params.material),hasNormals:t.normal,hasRegions:t.uvRegion};return (0,_support_buffer_glUtil_js__WEBPACK_IMPORTED_MODULE_78__.glLayout)((0,_webgl_engine_collections_Component_SourceGeometry_js__WEBPACK_IMPORTED_MODULE_80__.createVertexBufferLayout)(this._getGeometryParameters(i)))}_getObjectIdField(){return this.i3slayer.objectIdField||_layers_LayerConstants_js__WEBPACK_IMPORTED_MODULE_43__.fallbackObjectIDAttribute}_getGlobalIdField(){return this.i3slayer.associatedLayer?.globalIdField}_findGraphicNodeAndIndex(e){const t=(0,_support_attributeUtils_js__WEBPACK_IMPORTED_MODULE_72__.attributeLookup)(this.i3slayer.fieldsIndex,e.attributes,this._getObjectIdField());let i=null;return (0,_core_MapUtils_js__WEBPACK_IMPORTED_MODULE_9__.someMap)(this._nodeId2Meta,(e=>{if(null==e)return!1;const s=e.featureIds.indexOf(t);return-1!==s&&(i={node:e.node,index:s},!0)})),i}_getGraphicIndices(e,t){const i=this._nodeId2Meta.get(e.index);if(null==i)return[];const s=[],r=this._getObjectIdField(),o=this.i3slayer.fieldsIndex;for(const a of t){const e=(0,_support_attributeUtils_js__WEBPACK_IMPORTED_MODULE_72__.attributeLookup)(o,a.attributes,r),t=i.featureIds.indexOf(e);-1!==t&&s.push(t)}return s}whenGraphicBounds(e){const t=this._findGraphicNodeAndIndex(e);if(!t)return Promise.reject();const i=this._getAABB(t.node.index,t.index);return null==i?Promise.reject():Promise.resolve({boundingBox:i,screenSpaceObjects:[]})}getAABBFromIntersectorTarget(e){return null==e.nodeIndex||null==e.componentIndex?null:this._getAABB(e.nodeIndex,e.componentIndex)}_getAABB(e,t){const i=this._nodeId2Meta.get(e);if(null==i?.featureIds||t>=i.featureIds.length)return null;const s=i.objectHandle,r=(0,_i3s_I3SGeometryUtil_js__WEBPACK_IMPORTED_MODULE_63__.boundingBoxCornerPoints)(t,this._collection,s,(0,_geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_38__.newDoubleArray)(24),0),o=this.view.renderSpatialReference,a=this.view.spatialReference;if(!(0,_geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_33__.projectBuffer)(r,o,0,r,a,0,8))return null;const n=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_36__.empty)();return (0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_36__.expandWithBuffer)(n,r,0,8),n}whenGraphicAttributes(e,t){return (0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_69__.whenGraphicAttributes)(this.i3slayer,e,this._getObjectIdField(),t,(()=>[...this._nodeId2Meta.values()].filter(_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_3__.isSome)))}getGraphicFromIntersectorTarget(e){if(null==e.nodeIndex||null==e.componentIndex)return null;const t=this._nodeId2Meta.get(e.nodeIndex);return null==t?.featureIds||e.componentIndex>=t.featureIds.length?null:this._createGraphic(e.componentIndex,t)}_getCacheKey(e){return`${this._layerUrl}/v${Ot}/${e}${this._cacheKeySuffix}`}_getMemCacheKey(e,t=this.elevationOffset){return e+"#"+t}get _idbCacheEnabled(){return!this._controller.disableIDBCache&&!this.hasModifications&&0===this.elevationOffset&&null!=this._cacheKeySuffix}loadCachedGPUData(e){return null!=this._memCache?this._memCache.pop(this._getMemCacheKey(e)):null}deleteCachedGPUData(e){null!=e&&this._deleteComponentObject(e)}_cacheGPUData(e,t=this.elevationOffset){if(null==this._memCache)return void this._deleteComponentObject(e);const i=this._controller.indexDepth-e.node.level;this._memCache.put(this._getMemCacheKey(e.node.index,t),e,e.node.memory,i)}loadMissingTextures(e,t,i,s){const r=e?.filter(((e,i)=>{if(0==(e.usage&this.rendererTextureUsage))return!1;if(null==t)return!0;const s=(0,_i3s_I3SMaterialUtil_js__WEBPACK_IMPORTED_MODULE_65__.selectEncoding)(e.encodings,this.supportedTextureEncodings),r=t[i];return!!(null==r?.data||s&&r.encoding!==s.encoding)}))??[];return 0===r.length?Promise.resolve(!1):i(r,s).then((i=>{let s=0;for(let r=0;r<e.length;r++)s<i.length&&i[s].id===e[r].id&&(t[r]=i[s],s++);return!0}))}loadCachedNodeData(e,t,i){return this._idbCacheEnabled?this._idbCache.get(this._getCacheKey(e.id),t).then((s=>null==s?null:s.nodeVersion!==e.version?(this._idbCache.remove(this._getCacheKey(e.id)),null):(this.elevationInfo.mode===Bt.Absolute&&(e.geometryObb=s.geometryObb),this.loadMissingTextures(s.requiredTextures,s.textureData,i,t).then((i=>(i&&this._idbCache.initialized&&null!=s.textureData&&(s.byteSize=Ut(s.transformedGeometry,s.textureData),s.textureData.every(Ht)&&Gt(e,s)&&this._idbCache.put(this._getCacheKey(e.id),s).catch((t=>vt.warn(`Failed to update node with textures in IndexedDB cache: ${e.id}: ${t}`)))),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_12__.throwIfAborted)(t),s)))))):Promise.resolve(null)}addNode(e,t,i){return Pt(t)?null==t.geometryBuffer?(this._addNodeMeta(e.index,null),Promise.resolve()):this._addData(e,t.attributeDataInfo,(()=>this._transformNode(e,t,i).then((s=>this._safeReschedule((()=>{if(null==s)return e.hasModifications=!1,this._addCachedNodeData(e,null,i);e.hasModifications=s.transformedGeometry.hasModifications;const{obb:r,componentOffsets:o,featureIds:a,anchorIds:n,anchors:l,transformedGeometry:d}=s,h=this._controller.crsIndex,c=this.view.renderSpatialReference,u=(0,_i3s_I3SProjectionUtil_js__WEBPACK_IMPORTED_MODULE_68__.computeGlobalTransformation)(e.mbs,this.elevationOffset,h,c),_=(0,_support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_76__.create)([r.center.x,r.center.y,r.center.z],[r.extents.x,r.extents.y,r.extents.z],(0,_chunks_quatf64_js__WEBPACK_IMPORTED_MODULE_24__.f)(r.orientation.x,r.orientation.y,r.orientation.z,r.orientation.w));(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_25__.e)(_.center,_.center,u),this.elevationInfo.mode===Bt.Absolute&&(e.geometryObb=_),t.geometryData.componentOffsets=o,a&&(t.geometryData.featureIds=Array.from(a)),t.geometryData.anchorIds=n,t.geometryData.anchors=l;const m={nodeVersion:e.version,geometryData:t.geometryData,requiredTextures:t.requiredTextures,textureData:t.textureData,transformedGeometry:d,globalTrafo:u,geometryObb:_,byteSize:Ut(d,t.textureData)};if(this._idbCacheEnabled&&this._idbCache.initialized&&Gt(e,m)){const t=null!=m.textureData?m.textureData.map((e=>Ht(e)?e:null)):null;this._idbCache.put(this._getCacheKey(e.id),{...m,textureData:t}).catch((t=>vt.warn(`Failed to store node in IndexedDB cache: ${e.id}: ${t}`)))}return this._addCachedNodeData(e,m,i)}),i))))):Promise.reject()}getElevationRange(e){let t=1/0,i=-1/0;const s=(0,_geometry_ellipsoidUtils_js__WEBPACK_IMPORTED_MODULE_30__.getReferenceEllipsoid)(this.view.renderCoordsHelper.spatialReference);return this._nodeId2Meta.forEach((r=>{if(null!=r?.node.geometryObb){const o=r.node.geometryObb;if((0,_support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_76__.intersectSphere)(o,e)){const e=this._collection.getObjectTransform(r.objectHandle),o=this.view.renderCoordsHelper.getAltitude(e.position);for(let a=0;a<r.featureIds.length;a++){const e=this._collection.getComponentAabb(r.objectHandle,a,zt);if("local"===this.view.viewingMode)t=Math.min(t,o+e[2]),i=Math.max(i,o+e[5]);else{t=Math.min(t,o+e[2]);const r=Math.max(Math.abs(e[3]),Math.abs(e[0])),a=Math.max(Math.abs(e[4]),Math.abs(e[1])),n=o+e[5]+s.radius;i=Math.max(i,Math.sqrt(r*r+a*a+n*n)-s.radius)}}}}})),{min:t,max:i}}computeVisibilityObb(e){return (0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_69__.computeVisibilityObb)(e,this.view.renderSpatialReference,this._controller.crsIndex,this.i3slayer.spatialReference,this.elevationOffset,this._modifications)}_transformNode(e,t,i){const s=t.geometryData.geometries??[],r=new Array(s.length);for(let f=0;f<s.length;++f)r[f]=this._getVertexBufferLayout(s[f],t.geometryDescriptor);const o=e.mbs,a=this.elevationOffset,n=this._controller.crsIndex,l=this._controller.crsVertex,d=this.view.renderSpatialReference,h=(0,_i3s_I3SProjectionUtil_js__WEBPACK_IMPORTED_MODULE_68__.getLocalOrigin)(o,a,n),c=(0,_i3s_I3SProjectionUtil_js__WEBPACK_IMPORTED_MODULE_68__.computeGlobalTransformation)(o,a,n,d),u=(0,_geometry_projection_projectors_js__WEBPACK_IMPORTED_MODULE_34__.getProjectorName)(n,l),_=(0,_geometry_projection_projectors_js__WEBPACK_IMPORTED_MODULE_34__.getProjectorName)(l,d);if(null==u||null==_)return Promise.resolve(null);const m=this.i3slayer.normalReferenceFrame,g=t.normalReferenceFrame??m??"none",p={context:this.uid,geometryBuffer:t.geometryBuffer,geometryData:t.geometryData,geometryDescriptor:t.geometryDescriptor,layouts:r,localOrigin:h,globalTrafo:c,mbs:o,obb:e.serviceObb,elevationOffset:a,needNormals:!this._isIntegratedMesh&&this._controller.isMeshPyramid,normalReferenceFrame:g,indexToVertexProjector:u,vertexToRenderProjector:_};return this._worker.invoke(p,i)}get _supportsNodeCrossFading(){return!this.view?._stage?.renderer.shadowsEnabled}get nodeCrossfadingEnabled(){return this._supportsNodeCrossFading&&(this.lodCrossfadeinDuration>0||this.lodCrossfadeoutDuration>0||this.lodCrossfadeUncoveredDuration>0)}get nodeFadeoutEnabled(){return this._supportsNodeCrossFading&&this.lodCrossfadeoutDuration>0}_setNewNodeOpacity(e){const t=this.nodeCrossfadingEnabled?0:this.fullOpacity;this._setNodeOpacity(e,t)}addCachedGPUData(e,t,i){if(this.elevationInfo.mode===Bt.Absolute&&(e.geometryObb=(0,_support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_76__.clone)(this._collection.getComponentObb(t.objectHandle))),!this._controller.isGeometryVisible(e))return void this._cacheGPUData(t);null!=this._labeler&&this._addMetaToLabeler(this._labeler,t);const s=e.index;this._addNodeMeta(s,t),this.updateNodeState(s,i),this._collection.setObjectVisibility(t.objectHandle,_webgl_engine_collections_Component_ComponentObject_js__WEBPACK_IMPORTED_MODULE_79__.State.Visible),this._updateMaterial(t),this._setNewNodeOpacity(t),this.elevationInfo.mode!==Bt.Absolute&&this._ensureElevationTask().schedule(s),this._updateEngineObject(t),this._highlights.objectCreated(t),null!=this._treeDebugger&&this._treeDebugger.update()}addCachedNodeData(e,t,i,s){return this._addData(e,i,(()=>this._addCachedNodeData(e,t,s)))}async deleteCachedNodeData(e){if(this._idbCacheEnabled)return this._idbCache.remove(this._getCacheKey(e))}async _addCachedNodeData(e,t,i){if(!this.contentVisible||!this._controller.isGeometryVisible(e))return void this._removeNodeStageData(e.index,this.elevationOffset,this._nodeId2MetaReloading);if(null==t)return void this._addNodeMeta(e.index,null);const s=this._addTasks.get(e.index),{geometryData:r,transformedGeometry:o,globalTrafo:a}=t;await this.i3sOverrides.applyAttributeOverrides(r.featureIds,s.attributeInfo,i,this._controller.requiredAttributes);const n=null!=t.textureData?t.textureData.filter((e=>null!=e&&0!=(e.usage&this.rendererTextureUsage))):[];!(0,_core_has_js__WEBPACK_IMPORTED_MODULE_7__["default"])("disable-feature:i3s-basis")&&n.some((e=>null!=e&&(e.encoding===_i3s_enums_js__WEBPACK_IMPORTED_MODULE_58__.TextureEncoding.Basis||e.encoding===_i3s_enums_js__WEBPACK_IMPORTED_MODULE_58__.TextureEncoding.KTX2)))&&await (0,_webgl_engine_lib_BasisUtil_js__WEBPACK_IMPORTED_MODULE_82__.loadBasis)(),e.memory=0;const{componentOffsets:l,geometries:d,featureIds:h,anchorIds:c,anchors:u}=r,_=this._collection,m=d[0],{layout:g,indices:p,interleavedVertexData:f,positionData:b,hasColors:y}=o,v=this._materialParameters(m,g),I=l||new Uint32Array([0,p?p.length:f.byteLength/g[0].stride]),w={vertices:{data:f,count:f.byteLength/g[0].stride,layoutParameters:v.geometryParams},positionData:{positions:(0,_geometry_support_FloatArray_js__WEBPACK_IMPORTED_MODULE_39__.compactFloatArray)(b.data),indices:(0,_geometry_support_Indices_js__WEBPACK_IMPORTED_MODULE_40__.compactIndices)(b.indices)},indices:p,componentOffsets:I},S=m.transformation?(0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_23__.b)(m.transformation):(0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_23__.a)();(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_22__.m)(S,a,S);const A=(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_22__.B)((0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_26__.c)(),S),T=(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_20__.f)((0,_chunks_mat3f64_js__WEBPACK_IMPORTED_MODULE_21__.a)(),S),D=this.view.renderSpatialReference,R=this.view.basemapTerrain.spatialReference,N=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_26__.c)(),F=[1,1,1];(0,_geometry_projection_localLinearScaleFactors_js__WEBPACK_IMPORTED_MODULE_31__.localLinearScaleFactors)(A,D,F,R)||vt.errorOnce("Unsupported coordinate system for IM overlay"),(0,_geometry_projection_projectVectorToVector_js__WEBPACK_IMPORTED_MODULE_35__.projectVectorToVector)(A,D,N,R);const P=_.createObject({toMapSpace:(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_28__.f)(N[0],N[1],F[0],F[1]),geometry:w,obb:t.geometryObb,transform:{position:A,rotationScale:T}}),U=v.geometryParams.textureCoordinates===_webgl_engine_core_shaderLibrary_attributes_TextureCoordinateAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_81__.TextureCoordinateAttributeType.Atlas,{textures:G,texturePromise:k}=this._initMaterialAndTextures(P,v.material,n,U);e.memory+=this._memEstimateGeometryAdded(P),e.memory+=G.reduce(((e,t)=>e+(null!=t?this._memEstimateTextureAdded(t):0)),0);const B=!!v.material.hasParametersFromSource,q="blend"!==v.material.alphaMode&&v.material.metallicRoughness.baseColorFactor[3]>=1,K=new Mt(e,h,P,this._getInvalidRendererVersion(),s.attributeInfo,{hasParametersFromSource:B,isOpaque:q},G,c,u);s.meta=K,!this._hasTextures&&t.requiredTextures?.some((({usage:e})=>0!=(e&_i3s_enums_js__WEBPACK_IMPORTED_MODULE_58__.TextureUsage.ColorTextures)))&&(this._hasTextures=!0),this._hasData=!0,this._hasColors=this._hasColors||y,this._hasTextures=this._hasTextures||!!e.resources.texture,this.notifyChange("hasTexturesOrVertexColors");const W=this.slicePlaneEnabled;return Promise.all([this._addOrUpdateEdgeRendering(K),k]).then((([t,s])=>(null!=t&&t.updateObjectVisibility(K.objectHandle,!1).catch((e=>jt(e,this.i3slayer.title))),this._safeReschedule((()=>{const i=this._addTasks.get(e.index);if(!i)return;if(this._addNodeMeta(e.index,K),i.meta=null,!this.contentVisible)return void this._removeNodeStageData(e.index,this.elevationOffset);_.setObjectVisibility(P,_webgl_engine_collections_Component_ComponentObject_js__WEBPACK_IMPORTED_MODULE_79__.State.Visible),null!=t&&t.updateObjectVisibility(K.objectHandle,!0).catch((e=>jt(e,this.i3slayer.title))),K.attributeInfo=i.attributeInfo;const s=K.cachedRendererVersion!==this._rendererVersion,r=W!==this.slicePlaneEnabled;this._updateElevationOffsets(K);const o=K.elevationOffsets;this._updateComponentData(K);const a=this._applyFiltersToNode(K);(s||null!=t&&(r||a||o))&&this._addOrUpdateEdgeRendering(K),null!=this._labeler&&this._addMetaToLabeler(this._labeler,K),this._visibleGeometryChanged(K,wt.ADD),this._highlights.objectCreated(K),this._updateMaterial(K),this._setNewNodeOpacity(K),null!=this._treeDebugger&&this._treeDebugger.update()}),i)))).catch((e=>{throw null!=s.meta&&(this._cacheGPUData(s.meta),s.meta=null),e}))}_addNodeMeta(e,t){if(this._removeNodeStageData(e,this.elevationOffset,this._nodeId2MetaReloading),this._nodeId2Meta.has(e)){vt.error("Removing duplicated node");const t=this._nodeId2Meta.get(e);null!=t&&this._deleteComponentObject(t)}else this._controller.updateLoadStatus(e,!0);null!=t&&(t.lodCrossfadeProgress=null,this.nodeCrossfadingEnabled&&kt(t.cachedEdgeMaterials,0)),this._nodeId2Meta.set(e,t),this.notifyChange("elevationRange")}_updateElevationOffsets(e){const t=this.view.renderSpatialReference,i=this._controller.crsIndex,s=this.elevationInfo,r=this.view.basemapTerrain,o=r.spatialReference,a=s.mode;if(null==t||null==o||a===Bt.Absolute)return void(e.elevationOffsets=null);const n=this._collection.getObjectTransform(e.objectHandle);e.elevationOffsets=e.elevationOffsets??[];const l=qt,d=zt,h=a===Bt.OnTheGround,c=this.view.renderCoordsHelper,u=e.featureIds.length,_=(()=>{if(e.cachedElevationAnchors)return e.cachedElevationAnchors;const s=(0,_geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_38__.newDoubleArray)(3*u);e.cachedElevationAnchors=s;for(let r=0;r<u;r++){const a=3*r,h=e.anchorIds?.indexOf(r)??-1;e.anchors&&h>=0?((0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_25__.s)(l,e.anchors[3*h],e.anchors[3*h+1],e.anchors[3*h+2]),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_25__.g)(l,l,e.node.mbs),(0,_geometry_projection_projectVectorToVector_js__WEBPACK_IMPORTED_MODULE_35__.projectVectorToVector)(l,i,l,o),s[a]=l[0],s[a+1]=l[1],s[a+2]=c.getAltitude(l)):(this._collection.getComponentAabb(e.objectHandle,r,d,!0),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_25__.s)(l,(d[0]+d[3])/2,(d[1]+d[4])/2,d[2]),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_25__.t)(l,l,n.rotationScale),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_25__.g)(l,l,n.position),s[a+2]=c.getAltitude(l),(0,_geometry_projection_projectVectorToVector_js__WEBPACK_IMPORTED_MODULE_35__.projectVectorToVector)(l,t,l,o),s[a]=l[0],s[a+1]=l[1])}return s})(),m=s.offset,g=e.elevationOffsets,p=(e,t)=>{const i=h?_[3*e+2]:0;g[e]=m+(null!=t?t-i:0)};r.getElevations(_,u,p)}_ensureElevationTask(){return null!=this._elevationTask||(this._elevationTask=new _i3s_I3SAsyncElevationUpdater_js__WEBPACK_IMPORTED_MODULE_60__.I3SAsyncElevationUpdater(this.view.resourceController.scheduler,(e=>{const t=this._controller.updateElevationChanged(e,this.view.basemapTerrain.spatialReference);return null!=t?t.filterInPlace((e=>null!=this._nodeId2Meta.get(e))):null}),(e=>{const t=this._nodeId2Meta.get(e);this._nodeElevationAlignmentChanged(t)}))),this._elevationTask}_elevationInfoChanged(e,t){const i=e.mode!==Bt.Absolute,s=!!t&&t!==e&&t.mode!==Bt.Absolute;this._intersectionHandler.updateElevationAlignState(i,this.view.state.viewingMode),i&&!s&&this._controller.removeAllGeometryObbs(),this._nodeId2Meta.forEach((e=>this._nodeElevationAlignmentChanged(e)))}_nodeElevationAlignmentChanged(e){null!=e&&(this._updateElevationOffsets(e),this._updateComponentData(e),this._updateEdgeRendering(e),null!=this._labeler&&this._labeler.updateLabelPositions(e),this._updateSnappingSources(e,wt.UPDATE))}_safeReschedule(e,t){return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_12__.throwIfAborted)(t),this._controller.reschedule(e,t)}_materialParameters(e,t){const i=null!=e.params.material?e.params.material:(0,_i3s_I3SMaterialUtil_js__WEBPACK_IMPORTED_MODULE_65__.defaultMaterial)(),s=t.some((e=>"uvRegion"===e.name)),r=t.some((e=>"normalCompressed"===e.name)),o=Vt(i);return{geometryParams:this._getGeometryParameters({hasTexture:o,hasNormals:r,hasRegions:s}),material:i}}_initMaterialAndTextures(e,t,i,s){const r=this._stage.renderView,o=i.map((e=>(0,_i3s_I3SMaterialUtil_js__WEBPACK_IMPORTED_MODULE_65__.createTexture)(e,t,s,r)));this._stage.addMany(o);let a=null;return this._collection.updateMaterial(e,(e=>{a=(0,_i3s_I3SMaterialUtil_js__WEBPACK_IMPORTED_MODULE_65__.configureMaterial)(e,t,o,i,this.view._stage.renderView.textureRepository,{rendererTextureUsage:this.rendererTextureUsage,usePBR:this._usePBR,isIntegratedMesh:this._isIntegratedMesh,slicePlaneEnabled:this.slicePlaneEnabled,viewSpatialReference:this.view.spatialReference}),this._updateMaterialOverlay(e)})),{textures:o,texturePromise:a}}_getGeometryParameters(e){return{textureCoordinates:e.hasTexture?e.hasRegions?_webgl_engine_core_shaderLibrary_attributes_TextureCoordinateAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_81__.TextureCoordinateAttributeType.Atlas:_webgl_engine_core_shaderLibrary_attributes_TextureCoordinateAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_81__.TextureCoordinateAttributeType.Default:_webgl_engine_core_shaderLibrary_attributes_TextureCoordinateAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_81__.TextureCoordinateAttributeType.None,colors:this._hasVertexColors,normals:e.hasNormals&&!this._isIntegratedMesh}}_addData(e,t,i){let s=this._addTasks.get(e.index);return s?s.attributeInfo=t:(s={...(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_12__.createResolver)(),attributeInfo:t,meta:null},this._addTasks.set(e.index,s),i().then(s.resolve,s.reject).then((()=>this._addTasks.delete(e.index))).catch((t=>{throw this._addTasks.delete(e.index),t}))),s.promise}_clearAddTasks(){this._addTasks.forEach((e=>{null!=e.meta&&(this._cacheGPUData(e.meta),e.meta=null)})),this._addTasks.clear()}_clippingAreaChanged(){const e=this.view.renderSpatialReference,t=this.i3slayer.spatialReference,i=(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_37__.create)();this._renderClippingArea=(0,_support_extentUtils_js__WEBPACK_IMPORTED_MODULE_75__.toBoundingRect)(this.view.clippingArea,i,e)?i:null;const s=(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_37__.create)();this._layerClippingArea=(0,_support_extentUtils_js__WEBPACK_IMPORTED_MODULE_75__.toBoundingRect)(this.view.clippingArea,s,t)?s:null,this._filterChange(),this._controller&&this._controller.updateClippingArea(this.view.clippingArea),this._isIntegratedMesh&&this._modificationsChanged()}get hasGeometryFilter(){return!1}_geometryFilterChange(){const e=this.hasGeometryFilter;this._controller.geometryFilterChanged(e),this._applyFilters(e)}_filterChange(){this._applyFilters(this.hasGeometryFilter)}_applyFilters(e){this._filters=this.getFilters(),e?this._controller&&this._controller.requestUpdate():this._nodeId2Meta.forEach((e=>{null!=e&&this._applyFiltersToNode(e)&&(this._addOrUpdateEdgeRendering(e),this._visibleGeometryChanged(e,wt.UPDATE))}))}getFilters(){const e=[],t=this._renderClippingArea;return null!=t&&e.push(((e,i)=>this._boundingRectFilter(e,i,t))),e}addSqlFilter(e,t,i){if(null!=t){const s=t.fieldNames;e.push(((e,r)=>this._sqlFilter(e,r,t,s,i)))}}_sqlFilter(e,t,i,s,r){const o={},a=this._createLayerGraphic(o),n=this.i3slayer.objectIdField,l=t.featureIds,d=t.attributeInfo?.attributeData;s.every((e=>e===n||null!=d?.[e]))&&(0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_69__.filterInPlace)(e,l,(e=>{o[n]=l[e];for(const i of s)i!==n&&(o[i]=d?(0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_69__.getCachedAttributeValue)(d[i],e):null);try{return i.testFeature(a)}catch(t){return r(t),!1}}))}_boundingRectNodeTest(e,t){return (0,_geometry_projection_projectBoundingSphere_js__WEBPACK_IMPORTED_MODULE_32__.projectBoundingSphere)(e.node.mbs,this._controller.crsIndex,Ft,this.view.renderSpatialReference),(0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_69__.intersectBoundingRectWithMbs)(t,Ft)}_boundingRectFeatureTest(e,t,i){return this._collection.getComponentAabb(e.objectHandle,t,St),(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_36__.toRect)(St,At),(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_37__.intersects)(i,At)}_boundingRectFilter(e,t,i){const s=this._collection,r=this._boundingRectNodeTest(t,i);if(r===_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_69__.MbsIntersectResult.INSIDE)return;if(r===_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_69__.MbsIntersectResult.OUTSIDE)return void(e.length=0);const o=s.getComponentCount(t.objectHandle);if(o.invisible+o.visible!==t.featureIds.length)return;const a=this._transformClippingArea(Tt,i,t.objectHandle);(0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_69__.filterInPlace)(e,t.featureIds,(e=>this._boundingRectFeatureTest(t,e,a)))}_transformClippingArea(e,t,i){const s=this._collection.getObjectTransform(i),r=s.position,o=s.rotationScale;return e[0]=(t[0]-r[0])/o[0],e[1]=(t[1]-r[1])/o[4],e[2]=(t[2]-r[0])/o[0],e[3]=(t[3]-r[1])/o[4],e}_addOrUpdateEdgeRendering(e,t=!0){const i=this._edgeView;if(null==i)return Promise.resolve(null);const s=e.objectHandle,r=i.hasObject(s),{hasEdges:o,perFeatureEdgeMaterials:a}=this._getFilteredEdgeMaterials(e),n={hasSlicePlane:this.slicePlaneEnabled};if(o&&r){if(this.nodeCrossfadingEnabled){kt(a,this.getNodeOpacity(e))}return i.updateAllComponentMaterials(s,a,n,t).catch((e=>jt(e,this.i3slayer.title))),i.updateObjectVisibility(s,!0).catch((e=>jt(e,this.i3slayer.title))),i.updateAllVerticalOffsets(s,e.elevationOffsets).catch((e=>jt(e,this.i3slayer.title))),Promise.resolve(i)}return o&&!r?this._collection.addEdges(s,i,a,n).then((t=>(e.edgeMemoryUsage=t,e.node.memory+=t,i.updateAllVerticalOffsets(s,e.elevationOffsets).catch((e=>jt(e,this.i3slayer.title))),i))):(!o&&r&&(e.node.memory-=e.edgeMemoryUsage,e.edgeMemoryUsage=0,i.removeObject(s)),Promise.resolve(null))}_applyFiltersToNode(e){return!!this._applyFiltersToNodeComponents(e)&&(null!=this._labeler&&this._labeler.applyFilterChange(e),!0)}_applyFiltersToNodeComponents(e){const t=this._collection,i=t.getComponentCount(e.objectHandle),s=null!=e.filteredIds,r=0===i.invisible;if(t.setAllComponentVisibilities(e.objectHandle,"all"),0===this._filters.length)return e.filteredIds=null,!r;if(this._updateCachedFilteredIds(e),s&&e.filteredIds===e.featureIds)return!r;const o=this._computeFilteredComponentIndices(e);return t.setAllComponentVisibilities(e.objectHandle,o),!0}_updateCachedFilteredIds(e){null!=e.filteredIds&&e.appliedFilters===this._filters||(e.filteredIds=this._computeFilteredIds(e),e.appliedFilters=this._filters)}_computeFilteredIds(e){const t=e.featureIds.slice();for(const i of this._filters)if(i(t,e),0===t.length)break;return t.length===e.featureIds.length?e.featureIds:t}_computeFilteredComponentIndices(e){const t=new Array,i=e.filteredIds;return null!=i&&e.featureIds.forEach(((e,s)=>{i[t.length]===e&&t.push(s)})),t}_removeAllNodeDataFromStage(e=this.elevationOffset){this._nodeId2Meta.forEach(((t,i)=>this._removeNodeStageData(i,e))),this._nodeId2MetaReloading.forEach(((t,i)=>this._removeNodeStageData(i,e,this._nodeId2MetaReloading))),this._elevationTask=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_10__.destroyMaybe)(this._elevationTask)}removeNode(e){const t=this.elevationOffset;this._removeNodeStageData(e,t),this._removeNodeStageData(e,t,this._nodeId2MetaReloading),null!=this._elevationTask&&this._elevationTask.remove(e)}_removeNodeStageData(e,t,i=this._nodeId2Meta){i.has(e)&&this._controller.updateLoadStatus(e,!1);const s=i.get(e);null!=s?(this._collection.setObjectVisibility(s.objectHandle,_webgl_engine_collections_Component_ComponentObject_js__WEBPACK_IMPORTED_MODULE_79__.State.Hidden),null!=this._edgeView&&this._edgeView.hasObject(s.objectHandle)&&this._edgeView.updateObjectVisibility(s.objectHandle,!1).catch((e=>jt(e,this.i3slayer.title))),this._visibleGeometryChanged(s,wt.REMOVE),null!=this._labeler&&this._labeler.removeNodeMeta(s),i.delete(e),this._highlights.objectDeleted(s),i===this._nodeId2Meta?(this._cacheGPUData(s,t),this.nodeCrossfadingEnabled&&this._crossfadeHelper.stopNodeFading(s)):this._deleteComponentObject(s),null!=this._treeDebugger&&this._treeDebugger.update()):i.delete(e)}_deleteComponentObject(e){if(null!=this._edgeView&&this._edgeView.removeObject(e.objectHandle),this._memEstimateGeometryRemoved(e.objectHandle),this._collection.destroyObject(e.objectHandle),e.textures)for(const t of e.textures)this._memEstimateTextureRemoved(t),this._stage.remove(t)}updateNodeState(e,t){const i=this._nodeId2Meta.get(e);null!=i&&this._collection.updateMaterial(i.objectHandle,(e=>e.polygonOffsetEnabled=t===_i3s_I3SNode_js__WEBPACK_IMPORTED_MODULE_66__.NodeState.Hole))}updateNodeIndex(e,t){if(this._nodeId2Meta.has(e)){const i=this._nodeId2Meta.get(e);this._nodeId2Meta.delete(e),this._nodeId2Meta.set(t,i),this.notifyChange("elevationRange")}const i=this._nodeId2MetaReloading.get(e);i&&(this._nodeId2MetaReloading.delete(e),this._nodeId2MetaReloading.set(t,i))}_invalidateAllSymbols(){this._rendererVersion=(0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_69__.addWraparound)(this._rendererVersion,1),this._controller&&this._controller.requestUpdate()}_getInvalidRendererVersion(){return (0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_69__.addWraparound)(this._rendererVersion,-1)}async _rendererChange(e){if(this._currentRenderer=e,this.notifyChange("rendererTextureUsage"),this._rendererVersion=(0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_69__.addWraparound)(this._rendererVersion,1),this._rendererFields=null,this._colorVariable=null,this._opacityVariable=null,this._invalidateAllSymbols(),e&&(this._rendererFields=await e.getRequiredFields(this.i3slayer.fieldsIndex)),this._updateSymbologyFields(),!this._arcade&&e&&"arcadeRequired"in e&&e.arcadeRequired&&(this._arcade=await (0,_support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_48__.loadArcade)()),e&&"visualVariables"in e&&e.visualVariables)for(const t of e.visualVariables)"color"===t.type?this._colorVariable=t:"opacity"===t.type?this._opacityVariable=t:vt.warn(`Unsupported visual variable type for 3D Object Scene Services: ${t.type}`);if(e)for(const t of e.getSymbols())"mesh-3d"!==t.type&&vt.error(`Symbols of type '${t.type}' are not supported for 3D Object Scene Services.`);this._controller&&this._controller.requestUpdate()}_getCachedEdgeMaterials(e){return this._hasComponentData&&e.cachedRendererVersion!==this._rendererVersion&&this._updateCachedRendererData(e),e.cachedEdgeMaterials}_getComponentParameters(e){this._hasComponentData&&e.cachedRendererVersion!==this._rendererVersion&&this._updateCachedRendererData(e);const t=e.cachedSymbology;return(i,s)=>{const r=5*i;if((0,_chunks_vec4_js__WEBPACK_IMPORTED_MODULE_27__.s)(s.externalColor,t[r]/255,t[r+1]/255,t[r+2]/255,t[r+3]/255),null!=this._stage.renderView.objectAndLayerIdRenderHelper){const t=e.featureIds[i],r=(0,_support_basemapUtils_js__WEBPACK_IMPORTED_MODULE_49__.isBasemapLayer)(this.view.map,this.layerUid);this._stage.renderView.objectAndLayerIdRenderHelper.setUidToObjectAndLayerId(t,t,this.layerId,this.layerUid+"_"+this.sublayerId,this.layerPopupEnabledAndHasTemplate&&!r,e.node.resources.attributes,i,this.sublayerId),s.objectAndLayerIdColor=this._stage.renderView.getObjectAndLayerIdColor({graphicUid:t,layerUid:this.layerUid+"_"+this.sublayerId})}s.externalColorMixMode=t[r+4]&(1<<Ct.CastShadows)-1,s.castShadows=0!=(t[r+4]&1<<Ct.CastShadows),s.pickable=0!=(t[r+4]&1<<Ct.Pickable),s.elevationOffset=e.elevationOffsets?.[i]??0}}_getSymbolInfo(e,t){const i=e?.getSymbol(t,{arcade:this._arcade});if(!(i instanceof _symbols_Symbol3D_js__WEBPACK_IMPORTED_MODULE_50__["default"]))return null;const s=i.id;if(this._symbolInfos.has(s))return this._symbolInfos.get(s);const r=(0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_69__.getSymbolInfo)(i);return this._symbolInfos.set(s,r),r}_setSymbologyOverride(e,t){this._symbologyOverride!==e&&(this._symbologyOverride=e,this._symbologyOverrideFields=t,this._invalidateAllSymbols(),this._updateSymbologyFields())}_updateSymbologyFields(){this._symbologyFields=null!=this._symbologyOverrideFields&&this._symbologyOverrideFields.length>0?null!=this._rendererFields&&this._rendererFields.length>0?(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_45__.fixFields)(this.i3slayer.fieldsIndex,[...this._rendererFields,...this._symbologyOverrideFields]):this._symbologyOverrideFields:this._rendererFields}_updateCachedRendererData(e){if(e.cachedRendererVersion=this._rendererVersion,!this._hasComponentData)return;const t=this._tmpAttributeOnlyGraphic,i={};t.attributes=i;const s=this._currentRenderer,r=e.attributeInfo?.attributeData,o=null!=e.featureIds?this.i3slayer.objectIdField:null,a=null!=r&&null!=this._symbologyFields&&this._symbologyFields.length>0;let n=null,l=null;if(a&&null!=this._symbologyFields){n=[],l=[];for(const e of this._symbologyFields){const t=r[e];t&&(n.push(e),l.push(t))}}e.cachedSymbology||(e.cachedSymbology=(0,_geometry_support_UByteArray_js__WEBPACK_IMPORTED_MODULE_42__.newUByteArray)(5*e.featureIds.length));const d={color:Rt,castShadows:!0,pickable:!0,colorMixMode:_support_symbolColorUtils_js__WEBPACK_IMPORTED_MODULE_73__.ColorMixModeEnum.Multiply,edgeMaterial:null},h=this.fullOpacity,c=this.nodeCrossfadingEnabled?this.getNodeOpacity(e):h;let u=null,_=_webgl_engine_lib_edgeRendering_interfaces_js__WEBPACK_IMPORTED_MODULE_83__.Transparency.OPAQUE,m=_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_69__.transparentEdgeMaterial,g=0;for(let p=0;p<e.featureIds.length;p++){if(null!=o&&(i[o]=e.featureIds[p]),a&&n)for(let e=0;e<n.length;e++)i[n[e]]=(0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_69__.getCachedAttributeValue)(l[e],p);const r=s?this._getSymbolInfo(s,t):null;let h=null,f=null;if(s&&"visualVariables"in s){if(this._colorVariable){const e=(0,_renderers_visualVariables_support_visualVariableUtils_js__WEBPACK_IMPORTED_MODULE_47__.getColor)(this._colorVariable,t,{color:Nt,arcade:this._arcade});e&&(h=Rt,h[0]=e.r/255,h[1]=e.g/255,h[2]=e.b/255,this._opacityVariable||null===e.a||(f=e.a))}this._opacityVariable&&(f=(0,_renderers_visualVariables_support_visualVariableUtils_js__WEBPACK_IMPORTED_MODULE_47__.getOpacity)(this._opacityVariable,t,{arcade:this._arcade}))}if(r?.material){const e=r.material;h=null==h||null==f?(0,_graphics_graphicUtils_js__WEBPACK_IMPORTED_MODULE_56__.overrideColor)(h,f,e.color,e.alpha,It,Rt):(0,_graphics_graphicUtils_js__WEBPACK_IMPORTED_MODULE_56__.overrideColor)(h,f,null,null,It,Rt)}if(null==h&&(h=Rt,h[0]=1,h[1]=1,h[2]=1,h[3]=1),d.pickable=!0,d.castShadows=!r||r.castShadows,d.colorMixMode=r?.material?r.material.colorMixMode:_support_symbolColorUtils_js__WEBPACK_IMPORTED_MODULE_73__.ColorMixModeEnum.Multiply,d.edgeMaterial=r?r.edgeMaterial:null,null!=this._symbologyOverride&&(d.color=h,this._symbologyOverride(t,d),h=d.color),null!=this._nodeColorOverride&&(this._nodeColorOverride(e.node,h),d.colorMixMode=_support_symbolColorUtils_js__WEBPACK_IMPORTED_MODULE_73__.ColorMixModeEnum.Replace),null!=d.edgeMaterial){const t=h[3]<=0?_webgl_engine_lib_edgeRendering_interfaces_js__WEBPACK_IMPORTED_MODULE_83__.Transparency.INVISIBLE:h[3]>=1&&(e.material.isOpaque||d.colorMixMode===_support_symbolColorUtils_js__WEBPACK_IMPORTED_MODULE_73__.ColorMixModeEnum.Replace)?_webgl_engine_lib_edgeRendering_interfaces_js__WEBPACK_IMPORTED_MODULE_83__.Transparency.OPAQUE:_webgl_engine_lib_edgeRendering_interfaces_js__WEBPACK_IMPORTED_MODULE_83__.Transparency.TRANSPARENT;d.edgeMaterial===u&&t===_||(m={...d.edgeMaterial,opacity:c,objectTransparency:t},u=d.edgeMaterial,_=t),e.cachedEdgeMaterials[p]=m}else e.cachedEdgeMaterials[p]=_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_69__.transparentEdgeMaterial;e.cachedSymbology[g++]=Math.round(255*h[0]),e.cachedSymbology[g++]=Math.round(255*h[1]),e.cachedSymbology[g++]=Math.round(255*h[2]),e.cachedSymbology[g++]=Math.round(255*h[3]),e.cachedSymbology[g++]=d.colorMixMode|+d.castShadows<<Ct.CastShadows|+d.pickable<<Ct.Pickable}}_getFilteredEdgeMaterials(e){const t=this._getCachedEdgeMaterials(e);this.nodeCrossfadingEnabled||kt(t,this.fullOpacity);const i=e.filteredIds;if(null==i){return{hasEdges:t.some((e=>e!==_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_69__.transparentEdgeMaterial)),perFeatureEdgeMaterials:t}}let s=0,r=!1;const o=t.map(((t,o)=>e.featureIds[o]!==i[s]?_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_69__.transparentEdgeMaterial:(r=r||t!==_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_69__.transparentEdgeMaterial,s++,t)));return{hasEdges:r,perFeatureEdgeMaterials:o}}_updateComponentData(e){if(!this._hasComponentData)return;const t=e.objectHandle,i=this._getComponentParameters(e);this._collection.setComponentData(t,i),this._stage.renderView.requestRender()}_reloadAll(e=this.elevationOffset){this._removeAllNodeDataFromStage(e),null!=this._controller&&this._controller.restartNodeLoading()}_opacityChange(e){this.nodeCrossfadingEnabled&&this._crossfadeHelper.stopAllNodeFading(),this._nodeId2Meta.forEach((t=>{null!=t&&(this._collection.updateMaterial(t.objectHandle,(t=>t.objectOpacity=e)),kt(t.cachedEdgeMaterials,e),this._updateEdgeRendering(t))}))}_updateMaterial(e){this._collection.updateMaterial(e.objectHandle,(e=>{e.commonMaterialParameters.hasSlicePlane=this.slicePlaneEnabled,e.usePBR=this._usePBR,this._updateMaterialOverlay(e)}))}_updateMaterialOverlay(e){}_updateEngineObject(e){this._updateComponentData(e),this._applyFiltersToNode(e),this._addOrUpdateEdgeRendering(e),this._visibleGeometryChanged(e,wt.UPDATE)}_slicePlaneEnabledChange(e){this._intersectionHandler&&(this._intersectionHandler.slicePlaneEnabled=e),null!=this._labeler&&(this._labeler.slicePlaneEnabled=e),this._nodeId2Meta.forEach((t=>{null!=t&&(this._collection.updateMaterial(t.objectHandle,(t=>t.commonMaterialParameters.hasSlicePlane=e)),this._updateEdgeRendering(t,!1))}))}_updatePBR(e){this._nodeId2Meta.forEach((t=>{null!=t&&this._collection.updateMaterial(t.objectHandle,(t=>t.usePBR=e))})),this._hasLoadedPBRTextures=!0}get _usePBR(){return!this._isIntegratedMesh&&this.view.qualitySettings.physicallyBasedRenderingEnabled}_updateEdgeRendering(e,t=!0){null!=this._edgeView&&this._edgeView.hasObject(e.objectHandle)&&this._addOrUpdateEdgeRendering(e,t)}_forAllNodes(e){this._nodeId2Meta.forEach(e)}_ignoreClientNodeOverriddenFeatures(e){return this.i3sOverrides.hasGeometryChanges?(t,i,s)=>s.node.index>=0&&this.i3sOverrides.featureHasGeometryChanges(t)?_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_54__.ForAllFeaturesReturnType.CONTINUE:e(t,i,s):e}_forAllFeatures(e,t,i){(0,_core_MapUtils_js__WEBPACK_IMPORTED_MODULE_9__.someMap)(this._nodeId2Meta,(s=>{if(null==s)return!1;if(null!=t){switch(t(s)){case _II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_54__.ForAllFeaturesReturnType.EXIT:return!0;case _II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_54__.ForAllFeaturesReturnType.SKIP:return!1}}let r=_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_54__.ForAllFeaturesReturnType.CONTINUE;switch(i){case _II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_54__.ForAllFeaturesMode.ALL:r=this._forAllFeaturesOfNode(s,e);break;case _II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_54__.ForAllFeaturesMode.VISIBLE_ONLY:r=this._forAllVisibleFeaturesOfNode(s,e);break;case _II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_54__.ForAllFeaturesMode.QUERYABLE:r=this._forAllQueryableFeaturesOfNode(s,e)}return r===_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_54__.ForAllFeaturesReturnType.EXIT}))}_forAllFeaturesOfNode(e,t){let i=_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_54__.ForAllFeaturesReturnType.CONTINUE;const s=e.featureIds;for(let r=0;r<s.length;r++)if(i=t(s[r],r,e),i===_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_54__.ForAllFeaturesReturnType.EXIT)return i;return i}_forAllVisibleFeaturesOfNode(e,t){let i=_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_54__.ForAllFeaturesReturnType.CONTINUE;const s=e.featureIds;return this._collection.forEachVisibleComponent(e.objectHandle,(r=>(i=t(s[r],r,e),i===_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_54__.ForAllFeaturesReturnType.CONTINUE))),i}_forAllQueryableFeaturesOfNode(e,t){const i=this._ignoreClientNodeOverriddenFeatures(t);if(null==this._renderClippingArea)return this._forAllFeaturesOfNode(e,i);const s=this._boundingRectNodeTest(e,this._renderClippingArea);if(s===_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_69__.MbsIntersectResult.OUTSIDE)return _II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_54__.ForAllFeaturesReturnType.CONTINUE;if(s===_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_69__.MbsIntersectResult.INSIDE)return this._forAllFeaturesOfNode(e,i);const r=_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_54__.ForAllFeaturesReturnType.CONTINUE,o=e.featureIds,a=e.objectHandle,n=(0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_69__.getClipRect)(this._renderClippingArea,this._collection.getObjectTransform(a));for(let l=0;l<o.length;l++){if(!this._boundingRectFeatureTest(e,l,n))continue;const t=i(o[l],l,e);if(t===_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_54__.ForAllFeaturesReturnType.EXIT)return t}return r}_createAttributes(e,t){const i={};null!=t.featureIds&&(i[this._getObjectIdField()]=t.featureIds[e]);const s=t.attributeInfo?.attributeData;if(null!=s)for(const r of Object.keys(s))i[r]=(0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_69__.getCachedAttributeValue)(s[r],e);return i}_createGraphic(e,t){return this._createLayerGraphic(this._createAttributes(e,t))}highlight(e){if("number"==typeof e||e instanceof _Graphic_js__WEBPACK_IMPORTED_MODULE_2__["default"]?e=[e]:e instanceof _core_Collection_js__WEBPACK_IMPORTED_MODULE_5__["default"]&&(e=e.toArray()),Array.isArray(e)&&e.length>0){if(e[0]instanceof _Graphic_js__WEBPACK_IMPORTED_MODULE_2__["default"]){const t=e,i=this.i3slayer.fieldsIndex,s=this._getObjectIdField(),r=t.map((e=>(0,_support_attributeUtils_js__WEBPACK_IMPORTED_MODULE_72__.attributeLookup)(i,e.attributes,s))),{set:o,handle:a}=this._highlights.acquireSet();return this._highlights.setFeatureIds(o,r),a}if("number"==typeof e[0]){const t=e,{set:i,handle:s}=this._highlights.acquireSet();return this._highlights.setFeatureIds(i,t),s}}return (0,_core_handleUtils_js__WEBPACK_IMPORTED_MODULE_6__.makeHandle)()}resetHighlights(){(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_10__.destroyMaybe)(this._highlights),this._highlights=new _i3s_Highlights_js__WEBPACK_IMPORTED_MODULE_59__["default"]({collection:this._collection,forAllFeatures:e=>this._forAllFeatures(e,null,_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_54__.ForAllFeaturesMode.ALL),forAllFeaturesOfNode:(e,t)=>this._forAllFeaturesOfNode(e,t)})}_visibleGeometryChanged(e,t){this._elevationProvider&&(this._elevationProvider.objectChanged(e.node),null==this._visibleGeometryChangedSchedulerHandle&&(this._visibleGeometryChangedSchedulerHandle=(0,_core_scheduling_js__WEBPACK_IMPORTED_MODULE_14__.schedule)((()=>{this.emit("visible-geometry-changed"),this._visibleGeometryChangedSchedulerHandle=null}))),this._updateSnappingSources(e,t))}get performanceInfo(){const e={displayedNumberOfFeatures:0,maximumNumberOfFeatures:0,totalNumberOfFeatures:0,core:null,index:0,nodes:this._nodeId2Meta.size,"Total GPU Memory Estimate":(this._gpuMemoryEstimate/1048576).toFixed(1)+"MB","Geometry Memory Estimate":(this._geoMemoryEstimate/1048576).toFixed(1)+"MB","Texture Memory Estimate":(this._texMemoryEstimate/1048576).toFixed(1)+"MB","Unloaded Memory Estimate":(this.unloadedMemory/1048576).toFixed(1)+"MB"};return null!=this._memCache&&(e.MemCache=Math.round(100*this._memCache.hitRate)+"% hit"),this._controller&&(this._idbCacheEnabled&&(e.IDBCache=Math.round(100*this._idbCache.getHitRate())+"% hit"),this._controller.updateStats(e)),e}get test(){const e=this,t=e=>{this._nodeColorOverride=e,this._invalidateAllSymbols()};return{controller:this._controller,labeler:this._labeler,get visibleObjectIds(){const t=[];return e._forAllFeatures((e=>(t.push(e),_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_54__.ForAllFeaturesReturnType.CONTINUE)),null,_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_54__.ForAllFeaturesMode.VISIBLE_ONLY),t.sort(((e,t)=>e-t)),t},get numNodes(){return e._nodeId2Meta.size},get loadedNodes(){return Array.from(e._nodeId2Meta.keys()).sort(((e,t)=>e-t))},setNodeColorOverride:t,setNodeColoring:e=>{if("client-nodes"===e)t(((e,t)=>{e.index<0?(t[0]=1,t[1]=0,t[2]=0):(t[0]=1,t[1]=1,t[2]=1)}));else t(null)}}}getNodeOpacityByIndex(e){const t=this._nodeId2Meta.get(e);return this.getNodeOpacity(t)}getNodeOpacity(e){return null!=e?this._collection.getMaterial(e.objectHandle).objectOpacity:0}isNodeFullyFadedIn(e){return this._crossfadeHelper.isNodeFullyFadedIn(e)}getNodeCrossfadeMetaData(e){return this._nodeId2Meta.get(e)}markNodeToRemove(e){this._controller&&this._controller.markNodeToRemove(e)}removeMarkedNodes(){this._controller&&this._controller.removeMarkedNodes()}foreachCrossfadeNode(e){this._nodeId2Meta.forEach(((t,i)=>e(i,t)))}fadeNode(e,t,i){if(!this.nodeCrossfadingEnabled)return;const s=this._nodeId2Meta.get(e);null!=s&&this._crossfadeHelper.fadeNode(e,s,t,i)}setNodeOpacityByIndex(e,t){const i=this._nodeId2Meta.get(e);null!=i&&this._setNodeOpacity(i,t)}_setNodeOpacity(e,t){this._collection.updateMaterial(e.objectHandle,(e=>e.objectOpacity=t)),this._setNodeEdgeOpacity(e,t)}_setNodeEdgeOpacity(e,t){if(null==this._edgeView||!e.cachedEdgeMaterials)return;kt(e.cachedEdgeMaterials,t);const i=e.objectHandle;this._edgeView.hasObject(i)&&this._edgeView.updateAllComponentOpacities(i,t).catch((e=>jt(e,this.i3slayer.title)))}get hasModifications(){return this._isIntegratedMesh&&null!=this._layerClippingArea||this._modifications&&this._modifications.length>0}updateNodeModificationStatus(e){const t=e.length;if(!this.hasModifications||t<=0||!0!==this._i3sWasmLoaded)return;const i=this.uid,s=Lt(e);if(null!=s){const t={context:i,buffer:s.buffer};(0,_SceneLayerWorker_js__WEBPACK_IMPORTED_MODULE_55__.filterObbsForModificationsSync)(t);const r=new Float64Array(s.buffer);e.forAll(((e,t)=>{const i=r[t],s=(0,_SceneLayerWorker_js__WEBPACK_IMPORTED_MODULE_55__.interpretObbModificationResults)(i);e.imModificationImpact=s,s!==_i3s_I3SNode_js__WEBPACK_IMPORTED_MODULE_66__.NodeIMModificationImpact.Unmodified&&this._controller.invalidateGeometryVisibility(e.index)}))}}notifyUpdate(){this.notifyChange("updating")}notifyLODUpdate(){this._controller.notifyLODUpdate()}isUpdating(){return!(!this._controller||!this._controller.updating)||!!this._visibleGeometryChangedSchedulerHandle||null!=this._labeler&&this._labeler.updating||this._crossfadeHelper?.updating||this._i3sWasmLoaded instanceof Promise||this._asyncModuleLoading>0||null!=this._elevationTask&&this._elevationTask.running}trackSnappingSources(e){const t={events:e,fetchEdgeLocations:async(e,t,i)=>{const s=this._nodeId2Meta.get(e);if(null==s)throw new Error("invalid-node");const{origin:r,buffer:o}=await this._collection.extractEdgeInformation(s.objectHandle,t,i);return this._snappingLocationsApplyElevation(s,o,r),{type:"components",objectIds:s.featureIds,locations:o,origin:r}},remove:()=>{(0,_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_3__.removeUnordered)(this._snappingSourcesTrackers,t)}};return this._snappingSourcesTrackers.push(t),this._nodeId2Meta.forEach(((t,i)=>{if(null==t)return;const s=this._controller.getRenderMbs(t.node);null!=s&&e.add(i,s)})),t}_snappingLocationsApplyElevation(e,t,i){if(!e.elevationOffsets||this.elevationInfo.mode===Bt.Absolute)return;const s=t.position0,r=t.position1,o=t.componentIndex,a=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_26__.c)(),n=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_26__.c)(),l=(e,t)=>{(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_25__.g)(e,e,i),this.view.renderCoordsHelper.worldUpAtPosition(e,n),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_25__.g)(e,e,(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_25__.i)(n,n,t)),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_25__.f)(e,e,i)};for(let d=0;d<s.count;d++){const t=e.elevationOffsets[o.get(d)];s.getVec(d,a),l(a,t),s.setVec(d,a),r.getVec(d,a),l(a,t),r.setVec(d,a)}}_updateSnappingSources(e,t){const{index:i}=e.node,s=this._controller.getRenderMbs(e.node);if(null!=s)for(const r of this._snappingSourcesTrackers)t!==wt.REMOVE&&t!==wt.UPDATE||r.events.remove(i),t!==wt.ADD&&t!==wt.UPDATE||r.events.add(i,s)}};return (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_17__.property)()],o.prototype,"_hasLoadedPBRTextures",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_17__.property)()],o.prototype,"_asyncModuleLoading",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_17__.property)()],o.prototype,"_visibleGeometryChangedSchedulerHandle",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_17__.property)()],o.prototype,"view",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_17__.property)()],o.prototype,"i3slayer",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_17__.property)()],o.prototype,"_controller",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_17__.property)()],o.prototype,"_labeler",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_17__.property)()],o.prototype,"updating",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_17__.property)()],o.prototype,"suspended",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_17__.property)()],o.prototype,"contentVisible",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_17__.property)({readOnly:!0})],o.prototype,"legendEnabled",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_17__.property)()],o.prototype,"holeFilling",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_17__.property)(_support_updatingProperties_js__WEBPACK_IMPORTED_MODULE_77__.updatingProgress)],o.prototype,"updatingProgress",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_17__.property)()],o.prototype,"updatingProgressValue",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_17__.property)()],o.prototype,"hasTexturesOrVertexColors",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_17__.property)()],o.prototype,"rendererTextureUsage",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_17__.property)()],o.prototype,"elevationOffset",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_17__.property)()],o.prototype,"elevationInfo",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_17__.property)({type:Boolean})],o.prototype,"slicePlaneEnabled",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_17__.property)()],o.prototype,"supportedTextureEncodings",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_17__.property)()],o.prototype,"uncompressedTextureDownsamplingEnabled",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_17__.property)({type:[_layers_support_SceneModification_js__WEBPACK_IMPORTED_MODULE_46__["default"]]})],o.prototype,"_modifications",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_17__.property)({readOnly:!0})],o.prototype,"clientGeometry",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_17__.property)()],o.prototype,"elevationRange",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_17__.property)()],o.prototype,"_elevationTask",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_17__.property)({readOnly:!0})],o.prototype,"_usePBR",null),o=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_19__.subclass)(yt)],o),o};function jt(e,t){(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_12__.isAbortError)(e)||vt.warn("Error while processing edges. Edges on this layer might not display correctly",t,e)}var wt;!function(e){e[e.ADD=0]="ADD",e[e.REMOVE=1]="REMOVE",e[e.UPDATE=2]="UPDATE"}(wt||(wt={}));const St=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_36__.create)(),At=(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_37__.create)(),Tt=(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_37__.create)(),Dt=(0,_support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_76__.create)(),Rt=[0,0,0,0],Nt=new _Color_js__WEBPACK_IMPORTED_MODULE_1__["default"]([0,0,0,0]),Ft=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_41__.f)(0,0,0,0);function Vt(e){if(null==e)return!1;const t=e.metallicRoughness;return t&&t.baseColorTextureId>=0||t&&t.metallicRoughnessTextureId>=0||e.normalTextureId>=0||e.emissiveTextureId>=0||e.occlusionTextureId>=0}function Pt(e){return"geometryData"in e}function Ht(e){return null!=e&&(0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_15__.isArrayBuffer)(e.data)}function Ut(e,t){let i=1024+e.interleavedVertexData.byteLength+(e.indices?e.indices.byteLength:0)+e.positionData.data.byteLength+e.positionData.indices.byteLength;if(null!=t)for(const s of t)null!=s&&(0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_15__.isArrayBuffer)(s.data)&&(i+=s.data.byteLength);return i}function Gt(e,t){return t.byteSize>xt?(vt.warn(`Node is too big to store in IndexedDB cache: ${e.id} (${t.byteSize} bytes)`),!1):t.byteSize>0}function Lt(e){if(0===e.length)return null;const t=10*e.length,i=new Float64Array(t);return e.forAll(((e,t)=>{let s=e.serviceObb;null==s&&(s=Dt,(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_25__.c)(s.center,e.mbs),s.halfSize[0]=s.halfSize[1]=s.halfSize[2]=e.mbs[3]);const r=10*t;i[r]=s.center[0],i[r+1]=s.center[1],i[r+2]=s.center[2],i[r+3]=s.halfSize[0],i[r+4]=s.halfSize[1],i[r+5]=s.halfSize[2],i[r+6]=s.quaternion[0],i[r+7]=s.quaternion[1],i[r+8]=s.quaternion[2],i[r+9]=s.quaternion[3]})),i}function kt(e,t){e.forEach((e=>e.opacity=t))}var Bt;!function(e){e[e.Absolute=0]="Absolute",e[e.RelativeToGround=1]="RelativeToGround",e[e.OnTheGround=2]="OnTheGround"}(Bt||(Bt={}));const qt=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_26__.c)(),zt=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_36__.create)(),Kt="elevation-change";function Wt(e){return t=>{if(e.immediate)return e.immediate.schedule(t);throw console.error("Error no immediate schudler"),new Error("cant find immediate scheduler")}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/I3SMeshViewLabeler.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/I3SMeshViewLabeler.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ L)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _symbols_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../symbols.js */ "./node_modules/@arcgis/core/symbols.js");
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/Accessor.js */ "./node_modules/@arcgis/core/core/Accessor.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../core/lang.js */ "./node_modules/@arcgis/core/core/lang.js");
/* harmony import */ var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../core/mathUtils.js */ "./node_modules/@arcgis/core/core/mathUtils.js");
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../core/reactiveUtils.js */ "./node_modules/@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _core_uid_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../core/uid.js */ "./node_modules/@arcgis/core/core/uid.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _core_accessorSupport_diffUtils_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../core/accessorSupport/diffUtils.js */ "./node_modules/@arcgis/core/core/accessorSupport/diffUtils.js");
/* harmony import */ var _geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../geometry/projection/projectBuffer.js */ "./node_modules/@arcgis/core/geometry/projection/projectBuffer.js");
/* harmony import */ var _geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../geometry/support/aaBoundingBox.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingBox.js");
/* harmony import */ var _geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../geometry/support/DoubleArray.js */ "./node_modules/@arcgis/core/geometry/support/DoubleArray.js");
/* harmony import */ var _layers_graphics_dehydratedPoint_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../layers/graphics/dehydratedPoint.js */ "./node_modules/@arcgis/core/layers/graphics/dehydratedPoint.js");
/* harmony import */ var _graphics_Graphics3DCore_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./graphics/Graphics3DCore.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DCore.js");
/* harmony import */ var _graphics_Graphics3DScaleVisibility_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./graphics/Graphics3DScaleVisibility.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DScaleVisibility.js");
/* harmony import */ var _i3s_I3SGeometryUtil_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./i3s/I3SGeometryUtil.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SGeometryUtil.js");
/* harmony import */ var _support_LimitGraphicsMap_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../support/LimitGraphicsMap.js */ "./node_modules/@arcgis/core/views/3d/support/LimitGraphicsMap.js");
/* harmony import */ var _webgl_engine_lib_UpdatePolicy_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../webgl-engine/lib/UpdatePolicy.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/UpdatePolicy.js");
/* harmony import */ var _symbols_PointSymbol3D_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../symbols/PointSymbol3D.js */ "./node_modules/@arcgis/core/symbols/PointSymbol3D.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class G{constructor(e,t){this.meta=e,this.index=t}}class D{constructor(e,t){this.graphic=e,this.geometry=t,this.components=[],this.overridesDirty=!1}}let w=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_2__["default"]{get updating(){return this._graphicsCore?.updating??!1}constructor(e){super(e),this.loadedGraphics=new _support_LimitGraphicsMap_js__WEBPACK_IMPORTED_MODULE_20__.LimitGraphicsMap(5e4),this.slicePlaneEnabled=!1,this._renderingInfo={symbol:new _symbols_PointSymbol3D_js__WEBPACK_IMPORTED_MODULE_22__["default"]},this._featuresMap=new Map}initialize(){const e=this.view.basemapTerrain;this._graphicsCore=new _graphics_Graphics3DCore_js__WEBPACK_IMPORTED_MODULE_17__.Graphics3DCore({owner:this,layer:this.layer,preferredUpdatePolicy:_webgl_engine_lib_UpdatePolicy_js__WEBPACK_IMPORTED_MODULE_21__.UpdatePolicy.ASYNC,elevationFeatureExpressionEnabled:!1,graphicSymbolSupported:!1,getRenderingInfoWithoutRenderer:!0,hasZ:!0,hasM:!1,componentFactories:{deconflictor:e=>this.view.deconflictor.addGraphicsOwner(e),labeler:(e,t)=>this.view.labeler.addGraphicsOwner(e,t,{emptySymbolLabelSupported:!0,elevationInfoOverride:{mode:"absolute-height",offset:0},disablePlacement:{logEntityDescription:"3D Object Scene Layer features"}}),scaleVisibility:(t,r)=>new _graphics_Graphics3DScaleVisibility_js__WEBPACK_IMPORTED_MODULE_18__.Graphics3DScaleVisibility({graphicsCoreOwner:this,layer:this.layer,queryGraphicUIDsInExtent:r,graphicsCore:t,basemapTerrain:e,layerScaleEnabled:!1})}}),this._graphicsCore.initializePromise.then((()=>this._graphicsCore.startCreateGraphics())).catch((()=>{})),this.addHandles((0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_7__.watch)((()=>this.layer.labelingInfo),((e,t)=>{(0,_core_accessorSupport_diffUtils_js__WEBPACK_IMPORTED_MODULE_12__.diff)(e,t)&&this._graphicsCore.updateLabelingInfo()})))}destroy(){this._graphicsCore=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_6__.destroyMaybe)(this._graphicsCore),this.loadedGraphics=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_6__.destroyMaybe)(this.loadedGraphics),this.view=null}addNodeMeta(e,t){let r=0;const s=e.filteredIds,o=this.view.spatialReference,i=[];for(let a=0;a<e.featureIds.length;a++){const p=e.featureIds[a];let c=null==s;if(s&&r<s.length&&p===s[r]&&(c=!0,r++),!this._enabledForFeatureInNode(e,a))continue;const h=this._featuresMap.get(p);if(h){h.components.push(new G(e,a)),this._updateLabelPosition(p);continue}const l=t(a,e),d=(0,_layers_graphics_dehydratedPoint_js__WEBPACK_IMPORTED_MODULE_16__.makeDehydratedPoint)(0,0,0,o),u={objectId:p,uid:(0,_core_uid_js__WEBPACK_IMPORTED_MODULE_8__.generateUID)(),attributes:l,visible:c,geometry:d},m=new D(u,d);m.components.push(new G(e,a)),this._featuresMap.set(p,m),this._updateLabelGeometry(p),i.push(u)}this.loadedGraphics.addMany(i)}updateLabelPositions(e){const t=this.view.renderCoordsHelper;this._forEachGraphic(e,((r,s,o)=>{const i=this._graphicsCore.getGraphics3DGraphicById(s.uid);null!=i&&this._updateLabelGeometry(e.featureIds[r])&&i.alignWithAbsoluteElevation(o.z??0,t,!1)}))}setNodeMetaAttributes(e,t){const r=new Array;this._forEachGraphic(e,((o,i)=>{const a=t(o,e);(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_4__.equalsShallow)(i.attributes,a)||(i.attributes=a,r.push(i.uid))})),this._graphicsCore.updateLabelingInfo(r)}applyFilterChange(e){this._forEachFeature(e,((t,r,s)=>{if(!this._enabledForFeatureInNode(e,t)){const s=e.featureIds[t];switch(this._removeFeature(r,e,t)){case F.REMOVED:this.loadedGraphics.removeManyByObjectId([s]);break;case F.MODIFIED:this._updateLabelPosition(s)}return}const o=r.graphic,i=o.visible;i!==s&&(o.visible=s,C.graphic=o,C.property="visible",C.oldValue=i,C.newValue=s,this._graphicsCore.graphicUpdateHandler(C))}))}removeNodeMeta(e){const t=[];this._forEachGraphic(e,(r=>{const s=e.featureIds[r],o=this._featuresMap.get(s);if(!o)return;switch(this._removeFeature(o,e,r)){case F.MODIFIED:this._updateLabelPosition(s);break;case F.REMOVED:t.push(s)}})),this.loadedGraphics.removeManyByObjectId(t)}_removeFeature(e,t,s){const o=e.components.length;return (0,_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_3__.filterInPlace)(e.components,(e=>!(e.meta===t&&e.index===s))),0===e.components.length?(this._featuresMap.delete(t.featureIds[s]),F.REMOVED):o!==e.components.length?F.MODIFIED:F.UNMODIFIED}getRenderingInfo(){return this._renderingInfo}notifyGraphicGeometryChanged(){}notifyGraphicVisibilityChanged(){}_updateLabelPosition(e){const t=this._featuresMap.get(e);t&&this._updateLabelGeometry(e)&&(this.loadedGraphics.removeManyByObjectId([e]),this.loadedGraphics.addMany([t.graphic]))}_updateLabelGeometry(e){const t=this._featuresMap.get(e);if(!t)return!1;const r=t.geometry,s=this.view.spatialReference,i=this.view.renderCoordsHelper,a=r.x,n=r.y,p=r.z??0,c=t.components.length,h=(0,_geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_15__.newDoubleArray)(c*_i3s_I3SGeometryUtil_js__WEBPACK_IMPORTED_MODULE_19__.boundingBoxCornersPointsStride);let d=0;for(const{meta:o,index:l}of t.components)(0,_i3s_I3SGeometryUtil_js__WEBPACK_IMPORTED_MODULE_19__.boundingBoxCornerPoints)(l,this.collection,o.objectHandle,h,d),d+=_i3s_I3SGeometryUtil_js__WEBPACK_IMPORTED_MODULE_19__.boundingBoxCornersPointsStride;return (0,_geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_13__.projectBuffer)(h,i.spatialReference,0,h,s,0,h.length/3),(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_14__.set)(O,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_14__.negativeInfinity),(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_14__.expandWithBuffer)(O,h),r.x=(O[0]+O[3])/2,r.y=(O[1]+O[4])/2,r.z=O[5],!(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_5__.floatEqualUlp)(r.x,a)||!(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_5__.floatEqualUlp)(r.y,n)||!(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_5__.floatEqualUlp)(r.z,p)}_forEachGraphic(e,t){this._forEachFeature(e,((r,{graphic:s,geometry:o},i)=>{this._enabledForFeatureInNode(e,r)&&t(r,s,o,i)}))}_forEachFeature(e,t){let r=0;for(let s=0;s<e.featureIds.length;s++){const o=this._featuresMap.get(e.featureIds[s]);let i=null==e.filteredIds;e.filteredIds&&e.filteredIds[r]===e.featureIds[s]&&(i=!0,r++),o&&t(s,o,i)}}_enabledForFeatureInNode(e,t){return e.node.index<0||!this.overrides?.featureHasGeometryChanges(e.featureIds[t])}get updatePolicy(){return this._graphicsCore.effectiveUpdatePolicy}get usedMemory(){return this._graphicsCore.usedMemory}get unloadedMemoryEstimate(){return this._graphicsCore.unprocessedMemoryEstimate}get test(){return{graphicsCore:this._graphicsCore}}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)()],w.prototype,"view",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)()],w.prototype,"layer",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)()],w.prototype,"collection",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)()],w.prototype,"loadedGraphics",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)()],w.prototype,"overrides",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)()],w.prototype,"updating",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)()],w.prototype,"slicePlaneEnabled",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)()],w.prototype,"_graphicsCore",void 0),w=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_11__.subclass)("esri.views.3d.layers.I3SMeshViewLabeler")],w);const C={graphic:null,property:null,oldValue:null,newValue:null};var F;!function(e){e[e.UNMODIFIED=0]="UNMODIFIED",e[e.MODIFIED=1]="MODIFIED",e[e.REMOVED=2]="REMOVED"}(F||(F={}));const O=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_14__.create)(),L=w;


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/I3SMeshWorkerHandle.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/I3SMeshWorkerHandle.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I3SMeshWorkerHandle: () => (/* binding */ h),
/* harmony export */   toWasmModification: () => (/* binding */ u)
/* harmony export */ });
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/PooledArray.js */ "./node_modules/@arcgis/core/core/PooledArray.js");
/* harmony import */ var _core_workers_WorkerHandle_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/workers/WorkerHandle.js */ "./node_modules/@arcgis/core/core/workers/WorkerHandle.js");
/* harmony import */ var _geometry_projection_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../geometry/projection.js */ "./node_modules/@arcgis/core/geometry/projection.js");
/* harmony import */ var _geometry_projection_projectVectorToVector_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../geometry/projection/projectVectorToVector.js */ "./node_modules/@arcgis/core/geometry/projection/projectVectorToVector.js");
/* harmony import */ var _libs_i3s_enums_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../libs/i3s/enums.js */ "./node_modules/@arcgis/core/libs/i3s/enums.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class h extends _core_workers_WorkerHandle_js__WEBPACK_IMPORTED_MODULE_2__.WorkerHandle{constructor(s){super("SceneLayerWorker","process",{process:s=>[s.geometryBuffer],project:s=>[s.positions.buffer],transformNormals:s=>[s.normals.buffer]},s,{hasInitialize:!0})}setModifications(s,e,o,t){const r={context:s,modifications:u(e,o,t),isGeodetic:t.isGeographic};this.broadcast(r,"setModifications")}setLegacySchema(s,e){const o=JSON.stringify(e);return this.broadcast({context:s,jsonSchema:o},"setLegacySchema")}destroyContext(s){return this.broadcast(s,"destroyContext")}project(s,e){return this.invokeMethod("project",s,e)}transformNormals(s,e){return this.invokeMethod("transformNormals",s,e)}}const n=new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_1__["default"]({deallocator:null}),i=[0,0,0];function u(e,o,h){n.clear();let u=1/0,a=1/0,c=-1/0,f=-1/0,l=!1;for(const d of o){const e="clip"===d.type?_libs_i3s_enums_js__WEBPACK_IMPORTED_MODULE_5__.ModificationType.Inside:"mask"===d.type?_libs_i3s_enums_js__WEBPACK_IMPORTED_MODULE_5__.ModificationType.Outside:_libs_i3s_enums_js__WEBPACK_IMPORTED_MODULE_5__.ModificationType.Replace,o=d.geometry;let m=s=>s;if(o.spatialReference){if(!(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_3__.canProjectWithoutEngine)(o.spatialReference,h)){_core_Logger_js__WEBPACK_IMPORTED_MODULE_0__["default"].getLogger("esri.views.3d.layers.I3SMeshWorkerHandle").warn("Can't project modification polygon into layer spatial reference, ignoring modification");continue}m=s=>((0,_geometry_projection_projectVectorToVector_js__WEBPACK_IMPORTED_MODULE_4__.projectVectorToVector)(s,o.spatialReference,i,h),i)}else o.hasZ||(i[2]=0,m=s=>(i[0]=s[0],i[1]=s[1],i));l=l||e===_libs_i3s_enums_js__WEBPACK_IMPORTED_MODULE_5__.ModificationType.Outside,n.push(e),n.push(o.rings.length);for(const s of o.rings){n.push(s.length);for(const e of s){const s=m(e);n.push(s[0]),n.push(s[1]),n.push(s[2]),u=Math.min(u,s[0]),a=Math.min(a,s[1]),c=Math.max(c,s[0]),f=Math.max(f,s[1])}}}if(null!=e)if(l){const s=1e-4;n.push(_libs_i3s_enums_js__WEBPACK_IMPORTED_MODULE_5__.ModificationType.Inside),n.push(2),n.push(4),n.push(u-s),n.push(a-s),n.push(0),n.push(c+s),n.push(a-s),n.push(0),n.push(c+s),n.push(f+s),n.push(0),n.push(u-s),n.push(f+s),n.push(0),n.push(4),n.push(e[0]),n.push(e[1]),n.push(0),n.push(e[2]),n.push(e[1]),n.push(0),n.push(e[2]),n.push(e[3]),n.push(0),n.push(e[0]),n.push(e[3]),n.push(0)}else n.push(_libs_i3s_enums_js__WEBPACK_IMPORTED_MODULE_5__.ModificationType.Outside),n.push(1),n.push(4),n.push(e[0]),n.push(e[1]),n.push(0),n.push(e[2]),n.push(e[1]),n.push(0),n.push(e[2]),n.push(e[3]),n.push(0),n.push(e[0]),n.push(e[3]),n.push(0);n.push(_libs_i3s_enums_js__WEBPACK_IMPORTED_MODULE_5__.ModificationType.Finished);const m=new Float64Array(n.length);for(let s=0;s<n.length;++s)m[s]=n.at(s);return m}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/II3SMeshView3D.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/II3SMeshView3D.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ForAllFeaturesMode: () => (/* binding */ E),
/* harmony export */   ForAllFeaturesReturnType: () => (/* binding */ I)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var E,I;!function(E){E[E.VISIBLE_ONLY=0]="VISIBLE_ONLY",E[E.ALL=1]="ALL",E[E.QUERYABLE=2]="QUERYABLE"}(E||(E={})),function(E){E[E.EXIT=0]="EXIT",E[E.CONTINUE=1]="CONTINUE",E[E.SKIP=2]="SKIP"}(I||(I={}));


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/SceneLayerWorker.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/SceneLayerWorker.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   destroyContext: () => (/* binding */ b),
/* harmony export */   dracoDecompressPointCloudData: () => (/* binding */ c),
/* harmony export */   filterObbsForModifications: () => (/* binding */ u),
/* harmony export */   filterObbsForModificationsSync: () => (/* binding */ L),
/* harmony export */   initialize: () => (/* binding */ I),
/* harmony export */   interpretObbModificationResults: () => (/* binding */ A),
/* harmony export */   process: () => (/* binding */ l),
/* harmony export */   project: () => (/* binding */ p),
/* harmony export */   setLegacySchema: () => (/* binding */ y),
/* harmony export */   setModifications: () => (/* binding */ m),
/* harmony export */   setModificationsSync: () => (/* binding */ E),
/* harmony export */   test: () => (/* binding */ M),
/* harmony export */   transformNormals: () => (/* binding */ d)
/* harmony export */ });
/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../geometry/SpatialReference.js */ "./node_modules/@arcgis/core/geometry/SpatialReference.js");
/* harmony import */ var _geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../geometry/support/DoubleArray.js */ "./node_modules/@arcgis/core/geometry/support/DoubleArray.js");
/* harmony import */ var _geometry_support_MeshGeoreferencedRelativeVertexSpace_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../geometry/support/MeshGeoreferencedRelativeVertexSpace.js */ "./node_modules/@arcgis/core/geometry/support/MeshGeoreferencedRelativeVertexSpace.js");
/* harmony import */ var _geometry_support_MeshLocalVertexSpace_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../geometry/support/MeshLocalVertexSpace.js */ "./node_modules/@arcgis/core/geometry/support/MeshLocalVertexSpace.js");
/* harmony import */ var _chunks_vec32_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../chunks/vec32.js */ "./node_modules/@arcgis/core/chunks/vec32.js");
/* harmony import */ var _libs_i3s_enums_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../libs/i3s/enums.js */ "./node_modules/@arcgis/core/libs/i3s/enums.js");
/* harmony import */ var _libs_i3s_I3SModule_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../libs/i3s/I3SModule.js */ "./node_modules/@arcgis/core/libs/i3s/I3SModule.js");
/* harmony import */ var _i3s_I3SNode_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./i3s/I3SNode.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SNode.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
async function l(e){g=await j();const r=[e.geometryBuffer];return{result:w(g,e,r),transferList:r}}async function c(e){g=await j();const r=[e.geometryBuffer],{geometryBuffer:t}=e,o=t.byteLength,n=g._malloc(o),s=new Uint8Array(g.HEAPU8.buffer,n,o);s.set(new Uint8Array(t));const i=g.dracoDecompressPointCloudData(n,s.byteLength);if(g._free(n),i.error.length>0)throw new Error(`i3s.wasm: ${i.error}`);const a=i.featureIds?.length>0?i.featureIds.slice():null,f=i.positions.slice();return a&&r.push(a.buffer),r.push(f.buffer),{result:{positions:f,featureIds:a},transferList:r}}async function u(e){await j(),L(e);const r={buffer:e.buffer};return{result:r,transferList:[r.buffer]}}async function m(e){await j(),E(e)}async function y(e){g=await j(),g.setLegacySchema(e.context,e.jsonSchema)}async function p(n){const{localMatrix:s,origin:i,positions:a,vertexSpace:f,localMode:l}=n,c=_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_0__["default"].fromJSON(n.inSpatialReference),u=_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_0__["default"].fromJSON(n.outSpatialReference);let m;if("georeferenced"===f.type){const[{projectBuffer:e},{initializeProjection:r}]=await Promise.all([Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../../../geometry/projection/projectBuffer.js */ "./node_modules/@arcgis/core/geometry/projection/projectBuffer.js")),Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../../../geometry/projection.js */ "./node_modules/@arcgis/core/geometry/projection.js"))]);await r(c,u),m=new Float64Array(a.length),e(a,c,0,m,u,0,m.length/3)}else{const e="georeferencedRelative"===f.type?_geometry_support_MeshGeoreferencedRelativeVertexSpace_js__WEBPACK_IMPORTED_MODULE_2__["default"].fromJSON(f):_geometry_support_MeshLocalVertexSpace_js__WEBPACK_IMPORTED_MODULE_3__["default"].fromJSON(f),{project:n}=await Promise.all(/*! import() */[__webpack_require__.e("vendors-node_modules_arcgis_core_geometry_support_buffer_BufferView_js"), __webpack_require__.e("vendors-node_modules_arcgis_core_geometry_support_meshUtils_georeference_js"), __webpack_require__.e("node_modules_arcgis_core_chunks_mat3_js-node_modules_arcgis_core_chunks_vec2_js-node_modules_-88f6b5")]).then(__webpack_require__.bind(__webpack_require__, /*! ../../../geometry/support/meshUtils/georeference.js */ "./node_modules/@arcgis/core/geometry/support/meshUtils/georeference.js"));m=(0,_geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_1__.toFloat64Array)(n({positions:a,transform:s?{localMatrix:s}:void 0,vertexSpace:e,inSpatialReference:c,outSpatialReference:u,localMode:l}))}const y=m.length,[p,d,b]=i;for(let e=0;e<y;e+=3)m[e]-=p,m[e+1]-=d,m[e+2]-=b;return{result:{projected:m,original:a},transferList:[m.buffer,a.buffer]}}async function d({normalMatrix:e,normals:r}){const t=new Float32Array(r.length);return (0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_4__.a)(t,r,e),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_4__.n)(t,t),{result:{transformed:t,original:r},transferList:[t.buffer,r.buffer]}}function b(e){S(e)}let h,g;function E(e){if(!g)return;const r=e.modifications,t=g._malloc(8*r.length),o=new Float64Array(g.HEAPU8.buffer,t,r.length);for(let n=0;n<r.length;++n)o[n]=r[n];g.setModifications(e.context,t,r.length,e.isGeodetic),g._free(t)}function w(e,r,t){const{context:o,localOrigin:n,globalTrafo:s,mbs:a,obb:f,elevationOffset:l,geometryBuffer:c,geometryDescriptor:u,indexToVertexProjector:m,vertexToRenderProjector:y}=r,p=e._malloc(c.byteLength),d=33,b=e._malloc(d*Float64Array.BYTES_PER_ELEMENT),h=new Uint8Array(e.HEAPU8.buffer,p,c.byteLength);h.set(new Uint8Array(c));const g=new Float64Array(e.HEAPU8.buffer,b,d);_(g,n);let E=g.byteOffset+3*g.BYTES_PER_ELEMENT,w=new Float64Array(g.buffer,E);_(w,s),E+=16*g.BYTES_PER_ELEMENT,w=new Float64Array(g.buffer,E),_(w,a),E+=4*g.BYTES_PER_ELEMENT,null!=f&&(w=new Float64Array(g.buffer,E),_(w,f.center),E+=3*g.BYTES_PER_ELEMENT,w=new Float64Array(g.buffer,E),_(w,f.halfSize),E+=3*g.BYTES_PER_ELEMENT,w=new Float64Array(g.buffer,E),_(w,f.quaternion));const A=u,L={isDraco:!1,isLegacy:!1,color:r.layouts.some((e=>e.some((e=>"color"===e.name)))),normal:r.needNormals&&r.layouts.some((e=>e.some((e=>"normalCompressed"===e.name)))),uv0:r.layouts.some((e=>e.some((e=>"uv0"===e.name)))),uvRegion:r.layouts.some((e=>e.some((e=>"uvRegion"===e.name)))),featureIndex:A.featureIndex},S=e.process(o,!!r.obb,p,h.byteLength,A,L,b,l,m,y,r.normalReferenceFrame);if(e._free(b),e._free(p),S.error.length>0)throw new Error(`i3s.wasm: ${S.error}`);if(S.discarded)return null;const I=S.componentOffsets.length>0?S.componentOffsets.slice():null,j=S.featureIds.length>0?S.featureIds.slice():null,M=S.anchorIds.length>0?Array.from(S.anchorIds):null,P=S.anchors.length>0?Array.from(S.anchors):null,T=S.interleavedVertedData.slice().buffer,x=S.indicesType===_libs_i3s_enums_js__WEBPACK_IMPORTED_MODULE_5__.IndexType.Int16?new Uint16Array(S.indices.buffer,S.indices.byteOffset,S.indices.byteLength/2).slice():new Uint32Array(S.indices.buffer,S.indices.byteOffset,S.indices.byteLength/4).slice(),R=S.positions.slice(),U=S.positionIndicesType===_libs_i3s_enums_js__WEBPACK_IMPORTED_MODULE_5__.IndexType.Int16?new Uint16Array(S.positionIndices.buffer,S.positionIndices.byteOffset,S.positionIndices.byteLength/2).slice():new Uint32Array(S.positionIndices.buffer,S.positionIndices.byteOffset,S.positionIndices.byteLength/4).slice(),v={layout:r.layouts[0],interleavedVertexData:T,indices:x,hasColors:S.hasColors,hasModifications:S.hasModifications,positionData:{data:R,indices:U}};return j&&t.push(j.buffer),I&&t.push(I.buffer),t.push(T),t.push(x.buffer),t.push(R.buffer),t.push(U.buffer),{componentOffsets:I,featureIds:j,anchorIds:M,anchors:P,transformedGeometry:v,obb:S.obb}}function A(e){return 0===e?_i3s_I3SNode_js__WEBPACK_IMPORTED_MODULE_7__.NodeIMModificationImpact.Unmodified:1===e?_i3s_I3SNode_js__WEBPACK_IMPORTED_MODULE_7__.NodeIMModificationImpact.PotentiallyModified:2===e?_i3s_I3SNode_js__WEBPACK_IMPORTED_MODULE_7__.NodeIMModificationImpact.Culled:_i3s_I3SNode_js__WEBPACK_IMPORTED_MODULE_7__.NodeIMModificationImpact.Unknown}function L(e){if(!g)return;const{context:r,buffer:t}=e,o=g._malloc(t.byteLength),n=t.byteLength/Float64Array.BYTES_PER_ELEMENT,s=new Float64Array(g.HEAPU8.buffer,o,n),i=new Float64Array(t);s.set(i),g.filterOBBs(r,o,n),i.set(s),g._free(o)}function S(e){g&&0===g.destroy(e)&&(g=null)}function _(e,r){for(let t=0;t<r.length;++t)e[t]=r[t]}async function I(){g||await j()}function j(){return g?Promise.resolve(g):(h||(h=(0,_libs_i3s_I3SModule_js__WEBPACK_IMPORTED_MODULE_6__.get)().then((e=>(g=e,h=null,g)))),h)}const M={transform:(e,r)=>g&&w(g,e,r),destroy:S};


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/Highlights.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/Highlights.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ h)
/* harmony export */ });
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_handleUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/handleUtils.js */ "./node_modules/@arcgis/core/core/handleUtils.js");
/* harmony import */ var _II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../II3SMeshView3D.js */ "./node_modules/@arcgis/core/views/3d/layers/II3SMeshView3D.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class s{constructor(){this.ids=new Set}}class h{constructor({collection:t,forAllFeatures:e,forAllFeaturesOfNode:i}){this._highlights=[],this._collection=t,this._forAllFeatures=e,this._forAllFeaturesOfNode=i}destroy(){this._highlights.forEach((t=>this._releaseSet(t))),this._highlights=null}acquireSet(){const i=new s;this._highlights.push(i);const h=(0,_core_handleUtils_js__WEBPACK_IMPORTED_MODULE_1__.makeHandle)((()=>{this._highlights&&(this._releaseSet(i),(0,_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__.removeUnordered)(this._highlights,i))}));return{set:i,handle:h}}setFeatureIds(t,e){e.forEach((e=>t.ids.add(e))),this._initializeSet(t)}_initializeSet(t){this._forAllFeatures(((e,s,h)=>(t.ids.has(e)&&this._collection.addComponentHighlight(h.objectHandle,s),_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_2__.ForAllFeaturesReturnType.CONTINUE)))}_releaseSet(t){this._forAllFeatures(((e,s,h)=>(t.ids.has(e)&&this._collection.removeComponentHighlight(h.objectHandle,s),_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_2__.ForAllFeaturesReturnType.CONTINUE)))}objectCreated(t){this._highlights.forEach((e=>{this._forAllFeaturesOfNode(t,((s,h)=>(e.ids.has(s)&&this._collection.addComponentHighlight(t.objectHandle,h),_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_2__.ForAllFeaturesReturnType.CONTINUE)))}))}objectDeleted(t){this._collection.clearHighlights(t.objectHandle)}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SAsyncElevationUpdater.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/I3SAsyncElevationUpdater.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I3SAsyncElevationUpdater: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/Accessor.js */ "./node_modules/@arcgis/core/core/Accessor.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _graphics_ExtentSet_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../graphics/ExtentSet.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/ExtentSet.js");
/* harmony import */ var _support_Scheduler_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../support/Scheduler.js */ "./node_modules/@arcgis/core/views/support/Scheduler.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
let i=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__["default"]{constructor(e,t,s){super({}),this._updateExtent=t,this._updateNode=s,this.running=!1,this._extentSet=new _graphics_ExtentSet_js__WEBPACK_IMPORTED_MODULE_7__.ExtentSet,this._nodeSet=new Set,this.addHandles(e.registerTask(_support_Scheduler_js__WEBPACK_IMPORTED_MODULE_8__.TaskPriority.ELEVATION_ALIGNMENT,this))}normalizeCtorArgs(){return{}}addExtent(e){this._extentSet.add(e),this.running=!0}schedule(e){this._nodeSet.add(e),this.running=!0}remove(e){this._nodeSet.delete(e),this._updateRunning()}runTask(e){const t=this._extentSet;for(e.run((()=>t.merge(e)));!t.empty&&!e.done;){const s=this._updateExtent(t.pop());null!=s&&s.forAll((e=>this.schedule(e))),e.madeProgress()}if(e.done)return;const s=this._nodeSet;for(const r of s)if(s.delete(r),this._updateNode(r),e.madeProgress(),e.done)break;this._updateRunning()}_updateRunning(){this.running=this._nodeSet.size>0||this._extentSet.size>0}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.property)()],i.prototype,"running",void 0),i=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__.subclass)("esri.views.3d.layers.i3s.I3SAsyncElevationUpdater.ts")],i);


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SCrossfadeHelper.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/I3SCrossfadeHelper.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I3SCrossfadeHelper: () => (/* binding */ i),
/* harmony export */   NodeCrossfadeMetaData: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _core_scheduling_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/scheduling.js */ "./node_modules/@arcgis/core/core/scheduling.js");
/* harmony import */ var _support_I3SLayerView_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../support/I3SLayerView.js */ "./node_modules/@arcgis/core/views/3d/layers/support/I3SLayerView.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class o{constructor(){this.lodCrossfadeSignedDuration=0}}class i{constructor(e){this._view=e,this._preRenderFrameTaskHandle=null,this._currentFrameStartTime=null,this._numFadingNodes=0}destroy(){this._preRenderFrameTaskHandle?.remove(),this._preRenderFrameTaskHandle=null,this._view=null}get updating(){return this._numFadingNodes>0}stopNodeFading(s){null!=s.lodCrossfadeProgress&&(this._numFadingNodes--,s.lodCrossfadeProgress=null,0===this._numFadingNodes&&(null!=this._preRenderFrameTaskHandle&&(this._preRenderFrameTaskHandle=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.removeMaybe)(this._preRenderFrameTaskHandle)),this._view.notifyLODUpdate(),this._view.notifyUpdate()))}_startNodeFading(e,d,o){0===this._numFadingNodes&&(this._preRenderFrameTaskHandle=(0,_core_scheduling_js__WEBPACK_IMPORTED_MODULE_1__.addFrameTask)({preRender:e=>this._updateAllNodeFading(e)}),this._view.notifyLODUpdate()),null==e.lodCrossfadeProgress&&(this._numFadingNodes++,this._view.notifyUpdate()),e.lodCrossfadeSignedDuration=o,e.lodCrossfadeProgress=d}_updateAllNodeFading(e){const s=this._view.nodeCrossfadingEnabled;this._view.foreachCrossfadeNode(((d,o)=>{if(null!=o?.lodCrossfadeProgress){const i=o.lodCrossfadeSignedDuration,t=i>0?this._view.fullOpacity:0,r=e.deltaTime/i,a=o.lodCrossfadeProgress+Math.abs(r),n=!s||a>=1||0===i,l=t-(n?0:i>0?1:-1)*(1-a);n?(this.stopNodeFading(o),i<0&&this._view.markNodeToRemove(d)):o.lodCrossfadeProgress=a,this._view.setNodeOpacityByIndex(d,l)}})),this._view.removeMarkedNodes()}stopAllNodeFading(){this._view.foreachCrossfadeNode(((e,s)=>{if(null!=s?.lodCrossfadeProgress){this.stopNodeFading(s);const d=s.lodCrossfadeSignedDuration;d<0&&this._view.markNodeToRemove(e);const o=d>0?this._view.fullOpacity:0;this._view.setNodeOpacityByIndex(e,o)}})),this._view.removeMarkedNodes()}fadeNode(e,s,o,i){null==this._currentFrameStartTime&&(this._currentFrameStartTime=Date.now());const r=this._view,a=r.nodeCrossfadingEnabled,n=o===_support_I3SLayerView_js__WEBPACK_IMPORTED_MODULE_2__.FadeDirection.FadeIn?r.fullOpacity:0,l=a?i?o===_support_I3SLayerView_js__WEBPACK_IMPORTED_MODULE_2__.FadeDirection.FadeIn?r.lodCrossfadeinDuration:r.lodCrossfadeoutDuration:r.lodCrossfadeUncoveredDuration:0,h=this._view.getNodeOpacityByIndex(e);if(a&&h!==n&&l>0){const e=1-Math.abs(n-h);this._startNodeFading(s,e,t(o)*l)}else this.stopNodeFading(s),this._view.setNodeOpacityByIndex(e,n),o===_support_I3SLayerView_js__WEBPACK_IMPORTED_MODULE_2__.FadeDirection.FadeOut&&this._view.removeNode(e)}isNodeFullyFadedIn(e){const s=this._view.getNodeCrossfadeMetaData(e);return null==s||null==s.lodCrossfadeProgress&&this._view.getNodeOpacityByIndex(e)===this._view.fullOpacity}}function t(e){return e===_support_I3SLayerView_js__WEBPACK_IMPORTED_MODULE_2__.FadeDirection.FadeIn?1:-1}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SElevationProvider.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/I3SElevationProvider.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ b)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/Accessor.js */ "./node_modules/@arcgis/core/core/Accessor.js");
/* harmony import */ var _core_Evented_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/Evented.js */ "./node_modules/@arcgis/core/core/Evented.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _chunks_mat4_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../chunks/mat4.js */ "./node_modules/@arcgis/core/chunks/mat4.js");
/* harmony import */ var _chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../chunks/mat4f64.js */ "./node_modules/@arcgis/core/chunks/mat4f64.js");
/* harmony import */ var _chunks_vec3_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../chunks/vec3.js */ "./node_modules/@arcgis/core/chunks/vec3.js");
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../chunks/vec3f64.js */ "./node_modules/@arcgis/core/chunks/vec3f64.js");
/* harmony import */ var _geometry_projection_projectBoundingSphere_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../geometry/projection/projectBoundingSphere.js */ "./node_modules/@arcgis/core/geometry/projection/projectBoundingSphere.js");
/* harmony import */ var _geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../geometry/support/aaBoundingRect.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js");
/* harmony import */ var _chunks_sphere_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../../chunks/sphere.js */ "./node_modules/@arcgis/core/chunks/sphere.js");
/* harmony import */ var _webgl_engine_lib_Intersector_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../webgl-engine/lib/Intersector.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Intersector.js");
/* harmony import */ var _webgl_engine_lib_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../webgl-engine/lib/IntersectorInterfaces.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/IntersectorInterfaces.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const v=(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_14__.empty)(),g=(0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_10__.a)(),x=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_15__.f)(0,0,0,0),y=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_12__.c)(),j=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_12__.c)(),E=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_12__.c)();let _=class extends(_core_Evented_js__WEBPACK_IMPORTED_MODULE_2__["default"].EventedMixin(_core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__["default"])){get spatialReference(){return this.view?.elevationProvider?.spatialReference}constructor(e){super(e),this._tmpEvent={spatialReference:null,extent:v,context:"scene"}}initialize(){this.view=this.layerView.view,this._renderCoordsHelper=this.view.renderCoordsHelper,this._intersector=(0,_webgl_engine_lib_Intersector_js__WEBPACK_IMPORTED_MODULE_16__.newIntersector)(this.view.state.viewingMode),this._intersector.options.store=_webgl_engine_lib_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_17__.StoreResults.MIN,this._tmpEvent.context=this.intersectionHandler.isGround?"ground":"scene"}getElevation(e,t,r,n){const s=y;s[0]=e,s[1]=t,s[2]=r;const o=this._renderCoordsHelper;if(!o.toRenderCoords(s,n,s))return _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger(this).error("could not project point to compute elevation"),null;const{layerView:a,_intersector:l,intersectionHandler:c}=this,p=a.i3slayer.fullExtent,m=null!=p&&Number.isFinite(p.xmin)&&Number.isFinite(p.xmax)&&Number.isFinite(p.ymin)&&Number.isFinite(p.ymax)&&Number.isFinite(p.zmin)&&Number.isFinite(p.zmax)?{min:p.zmin,max:p.zmax}:a.elevationRange;if(null==m)return null;const u=a.elevationOffset,h=m.min+u,f=m.max+u,d=j,v=E;return o.setAltitude(d,f,s),o.setAltitude(v,h,s),l.reset(d,v,null),c.intersect(l,null,d,v),l.results.min.getIntersectionPoint(s)?o.getAltitude(s):null}getSphereElevationBounds(e,t){return (0,_geometry_projection_projectBoundingSphere_js__WEBPACK_IMPORTED_MODULE_13__.projectBoundingSphere)(e,t,x,this._renderCoordsHelper.spatialReference),this.layerView.getElevationRange(x)}getRootElevationBounds(){const e=this.layerView.i3slayer.fullExtent;return e?.hasZ?{min:e.zmin,max:e.zmax}:null}layerChanged(){this.spatialReference&&(this._tmpEvent.extent=this._computeLayerExtent(),this._tmpEvent.spatialReference=this.spatialReference,this.emit("elevation-change",this._tmpEvent))}objectChanged(e){this.spatialReference&&(this._tmpEvent.extent=this._computeObjectExtent(e),this._tmpEvent.spatialReference=this.spatialReference,this.emit("elevation-change",this._tmpEvent))}_computeObjectExtent(e){return (0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_14__.empty)(v),this._expandExtent(e,v),v}_computeLayerExtent(){(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_14__.empty)(v);for(const e of this.layerView.getVisibleNodes())this._expandExtent(e,v);return v}_expandExtent(e,t){const r=this.spatialReference;if(null==r)return;const i=this.layerView.getNodeComponentObb(e);if(null!=i){(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_9__.F)(g,i.quaternion),g[12]=i.center[0],g[13]=i.center[1],g[14]=i.center[2];for(let e=0;e<8;++e)y[0]=1&e?i.halfSize[0]:-i.halfSize[0],y[1]=2&e?i.halfSize[1]:-i.halfSize[1],y[2]=4&e?i.halfSize[2]:-i.halfSize[2],(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_11__.e)(y,y,g),this._renderCoordsHelper.fromRenderCoords(y,y,r),(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_14__.expand)(t,y,t)}}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({constructOnly:!0})],_.prototype,"layerView",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({constructOnly:!0})],_.prototype,"intersectionHandler",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)()],_.prototype,"view",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)()],_.prototype,"spatialReference",null),_=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__.subclass)("esri.views.3d.layers.i3s.I3SElevationProvider")],_);const b=_;


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SGeometryUtil.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/I3SGeometryUtil.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   boundingBoxCornerPoints: () => (/* binding */ i),
/* harmony export */   boundingBoxCornersPointsStride: () => (/* binding */ p),
/* harmony export */   createGetFeatureExtent: () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/vec3.js */ "./node_modules/@arcgis/core/chunks/vec3.js");
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../chunks/vec3f64.js */ "./node_modules/@arcgis/core/chunks/vec3f64.js");
/* harmony import */ var _geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../geometry/projection/projectBuffer.js */ "./node_modules/@arcgis/core/geometry/projection/projectBuffer.js");
/* harmony import */ var _geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../geometry/support/aaBoundingBox.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingBox.js");
/* harmony import */ var _geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../geometry/support/DoubleArray.js */ "./node_modules/@arcgis/core/geometry/support/DoubleArray.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function c(t,e,r){const n=(0,_geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_4__.newDoubleArray)(24);return u=>{let c=u.meta.featureExtents;if(null==c){c=new Float64Array(6*u.meta.featureIds.length),u.meta.featureExtents=c;for(let t=0;t<c.length;t+=6)c[t]=Number.POSITIVE_INFINITY}const p=new Float64Array(c.buffer,6*u.index*Float64Array.BYTES_PER_ELEMENT,6);return p[0]===Number.POSITIVE_INFINITY&&(i(u.index,r,u.meta.objectHandle,n,0),(0,_geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_2__.projectBuffer)(n,e,0,n,t,0,8)?((0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_3__.set)(p,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_3__.negativeInfinity),(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_3__.expandWithBuffer)(p,n,0,8)):(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_3__.set)(p,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_3__.zero)),p}}function i(r,o,n,a,m){const s=o.getComponentAabb(n,r,l),f=o.getObjectTransform(n);for(let u=0;u<8;++u)I[0]=1&u?s[0]:s[3],I[1]=2&u?s[1]:s[4],I[2]=4&u?s[2]:s[5],(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.t)(I,I,f.rotationScale),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.g)(I,I,f.position),a[m++]=I[0],a[m++]=I[1],a[m++]=I[2];return a}const p=24,l=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_3__.create)(),I=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.c)();


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SIntersectionHandler.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/I3SIntersectionHandler.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I3SIntersectionHandler: () => (/* binding */ d)
/* harmony export */ });
/* harmony import */ var _ViewingMode_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../ViewingMode.js */ "./node_modules/@arcgis/core/views/ViewingMode.js");
/* harmony import */ var _I3SUtil_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./I3SUtil.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SUtil.js");
/* harmony import */ var _Intersector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Intersector.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/Intersector.js");
/* harmony import */ var _support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../support/orientedBoundingBox.js */ "./node_modules/@arcgis/core/views/3d/support/orientedBoundingBox.js");
/* harmony import */ var _webgl_engine_lib_Intersector_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../webgl-engine/lib/Intersector.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Intersector.js");
/* harmony import */ var _webgl_engine_lib_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../webgl-engine/lib/IntersectorInterfaces.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/IntersectorInterfaces.js");
/* harmony import */ var _webgl_engine_lib_verticalOffsetUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../webgl-engine/lib/verticalOffsetUtils.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/verticalOffsetUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class d{constructor(e){this.type=_webgl_engine_lib_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_5__.IntersectorType.I3S,this._needVerticalOffset=!1,this.layerUid=e.layerUid,this.sublayerUid=e.sublayerUid,this._collection=e.collection,this._traverseNodeHierarchy=e.traverseNodeHierarchy,this.slicePlaneEnabled=e.slicePlaneEnabled,this.isGround=e.isGround}updateElevationAlignState(t,r){this._needVerticalOffset=t&&r===_ViewingMode_js__WEBPACK_IMPORTED_MODULE_0__.ViewingMode.Global}intersect(e,l,d,u){const f=e.results,b=e.options.store===_webgl_engine_lib_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_5__.StoreResults.ALL,m=e.ray.direction,h=e.tolerance;let p=e=>e,y=e=>e;const g=(0,_webgl_engine_lib_verticalOffsetUtils_js__WEBPACK_IMPORTED_MODULE_6__.getVerticalOffsetI3S)(null!=e.verticalOffset?e.verticalOffset:this._needVerticalOffset?0:null);null!=e.verticalOffset&&null!=g&&(p=e=>g.applyToMbs(e),y=e=>g.applyToObb(e)),this._traverseNodeHierarchy(((o,c)=>{if(0===o.childrenLoaded)return!1;const O=null!=o.serviceObbInRenderSR&&(0,_I3SUtil_js__WEBPACK_IMPORTED_MODULE_1__.isValidObb)(o.serviceObbInRenderSR)?o.serviceObbInRenderSR:null;return!(null!=O&&!(0,_support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_3__.intersectLine)(y(O),d,m,h))&&(!c||null==O&&(0,_I3SUtil_js__WEBPACK_IMPORTED_MODULE_1__.isValidMbs)(o.renderMbs)&&!a(p(o.renderMbs),d,m,h)||null!=o.geometryObb&&!(0,_support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_3__.intersectLine)(y(o.geometryObb),d,m,h)||this._collection.intersect(c,d,u,h,g,((t,r,s,c)=>{if(r>=0){if(null!=l&&!l(d,u,r))return;const a=e=>{const n=new _Intersector_js__WEBPACK_IMPORTED_MODULE_2__.I3sTarget(this.layerUid,this.sublayerUid,o.index,t,c);e.set(this.type,n,r,s)};if(this.isGround&&(null==f.ground.dist||r<f.ground.dist)&&a(f.ground),e.options.isFiltered)return;if((null==f.min.dist||r<f.min.dist)&&a(f.min),(null==f.max.dist||r>f.max.dist)&&a(f.max),b){const t=(0,_webgl_engine_lib_Intersector_js__WEBPACK_IMPORTED_MODULE_4__.newIntersectorResult)(e.ray);a(t),e.results.all.push(t)}}})),!0)}))}}function a(e,t,r,i=0){const s=e[3]+i,n=t[0]-e[0],l=t[1]-e[1],o=t[2]-e[2],c=r[0],d=r[1],a=r[2],u=c*n+d*l+a*o;return u*u-(c*c+d*d+a*a)*(n*n+l*l+o*o-s*s)>=0}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/IDBCache.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/IDBCache.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   IDBCache: () => (/* binding */ i),
/* harmony export */   whenRequest: () => (/* binding */ c),
/* harmony export */   whenTransaction: () => (/* binding */ n)
/* harmony export */ });
/* harmony import */ var _core_ByteSizeUnit_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/ByteSizeUnit.js */ "./node_modules/@arcgis/core/core/ByteSizeUnit.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const o=14;class i{constructor(t,s,r=o){this._version=r,this._db=null,this._quotaReductionPromise=null,this._gcCounter=0,this._hit=0,this._miss=0,this._destroyed=!1,this.gcFrequency=50,this.maxByteSize=_core_ByteSizeUnit_js__WEBPACK_IMPORTED_MODULE_0__.ByteSizeUnit.GIGABYTES,this.quotaReductionFactor=.2,this._dbName=t,this._storeName=s}init(){return Promise.resolve().then((()=>{const e=indexedDB.open(this._dbName,this._version);return e.onupgradeneeded=t=>{const s=e.result,r=e.transaction,o=s.objectStoreNames.contains(this._storeName)?r.objectStore(this._storeName):s.createObjectStore(this._storeName),i=s.objectStoreNames.contains("last_access")?r.objectStore("last_access"):s.createObjectStore("last_access");i.indexNames.contains("date")||i.createIndex("date","date",{unique:!1}),i.indexNames.contains("byteSize")||i.createIndex("byteSize","byteSize",{unique:!1}),t.oldVersion<this._version&&(o.clear(),i.clear())},c(e)})).then((e=>{this._destroyed?e.close():this._db=e}))}destroy(){this._db&&(this._db.close(),this._db=null),this._destroyed=!0}get initialized(){return null!=this._db}getHitRate(){return this._hit/(this._hit+this._miss)}put(e,s){if(null==this._db)return Promise.reject(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("indexedb:not-initialized","IndexedDB Cache is not initialized"));return(null!=this._quotaReductionPromise?this._quotaReductionPromise:Promise.resolve()).then((()=>this._put(e,s))).catch((t=>{if(t&&"QuotaExceededError"===t.name)return null==this._quotaReductionPromise&&(this._quotaReductionPromise=this._getCacheSize().then((e=>this._removeLeastRecentlyAccessed(s.byteSize+Math.ceil(e*this.quotaReductionFactor)))),this._quotaReductionPromise.then((()=>this._quotaReductionPromise=null),(()=>this._quotaReductionPromise=null))),this._quotaReductionPromise.then((()=>this._put(e,s)));throw t})).then((()=>{this._gcCounter--,this._gcCounter<0&&null!=this._db&&(this._gcCounter=this.gcFrequency,this._getCacheSize().then((e=>this._removeLeastRecentlyAccessed(e-this.maxByteSize))))}))}get(e,t){const o=this._db;if(null==o)return Promise.resolve(void 0);let i=null;return Promise.resolve().then((()=>{const r=o.transaction(this._storeName,"readonly");i=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.onAbort)(t,(()=>{r.abort()}));return c(r.objectStore(this._storeName).get(e))})).then((t=>{if(null==t)++this._miss;else if(this._db){++this._hit;this._db.transaction("last_access","readwrite").objectStore("last_access").put({date:Date.now(),byteSize:t.byteSize},e)}return null!=i&&i.remove(),t})).catch((()=>{++this._miss,(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.throwIfAborted)(t),null!=i&&i.remove()}))}remove(e){const t=this._db;return null==t?Promise.resolve():Promise.resolve().then((async()=>{const s=t.transaction([this._storeName,"last_access"],"readwrite"),r=s.objectStore(this._storeName),o=s.objectStore("last_access"),i=r.delete(e),a=o.delete(e);await Promise.all([c(i),c(a),n(s)])}))}_put(e,t){const s=this._db;if(null==s)return Promise.resolve();const r=s.transaction([this._storeName,"last_access"],"readwrite"),o=r.objectStore(this._storeName),i=r.objectStore("last_access"),a=o.put(t,e),l=i.put({date:Date.now(),byteSize:t.byteSize},e);return Promise.all([c(a),c(l),n(r)])}_removeLeastRecentlyAccessed(e){if(e<=0||!this._db)return Promise.resolve();const t=this._db.transaction([this._storeName,"last_access"],"readwrite"),s=t.objectStore(this._storeName),r=t.objectStore("last_access");let o=0;const i=r.index("date").openCursor(null,"next");return i.onsuccess=()=>{const t=i.result;null!=t&&(null!=t.value.byteSize&&(o+=t.value.byteSize),s.delete(t.primaryKey),r.delete(t.primaryKey),o<e&&t.continue())},n(t)}_getCacheSize(){const e=this._db;if(null==e)return Promise.resolve(0);const t=e.transaction("last_access"),s=t.objectStore("last_access");let r=0;const o=s.index("byteSize").openKeyCursor();return o.onsuccess=()=>{const e=o.result;if(!e)return;const t=e.key;null!=t&&(r+=t),e.continue()},n(t).then((()=>r))}}function n(e){return new Promise(((t,s)=>{e.oncomplete=()=>t(),e.onerror=()=>s(e.error),e.onabort=()=>s(e.error)}))}function c(e){return new Promise(((t,s)=>{"done"===e.readyState?null!=e.error?s(e.error):t(e.result):(e.onsuccess=()=>t(e.result),e.onerror=()=>s(e.error))}))}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/IDBMockCache.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/IDBMockCache.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   IDBMockCache: () => (/* binding */ s)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const t=new WeakMap;class s{constructor(s,e){switch(this._miss=0,this._hit=0,this.initialized=!0,e){case"layer":this._data=new Map;break;case"view":{const e=t.get(s);if(e){this._data=e;break}const i=new Map;this._data=i,t.set(s,i)}}}init(){return Promise.resolve()}async get(t,s){if(this._data.has(t))return this._hit++,this._data.get(t)??void 0;this._miss++}destroy(){}put(t,s){return this._data.set(t,s),Promise.resolve()}remove(t){return this._data.delete(t),Promise.resolve()}getHitRate(){return this._hit/(this._hit+this._miss)}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/support/GraphicsMap.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/support/GraphicsMap.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GraphicsMap: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _core_Evented_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/Evented.js */ "./node_modules/@arcgis/core/core/Evented.js");
/* harmony import */ var _core_MapUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/MapUtils.js */ "./node_modules/@arcgis/core/core/MapUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class r extends _core_Evented_js__WEBPACK_IMPORTED_MODULE_0__["default"]{constructor(){super(...arguments),this._map=new Map}clear(){if(this._map.size>0){const e=this.toArray();this._map.clear(),this.emit("change",{added:[],removed:e})}}get length(){return this._map.size}get(e){return this._map.get(e)}addMany(e){if(0===e.length)return;const t=new Set;for(let o=0;o<e.length;o++){const r=e[o],s=r.objectId,n=this._map.get(s);n?(t.add(s),r!==n&&(e[o]=n),n.refCount||(n.refCount=0),++n.refCount):(r.refCount=1,this._map.set(s,r))}const r=t.size>0?e.filter((e=>!t.has(e.objectId))):e;r.length>0&&this.emit("change",{added:r,removed:[]})}removeMany(e){const t=[];for(const r of e){const e=r.objectId,o=this._map.get(e);null!=o&&(!o.refCount||--o.refCount<=0)&&(this._map.delete(e),t.push(r))}t.length>0&&this.emit("change",{added:[],removed:t})}removeManyByObjectId(e){const t=[];for(const r of e){const e=this._map.get(r);null!=e&&(!e.refCount||--e.refCount<=0)&&(this._map.delete(r),t.push(e))}t.length>0&&this.emit("change",{added:[],removed:t})}toArray(){return[...this._map.values()]}find(e){let r;return (0,_core_MapUtils_js__WEBPACK_IMPORTED_MODULE_1__.someMap)(this._map,(t=>!!e(t)&&(r=t,!0))),r}forEach(e){this._map.forEach((t=>e(t)))}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/support/LimitGraphicsMap.js":
/*!************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/support/LimitGraphicsMap.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LimitGraphicsMap: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _core_Evented_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/Evented.js */ "./node_modules/@arcgis/core/core/Evented.js");
/* harmony import */ var _core_MapUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/MapUtils.js */ "./node_modules/@arcgis/core/core/MapUtils.js");
/* harmony import */ var _GraphicsMap_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./GraphicsMap.js */ "./node_modules/@arcgis/core/views/3d/support/GraphicsMap.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class i extends _core_Evented_js__WEBPACK_IMPORTED_MODULE_0__["default"]{constructor(e){super(),this._limit=e,this._all=new _GraphicsMap_js__WEBPACK_IMPORTED_MODULE_2__.GraphicsMap,this._active=new a(this),this._pending=new Map,this._handle=this._all.on("change",(e=>this._handleChanges(e)))}destroy(){this._handle.remove()}get length(){return this._active.length}toArray(){return this._active.toArray()}find(e){return this._active.find(e)}forEach(e){this._active.forEach(e)}addMany(e){this._all.addMany(e)}removeManyByObjectId(e){this._all.removeManyByObjectId(e)}_handleChanges(e){let t=e.removed;if(this._pending.size>0){t=new Array;for(const s of e.removed)this._pending.delete(s.objectId)||t.push(s)}let s=this._limit-this._active.length+t.length;s<e.added.length&&(this._active.removeMany(t),t=[],h.reset(1-this._limit/(this._active.length+e.added.length)),this._active.forEach((e=>{h.sample()&&(t.push(e),this._pending.set(e.objectId,e))})),s=this._limit-this._active.length+t.length);let i=e.added;if(s<e.added.length){i=new Array,h.reset(s/e.added.length);for(const t of e.added)h.sample()?i.push(t):this._pending.set(t.objectId,t)}const n=s-i.length;n>0&&this._pending.size>0&&(h.reset(n/this._pending.size),this._pending.forEach((e=>{h.sample()&&(i.push(e),this._pending.delete(e.objectId))}))),this._active.addAndRemove(i,t)}}class n{constructor(){this._percentage=1,this._last=-1,this._index=0}reset(e){this._percentage=e,this._last=-1}sample(){const e=Math.floor(this._index*this._percentage);return++this._index,e!==this._last&&(this._last=e,!0)}}const h=new n;class a{constructor(e){this._parent=e,this._map=new Map}get length(){return this._map.size}forEach(e){this._map.forEach((t=>e(t)))}find(e){let s;return (0,_core_MapUtils_js__WEBPACK_IMPORTED_MODULE_1__.someMap)(this._map,(t=>!!e(t)&&(s=t,!0))),s}toArray(){return[...this._map.values()]}addAndRemove(e,t){for(const s of e)this._map.set(s.objectId,s);for(const s of t)this._map.delete(s.objectId);(e.length>0||t.length>0)&&this._parent.emit("change",{added:e,removed:t})}removeMany(e){for(const t of e)this._map.delete(t.objectId);e.length>0&&this._parent.emit("change",{added:[],removed:e})}}


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfYXJjZ2lzX2NvcmVfdmlld3NfM2RfbGF5ZXJzX0kzU01lc2hWaWV3M0RfanMuYnVuZGxlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDMm9CLGNBQWMsNkJBQTZCLGNBQWMsaUJBQWlCLGtCQUFrQixRQUFRLDhEQUFDLFFBQVEsNkJBQTZCLGtCQUFrQix3Q0FBd0MseUJBQXlCLG1CQUFtQixrQkFBa0IsV0FBVyxNQUFNLGVBQWUsQ0FBQyw2REFBQyxDQUFDLE9BQU8sa0JBQWtCLGtCQUFrQixRQUFRLGlFQUFDLE1BQU0sT0FBTywyQkFBMkIsUUFBUSxpRUFBQyxRQUFRLCtEQUErRCxNQUFNLFNBQVMsUUFBUSxnQkFBZ0Isb0RBQW9ELGlFQUFDLDJCQUEyQixLQUFLLGVBQWUsaUVBQUMsSUFBSSx1REFBdUQsaUVBQWlFLFFBQVEsQ0FBQyw2REFBQywwQkFBMEIsdUZBQUMsc0NBQXNDLDREQUFDLGVBQWUsK0ZBQStGLG1CQUFtQix3REFBQywyRUFBMkUsaUVBQUMsS0FBSyw0REFBQyx1QkFBdUIsY0FBYyxNQUFNLG1FQUFtRSxHQUFHLHdCQUF3QixRQUFRLGlFQUFDLGVBQWUseUVBQXlFLGlEQUFDLHlEQUF5RCxFQUFFLDZEQUE2RCxRQUFRLG9GQUFvRixVQUFVLEdBQUcsNkNBQTZDLHNEQUFDLDRCQUE0QixzREFBQyxLQUFLLGtEQUFDLDhCQUE4QixFQUFFLEdBQUcsaUdBQUMsSUFBSSxFQUFFLHNEQUFzRCw0R0FBNEcsa0RBQWtELHlDQUF5Qyw0REFBQyxxREFBcUQsMkRBQUMsY0FBYyxVQUFVLEVBQUUsR0FBRyxpR0FBQyxFQUFFLG1CQUFtQixFQUFFLHlCQUF5QixnQkFBZ0IsSUFBSSx3QkFBd0IsZ0JBQWdCLCtEQUErRCx5QkFBeUIsY0FBYyxNQUFNLG1FQUFtRSxHQUFHLHdCQUF3QixzREFBc0QsaUdBQUMsTUFBTSw4REFBQywyQkFBMkIsdUJBQXVCLGtF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QUF5RCxvQ0FBb0MsUUFBUSxjQUFjLCtDQUErQyxTQUFTLGlDQUFpQyxTQUFTLGlEQUFpRCx1REFBdUQsY0FBYyxRQUFRLGVBQWUsaUNBQWlDLGFBQWEsc0JBQXNCLFdBQVcsNkJBQTZCLFFBQVEsTUFBTSxPQUFPLDBEQUFDLG9DQUFvQyxVQUFVLDhCQUE4QixrQkFBa0IsNkNBQTZDLDhDQUE4QyxzREFBc0Qsa0JBQWtCLEVBQUUsY0FBYyw4Q0FBOEMsd0NBQXdDLG1CQUFtQixHQUFpQyIsInNvdXJjZXMiOlsid2VicGFjazovL3N5bnZpZXcvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvcGVyc2lzdGFibGUuanMiLCJ3ZWJwYWNrOi8vc3ludmlldy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvY29yZS9tdWx0aU9yaWdpbkpTT05TdXBwb3J0VXRpbHMuanMiLCJ3ZWJwYWNrOi8vc3ludmlldy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvZ2VvbWV0cnkvcHJvamVjdGlvbi9sb2NhbExpbmVhclNjYWxlRmFjdG9ycy5qcyIsIndlYnBhY2s6Ly9zeW52aWV3Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9nZW9tZXRyeS9zdXBwb3J0L1VCeXRlQXJyYXkuanMiLCJ3ZWJwYWNrOi8vc3ludmlldy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvbGF5ZXJzL3N1cHBvcnQvU2NlbmVNb2RpZmljYXRpb24uanMiLCJ3ZWJwYWNrOi8vc3ludmlldy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvbGlicy9pM3MvSTNTTW9kdWxlLmpzIiwid2VicGFjazovL3N5bnZpZXcvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL2xpYnMvaTNzL2VudW1zLmpzIiwid2VicGFjazovL3N5bnZpZXcvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3BvcnRhbC9zdXBwb3J0L3Jlc291cmNlRXh0ZW5zaW9uLmpzIiwid2VicGFjazovL3N5bnZpZXcvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL2xheWVycy9JM1NNZXNoVmlldzNELmpzIiwid2VicGFjazovL3N5bnZpZXcvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL2xheWVycy9JM1NNZXNoVmlld0xhYmVsZXIuanMiLCJ3ZWJwYWNrOi8vc3ludmlldy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvM2QvbGF5ZXJzL0kzU01lc2hXb3JrZXJIYW5kbGUuanMiLCJ3ZWJwYWNrOi8vc3ludmlldy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvM2QvbGF5ZXJzL0lJM1NNZXNoVmlldzNELmpzIiwid2VicGFjazovL3N5bnZpZXcvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL2xheWVycy9TY2VuZUxheWVyV29ya2VyLmpzIiwid2VicGFjazovL3N5bnZpZXcvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL2xheWVycy9pM3MvSGlnaGxpZ2h0cy5qcyIsIndlYnBhY2s6Ly9zeW52aWV3Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8zZC9sYXllcnMvaTNzL0kzU0FzeW5jRWxldmF0aW9uVXBkYXRlci5qcyIsIndlYnBhY2s6Ly9zeW52aWV3Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8zZC9sYXllcnMvaTNzL0kzU0Nyb3NzZmFkZUhlbHBlci5qcyIsIndlYnBhY2s6Ly9zeW52aWV3Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8zZC9sYXllcnMvaTNzL0kzU0VsZXZhdGlvblByb3ZpZGVyLmpzIiwid2VicGFjazovL3N5bnZpZXcvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL2xheWVycy9pM3MvSTNTR2VvbWV0cnlVdGlsLmpzIiwid2VicGFjazovL3N5bnZpZXcvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL2xheWVycy9pM3MvSTNTSW50ZXJzZWN0aW9uSGFuZGxlci5qcyIsIndlYnBhY2s6Ly9zeW52aWV3Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8zZC9sYXllcnMvaTNzL0lEQkNhY2hlLmpzIiwid2VicGFjazovL3N5bnZpZXcvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL2xheWVycy9pM3MvSURCTW9ja0NhY2hlLmpzIiwid2VicGFjazovL3N5bnZpZXcvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL3N1cHBvcnQvR3JhcGhpY3NNYXAuanMiLCJ3ZWJwYWNrOi8vc3ludmlldy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvM2Qvc3VwcG9ydC9MaW1pdEdyYXBoaWNzTWFwLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnQgdCBmcm9tXCIuLi8uLi9FcnJvci5qc1wiO2ltcG9ydHtjcmVhdGVNRDVIYXNoIGFzIHJ9ZnJvbVwiLi4vLi4vTUQ1LmpzXCI7aW1wb3J0e2lzTXVsdGlPcmlnaW5KU09OTWl4aW4gYXMgZX1mcm9tXCIuLi8uLi9tdWx0aU9yaWdpbkpTT05TdXBwb3J0VXRpbHMuanNcIjtpbXBvcnR7aXNBYnNvbHV0ZSBhcyBvLGlzQmxvYlByb3RvY29sIGFzIHMsam9pbiBhcyBuLGJsb2JVcmxUb0Jsb2IgYXMgaSxnZXRQYXRoRXh0ZW5zaW9uIGFzIHB9ZnJvbVwiLi4vLi4vdXJsVXRpbHMuanNcIjtpbXBvcnR7Z2VuZXJhdGVVVUlEIGFzIGN9ZnJvbVwiLi4vLi4vdXVpZC5qc1wiO2ltcG9ydHtnZXRQcm9wZXJ0eU1ldGFkYXRhIGFzIHV9ZnJvbVwiLi4vbWV0YWRhdGEuanNcIjtpbXBvcnR7bmFtZVRvSWQgYXMgYX1mcm9tXCIuLi9Qcm9wZXJ0eU9yaWdpbi5qc1wiO2ltcG9ydHtwcm9wZXJ0eUpTT05NZXRhIGFzIGx9ZnJvbVwiLi9wcm9wZXJ0eS5qc1wiO2ltcG9ydHtnZXRSZXNvdXJjZUNvbnRlbnRFeHRlbnNpb24gYXMgbX1mcm9tXCIuLi8uLi8uLi9wb3J0YWwvc3VwcG9ydC9yZXNvdXJjZUV4dGVuc2lvbi5qc1wiO2ltcG9ydHtyIGFzIGQsdCBhcyBmLE0gYXMgeSxpIGFzIGcscCBhcyBoLGEgYXMgdn1mcm9tXCIuLi8uLi8uLi9jaHVua3MvcGVyc2lzdGFibGVVcmxVdGlscy5qc1wiO2Z1bmN0aW9uIGoodCl7Y29uc3Qgcj10Py5vcmlnaW5zPz9bdm9pZCAwXTtyZXR1cm4oZSxvKT0+e2NvbnN0IHM9VSh0LGUsbyk7Zm9yKGNvbnN0IHQgb2Ygcil7Y29uc3Qgcj1sKGUsdCxvKTtmb3IoY29uc3QgdCBpbiBzKXJbdF09c1t0XX19fWZ1bmN0aW9uIFUodCxyLGUpe2lmKFwicmVzb3VyY2VcIj09PXQ/LnR5cGUpcmV0dXJuIHcodCxyLGUpO3N3aXRjaCh0Py50eXBlPz9cIm90aGVyXCIpe2Nhc2VcIm90aGVyXCI6cmV0dXJue3JlYWQ6ITAsd3JpdGU6ITB9O2Nhc2VcInVybFwiOntjb25zdHtyZWFkOnQsd3JpdGU6cn09djtyZXR1cm57cmVhZDp0LHdyaXRlOnJ9fX19ZnVuY3Rpb24gdyh0LHIsbil7Y29uc3QgaT11KHIsbik7cmV0dXJue3R5cGU6U3RyaW5nLHJlYWQ6KHQscixlKT0+e2NvbnN0IG89ZCh0LHIsZSk7cmV0dXJuIGkudHlwZT09PVN0cmluZz9vOlwiZnVuY3Rpb25cIj09dHlwZW9mIGkudHlwZT9uZXcgaS50eXBlKHt1cmw6b30pOnZvaWQgMH0sd3JpdGU6e3dyaXRlcihyLHAsYyx1KXtpZighdT8ucmVzb3VyY2VzKXJldHVyblwic3RyaW5nXCI9PXR5cGVvZiByP3ZvaWQocFtjXT1mKHIsdSkpOnZvaWQocFtjXT1yLndyaXRlKHt9LHUpKTtjb25zdCBsPXgociksbT1mKGwsey4uLnUsdmVyaWZ5SXRlbVJlbGF0aXZlVXJsczp1Py52ZXJpZnlJdGVtUmVsYXRpdmVVcmxzP3t3cml0dGVuVXJsczp1LnZlcmlmeUl0ZW1SZWxhdGl2ZVVybHMud3JpdHRlblVybHMscm9vdFBhdGg6dm9pZCAwfTp2b2lkIDB9LHkuTk8pLGQ9aS50eXBlIT09U3RyaW5nJiYoIWUodGhpcyl8fHU/Lm9yaWdpbiYmdGhpcy5vcmlnaW5JZE9mKG4pPmEodS5vcmlnaW4pKSxoPXtvYmplY3Q6dGhpcyxwcm9wZXJ0eU5hbWU6bix2YWx1ZTpyLHRhcmdldFVybDptLGRlc3Q6cCx0YXJnZXRQcm9wZXJ0eU5hbWU6Yyxjb250ZXh0OnUscGFyYW1zOnR9O3U/LnBvcnRhbEl0ZW0mJm0mJiFvKG0pP2QmJnQ/LmNvbnRlbnRBZGRyZXNzZWQ/SShoKTpkP04oaCk6UChoKTp1Py5wb3J0YWxJdGVtJiYobnVsbD09bXx8bnVsbCE9ZyhtKXx8cyhtKXx8ZCk/SShoKTpwW2NdPW19fX19ZnVuY3Rpb24gSShlKXtjb25zdHt0YXJnZXRVcmw6byxwYXJhbXM6cCx2YWx1ZTp1LGNvbnRleHQ6YSxkZXN0OmwsdGFyZ2V0UHJvcGVydHlOYW1lOmR9PWU7aWYoIWEucG9ydGFsSXRlbSlyZXR1cm47Y29uc3QgZj1oKG8pLHk9Yih1LG8sYSk7aWYocD8uY29udGVudEFkZHJlc3NlZCYmXCJqc29uXCIhPT15LnR5cGUpcmV0dXJuIHZvaWQgYS5tZXNzYWdlcz8ucHVzaChuZXcgdChcInBlcnNpc3RhYmxlOmNvbnRlbnRBZGRyZXNzaW5nVW5zdXBwb3J0ZWRcIixgUHJvcGVydHkgXCIke2R9XCIgaXMgdHJ5aW5nIHRvIHNlcmlhbGl6aW5nIGEgcmVzb3VyY2Ugd2l0aCBjb250ZW50IG9mIHR5cGUgJHt5LnR5cGV9IHdpdGggY29udGVudCBhZGRyZXNzaW5nLiBDb250ZW50IGFkZHJlc3NpbmcgaXMgb25seSBzdXBwb3J0ZWQgZm9yIGpzb24gcmVzb3VyY2VzLmAse2NvbnRlbnQ6eX0pKTtjb25zdCBnPXA/LmNvbnRlbnRBZGRyZXNzZWQmJlwianNvblwiPT09eS50eXBlP3IoeS5qc29uU3RyaW5nKTpmPy5maWxlbmFtZT8/YygpLHY9bihwPy5wcmVmaXg/P2Y/LnByZWZpeCxnKSxqPWAke3Z9LiR7bSh5KX1gO2lmKHA/LmNvbnRlbnRBZGRyZXNzZWQmJmEucmVzb3VyY2VzJiZcImpzb25cIj09PXkudHlwZSl7Y29uc3QgdD1hLnJlc291cmNlcy50b0tlZXAuZmluZCgodD0+dC5yZXNvdXJjZS5wYXRoPT09aikpPz9hLnJlc291cmNlcy50b0FkZC5maW5kKCh0PT50LnJlc291cmNlLnBhdGg9PT1qKSk7aWYodClyZXR1cm4gdm9pZChsW2RdPXQucmVzb3VyY2UuaXRlbVJlbGF0aXZlVXJsKX1jb25zdCBVPWEucG9ydGFsSXRlbS5yZXNvdXJjZUZyb21QYXRoKGopO3MobykmJmEucmVzb3VyY2VzJiZhLnJlc291cmNlcy5wZW5kaW5nT3BlcmF0aW9ucy5wdXNoKGkobykudGhlbigodD0+e1UucGF0aD1gJHt2fS4ke20oe3R5cGU6XCJibG9iXCIsYmxvYjp0fSl9YCxsW2RdPVUuaXRlbVJlbGF0aXZlVXJsfSkpLmNhdGNoKCgoKT0+e30pKSk7Y29uc3Qgdz1wPy5jb21wcmVzcz8/ITE7YS5yZXNvdXJjZXMmJlMoey4uLmUscmVzb3VyY2U6VSxjb250ZW50OnksY29tcHJlc3M6dyx1cGRhdGVzOmEucmVzb3VyY2VzLnRvQWRkfSksbFtkXT1VLml0ZW1SZWxhdGl2ZVVybH1mdW5jdGlvbiBOKHQpe2NvbnN0e2NvbnRleHQ6cix0YXJnZXRVcmw6ZSxwYXJhbXM6byx2YWx1ZTpzLGRlc3Q6bix0YXJnZXRQcm9wZXJ0eU5hbWU6aX09dDtpZighci5wb3J0YWxJdGVtKXJldHVybjtjb25zdCBjPXIucG9ydGFsSXRlbS5yZXNvdXJjZUZyb21QYXRoKGUpLHU9YihzLGUsciksYT1tKHUpLGw9cChjLnBhdGgpLGQ9bz8uY29tcHJlc3M/PyExO2E9PT1sPyhyLnJlc291cmNlcyYmUyh7Li4udCxyZXNvdXJjZTpjLGNvbnRlbnQ6dSxjb21wcmVzczpkLHVwZGF0ZXM6ci5yZXNvdXJjZXMudG9VcGRhdGV9KSxuW2ldPWUpOkkodCl9ZnVuY3Rpb24gUCh7Y29udGV4dDp0LHRhcmdldFVybDpyLGRlc3Q6ZSx0YXJnZXRQcm9wZXJ0eU5hbWU6b30pe3QucG9ydGFsSXRlbSYmdC5yZXNvdXJjZXMmJih0LnJlc291cmNlcy50b0tlZXAucHVzaCh7cmVzb3VyY2U6dC5wb3J0YWxJdGVtLnJlc291cmNlRnJvbVBhdGgociksY29tcHJlc3M6ITF9KSxlW29dPXIpfWZ1bmN0aW9uIFMoe29iamVjdDp0LHByb3BlcnR5TmFtZTpyLHVwZGF0ZXM6ZSxyZXNvdXJjZTpvLGNvbnRlbnQ6cyxjb21wcmVzczpufSl7ZS5wdXNoKHtyZXNvdXJjZTpvLGNvbnRlbnQ6cyxjb21wcmVzczpuLGZpbmlzaDplPT57Tyh0LHIsZSl9fSl9ZnVuY3Rpb24gYih0LHIsZSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHQ/e3R5cGU6XCJ1cmxcIix1cmw6cn06e3R5cGU6XCJqc29uXCIsanNvblN0cmluZzpKU09OLnN0cmluZ2lmeSh0LnRvSlNPTihlKSl9fWZ1bmN0aW9uIHgodCl7cmV0dXJuIG51bGw9PXQ/bnVsbDpcInN0cmluZ1wiPT10eXBlb2YgdD90OnQudXJsfWZ1bmN0aW9uIE8odCxyLGUpe1wic3RyaW5nXCI9PXR5cGVvZiB0W3JdP3Rbcl09ZS51cmw6dFtyXS51cmw9ZS51cmx9ZXhwb3J0e2ogYXMgcGVyc2lzdGFibGV9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmZ1bmN0aW9uIGkoaSl7cmV0dXJuIGkmJlwiZ2V0QXRPcmlnaW5cImluIGkmJlwib3JpZ2luT2ZcImluIGl9ZXhwb3J0e2kgYXMgaXNNdWx0aU9yaWdpbkpTT05NaXhpbn07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e2wgYXMgcn1mcm9tXCIuLi8uLi9jaHVua3MvdmVjMy5qc1wiO2ltcG9ydHtjbGFzc2lmeVNwYXRpYWxSZWZlcmVuY2UgYXMgdCxzb3VyY2VDbGFzc2lmaWNhdGlvbkNhY2hlIGFzIHMsZGVzdENsYXNzaWZpY2F0aW9uQ2FjaGUgYXMgbyxQcm9qZWN0aW9uSUQgYXMgaSxpbnZQbGF0ZUNhcnJlZVNjYWxlIGFzIG59ZnJvbVwiLi9wcm9qZWN0b3JzLmpzXCI7aW1wb3J0e2VhcnRoIGFzIGV9ZnJvbVwiLi4vc3VwcG9ydC9FbGxpcHNvaWQuanNcIjtpbXBvcnR7ZXF1YWxzIGFzIHV9ZnJvbVwiLi4vc3VwcG9ydC9zcGF0aWFsUmVmZXJlbmNlVXRpbHMuanNcIjtmdW5jdGlvbiBmKGYscCxFLGMpe2lmKG51bGw9PXB8fG51bGw9PWMpcmV0dXJuITE7Y29uc3QgbD10KHAscyksQz10KGMsbyk7aWYobD09PUMmJmwhPT1pLlVOS05PV058fHUocCxjKSlyZXR1cm4gRVswXT0xLEVbMV09MSxFWzJdPTEsITA7aWYobD09PWkuU1BIRVJJQ0FMX0VDRUYpe2NvbnN0IHQ9cihmKSxzPXQvTWF0aC5zcXJ0KGZbMF0qZlswXStmWzFdKmZbMV0pLG89dC9lLnJhZGl1cztpZihDPT09aS5XRUJfTUVSQ0FUT1IpcmV0dXJuIEVbMF09cypvLEVbMV09cypvLEVbMl09MSwhMDtpZihDPT09aS5XR1M4NHx8Qz09PWkuQ0dDUzIwMDApe2NvbnN0IHI9bjtyZXR1cm4gRVswXT1yKnMqbyxFWzFdPXIqbyxFWzJdPTEsITB9fWVsc2UgaWYobD09PWkuUExBVEVfQ0FSUkVFKXtpZihDPT09aS5XR1M4NHx8Qz09PWkuQ0dDUzIwMDApcmV0dXJuIEVbMF09bixFWzFdPW4sRVsyXT0xLCEwO2lmKEM9PT1pLldFQl9NRVJDQVRPUil7Y29uc3Qgcj1mWzFdL2UucmFkaXVzO3JldHVybiBFWzBdPTEsRVsxXT0xL01hdGguY29zKHIpLEVbMl09MSwhMH19cmV0dXJuITF9ZXhwb3J0e2YgYXMgbG9jYWxMaW5lYXJTY2FsZUZhY3RvcnN9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtuYXRpdmVBcnJheU1heFNpemUgYXMgcn1mcm9tXCIuLi8uLi9jb3JlL3R5cGVkQXJyYXlVdGlsLmpzXCI7ZnVuY3Rpb24gZShlLG49ITEpe3JldHVybiBlPD1yP24/bmV3IEFycmF5KGUpLmZpbGwoMCk6bmV3IEFycmF5KGUpOm5ldyBVaW50OEFycmF5KGUpfWV4cG9ydHtlIGFzIG5ld1VCeXRlQXJyYXl9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtfIGFzIGV9ZnJvbVwiLi4vLi4vY2h1bmtzL3RzbGliLmVzNi5qc1wiO2ltcG9ydFwiLi4vLi4vZ2VvbWV0cnkuanNcIjtpbXBvcnR7SlNPTlN1cHBvcnQgYXMgcn1mcm9tXCIuLi8uLi9jb3JlL0pTT05TdXBwb3J0LmpzXCI7aW1wb3J0e2Nsb25lIGFzIG99ZnJvbVwiLi4vLi4vY29yZS9sYW5nLmpzXCI7aW1wb3J0IHQgZnJvbVwiLi4vLi4vY29yZS9XYXJuaW5nLmpzXCI7aW1wb3J0e3Byb3BlcnR5IGFzIHN9ZnJvbVwiLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9wcm9wZXJ0eS5qc1wiO2ltcG9ydFwiLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZW5zdXJlVHlwZS5qc1wiO2ltcG9ydHtzdWJjbGFzcyBhcyBwfWZyb21cIi4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvc3ViY2xhc3MuanNcIjtpbXBvcnR7d3JpdGVyIGFzIGl9ZnJvbVwiLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy93cml0ZXIuanNcIjtpbXBvcnR7cGVyc2lzdGFibGUgYXMgYX1mcm9tXCIuLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3BlcnNpc3RhYmxlLmpzXCI7aW1wb3J0e2NhblByb2plY3RXaXRob3V0RW5naW5lIGFzIGMscHJvamVjdFBvbHlnb24gYXMgbn1mcm9tXCIuLi8uLi9nZW9tZXRyeS9wcm9qZWN0aW9uLmpzXCI7aW1wb3J0IG0gZnJvbVwiLi4vLi4vZ2VvbWV0cnkvUG9seWdvbi5qc1wiO3ZhciBsO2xldCB5PWw9Y2xhc3MgZXh0ZW5kcyBye2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMuZ2VvbWV0cnk9bnVsbCx0aGlzLnR5cGU9XCJjbGlwXCJ9d3JpdGVHZW9tZXRyeShlLHIsbyxzKXtpZihzLmxheWVyPy5zcGF0aWFsUmVmZXJlbmNlJiYhcy5sYXllci5zcGF0aWFsUmVmZXJlbmNlLmVxdWFscyh0aGlzLmdlb21ldHJ5LnNwYXRpYWxSZWZlcmVuY2UpKXtpZighYyhlLnNwYXRpYWxSZWZlcmVuY2Uscy5sYXllci5zcGF0aWFsUmVmZXJlbmNlKSlyZXR1cm4gdm9pZChzPy5tZXNzYWdlcyYmcy5tZXNzYWdlcy5wdXNoKG5ldyB0KFwic2NlbmVtb2RpZmljYXRpb246dW5zdXBwb3J0ZWRcIixcIlNjZW5lIG1vZGlmaWNhdGlvbnMgd2l0aCBpbmNvbXBhdGlibGUgc3BhdGlhbCByZWZlcmVuY2VzIGFyZSBub3Qgc3VwcG9ydGVkXCIse21vZGlmaWNhdGlvbjp0aGlzLHNwYXRpYWxSZWZlcmVuY2U6cy5sYXllci5zcGF0aWFsUmVmZXJlbmNlLGNvbnRleHQ6c30pKSk7Y29uc3QgcD1uZXcgbTtuKGUscCxzLmxheWVyLnNwYXRpYWxSZWZlcmVuY2UpLHJbb109cC50b0pTT04ocyl9ZWxzZSByW29dPWUudG9KU09OKHMpO2RlbGV0ZSByW29dLnNwYXRpYWxSZWZlcmVuY2V9Y2xvbmUoKXtyZXR1cm4gbmV3IGwoe2dlb21ldHJ5Om8odGhpcy5nZW9tZXRyeSksdHlwZTp0aGlzLnR5cGV9KX19O2UoW3Moe3R5cGU6bX0pLGEoKV0seS5wcm90b3R5cGUsXCJnZW9tZXRyeVwiLHZvaWQgMCksZShbaShbXCJ3ZWItc2NlbmVcIixcInBvcnRhbC1pdGVtXCJdLFwiZ2VvbWV0cnlcIildLHkucHJvdG90eXBlLFwid3JpdGVHZW9tZXRyeVwiLG51bGwpLGUoW3Moe3R5cGU6W1wiY2xpcFwiLFwibWFza1wiLFwicmVwbGFjZVwiXSxub25OdWxsYWJsZTohMH0pLGEoKV0seS5wcm90b3R5cGUsXCJ0eXBlXCIsdm9pZCAwKSx5PWw9ZShbcChcImVzcmkubGF5ZXJzLnN1cHBvcnQuU2NlbmVNb2RpZmljYXRpb25cIildLHkpO2NvbnN0IGY9eTtleHBvcnR7ZiBhcyBkZWZhdWx0fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7Z2V0QXNzZXRVcmwgYXMgdH1mcm9tXCIuLi8uLi9hc3NldHMuanNcIjtmdW5jdGlvbiBlKCl7cmV0dXJuIG58fChuPW5ldyBQcm9taXNlKCh0PT5pbXBvcnQoXCIuLi8uLi9jaHVua3MvaTNzLmpzXCIpLnRoZW4oKHQ9PnQuaSkpLnRoZW4oKCh7ZGVmYXVsdDplfSk9Pntjb25zdCBuPWUoe2xvY2F0ZUZpbGU6aSxvblJ1bnRpbWVJbml0aWFsaXplZDooKT0+dChuKX0pO2RlbGV0ZSBuLnRoZW59KSkpKS5jYXRjaCgodD0+e3Rocm93IHR9KSkpLG59ZnVuY3Rpb24gaShlKXtyZXR1cm4gdChgZXNyaS9saWJzL2kzcy8ke2V9YCl9bGV0IG47ZXhwb3J0e2UgYXMgZ2V0fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG52YXIgbixlOyFmdW5jdGlvbihuKXtuW24uTm9uZT0wXT1cIk5vbmVcIixuW24uSW50MTY9MV09XCJJbnQxNlwiLG5bbi5JbnQzMj0yXT1cIkludDMyXCJ9KG58fChuPXt9KSksZnVuY3Rpb24obil7bltuLlJlcGxhY2U9MF09XCJSZXBsYWNlXCIsbltuLk91dHNpZGU9MV09XCJPdXRzaWRlXCIsbltuLkluc2lkZT0yXT1cIkluc2lkZVwiLG5bbi5GaW5pc2hlZD0zXT1cIkZpbmlzaGVkXCJ9KGV8fChlPXt9KSk7ZXhwb3J0e24gYXMgSW5kZXhUeXBlLGUgYXMgTW9kaWZpY2F0aW9uVHlwZX07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e2dldFBhdGhFeHRlbnNpb24gYXMgaX1mcm9tXCIuLi8uLi9jb3JlL3VybFV0aWxzLmpzXCI7ZnVuY3Rpb24gcChpKXtyZXR1cm4gb1t0KGkpXXx8ZX1mdW5jdGlvbiB0KGkpe3JldHVyblwianNvblwiPT09aS50eXBlP1wiYXBwbGljYXRpb24vanNvblwiOlwiYmxvYlwiPT09aS50eXBlP2kuYmxvYi50eXBlOm4oaS51cmwpfWZ1bmN0aW9uIG4ocCl7Y29uc3QgdD1pKHApO3JldHVybiBnW3RdfHxhfWNvbnN0IG89e30sYT1cInRleHQvcGxhaW5cIixlPW9bYV0sZz17cG5nOlwiaW1hZ2UvcG5nXCIsanBlZzpcImltYWdlL2pwZWdcIixqcGc6XCJpbWFnZS9qcGdcIixibXA6XCJpbWFnZS9ibXBcIixnaWY6XCJpbWFnZS9naWZcIixqc29uOlwiYXBwbGljYXRpb24vanNvblwiLHR4dDpcInRleHQvcGxhaW5cIix4bWw6XCJhcHBsaWNhdGlvbi94bWxcIixzdmc6XCJpbWFnZS9zdmcreG1sXCIsemlwOlwiYXBwbGljYXRpb24vemlwXCIscGJmOlwiYXBwbGljYXRpb24vdm5kLm1hcGJveC12ZWN0b3ItdGlsZVwiLGd6OlwiYXBwbGljYXRpb24vZ3ppcFwiLFwiYmluLmd6XCI6XCJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW1cIn07Zm9yKGNvbnN0IGwgaW4gZylvW2dbbF1dPWw7ZXhwb3J0e3AgYXMgZ2V0UmVzb3VyY2VDb250ZW50RXh0ZW5zaW9ufTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7XyBhcyBlfWZyb21cIi4uLy4uLy4uL2NodW5rcy90c2xpYi5lczYuanNcIjtpbXBvcnQgdCBmcm9tXCIuLi8uLi8uLi9Db2xvci5qc1wiO2ltcG9ydCBpIGZyb21cIi4uLy4uLy4uL0dyYXBoaWMuanNcIjtpbXBvcnR7aXNTb21lIGFzIHMscmVtb3ZlVW5vcmRlcmVkIGFzIHJ9ZnJvbVwiLi4vLi4vLi4vY29yZS9hcnJheVV0aWxzLmpzXCI7aW1wb3J0e0J5dGVTaXplVW5pdCBhcyBvfWZyb21cIi4uLy4uLy4uL2NvcmUvQnl0ZVNpemVVbml0LmpzXCI7aW1wb3J0IGEgZnJvbVwiLi4vLi4vLi4vY29yZS9Db2xsZWN0aW9uLmpzXCI7aW1wb3J0e21ha2VIYW5kbGUgYXMgbn1mcm9tXCIuLi8uLi8uLi9jb3JlL2hhbmRsZVV0aWxzLmpzXCI7aW1wb3J0IGhhcyBmcm9tXCIuLi8uLi8uLi9jb3JlL2hhcy5qc1wiO2ltcG9ydCBsIGZyb21cIi4uLy4uLy4uL2NvcmUvTG9nZ2VyLmpzXCI7aW1wb3J0e3NvbWVNYXAgYXMgZH1mcm9tXCIuLi8uLi8uLi9jb3JlL01hcFV0aWxzLmpzXCI7aW1wb3J0e2Rlc3Ryb3lNYXliZSBhcyBofWZyb21cIi4uLy4uLy4uL2NvcmUvbWF5YmUuanNcIjtpbXBvcnQgYyBmcm9tXCIuLi8uLi8uLi9jb3JlL1Bvb2xlZEFycmF5LmpzXCI7aW1wb3J0e2lzQWJvcnRFcnJvciBhcyB1LHRocm93SWZBYm9ydGVkIGFzIF8sY3JlYXRlUmVzb2x2ZXIgYXMgbX1mcm9tXCIuLi8uLi8uLi9jb3JlL3Byb21pc2VVdGlscy5qc1wiO2ltcG9ydHtpbml0aWFsIGFzIGcsd2F0Y2ggYXMgcH1mcm9tXCIuLi8uLi8uLi9jb3JlL3JlYWN0aXZlVXRpbHMuanNcIjtpbXBvcnR7c2NoZWR1bGUgYXMgZn1mcm9tXCIuLi8uLi8uLi9jb3JlL3NjaGVkdWxpbmcuanNcIjtpbXBvcnR7aXNBcnJheUJ1ZmZlciBhcyBifWZyb21cIi4uLy4uLy4uL2NvcmUvdHlwZWRBcnJheVV0aWwuanNcIjtpbXBvcnR7Z2V0TWV0ZXJzUGVyVmVydGljYWxVbml0Rm9yU1IgYXMgeX1mcm9tXCIuLi8uLi8uLi9jb3JlL3VuaXRVdGlscy5qc1wiO2ltcG9ydHtwcm9wZXJ0eSBhcyB2fWZyb21cIi4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvcHJvcGVydHkuanNcIjtpbXBvcnRcIi4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2Vuc3VyZVR5cGUuanNcIjtpbXBvcnR7c3ViY2xhc3MgYXMgSX1mcm9tXCIuLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3N1YmNsYXNzLmpzXCI7aW1wb3J0e2YgYXMgTX1mcm9tXCIuLi8uLi8uLi9jaHVua3MvbWF0My5qc1wiO2ltcG9ydHthIGFzIEN9ZnJvbVwiLi4vLi4vLi4vY2h1bmtzL21hdDNmNjQuanNcIjtpbXBvcnR7bSBhcyBPLEIgYXMgeH1mcm9tXCIuLi8uLi8uLi9jaHVua3MvbWF0NC5qc1wiO2ltcG9ydHtiIGFzIEUsYSBhcyBqfWZyb21cIi4uLy4uLy4uL2NodW5rcy9tYXQ0ZjY0LmpzXCI7aW1wb3J0e2YgYXMgd31mcm9tXCIuLi8uLi8uLi9jaHVua3MvcXVhdGY2NC5qc1wiO2ltcG9ydHtlIGFzIFMscyBhcyBBLGcgYXMgVCx0IGFzIEQsYyBhcyBSLGkgYXMgTixmIGFzIEZ9ZnJvbVwiLi4vLi4vLi4vY2h1bmtzL3ZlYzMuanNcIjtpbXBvcnR7YyBhcyBWfWZyb21cIi4uLy4uLy4uL2NodW5rcy92ZWMzZjY0LmpzXCI7aW1wb3J0e3MgYXMgUH1mcm9tXCIuLi8uLi8uLi9jaHVua3MvdmVjNC5qc1wiO2ltcG9ydHtmIGFzIEh9ZnJvbVwiLi4vLi4vLi4vY2h1bmtzL3ZlYzRmNjQuanNcIjtpbXBvcnR7VXBkYXRpbmdIYW5kbGVzIGFzIFV9ZnJvbVwiLi4vLi4vLi4vY29yZS9zdXBwb3J0L1VwZGF0aW5nSGFuZGxlcy5qc1wiO2ltcG9ydHtnZXRSZWZlcmVuY2VFbGxpcHNvaWQgYXMgR31mcm9tXCIuLi8uLi8uLi9nZW9tZXRyeS9lbGxpcHNvaWRVdGlscy5qc1wiO2ltcG9ydHtsb2NhbExpbmVhclNjYWxlRmFjdG9ycyBhcyBMfWZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L3Byb2plY3Rpb24vbG9jYWxMaW5lYXJTY2FsZUZhY3RvcnMuanNcIjtpbXBvcnR7cHJvamVjdEJvdW5kaW5nU3BoZXJlIGFzIGt9ZnJvbVwiLi4vLi4vLi4vZ2VvbWV0cnkvcHJvamVjdGlvbi9wcm9qZWN0Qm91bmRpbmdTcGhlcmUuanNcIjtpbXBvcnR7cHJvamVjdEJ1ZmZlciBhcyBCfWZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L3Byb2plY3Rpb24vcHJvamVjdEJ1ZmZlci5qc1wiO2ltcG9ydHtnZXRQcm9qZWN0b3JOYW1lIGFzIHF9ZnJvbVwiLi4vLi4vLi4vZ2VvbWV0cnkvcHJvamVjdGlvbi9wcm9qZWN0b3JzLmpzXCI7aW1wb3J0e3Byb2plY3RWZWN0b3JUb1ZlY3RvciBhcyB6fWZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L3Byb2plY3Rpb24vcHJvamVjdFZlY3RvclRvVmVjdG9yLmpzXCI7aW1wb3J0e2NyZWF0ZSBhcyBLLGVtcHR5IGFzIFcsZXhwYW5kV2l0aEJ1ZmZlciBhcyAkLHRvUmVjdCBhcyBRfWZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvYWFCb3VuZGluZ0JveC5qc1wiO2ltcG9ydHtjcmVhdGUgYXMgWCxpbnRlcnNlY3RzIGFzIFl9ZnJvbVwiLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9hYUJvdW5kaW5nUmVjdC5qc1wiO2ltcG9ydHtuZXdEb3VibGVBcnJheSBhcyBKfWZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvRG91YmxlQXJyYXkuanNcIjtpbXBvcnR7Y29tcGFjdEZsb2F0QXJyYXkgYXMgWn1mcm9tXCIuLi8uLi8uLi9nZW9tZXRyeS9zdXBwb3J0L0Zsb2F0QXJyYXkuanNcIjtpbXBvcnR7Y29tcGFjdEluZGljZXMgYXMgZWV9ZnJvbVwiLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9JbmRpY2VzLmpzXCI7aW1wb3J0e2YgYXMgdGV9ZnJvbVwiLi4vLi4vLi4vY2h1bmtzL3NwaGVyZS5qc1wiO2ltcG9ydHtuZXdVQnl0ZUFycmF5IGFzIGllfWZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvVUJ5dGVBcnJheS5qc1wiO2ltcG9ydHtmYWxsYmFja09iamVjdElEQXR0cmlidXRlIGFzIHNlfWZyb21cIi4uLy4uLy4uL2xheWVycy9MYXllckNvbnN0YW50cy5qc1wiO2ltcG9ydCByZSBmcm9tXCIuLi8uLi8uLi9sYXllcnMvZ3JhcGhpY3MvY29udHJvbGxlcnMvSTNTT25EZW1hbmRDb250cm9sbGVyLmpzXCI7aW1wb3J0e2ZpeEZpZWxkcyBhcyBvZX1mcm9tXCIuLi8uLi8uLi9sYXllcnMvc3VwcG9ydC9maWVsZFV0aWxzLmpzXCI7aW1wb3J0IGFlIGZyb21cIi4uLy4uLy4uL2xheWVycy9zdXBwb3J0L1NjZW5lTW9kaWZpY2F0aW9uLmpzXCI7aW1wb3J0e2dldENvbG9yIGFzIG5lLGdldE9wYWNpdHkgYXMgbGV9ZnJvbVwiLi4vLi4vLi4vcmVuZGVyZXJzL3Zpc3VhbFZhcmlhYmxlcy9zdXBwb3J0L3Zpc3VhbFZhcmlhYmxlVXRpbHMuanNcIjtpbXBvcnR7bG9hZEFyY2FkZSBhcyBkZX1mcm9tXCIuLi8uLi8uLi9zdXBwb3J0L2FyY2FkZU9uRGVtYW5kLmpzXCI7aW1wb3J0e2lzQmFzZW1hcExheWVyIGFzIGhlfWZyb21cIi4uLy4uLy4uL3N1cHBvcnQvYmFzZW1hcFV0aWxzLmpzXCI7aW1wb3J0IGNlIGZyb21cIi4uLy4uLy4uL3N5bWJvbHMvU3ltYm9sM0QuanNcIjtpbXBvcnR7Z2V0TWV0ZXJzUGVyVW5pdCBhcyB1ZX1mcm9tXCIuLi8uLi8uLi9zeW1ib2xzL3N1cHBvcnQvdW5pdENvbnZlcnNpb25VdGlscy5qc1wiO2ltcG9ydCBfZSBmcm9tXCIuL0kzU01lc2hWaWV3TGFiZWxlci5qc1wiO2ltcG9ydHtJM1NNZXNoV29ya2VySGFuZGxlIGFzIG1lLHRvV2FzbU1vZGlmaWNhdGlvbiBhcyBnZX1mcm9tXCIuL0kzU01lc2hXb3JrZXJIYW5kbGUuanNcIjtpbXBvcnR7Rm9yQWxsRmVhdHVyZXNSZXR1cm5UeXBlIGFzIHBlLEZvckFsbEZlYXR1cmVzTW9kZSBhcyBmZX1mcm9tXCIuL0lJM1NNZXNoVmlldzNELmpzXCI7aW1wb3J0e2luaXRpYWxpemUgYXMgYmUsc2V0TW9kaWZpY2F0aW9uc1N5bmMgYXMgeWUsZmlsdGVyT2Jic0Zvck1vZGlmaWNhdGlvbnNTeW5jIGFzIHZlLGludGVycHJldE9iYk1vZGlmaWNhdGlvblJlc3VsdHMgYXMgSWV9ZnJvbVwiLi9TY2VuZUxheWVyV29ya2VyLmpzXCI7aW1wb3J0e292ZXJyaWRlQ29sb3IgYXMgTWV9ZnJvbVwiLi9ncmFwaGljcy9ncmFwaGljVXRpbHMuanNcIjtpbXBvcnR7YXJlTGFiZWxzVmlzaWJsZSBhcyBDZX1mcm9tXCIuL2dyYXBoaWNzL0xhYmVsZXIuanNcIjtpbXBvcnR7VGV4dHVyZVVzYWdlIGFzIE9lLFRleHR1cmVFbmNvZGluZyBhcyB4ZX1mcm9tXCIuL2kzcy9lbnVtcy5qc1wiO2ltcG9ydCBFZSBmcm9tXCIuL2kzcy9IaWdobGlnaHRzLmpzXCI7aW1wb3J0e0kzU0FzeW5jRWxldmF0aW9uVXBkYXRlciBhcyBqZX1mcm9tXCIuL2kzcy9JM1NBc3luY0VsZXZhdGlvblVwZGF0ZXIuanNcIjtpbXBvcnR7STNTQ3Jvc3NmYWRlSGVscGVyIGFzIHdlLE5vZGVDcm9zc2ZhZGVNZXRhRGF0YSBhcyBTZX1mcm9tXCIuL2kzcy9JM1NDcm9zc2ZhZGVIZWxwZXIuanNcIjtpbXBvcnQgQWUgZnJvbVwiLi9pM3MvSTNTRWxldmF0aW9uUHJvdmlkZXIuanNcIjtpbXBvcnR7Ym91bmRpbmdCb3hDb3JuZXJQb2ludHMgYXMgVGV9ZnJvbVwiLi9pM3MvSTNTR2VvbWV0cnlVdGlsLmpzXCI7aW1wb3J0e0kzU0ludGVyc2VjdGlvbkhhbmRsZXIgYXMgRGV9ZnJvbVwiLi9pM3MvSTNTSW50ZXJzZWN0aW9uSGFuZGxlci5qc1wiO2ltcG9ydHtnZXRTdXBwb3J0ZWRFbmNvZGluZ3MgYXMgUmUsc2VsZWN0RW5jb2RpbmcgYXMgTmUsZGVmYXVsdE1hdGVyaWFsIGFzIEZlLGNyZWF0ZVRleHR1cmUgYXMgVmUsY29uZmlndXJlTWF0ZXJpYWwgYXMgUGV9ZnJvbVwiLi9pM3MvSTNTTWF0ZXJpYWxVdGlsLmpzXCI7aW1wb3J0e05vZGVJTU1vZGlmaWNhdGlvbkltcGFjdCBhcyBIZSxOb2RlU3RhdGUgYXMgVWV9ZnJvbVwiLi9pM3MvSTNTTm9kZS5qc1wiO2ltcG9ydHtJM1NPdmVycmlkZXMgYXMgR2V9ZnJvbVwiLi9pM3MvSTNTT3ZlcnJpZGVzLmpzXCI7aW1wb3J0e2NvbXB1dGVHbG9iYWxUcmFuc2Zvcm1hdGlvbiBhcyBMZSxnZXRMb2NhbE9yaWdpbiBhcyBrZX1mcm9tXCIuL2kzcy9JM1NQcm9qZWN0aW9uVXRpbC5qc1wiO2ltcG9ydHtyZW5kZXJlck5lZWRzVGV4dHVyZXMgYXMgQmUsY2hlY2tTY2VuZUxheWVyVmFsaWQgYXMgcWUsY2hlY2tTY2VuZUxheWVyQ29tcGF0aWJsZVdpdGhWaWV3IGFzIHplLGdldENhY2hlS2V5U3VmZml4IGFzIEtlLHdoZW5HcmFwaGljQXR0cmlidXRlcyBhcyBXZSxjb21wdXRlVmlzaWJpbGl0eU9iYiBhcyAkZSxmaWx0ZXJJblBsYWNlIGFzIFFlLGdldENhY2hlZEF0dHJpYnV0ZVZhbHVlIGFzIFhlLGludGVyc2VjdEJvdW5kaW5nUmVjdFdpdGhNYnMgYXMgWWUsTWJzSW50ZXJzZWN0UmVzdWx0IGFzIEplLGFkZFdyYXBhcm91bmQgYXMgWmUsZ2V0U3ltYm9sSW5mbyBhcyBldCx0cmFuc3BhcmVudEVkZ2VNYXRlcmlhbCBhcyB0dCxnZXRDbGlwUmVjdCBhcyBpdH1mcm9tXCIuL2kzcy9JM1NVdGlsLmpzXCI7aW1wb3J0e0lEQkNhY2hlIGFzIHN0fWZyb21cIi4vaTNzL0lEQkNhY2hlLmpzXCI7aW1wb3J0e0lEQk1vY2tDYWNoZSBhcyBydH1mcm9tXCIuL2kzcy9JREJNb2NrQ2FjaGUuanNcIjtpbXBvcnR7YXR0cmlidXRlTG9va3VwIGFzIG90fWZyb21cIi4vc3VwcG9ydC9hdHRyaWJ1dGVVdGlscy5qc1wiO2ltcG9ydHtDb2xvck1peE1vZGVFbnVtIGFzIGF0fWZyb21cIi4vc3VwcG9ydC9zeW1ib2xDb2xvclV0aWxzLmpzXCI7aW1wb3J0e2RlYnVnRmxhZ3MgYXMgbnR9ZnJvbVwiLi4vc3VwcG9ydC9kZWJ1Z0ZsYWdzLmpzXCI7aW1wb3J0e3RvQm91bmRpbmdSZWN0IGFzIGx0fWZyb21cIi4uL3N1cHBvcnQvZXh0ZW50VXRpbHMuanNcIjtpbXBvcnR7Y3JlYXRlIGFzIGR0LGludGVyc2VjdFNwaGVyZSBhcyBodCxjbG9uZSBhcyBjdH1mcm9tXCIuLi9zdXBwb3J0L29yaWVudGVkQm91bmRpbmdCb3guanNcIjtpbXBvcnR7dXBkYXRpbmdQcm9ncmVzcyBhcyB1dH1mcm9tXCIuLi9zdXBwb3J0L3VwZGF0aW5nUHJvcGVydGllcy5qc1wiO2ltcG9ydHtnbExheW91dCBhcyBfdH1mcm9tXCIuLi9zdXBwb3J0L2J1ZmZlci9nbFV0aWwuanNcIjtpbXBvcnR7U3RhdGUgYXMgbXR9ZnJvbVwiLi4vd2ViZ2wtZW5naW5lL2NvbGxlY3Rpb25zL0NvbXBvbmVudC9Db21wb25lbnRPYmplY3QuanNcIjtpbXBvcnR7Y3JlYXRlVmVydGV4QnVmZmVyTGF5b3V0IGFzIGd0fWZyb21cIi4uL3dlYmdsLWVuZ2luZS9jb2xsZWN0aW9ucy9Db21wb25lbnQvU291cmNlR2VvbWV0cnkuanNcIjtpbXBvcnR7VGV4dHVyZUNvb3JkaW5hdGVBdHRyaWJ1dGVUeXBlIGFzIHB0fWZyb21cIi4uL3dlYmdsLWVuZ2luZS9jb3JlL3NoYWRlckxpYnJhcnkvYXR0cmlidXRlcy9UZXh0dXJlQ29vcmRpbmF0ZUF0dHJpYnV0ZS5nbHNsLmpzXCI7aW1wb3J0e2xvYWRCYXNpcyBhcyBmdH1mcm9tXCIuLi93ZWJnbC1lbmdpbmUvbGliL0Jhc2lzVXRpbC5qc1wiO2ltcG9ydHtUcmFuc3BhcmVuY3kgYXMgYnR9ZnJvbVwiLi4vd2ViZ2wtZW5naW5lL2xpYi9lZGdlUmVuZGVyaW5nL2ludGVyZmFjZXMuanNcIjtjb25zdCB5dD1cImVzcmkudmlld3MuM2QubGF5ZXJzLkkzU01lc2hWaWV3M0RcIix2dD1sLmdldExvZ2dlcih5dCksSXQ9WzEsMSwxLDFdO2NsYXNzIE10IGV4dGVuZHMgU2V7Y29uc3RydWN0b3IoZSx0LGkscyxyLG8sYSxuLGwpe3N1cGVyKCksdGhpcy5ub2RlPWUsdGhpcy5mZWF0dXJlSWRzPXQsdGhpcy5vYmplY3RIYW5kbGU9aSx0aGlzLmNhY2hlZFJlbmRlcmVyVmVyc2lvbj1zLHRoaXMuYXR0cmlidXRlSW5mbz1yLHRoaXMubWF0ZXJpYWw9byx0aGlzLnRleHR1cmVzPWEsdGhpcy5hbmNob3JJZHM9bix0aGlzLmFuY2hvcnM9bCx0aGlzLmNhY2hlZEVsZXZhdGlvbkFuY2hvcnM9bnVsbCx0aGlzLmNhY2hlZEVkZ2VNYXRlcmlhbHM9bmV3IEFycmF5LHRoaXMuZWRnZU1lbW9yeVVzYWdlPTB9fXZhciBDdDshZnVuY3Rpb24oZSl7ZVtlLkNhc3RTaGFkb3dzPTRdPVwiQ2FzdFNoYWRvd3NcIixlW2UuUGlja2FibGU9NV09XCJQaWNrYWJsZVwifShDdHx8KEN0PXt9KSk7Y29uc3QgT3Q9MjMseHQ9MTAwKm8uTUVHQUJZVEVTLEV0PXQ9PntsZXQgbz1jbGFzcyBleHRlbmRzIHR7Y29uc3RydWN0b3IoLi4uZSl7c3VwZXIoZSksdGhpcy5fdXBkYXRpbmdIYW5kbGVzPW5ldyBVLHRoaXMuX25vZGVJZDJNZXRhPW5ldyBNYXAsdGhpcy5fbm9kZUlkMk1ldGFSZWxvYWRpbmc9bmV3IE1hcCx0aGlzLl9pM3NXYXNtTG9hZGVkPSExLHRoaXMuX3NuYXBwaW5nU291cmNlc1RyYWNrZXJzPVtdLHRoaXMuX2hhc0xvYWRlZFBCUlRleHR1cmVzPSExLHRoaXMuX2FzeW5jTW9kdWxlTG9hZGluZz0wLHRoaXMuX2FkZFRhc2tzPW5ldyBNYXAsdGhpcy5fY3VycmVudFJlbmRlcmVyPW51bGwsdGhpcy5fcmVuZGVyZXJWZXJzaW9uPTAsdGhpcy5fY29sb3JWYXJpYWJsZT1udWxsLHRoaXMuX29wYWNpdHlWYXJpYWJsZT1udWxsLHRoaXMuX3JlbmRlcmVyRmllbGRzPW51bGwsdGhpcy5fc3ltYm9sb2d5RmllbGRzPW51bGwsdGhpcy5fc3ltYm9sb2d5T3ZlcnJpZGU9bnVsbCx0aGlzLl9zeW1ib2xvZ3lPdmVycmlkZUZpZWxkcz1udWxsLHRoaXMuX3N5bWJvbEluZm9zPW5ldyBNYXAsdGhpcy5fdmlzaWJsZUdlb21ldHJ5Q2hhbmdlZFNjaGVkdWxlckhhbmRsZT1udWxsLHRoaXMuX2hhc0NvbXBvbmVudERhdGE9ITEsdGhpcy5faGFzVmVydGV4Q29sb3JzPSExLHRoaXMuX25vZGVDb2xvck92ZXJyaWRlPW51bGwsdGhpcy51cGRhdGluZz0hMCx0aGlzLmhvbGVGaWxsaW5nPVwiYXV0b1wiLHRoaXMuX2hhc0NvbG9ycz0hMSx0aGlzLl9oYXNUZXh0dXJlcz0hMSx0aGlzLl9oYXNEYXRhPSExLHRoaXMuc2xpY2VQbGFuZUVuYWJsZWQ9ITEsdGhpcy5fbW9kaWZpY2F0aW9ucz1uZXcgQXJyYXksdGhpcy5pZ25vcmVzTWVtb3J5RmFjdG9yPSExLHRoaXMuX2xheWVyVXJsPVwiXCIsdGhpcy5fY2FjaGVLZXlTdWZmaXg9bnVsbCx0aGlzLl9lbGV2YXRpb25UYXNrPW51bGwsdGhpcy5fZmlsdGVycz1bXSx0aGlzLl9hcmNhZGU9bnVsbCx0aGlzLl90bXBBdHRyaWJ1dGVPbmx5R3JhcGhpYz1uZXcgaShudWxsLG51bGwse30pLHRoaXMuX2Nyb3NzZmFkZUhlbHBlcj1uZXcgd2UodGhpcyl9Z2V0IGxvZENyb3NzZmFkZW91dER1cmF0aW9uKCl7cmV0dXJuIDB9Z2V0IGxvZENyb3NzZmFkZWluRHVyYXRpb24oKXtyZXR1cm4gMH1nZXQgbG9kQ3Jvc3NmYWRlVW5jb3ZlcmVkRHVyYXRpb24oKXtyZXR1cm4gMH1nZXQgbGF5ZXJVaWQoKXtyZXR1cm4gdGhpcy5pM3NsYXllciYmdGhpcy5pM3NsYXllci51aWR9Z2V0IHN1YmxheWVyVWlkKCl7cmV0dXJuIG51bGx9Z2V0IGxheWVySWQoKXtyZXR1cm4gdGhpcy5pM3NsYXllciYmdGhpcy5pM3NsYXllci5pZH1nZXQgc3VibGF5ZXJJZCgpe3JldHVybiBudWxsfWdldCBjb250ZW50VmlzaWJsZSgpe3JldHVybiF0aGlzLnN1c3BlbmRlZCYmdGhpcy5fY29udHJvbGxlcj8ucm9vdE5vZGVWaXNpYmxlfWdldCBsZWdlbmRFbmFibGVkKCl7cmV0dXJuIHRoaXMuY29udGVudFZpc2libGUmJiEwPT09dGhpcy5pM3NsYXllcj8ubGVnZW5kRW5hYmxlZH1nZXQgdXBkYXRpbmdQcm9ncmVzc1ZhbHVlKCl7cmV0dXJuIHRoaXMuX2NvbnRyb2xsZXI/LnVwZGF0aW5nUHJvZ3Jlc3M/PzB9Z2V0IGhhc1RleHR1cmVzT3JWZXJ0ZXhDb2xvcnMoKXtyZXR1cm4gdGhpcy5faGFzRGF0YT90aGlzLl9oYXNUZXh0dXJlc3x8dGhpcy5faGFzQ29sb3JzP1wieWVzXCI6XCJwcm9iYWJseS1ub3RcIjpcInVua25vd25cIn1nZXQgcmVuZGVyZXJUZXh0dXJlVXNhZ2UoKXtyZXR1cm4gQmUodGhpcy5fY3VycmVudFJlbmRlcmVyKT90aGlzLl91c2VQQlJ8fHRoaXMuX2hhc0xvYWRlZFBCUlRleHR1cmVzP09lLkFsbFRleHR1cmVzUEJSOk9lLkFsbFRleHR1cmVzOnRoaXMuX3VzZVBCUnx8dGhpcy5faGFzTG9hZGVkUEJSVGV4dHVyZXM/T2UuR2VvbWV0cnlUZXh0dXJlc1BCUjpPZS5HZW9tZXRyeVRleHR1cmVzfWdldCBlbGV2YXRpb25PZmZzZXQoKXtjb25zdCBlPW51bGwhPXRoaXMuaTNzbGF5ZXI/dGhpcy5pM3NsYXllci5lbGV2YXRpb25JbmZvOm51bGw7aWYobnVsbCE9ZSYmXCJhYnNvbHV0ZS1oZWlnaHRcIj09PWUubW9kZSl7Y29uc3QgdD15KHRoaXMuaTNzbGF5ZXIuc3BhdGlhbFJlZmVyZW5jZSksaT11ZShlLnVuaXQpO3JldHVybihlLm9mZnNldD8/MCkqaS90fXJldHVybiAwfWdldCBlbGV2YXRpb25JbmZvKCl7Y29uc3QgZT1udWxsIT10aGlzLmkzc2xheWVyP3RoaXMuaTNzbGF5ZXIuZWxldmF0aW9uSW5mbzpudWxsO2lmKG51bGw9PWUpcmV0dXJue21vZGU6QnQuQWJzb2x1dGUsb2Zmc2V0OjB9O2NvbnN0IHQ9eSh0aGlzLmkzc2xheWVyLnNwYXRpYWxSZWZlcmVuY2UpLGk9dWUoZS51bml0KSxzPShlLm9mZnNldD8/MCkqaS90O3N3aXRjaChlLm1vZGUpe2Nhc2VcImFic29sdXRlLWhlaWdodFwiOnJldHVybnttb2RlOkJ0LkFic29sdXRlLG9mZnNldDpzfTtjYXNlXCJyZWxhdGl2ZS10by1ncm91bmRcIjpyZXR1cm57bW9kZTpCdC5SZWxhdGl2ZVRvR3JvdW5kLG9mZnNldDpzfTtjYXNlXCJvbi10aGUtZ3JvdW5kXCI6cmV0dXJue21vZGU6QnQuT25UaGVHcm91bmQsb2Zmc2V0OjB9O2RlZmF1bHQ6cmV0dXJue21vZGU6QnQuQWJzb2x1dGUsb2Zmc2V0OjB9fX1nZXQgc3VwcG9ydGVkVGV4dHVyZUVuY29kaW5ncygpe3JldHVybiBSZSh0aGlzLnZpZXcuX3N0YWdlLnJlbmRlclZpZXcuY2FwYWJpbGl0aWVzKX1nZXQgdW5jb21wcmVzc2VkVGV4dHVyZURvd25zYW1wbGluZ0VuYWJsZWQoKXtjb25zdCBlPXRoaXMudmlldz8ucXVhbGl0eVNldHRpbmdzLnNjZW5lU2VydmljZS51bmNvbXByZXNzZWRUZXh0dXJlRG93bnNhbXBsaW5nRW5hYmxlZCx0PTA9PSh0aGlzLnN1cHBvcnRlZFRleHR1cmVFbmNvZGluZ3MmeGUuRERTX1MzVEMpO3JldHVybiBlJiZ0fWdldCBjbGllbnRHZW9tZXRyeSgpe3JldHVybiB0aGlzLmkzc092ZXJyaWRlcy5nZW9tZXRyeU92ZXJyaWRlc31nZXQgZWxldmF0aW9uUmFuZ2UoKXtjb25zdCBlPXRoaXMuX25vZGVJZDJNZXRhO2xldCB0PTEvMCxpPS0xLzA7Zm9yKGNvbnN0IHMgb2YgZS52YWx1ZXMoKSl7aWYobnVsbD09cyljb250aW51ZTtjb25zdHtub2RlOnttYnM6ZX19PXMsWyxyLG9dPWU7dD1NYXRoLm1pbih0LHItbyksaT1NYXRoLm1heChpLHIrbyl9cmV0dXJuIE51bWJlci5pc0Zpbml0ZSh0KSYmTnVtYmVyLmlzRmluaXRlKGkpP3ttaW46dCxtYXg6aX06bnVsbH1pbml0aWFsaXplKCl7Y29uc3QgZT1oYXMoXCJlbmFibGUtZmVhdHVyZTppZGItbW9jay1jYWNoZVwiKTt0aGlzLl9pZGJDYWNoZT1lP25ldyBydCh0aGlzLnZpZXcsZSk6bmV3IHN0KFwiZXNyaS1zY2VuZWxheWVyLWNhY2hlXCIsXCJnZW9tZXRyaWVzXCIpLHRoaXMuX3ByZUxvYWRCYXNpcygpLHRoaXMuYWRkUmVzb2x2aW5nUHJvbWlzZSh0aGlzLmkzc2xheWVyLmluZGV4SW5mbyk7Y29uc3QgdD10aGlzLnZpZXcucmVzb3VyY2VDb250cm9sbGVyLGk9dC5tZW1vcnlDb250cm9sbGVyO3RoaXMuaTNzT3ZlcnJpZGVzPW5ldyBHZSh7dmlldzp0aGlzLnZpZXcsbGF5ZXI6dGhpcy5pM3NsYXllcixtZW1vcnlDb250cm9sbGVyOml9KSx0aGlzLl93b3JrZXI9bmV3IG1lKFd0KHQpKSx0aGlzLmFkZFJlc29sdmluZ1Byb21pc2UodGhpcy5fd29ya2VyLnByb21pc2UpO2NvbnN0IHM9dGhpcy5pM3NsYXllci5zdG9yZTt0aGlzLl93b3JrZXIuc2V0TGVnYWN5U2NoZW1hKHRoaXMudWlkLHMuZGVmYXVsdEdlb21ldHJ5U2NoZW1hKSxxZSh0aGlzLmkzc2xheWVyKSx6ZSh0aGlzLmkzc2xheWVyLHRoaXMudmlldyksdGhpcy5fbGF5ZXJVcmw9dGhpcy5pM3NsYXllci5wYXJzZWRVcmwucGF0aCx0aGlzLl9jb250cm9sbGVyPW5ldyByZSh7bGF5ZXJWaWV3OnRoaXMsd29ya2VyOnRoaXMuX3dvcmtlcn0pLHRoaXMuX2dwdU1lbW9yeUVzdGltYXRlPTAsdGhpcy5fdGV4TWVtb3J5RXN0aW1hdGU9MCx0aGlzLl9nZW9NZW1vcnlFc3RpbWF0ZT0wLHRoaXMuX3N0YWdlPXRoaXMudmlldy5fc3RhZ2UsdGhpcy5fY29sbGVjdGlvbj10aGlzLl9zdGFnZS5yZW5kZXJWaWV3LmNvbXBvbmVudE9iamVjdENvbGxlY3Rpb24sdGhpcy5yZXNldEhpZ2hsaWdodHMoKTtjb25zdCByPXMuZGVmYXVsdEdlb21ldHJ5U2NoZW1hO2lmKHRoaXMuX2lzSW50ZWdyYXRlZE1lc2h8fCFyKXRoaXMuX2hhc0NvbXBvbmVudERhdGE9ITE7ZWxzZXtjb25zdCBlPXIuZmVhdHVyZUF0dHJpYnV0ZXM7dGhpcy5faGFzQ29tcG9uZW50RGF0YT0hIShlJiZlLmZhY2VSYW5nZSYmZS5pZCl9dGhpcy5faGFzVmVydGV4Q29sb3JzPW51bGwhPShyPy52ZXJ0ZXhBdHRyaWJ1dGVzLmNvbG9yPz9udWxsKSYmIXRoaXMuaTNzbGF5ZXIuY2FjaGVkRHJhd2luZ0luZm8/LmNvbG9yLHRoaXMuX2lzSW50ZWdyYXRlZE1lc2h8fCh0aGlzLl9lZGdlVmlldz10aGlzLl9zdGFnZS5yZW5kZXJlci5lbnN1cmVFZGdlVmlldygpKTtjb25zdCBvPXRoaXMudmlldy5yZXNvdXJjZUNvbnRyb2xsZXIubWVtb3J5Q29udHJvbGxlci5uZXdDYWNoZShgc2wtJHt0aGlzLnVpZH1gLChlPT50aGlzLl9kZWxldGVDb21wb25lbnRPYmplY3QoZSkpKTt0aGlzLl9tZW1DYWNoZT1vO2NvbnN0IGE9ZT0+bnVsbCE9dGhpcy5fY29udHJvbGxlci5pbmRleD8ucm9vdE5vZGU/dGhpcy5fY29udHJvbGxlci5pbmRleC50cmF2ZXJzZSh0aGlzLl9jb250cm9sbGVyLmluZGV4LnJvb3ROb2RlLCh0PT57Y29uc3QgaT10LmluZGV4LHM9dGhpcy5fbm9kZUlkMk1ldGEuZ2V0KGkpfHx0aGlzLl9ub2RlSWQyTWV0YVJlbG9hZGluZy5nZXQoaSk7cmV0dXJuIGUodCxudWxsIT1zP3Mub2JqZWN0SGFuZGxlOm51bGwpfSkpOigpPT57fTt0aGlzLl9pbnRlcnNlY3Rpb25IYW5kbGVyPW5ldyBEZSh7bGF5ZXJVaWQ6dGhpcy5sYXllclVpZCxzdWJsYXllclVpZDp0aGlzLnN1YmxheWVyVWlkLGNvbGxlY3Rpb246dGhpcy5fY29sbGVjdGlvbixzbGljZVBsYW5lRW5hYmxlZDp0aGlzLnNsaWNlUGxhbmVFbmFibGVkLGlzR3JvdW5kOnRoaXMuX2lzSW50ZWdyYXRlZE1lc2gsdHJhdmVyc2VOb2RlSGllcmFyY2h5OmF9KSx0aGlzLl91cGRhdGluZ0hhbmRsZXMuYWRkKCgoKT0+dGhpcy5sYXllclVpZCksKGU9PnRoaXMuX2ludGVyc2VjdGlvbkhhbmRsZXIubGF5ZXJVaWQ9ZSkpLHRoaXMuX3VwZGF0aW5nSGFuZGxlcy5hZGQoKCgpPT50aGlzLnN1YmxheWVyVWlkKSwoZT0+dGhpcy5faW50ZXJzZWN0aW9uSGFuZGxlci5zdWJsYXllclVpZD1lKSksdGhpcy5fZWxldmF0aW9uUHJvdmlkZXI9bmV3IEFlKHtsYXllclZpZXc6dGhpcyxpbnRlcnNlY3Rpb25IYW5kbGVyOnRoaXMuX2ludGVyc2VjdGlvbkhhbmRsZXJ9KSx0aGlzLl9oYXNMb2FkZWRQQlJUZXh0dXJlcz10aGlzLl91c2VQQlIsdGhpcy5fdXBkYXRpbmdIYW5kbGVzLmFkZCgoKCk9PnRoaXMudmlldy5jbGlwcGluZ0FyZWEpLCgoKT0+dGhpcy5fY2xpcHBpbmdBcmVhQ2hhbmdlZCgpKSxnKSx0aGlzLl91cGRhdGluZ0hhbmRsZXMuYWRkKCgoKT0+dGhpcy5mdWxsT3BhY2l0eSksKGU9PnRoaXMuX29wYWNpdHlDaGFuZ2UoZSkpKSx0aGlzLl91cGRhdGluZ0hhbmRsZXMuYWRkKCgoKT0+dGhpcy5zbGljZVBsYW5lRW5hYmxlZCksKGU9PnRoaXMuX3NsaWNlUGxhbmVFbmFibGVkQ2hhbmdlKGUpKSksdGhpcy5fdXBkYXRpbmdIYW5kbGVzLmFkZCgoKCk9PnRoaXMuZWxldmF0aW9uT2Zmc2V0KSwoKGUsdCk9Pnt0aGlzLl9yZWxvYWRBbGwodCksdGhpcy5fY29udHJvbGxlci5pbnZhbGlkYXRlVmlzaWJpbGl0eU9iYnMoKX0pKSx0aGlzLl91cGRhdGluZ0hhbmRsZXMuYWRkKCgoKT0+dGhpcy5lbGV2YXRpb25JbmZvKSwoKGUsdCk9PnRoaXMuX2VsZXZhdGlvbkluZm9DaGFuZ2VkKGUsdCkpLGcpLHRoaXMuX3VwZGF0aW5nSGFuZGxlcy5hZGQoKCgpPT4hdGhpcy5zdXNwZW5kZWQmJnRoaXMuZWxldmF0aW9uSW5mby5tb2RlIT09QnQuQWJzb2x1dGUpLCgoZSx0KT0+e2U/dGhpcy5hZGRIYW5kbGVzKHRoaXMudmlldy5iYXNlbWFwVGVycmFpbi5vbihcImVsZXZhdGlvbi1jaGFuZ2VcIiwoKHtleHRlbnQ6ZX0pPT50aGlzLl9lbnN1cmVFbGV2YXRpb25UYXNrKCkuYWRkRXh0ZW50KGUpKSksS3QpOnQmJnRoaXMucmVtb3ZlSGFuZGxlcyhLdCl9KSxnKSx0aGlzLl91cGRhdGluZ0hhbmRsZXMuYWRkKCgoKT0+dGhpcy5fdXNlUEJSKSwoZT0+dGhpcy5fdXBkYXRlUEJSKGUpKSk7Y29uc3Qgbj0oKT0+e3RoaXMuX3JlbG9hZEFsbCgpLHRoaXMuY2xlYXJNZW1DYWNoZSgpfTt0aGlzLl91cGRhdGluZ0hhbmRsZXMuYWRkKCgoKT0+dGhpcy5yZW5kZXJlclRleHR1cmVVc2FnZSksbiksdGhpcy5fdXBkYXRpbmdIYW5kbGVzLmFkZCgoKCk9PnRoaXMudW5jb21wcmVzc2VkVGV4dHVyZURvd25zYW1wbGluZ0VuYWJsZWQpLG4pLHRoaXMuX3VwZGF0aW5nSGFuZGxlcy5hZGQoKCgpPT50aGlzLmNvbnRlbnRWaXNpYmxlKSwoZT0+dGhpcy5fY29udGVudFZpc2libGVDaGFuZ2VkKGUpKSxnKSx0aGlzLl91cGRhdGluZ0hhbmRsZXMuYWRkKCgoKT0+dGhpcy5pM3NsYXllci5sYWJlbHNWaXNpYmxlKSwoKCk9PnRoaXMuX2xhYmVsaW5nQ2hhbmdlZCgpKSxnKSx0aGlzLl91cGRhdGluZ0hhbmRsZXMuYWRkKCgoKT0+dGhpcy5pM3NsYXllci5sYWJlbGluZ0luZm8pLCgoKT0+dGhpcy5fbGFiZWxpbmdDaGFuZ2VkKCkpLGcpLHRoaXMuX3VwZGF0aW5nSGFuZGxlcy5hZGQoKCgpPT50aGlzLl9tb2RpZmljYXRpb25zKSwoKCk9PnRoaXMuX21vZGlmaWNhdGlvbnNDaGFuZ2VkKCkpLGcpLHRoaXMuYWRkSGFuZGxlcyhbcCgoKCk9Pm50LkkzU19UUkVFX1NIT1dfVElMRVMpLChlPT57aWYoZSYmIXRoaXMuX3RyZWVEZWJ1Z2dlcil7Y29uc3QgZT10aGlzLl9jb250cm9sbGVyLmNyc0luZGV4O2ltcG9ydChcIi4vc3VwcG9ydC9JM1NUcmVlRGVidWdnZXIuanNcIikudGhlbigoKHtJM1NUcmVlRGVidWdnZXI6dH0pPT57IXRoaXMuX3RyZWVEZWJ1Z2dlciYmbnQuSTNTX1RSRUVfU0hPV19USUxFUyYmKHRoaXMuX3RyZWVEZWJ1Z2dlcj1uZXcgdCh7bHY6dGhpcyx2aWV3OnRoaXMudmlldyxub2RlU1I6ZX0pKX0pKX1lbHNlIGV8fG50LkkzU19UUkVFX1NIT1dfVElMRVN8fCh0aGlzLl90cmVlRGVidWdnZXI9aCh0aGlzLl90cmVlRGVidWdnZXIpKX0pLGcpLHAoKCgpPT5udC5JM1NfU0hPV19NT0RJRklDQVRJT05TKSwoKCk9PnRoaXMuX3Nob3dNb2RpZmljYXRpb25zKCkpLGcpXSksdGhpcy5fY2FjaGVLZXlTdWZmaXg9S2UodGhpcy5pM3NsYXllci5zcGF0aWFsUmVmZXJlbmNlLHRoaXMudmlldy5yZW5kZXJTcGF0aWFsUmVmZXJlbmNlKSx0aGlzLl9pZGJDYWNoZS5pbml0KCkuY2F0Y2goKGU9PnZ0Lndhcm4oYEZhaWxlZCB0byBpbml0aWFsaXplIEluZGV4ZWREQiBjYWNoZTogJHtlfWApKSl9ZGVzdHJveSgpe3RoaXMuX2NsZWFyQWRkVGFza3MoKSx0aGlzLl9lbGV2YXRpb25UYXNrPWgodGhpcy5fZWxldmF0aW9uVGFzayksdGhpcy5pM3NPdmVycmlkZXM9aCh0aGlzLmkzc092ZXJyaWRlcyksdGhpcy5fZWxldmF0aW9uUHJvdmlkZXImJih0aGlzLl9lbGV2YXRpb25Qcm92aWRlci5sYXllckNoYW5nZWQoKSx0aGlzLnZpZXcuZWxldmF0aW9uUHJvdmlkZXIudW5yZWdpc3Rlcih0aGlzLl9lbGV2YXRpb25Qcm92aWRlciksdGhpcy5fZWxldmF0aW9uUHJvdmlkZXI9bnVsbCksdGhpcy5faW50ZXJzZWN0aW9uSGFuZGxlciYmKHRoaXMuX3N0YWdlLnZpZXcuc2NlbmVJbnRlcnNlY3Rpb25IZWxwZXIucmVtb3ZlSW50ZXJzZWN0aW9uSGFuZGxlcih0aGlzLl9pbnRlcnNlY3Rpb25IYW5kbGVyKSx0aGlzLl9pbnRlcnNlY3Rpb25IYW5kbGVyPW51bGwpO2NvbnN0IGU9dGhpcy5fd29ya2VyO2UmJihlLmRlc3Ryb3lDb250ZXh0KHRoaXMudWlkKS50aGVuKCgoKT0+ZS5kZXN0cm95KCkpKSx0aGlzLl93b3JrZXI9bnVsbCksdGhpcy5fcmVtb3ZlQWxsTm9kZURhdGFGcm9tU3RhZ2UoKSx0aGlzLl9tZW1DYWNoZT1oKHRoaXMuX21lbUNhY2hlKSx0aGlzLl9jb2xsZWN0aW9uPW51bGwsdGhpcy5fc3RhZ2U9bnVsbCx0aGlzLl9lZGdlVmlldz1udWxsLHRoaXMuX2xhYmVsZXI9aCh0aGlzLl9sYWJlbGVyKSx0aGlzLl90cmVlRGVidWdnZXI9aCh0aGlzLl90cmVlRGVidWdnZXIpLHRoaXMuX2NvbnRyb2xsZXI9aCh0aGlzLl9jb250cm9sbGVyKSx0aGlzLl9oaWdobGlnaHRzLmRlc3Ryb3koKSx0aGlzLl9ub2RlSWQyTWV0YS5jbGVhcigpLHRoaXMuX25vZGVJZDJNZXRhUmVsb2FkaW5nLmNsZWFyKCksdGhpcy5fY3Jvc3NmYWRlSGVscGVyPWgodGhpcy5fY3Jvc3NmYWRlSGVscGVyKSx0aGlzLmVtaXQoXCJ2aXNpYmxlLWdlb21ldHJ5LWNoYW5nZWRcIiksdGhpcy5fdmlzaWJsZUdlb21ldHJ5Q2hhbmdlZFNjaGVkdWxlckhhbmRsZSYmKHRoaXMuX3Zpc2libGVHZW9tZXRyeUNoYW5nZWRTY2hlZHVsZXJIYW5kbGUucmVtb3ZlKCksdGhpcy5fdmlzaWJsZUdlb21ldHJ5Q2hhbmdlZFNjaGVkdWxlckhhbmRsZT1udWxsKSx0aGlzLl91cGRhdGluZ0hhbmRsZXM9aCh0aGlzLl91cGRhdGluZ0hhbmRsZXMpfV9tZW1Fc3RpbWF0ZVRleHR1cmVBZGRlZChlKXtjb25zdCB0PWUubWVtb3J5RXN0aW1hdGU7cmV0dXJuIHRoaXMuX2dwdU1lbW9yeUVzdGltYXRlKz10LHRoaXMuX3RleE1lbW9yeUVzdGltYXRlKz10LHR9X21lbUVzdGltYXRlVGV4dHVyZVJlbW92ZWQoZSl7aWYobnVsbCE9ZSl7Y29uc3QgdD1lLm1lbW9yeUVzdGltYXRlO3RoaXMuX2dwdU1lbW9yeUVzdGltYXRlLT10LHRoaXMuX3RleE1lbW9yeUVzdGltYXRlLT10fX1fbWVtRXN0aW1hdGVHZW9tZXRyeUFkZGVkKGUpe2NvbnN0IHQ9dGhpcy5fY29sbGVjdGlvbi5nZXRPYmplY3RHUFVNZW1vcnlVc2FnZShlKTtyZXR1cm4gdGhpcy5fZ3B1TWVtb3J5RXN0aW1hdGUrPXQsdGhpcy5fZ2VvTWVtb3J5RXN0aW1hdGUrPXQsdH1fbWVtRXN0aW1hdGVHZW9tZXRyeVJlbW92ZWQoZSl7Y29uc3QgdD10aGlzLl9jb2xsZWN0aW9uLmdldE9iamVjdEdQVU1lbW9yeVVzYWdlKGUpO3RoaXMuX2dwdU1lbW9yeUVzdGltYXRlLT10LHRoaXMuX2dlb01lbW9yeUVzdGltYXRlLT10fWlzTm9kZUxvYWRlZChlKXtyZXR1cm4gdGhpcy5fbm9kZUlkMk1ldGEuaGFzKGUpfWlzTm9kZVJlbG9hZGluZyhlKXtyZXR1cm4gdGhpcy5fbm9kZUlkMk1ldGFSZWxvYWRpbmcuaGFzKGUpfWdldCB1c2VkTWVtb3J5KCl7bGV0IGU9bnVsbCE9dGhpcy5fbGFiZWxlcj90aGlzLl9sYWJlbGVyLnVzZWRNZW1vcnk6MDtyZXR1cm4gdGhpcy5fbm9kZUlkMk1ldGEuZm9yRWFjaCgodD0+ZSs9bnVsbCE9dD90Lm5vZGUubWVtb3J5OjApKSx0aGlzLl9ub2RlSWQyTWV0YVJlbG9hZGluZy5mb3JFYWNoKCh0PT5lKz1udWxsIT10P3Qubm9kZS5tZW1vcnk6MCkpLGV9Z2V0IHVubG9hZGVkTWVtb3J5KCl7cmV0dXJuKG51bGwhPXRoaXMuX2NvbnRyb2xsZXI/dGhpcy5fY29udHJvbGxlci51bmxvYWRlZE1lbW9yeUVzdGltYXRlOjApKyhudWxsIT10aGlzLl9sYWJlbGVyP3RoaXMuX2xhYmVsZXIudW5sb2FkZWRNZW1vcnlFc3RpbWF0ZTowKX1fbGFiZWxpbmdDaGFuZ2VkKCl7aWYoIShDZSh0aGlzLmkzc2xheWVyKSYmdGhpcy5fc3VwcG9ydHNMYWJlbGluZykpcmV0dXJuIHZvaWQobnVsbCE9dGhpcy5fbGFiZWxlciYmKHRoaXMuX2xhYmVsZXIuZGVzdHJveSgpLHRoaXMuX2xhYmVsZXI9bnVsbCkpO2lmKG51bGwhPXRoaXMuX2xhYmVsZXIpcmV0dXJuO2NvbnN0IGU9bmV3IF9lKHt2aWV3OnRoaXMudmlldyxsYXllcjp0aGlzLmkzc2xheWVyLGNvbGxlY3Rpb246dGhpcy5fY29sbGVjdGlvbixvdmVycmlkZXM6dGhpcy5pM3NPdmVycmlkZXN9KTt0aGlzLl9ub2RlSWQyTWV0YS5mb3JFYWNoKCh0PT5udWxsIT10JiZ0aGlzLl9hZGRNZXRhVG9MYWJlbGVyKGUsdCkpKSx0aGlzLl9sYWJlbGVyPWV9X2xvYWRBc3luY01vZHVsZShlKXtyZXR1cm4rK3RoaXMuX2FzeW5jTW9kdWxlTG9hZGluZyxlLnRoZW4oKGU9PigtLXRoaXMuX2FzeW5jTW9kdWxlTG9hZGluZyxlKSksKGU9Pnt0aHJvdy0tdGhpcy5fYXN5bmNNb2R1bGVMb2FkaW5nLGV9KSl9X21vZGlmaWNhdGlvbnNDaGFuZ2VkKCl7aWYoIXRoaXMuX2kzc1dhc21Mb2FkZWQmJnRoaXMuaGFzTW9kaWZpY2F0aW9ucylyZXR1cm4gdGhpcy5faTNzV2FzbUxvYWRlZD1iZSgpLnRoZW4oKCgpPT57dGhpcy5faTNzV2FzbUxvYWRlZD0hMCx0aGlzLl9tb2RpZmljYXRpb25zQ2hhbmdlZCgpLHRoaXMubm90aWZ5VXBkYXRlKCl9KSksdm9pZCB0aGlzLm5vdGlmeVVwZGF0ZSgpO2lmKCEwIT09dGhpcy5faTNzV2FzbUxvYWRlZClyZXR1cm47Y29uc3QgZT10aGlzLnVpZCx0PXRoaXMuaTNzbGF5ZXIuc3BhdGlhbFJlZmVyZW5jZTt0aGlzLl93b3JrZXIuc2V0TW9kaWZpY2F0aW9ucyhlLHRoaXMuX2xheWVyQ2xpcHBpbmdBcmVhLHRoaXMuX21vZGlmaWNhdGlvbnMsdCk7Y29uc3QgaT1nZSh0aGlzLl9sYXllckNsaXBwaW5nQXJlYSx0aGlzLl9tb2RpZmljYXRpb25zLHQpO3llKHtjb250ZXh0OmUsbW9kaWZpY2F0aW9uczppLGlzR2VvZGV0aWM6dC5pc0dlb2dyYXBoaWN9KSx0aGlzLl9jb250cm9sbGVyLm1vZGlmaWNhdGlvbnNDaGFuZ2VkKCk7Y29uc3Qgcz10aGlzLmhhc01vZGlmaWNhdGlvbnM/bmV3IGM6bnVsbDt0aGlzLl9ub2RlSWQyTWV0YS5mb3JFYWNoKCgoZSx0KT0+e251bGw9PWU/KHRoaXMuX25vZGVJZDJNZXRhLmRlbGV0ZSh0KSx0aGlzLl9jb250cm9sbGVyLnVwZGF0ZUxvYWRTdGF0dXModCwhMSkpOmUubm9kZS5oYXNNb2RpZmljYXRpb25zPyh0aGlzLl9ub2RlSWQyTWV0YS5kZWxldGUodCksdGhpcy5fbm9kZUlkMk1ldGFSZWxvYWRpbmcuc2V0KHQsZSkpOm51bGwhPXMmJnMucHVzaChlLm5vZGUpfSkpLHRoaXMubm90aWZ5Q2hhbmdlKFwiZWxldmF0aW9uUmFuZ2VcIiksbnVsbCE9cyYmdGhpcy5fbm9kZUlkMk1ldGFSZWxvYWRpbmcuZm9yRWFjaCgoZT0+cy5wdXNoKGUubm9kZSkpKSxudWxsIT1zJiZzLmxlbmd0aD4wJiYodGhpcy51cGRhdGVOb2RlTW9kaWZpY2F0aW9uU3RhdHVzKHMpLHMuZm9yQWxsKChlPT57aWYoZS5pbU1vZGlmaWNhdGlvbkltcGFjdCE9PUhlLkN1bGxlZCl7Y29uc3QgdD10aGlzLl9ub2RlSWQyTWV0YS5nZXQoZS5pbmRleCk7dGhpcy5fY29udHJvbGxlci5pbnZhbGlkYXRlR2VvbWV0cnlWaXNpYmlsaXR5KGUuaW5kZXgpLG51bGwhPXQ/KHRoaXMuX25vZGVJZDJNZXRhLmRlbGV0ZShlLmluZGV4KSx0aGlzLl9ub2RlSWQyTWV0YVJlbG9hZGluZy5zZXQoZS5pbmRleCx0KSx0aGlzLm5vdGlmeUNoYW5nZShcImVsZXZhdGlvblJhbmdlXCIpKTp0aGlzLl9ub2RlSWQyTWV0YS5oYXMoZS5pbmRleCkmJih0aGlzLl9ub2RlSWQyTWV0YS5kZWxldGUoZS5pbmRleCksdGhpcy5fY29udHJvbGxlci51cGRhdGVMb2FkU3RhdHVzKGUuaW5kZXgsITEpKX19KSkpLHRoaXMuY2xlYXJNZW1DYWNoZSgpLHRoaXMuX2NvbnRyb2xsZXIucmVzdGFydE5vZGVMb2FkaW5nKCksdGhpcy5fc2hvd01vZGlmaWNhdGlvbnMoKX1fc2hvd01vZGlmaWNhdGlvbnMoKXtpZihudWxsIT10aGlzLl9tb2RpZmljYXRpb25HcmFwaGljcyYmKHRoaXMudmlldy5ncmFwaGljcy5yZW1vdmVNYW55KHRoaXMuX21vZGlmaWNhdGlvbkdyYXBoaWNzKSx0aGlzLl9tb2RpZmljYXRpb25HcmFwaGljcz1udWxsKSwhbnQuSTNTX1NIT1dfTU9ESUZJQ0FUSU9OU3x8MD09PXRoaXMuX21vZGlmaWNhdGlvbnMubGVuZ3RoKXJldHVybjtjb25zdCBlPXtjbGlwOlsyMjcsMjI3LDc5LC44XSxtYXNrOlsyMjcsMTM5LDc5LC44XSxyZXBsYWNlOlsxMzksMjI3LDc5LC44XX0sdD17dHlwZTpcInNpbXBsZS1maWxsXCIsb3V0bGluZTp7Y29sb3I6WzI1NSwyNTUsMjU1XSx3aWR0aDoxfX07dGhpcy5fbW9kaWZpY2F0aW9uR3JhcGhpY3M9bmV3IEFycmF5O2Zvcihjb25zdCBzIG9mIHRoaXMuX21vZGlmaWNhdGlvbnMpe2NvbnN0IHI9cy5nZW9tZXRyeTtyLnNwYXRpYWxSZWZlcmVuY2U9dGhpcy5pM3NsYXllci5zcGF0aWFsUmVmZXJlbmNlO2NvbnN0IG89ey4uLnQsY29sb3I6ZVtzLnR5cGVdfTt0aGlzLl9tb2RpZmljYXRpb25HcmFwaGljcy5wdXNoKG5ldyBpKHtnZW9tZXRyeTpyLHN5bWJvbDpvfSkpfXRoaXMudmlldy5ncmFwaGljcy5hZGRNYW55KHRoaXMuX21vZGlmaWNhdGlvbkdyYXBoaWNzKX1fYWRkTWV0YVRvTGFiZWxlcihlLHQpe2UuYWRkTm9kZU1ldGEodCwoKGUsdCk9PnRoaXMuX2NyZWF0ZUF0dHJpYnV0ZXMoZSx0KSkpfV9jb250ZW50VmlzaWJsZUNoYW5nZWQoZSl7ZT8odGhpcy52aWV3LmVsZXZhdGlvblByb3ZpZGVyLnJlZ2lzdGVyKHRoaXMuX2VsZXZhdGlvbkNvbnRleHQsdGhpcy5fZWxldmF0aW9uUHJvdmlkZXIpLHRoaXMuX3N0YWdlLnZpZXcuc2NlbmVJbnRlcnNlY3Rpb25IZWxwZXIuYWRkSW50ZXJzZWN0aW9uSGFuZGxlcih0aGlzLl9pbnRlcnNlY3Rpb25IYW5kbGVyKSk6KHRoaXMuX3JlbW92ZUFsbE5vZGVEYXRhRnJvbVN0YWdlKCksdGhpcy52aWV3LmVsZXZhdGlvblByb3ZpZGVyJiZ0aGlzLnZpZXcuZWxldmF0aW9uUHJvdmlkZXIudW5yZWdpc3Rlcih0aGlzLl9lbGV2YXRpb25Qcm92aWRlciksdGhpcy5fc3RhZ2Uudmlldy5zY2VuZUludGVyc2VjdGlvbkhlbHBlci5yZW1vdmVJbnRlcnNlY3Rpb25IYW5kbGVyKHRoaXMuX2ludGVyc2VjdGlvbkhhbmRsZXIpKX1nZXRMb2FkZWRBdHRyaWJ1dGVzKGUpe2NvbnN0IHQ9dGhpcy5fbm9kZUlkMk1ldGEuZ2V0KGUpO2lmKG51bGwhPXQ/LmF0dHJpYnV0ZUluZm8pcmV0dXJuIHQuYXR0cmlidXRlSW5mby5sb2FkZWRBdHRyaWJ1dGVzfWdldEF0dHJpYnV0ZURhdGEoZSl7Y29uc3QgdD10aGlzLl9ub2RlSWQyTWV0YS5nZXQoZSk7aWYobnVsbCE9dD8uYXR0cmlidXRlSW5mbylyZXR1cm4gdC5hdHRyaWJ1dGVJbmZvLmF0dHJpYnV0ZURhdGF9c2V0QXR0cmlidXRlRGF0YShlLHQpe2NvbnN0IGk9dGhpcy5fbm9kZUlkMk1ldGEuZ2V0KGUpO251bGwhPWk/LmF0dHJpYnV0ZUluZm8mJihpLmF0dHJpYnV0ZUluZm8uYXR0cmlidXRlRGF0YT10LHRoaXMuX2F0dHJpYnV0ZVZhbHVlc0NoYW5nZWQoaSkpfWFzeW5jIHVwZGF0ZUF0dHJpYnV0ZXMoZSx0LGkpe2NvbnN0IHM9dGhpcy5fbm9kZUlkMk1ldGEuZ2V0KGUpO251bGwhPXMmJihhd2FpdCB0aGlzLmkzc092ZXJyaWRlcy5hcHBseUF0dHJpYnV0ZU92ZXJyaWRlcyhzLmZlYXR1cmVJZHMsdCxpLHRoaXMuX2NvbnRyb2xsZXIucmVxdWlyZWRBdHRyaWJ1dGVzKSxzLmF0dHJpYnV0ZUluZm89dCx0aGlzLl9jb250cm9sbGVyLnJlc2NoZWR1bGUoKCgpPT50aGlzLl9hdHRyaWJ1dGVWYWx1ZXNDaGFuZ2VkKHMpKSxpKS5jYXRjaCgoZT0+e3UoZSl8fHZ0Lndhcm4oXCJFcnJvciB3aGlsZSB1cGRhdGluZyBhdHRyaWJ1dGUgdmFsdWVzLiBMYXllciBtaWdodCBub3QgZGlzcGxheSBjb3JyZWN0bHkuXCIsZSl9KSkpfV9hdHRyaWJ1dGVWYWx1ZXNDaGFuZ2VkKGUpe2UuY2FjaGVkUmVuZGVyZXJWZXJzaW9uPXRoaXMuX2dldEludmFsaWRSZW5kZXJlclZlcnNpb24oKSxlLmZpbHRlcmVkSWRzPW51bGwsbnVsbCE9dGhpcy5fbGFiZWxlciYmdGhpcy5fbGFiZWxlci5zZXROb2RlTWV0YUF0dHJpYnV0ZXMoZSwoKGUsdCk9PnRoaXMuX2NyZWF0ZUF0dHJpYnV0ZXMoZSx0KSkpLHRoaXMuX3VwZGF0ZUVuZ2luZU9iamVjdChlKX1jbGVhck1lbUNhY2hlKCl7bnVsbCE9dGhpcy5fbWVtQ2FjaGUmJnRoaXMuX21lbUNhY2hlLmNsZWFyKCl9Z2V0VmlzaWJsZU5vZGVzKCl7Y29uc3QgZT1uZXcgQXJyYXk7cmV0dXJuIHRoaXMuX25vZGVJZDJNZXRhLmZvckVhY2goKHQ9Pm51bGwhPXQmJmUucHVzaCh0Lm5vZGUpKSksZX1nZXROb2RlQ29tcG9uZW50T2JiKGUpe2NvbnN0IHQ9dGhpcy5fbm9kZUlkMk1ldGEuZ2V0KGUuaW5kZXgpPz90aGlzLl9ub2RlSWQyTWV0YVJlbG9hZGluZy5nZXQoZS5pbmRleCk7cmV0dXJuIG51bGwhPXQ/dGhpcy5fY29sbGVjdGlvbi5nZXRDb21wb25lbnRPYmIodC5vYmplY3RIYW5kbGUpOm51bGx9Z2V0TG9hZGVkTm9kZUluZGljZXMoZSl7dGhpcy5fbm9kZUlkMk1ldGEuZm9yRWFjaCgoKHQsaSk9PmUucHVzaChpKSkpLHRoaXMuX25vZGVJZDJNZXRhUmVsb2FkaW5nLmZvckVhY2goKCh0LGkpPT5lLnB1c2goaSkpKX1fcHJlTG9hZEJhc2lzKCl7IWhhcyhcImRpc2FibGUtZmVhdHVyZTppM3MtYmFzaXNcIikmJjAhPSh0aGlzLnN1cHBvcnRlZFRleHR1cmVFbmNvZGluZ3MmeGUuQmFzaXMpJiZ0aGlzLmkzc2xheWVyLnRleHR1cmVTZXREZWZpbml0aW9ucz8uc29tZSgoZT0+ZS5mb3JtYXRzLnNvbWUoKGU9PlwiYmFzaXNcIj09PWUuZm9ybWF0fHxcImt0eDJcIj09PWUuZm9ybWF0KSkpKSYmZnQoKX1fZ2V0VmVydGV4QnVmZmVyTGF5b3V0KGUsdCl7Y29uc3QgaT17aGFzVGV4dHVyZTpWdChlLnBhcmFtcy5tYXRlcmlhbCksaGFzTm9ybWFsczp0Lm5vcm1hbCxoYXNSZWdpb25zOnQudXZSZWdpb259O3JldHVybiBfdChndCh0aGlzLl9nZXRHZW9tZXRyeVBhcmFtZXRlcnMoaSkpKX1fZ2V0T2JqZWN0SWRGaWVsZCgpe3JldHVybiB0aGlzLmkzc2xheWVyLm9iamVjdElkRmllbGR8fHNlfV9nZXRHbG9iYWxJZEZpZWxkKCl7cmV0dXJuIHRoaXMuaTNzbGF5ZXIuYXNzb2NpYXRlZExheWVyPy5nbG9iYWxJZEZpZWxkfV9maW5kR3JhcGhpY05vZGVBbmRJbmRleChlKXtjb25zdCB0PW90KHRoaXMuaTNzbGF5ZXIuZmllbGRzSW5kZXgsZS5hdHRyaWJ1dGVzLHRoaXMuX2dldE9iamVjdElkRmllbGQoKSk7bGV0IGk9bnVsbDtyZXR1cm4gZCh0aGlzLl9ub2RlSWQyTWV0YSwoZT0+e2lmKG51bGw9PWUpcmV0dXJuITE7Y29uc3Qgcz1lLmZlYXR1cmVJZHMuaW5kZXhPZih0KTtyZXR1cm4tMSE9PXMmJihpPXtub2RlOmUubm9kZSxpbmRleDpzfSwhMCl9KSksaX1fZ2V0R3JhcGhpY0luZGljZXMoZSx0KXtjb25zdCBpPXRoaXMuX25vZGVJZDJNZXRhLmdldChlLmluZGV4KTtpZihudWxsPT1pKXJldHVybltdO2NvbnN0IHM9W10scj10aGlzLl9nZXRPYmplY3RJZEZpZWxkKCksbz10aGlzLmkzc2xheWVyLmZpZWxkc0luZGV4O2Zvcihjb25zdCBhIG9mIHQpe2NvbnN0IGU9b3QobyxhLmF0dHJpYnV0ZXMsciksdD1pLmZlYXR1cmVJZHMuaW5kZXhPZihlKTstMSE9PXQmJnMucHVzaCh0KX1yZXR1cm4gc313aGVuR3JhcGhpY0JvdW5kcyhlKXtjb25zdCB0PXRoaXMuX2ZpbmRHcmFwaGljTm9kZUFuZEluZGV4KGUpO2lmKCF0KXJldHVybiBQcm9taXNlLnJlamVjdCgpO2NvbnN0IGk9dGhpcy5fZ2V0QUFCQih0Lm5vZGUuaW5kZXgsdC5pbmRleCk7cmV0dXJuIG51bGw9PWk/UHJvbWlzZS5yZWplY3QoKTpQcm9taXNlLnJlc29sdmUoe2JvdW5kaW5nQm94Omksc2NyZWVuU3BhY2VPYmplY3RzOltdfSl9Z2V0QUFCQkZyb21JbnRlcnNlY3RvclRhcmdldChlKXtyZXR1cm4gbnVsbD09ZS5ub2RlSW5kZXh8fG51bGw9PWUuY29tcG9uZW50SW5kZXg/bnVsbDp0aGlzLl9nZXRBQUJCKGUubm9kZUluZGV4LGUuY29tcG9uZW50SW5kZXgpfV9nZXRBQUJCKGUsdCl7Y29uc3QgaT10aGlzLl9ub2RlSWQyTWV0YS5nZXQoZSk7aWYobnVsbD09aT8uZmVhdHVyZUlkc3x8dD49aS5mZWF0dXJlSWRzLmxlbmd0aClyZXR1cm4gbnVsbDtjb25zdCBzPWkub2JqZWN0SGFuZGxlLHI9VGUodCx0aGlzLl9jb2xsZWN0aW9uLHMsSigyNCksMCksbz10aGlzLnZpZXcucmVuZGVyU3BhdGlhbFJlZmVyZW5jZSxhPXRoaXMudmlldy5zcGF0aWFsUmVmZXJlbmNlO2lmKCFCKHIsbywwLHIsYSwwLDgpKXJldHVybiBudWxsO2NvbnN0IG49VygpO3JldHVybiAkKG4sciwwLDgpLG59d2hlbkdyYXBoaWNBdHRyaWJ1dGVzKGUsdCl7cmV0dXJuIFdlKHRoaXMuaTNzbGF5ZXIsZSx0aGlzLl9nZXRPYmplY3RJZEZpZWxkKCksdCwoKCk9PlsuLi50aGlzLl9ub2RlSWQyTWV0YS52YWx1ZXMoKV0uZmlsdGVyKHMpKSl9Z2V0R3JhcGhpY0Zyb21JbnRlcnNlY3RvclRhcmdldChlKXtpZihudWxsPT1lLm5vZGVJbmRleHx8bnVsbD09ZS5jb21wb25lbnRJbmRleClyZXR1cm4gbnVsbDtjb25zdCB0PXRoaXMuX25vZGVJZDJNZXRhLmdldChlLm5vZGVJbmRleCk7cmV0dXJuIG51bGw9PXQ/LmZlYXR1cmVJZHN8fGUuY29tcG9uZW50SW5kZXg+PXQuZmVhdHVyZUlkcy5sZW5ndGg/bnVsbDp0aGlzLl9jcmVhdGVHcmFwaGljKGUuY29tcG9uZW50SW5kZXgsdCl9X2dldENhY2hlS2V5KGUpe3JldHVybmAke3RoaXMuX2xheWVyVXJsfS92JHtPdH0vJHtlfSR7dGhpcy5fY2FjaGVLZXlTdWZmaXh9YH1fZ2V0TWVtQ2FjaGVLZXkoZSx0PXRoaXMuZWxldmF0aW9uT2Zmc2V0KXtyZXR1cm4gZStcIiNcIit0fWdldCBfaWRiQ2FjaGVFbmFibGVkKCl7cmV0dXJuIXRoaXMuX2NvbnRyb2xsZXIuZGlzYWJsZUlEQkNhY2hlJiYhdGhpcy5oYXNNb2RpZmljYXRpb25zJiYwPT09dGhpcy5lbGV2YXRpb25PZmZzZXQmJm51bGwhPXRoaXMuX2NhY2hlS2V5U3VmZml4fWxvYWRDYWNoZWRHUFVEYXRhKGUpe3JldHVybiBudWxsIT10aGlzLl9tZW1DYWNoZT90aGlzLl9tZW1DYWNoZS5wb3AodGhpcy5fZ2V0TWVtQ2FjaGVLZXkoZSkpOm51bGx9ZGVsZXRlQ2FjaGVkR1BVRGF0YShlKXtudWxsIT1lJiZ0aGlzLl9kZWxldGVDb21wb25lbnRPYmplY3QoZSl9X2NhY2hlR1BVRGF0YShlLHQ9dGhpcy5lbGV2YXRpb25PZmZzZXQpe2lmKG51bGw9PXRoaXMuX21lbUNhY2hlKXJldHVybiB2b2lkIHRoaXMuX2RlbGV0ZUNvbXBvbmVudE9iamVjdChlKTtjb25zdCBpPXRoaXMuX2NvbnRyb2xsZXIuaW5kZXhEZXB0aC1lLm5vZGUubGV2ZWw7dGhpcy5fbWVtQ2FjaGUucHV0KHRoaXMuX2dldE1lbUNhY2hlS2V5KGUubm9kZS5pbmRleCx0KSxlLGUubm9kZS5tZW1vcnksaSl9bG9hZE1pc3NpbmdUZXh0dXJlcyhlLHQsaSxzKXtjb25zdCByPWU/LmZpbHRlcigoKGUsaSk9PntpZigwPT0oZS51c2FnZSZ0aGlzLnJlbmRlcmVyVGV4dHVyZVVzYWdlKSlyZXR1cm4hMTtpZihudWxsPT10KXJldHVybiEwO2NvbnN0IHM9TmUoZS5lbmNvZGluZ3MsdGhpcy5zdXBwb3J0ZWRUZXh0dXJlRW5jb2RpbmdzKSxyPXRbaV07cmV0dXJuISEobnVsbD09cj8uZGF0YXx8cyYmci5lbmNvZGluZyE9PXMuZW5jb2RpbmcpfSkpPz9bXTtyZXR1cm4gMD09PXIubGVuZ3RoP1Byb21pc2UucmVzb2x2ZSghMSk6aShyLHMpLnRoZW4oKGk9PntsZXQgcz0wO2ZvcihsZXQgcj0wO3I8ZS5sZW5ndGg7cisrKXM8aS5sZW5ndGgmJmlbc10uaWQ9PT1lW3JdLmlkJiYodFtyXT1pW3NdLHMrKyk7cmV0dXJuITB9KSl9bG9hZENhY2hlZE5vZGVEYXRhKGUsdCxpKXtyZXR1cm4gdGhpcy5faWRiQ2FjaGVFbmFibGVkP3RoaXMuX2lkYkNhY2hlLmdldCh0aGlzLl9nZXRDYWNoZUtleShlLmlkKSx0KS50aGVuKChzPT5udWxsPT1zP251bGw6cy5ub2RlVmVyc2lvbiE9PWUudmVyc2lvbj8odGhpcy5faWRiQ2FjaGUucmVtb3ZlKHRoaXMuX2dldENhY2hlS2V5KGUuaWQpKSxudWxsKToodGhpcy5lbGV2YXRpb25JbmZvLm1vZGU9PT1CdC5BYnNvbHV0ZSYmKGUuZ2VvbWV0cnlPYmI9cy5nZW9tZXRyeU9iYiksdGhpcy5sb2FkTWlzc2luZ1RleHR1cmVzKHMucmVxdWlyZWRUZXh0dXJlcyxzLnRleHR1cmVEYXRhLGksdCkudGhlbigoaT0+KGkmJnRoaXMuX2lkYkNhY2hlLmluaXRpYWxpemVkJiZudWxsIT1zLnRleHR1cmVEYXRhJiYocy5ieXRlU2l6ZT1VdChzLnRyYW5zZm9ybWVkR2VvbWV0cnkscy50ZXh0dXJlRGF0YSkscy50ZXh0dXJlRGF0YS5ldmVyeShIdCkmJkd0KGUscykmJnRoaXMuX2lkYkNhY2hlLnB1dCh0aGlzLl9nZXRDYWNoZUtleShlLmlkKSxzKS5jYXRjaCgodD0+dnQud2FybihgRmFpbGVkIHRvIHVwZGF0ZSBub2RlIHdpdGggdGV4dHVyZXMgaW4gSW5kZXhlZERCIGNhY2hlOiAke2UuaWR9OiAke3R9YCkpKSksXyh0KSxzKSkpKSkpOlByb21pc2UucmVzb2x2ZShudWxsKX1hZGROb2RlKGUsdCxpKXtyZXR1cm4gUHQodCk/bnVsbD09dC5nZW9tZXRyeUJ1ZmZlcj8odGhpcy5fYWRkTm9kZU1ldGEoZS5pbmRleCxudWxsKSxQcm9taXNlLnJlc29sdmUoKSk6dGhpcy5fYWRkRGF0YShlLHQuYXR0cmlidXRlRGF0YUluZm8sKCgpPT50aGlzLl90cmFuc2Zvcm1Ob2RlKGUsdCxpKS50aGVuKChzPT50aGlzLl9zYWZlUmVzY2hlZHVsZSgoKCk9PntpZihudWxsPT1zKXJldHVybiBlLmhhc01vZGlmaWNhdGlvbnM9ITEsdGhpcy5fYWRkQ2FjaGVkTm9kZURhdGEoZSxudWxsLGkpO2UuaGFzTW9kaWZpY2F0aW9ucz1zLnRyYW5zZm9ybWVkR2VvbWV0cnkuaGFzTW9kaWZpY2F0aW9ucztjb25zdHtvYmI6cixjb21wb25lbnRPZmZzZXRzOm8sZmVhdHVyZUlkczphLGFuY2hvcklkczpuLGFuY2hvcnM6bCx0cmFuc2Zvcm1lZEdlb21ldHJ5OmR9PXMsaD10aGlzLl9jb250cm9sbGVyLmNyc0luZGV4LGM9dGhpcy52aWV3LnJlbmRlclNwYXRpYWxSZWZlcmVuY2UsdT1MZShlLm1icyx0aGlzLmVsZXZhdGlvbk9mZnNldCxoLGMpLF89ZHQoW3IuY2VudGVyLngsci5jZW50ZXIueSxyLmNlbnRlci56XSxbci5leHRlbnRzLngsci5leHRlbnRzLnksci5leHRlbnRzLnpdLHcoci5vcmllbnRhdGlvbi54LHIub3JpZW50YXRpb24ueSxyLm9yaWVudGF0aW9uLnosci5vcmllbnRhdGlvbi53KSk7UyhfLmNlbnRlcixfLmNlbnRlcix1KSx0aGlzLmVsZXZhdGlvbkluZm8ubW9kZT09PUJ0LkFic29sdXRlJiYoZS5nZW9tZXRyeU9iYj1fKSx0Lmdlb21ldHJ5RGF0YS5jb21wb25lbnRPZmZzZXRzPW8sYSYmKHQuZ2VvbWV0cnlEYXRhLmZlYXR1cmVJZHM9QXJyYXkuZnJvbShhKSksdC5nZW9tZXRyeURhdGEuYW5jaG9ySWRzPW4sdC5nZW9tZXRyeURhdGEuYW5jaG9ycz1sO2NvbnN0IG09e25vZGVWZXJzaW9uOmUudmVyc2lvbixnZW9tZXRyeURhdGE6dC5nZW9tZXRyeURhdGEscmVxdWlyZWRUZXh0dXJlczp0LnJlcXVpcmVkVGV4dHVyZXMsdGV4dHVyZURhdGE6dC50ZXh0dXJlRGF0YSx0cmFuc2Zvcm1lZEdlb21ldHJ5OmQsZ2xvYmFsVHJhZm86dSxnZW9tZXRyeU9iYjpfLGJ5dGVTaXplOlV0KGQsdC50ZXh0dXJlRGF0YSl9O2lmKHRoaXMuX2lkYkNhY2hlRW5hYmxlZCYmdGhpcy5faWRiQ2FjaGUuaW5pdGlhbGl6ZWQmJkd0KGUsbSkpe2NvbnN0IHQ9bnVsbCE9bS50ZXh0dXJlRGF0YT9tLnRleHR1cmVEYXRhLm1hcCgoZT0+SHQoZSk/ZTpudWxsKSk6bnVsbDt0aGlzLl9pZGJDYWNoZS5wdXQodGhpcy5fZ2V0Q2FjaGVLZXkoZS5pZCksey4uLm0sdGV4dHVyZURhdGE6dH0pLmNhdGNoKCh0PT52dC53YXJuKGBGYWlsZWQgdG8gc3RvcmUgbm9kZSBpbiBJbmRleGVkREIgY2FjaGU6ICR7ZS5pZH06ICR7dH1gKSkpfXJldHVybiB0aGlzLl9hZGRDYWNoZWROb2RlRGF0YShlLG0saSl9KSxpKSkpKSk6UHJvbWlzZS5yZWplY3QoKX1nZXRFbGV2YXRpb25SYW5nZShlKXtsZXQgdD0xLzAsaT0tMS8wO2NvbnN0IHM9Ryh0aGlzLnZpZXcucmVuZGVyQ29vcmRzSGVscGVyLnNwYXRpYWxSZWZlcmVuY2UpO3JldHVybiB0aGlzLl9ub2RlSWQyTWV0YS5mb3JFYWNoKChyPT57aWYobnVsbCE9cj8ubm9kZS5nZW9tZXRyeU9iYil7Y29uc3Qgbz1yLm5vZGUuZ2VvbWV0cnlPYmI7aWYoaHQobyxlKSl7Y29uc3QgZT10aGlzLl9jb2xsZWN0aW9uLmdldE9iamVjdFRyYW5zZm9ybShyLm9iamVjdEhhbmRsZSksbz10aGlzLnZpZXcucmVuZGVyQ29vcmRzSGVscGVyLmdldEFsdGl0dWRlKGUucG9zaXRpb24pO2ZvcihsZXQgYT0wO2E8ci5mZWF0dXJlSWRzLmxlbmd0aDthKyspe2NvbnN0IGU9dGhpcy5fY29sbGVjdGlvbi5nZXRDb21wb25lbnRBYWJiKHIub2JqZWN0SGFuZGxlLGEsenQpO2lmKFwibG9jYWxcIj09PXRoaXMudmlldy52aWV3aW5nTW9kZSl0PU1hdGgubWluKHQsbytlWzJdKSxpPU1hdGgubWF4KGksbytlWzVdKTtlbHNle3Q9TWF0aC5taW4odCxvK2VbMl0pO2NvbnN0IHI9TWF0aC5tYXgoTWF0aC5hYnMoZVszXSksTWF0aC5hYnMoZVswXSkpLGE9TWF0aC5tYXgoTWF0aC5hYnMoZVs0XSksTWF0aC5hYnMoZVsxXSkpLG49bytlWzVdK3MucmFkaXVzO2k9TWF0aC5tYXgoaSxNYXRoLnNxcnQocipyK2EqYStuKm4pLXMucmFkaXVzKX19fX19KSkse21pbjp0LG1heDppfX1jb21wdXRlVmlzaWJpbGl0eU9iYihlKXtyZXR1cm4gJGUoZSx0aGlzLnZpZXcucmVuZGVyU3BhdGlhbFJlZmVyZW5jZSx0aGlzLl9jb250cm9sbGVyLmNyc0luZGV4LHRoaXMuaTNzbGF5ZXIuc3BhdGlhbFJlZmVyZW5jZSx0aGlzLmVsZXZhdGlvbk9mZnNldCx0aGlzLl9tb2RpZmljYXRpb25zKX1fdHJhbnNmb3JtTm9kZShlLHQsaSl7Y29uc3Qgcz10Lmdlb21ldHJ5RGF0YS5nZW9tZXRyaWVzPz9bXSxyPW5ldyBBcnJheShzLmxlbmd0aCk7Zm9yKGxldCBmPTA7ZjxzLmxlbmd0aDsrK2YpcltmXT10aGlzLl9nZXRWZXJ0ZXhCdWZmZXJMYXlvdXQoc1tmXSx0Lmdlb21ldHJ5RGVzY3JpcHRvcik7Y29uc3Qgbz1lLm1icyxhPXRoaXMuZWxldmF0aW9uT2Zmc2V0LG49dGhpcy5fY29udHJvbGxlci5jcnNJbmRleCxsPXRoaXMuX2NvbnRyb2xsZXIuY3JzVmVydGV4LGQ9dGhpcy52aWV3LnJlbmRlclNwYXRpYWxSZWZlcmVuY2UsaD1rZShvLGEsbiksYz1MZShvLGEsbixkKSx1PXEobixsKSxfPXEobCxkKTtpZihudWxsPT11fHxudWxsPT1fKXJldHVybiBQcm9taXNlLnJlc29sdmUobnVsbCk7Y29uc3QgbT10aGlzLmkzc2xheWVyLm5vcm1hbFJlZmVyZW5jZUZyYW1lLGc9dC5ub3JtYWxSZWZlcmVuY2VGcmFtZT8/bT8/XCJub25lXCIscD17Y29udGV4dDp0aGlzLnVpZCxnZW9tZXRyeUJ1ZmZlcjp0Lmdlb21ldHJ5QnVmZmVyLGdlb21ldHJ5RGF0YTp0Lmdlb21ldHJ5RGF0YSxnZW9tZXRyeURlc2NyaXB0b3I6dC5nZW9tZXRyeURlc2NyaXB0b3IsbGF5b3V0czpyLGxvY2FsT3JpZ2luOmgsZ2xvYmFsVHJhZm86YyxtYnM6byxvYmI6ZS5zZXJ2aWNlT2JiLGVsZXZhdGlvbk9mZnNldDphLG5lZWROb3JtYWxzOiF0aGlzLl9pc0ludGVncmF0ZWRNZXNoJiZ0aGlzLl9jb250cm9sbGVyLmlzTWVzaFB5cmFtaWQsbm9ybWFsUmVmZXJlbmNlRnJhbWU6ZyxpbmRleFRvVmVydGV4UHJvamVjdG9yOnUsdmVydGV4VG9SZW5kZXJQcm9qZWN0b3I6X307cmV0dXJuIHRoaXMuX3dvcmtlci5pbnZva2UocCxpKX1nZXQgX3N1cHBvcnRzTm9kZUNyb3NzRmFkaW5nKCl7cmV0dXJuIXRoaXMudmlldz8uX3N0YWdlPy5yZW5kZXJlci5zaGFkb3dzRW5hYmxlZH1nZXQgbm9kZUNyb3NzZmFkaW5nRW5hYmxlZCgpe3JldHVybiB0aGlzLl9zdXBwb3J0c05vZGVDcm9zc0ZhZGluZyYmKHRoaXMubG9kQ3Jvc3NmYWRlaW5EdXJhdGlvbj4wfHx0aGlzLmxvZENyb3NzZmFkZW91dER1cmF0aW9uPjB8fHRoaXMubG9kQ3Jvc3NmYWRlVW5jb3ZlcmVkRHVyYXRpb24+MCl9Z2V0IG5vZGVGYWRlb3V0RW5hYmxlZCgpe3JldHVybiB0aGlzLl9zdXBwb3J0c05vZGVDcm9zc0ZhZGluZyYmdGhpcy5sb2RDcm9zc2ZhZGVvdXREdXJhdGlvbj4wfV9zZXROZXdOb2RlT3BhY2l0eShlKXtjb25zdCB0PXRoaXMubm9kZUNyb3NzZmFkaW5nRW5hYmxlZD8wOnRoaXMuZnVsbE9wYWNpdHk7dGhpcy5fc2V0Tm9kZU9wYWNpdHkoZSx0KX1hZGRDYWNoZWRHUFVEYXRhKGUsdCxpKXtpZih0aGlzLmVsZXZhdGlvbkluZm8ubW9kZT09PUJ0LkFic29sdXRlJiYoZS5nZW9tZXRyeU9iYj1jdCh0aGlzLl9jb2xsZWN0aW9uLmdldENvbXBvbmVudE9iYih0Lm9iamVjdEhhbmRsZSkpKSwhdGhpcy5fY29udHJvbGxlci5pc0dlb21ldHJ5VmlzaWJsZShlKSlyZXR1cm4gdm9pZCB0aGlzLl9jYWNoZUdQVURhdGEodCk7bnVsbCE9dGhpcy5fbGFiZWxlciYmdGhpcy5fYWRkTWV0YVRvTGFiZWxlcih0aGlzLl9sYWJlbGVyLHQpO2NvbnN0IHM9ZS5pbmRleDt0aGlzLl9hZGROb2RlTWV0YShzLHQpLHRoaXMudXBkYXRlTm9kZVN0YXRlKHMsaSksdGhpcy5fY29sbGVjdGlvbi5zZXRPYmplY3RWaXNpYmlsaXR5KHQub2JqZWN0SGFuZGxlLG10LlZpc2libGUpLHRoaXMuX3VwZGF0ZU1hdGVyaWFsKHQpLHRoaXMuX3NldE5ld05vZGVPcGFjaXR5KHQpLHRoaXMuZWxldmF0aW9uSW5mby5tb2RlIT09QnQuQWJzb2x1dGUmJnRoaXMuX2Vuc3VyZUVsZXZhdGlvblRhc2soKS5zY2hlZHVsZShzKSx0aGlzLl91cGRhdGVFbmdpbmVPYmplY3QodCksdGhpcy5faGlnaGxpZ2h0cy5vYmplY3RDcmVhdGVkKHQpLG51bGwhPXRoaXMuX3RyZWVEZWJ1Z2dlciYmdGhpcy5fdHJlZURlYnVnZ2VyLnVwZGF0ZSgpfWFkZENhY2hlZE5vZGVEYXRhKGUsdCxpLHMpe3JldHVybiB0aGlzLl9hZGREYXRhKGUsaSwoKCk9PnRoaXMuX2FkZENhY2hlZE5vZGVEYXRhKGUsdCxzKSkpfWFzeW5jIGRlbGV0ZUNhY2hlZE5vZGVEYXRhKGUpe2lmKHRoaXMuX2lkYkNhY2hlRW5hYmxlZClyZXR1cm4gdGhpcy5faWRiQ2FjaGUucmVtb3ZlKHRoaXMuX2dldENhY2hlS2V5KGUpKX1hc3luYyBfYWRkQ2FjaGVkTm9kZURhdGEoZSx0LGkpe2lmKCF0aGlzLmNvbnRlbnRWaXNpYmxlfHwhdGhpcy5fY29udHJvbGxlci5pc0dlb21ldHJ5VmlzaWJsZShlKSlyZXR1cm4gdm9pZCB0aGlzLl9yZW1vdmVOb2RlU3RhZ2VEYXRhKGUuaW5kZXgsdGhpcy5lbGV2YXRpb25PZmZzZXQsdGhpcy5fbm9kZUlkMk1ldGFSZWxvYWRpbmcpO2lmKG51bGw9PXQpcmV0dXJuIHZvaWQgdGhpcy5fYWRkTm9kZU1ldGEoZS5pbmRleCxudWxsKTtjb25zdCBzPXRoaXMuX2FkZFRhc2tzLmdldChlLmluZGV4KSx7Z2VvbWV0cnlEYXRhOnIsdHJhbnNmb3JtZWRHZW9tZXRyeTpvLGdsb2JhbFRyYWZvOmF9PXQ7YXdhaXQgdGhpcy5pM3NPdmVycmlkZXMuYXBwbHlBdHRyaWJ1dGVPdmVycmlkZXMoci5mZWF0dXJlSWRzLHMuYXR0cmlidXRlSW5mbyxpLHRoaXMuX2NvbnRyb2xsZXIucmVxdWlyZWRBdHRyaWJ1dGVzKTtjb25zdCBuPW51bGwhPXQudGV4dHVyZURhdGE/dC50ZXh0dXJlRGF0YS5maWx0ZXIoKGU9Pm51bGwhPWUmJjAhPShlLnVzYWdlJnRoaXMucmVuZGVyZXJUZXh0dXJlVXNhZ2UpKSk6W107IWhhcyhcImRpc2FibGUtZmVhdHVyZTppM3MtYmFzaXNcIikmJm4uc29tZSgoZT0+bnVsbCE9ZSYmKGUuZW5jb2Rpbmc9PT14ZS5CYXNpc3x8ZS5lbmNvZGluZz09PXhlLktUWDIpKSkmJmF3YWl0IGZ0KCksZS5tZW1vcnk9MDtjb25zdHtjb21wb25lbnRPZmZzZXRzOmwsZ2VvbWV0cmllczpkLGZlYXR1cmVJZHM6aCxhbmNob3JJZHM6YyxhbmNob3JzOnV9PXIsXz10aGlzLl9jb2xsZWN0aW9uLG09ZFswXSx7bGF5b3V0OmcsaW5kaWNlczpwLGludGVybGVhdmVkVmVydGV4RGF0YTpmLHBvc2l0aW9uRGF0YTpiLGhhc0NvbG9yczp5fT1vLHY9dGhpcy5fbWF0ZXJpYWxQYXJhbWV0ZXJzKG0sZyksST1sfHxuZXcgVWludDMyQXJyYXkoWzAscD9wLmxlbmd0aDpmLmJ5dGVMZW5ndGgvZ1swXS5zdHJpZGVdKSx3PXt2ZXJ0aWNlczp7ZGF0YTpmLGNvdW50OmYuYnl0ZUxlbmd0aC9nWzBdLnN0cmlkZSxsYXlvdXRQYXJhbWV0ZXJzOnYuZ2VvbWV0cnlQYXJhbXN9LHBvc2l0aW9uRGF0YTp7cG9zaXRpb25zOlooYi5kYXRhKSxpbmRpY2VzOmVlKGIuaW5kaWNlcyl9LGluZGljZXM6cCxjb21wb25lbnRPZmZzZXRzOkl9LFM9bS50cmFuc2Zvcm1hdGlvbj9FKG0udHJhbnNmb3JtYXRpb24pOmooKTtPKFMsYSxTKTtjb25zdCBBPXgoVigpLFMpLFQ9TShDKCksUyksRD10aGlzLnZpZXcucmVuZGVyU3BhdGlhbFJlZmVyZW5jZSxSPXRoaXMudmlldy5iYXNlbWFwVGVycmFpbi5zcGF0aWFsUmVmZXJlbmNlLE49VigpLEY9WzEsMSwxXTtMKEEsRCxGLFIpfHx2dC5lcnJvck9uY2UoXCJVbnN1cHBvcnRlZCBjb29yZGluYXRlIHN5c3RlbSBmb3IgSU0gb3ZlcmxheVwiKSx6KEEsRCxOLFIpO2NvbnN0IFA9Xy5jcmVhdGVPYmplY3Qoe3RvTWFwU3BhY2U6SChOWzBdLE5bMV0sRlswXSxGWzFdKSxnZW9tZXRyeTp3LG9iYjp0Lmdlb21ldHJ5T2JiLHRyYW5zZm9ybTp7cG9zaXRpb246QSxyb3RhdGlvblNjYWxlOlR9fSksVT12Lmdlb21ldHJ5UGFyYW1zLnRleHR1cmVDb29yZGluYXRlcz09PXB0LkF0bGFzLHt0ZXh0dXJlczpHLHRleHR1cmVQcm9taXNlOmt9PXRoaXMuX2luaXRNYXRlcmlhbEFuZFRleHR1cmVzKFAsdi5tYXRlcmlhbCxuLFUpO2UubWVtb3J5Kz10aGlzLl9tZW1Fc3RpbWF0ZUdlb21ldHJ5QWRkZWQoUCksZS5tZW1vcnkrPUcucmVkdWNlKCgoZSx0KT0+ZSsobnVsbCE9dD90aGlzLl9tZW1Fc3RpbWF0ZVRleHR1cmVBZGRlZCh0KTowKSksMCk7Y29uc3QgQj0hIXYubWF0ZXJpYWwuaGFzUGFyYW1ldGVyc0Zyb21Tb3VyY2UscT1cImJsZW5kXCIhPT12Lm1hdGVyaWFsLmFscGhhTW9kZSYmdi5tYXRlcmlhbC5tZXRhbGxpY1JvdWdobmVzcy5iYXNlQ29sb3JGYWN0b3JbM10+PTEsSz1uZXcgTXQoZSxoLFAsdGhpcy5fZ2V0SW52YWxpZFJlbmRlcmVyVmVyc2lvbigpLHMuYXR0cmlidXRlSW5mbyx7aGFzUGFyYW1ldGVyc0Zyb21Tb3VyY2U6Qixpc09wYXF1ZTpxfSxHLGMsdSk7cy5tZXRhPUssIXRoaXMuX2hhc1RleHR1cmVzJiZ0LnJlcXVpcmVkVGV4dHVyZXM/LnNvbWUoKCh7dXNhZ2U6ZX0pPT4wIT0oZSZPZS5Db2xvclRleHR1cmVzKSkpJiYodGhpcy5faGFzVGV4dHVyZXM9ITApLHRoaXMuX2hhc0RhdGE9ITAsdGhpcy5faGFzQ29sb3JzPXRoaXMuX2hhc0NvbG9yc3x8eSx0aGlzLl9oYXNUZXh0dXJlcz10aGlzLl9oYXNUZXh0dXJlc3x8ISFlLnJlc291cmNlcy50ZXh0dXJlLHRoaXMubm90aWZ5Q2hhbmdlKFwiaGFzVGV4dHVyZXNPclZlcnRleENvbG9yc1wiKTtjb25zdCBXPXRoaXMuc2xpY2VQbGFuZUVuYWJsZWQ7cmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLl9hZGRPclVwZGF0ZUVkZ2VSZW5kZXJpbmcoSyksa10pLnRoZW4oKChbdCxzXSk9PihudWxsIT10JiZ0LnVwZGF0ZU9iamVjdFZpc2liaWxpdHkoSy5vYmplY3RIYW5kbGUsITEpLmNhdGNoKChlPT5qdChlLHRoaXMuaTNzbGF5ZXIudGl0bGUpKSksdGhpcy5fc2FmZVJlc2NoZWR1bGUoKCgpPT57Y29uc3QgaT10aGlzLl9hZGRUYXNrcy5nZXQoZS5pbmRleCk7aWYoIWkpcmV0dXJuO2lmKHRoaXMuX2FkZE5vZGVNZXRhKGUuaW5kZXgsSyksaS5tZXRhPW51bGwsIXRoaXMuY29udGVudFZpc2libGUpcmV0dXJuIHZvaWQgdGhpcy5fcmVtb3ZlTm9kZVN0YWdlRGF0YShlLmluZGV4LHRoaXMuZWxldmF0aW9uT2Zmc2V0KTtfLnNldE9iamVjdFZpc2liaWxpdHkoUCxtdC5WaXNpYmxlKSxudWxsIT10JiZ0LnVwZGF0ZU9iamVjdFZpc2liaWxpdHkoSy5vYmplY3RIYW5kbGUsITApLmNhdGNoKChlPT5qdChlLHRoaXMuaTNzbGF5ZXIudGl0bGUpKSksSy5hdHRyaWJ1dGVJbmZvPWkuYXR0cmlidXRlSW5mbztjb25zdCBzPUsuY2FjaGVkUmVuZGVyZXJWZXJzaW9uIT09dGhpcy5fcmVuZGVyZXJWZXJzaW9uLHI9VyE9PXRoaXMuc2xpY2VQbGFuZUVuYWJsZWQ7dGhpcy5fdXBkYXRlRWxldmF0aW9uT2Zmc2V0cyhLKTtjb25zdCBvPUsuZWxldmF0aW9uT2Zmc2V0czt0aGlzLl91cGRhdGVDb21wb25lbnREYXRhKEspO2NvbnN0IGE9dGhpcy5fYXBwbHlGaWx0ZXJzVG9Ob2RlKEspOyhzfHxudWxsIT10JiYocnx8YXx8bykpJiZ0aGlzLl9hZGRPclVwZGF0ZUVkZ2VSZW5kZXJpbmcoSyksbnVsbCE9dGhpcy5fbGFiZWxlciYmdGhpcy5fYWRkTWV0YVRvTGFiZWxlcih0aGlzLl9sYWJlbGVyLEspLHRoaXMuX3Zpc2libGVHZW9tZXRyeUNoYW5nZWQoSyx3dC5BREQpLHRoaXMuX2hpZ2hsaWdodHMub2JqZWN0Q3JlYXRlZChLKSx0aGlzLl91cGRhdGVNYXRlcmlhbChLKSx0aGlzLl9zZXROZXdOb2RlT3BhY2l0eShLKSxudWxsIT10aGlzLl90cmVlRGVidWdnZXImJnRoaXMuX3RyZWVEZWJ1Z2dlci51cGRhdGUoKX0pLGkpKSkpLmNhdGNoKChlPT57dGhyb3cgbnVsbCE9cy5tZXRhJiYodGhpcy5fY2FjaGVHUFVEYXRhKHMubWV0YSkscy5tZXRhPW51bGwpLGV9KSl9X2FkZE5vZGVNZXRhKGUsdCl7aWYodGhpcy5fcmVtb3ZlTm9kZVN0YWdlRGF0YShlLHRoaXMuZWxldmF0aW9uT2Zmc2V0LHRoaXMuX25vZGVJZDJNZXRhUmVsb2FkaW5nKSx0aGlzLl9ub2RlSWQyTWV0YS5oYXMoZSkpe3Z0LmVycm9yKFwiUmVtb3ZpbmcgZHVwbGljYXRlZCBub2RlXCIpO2NvbnN0IHQ9dGhpcy5fbm9kZUlkMk1ldGEuZ2V0KGUpO251bGwhPXQmJnRoaXMuX2RlbGV0ZUNvbXBvbmVudE9iamVjdCh0KX1lbHNlIHRoaXMuX2NvbnRyb2xsZXIudXBkYXRlTG9hZFN0YXR1cyhlLCEwKTtudWxsIT10JiYodC5sb2RDcm9zc2ZhZGVQcm9ncmVzcz1udWxsLHRoaXMubm9kZUNyb3NzZmFkaW5nRW5hYmxlZCYma3QodC5jYWNoZWRFZGdlTWF0ZXJpYWxzLDApKSx0aGlzLl9ub2RlSWQyTWV0YS5zZXQoZSx0KSx0aGlzLm5vdGlmeUNoYW5nZShcImVsZXZhdGlvblJhbmdlXCIpfV91cGRhdGVFbGV2YXRpb25PZmZzZXRzKGUpe2NvbnN0IHQ9dGhpcy52aWV3LnJlbmRlclNwYXRpYWxSZWZlcmVuY2UsaT10aGlzLl9jb250cm9sbGVyLmNyc0luZGV4LHM9dGhpcy5lbGV2YXRpb25JbmZvLHI9dGhpcy52aWV3LmJhc2VtYXBUZXJyYWluLG89ci5zcGF0aWFsUmVmZXJlbmNlLGE9cy5tb2RlO2lmKG51bGw9PXR8fG51bGw9PW98fGE9PT1CdC5BYnNvbHV0ZSlyZXR1cm4gdm9pZChlLmVsZXZhdGlvbk9mZnNldHM9bnVsbCk7Y29uc3Qgbj10aGlzLl9jb2xsZWN0aW9uLmdldE9iamVjdFRyYW5zZm9ybShlLm9iamVjdEhhbmRsZSk7ZS5lbGV2YXRpb25PZmZzZXRzPWUuZWxldmF0aW9uT2Zmc2V0cz8/W107Y29uc3QgbD1xdCxkPXp0LGg9YT09PUJ0Lk9uVGhlR3JvdW5kLGM9dGhpcy52aWV3LnJlbmRlckNvb3Jkc0hlbHBlcix1PWUuZmVhdHVyZUlkcy5sZW5ndGgsXz0oKCk9PntpZihlLmNhY2hlZEVsZXZhdGlvbkFuY2hvcnMpcmV0dXJuIGUuY2FjaGVkRWxldmF0aW9uQW5jaG9ycztjb25zdCBzPUooMyp1KTtlLmNhY2hlZEVsZXZhdGlvbkFuY2hvcnM9cztmb3IobGV0IHI9MDtyPHU7cisrKXtjb25zdCBhPTMqcixoPWUuYW5jaG9ySWRzPy5pbmRleE9mKHIpPz8tMTtlLmFuY2hvcnMmJmg+PTA/KEEobCxlLmFuY2hvcnNbMypoXSxlLmFuY2hvcnNbMypoKzFdLGUuYW5jaG9yc1szKmgrMl0pLFQobCxsLGUubm9kZS5tYnMpLHoobCxpLGwsbyksc1thXT1sWzBdLHNbYSsxXT1sWzFdLHNbYSsyXT1jLmdldEFsdGl0dWRlKGwpKToodGhpcy5fY29sbGVjdGlvbi5nZXRDb21wb25lbnRBYWJiKGUub2JqZWN0SGFuZGxlLHIsZCwhMCksQShsLChkWzBdK2RbM10pLzIsKGRbMV0rZFs0XSkvMixkWzJdKSxEKGwsbCxuLnJvdGF0aW9uU2NhbGUpLFQobCxsLG4ucG9zaXRpb24pLHNbYSsyXT1jLmdldEFsdGl0dWRlKGwpLHoobCx0LGwsbyksc1thXT1sWzBdLHNbYSsxXT1sWzFdKX1yZXR1cm4gc30pKCksbT1zLm9mZnNldCxnPWUuZWxldmF0aW9uT2Zmc2V0cyxwPShlLHQpPT57Y29uc3QgaT1oP19bMyplKzJdOjA7Z1tlXT1tKyhudWxsIT10P3QtaTowKX07ci5nZXRFbGV2YXRpb25zKF8sdSxwKX1fZW5zdXJlRWxldmF0aW9uVGFzaygpe3JldHVybiBudWxsIT10aGlzLl9lbGV2YXRpb25UYXNrfHwodGhpcy5fZWxldmF0aW9uVGFzaz1uZXcgamUodGhpcy52aWV3LnJlc291cmNlQ29udHJvbGxlci5zY2hlZHVsZXIsKGU9Pntjb25zdCB0PXRoaXMuX2NvbnRyb2xsZXIudXBkYXRlRWxldmF0aW9uQ2hhbmdlZChlLHRoaXMudmlldy5iYXNlbWFwVGVycmFpbi5zcGF0aWFsUmVmZXJlbmNlKTtyZXR1cm4gbnVsbCE9dD90LmZpbHRlckluUGxhY2UoKGU9Pm51bGwhPXRoaXMuX25vZGVJZDJNZXRhLmdldChlKSkpOm51bGx9KSwoZT0+e2NvbnN0IHQ9dGhpcy5fbm9kZUlkMk1ldGEuZ2V0KGUpO3RoaXMuX25vZGVFbGV2YXRpb25BbGlnbm1lbnRDaGFuZ2VkKHQpfSkpKSx0aGlzLl9lbGV2YXRpb25UYXNrfV9lbGV2YXRpb25JbmZvQ2hhbmdlZChlLHQpe2NvbnN0IGk9ZS5tb2RlIT09QnQuQWJzb2x1dGUscz0hIXQmJnQhPT1lJiZ0Lm1vZGUhPT1CdC5BYnNvbHV0ZTt0aGlzLl9pbnRlcnNlY3Rpb25IYW5kbGVyLnVwZGF0ZUVsZXZhdGlvbkFsaWduU3RhdGUoaSx0aGlzLnZpZXcuc3RhdGUudmlld2luZ01vZGUpLGkmJiFzJiZ0aGlzLl9jb250cm9sbGVyLnJlbW92ZUFsbEdlb21ldHJ5T2JicygpLHRoaXMuX25vZGVJZDJNZXRhLmZvckVhY2goKGU9PnRoaXMuX25vZGVFbGV2YXRpb25BbGlnbm1lbnRDaGFuZ2VkKGUpKSl9X25vZGVFbGV2YXRpb25BbGlnbm1lbnRDaGFuZ2VkKGUpe251bGwhPWUmJih0aGlzLl91cGRhdGVFbGV2YXRpb25PZmZzZXRzKGUpLHRoaXMuX3VwZGF0ZUNvbXBvbmVudERhdGEoZSksdGhpcy5fdXBkYXRlRWRnZVJlbmRlcmluZyhlKSxudWxsIT10aGlzLl9sYWJlbGVyJiZ0aGlzLl9sYWJlbGVyLnVwZGF0ZUxhYmVsUG9zaXRpb25zKGUpLHRoaXMuX3VwZGF0ZVNuYXBwaW5nU291cmNlcyhlLHd0LlVQREFURSkpfV9zYWZlUmVzY2hlZHVsZShlLHQpe3JldHVybiBfKHQpLHRoaXMuX2NvbnRyb2xsZXIucmVzY2hlZHVsZShlLHQpfV9tYXRlcmlhbFBhcmFtZXRlcnMoZSx0KXtjb25zdCBpPW51bGwhPWUucGFyYW1zLm1hdGVyaWFsP2UucGFyYW1zLm1hdGVyaWFsOkZlKCkscz10LnNvbWUoKGU9PlwidXZSZWdpb25cIj09PWUubmFtZSkpLHI9dC5zb21lKChlPT5cIm5vcm1hbENvbXByZXNzZWRcIj09PWUubmFtZSkpLG89VnQoaSk7cmV0dXJue2dlb21ldHJ5UGFyYW1zOnRoaXMuX2dldEdlb21ldHJ5UGFyYW1ldGVycyh7aGFzVGV4dHVyZTpvLGhhc05vcm1hbHM6cixoYXNSZWdpb25zOnN9KSxtYXRlcmlhbDppfX1faW5pdE1hdGVyaWFsQW5kVGV4dHVyZXMoZSx0LGkscyl7Y29uc3Qgcj10aGlzLl9zdGFnZS5yZW5kZXJWaWV3LG89aS5tYXAoKGU9PlZlKGUsdCxzLHIpKSk7dGhpcy5fc3RhZ2UuYWRkTWFueShvKTtsZXQgYT1udWxsO3JldHVybiB0aGlzLl9jb2xsZWN0aW9uLnVwZGF0ZU1hdGVyaWFsKGUsKGU9PnthPVBlKGUsdCxvLGksdGhpcy52aWV3Ll9zdGFnZS5yZW5kZXJWaWV3LnRleHR1cmVSZXBvc2l0b3J5LHtyZW5kZXJlclRleHR1cmVVc2FnZTp0aGlzLnJlbmRlcmVyVGV4dHVyZVVzYWdlLHVzZVBCUjp0aGlzLl91c2VQQlIsaXNJbnRlZ3JhdGVkTWVzaDp0aGlzLl9pc0ludGVncmF0ZWRNZXNoLHNsaWNlUGxhbmVFbmFibGVkOnRoaXMuc2xpY2VQbGFuZUVuYWJsZWQsdmlld1NwYXRpYWxSZWZlcmVuY2U6dGhpcy52aWV3LnNwYXRpYWxSZWZlcmVuY2V9KSx0aGlzLl91cGRhdGVNYXRlcmlhbE92ZXJsYXkoZSl9KSkse3RleHR1cmVzOm8sdGV4dHVyZVByb21pc2U6YX19X2dldEdlb21ldHJ5UGFyYW1ldGVycyhlKXtyZXR1cm57dGV4dHVyZUNvb3JkaW5hdGVzOmUuaGFzVGV4dHVyZT9lLmhhc1JlZ2lvbnM/cHQuQXRsYXM6cHQuRGVmYXVsdDpwdC5Ob25lLGNvbG9yczp0aGlzLl9oYXNWZXJ0ZXhDb2xvcnMsbm9ybWFsczplLmhhc05vcm1hbHMmJiF0aGlzLl9pc0ludGVncmF0ZWRNZXNofX1fYWRkRGF0YShlLHQsaSl7bGV0IHM9dGhpcy5fYWRkVGFza3MuZ2V0KGUuaW5kZXgpO3JldHVybiBzP3MuYXR0cmlidXRlSW5mbz10OihzPXsuLi5tKCksYXR0cmlidXRlSW5mbzp0LG1ldGE6bnVsbH0sdGhpcy5fYWRkVGFza3Muc2V0KGUuaW5kZXgscyksaSgpLnRoZW4ocy5yZXNvbHZlLHMucmVqZWN0KS50aGVuKCgoKT0+dGhpcy5fYWRkVGFza3MuZGVsZXRlKGUuaW5kZXgpKSkuY2F0Y2goKHQ9Pnt0aHJvdyB0aGlzLl9hZGRUYXNrcy5kZWxldGUoZS5pbmRleCksdH0pKSkscy5wcm9taXNlfV9jbGVhckFkZFRhc2tzKCl7dGhpcy5fYWRkVGFza3MuZm9yRWFjaCgoZT0+e251bGwhPWUubWV0YSYmKHRoaXMuX2NhY2hlR1BVRGF0YShlLm1ldGEpLGUubWV0YT1udWxsKX0pKSx0aGlzLl9hZGRUYXNrcy5jbGVhcigpfV9jbGlwcGluZ0FyZWFDaGFuZ2VkKCl7Y29uc3QgZT10aGlzLnZpZXcucmVuZGVyU3BhdGlhbFJlZmVyZW5jZSx0PXRoaXMuaTNzbGF5ZXIuc3BhdGlhbFJlZmVyZW5jZSxpPVgoKTt0aGlzLl9yZW5kZXJDbGlwcGluZ0FyZWE9bHQodGhpcy52aWV3LmNsaXBwaW5nQXJlYSxpLGUpP2k6bnVsbDtjb25zdCBzPVgoKTt0aGlzLl9sYXllckNsaXBwaW5nQXJlYT1sdCh0aGlzLnZpZXcuY2xpcHBpbmdBcmVhLHMsdCk/czpudWxsLHRoaXMuX2ZpbHRlckNoYW5nZSgpLHRoaXMuX2NvbnRyb2xsZXImJnRoaXMuX2NvbnRyb2xsZXIudXBkYXRlQ2xpcHBpbmdBcmVhKHRoaXMudmlldy5jbGlwcGluZ0FyZWEpLHRoaXMuX2lzSW50ZWdyYXRlZE1lc2gmJnRoaXMuX21vZGlmaWNhdGlvbnNDaGFuZ2VkKCl9Z2V0IGhhc0dlb21ldHJ5RmlsdGVyKCl7cmV0dXJuITF9X2dlb21ldHJ5RmlsdGVyQ2hhbmdlKCl7Y29uc3QgZT10aGlzLmhhc0dlb21ldHJ5RmlsdGVyO3RoaXMuX2NvbnRyb2xsZXIuZ2VvbWV0cnlGaWx0ZXJDaGFuZ2VkKGUpLHRoaXMuX2FwcGx5RmlsdGVycyhlKX1fZmlsdGVyQ2hhbmdlKCl7dGhpcy5fYXBwbHlGaWx0ZXJzKHRoaXMuaGFzR2VvbWV0cnlGaWx0ZXIpfV9hcHBseUZpbHRlcnMoZSl7dGhpcy5fZmlsdGVycz10aGlzLmdldEZpbHRlcnMoKSxlP3RoaXMuX2NvbnRyb2xsZXImJnRoaXMuX2NvbnRyb2xsZXIucmVxdWVzdFVwZGF0ZSgpOnRoaXMuX25vZGVJZDJNZXRhLmZvckVhY2goKGU9PntudWxsIT1lJiZ0aGlzLl9hcHBseUZpbHRlcnNUb05vZGUoZSkmJih0aGlzLl9hZGRPclVwZGF0ZUVkZ2VSZW5kZXJpbmcoZSksdGhpcy5fdmlzaWJsZUdlb21ldHJ5Q2hhbmdlZChlLHd0LlVQREFURSkpfSkpfWdldEZpbHRlcnMoKXtjb25zdCBlPVtdLHQ9dGhpcy5fcmVuZGVyQ2xpcHBpbmdBcmVhO3JldHVybiBudWxsIT10JiZlLnB1c2goKChlLGkpPT50aGlzLl9ib3VuZGluZ1JlY3RGaWx0ZXIoZSxpLHQpKSksZX1hZGRTcWxGaWx0ZXIoZSx0LGkpe2lmKG51bGwhPXQpe2NvbnN0IHM9dC5maWVsZE5hbWVzO2UucHVzaCgoKGUscik9PnRoaXMuX3NxbEZpbHRlcihlLHIsdCxzLGkpKSl9fV9zcWxGaWx0ZXIoZSx0LGkscyxyKXtjb25zdCBvPXt9LGE9dGhpcy5fY3JlYXRlTGF5ZXJHcmFwaGljKG8pLG49dGhpcy5pM3NsYXllci5vYmplY3RJZEZpZWxkLGw9dC5mZWF0dXJlSWRzLGQ9dC5hdHRyaWJ1dGVJbmZvPy5hdHRyaWJ1dGVEYXRhO3MuZXZlcnkoKGU9PmU9PT1ufHxudWxsIT1kPy5bZV0pKSYmUWUoZSxsLChlPT57b1tuXT1sW2VdO2Zvcihjb25zdCBpIG9mIHMpaSE9PW4mJihvW2ldPWQ/WGUoZFtpXSxlKTpudWxsKTt0cnl7cmV0dXJuIGkudGVzdEZlYXR1cmUoYSl9Y2F0Y2godCl7cmV0dXJuIHIodCksITF9fSkpfV9ib3VuZGluZ1JlY3ROb2RlVGVzdChlLHQpe3JldHVybiBrKGUubm9kZS5tYnMsdGhpcy5fY29udHJvbGxlci5jcnNJbmRleCxGdCx0aGlzLnZpZXcucmVuZGVyU3BhdGlhbFJlZmVyZW5jZSksWWUodCxGdCl9X2JvdW5kaW5nUmVjdEZlYXR1cmVUZXN0KGUsdCxpKXtyZXR1cm4gdGhpcy5fY29sbGVjdGlvbi5nZXRDb21wb25lbnRBYWJiKGUub2JqZWN0SGFuZGxlLHQsU3QpLFEoU3QsQXQpLFkoaSxBdCl9X2JvdW5kaW5nUmVjdEZpbHRlcihlLHQsaSl7Y29uc3Qgcz10aGlzLl9jb2xsZWN0aW9uLHI9dGhpcy5fYm91bmRpbmdSZWN0Tm9kZVRlc3QodCxpKTtpZihyPT09SmUuSU5TSURFKXJldHVybjtpZihyPT09SmUuT1VUU0lERSlyZXR1cm4gdm9pZChlLmxlbmd0aD0wKTtjb25zdCBvPXMuZ2V0Q29tcG9uZW50Q291bnQodC5vYmplY3RIYW5kbGUpO2lmKG8uaW52aXNpYmxlK28udmlzaWJsZSE9PXQuZmVhdHVyZUlkcy5sZW5ndGgpcmV0dXJuO2NvbnN0IGE9dGhpcy5fdHJhbnNmb3JtQ2xpcHBpbmdBcmVhKFR0LGksdC5vYmplY3RIYW5kbGUpO1FlKGUsdC5mZWF0dXJlSWRzLChlPT50aGlzLl9ib3VuZGluZ1JlY3RGZWF0dXJlVGVzdCh0LGUsYSkpKX1fdHJhbnNmb3JtQ2xpcHBpbmdBcmVhKGUsdCxpKXtjb25zdCBzPXRoaXMuX2NvbGxlY3Rpb24uZ2V0T2JqZWN0VHJhbnNmb3JtKGkpLHI9cy5wb3NpdGlvbixvPXMucm90YXRpb25TY2FsZTtyZXR1cm4gZVswXT0odFswXS1yWzBdKS9vWzBdLGVbMV09KHRbMV0tclsxXSkvb1s0XSxlWzJdPSh0WzJdLXJbMF0pL29bMF0sZVszXT0odFszXS1yWzFdKS9vWzRdLGV9X2FkZE9yVXBkYXRlRWRnZVJlbmRlcmluZyhlLHQ9ITApe2NvbnN0IGk9dGhpcy5fZWRnZVZpZXc7aWYobnVsbD09aSlyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG51bGwpO2NvbnN0IHM9ZS5vYmplY3RIYW5kbGUscj1pLmhhc09iamVjdChzKSx7aGFzRWRnZXM6byxwZXJGZWF0dXJlRWRnZU1hdGVyaWFsczphfT10aGlzLl9nZXRGaWx0ZXJlZEVkZ2VNYXRlcmlhbHMoZSksbj17aGFzU2xpY2VQbGFuZTp0aGlzLnNsaWNlUGxhbmVFbmFibGVkfTtpZihvJiZyKXtpZih0aGlzLm5vZGVDcm9zc2ZhZGluZ0VuYWJsZWQpe2t0KGEsdGhpcy5nZXROb2RlT3BhY2l0eShlKSl9cmV0dXJuIGkudXBkYXRlQWxsQ29tcG9uZW50TWF0ZXJpYWxzKHMsYSxuLHQpLmNhdGNoKChlPT5qdChlLHRoaXMuaTNzbGF5ZXIudGl0bGUpKSksaS51cGRhdGVPYmplY3RWaXNpYmlsaXR5KHMsITApLmNhdGNoKChlPT5qdChlLHRoaXMuaTNzbGF5ZXIudGl0bGUpKSksaS51cGRhdGVBbGxWZXJ0aWNhbE9mZnNldHMocyxlLmVsZXZhdGlvbk9mZnNldHMpLmNhdGNoKChlPT5qdChlLHRoaXMuaTNzbGF5ZXIudGl0bGUpKSksUHJvbWlzZS5yZXNvbHZlKGkpfXJldHVybiBvJiYhcj90aGlzLl9jb2xsZWN0aW9uLmFkZEVkZ2VzKHMsaSxhLG4pLnRoZW4oKHQ9PihlLmVkZ2VNZW1vcnlVc2FnZT10LGUubm9kZS5tZW1vcnkrPXQsaS51cGRhdGVBbGxWZXJ0aWNhbE9mZnNldHMocyxlLmVsZXZhdGlvbk9mZnNldHMpLmNhdGNoKChlPT5qdChlLHRoaXMuaTNzbGF5ZXIudGl0bGUpKSksaSkpKTooIW8mJnImJihlLm5vZGUubWVtb3J5LT1lLmVkZ2VNZW1vcnlVc2FnZSxlLmVkZ2VNZW1vcnlVc2FnZT0wLGkucmVtb3ZlT2JqZWN0KHMpKSxQcm9taXNlLnJlc29sdmUobnVsbCkpfV9hcHBseUZpbHRlcnNUb05vZGUoZSl7cmV0dXJuISF0aGlzLl9hcHBseUZpbHRlcnNUb05vZGVDb21wb25lbnRzKGUpJiYobnVsbCE9dGhpcy5fbGFiZWxlciYmdGhpcy5fbGFiZWxlci5hcHBseUZpbHRlckNoYW5nZShlKSwhMCl9X2FwcGx5RmlsdGVyc1RvTm9kZUNvbXBvbmVudHMoZSl7Y29uc3QgdD10aGlzLl9jb2xsZWN0aW9uLGk9dC5nZXRDb21wb25lbnRDb3VudChlLm9iamVjdEhhbmRsZSkscz1udWxsIT1lLmZpbHRlcmVkSWRzLHI9MD09PWkuaW52aXNpYmxlO2lmKHQuc2V0QWxsQ29tcG9uZW50VmlzaWJpbGl0aWVzKGUub2JqZWN0SGFuZGxlLFwiYWxsXCIpLDA9PT10aGlzLl9maWx0ZXJzLmxlbmd0aClyZXR1cm4gZS5maWx0ZXJlZElkcz1udWxsLCFyO2lmKHRoaXMuX3VwZGF0ZUNhY2hlZEZpbHRlcmVkSWRzKGUpLHMmJmUuZmlsdGVyZWRJZHM9PT1lLmZlYXR1cmVJZHMpcmV0dXJuIXI7Y29uc3Qgbz10aGlzLl9jb21wdXRlRmlsdGVyZWRDb21wb25lbnRJbmRpY2VzKGUpO3JldHVybiB0LnNldEFsbENvbXBvbmVudFZpc2liaWxpdGllcyhlLm9iamVjdEhhbmRsZSxvKSwhMH1fdXBkYXRlQ2FjaGVkRmlsdGVyZWRJZHMoZSl7bnVsbCE9ZS5maWx0ZXJlZElkcyYmZS5hcHBsaWVkRmlsdGVycz09PXRoaXMuX2ZpbHRlcnN8fChlLmZpbHRlcmVkSWRzPXRoaXMuX2NvbXB1dGVGaWx0ZXJlZElkcyhlKSxlLmFwcGxpZWRGaWx0ZXJzPXRoaXMuX2ZpbHRlcnMpfV9jb21wdXRlRmlsdGVyZWRJZHMoZSl7Y29uc3QgdD1lLmZlYXR1cmVJZHMuc2xpY2UoKTtmb3IoY29uc3QgaSBvZiB0aGlzLl9maWx0ZXJzKWlmKGkodCxlKSwwPT09dC5sZW5ndGgpYnJlYWs7cmV0dXJuIHQubGVuZ3RoPT09ZS5mZWF0dXJlSWRzLmxlbmd0aD9lLmZlYXR1cmVJZHM6dH1fY29tcHV0ZUZpbHRlcmVkQ29tcG9uZW50SW5kaWNlcyhlKXtjb25zdCB0PW5ldyBBcnJheSxpPWUuZmlsdGVyZWRJZHM7cmV0dXJuIG51bGwhPWkmJmUuZmVhdHVyZUlkcy5mb3JFYWNoKCgoZSxzKT0+e2lbdC5sZW5ndGhdPT09ZSYmdC5wdXNoKHMpfSkpLHR9X3JlbW92ZUFsbE5vZGVEYXRhRnJvbVN0YWdlKGU9dGhpcy5lbGV2YXRpb25PZmZzZXQpe3RoaXMuX25vZGVJZDJNZXRhLmZvckVhY2goKCh0LGkpPT50aGlzLl9yZW1vdmVOb2RlU3RhZ2VEYXRhKGksZSkpKSx0aGlzLl9ub2RlSWQyTWV0YVJlbG9hZGluZy5mb3JFYWNoKCgodCxpKT0+dGhpcy5fcmVtb3ZlTm9kZVN0YWdlRGF0YShpLGUsdGhpcy5fbm9kZUlkMk1ldGFSZWxvYWRpbmcpKSksdGhpcy5fZWxldmF0aW9uVGFzaz1oKHRoaXMuX2VsZXZhdGlvblRhc2spfXJlbW92ZU5vZGUoZSl7Y29uc3QgdD10aGlzLmVsZXZhdGlvbk9mZnNldDt0aGlzLl9yZW1vdmVOb2RlU3RhZ2VEYXRhKGUsdCksdGhpcy5fcmVtb3ZlTm9kZVN0YWdlRGF0YShlLHQsdGhpcy5fbm9kZUlkMk1ldGFSZWxvYWRpbmcpLG51bGwhPXRoaXMuX2VsZXZhdGlvblRhc2smJnRoaXMuX2VsZXZhdGlvblRhc2sucmVtb3ZlKGUpfV9yZW1vdmVOb2RlU3RhZ2VEYXRhKGUsdCxpPXRoaXMuX25vZGVJZDJNZXRhKXtpLmhhcyhlKSYmdGhpcy5fY29udHJvbGxlci51cGRhdGVMb2FkU3RhdHVzKGUsITEpO2NvbnN0IHM9aS5nZXQoZSk7bnVsbCE9cz8odGhpcy5fY29sbGVjdGlvbi5zZXRPYmplY3RWaXNpYmlsaXR5KHMub2JqZWN0SGFuZGxlLG10LkhpZGRlbiksbnVsbCE9dGhpcy5fZWRnZVZpZXcmJnRoaXMuX2VkZ2VWaWV3Lmhhc09iamVjdChzLm9iamVjdEhhbmRsZSkmJnRoaXMuX2VkZ2VWaWV3LnVwZGF0ZU9iamVjdFZpc2liaWxpdHkocy5vYmplY3RIYW5kbGUsITEpLmNhdGNoKChlPT5qdChlLHRoaXMuaTNzbGF5ZXIudGl0bGUpKSksdGhpcy5fdmlzaWJsZUdlb21ldHJ5Q2hhbmdlZChzLHd0LlJFTU9WRSksbnVsbCE9dGhpcy5fbGFiZWxlciYmdGhpcy5fbGFiZWxlci5yZW1vdmVOb2RlTWV0YShzKSxpLmRlbGV0ZShlKSx0aGlzLl9oaWdobGlnaHRzLm9iamVjdERlbGV0ZWQocyksaT09PXRoaXMuX25vZGVJZDJNZXRhPyh0aGlzLl9jYWNoZUdQVURhdGEocyx0KSx0aGlzLm5vZGVDcm9zc2ZhZGluZ0VuYWJsZWQmJnRoaXMuX2Nyb3NzZmFkZUhlbHBlci5zdG9wTm9kZUZhZGluZyhzKSk6dGhpcy5fZGVsZXRlQ29tcG9uZW50T2JqZWN0KHMpLG51bGwhPXRoaXMuX3RyZWVEZWJ1Z2dlciYmdGhpcy5fdHJlZURlYnVnZ2VyLnVwZGF0ZSgpKTppLmRlbGV0ZShlKX1fZGVsZXRlQ29tcG9uZW50T2JqZWN0KGUpe2lmKG51bGwhPXRoaXMuX2VkZ2VWaWV3JiZ0aGlzLl9lZGdlVmlldy5yZW1vdmVPYmplY3QoZS5vYmplY3RIYW5kbGUpLHRoaXMuX21lbUVzdGltYXRlR2VvbWV0cnlSZW1vdmVkKGUub2JqZWN0SGFuZGxlKSx0aGlzLl9jb2xsZWN0aW9uLmRlc3Ryb3lPYmplY3QoZS5vYmplY3RIYW5kbGUpLGUudGV4dHVyZXMpZm9yKGNvbnN0IHQgb2YgZS50ZXh0dXJlcyl0aGlzLl9tZW1Fc3RpbWF0ZVRleHR1cmVSZW1vdmVkKHQpLHRoaXMuX3N0YWdlLnJlbW92ZSh0KX11cGRhdGVOb2RlU3RhdGUoZSx0KXtjb25zdCBpPXRoaXMuX25vZGVJZDJNZXRhLmdldChlKTtudWxsIT1pJiZ0aGlzLl9jb2xsZWN0aW9uLnVwZGF0ZU1hdGVyaWFsKGkub2JqZWN0SGFuZGxlLChlPT5lLnBvbHlnb25PZmZzZXRFbmFibGVkPXQ9PT1VZS5Ib2xlKSl9dXBkYXRlTm9kZUluZGV4KGUsdCl7aWYodGhpcy5fbm9kZUlkMk1ldGEuaGFzKGUpKXtjb25zdCBpPXRoaXMuX25vZGVJZDJNZXRhLmdldChlKTt0aGlzLl9ub2RlSWQyTWV0YS5kZWxldGUoZSksdGhpcy5fbm9kZUlkMk1ldGEuc2V0KHQsaSksdGhpcy5ub3RpZnlDaGFuZ2UoXCJlbGV2YXRpb25SYW5nZVwiKX1jb25zdCBpPXRoaXMuX25vZGVJZDJNZXRhUmVsb2FkaW5nLmdldChlKTtpJiYodGhpcy5fbm9kZUlkMk1ldGFSZWxvYWRpbmcuZGVsZXRlKGUpLHRoaXMuX25vZGVJZDJNZXRhUmVsb2FkaW5nLnNldCh0LGkpKX1faW52YWxpZGF0ZUFsbFN5bWJvbHMoKXt0aGlzLl9yZW5kZXJlclZlcnNpb249WmUodGhpcy5fcmVuZGVyZXJWZXJzaW9uLDEpLHRoaXMuX2NvbnRyb2xsZXImJnRoaXMuX2NvbnRyb2xsZXIucmVxdWVzdFVwZGF0ZSgpfV9nZXRJbnZhbGlkUmVuZGVyZXJWZXJzaW9uKCl7cmV0dXJuIFplKHRoaXMuX3JlbmRlcmVyVmVyc2lvbiwtMSl9YXN5bmMgX3JlbmRlcmVyQ2hhbmdlKGUpe2lmKHRoaXMuX2N1cnJlbnRSZW5kZXJlcj1lLHRoaXMubm90aWZ5Q2hhbmdlKFwicmVuZGVyZXJUZXh0dXJlVXNhZ2VcIiksdGhpcy5fcmVuZGVyZXJWZXJzaW9uPVplKHRoaXMuX3JlbmRlcmVyVmVyc2lvbiwxKSx0aGlzLl9yZW5kZXJlckZpZWxkcz1udWxsLHRoaXMuX2NvbG9yVmFyaWFibGU9bnVsbCx0aGlzLl9vcGFjaXR5VmFyaWFibGU9bnVsbCx0aGlzLl9pbnZhbGlkYXRlQWxsU3ltYm9scygpLGUmJih0aGlzLl9yZW5kZXJlckZpZWxkcz1hd2FpdCBlLmdldFJlcXVpcmVkRmllbGRzKHRoaXMuaTNzbGF5ZXIuZmllbGRzSW5kZXgpKSx0aGlzLl91cGRhdGVTeW1ib2xvZ3lGaWVsZHMoKSwhdGhpcy5fYXJjYWRlJiZlJiZcImFyY2FkZVJlcXVpcmVkXCJpbiBlJiZlLmFyY2FkZVJlcXVpcmVkJiYodGhpcy5fYXJjYWRlPWF3YWl0IGRlKCkpLGUmJlwidmlzdWFsVmFyaWFibGVzXCJpbiBlJiZlLnZpc3VhbFZhcmlhYmxlcylmb3IoY29uc3QgdCBvZiBlLnZpc3VhbFZhcmlhYmxlcylcImNvbG9yXCI9PT10LnR5cGU/dGhpcy5fY29sb3JWYXJpYWJsZT10Olwib3BhY2l0eVwiPT09dC50eXBlP3RoaXMuX29wYWNpdHlWYXJpYWJsZT10OnZ0Lndhcm4oYFVuc3VwcG9ydGVkIHZpc3VhbCB2YXJpYWJsZSB0eXBlIGZvciAzRCBPYmplY3QgU2NlbmUgU2VydmljZXM6ICR7dC50eXBlfWApO2lmKGUpZm9yKGNvbnN0IHQgb2YgZS5nZXRTeW1ib2xzKCkpXCJtZXNoLTNkXCIhPT10LnR5cGUmJnZ0LmVycm9yKGBTeW1ib2xzIG9mIHR5cGUgJyR7dC50eXBlfScgYXJlIG5vdCBzdXBwb3J0ZWQgZm9yIDNEIE9iamVjdCBTY2VuZSBTZXJ2aWNlcy5gKTt0aGlzLl9jb250cm9sbGVyJiZ0aGlzLl9jb250cm9sbGVyLnJlcXVlc3RVcGRhdGUoKX1fZ2V0Q2FjaGVkRWRnZU1hdGVyaWFscyhlKXtyZXR1cm4gdGhpcy5faGFzQ29tcG9uZW50RGF0YSYmZS5jYWNoZWRSZW5kZXJlclZlcnNpb24hPT10aGlzLl9yZW5kZXJlclZlcnNpb24mJnRoaXMuX3VwZGF0ZUNhY2hlZFJlbmRlcmVyRGF0YShlKSxlLmNhY2hlZEVkZ2VNYXRlcmlhbHN9X2dldENvbXBvbmVudFBhcmFtZXRlcnMoZSl7dGhpcy5faGFzQ29tcG9uZW50RGF0YSYmZS5jYWNoZWRSZW5kZXJlclZlcnNpb24hPT10aGlzLl9yZW5kZXJlclZlcnNpb24mJnRoaXMuX3VwZGF0ZUNhY2hlZFJlbmRlcmVyRGF0YShlKTtjb25zdCB0PWUuY2FjaGVkU3ltYm9sb2d5O3JldHVybihpLHMpPT57Y29uc3Qgcj01Kmk7aWYoUChzLmV4dGVybmFsQ29sb3IsdFtyXS8yNTUsdFtyKzFdLzI1NSx0W3IrMl0vMjU1LHRbciszXS8yNTUpLG51bGwhPXRoaXMuX3N0YWdlLnJlbmRlclZpZXcub2JqZWN0QW5kTGF5ZXJJZFJlbmRlckhlbHBlcil7Y29uc3QgdD1lLmZlYXR1cmVJZHNbaV0scj1oZSh0aGlzLnZpZXcubWFwLHRoaXMubGF5ZXJVaWQpO3RoaXMuX3N0YWdlLnJlbmRlclZpZXcub2JqZWN0QW5kTGF5ZXJJZFJlbmRlckhlbHBlci5zZXRVaWRUb09iamVjdEFuZExheWVySWQodCx0LHRoaXMubGF5ZXJJZCx0aGlzLmxheWVyVWlkK1wiX1wiK3RoaXMuc3VibGF5ZXJJZCx0aGlzLmxheWVyUG9wdXBFbmFibGVkQW5kSGFzVGVtcGxhdGUmJiFyLGUubm9kZS5yZXNvdXJjZXMuYXR0cmlidXRlcyxpLHRoaXMuc3VibGF5ZXJJZCkscy5vYmplY3RBbmRMYXllcklkQ29sb3I9dGhpcy5fc3RhZ2UucmVuZGVyVmlldy5nZXRPYmplY3RBbmRMYXllcklkQ29sb3Ioe2dyYXBoaWNVaWQ6dCxsYXllclVpZDp0aGlzLmxheWVyVWlkK1wiX1wiK3RoaXMuc3VibGF5ZXJJZH0pfXMuZXh0ZXJuYWxDb2xvck1peE1vZGU9dFtyKzRdJigxPDxDdC5DYXN0U2hhZG93cyktMSxzLmNhc3RTaGFkb3dzPTAhPSh0W3IrNF0mMTw8Q3QuQ2FzdFNoYWRvd3MpLHMucGlja2FibGU9MCE9KHRbcis0XSYxPDxDdC5QaWNrYWJsZSkscy5lbGV2YXRpb25PZmZzZXQ9ZS5lbGV2YXRpb25PZmZzZXRzPy5baV0/PzB9fV9nZXRTeW1ib2xJbmZvKGUsdCl7Y29uc3QgaT1lPy5nZXRTeW1ib2wodCx7YXJjYWRlOnRoaXMuX2FyY2FkZX0pO2lmKCEoaSBpbnN0YW5jZW9mIGNlKSlyZXR1cm4gbnVsbDtjb25zdCBzPWkuaWQ7aWYodGhpcy5fc3ltYm9sSW5mb3MuaGFzKHMpKXJldHVybiB0aGlzLl9zeW1ib2xJbmZvcy5nZXQocyk7Y29uc3Qgcj1ldChpKTtyZXR1cm4gdGhpcy5fc3ltYm9sSW5mb3Muc2V0KHMscikscn1fc2V0U3ltYm9sb2d5T3ZlcnJpZGUoZSx0KXt0aGlzLl9zeW1ib2xvZ3lPdmVycmlkZSE9PWUmJih0aGlzLl9zeW1ib2xvZ3lPdmVycmlkZT1lLHRoaXMuX3N5bWJvbG9neU92ZXJyaWRlRmllbGRzPXQsdGhpcy5faW52YWxpZGF0ZUFsbFN5bWJvbHMoKSx0aGlzLl91cGRhdGVTeW1ib2xvZ3lGaWVsZHMoKSl9X3VwZGF0ZVN5bWJvbG9neUZpZWxkcygpe3RoaXMuX3N5bWJvbG9neUZpZWxkcz1udWxsIT10aGlzLl9zeW1ib2xvZ3lPdmVycmlkZUZpZWxkcyYmdGhpcy5fc3ltYm9sb2d5T3ZlcnJpZGVGaWVsZHMubGVuZ3RoPjA/bnVsbCE9dGhpcy5fcmVuZGVyZXJGaWVsZHMmJnRoaXMuX3JlbmRlcmVyRmllbGRzLmxlbmd0aD4wP29lKHRoaXMuaTNzbGF5ZXIuZmllbGRzSW5kZXgsWy4uLnRoaXMuX3JlbmRlcmVyRmllbGRzLC4uLnRoaXMuX3N5bWJvbG9neU92ZXJyaWRlRmllbGRzXSk6dGhpcy5fc3ltYm9sb2d5T3ZlcnJpZGVGaWVsZHM6dGhpcy5fcmVuZGVyZXJGaWVsZHN9X3VwZGF0ZUNhY2hlZFJlbmRlcmVyRGF0YShlKXtpZihlLmNhY2hlZFJlbmRlcmVyVmVyc2lvbj10aGlzLl9yZW5kZXJlclZlcnNpb24sIXRoaXMuX2hhc0NvbXBvbmVudERhdGEpcmV0dXJuO2NvbnN0IHQ9dGhpcy5fdG1wQXR0cmlidXRlT25seUdyYXBoaWMsaT17fTt0LmF0dHJpYnV0ZXM9aTtjb25zdCBzPXRoaXMuX2N1cnJlbnRSZW5kZXJlcixyPWUuYXR0cmlidXRlSW5mbz8uYXR0cmlidXRlRGF0YSxvPW51bGwhPWUuZmVhdHVyZUlkcz90aGlzLmkzc2xheWVyLm9iamVjdElkRmllbGQ6bnVsbCxhPW51bGwhPXImJm51bGwhPXRoaXMuX3N5bWJvbG9neUZpZWxkcyYmdGhpcy5fc3ltYm9sb2d5RmllbGRzLmxlbmd0aD4wO2xldCBuPW51bGwsbD1udWxsO2lmKGEmJm51bGwhPXRoaXMuX3N5bWJvbG9neUZpZWxkcyl7bj1bXSxsPVtdO2Zvcihjb25zdCBlIG9mIHRoaXMuX3N5bWJvbG9neUZpZWxkcyl7Y29uc3QgdD1yW2VdO3QmJihuLnB1c2goZSksbC5wdXNoKHQpKX19ZS5jYWNoZWRTeW1ib2xvZ3l8fChlLmNhY2hlZFN5bWJvbG9neT1pZSg1KmUuZmVhdHVyZUlkcy5sZW5ndGgpKTtjb25zdCBkPXtjb2xvcjpSdCxjYXN0U2hhZG93czohMCxwaWNrYWJsZTohMCxjb2xvck1peE1vZGU6YXQuTXVsdGlwbHksZWRnZU1hdGVyaWFsOm51bGx9LGg9dGhpcy5mdWxsT3BhY2l0eSxjPXRoaXMubm9kZUNyb3NzZmFkaW5nRW5hYmxlZD90aGlzLmdldE5vZGVPcGFjaXR5KGUpOmg7bGV0IHU9bnVsbCxfPWJ0Lk9QQVFVRSxtPXR0LGc9MDtmb3IobGV0IHA9MDtwPGUuZmVhdHVyZUlkcy5sZW5ndGg7cCsrKXtpZihudWxsIT1vJiYoaVtvXT1lLmZlYXR1cmVJZHNbcF0pLGEmJm4pZm9yKGxldCBlPTA7ZTxuLmxlbmd0aDtlKyspaVtuW2VdXT1YZShsW2VdLHApO2NvbnN0IHI9cz90aGlzLl9nZXRTeW1ib2xJbmZvKHMsdCk6bnVsbDtsZXQgaD1udWxsLGY9bnVsbDtpZihzJiZcInZpc3VhbFZhcmlhYmxlc1wiaW4gcyl7aWYodGhpcy5fY29sb3JWYXJpYWJsZSl7Y29uc3QgZT1uZSh0aGlzLl9jb2xvclZhcmlhYmxlLHQse2NvbG9yOk50LGFyY2FkZTp0aGlzLl9hcmNhZGV9KTtlJiYoaD1SdCxoWzBdPWUuci8yNTUsaFsxXT1lLmcvMjU1LGhbMl09ZS5iLzI1NSx0aGlzLl9vcGFjaXR5VmFyaWFibGV8fG51bGw9PT1lLmF8fChmPWUuYSkpfXRoaXMuX29wYWNpdHlWYXJpYWJsZSYmKGY9bGUodGhpcy5fb3BhY2l0eVZhcmlhYmxlLHQse2FyY2FkZTp0aGlzLl9hcmNhZGV9KSl9aWYocj8ubWF0ZXJpYWwpe2NvbnN0IGU9ci5tYXRlcmlhbDtoPW51bGw9PWh8fG51bGw9PWY/TWUoaCxmLGUuY29sb3IsZS5hbHBoYSxJdCxSdCk6TWUoaCxmLG51bGwsbnVsbCxJdCxSdCl9aWYobnVsbD09aCYmKGg9UnQsaFswXT0xLGhbMV09MSxoWzJdPTEsaFszXT0xKSxkLnBpY2thYmxlPSEwLGQuY2FzdFNoYWRvd3M9IXJ8fHIuY2FzdFNoYWRvd3MsZC5jb2xvck1peE1vZGU9cj8ubWF0ZXJpYWw/ci5tYXRlcmlhbC5jb2xvck1peE1vZGU6YXQuTXVsdGlwbHksZC5lZGdlTWF0ZXJpYWw9cj9yLmVkZ2VNYXRlcmlhbDpudWxsLG51bGwhPXRoaXMuX3N5bWJvbG9neU92ZXJyaWRlJiYoZC5jb2xvcj1oLHRoaXMuX3N5bWJvbG9neU92ZXJyaWRlKHQsZCksaD1kLmNvbG9yKSxudWxsIT10aGlzLl9ub2RlQ29sb3JPdmVycmlkZSYmKHRoaXMuX25vZGVDb2xvck92ZXJyaWRlKGUubm9kZSxoKSxkLmNvbG9yTWl4TW9kZT1hdC5SZXBsYWNlKSxudWxsIT1kLmVkZ2VNYXRlcmlhbCl7Y29uc3QgdD1oWzNdPD0wP2J0LklOVklTSUJMRTpoWzNdPj0xJiYoZS5tYXRlcmlhbC5pc09wYXF1ZXx8ZC5jb2xvck1peE1vZGU9PT1hdC5SZXBsYWNlKT9idC5PUEFRVUU6YnQuVFJBTlNQQVJFTlQ7ZC5lZGdlTWF0ZXJpYWw9PT11JiZ0PT09X3x8KG09ey4uLmQuZWRnZU1hdGVyaWFsLG9wYWNpdHk6YyxvYmplY3RUcmFuc3BhcmVuY3k6dH0sdT1kLmVkZ2VNYXRlcmlhbCxfPXQpLGUuY2FjaGVkRWRnZU1hdGVyaWFsc1twXT1tfWVsc2UgZS5jYWNoZWRFZGdlTWF0ZXJpYWxzW3BdPXR0O2UuY2FjaGVkU3ltYm9sb2d5W2crK109TWF0aC5yb3VuZCgyNTUqaFswXSksZS5jYWNoZWRTeW1ib2xvZ3lbZysrXT1NYXRoLnJvdW5kKDI1NSpoWzFdKSxlLmNhY2hlZFN5bWJvbG9neVtnKytdPU1hdGgucm91bmQoMjU1KmhbMl0pLGUuY2FjaGVkU3ltYm9sb2d5W2crK109TWF0aC5yb3VuZCgyNTUqaFszXSksZS5jYWNoZWRTeW1ib2xvZ3lbZysrXT1kLmNvbG9yTWl4TW9kZXwrZC5jYXN0U2hhZG93czw8Q3QuQ2FzdFNoYWRvd3N8K2QucGlja2FibGU8PEN0LlBpY2thYmxlfX1fZ2V0RmlsdGVyZWRFZGdlTWF0ZXJpYWxzKGUpe2NvbnN0IHQ9dGhpcy5fZ2V0Q2FjaGVkRWRnZU1hdGVyaWFscyhlKTt0aGlzLm5vZGVDcm9zc2ZhZGluZ0VuYWJsZWR8fGt0KHQsdGhpcy5mdWxsT3BhY2l0eSk7Y29uc3QgaT1lLmZpbHRlcmVkSWRzO2lmKG51bGw9PWkpe3JldHVybntoYXNFZGdlczp0LnNvbWUoKGU9PmUhPT10dCkpLHBlckZlYXR1cmVFZGdlTWF0ZXJpYWxzOnR9fWxldCBzPTAscj0hMTtjb25zdCBvPXQubWFwKCgodCxvKT0+ZS5mZWF0dXJlSWRzW29dIT09aVtzXT90dDoocj1yfHx0IT09dHQscysrLHQpKSk7cmV0dXJue2hhc0VkZ2VzOnIscGVyRmVhdHVyZUVkZ2VNYXRlcmlhbHM6b319X3VwZGF0ZUNvbXBvbmVudERhdGEoZSl7aWYoIXRoaXMuX2hhc0NvbXBvbmVudERhdGEpcmV0dXJuO2NvbnN0IHQ9ZS5vYmplY3RIYW5kbGUsaT10aGlzLl9nZXRDb21wb25lbnRQYXJhbWV0ZXJzKGUpO3RoaXMuX2NvbGxlY3Rpb24uc2V0Q29tcG9uZW50RGF0YSh0LGkpLHRoaXMuX3N0YWdlLnJlbmRlclZpZXcucmVxdWVzdFJlbmRlcigpfV9yZWxvYWRBbGwoZT10aGlzLmVsZXZhdGlvbk9mZnNldCl7dGhpcy5fcmVtb3ZlQWxsTm9kZURhdGFGcm9tU3RhZ2UoZSksbnVsbCE9dGhpcy5fY29udHJvbGxlciYmdGhpcy5fY29udHJvbGxlci5yZXN0YXJ0Tm9kZUxvYWRpbmcoKX1fb3BhY2l0eUNoYW5nZShlKXt0aGlzLm5vZGVDcm9zc2ZhZGluZ0VuYWJsZWQmJnRoaXMuX2Nyb3NzZmFkZUhlbHBlci5zdG9wQWxsTm9kZUZhZGluZygpLHRoaXMuX25vZGVJZDJNZXRhLmZvckVhY2goKHQ9PntudWxsIT10JiYodGhpcy5fY29sbGVjdGlvbi51cGRhdGVNYXRlcmlhbCh0Lm9iamVjdEhhbmRsZSwodD0+dC5vYmplY3RPcGFjaXR5PWUpKSxrdCh0LmNhY2hlZEVkZ2VNYXRlcmlhbHMsZSksdGhpcy5fdXBkYXRlRWRnZVJlbmRlcmluZyh0KSl9KSl9X3VwZGF0ZU1hdGVyaWFsKGUpe3RoaXMuX2NvbGxlY3Rpb24udXBkYXRlTWF0ZXJpYWwoZS5vYmplY3RIYW5kbGUsKGU9PntlLmNvbW1vbk1hdGVyaWFsUGFyYW1ldGVycy5oYXNTbGljZVBsYW5lPXRoaXMuc2xpY2VQbGFuZUVuYWJsZWQsZS51c2VQQlI9dGhpcy5fdXNlUEJSLHRoaXMuX3VwZGF0ZU1hdGVyaWFsT3ZlcmxheShlKX0pKX1fdXBkYXRlTWF0ZXJpYWxPdmVybGF5KGUpe31fdXBkYXRlRW5naW5lT2JqZWN0KGUpe3RoaXMuX3VwZGF0ZUNvbXBvbmVudERhdGEoZSksdGhpcy5fYXBwbHlGaWx0ZXJzVG9Ob2RlKGUpLHRoaXMuX2FkZE9yVXBkYXRlRWRnZVJlbmRlcmluZyhlKSx0aGlzLl92aXNpYmxlR2VvbWV0cnlDaGFuZ2VkKGUsd3QuVVBEQVRFKX1fc2xpY2VQbGFuZUVuYWJsZWRDaGFuZ2UoZSl7dGhpcy5faW50ZXJzZWN0aW9uSGFuZGxlciYmKHRoaXMuX2ludGVyc2VjdGlvbkhhbmRsZXIuc2xpY2VQbGFuZUVuYWJsZWQ9ZSksbnVsbCE9dGhpcy5fbGFiZWxlciYmKHRoaXMuX2xhYmVsZXIuc2xpY2VQbGFuZUVuYWJsZWQ9ZSksdGhpcy5fbm9kZUlkMk1ldGEuZm9yRWFjaCgodD0+e251bGwhPXQmJih0aGlzLl9jb2xsZWN0aW9uLnVwZGF0ZU1hdGVyaWFsKHQub2JqZWN0SGFuZGxlLCh0PT50LmNvbW1vbk1hdGVyaWFsUGFyYW1ldGVycy5oYXNTbGljZVBsYW5lPWUpKSx0aGlzLl91cGRhdGVFZGdlUmVuZGVyaW5nKHQsITEpKX0pKX1fdXBkYXRlUEJSKGUpe3RoaXMuX25vZGVJZDJNZXRhLmZvckVhY2goKHQ9PntudWxsIT10JiZ0aGlzLl9jb2xsZWN0aW9uLnVwZGF0ZU1hdGVyaWFsKHQub2JqZWN0SGFuZGxlLCh0PT50LnVzZVBCUj1lKSl9KSksdGhpcy5faGFzTG9hZGVkUEJSVGV4dHVyZXM9ITB9Z2V0IF91c2VQQlIoKXtyZXR1cm4hdGhpcy5faXNJbnRlZ3JhdGVkTWVzaCYmdGhpcy52aWV3LnF1YWxpdHlTZXR0aW5ncy5waHlzaWNhbGx5QmFzZWRSZW5kZXJpbmdFbmFibGVkfV91cGRhdGVFZGdlUmVuZGVyaW5nKGUsdD0hMCl7bnVsbCE9dGhpcy5fZWRnZVZpZXcmJnRoaXMuX2VkZ2VWaWV3Lmhhc09iamVjdChlLm9iamVjdEhhbmRsZSkmJnRoaXMuX2FkZE9yVXBkYXRlRWRnZVJlbmRlcmluZyhlLHQpfV9mb3JBbGxOb2RlcyhlKXt0aGlzLl9ub2RlSWQyTWV0YS5mb3JFYWNoKGUpfV9pZ25vcmVDbGllbnROb2RlT3ZlcnJpZGRlbkZlYXR1cmVzKGUpe3JldHVybiB0aGlzLmkzc092ZXJyaWRlcy5oYXNHZW9tZXRyeUNoYW5nZXM/KHQsaSxzKT0+cy5ub2RlLmluZGV4Pj0wJiZ0aGlzLmkzc092ZXJyaWRlcy5mZWF0dXJlSGFzR2VvbWV0cnlDaGFuZ2VzKHQpP3BlLkNPTlRJTlVFOmUodCxpLHMpOmV9X2ZvckFsbEZlYXR1cmVzKGUsdCxpKXtkKHRoaXMuX25vZGVJZDJNZXRhLChzPT57aWYobnVsbD09cylyZXR1cm4hMTtpZihudWxsIT10KXtzd2l0Y2godChzKSl7Y2FzZSBwZS5FWElUOnJldHVybiEwO2Nhc2UgcGUuU0tJUDpyZXR1cm4hMX19bGV0IHI9cGUuQ09OVElOVUU7c3dpdGNoKGkpe2Nhc2UgZmUuQUxMOnI9dGhpcy5fZm9yQWxsRmVhdHVyZXNPZk5vZGUocyxlKTticmVhaztjYXNlIGZlLlZJU0lCTEVfT05MWTpyPXRoaXMuX2ZvckFsbFZpc2libGVGZWF0dXJlc09mTm9kZShzLGUpO2JyZWFrO2Nhc2UgZmUuUVVFUllBQkxFOnI9dGhpcy5fZm9yQWxsUXVlcnlhYmxlRmVhdHVyZXNPZk5vZGUocyxlKX1yZXR1cm4gcj09PXBlLkVYSVR9KSl9X2ZvckFsbEZlYXR1cmVzT2ZOb2RlKGUsdCl7bGV0IGk9cGUuQ09OVElOVUU7Y29uc3Qgcz1lLmZlYXR1cmVJZHM7Zm9yKGxldCByPTA7cjxzLmxlbmd0aDtyKyspaWYoaT10KHNbcl0scixlKSxpPT09cGUuRVhJVClyZXR1cm4gaTtyZXR1cm4gaX1fZm9yQWxsVmlzaWJsZUZlYXR1cmVzT2ZOb2RlKGUsdCl7bGV0IGk9cGUuQ09OVElOVUU7Y29uc3Qgcz1lLmZlYXR1cmVJZHM7cmV0dXJuIHRoaXMuX2NvbGxlY3Rpb24uZm9yRWFjaFZpc2libGVDb21wb25lbnQoZS5vYmplY3RIYW5kbGUsKHI9PihpPXQoc1tyXSxyLGUpLGk9PT1wZS5DT05USU5VRSkpKSxpfV9mb3JBbGxRdWVyeWFibGVGZWF0dXJlc09mTm9kZShlLHQpe2NvbnN0IGk9dGhpcy5faWdub3JlQ2xpZW50Tm9kZU92ZXJyaWRkZW5GZWF0dXJlcyh0KTtpZihudWxsPT10aGlzLl9yZW5kZXJDbGlwcGluZ0FyZWEpcmV0dXJuIHRoaXMuX2ZvckFsbEZlYXR1cmVzT2ZOb2RlKGUsaSk7Y29uc3Qgcz10aGlzLl9ib3VuZGluZ1JlY3ROb2RlVGVzdChlLHRoaXMuX3JlbmRlckNsaXBwaW5nQXJlYSk7aWYocz09PUplLk9VVFNJREUpcmV0dXJuIHBlLkNPTlRJTlVFO2lmKHM9PT1KZS5JTlNJREUpcmV0dXJuIHRoaXMuX2ZvckFsbEZlYXR1cmVzT2ZOb2RlKGUsaSk7Y29uc3Qgcj1wZS5DT05USU5VRSxvPWUuZmVhdHVyZUlkcyxhPWUub2JqZWN0SGFuZGxlLG49aXQodGhpcy5fcmVuZGVyQ2xpcHBpbmdBcmVhLHRoaXMuX2NvbGxlY3Rpb24uZ2V0T2JqZWN0VHJhbnNmb3JtKGEpKTtmb3IobGV0IGw9MDtsPG8ubGVuZ3RoO2wrKyl7aWYoIXRoaXMuX2JvdW5kaW5nUmVjdEZlYXR1cmVUZXN0KGUsbCxuKSljb250aW51ZTtjb25zdCB0PWkob1tsXSxsLGUpO2lmKHQ9PT1wZS5FWElUKXJldHVybiB0fXJldHVybiByfV9jcmVhdGVBdHRyaWJ1dGVzKGUsdCl7Y29uc3QgaT17fTtudWxsIT10LmZlYXR1cmVJZHMmJihpW3RoaXMuX2dldE9iamVjdElkRmllbGQoKV09dC5mZWF0dXJlSWRzW2VdKTtjb25zdCBzPXQuYXR0cmlidXRlSW5mbz8uYXR0cmlidXRlRGF0YTtpZihudWxsIT1zKWZvcihjb25zdCByIG9mIE9iamVjdC5rZXlzKHMpKWlbcl09WGUoc1tyXSxlKTtyZXR1cm4gaX1fY3JlYXRlR3JhcGhpYyhlLHQpe3JldHVybiB0aGlzLl9jcmVhdGVMYXllckdyYXBoaWModGhpcy5fY3JlYXRlQXR0cmlidXRlcyhlLHQpKX1oaWdobGlnaHQoZSl7aWYoXCJudW1iZXJcIj09dHlwZW9mIGV8fGUgaW5zdGFuY2VvZiBpP2U9W2VdOmUgaW5zdGFuY2VvZiBhJiYoZT1lLnRvQXJyYXkoKSksQXJyYXkuaXNBcnJheShlKSYmZS5sZW5ndGg+MCl7aWYoZVswXWluc3RhbmNlb2YgaSl7Y29uc3QgdD1lLGk9dGhpcy5pM3NsYXllci5maWVsZHNJbmRleCxzPXRoaXMuX2dldE9iamVjdElkRmllbGQoKSxyPXQubWFwKChlPT5vdChpLGUuYXR0cmlidXRlcyxzKSkpLHtzZXQ6byxoYW5kbGU6YX09dGhpcy5faGlnaGxpZ2h0cy5hY3F1aXJlU2V0KCk7cmV0dXJuIHRoaXMuX2hpZ2hsaWdodHMuc2V0RmVhdHVyZUlkcyhvLHIpLGF9aWYoXCJudW1iZXJcIj09dHlwZW9mIGVbMF0pe2NvbnN0IHQ9ZSx7c2V0OmksaGFuZGxlOnN9PXRoaXMuX2hpZ2hsaWdodHMuYWNxdWlyZVNldCgpO3JldHVybiB0aGlzLl9oaWdobGlnaHRzLnNldEZlYXR1cmVJZHMoaSx0KSxzfX1yZXR1cm4gbigpfXJlc2V0SGlnaGxpZ2h0cygpe2godGhpcy5faGlnaGxpZ2h0cyksdGhpcy5faGlnaGxpZ2h0cz1uZXcgRWUoe2NvbGxlY3Rpb246dGhpcy5fY29sbGVjdGlvbixmb3JBbGxGZWF0dXJlczplPT50aGlzLl9mb3JBbGxGZWF0dXJlcyhlLG51bGwsZmUuQUxMKSxmb3JBbGxGZWF0dXJlc09mTm9kZTooZSx0KT0+dGhpcy5fZm9yQWxsRmVhdHVyZXNPZk5vZGUoZSx0KX0pfV92aXNpYmxlR2VvbWV0cnlDaGFuZ2VkKGUsdCl7dGhpcy5fZWxldmF0aW9uUHJvdmlkZXImJih0aGlzLl9lbGV2YXRpb25Qcm92aWRlci5vYmplY3RDaGFuZ2VkKGUubm9kZSksbnVsbD09dGhpcy5fdmlzaWJsZUdlb21ldHJ5Q2hhbmdlZFNjaGVkdWxlckhhbmRsZSYmKHRoaXMuX3Zpc2libGVHZW9tZXRyeUNoYW5nZWRTY2hlZHVsZXJIYW5kbGU9ZigoKCk9Pnt0aGlzLmVtaXQoXCJ2aXNpYmxlLWdlb21ldHJ5LWNoYW5nZWRcIiksdGhpcy5fdmlzaWJsZUdlb21ldHJ5Q2hhbmdlZFNjaGVkdWxlckhhbmRsZT1udWxsfSkpKSx0aGlzLl91cGRhdGVTbmFwcGluZ1NvdXJjZXMoZSx0KSl9Z2V0IHBlcmZvcm1hbmNlSW5mbygpe2NvbnN0IGU9e2Rpc3BsYXllZE51bWJlck9mRmVhdHVyZXM6MCxtYXhpbXVtTnVtYmVyT2ZGZWF0dXJlczowLHRvdGFsTnVtYmVyT2ZGZWF0dXJlczowLGNvcmU6bnVsbCxpbmRleDowLG5vZGVzOnRoaXMuX25vZGVJZDJNZXRhLnNpemUsXCJUb3RhbCBHUFUgTWVtb3J5IEVzdGltYXRlXCI6KHRoaXMuX2dwdU1lbW9yeUVzdGltYXRlLzEwNDg1NzYpLnRvRml4ZWQoMSkrXCJNQlwiLFwiR2VvbWV0cnkgTWVtb3J5IEVzdGltYXRlXCI6KHRoaXMuX2dlb01lbW9yeUVzdGltYXRlLzEwNDg1NzYpLnRvRml4ZWQoMSkrXCJNQlwiLFwiVGV4dHVyZSBNZW1vcnkgRXN0aW1hdGVcIjoodGhpcy5fdGV4TWVtb3J5RXN0aW1hdGUvMTA0ODU3NikudG9GaXhlZCgxKStcIk1CXCIsXCJVbmxvYWRlZCBNZW1vcnkgRXN0aW1hdGVcIjoodGhpcy51bmxvYWRlZE1lbW9yeS8xMDQ4NTc2KS50b0ZpeGVkKDEpK1wiTUJcIn07cmV0dXJuIG51bGwhPXRoaXMuX21lbUNhY2hlJiYoZS5NZW1DYWNoZT1NYXRoLnJvdW5kKDEwMCp0aGlzLl9tZW1DYWNoZS5oaXRSYXRlKStcIiUgaGl0XCIpLHRoaXMuX2NvbnRyb2xsZXImJih0aGlzLl9pZGJDYWNoZUVuYWJsZWQmJihlLklEQkNhY2hlPU1hdGgucm91bmQoMTAwKnRoaXMuX2lkYkNhY2hlLmdldEhpdFJhdGUoKSkrXCIlIGhpdFwiKSx0aGlzLl9jb250cm9sbGVyLnVwZGF0ZVN0YXRzKGUpKSxlfWdldCB0ZXN0KCl7Y29uc3QgZT10aGlzLHQ9ZT0+e3RoaXMuX25vZGVDb2xvck92ZXJyaWRlPWUsdGhpcy5faW52YWxpZGF0ZUFsbFN5bWJvbHMoKX07cmV0dXJue2NvbnRyb2xsZXI6dGhpcy5fY29udHJvbGxlcixsYWJlbGVyOnRoaXMuX2xhYmVsZXIsZ2V0IHZpc2libGVPYmplY3RJZHMoKXtjb25zdCB0PVtdO3JldHVybiBlLl9mb3JBbGxGZWF0dXJlcygoZT0+KHQucHVzaChlKSxwZS5DT05USU5VRSkpLG51bGwsZmUuVklTSUJMRV9PTkxZKSx0LnNvcnQoKChlLHQpPT5lLXQpKSx0fSxnZXQgbnVtTm9kZXMoKXtyZXR1cm4gZS5fbm9kZUlkMk1ldGEuc2l6ZX0sZ2V0IGxvYWRlZE5vZGVzKCl7cmV0dXJuIEFycmF5LmZyb20oZS5fbm9kZUlkMk1ldGEua2V5cygpKS5zb3J0KCgoZSx0KT0+ZS10KSl9LHNldE5vZGVDb2xvck92ZXJyaWRlOnQsc2V0Tm9kZUNvbG9yaW5nOmU9PntpZihcImNsaWVudC1ub2Rlc1wiPT09ZSl0KCgoZSx0KT0+e2UuaW5kZXg8MD8odFswXT0xLHRbMV09MCx0WzJdPTApOih0WzBdPTEsdFsxXT0xLHRbMl09MSl9KSk7ZWxzZSB0KG51bGwpfX19Z2V0Tm9kZU9wYWNpdHlCeUluZGV4KGUpe2NvbnN0IHQ9dGhpcy5fbm9kZUlkMk1ldGEuZ2V0KGUpO3JldHVybiB0aGlzLmdldE5vZGVPcGFjaXR5KHQpfWdldE5vZGVPcGFjaXR5KGUpe3JldHVybiBudWxsIT1lP3RoaXMuX2NvbGxlY3Rpb24uZ2V0TWF0ZXJpYWwoZS5vYmplY3RIYW5kbGUpLm9iamVjdE9wYWNpdHk6MH1pc05vZGVGdWxseUZhZGVkSW4oZSl7cmV0dXJuIHRoaXMuX2Nyb3NzZmFkZUhlbHBlci5pc05vZGVGdWxseUZhZGVkSW4oZSl9Z2V0Tm9kZUNyb3NzZmFkZU1ldGFEYXRhKGUpe3JldHVybiB0aGlzLl9ub2RlSWQyTWV0YS5nZXQoZSl9bWFya05vZGVUb1JlbW92ZShlKXt0aGlzLl9jb250cm9sbGVyJiZ0aGlzLl9jb250cm9sbGVyLm1hcmtOb2RlVG9SZW1vdmUoZSl9cmVtb3ZlTWFya2VkTm9kZXMoKXt0aGlzLl9jb250cm9sbGVyJiZ0aGlzLl9jb250cm9sbGVyLnJlbW92ZU1hcmtlZE5vZGVzKCl9Zm9yZWFjaENyb3NzZmFkZU5vZGUoZSl7dGhpcy5fbm9kZUlkMk1ldGEuZm9yRWFjaCgoKHQsaSk9PmUoaSx0KSkpfWZhZGVOb2RlKGUsdCxpKXtpZighdGhpcy5ub2RlQ3Jvc3NmYWRpbmdFbmFibGVkKXJldHVybjtjb25zdCBzPXRoaXMuX25vZGVJZDJNZXRhLmdldChlKTtudWxsIT1zJiZ0aGlzLl9jcm9zc2ZhZGVIZWxwZXIuZmFkZU5vZGUoZSxzLHQsaSl9c2V0Tm9kZU9wYWNpdHlCeUluZGV4KGUsdCl7Y29uc3QgaT10aGlzLl9ub2RlSWQyTWV0YS5nZXQoZSk7bnVsbCE9aSYmdGhpcy5fc2V0Tm9kZU9wYWNpdHkoaSx0KX1fc2V0Tm9kZU9wYWNpdHkoZSx0KXt0aGlzLl9jb2xsZWN0aW9uLnVwZGF0ZU1hdGVyaWFsKGUub2JqZWN0SGFuZGxlLChlPT5lLm9iamVjdE9wYWNpdHk9dCkpLHRoaXMuX3NldE5vZGVFZGdlT3BhY2l0eShlLHQpfV9zZXROb2RlRWRnZU9wYWNpdHkoZSx0KXtpZihudWxsPT10aGlzLl9lZGdlVmlld3x8IWUuY2FjaGVkRWRnZU1hdGVyaWFscylyZXR1cm47a3QoZS5jYWNoZWRFZGdlTWF0ZXJpYWxzLHQpO2NvbnN0IGk9ZS5vYmplY3RIYW5kbGU7dGhpcy5fZWRnZVZpZXcuaGFzT2JqZWN0KGkpJiZ0aGlzLl9lZGdlVmlldy51cGRhdGVBbGxDb21wb25lbnRPcGFjaXRpZXMoaSx0KS5jYXRjaCgoZT0+anQoZSx0aGlzLmkzc2xheWVyLnRpdGxlKSkpfWdldCBoYXNNb2RpZmljYXRpb25zKCl7cmV0dXJuIHRoaXMuX2lzSW50ZWdyYXRlZE1lc2gmJm51bGwhPXRoaXMuX2xheWVyQ2xpcHBpbmdBcmVhfHx0aGlzLl9tb2RpZmljYXRpb25zJiZ0aGlzLl9tb2RpZmljYXRpb25zLmxlbmd0aD4wfXVwZGF0ZU5vZGVNb2RpZmljYXRpb25TdGF0dXMoZSl7Y29uc3QgdD1lLmxlbmd0aDtpZighdGhpcy5oYXNNb2RpZmljYXRpb25zfHx0PD0wfHwhMCE9PXRoaXMuX2kzc1dhc21Mb2FkZWQpcmV0dXJuO2NvbnN0IGk9dGhpcy51aWQscz1MdChlKTtpZihudWxsIT1zKXtjb25zdCB0PXtjb250ZXh0OmksYnVmZmVyOnMuYnVmZmVyfTt2ZSh0KTtjb25zdCByPW5ldyBGbG9hdDY0QXJyYXkocy5idWZmZXIpO2UuZm9yQWxsKCgoZSx0KT0+e2NvbnN0IGk9clt0XSxzPUllKGkpO2UuaW1Nb2RpZmljYXRpb25JbXBhY3Q9cyxzIT09SGUuVW5tb2RpZmllZCYmdGhpcy5fY29udHJvbGxlci5pbnZhbGlkYXRlR2VvbWV0cnlWaXNpYmlsaXR5KGUuaW5kZXgpfSkpfX1ub3RpZnlVcGRhdGUoKXt0aGlzLm5vdGlmeUNoYW5nZShcInVwZGF0aW5nXCIpfW5vdGlmeUxPRFVwZGF0ZSgpe3RoaXMuX2NvbnRyb2xsZXIubm90aWZ5TE9EVXBkYXRlKCl9aXNVcGRhdGluZygpe3JldHVybiEoIXRoaXMuX2NvbnRyb2xsZXJ8fCF0aGlzLl9jb250cm9sbGVyLnVwZGF0aW5nKXx8ISF0aGlzLl92aXNpYmxlR2VvbWV0cnlDaGFuZ2VkU2NoZWR1bGVySGFuZGxlfHxudWxsIT10aGlzLl9sYWJlbGVyJiZ0aGlzLl9sYWJlbGVyLnVwZGF0aW5nfHx0aGlzLl9jcm9zc2ZhZGVIZWxwZXI/LnVwZGF0aW5nfHx0aGlzLl9pM3NXYXNtTG9hZGVkIGluc3RhbmNlb2YgUHJvbWlzZXx8dGhpcy5fYXN5bmNNb2R1bGVMb2FkaW5nPjB8fG51bGwhPXRoaXMuX2VsZXZhdGlvblRhc2smJnRoaXMuX2VsZXZhdGlvblRhc2sucnVubmluZ310cmFja1NuYXBwaW5nU291cmNlcyhlKXtjb25zdCB0PXtldmVudHM6ZSxmZXRjaEVkZ2VMb2NhdGlvbnM6YXN5bmMoZSx0LGkpPT57Y29uc3Qgcz10aGlzLl9ub2RlSWQyTWV0YS5nZXQoZSk7aWYobnVsbD09cyl0aHJvdyBuZXcgRXJyb3IoXCJpbnZhbGlkLW5vZGVcIik7Y29uc3R7b3JpZ2luOnIsYnVmZmVyOm99PWF3YWl0IHRoaXMuX2NvbGxlY3Rpb24uZXh0cmFjdEVkZ2VJbmZvcm1hdGlvbihzLm9iamVjdEhhbmRsZSx0LGkpO3JldHVybiB0aGlzLl9zbmFwcGluZ0xvY2F0aW9uc0FwcGx5RWxldmF0aW9uKHMsbyxyKSx7dHlwZTpcImNvbXBvbmVudHNcIixvYmplY3RJZHM6cy5mZWF0dXJlSWRzLGxvY2F0aW9uczpvLG9yaWdpbjpyfX0scmVtb3ZlOigpPT57cih0aGlzLl9zbmFwcGluZ1NvdXJjZXNUcmFja2Vycyx0KX19O3JldHVybiB0aGlzLl9zbmFwcGluZ1NvdXJjZXNUcmFja2Vycy5wdXNoKHQpLHRoaXMuX25vZGVJZDJNZXRhLmZvckVhY2goKCh0LGkpPT57aWYobnVsbD09dClyZXR1cm47Y29uc3Qgcz10aGlzLl9jb250cm9sbGVyLmdldFJlbmRlck1icyh0Lm5vZGUpO251bGwhPXMmJmUuYWRkKGkscyl9KSksdH1fc25hcHBpbmdMb2NhdGlvbnNBcHBseUVsZXZhdGlvbihlLHQsaSl7aWYoIWUuZWxldmF0aW9uT2Zmc2V0c3x8dGhpcy5lbGV2YXRpb25JbmZvLm1vZGU9PT1CdC5BYnNvbHV0ZSlyZXR1cm47Y29uc3Qgcz10LnBvc2l0aW9uMCxyPXQucG9zaXRpb24xLG89dC5jb21wb25lbnRJbmRleCxhPVYoKSxuPVYoKSxsPShlLHQpPT57VChlLGUsaSksdGhpcy52aWV3LnJlbmRlckNvb3Jkc0hlbHBlci53b3JsZFVwQXRQb3NpdGlvbihlLG4pLFQoZSxlLE4obixuLHQpKSxGKGUsZSxpKX07Zm9yKGxldCBkPTA7ZDxzLmNvdW50O2QrKyl7Y29uc3QgdD1lLmVsZXZhdGlvbk9mZnNldHNbby5nZXQoZCldO3MuZ2V0VmVjKGQsYSksbChhLHQpLHMuc2V0VmVjKGQsYSksci5nZXRWZWMoZCxhKSxsKGEsdCksci5zZXRWZWMoZCxhKX19X3VwZGF0ZVNuYXBwaW5nU291cmNlcyhlLHQpe2NvbnN0e2luZGV4Oml9PWUubm9kZSxzPXRoaXMuX2NvbnRyb2xsZXIuZ2V0UmVuZGVyTWJzKGUubm9kZSk7aWYobnVsbCE9cylmb3IoY29uc3QgciBvZiB0aGlzLl9zbmFwcGluZ1NvdXJjZXNUcmFja2Vycyl0IT09d3QuUkVNT1ZFJiZ0IT09d3QuVVBEQVRFfHxyLmV2ZW50cy5yZW1vdmUoaSksdCE9PXd0LkFERCYmdCE9PXd0LlVQREFURXx8ci5ldmVudHMuYWRkKGkscyl9fTtyZXR1cm4gZShbdigpXSxvLnByb3RvdHlwZSxcIl9oYXNMb2FkZWRQQlJUZXh0dXJlc1wiLHZvaWQgMCksZShbdigpXSxvLnByb3RvdHlwZSxcIl9hc3luY01vZHVsZUxvYWRpbmdcIix2b2lkIDApLGUoW3YoKV0sby5wcm90b3R5cGUsXCJfdmlzaWJsZUdlb21ldHJ5Q2hhbmdlZFNjaGVkdWxlckhhbmRsZVwiLHZvaWQgMCksZShbdigpXSxvLnByb3RvdHlwZSxcInZpZXdcIix2b2lkIDApLGUoW3YoKV0sby5wcm90b3R5cGUsXCJpM3NsYXllclwiLHZvaWQgMCksZShbdigpXSxvLnByb3RvdHlwZSxcIl9jb250cm9sbGVyXCIsdm9pZCAwKSxlKFt2KCldLG8ucHJvdG90eXBlLFwiX2xhYmVsZXJcIix2b2lkIDApLGUoW3YoKV0sby5wcm90b3R5cGUsXCJ1cGRhdGluZ1wiLHZvaWQgMCksZShbdigpXSxvLnByb3RvdHlwZSxcInN1c3BlbmRlZFwiLHZvaWQgMCksZShbdigpXSxvLnByb3RvdHlwZSxcImNvbnRlbnRWaXNpYmxlXCIsbnVsbCksZShbdih7cmVhZE9ubHk6ITB9KV0sby5wcm90b3R5cGUsXCJsZWdlbmRFbmFibGVkXCIsbnVsbCksZShbdigpXSxvLnByb3RvdHlwZSxcImhvbGVGaWxsaW5nXCIsdm9pZCAwKSxlKFt2KHV0KV0sby5wcm90b3R5cGUsXCJ1cGRhdGluZ1Byb2dyZXNzXCIsdm9pZCAwKSxlKFt2KCldLG8ucHJvdG90eXBlLFwidXBkYXRpbmdQcm9ncmVzc1ZhbHVlXCIsbnVsbCksZShbdigpXSxvLnByb3RvdHlwZSxcImhhc1RleHR1cmVzT3JWZXJ0ZXhDb2xvcnNcIixudWxsKSxlKFt2KCldLG8ucHJvdG90eXBlLFwicmVuZGVyZXJUZXh0dXJlVXNhZ2VcIixudWxsKSxlKFt2KCldLG8ucHJvdG90eXBlLFwiZWxldmF0aW9uT2Zmc2V0XCIsbnVsbCksZShbdigpXSxvLnByb3RvdHlwZSxcImVsZXZhdGlvbkluZm9cIixudWxsKSxlKFt2KHt0eXBlOkJvb2xlYW59KV0sby5wcm90b3R5cGUsXCJzbGljZVBsYW5lRW5hYmxlZFwiLHZvaWQgMCksZShbdigpXSxvLnByb3RvdHlwZSxcInN1cHBvcnRlZFRleHR1cmVFbmNvZGluZ3NcIixudWxsKSxlKFt2KCldLG8ucHJvdG90eXBlLFwidW5jb21wcmVzc2VkVGV4dHVyZURvd25zYW1wbGluZ0VuYWJsZWRcIixudWxsKSxlKFt2KHt0eXBlOlthZV19KV0sby5wcm90b3R5cGUsXCJfbW9kaWZpY2F0aW9uc1wiLHZvaWQgMCksZShbdih7cmVhZE9ubHk6ITB9KV0sby5wcm90b3R5cGUsXCJjbGllbnRHZW9tZXRyeVwiLG51bGwpLGUoW3YoKV0sby5wcm90b3R5cGUsXCJlbGV2YXRpb25SYW5nZVwiLG51bGwpLGUoW3YoKV0sby5wcm90b3R5cGUsXCJfZWxldmF0aW9uVGFza1wiLHZvaWQgMCksZShbdih7cmVhZE9ubHk6ITB9KV0sby5wcm90b3R5cGUsXCJfdXNlUEJSXCIsbnVsbCksbz1lKFtJKHl0KV0sbyksb307ZnVuY3Rpb24ganQoZSx0KXt1KGUpfHx2dC53YXJuKFwiRXJyb3Igd2hpbGUgcHJvY2Vzc2luZyBlZGdlcy4gRWRnZXMgb24gdGhpcyBsYXllciBtaWdodCBub3QgZGlzcGxheSBjb3JyZWN0bHlcIix0LGUpfXZhciB3dDshZnVuY3Rpb24oZSl7ZVtlLkFERD0wXT1cIkFERFwiLGVbZS5SRU1PVkU9MV09XCJSRU1PVkVcIixlW2UuVVBEQVRFPTJdPVwiVVBEQVRFXCJ9KHd0fHwod3Q9e30pKTtjb25zdCBTdD1LKCksQXQ9WCgpLFR0PVgoKSxEdD1kdCgpLFJ0PVswLDAsMCwwXSxOdD1uZXcgdChbMCwwLDAsMF0pLEZ0PXRlKDAsMCwwLDApO2Z1bmN0aW9uIFZ0KGUpe2lmKG51bGw9PWUpcmV0dXJuITE7Y29uc3QgdD1lLm1ldGFsbGljUm91Z2huZXNzO3JldHVybiB0JiZ0LmJhc2VDb2xvclRleHR1cmVJZD49MHx8dCYmdC5tZXRhbGxpY1JvdWdobmVzc1RleHR1cmVJZD49MHx8ZS5ub3JtYWxUZXh0dXJlSWQ+PTB8fGUuZW1pc3NpdmVUZXh0dXJlSWQ+PTB8fGUub2NjbHVzaW9uVGV4dHVyZUlkPj0wfWZ1bmN0aW9uIFB0KGUpe3JldHVyblwiZ2VvbWV0cnlEYXRhXCJpbiBlfWZ1bmN0aW9uIEh0KGUpe3JldHVybiBudWxsIT1lJiZiKGUuZGF0YSl9ZnVuY3Rpb24gVXQoZSx0KXtsZXQgaT0xMDI0K2UuaW50ZXJsZWF2ZWRWZXJ0ZXhEYXRhLmJ5dGVMZW5ndGgrKGUuaW5kaWNlcz9lLmluZGljZXMuYnl0ZUxlbmd0aDowKStlLnBvc2l0aW9uRGF0YS5kYXRhLmJ5dGVMZW5ndGgrZS5wb3NpdGlvbkRhdGEuaW5kaWNlcy5ieXRlTGVuZ3RoO2lmKG51bGwhPXQpZm9yKGNvbnN0IHMgb2YgdCludWxsIT1zJiZiKHMuZGF0YSkmJihpKz1zLmRhdGEuYnl0ZUxlbmd0aCk7cmV0dXJuIGl9ZnVuY3Rpb24gR3QoZSx0KXtyZXR1cm4gdC5ieXRlU2l6ZT54dD8odnQud2FybihgTm9kZSBpcyB0b28gYmlnIHRvIHN0b3JlIGluIEluZGV4ZWREQiBjYWNoZTogJHtlLmlkfSAoJHt0LmJ5dGVTaXplfSBieXRlcylgKSwhMSk6dC5ieXRlU2l6ZT4wfWZ1bmN0aW9uIEx0KGUpe2lmKDA9PT1lLmxlbmd0aClyZXR1cm4gbnVsbDtjb25zdCB0PTEwKmUubGVuZ3RoLGk9bmV3IEZsb2F0NjRBcnJheSh0KTtyZXR1cm4gZS5mb3JBbGwoKChlLHQpPT57bGV0IHM9ZS5zZXJ2aWNlT2JiO251bGw9PXMmJihzPUR0LFIocy5jZW50ZXIsZS5tYnMpLHMuaGFsZlNpemVbMF09cy5oYWxmU2l6ZVsxXT1zLmhhbGZTaXplWzJdPWUubWJzWzNdKTtjb25zdCByPTEwKnQ7aVtyXT1zLmNlbnRlclswXSxpW3IrMV09cy5jZW50ZXJbMV0saVtyKzJdPXMuY2VudGVyWzJdLGlbciszXT1zLmhhbGZTaXplWzBdLGlbcis0XT1zLmhhbGZTaXplWzFdLGlbcis1XT1zLmhhbGZTaXplWzJdLGlbcis2XT1zLnF1YXRlcm5pb25bMF0saVtyKzddPXMucXVhdGVybmlvblsxXSxpW3IrOF09cy5xdWF0ZXJuaW9uWzJdLGlbcis5XT1zLnF1YXRlcm5pb25bM119KSksaX1mdW5jdGlvbiBrdChlLHQpe2UuZm9yRWFjaCgoZT0+ZS5vcGFjaXR5PXQpKX12YXIgQnQ7IWZ1bmN0aW9uKGUpe2VbZS5BYnNvbHV0ZT0wXT1cIkFic29sdXRlXCIsZVtlLlJlbGF0aXZlVG9Hcm91bmQ9MV09XCJSZWxhdGl2ZVRvR3JvdW5kXCIsZVtlLk9uVGhlR3JvdW5kPTJdPVwiT25UaGVHcm91bmRcIn0oQnR8fChCdD17fSkpO2NvbnN0IHF0PVYoKSx6dD1LKCksS3Q9XCJlbGV2YXRpb24tY2hhbmdlXCI7ZnVuY3Rpb24gV3QoZSl7cmV0dXJuIHQ9PntpZihlLmltbWVkaWF0ZSlyZXR1cm4gZS5pbW1lZGlhdGUuc2NoZWR1bGUodCk7dGhyb3cgY29uc29sZS5lcnJvcihcIkVycm9yIG5vIGltbWVkaWF0ZSBzY2h1ZGxlclwiKSxuZXcgRXJyb3IoXCJjYW50IGZpbmQgaW1tZWRpYXRlIHNjaGVkdWxlclwiKX19ZXhwb3J0e0J0IGFzIEVsZXZhdGlvbk1vZGUsRXQgYXMgSTNTTWVzaFZpZXczRCxXdCBhcyBtYWtlU2NoZWR1bGVGdW5jdGlvbn07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e18gYXMgZX1mcm9tXCIuLi8uLi8uLi9jaHVua3MvdHNsaWIuZXM2LmpzXCI7aW1wb3J0XCIuLi8uLi8uLi9zeW1ib2xzLmpzXCI7aW1wb3J0IHQgZnJvbVwiLi4vLi4vLi4vY29yZS9BY2Nlc3Nvci5qc1wiO2ltcG9ydHtmaWx0ZXJJblBsYWNlIGFzIHJ9ZnJvbVwiLi4vLi4vLi4vY29yZS9hcnJheVV0aWxzLmpzXCI7aW1wb3J0e2VxdWFsc1NoYWxsb3cgYXMgc31mcm9tXCIuLi8uLi8uLi9jb3JlL2xhbmcuanNcIjtpbXBvcnR7ZmxvYXRFcXVhbFVscCBhcyBvfWZyb21cIi4uLy4uLy4uL2NvcmUvbWF0aFV0aWxzLmpzXCI7aW1wb3J0e2Rlc3Ryb3lNYXliZSBhcyBpfWZyb21cIi4uLy4uLy4uL2NvcmUvbWF5YmUuanNcIjtpbXBvcnR7d2F0Y2ggYXMgYX1mcm9tXCIuLi8uLi8uLi9jb3JlL3JlYWN0aXZlVXRpbHMuanNcIjtpbXBvcnR7Z2VuZXJhdGVVSUQgYXMgbn1mcm9tXCIuLi8uLi8uLi9jb3JlL3VpZC5qc1wiO2ltcG9ydHtwcm9wZXJ0eSBhcyBwfWZyb21cIi4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvcHJvcGVydHkuanNcIjtpbXBvcnRcIi4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2Vuc3VyZVR5cGUuanNcIjtpbXBvcnR7c3ViY2xhc3MgYXMgY31mcm9tXCIuLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3N1YmNsYXNzLmpzXCI7aW1wb3J0e2RpZmYgYXMgaH1mcm9tXCIuLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kaWZmVXRpbHMuanNcIjtpbXBvcnR7cHJvamVjdEJ1ZmZlciBhcyBsfWZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L3Byb2plY3Rpb24vcHJvamVjdEJ1ZmZlci5qc1wiO2ltcG9ydHtjcmVhdGUgYXMgZCxzZXQgYXMgdSxuZWdhdGl2ZUluZmluaXR5IGFzIG0sZXhwYW5kV2l0aEJ1ZmZlciBhcyBmfWZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvYWFCb3VuZGluZ0JveC5qc1wiO2ltcG9ydHtuZXdEb3VibGVBcnJheSBhcyBnfWZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvRG91YmxlQXJyYXkuanNcIjtpbXBvcnR7bWFrZURlaHlkcmF0ZWRQb2ludCBhcyB5fWZyb21cIi4uLy4uLy4uL2xheWVycy9ncmFwaGljcy9kZWh5ZHJhdGVkUG9pbnQuanNcIjtpbXBvcnR7R3JhcGhpY3MzRENvcmUgYXMgYn1mcm9tXCIuL2dyYXBoaWNzL0dyYXBoaWNzM0RDb3JlLmpzXCI7aW1wb3J0e0dyYXBoaWNzM0RTY2FsZVZpc2liaWxpdHkgYXMgSX1mcm9tXCIuL2dyYXBoaWNzL0dyYXBoaWNzM0RTY2FsZVZpc2liaWxpdHkuanNcIjtpbXBvcnR7Ym91bmRpbmdCb3hDb3JuZXJzUG9pbnRzU3RyaWRlIGFzIF8sYm91bmRpbmdCb3hDb3JuZXJQb2ludHMgYXMgdn1mcm9tXCIuL2kzcy9JM1NHZW9tZXRyeVV0aWwuanNcIjtpbXBvcnR7TGltaXRHcmFwaGljc01hcCBhcyBNfWZyb21cIi4uL3N1cHBvcnQvTGltaXRHcmFwaGljc01hcC5qc1wiO2ltcG9ydHtVcGRhdGVQb2xpY3kgYXMgRX1mcm9tXCIuLi93ZWJnbC1lbmdpbmUvbGliL1VwZGF0ZVBvbGljeS5qc1wiO2ltcG9ydCBqIGZyb21cIi4uLy4uLy4uL3N5bWJvbHMvUG9pbnRTeW1ib2wzRC5qc1wiO2NsYXNzIEd7Y29uc3RydWN0b3IoZSx0KXt0aGlzLm1ldGE9ZSx0aGlzLmluZGV4PXR9fWNsYXNzIER7Y29uc3RydWN0b3IoZSx0KXt0aGlzLmdyYXBoaWM9ZSx0aGlzLmdlb21ldHJ5PXQsdGhpcy5jb21wb25lbnRzPVtdLHRoaXMub3ZlcnJpZGVzRGlydHk9ITF9fWxldCB3PWNsYXNzIGV4dGVuZHMgdHtnZXQgdXBkYXRpbmcoKXtyZXR1cm4gdGhpcy5fZ3JhcGhpY3NDb3JlPy51cGRhdGluZz8/ITF9Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5sb2FkZWRHcmFwaGljcz1uZXcgTSg1ZTQpLHRoaXMuc2xpY2VQbGFuZUVuYWJsZWQ9ITEsdGhpcy5fcmVuZGVyaW5nSW5mbz17c3ltYm9sOm5ldyBqfSx0aGlzLl9mZWF0dXJlc01hcD1uZXcgTWFwfWluaXRpYWxpemUoKXtjb25zdCBlPXRoaXMudmlldy5iYXNlbWFwVGVycmFpbjt0aGlzLl9ncmFwaGljc0NvcmU9bmV3IGIoe293bmVyOnRoaXMsbGF5ZXI6dGhpcy5sYXllcixwcmVmZXJyZWRVcGRhdGVQb2xpY3k6RS5BU1lOQyxlbGV2YXRpb25GZWF0dXJlRXhwcmVzc2lvbkVuYWJsZWQ6ITEsZ3JhcGhpY1N5bWJvbFN1cHBvcnRlZDohMSxnZXRSZW5kZXJpbmdJbmZvV2l0aG91dFJlbmRlcmVyOiEwLGhhc1o6ITAsaGFzTTohMSxjb21wb25lbnRGYWN0b3JpZXM6e2RlY29uZmxpY3RvcjplPT50aGlzLnZpZXcuZGVjb25mbGljdG9yLmFkZEdyYXBoaWNzT3duZXIoZSksbGFiZWxlcjooZSx0KT0+dGhpcy52aWV3LmxhYmVsZXIuYWRkR3JhcGhpY3NPd25lcihlLHQse2VtcHR5U3ltYm9sTGFiZWxTdXBwb3J0ZWQ6ITAsZWxldmF0aW9uSW5mb092ZXJyaWRlOnttb2RlOlwiYWJzb2x1dGUtaGVpZ2h0XCIsb2Zmc2V0OjB9LGRpc2FibGVQbGFjZW1lbnQ6e2xvZ0VudGl0eURlc2NyaXB0aW9uOlwiM0QgT2JqZWN0IFNjZW5lIExheWVyIGZlYXR1cmVzXCJ9fSksc2NhbGVWaXNpYmlsaXR5Oih0LHIpPT5uZXcgSSh7Z3JhcGhpY3NDb3JlT3duZXI6dGhpcyxsYXllcjp0aGlzLmxheWVyLHF1ZXJ5R3JhcGhpY1VJRHNJbkV4dGVudDpyLGdyYXBoaWNzQ29yZTp0LGJhc2VtYXBUZXJyYWluOmUsbGF5ZXJTY2FsZUVuYWJsZWQ6ITF9KX19KSx0aGlzLl9ncmFwaGljc0NvcmUuaW5pdGlhbGl6ZVByb21pc2UudGhlbigoKCk9PnRoaXMuX2dyYXBoaWNzQ29yZS5zdGFydENyZWF0ZUdyYXBoaWNzKCkpKS5jYXRjaCgoKCk9Pnt9KSksdGhpcy5hZGRIYW5kbGVzKGEoKCgpPT50aGlzLmxheWVyLmxhYmVsaW5nSW5mbyksKChlLHQpPT57aChlLHQpJiZ0aGlzLl9ncmFwaGljc0NvcmUudXBkYXRlTGFiZWxpbmdJbmZvKCl9KSkpfWRlc3Ryb3koKXt0aGlzLl9ncmFwaGljc0NvcmU9aSh0aGlzLl9ncmFwaGljc0NvcmUpLHRoaXMubG9hZGVkR3JhcGhpY3M9aSh0aGlzLmxvYWRlZEdyYXBoaWNzKSx0aGlzLnZpZXc9bnVsbH1hZGROb2RlTWV0YShlLHQpe2xldCByPTA7Y29uc3Qgcz1lLmZpbHRlcmVkSWRzLG89dGhpcy52aWV3LnNwYXRpYWxSZWZlcmVuY2UsaT1bXTtmb3IobGV0IGE9MDthPGUuZmVhdHVyZUlkcy5sZW5ndGg7YSsrKXtjb25zdCBwPWUuZmVhdHVyZUlkc1thXTtsZXQgYz1udWxsPT1zO2lmKHMmJnI8cy5sZW5ndGgmJnA9PT1zW3JdJiYoYz0hMCxyKyspLCF0aGlzLl9lbmFibGVkRm9yRmVhdHVyZUluTm9kZShlLGEpKWNvbnRpbnVlO2NvbnN0IGg9dGhpcy5fZmVhdHVyZXNNYXAuZ2V0KHApO2lmKGgpe2guY29tcG9uZW50cy5wdXNoKG5ldyBHKGUsYSkpLHRoaXMuX3VwZGF0ZUxhYmVsUG9zaXRpb24ocCk7Y29udGludWV9Y29uc3QgbD10KGEsZSksZD15KDAsMCwwLG8pLHU9e29iamVjdElkOnAsdWlkOm4oKSxhdHRyaWJ1dGVzOmwsdmlzaWJsZTpjLGdlb21ldHJ5OmR9LG09bmV3IEQodSxkKTttLmNvbXBvbmVudHMucHVzaChuZXcgRyhlLGEpKSx0aGlzLl9mZWF0dXJlc01hcC5zZXQocCxtKSx0aGlzLl91cGRhdGVMYWJlbEdlb21ldHJ5KHApLGkucHVzaCh1KX10aGlzLmxvYWRlZEdyYXBoaWNzLmFkZE1hbnkoaSl9dXBkYXRlTGFiZWxQb3NpdGlvbnMoZSl7Y29uc3QgdD10aGlzLnZpZXcucmVuZGVyQ29vcmRzSGVscGVyO3RoaXMuX2ZvckVhY2hHcmFwaGljKGUsKChyLHMsbyk9Pntjb25zdCBpPXRoaXMuX2dyYXBoaWNzQ29yZS5nZXRHcmFwaGljczNER3JhcGhpY0J5SWQocy51aWQpO251bGwhPWkmJnRoaXMuX3VwZGF0ZUxhYmVsR2VvbWV0cnkoZS5mZWF0dXJlSWRzW3JdKSYmaS5hbGlnbldpdGhBYnNvbHV0ZUVsZXZhdGlvbihvLno/PzAsdCwhMSl9KSl9c2V0Tm9kZU1ldGFBdHRyaWJ1dGVzKGUsdCl7Y29uc3Qgcj1uZXcgQXJyYXk7dGhpcy5fZm9yRWFjaEdyYXBoaWMoZSwoKG8saSk9Pntjb25zdCBhPXQobyxlKTtzKGkuYXR0cmlidXRlcyxhKXx8KGkuYXR0cmlidXRlcz1hLHIucHVzaChpLnVpZCkpfSkpLHRoaXMuX2dyYXBoaWNzQ29yZS51cGRhdGVMYWJlbGluZ0luZm8ocil9YXBwbHlGaWx0ZXJDaGFuZ2UoZSl7dGhpcy5fZm9yRWFjaEZlYXR1cmUoZSwoKHQscixzKT0+e2lmKCF0aGlzLl9lbmFibGVkRm9yRmVhdHVyZUluTm9kZShlLHQpKXtjb25zdCBzPWUuZmVhdHVyZUlkc1t0XTtzd2l0Y2godGhpcy5fcmVtb3ZlRmVhdHVyZShyLGUsdCkpe2Nhc2UgRi5SRU1PVkVEOnRoaXMubG9hZGVkR3JhcGhpY3MucmVtb3ZlTWFueUJ5T2JqZWN0SWQoW3NdKTticmVhaztjYXNlIEYuTU9ESUZJRUQ6dGhpcy5fdXBkYXRlTGFiZWxQb3NpdGlvbihzKX1yZXR1cm59Y29uc3Qgbz1yLmdyYXBoaWMsaT1vLnZpc2libGU7aSE9PXMmJihvLnZpc2libGU9cyxDLmdyYXBoaWM9byxDLnByb3BlcnR5PVwidmlzaWJsZVwiLEMub2xkVmFsdWU9aSxDLm5ld1ZhbHVlPXMsdGhpcy5fZ3JhcGhpY3NDb3JlLmdyYXBoaWNVcGRhdGVIYW5kbGVyKEMpKX0pKX1yZW1vdmVOb2RlTWV0YShlKXtjb25zdCB0PVtdO3RoaXMuX2ZvckVhY2hHcmFwaGljKGUsKHI9Pntjb25zdCBzPWUuZmVhdHVyZUlkc1tyXSxvPXRoaXMuX2ZlYXR1cmVzTWFwLmdldChzKTtpZighbylyZXR1cm47c3dpdGNoKHRoaXMuX3JlbW92ZUZlYXR1cmUobyxlLHIpKXtjYXNlIEYuTU9ESUZJRUQ6dGhpcy5fdXBkYXRlTGFiZWxQb3NpdGlvbihzKTticmVhaztjYXNlIEYuUkVNT1ZFRDp0LnB1c2gocyl9fSkpLHRoaXMubG9hZGVkR3JhcGhpY3MucmVtb3ZlTWFueUJ5T2JqZWN0SWQodCl9X3JlbW92ZUZlYXR1cmUoZSx0LHMpe2NvbnN0IG89ZS5jb21wb25lbnRzLmxlbmd0aDtyZXR1cm4gcihlLmNvbXBvbmVudHMsKGU9PiEoZS5tZXRhPT09dCYmZS5pbmRleD09PXMpKSksMD09PWUuY29tcG9uZW50cy5sZW5ndGg/KHRoaXMuX2ZlYXR1cmVzTWFwLmRlbGV0ZSh0LmZlYXR1cmVJZHNbc10pLEYuUkVNT1ZFRCk6byE9PWUuY29tcG9uZW50cy5sZW5ndGg/Ri5NT0RJRklFRDpGLlVOTU9ESUZJRUR9Z2V0UmVuZGVyaW5nSW5mbygpe3JldHVybiB0aGlzLl9yZW5kZXJpbmdJbmZvfW5vdGlmeUdyYXBoaWNHZW9tZXRyeUNoYW5nZWQoKXt9bm90aWZ5R3JhcGhpY1Zpc2liaWxpdHlDaGFuZ2VkKCl7fV91cGRhdGVMYWJlbFBvc2l0aW9uKGUpe2NvbnN0IHQ9dGhpcy5fZmVhdHVyZXNNYXAuZ2V0KGUpO3QmJnRoaXMuX3VwZGF0ZUxhYmVsR2VvbWV0cnkoZSkmJih0aGlzLmxvYWRlZEdyYXBoaWNzLnJlbW92ZU1hbnlCeU9iamVjdElkKFtlXSksdGhpcy5sb2FkZWRHcmFwaGljcy5hZGRNYW55KFt0LmdyYXBoaWNdKSl9X3VwZGF0ZUxhYmVsR2VvbWV0cnkoZSl7Y29uc3QgdD10aGlzLl9mZWF0dXJlc01hcC5nZXQoZSk7aWYoIXQpcmV0dXJuITE7Y29uc3Qgcj10Lmdlb21ldHJ5LHM9dGhpcy52aWV3LnNwYXRpYWxSZWZlcmVuY2UsaT10aGlzLnZpZXcucmVuZGVyQ29vcmRzSGVscGVyLGE9ci54LG49ci55LHA9ci56Pz8wLGM9dC5jb21wb25lbnRzLmxlbmd0aCxoPWcoYypfKTtsZXQgZD0wO2Zvcihjb25zdHttZXRhOm8saW5kZXg6bH1vZiB0LmNvbXBvbmVudHMpdihsLHRoaXMuY29sbGVjdGlvbixvLm9iamVjdEhhbmRsZSxoLGQpLGQrPV87cmV0dXJuIGwoaCxpLnNwYXRpYWxSZWZlcmVuY2UsMCxoLHMsMCxoLmxlbmd0aC8zKSx1KE8sbSksZihPLGgpLHIueD0oT1swXStPWzNdKS8yLHIueT0oT1sxXStPWzRdKS8yLHIuej1PWzVdLCFvKHIueCxhKXx8IW8oci55LG4pfHwhbyhyLnoscCl9X2ZvckVhY2hHcmFwaGljKGUsdCl7dGhpcy5fZm9yRWFjaEZlYXR1cmUoZSwoKHIse2dyYXBoaWM6cyxnZW9tZXRyeTpvfSxpKT0+e3RoaXMuX2VuYWJsZWRGb3JGZWF0dXJlSW5Ob2RlKGUscikmJnQocixzLG8saSl9KSl9X2ZvckVhY2hGZWF0dXJlKGUsdCl7bGV0IHI9MDtmb3IobGV0IHM9MDtzPGUuZmVhdHVyZUlkcy5sZW5ndGg7cysrKXtjb25zdCBvPXRoaXMuX2ZlYXR1cmVzTWFwLmdldChlLmZlYXR1cmVJZHNbc10pO2xldCBpPW51bGw9PWUuZmlsdGVyZWRJZHM7ZS5maWx0ZXJlZElkcyYmZS5maWx0ZXJlZElkc1tyXT09PWUuZmVhdHVyZUlkc1tzXSYmKGk9ITAscisrKSxvJiZ0KHMsbyxpKX19X2VuYWJsZWRGb3JGZWF0dXJlSW5Ob2RlKGUsdCl7cmV0dXJuIGUubm9kZS5pbmRleDwwfHwhdGhpcy5vdmVycmlkZXM/LmZlYXR1cmVIYXNHZW9tZXRyeUNoYW5nZXMoZS5mZWF0dXJlSWRzW3RdKX1nZXQgdXBkYXRlUG9saWN5KCl7cmV0dXJuIHRoaXMuX2dyYXBoaWNzQ29yZS5lZmZlY3RpdmVVcGRhdGVQb2xpY3l9Z2V0IHVzZWRNZW1vcnkoKXtyZXR1cm4gdGhpcy5fZ3JhcGhpY3NDb3JlLnVzZWRNZW1vcnl9Z2V0IHVubG9hZGVkTWVtb3J5RXN0aW1hdGUoKXtyZXR1cm4gdGhpcy5fZ3JhcGhpY3NDb3JlLnVucHJvY2Vzc2VkTWVtb3J5RXN0aW1hdGV9Z2V0IHRlc3QoKXtyZXR1cm57Z3JhcGhpY3NDb3JlOnRoaXMuX2dyYXBoaWNzQ29yZX19fTtlKFtwKCldLHcucHJvdG90eXBlLFwidmlld1wiLHZvaWQgMCksZShbcCgpXSx3LnByb3RvdHlwZSxcImxheWVyXCIsdm9pZCAwKSxlKFtwKCldLHcucHJvdG90eXBlLFwiY29sbGVjdGlvblwiLHZvaWQgMCksZShbcCgpXSx3LnByb3RvdHlwZSxcImxvYWRlZEdyYXBoaWNzXCIsdm9pZCAwKSxlKFtwKCldLHcucHJvdG90eXBlLFwib3ZlcnJpZGVzXCIsdm9pZCAwKSxlKFtwKCldLHcucHJvdG90eXBlLFwidXBkYXRpbmdcIixudWxsKSxlKFtwKCldLHcucHJvdG90eXBlLFwic2xpY2VQbGFuZUVuYWJsZWRcIix2b2lkIDApLGUoW3AoKV0sdy5wcm90b3R5cGUsXCJfZ3JhcGhpY3NDb3JlXCIsdm9pZCAwKSx3PWUoW2MoXCJlc3JpLnZpZXdzLjNkLmxheWVycy5JM1NNZXNoVmlld0xhYmVsZXJcIildLHcpO2NvbnN0IEM9e2dyYXBoaWM6bnVsbCxwcm9wZXJ0eTpudWxsLG9sZFZhbHVlOm51bGwsbmV3VmFsdWU6bnVsbH07dmFyIEY7IWZ1bmN0aW9uKGUpe2VbZS5VTk1PRElGSUVEPTBdPVwiVU5NT0RJRklFRFwiLGVbZS5NT0RJRklFRD0xXT1cIk1PRElGSUVEXCIsZVtlLlJFTU9WRUQ9Ml09XCJSRU1PVkVEXCJ9KEZ8fChGPXt9KSk7Y29uc3QgTz1kKCksTD13O2V4cG9ydHtMIGFzIGRlZmF1bHR9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydCBzIGZyb21cIi4uLy4uLy4uL2NvcmUvTG9nZ2VyLmpzXCI7aW1wb3J0IGUgZnJvbVwiLi4vLi4vLi4vY29yZS9Qb29sZWRBcnJheS5qc1wiO2ltcG9ydHtXb3JrZXJIYW5kbGUgYXMgb31mcm9tXCIuLi8uLi8uLi9jb3JlL3dvcmtlcnMvV29ya2VySGFuZGxlLmpzXCI7aW1wb3J0e2NhblByb2plY3RXaXRob3V0RW5naW5lIGFzIHR9ZnJvbVwiLi4vLi4vLi4vZ2VvbWV0cnkvcHJvamVjdGlvbi5qc1wiO2ltcG9ydHtwcm9qZWN0VmVjdG9yVG9WZWN0b3IgYXMgcn1mcm9tXCIuLi8uLi8uLi9nZW9tZXRyeS9wcm9qZWN0aW9uL3Byb2plY3RWZWN0b3JUb1ZlY3Rvci5qc1wiO2ltcG9ydHtNb2RpZmljYXRpb25UeXBlIGFzIHB9ZnJvbVwiLi4vLi4vLi4vbGlicy9pM3MvZW51bXMuanNcIjtjbGFzcyBoIGV4dGVuZHMgb3tjb25zdHJ1Y3RvcihzKXtzdXBlcihcIlNjZW5lTGF5ZXJXb3JrZXJcIixcInByb2Nlc3NcIix7cHJvY2VzczpzPT5bcy5nZW9tZXRyeUJ1ZmZlcl0scHJvamVjdDpzPT5bcy5wb3NpdGlvbnMuYnVmZmVyXSx0cmFuc2Zvcm1Ob3JtYWxzOnM9PltzLm5vcm1hbHMuYnVmZmVyXX0scyx7aGFzSW5pdGlhbGl6ZTohMH0pfXNldE1vZGlmaWNhdGlvbnMocyxlLG8sdCl7Y29uc3Qgcj17Y29udGV4dDpzLG1vZGlmaWNhdGlvbnM6dShlLG8sdCksaXNHZW9kZXRpYzp0LmlzR2VvZ3JhcGhpY307dGhpcy5icm9hZGNhc3QocixcInNldE1vZGlmaWNhdGlvbnNcIil9c2V0TGVnYWN5U2NoZW1hKHMsZSl7Y29uc3Qgbz1KU09OLnN0cmluZ2lmeShlKTtyZXR1cm4gdGhpcy5icm9hZGNhc3Qoe2NvbnRleHQ6cyxqc29uU2NoZW1hOm99LFwic2V0TGVnYWN5U2NoZW1hXCIpfWRlc3Ryb3lDb250ZXh0KHMpe3JldHVybiB0aGlzLmJyb2FkY2FzdChzLFwiZGVzdHJveUNvbnRleHRcIil9cHJvamVjdChzLGUpe3JldHVybiB0aGlzLmludm9rZU1ldGhvZChcInByb2plY3RcIixzLGUpfXRyYW5zZm9ybU5vcm1hbHMocyxlKXtyZXR1cm4gdGhpcy5pbnZva2VNZXRob2QoXCJ0cmFuc2Zvcm1Ob3JtYWxzXCIscyxlKX19Y29uc3Qgbj1uZXcgZSh7ZGVhbGxvY2F0b3I6bnVsbH0pLGk9WzAsMCwwXTtmdW5jdGlvbiB1KGUsbyxoKXtuLmNsZWFyKCk7bGV0IHU9MS8wLGE9MS8wLGM9LTEvMCxmPS0xLzAsbD0hMTtmb3IoY29uc3QgZCBvZiBvKXtjb25zdCBlPVwiY2xpcFwiPT09ZC50eXBlP3AuSW5zaWRlOlwibWFza1wiPT09ZC50eXBlP3AuT3V0c2lkZTpwLlJlcGxhY2Usbz1kLmdlb21ldHJ5O2xldCBtPXM9PnM7aWYoby5zcGF0aWFsUmVmZXJlbmNlKXtpZighdChvLnNwYXRpYWxSZWZlcmVuY2UsaCkpe3MuZ2V0TG9nZ2VyKFwiZXNyaS52aWV3cy4zZC5sYXllcnMuSTNTTWVzaFdvcmtlckhhbmRsZVwiKS53YXJuKFwiQ2FuJ3QgcHJvamVjdCBtb2RpZmljYXRpb24gcG9seWdvbiBpbnRvIGxheWVyIHNwYXRpYWwgcmVmZXJlbmNlLCBpZ25vcmluZyBtb2RpZmljYXRpb25cIik7Y29udGludWV9bT1zPT4ocihzLG8uc3BhdGlhbFJlZmVyZW5jZSxpLGgpLGkpfWVsc2Ugby5oYXNafHwoaVsyXT0wLG09cz0+KGlbMF09c1swXSxpWzFdPXNbMV0saSkpO2w9bHx8ZT09PXAuT3V0c2lkZSxuLnB1c2goZSksbi5wdXNoKG8ucmluZ3MubGVuZ3RoKTtmb3IoY29uc3QgcyBvZiBvLnJpbmdzKXtuLnB1c2gocy5sZW5ndGgpO2Zvcihjb25zdCBlIG9mIHMpe2NvbnN0IHM9bShlKTtuLnB1c2goc1swXSksbi5wdXNoKHNbMV0pLG4ucHVzaChzWzJdKSx1PU1hdGgubWluKHUsc1swXSksYT1NYXRoLm1pbihhLHNbMV0pLGM9TWF0aC5tYXgoYyxzWzBdKSxmPU1hdGgubWF4KGYsc1sxXSl9fX1pZihudWxsIT1lKWlmKGwpe2NvbnN0IHM9MWUtNDtuLnB1c2gocC5JbnNpZGUpLG4ucHVzaCgyKSxuLnB1c2goNCksbi5wdXNoKHUtcyksbi5wdXNoKGEtcyksbi5wdXNoKDApLG4ucHVzaChjK3MpLG4ucHVzaChhLXMpLG4ucHVzaCgwKSxuLnB1c2goYytzKSxuLnB1c2goZitzKSxuLnB1c2goMCksbi5wdXNoKHUtcyksbi5wdXNoKGYrcyksbi5wdXNoKDApLG4ucHVzaCg0KSxuLnB1c2goZVswXSksbi5wdXNoKGVbMV0pLG4ucHVzaCgwKSxuLnB1c2goZVsyXSksbi5wdXNoKGVbMV0pLG4ucHVzaCgwKSxuLnB1c2goZVsyXSksbi5wdXNoKGVbM10pLG4ucHVzaCgwKSxuLnB1c2goZVswXSksbi5wdXNoKGVbM10pLG4ucHVzaCgwKX1lbHNlIG4ucHVzaChwLk91dHNpZGUpLG4ucHVzaCgxKSxuLnB1c2goNCksbi5wdXNoKGVbMF0pLG4ucHVzaChlWzFdKSxuLnB1c2goMCksbi5wdXNoKGVbMl0pLG4ucHVzaChlWzFdKSxuLnB1c2goMCksbi5wdXNoKGVbMl0pLG4ucHVzaChlWzNdKSxuLnB1c2goMCksbi5wdXNoKGVbMF0pLG4ucHVzaChlWzNdKSxuLnB1c2goMCk7bi5wdXNoKHAuRmluaXNoZWQpO2NvbnN0IG09bmV3IEZsb2F0NjRBcnJheShuLmxlbmd0aCk7Zm9yKGxldCBzPTA7czxuLmxlbmd0aDsrK3MpbVtzXT1uLmF0KHMpO3JldHVybiBtfWV4cG9ydHtoIGFzIEkzU01lc2hXb3JrZXJIYW5kbGUsdSBhcyB0b1dhc21Nb2RpZmljYXRpb259O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbnZhciBFLEk7IWZ1bmN0aW9uKEUpe0VbRS5WSVNJQkxFX09OTFk9MF09XCJWSVNJQkxFX09OTFlcIixFW0UuQUxMPTFdPVwiQUxMXCIsRVtFLlFVRVJZQUJMRT0yXT1cIlFVRVJZQUJMRVwifShFfHwoRT17fSkpLGZ1bmN0aW9uKEUpe0VbRS5FWElUPTBdPVwiRVhJVFwiLEVbRS5DT05USU5VRT0xXT1cIkNPTlRJTlVFXCIsRVtFLlNLSVA9Ml09XCJTS0lQXCJ9KEl8fChJPXt9KSk7ZXhwb3J0e0UgYXMgRm9yQWxsRmVhdHVyZXNNb2RlLEkgYXMgRm9yQWxsRmVhdHVyZXNSZXR1cm5UeXBlfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnQgZSBmcm9tXCIuLi8uLi8uLi9nZW9tZXRyeS9TcGF0aWFsUmVmZXJlbmNlLmpzXCI7aW1wb3J0e3RvRmxvYXQ2NEFycmF5IGFzIHJ9ZnJvbVwiLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9Eb3VibGVBcnJheS5qc1wiO2ltcG9ydCB0IGZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvTWVzaEdlb3JlZmVyZW5jZWRSZWxhdGl2ZVZlcnRleFNwYWNlLmpzXCI7aW1wb3J0IG8gZnJvbVwiLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9NZXNoTG9jYWxWZXJ0ZXhTcGFjZS5qc1wiO2ltcG9ydHthIGFzIG4sbiBhcyBzfWZyb21cIi4uLy4uLy4uL2NodW5rcy92ZWMzMi5qc1wiO2ltcG9ydHtJbmRleFR5cGUgYXMgaX1mcm9tXCIuLi8uLi8uLi9saWJzL2kzcy9lbnVtcy5qc1wiO2ltcG9ydHtnZXQgYXMgYX1mcm9tXCIuLi8uLi8uLi9saWJzL2kzcy9JM1NNb2R1bGUuanNcIjtpbXBvcnR7Tm9kZUlNTW9kaWZpY2F0aW9uSW1wYWN0IGFzIGZ9ZnJvbVwiLi9pM3MvSTNTTm9kZS5qc1wiO2FzeW5jIGZ1bmN0aW9uIGwoZSl7Zz1hd2FpdCBqKCk7Y29uc3Qgcj1bZS5nZW9tZXRyeUJ1ZmZlcl07cmV0dXJue3Jlc3VsdDp3KGcsZSxyKSx0cmFuc2Zlckxpc3Q6cn19YXN5bmMgZnVuY3Rpb24gYyhlKXtnPWF3YWl0IGooKTtjb25zdCByPVtlLmdlb21ldHJ5QnVmZmVyXSx7Z2VvbWV0cnlCdWZmZXI6dH09ZSxvPXQuYnl0ZUxlbmd0aCxuPWcuX21hbGxvYyhvKSxzPW5ldyBVaW50OEFycmF5KGcuSEVBUFU4LmJ1ZmZlcixuLG8pO3Muc2V0KG5ldyBVaW50OEFycmF5KHQpKTtjb25zdCBpPWcuZHJhY29EZWNvbXByZXNzUG9pbnRDbG91ZERhdGEobixzLmJ5dGVMZW5ndGgpO2lmKGcuX2ZyZWUobiksaS5lcnJvci5sZW5ndGg+MCl0aHJvdyBuZXcgRXJyb3IoYGkzcy53YXNtOiAke2kuZXJyb3J9YCk7Y29uc3QgYT1pLmZlYXR1cmVJZHM/Lmxlbmd0aD4wP2kuZmVhdHVyZUlkcy5zbGljZSgpOm51bGwsZj1pLnBvc2l0aW9ucy5zbGljZSgpO3JldHVybiBhJiZyLnB1c2goYS5idWZmZXIpLHIucHVzaChmLmJ1ZmZlcikse3Jlc3VsdDp7cG9zaXRpb25zOmYsZmVhdHVyZUlkczphfSx0cmFuc2Zlckxpc3Q6cn19YXN5bmMgZnVuY3Rpb24gdShlKXthd2FpdCBqKCksTChlKTtjb25zdCByPXtidWZmZXI6ZS5idWZmZXJ9O3JldHVybntyZXN1bHQ6cix0cmFuc2Zlckxpc3Q6W3IuYnVmZmVyXX19YXN5bmMgZnVuY3Rpb24gbShlKXthd2FpdCBqKCksRShlKX1hc3luYyBmdW5jdGlvbiB5KGUpe2c9YXdhaXQgaigpLGcuc2V0TGVnYWN5U2NoZW1hKGUuY29udGV4dCxlLmpzb25TY2hlbWEpfWFzeW5jIGZ1bmN0aW9uIHAobil7Y29uc3R7bG9jYWxNYXRyaXg6cyxvcmlnaW46aSxwb3NpdGlvbnM6YSx2ZXJ0ZXhTcGFjZTpmLGxvY2FsTW9kZTpsfT1uLGM9ZS5mcm9tSlNPTihuLmluU3BhdGlhbFJlZmVyZW5jZSksdT1lLmZyb21KU09OKG4ub3V0U3BhdGlhbFJlZmVyZW5jZSk7bGV0IG07aWYoXCJnZW9yZWZlcmVuY2VkXCI9PT1mLnR5cGUpe2NvbnN0W3twcm9qZWN0QnVmZmVyOmV9LHtpbml0aWFsaXplUHJvamVjdGlvbjpyfV09YXdhaXQgUHJvbWlzZS5hbGwoW2ltcG9ydChcIi4uLy4uLy4uL2dlb21ldHJ5L3Byb2plY3Rpb24vcHJvamVjdEJ1ZmZlci5qc1wiKSxpbXBvcnQoXCIuLi8uLi8uLi9nZW9tZXRyeS9wcm9qZWN0aW9uLmpzXCIpXSk7YXdhaXQgcihjLHUpLG09bmV3IEZsb2F0NjRBcnJheShhLmxlbmd0aCksZShhLGMsMCxtLHUsMCxtLmxlbmd0aC8zKX1lbHNle2NvbnN0IGU9XCJnZW9yZWZlcmVuY2VkUmVsYXRpdmVcIj09PWYudHlwZT90LmZyb21KU09OKGYpOm8uZnJvbUpTT04oZikse3Byb2plY3Q6bn09YXdhaXQgaW1wb3J0KFwiLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9tZXNoVXRpbHMvZ2VvcmVmZXJlbmNlLmpzXCIpO209cihuKHtwb3NpdGlvbnM6YSx0cmFuc2Zvcm06cz97bG9jYWxNYXRyaXg6c306dm9pZCAwLHZlcnRleFNwYWNlOmUsaW5TcGF0aWFsUmVmZXJlbmNlOmMsb3V0U3BhdGlhbFJlZmVyZW5jZTp1LGxvY2FsTW9kZTpsfSkpfWNvbnN0IHk9bS5sZW5ndGgsW3AsZCxiXT1pO2ZvcihsZXQgZT0wO2U8eTtlKz0zKW1bZV0tPXAsbVtlKzFdLT1kLG1bZSsyXS09YjtyZXR1cm57cmVzdWx0Ontwcm9qZWN0ZWQ6bSxvcmlnaW5hbDphfSx0cmFuc2Zlckxpc3Q6W20uYnVmZmVyLGEuYnVmZmVyXX19YXN5bmMgZnVuY3Rpb24gZCh7bm9ybWFsTWF0cml4OmUsbm9ybWFsczpyfSl7Y29uc3QgdD1uZXcgRmxvYXQzMkFycmF5KHIubGVuZ3RoKTtyZXR1cm4gbih0LHIsZSkscyh0LHQpLHtyZXN1bHQ6e3RyYW5zZm9ybWVkOnQsb3JpZ2luYWw6cn0sdHJhbnNmZXJMaXN0Olt0LmJ1ZmZlcixyLmJ1ZmZlcl19fWZ1bmN0aW9uIGIoZSl7UyhlKX1sZXQgaCxnO2Z1bmN0aW9uIEUoZSl7aWYoIWcpcmV0dXJuO2NvbnN0IHI9ZS5tb2RpZmljYXRpb25zLHQ9Zy5fbWFsbG9jKDgqci5sZW5ndGgpLG89bmV3IEZsb2F0NjRBcnJheShnLkhFQVBVOC5idWZmZXIsdCxyLmxlbmd0aCk7Zm9yKGxldCBuPTA7bjxyLmxlbmd0aDsrK24pb1tuXT1yW25dO2cuc2V0TW9kaWZpY2F0aW9ucyhlLmNvbnRleHQsdCxyLmxlbmd0aCxlLmlzR2VvZGV0aWMpLGcuX2ZyZWUodCl9ZnVuY3Rpb24gdyhlLHIsdCl7Y29uc3R7Y29udGV4dDpvLGxvY2FsT3JpZ2luOm4sZ2xvYmFsVHJhZm86cyxtYnM6YSxvYmI6ZixlbGV2YXRpb25PZmZzZXQ6bCxnZW9tZXRyeUJ1ZmZlcjpjLGdlb21ldHJ5RGVzY3JpcHRvcjp1LGluZGV4VG9WZXJ0ZXhQcm9qZWN0b3I6bSx2ZXJ0ZXhUb1JlbmRlclByb2plY3Rvcjp5fT1yLHA9ZS5fbWFsbG9jKGMuYnl0ZUxlbmd0aCksZD0zMyxiPWUuX21hbGxvYyhkKkZsb2F0NjRBcnJheS5CWVRFU19QRVJfRUxFTUVOVCksaD1uZXcgVWludDhBcnJheShlLkhFQVBVOC5idWZmZXIscCxjLmJ5dGVMZW5ndGgpO2guc2V0KG5ldyBVaW50OEFycmF5KGMpKTtjb25zdCBnPW5ldyBGbG9hdDY0QXJyYXkoZS5IRUFQVTguYnVmZmVyLGIsZCk7XyhnLG4pO2xldCBFPWcuYnl0ZU9mZnNldCszKmcuQllURVNfUEVSX0VMRU1FTlQsdz1uZXcgRmxvYXQ2NEFycmF5KGcuYnVmZmVyLEUpO18odyxzKSxFKz0xNipnLkJZVEVTX1BFUl9FTEVNRU5ULHc9bmV3IEZsb2F0NjRBcnJheShnLmJ1ZmZlcixFKSxfKHcsYSksRSs9NCpnLkJZVEVTX1BFUl9FTEVNRU5ULG51bGwhPWYmJih3PW5ldyBGbG9hdDY0QXJyYXkoZy5idWZmZXIsRSksXyh3LGYuY2VudGVyKSxFKz0zKmcuQllURVNfUEVSX0VMRU1FTlQsdz1uZXcgRmxvYXQ2NEFycmF5KGcuYnVmZmVyLEUpLF8odyxmLmhhbGZTaXplKSxFKz0zKmcuQllURVNfUEVSX0VMRU1FTlQsdz1uZXcgRmxvYXQ2NEFycmF5KGcuYnVmZmVyLEUpLF8odyxmLnF1YXRlcm5pb24pKTtjb25zdCBBPXUsTD17aXNEcmFjbzohMSxpc0xlZ2FjeTohMSxjb2xvcjpyLmxheW91dHMuc29tZSgoZT0+ZS5zb21lKChlPT5cImNvbG9yXCI9PT1lLm5hbWUpKSkpLG5vcm1hbDpyLm5lZWROb3JtYWxzJiZyLmxheW91dHMuc29tZSgoZT0+ZS5zb21lKChlPT5cIm5vcm1hbENvbXByZXNzZWRcIj09PWUubmFtZSkpKSksdXYwOnIubGF5b3V0cy5zb21lKChlPT5lLnNvbWUoKGU9PlwidXYwXCI9PT1lLm5hbWUpKSkpLHV2UmVnaW9uOnIubGF5b3V0cy5zb21lKChlPT5lLnNvbWUoKGU9PlwidXZSZWdpb25cIj09PWUubmFtZSkpKSksZmVhdHVyZUluZGV4OkEuZmVhdHVyZUluZGV4fSxTPWUucHJvY2VzcyhvLCEhci5vYmIscCxoLmJ5dGVMZW5ndGgsQSxMLGIsbCxtLHksci5ub3JtYWxSZWZlcmVuY2VGcmFtZSk7aWYoZS5fZnJlZShiKSxlLl9mcmVlKHApLFMuZXJyb3IubGVuZ3RoPjApdGhyb3cgbmV3IEVycm9yKGBpM3Mud2FzbTogJHtTLmVycm9yfWApO2lmKFMuZGlzY2FyZGVkKXJldHVybiBudWxsO2NvbnN0IEk9Uy5jb21wb25lbnRPZmZzZXRzLmxlbmd0aD4wP1MuY29tcG9uZW50T2Zmc2V0cy5zbGljZSgpOm51bGwsaj1TLmZlYXR1cmVJZHMubGVuZ3RoPjA/Uy5mZWF0dXJlSWRzLnNsaWNlKCk6bnVsbCxNPVMuYW5jaG9ySWRzLmxlbmd0aD4wP0FycmF5LmZyb20oUy5hbmNob3JJZHMpOm51bGwsUD1TLmFuY2hvcnMubGVuZ3RoPjA/QXJyYXkuZnJvbShTLmFuY2hvcnMpOm51bGwsVD1TLmludGVybGVhdmVkVmVydGVkRGF0YS5zbGljZSgpLmJ1ZmZlcix4PVMuaW5kaWNlc1R5cGU9PT1pLkludDE2P25ldyBVaW50MTZBcnJheShTLmluZGljZXMuYnVmZmVyLFMuaW5kaWNlcy5ieXRlT2Zmc2V0LFMuaW5kaWNlcy5ieXRlTGVuZ3RoLzIpLnNsaWNlKCk6bmV3IFVpbnQzMkFycmF5KFMuaW5kaWNlcy5idWZmZXIsUy5pbmRpY2VzLmJ5dGVPZmZzZXQsUy5pbmRpY2VzLmJ5dGVMZW5ndGgvNCkuc2xpY2UoKSxSPVMucG9zaXRpb25zLnNsaWNlKCksVT1TLnBvc2l0aW9uSW5kaWNlc1R5cGU9PT1pLkludDE2P25ldyBVaW50MTZBcnJheShTLnBvc2l0aW9uSW5kaWNlcy5idWZmZXIsUy5wb3NpdGlvbkluZGljZXMuYnl0ZU9mZnNldCxTLnBvc2l0aW9uSW5kaWNlcy5ieXRlTGVuZ3RoLzIpLnNsaWNlKCk6bmV3IFVpbnQzMkFycmF5KFMucG9zaXRpb25JbmRpY2VzLmJ1ZmZlcixTLnBvc2l0aW9uSW5kaWNlcy5ieXRlT2Zmc2V0LFMucG9zaXRpb25JbmRpY2VzLmJ5dGVMZW5ndGgvNCkuc2xpY2UoKSx2PXtsYXlvdXQ6ci5sYXlvdXRzWzBdLGludGVybGVhdmVkVmVydGV4RGF0YTpULGluZGljZXM6eCxoYXNDb2xvcnM6Uy5oYXNDb2xvcnMsaGFzTW9kaWZpY2F0aW9uczpTLmhhc01vZGlmaWNhdGlvbnMscG9zaXRpb25EYXRhOntkYXRhOlIsaW5kaWNlczpVfX07cmV0dXJuIGomJnQucHVzaChqLmJ1ZmZlciksSSYmdC5wdXNoKEkuYnVmZmVyKSx0LnB1c2goVCksdC5wdXNoKHguYnVmZmVyKSx0LnB1c2goUi5idWZmZXIpLHQucHVzaChVLmJ1ZmZlcikse2NvbXBvbmVudE9mZnNldHM6SSxmZWF0dXJlSWRzOmosYW5jaG9ySWRzOk0sYW5jaG9yczpQLHRyYW5zZm9ybWVkR2VvbWV0cnk6dixvYmI6Uy5vYmJ9fWZ1bmN0aW9uIEEoZSl7cmV0dXJuIDA9PT1lP2YuVW5tb2RpZmllZDoxPT09ZT9mLlBvdGVudGlhbGx5TW9kaWZpZWQ6Mj09PWU/Zi5DdWxsZWQ6Zi5Vbmtub3dufWZ1bmN0aW9uIEwoZSl7aWYoIWcpcmV0dXJuO2NvbnN0e2NvbnRleHQ6cixidWZmZXI6dH09ZSxvPWcuX21hbGxvYyh0LmJ5dGVMZW5ndGgpLG49dC5ieXRlTGVuZ3RoL0Zsb2F0NjRBcnJheS5CWVRFU19QRVJfRUxFTUVOVCxzPW5ldyBGbG9hdDY0QXJyYXkoZy5IRUFQVTguYnVmZmVyLG8sbiksaT1uZXcgRmxvYXQ2NEFycmF5KHQpO3Muc2V0KGkpLGcuZmlsdGVyT0JCcyhyLG8sbiksaS5zZXQocyksZy5fZnJlZShvKX1mdW5jdGlvbiBTKGUpe2cmJjA9PT1nLmRlc3Ryb3koZSkmJihnPW51bGwpfWZ1bmN0aW9uIF8oZSxyKXtmb3IobGV0IHQ9MDt0PHIubGVuZ3RoOysrdCllW3RdPXJbdF19YXN5bmMgZnVuY3Rpb24gSSgpe2d8fGF3YWl0IGooKX1mdW5jdGlvbiBqKCl7cmV0dXJuIGc/UHJvbWlzZS5yZXNvbHZlKGcpOihofHwoaD1hKCkudGhlbigoZT0+KGc9ZSxoPW51bGwsZykpKSksaCl9Y29uc3QgTT17dHJhbnNmb3JtOihlLHIpPT5nJiZ3KGcsZSxyKSxkZXN0cm95OlN9O2V4cG9ydHtiIGFzIGRlc3Ryb3lDb250ZXh0LGMgYXMgZHJhY29EZWNvbXByZXNzUG9pbnRDbG91ZERhdGEsdSBhcyBmaWx0ZXJPYmJzRm9yTW9kaWZpY2F0aW9ucyxMIGFzIGZpbHRlck9iYnNGb3JNb2RpZmljYXRpb25zU3luYyxJIGFzIGluaXRpYWxpemUsQSBhcyBpbnRlcnByZXRPYmJNb2RpZmljYXRpb25SZXN1bHRzLGwgYXMgcHJvY2VzcyxwIGFzIHByb2plY3QseSBhcyBzZXRMZWdhY3lTY2hlbWEsbSBhcyBzZXRNb2RpZmljYXRpb25zLEUgYXMgc2V0TW9kaWZpY2F0aW9uc1N5bmMsTSBhcyB0ZXN0LGQgYXMgdHJhbnNmb3JtTm9ybWFsc307XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e3JlbW92ZVVub3JkZXJlZCBhcyB0fWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvYXJyYXlVdGlscy5qc1wiO2ltcG9ydHttYWtlSGFuZGxlIGFzIGV9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9oYW5kbGVVdGlscy5qc1wiO2ltcG9ydHtGb3JBbGxGZWF0dXJlc1JldHVyblR5cGUgYXMgaX1mcm9tXCIuLi9JSTNTTWVzaFZpZXczRC5qc1wiO2NsYXNzIHN7Y29uc3RydWN0b3IoKXt0aGlzLmlkcz1uZXcgU2V0fX1jbGFzcyBoe2NvbnN0cnVjdG9yKHtjb2xsZWN0aW9uOnQsZm9yQWxsRmVhdHVyZXM6ZSxmb3JBbGxGZWF0dXJlc09mTm9kZTppfSl7dGhpcy5faGlnaGxpZ2h0cz1bXSx0aGlzLl9jb2xsZWN0aW9uPXQsdGhpcy5fZm9yQWxsRmVhdHVyZXM9ZSx0aGlzLl9mb3JBbGxGZWF0dXJlc09mTm9kZT1pfWRlc3Ryb3koKXt0aGlzLl9oaWdobGlnaHRzLmZvckVhY2goKHQ9PnRoaXMuX3JlbGVhc2VTZXQodCkpKSx0aGlzLl9oaWdobGlnaHRzPW51bGx9YWNxdWlyZVNldCgpe2NvbnN0IGk9bmV3IHM7dGhpcy5faGlnaGxpZ2h0cy5wdXNoKGkpO2NvbnN0IGg9ZSgoKCk9Pnt0aGlzLl9oaWdobGlnaHRzJiYodGhpcy5fcmVsZWFzZVNldChpKSx0KHRoaXMuX2hpZ2hsaWdodHMsaSkpfSkpO3JldHVybntzZXQ6aSxoYW5kbGU6aH19c2V0RmVhdHVyZUlkcyh0LGUpe2UuZm9yRWFjaCgoZT0+dC5pZHMuYWRkKGUpKSksdGhpcy5faW5pdGlhbGl6ZVNldCh0KX1faW5pdGlhbGl6ZVNldCh0KXt0aGlzLl9mb3JBbGxGZWF0dXJlcygoKGUscyxoKT0+KHQuaWRzLmhhcyhlKSYmdGhpcy5fY29sbGVjdGlvbi5hZGRDb21wb25lbnRIaWdobGlnaHQoaC5vYmplY3RIYW5kbGUscyksaS5DT05USU5VRSkpKX1fcmVsZWFzZVNldCh0KXt0aGlzLl9mb3JBbGxGZWF0dXJlcygoKGUscyxoKT0+KHQuaWRzLmhhcyhlKSYmdGhpcy5fY29sbGVjdGlvbi5yZW1vdmVDb21wb25lbnRIaWdobGlnaHQoaC5vYmplY3RIYW5kbGUscyksaS5DT05USU5VRSkpKX1vYmplY3RDcmVhdGVkKHQpe3RoaXMuX2hpZ2hsaWdodHMuZm9yRWFjaCgoZT0+e3RoaXMuX2ZvckFsbEZlYXR1cmVzT2ZOb2RlKHQsKChzLGgpPT4oZS5pZHMuaGFzKHMpJiZ0aGlzLl9jb2xsZWN0aW9uLmFkZENvbXBvbmVudEhpZ2hsaWdodCh0Lm9iamVjdEhhbmRsZSxoKSxpLkNPTlRJTlVFKSkpfSkpfW9iamVjdERlbGV0ZWQodCl7dGhpcy5fY29sbGVjdGlvbi5jbGVhckhpZ2hsaWdodHModC5vYmplY3RIYW5kbGUpfX1leHBvcnR7aCBhcyBkZWZhdWx0fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7XyBhcyBlfWZyb21cIi4uLy4uLy4uLy4uL2NodW5rcy90c2xpYi5lczYuanNcIjtpbXBvcnQgdCBmcm9tXCIuLi8uLi8uLi8uLi9jb3JlL0FjY2Vzc29yLmpzXCI7aW1wb3J0e3Byb3BlcnR5IGFzIHN9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9wcm9wZXJ0eS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZW5zdXJlVHlwZS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vY29yZS9hcnJheVV0aWxzLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi9jb3JlL2hhcy5qc1wiO2ltcG9ydHtzdWJjbGFzcyBhcyByfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvc3ViY2xhc3MuanNcIjtpbXBvcnR7RXh0ZW50U2V0IGFzIG99ZnJvbVwiLi4vZ3JhcGhpY3MvRXh0ZW50U2V0LmpzXCI7aW1wb3J0e1Rhc2tQcmlvcml0eSBhcyBufWZyb21cIi4uLy4uLy4uL3N1cHBvcnQvU2NoZWR1bGVyLmpzXCI7bGV0IGk9Y2xhc3MgZXh0ZW5kcyB0e2NvbnN0cnVjdG9yKGUsdCxzKXtzdXBlcih7fSksdGhpcy5fdXBkYXRlRXh0ZW50PXQsdGhpcy5fdXBkYXRlTm9kZT1zLHRoaXMucnVubmluZz0hMSx0aGlzLl9leHRlbnRTZXQ9bmV3IG8sdGhpcy5fbm9kZVNldD1uZXcgU2V0LHRoaXMuYWRkSGFuZGxlcyhlLnJlZ2lzdGVyVGFzayhuLkVMRVZBVElPTl9BTElHTk1FTlQsdGhpcykpfW5vcm1hbGl6ZUN0b3JBcmdzKCl7cmV0dXJue319YWRkRXh0ZW50KGUpe3RoaXMuX2V4dGVudFNldC5hZGQoZSksdGhpcy5ydW5uaW5nPSEwfXNjaGVkdWxlKGUpe3RoaXMuX25vZGVTZXQuYWRkKGUpLHRoaXMucnVubmluZz0hMH1yZW1vdmUoZSl7dGhpcy5fbm9kZVNldC5kZWxldGUoZSksdGhpcy5fdXBkYXRlUnVubmluZygpfXJ1blRhc2soZSl7Y29uc3QgdD10aGlzLl9leHRlbnRTZXQ7Zm9yKGUucnVuKCgoKT0+dC5tZXJnZShlKSkpOyF0LmVtcHR5JiYhZS5kb25lOyl7Y29uc3Qgcz10aGlzLl91cGRhdGVFeHRlbnQodC5wb3AoKSk7bnVsbCE9cyYmcy5mb3JBbGwoKGU9PnRoaXMuc2NoZWR1bGUoZSkpKSxlLm1hZGVQcm9ncmVzcygpfWlmKGUuZG9uZSlyZXR1cm47Y29uc3Qgcz10aGlzLl9ub2RlU2V0O2Zvcihjb25zdCByIG9mIHMpaWYocy5kZWxldGUociksdGhpcy5fdXBkYXRlTm9kZShyKSxlLm1hZGVQcm9ncmVzcygpLGUuZG9uZSlicmVhazt0aGlzLl91cGRhdGVSdW5uaW5nKCl9X3VwZGF0ZVJ1bm5pbmcoKXt0aGlzLnJ1bm5pbmc9dGhpcy5fbm9kZVNldC5zaXplPjB8fHRoaXMuX2V4dGVudFNldC5zaXplPjB9fTtlKFtzKCldLGkucHJvdG90eXBlLFwicnVubmluZ1wiLHZvaWQgMCksaT1lKFtyKFwiZXNyaS52aWV3cy4zZC5sYXllcnMuaTNzLkkzU0FzeW5jRWxldmF0aW9uVXBkYXRlci50c1wiKV0saSk7ZXhwb3J0e2kgYXMgSTNTQXN5bmNFbGV2YXRpb25VcGRhdGVyfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7cmVtb3ZlTWF5YmUgYXMgZX1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL21heWJlLmpzXCI7aW1wb3J0e2FkZEZyYW1lVGFzayBhcyBzfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvc2NoZWR1bGluZy5qc1wiO2ltcG9ydHtGYWRlRGlyZWN0aW9uIGFzIGR9ZnJvbVwiLi4vc3VwcG9ydC9JM1NMYXllclZpZXcuanNcIjtjbGFzcyBve2NvbnN0cnVjdG9yKCl7dGhpcy5sb2RDcm9zc2ZhZGVTaWduZWREdXJhdGlvbj0wfX1jbGFzcyBpe2NvbnN0cnVjdG9yKGUpe3RoaXMuX3ZpZXc9ZSx0aGlzLl9wcmVSZW5kZXJGcmFtZVRhc2tIYW5kbGU9bnVsbCx0aGlzLl9jdXJyZW50RnJhbWVTdGFydFRpbWU9bnVsbCx0aGlzLl9udW1GYWRpbmdOb2Rlcz0wfWRlc3Ryb3koKXt0aGlzLl9wcmVSZW5kZXJGcmFtZVRhc2tIYW5kbGU/LnJlbW92ZSgpLHRoaXMuX3ByZVJlbmRlckZyYW1lVGFza0hhbmRsZT1udWxsLHRoaXMuX3ZpZXc9bnVsbH1nZXQgdXBkYXRpbmcoKXtyZXR1cm4gdGhpcy5fbnVtRmFkaW5nTm9kZXM+MH1zdG9wTm9kZUZhZGluZyhzKXtudWxsIT1zLmxvZENyb3NzZmFkZVByb2dyZXNzJiYodGhpcy5fbnVtRmFkaW5nTm9kZXMtLSxzLmxvZENyb3NzZmFkZVByb2dyZXNzPW51bGwsMD09PXRoaXMuX251bUZhZGluZ05vZGVzJiYobnVsbCE9dGhpcy5fcHJlUmVuZGVyRnJhbWVUYXNrSGFuZGxlJiYodGhpcy5fcHJlUmVuZGVyRnJhbWVUYXNrSGFuZGxlPWUodGhpcy5fcHJlUmVuZGVyRnJhbWVUYXNrSGFuZGxlKSksdGhpcy5fdmlldy5ub3RpZnlMT0RVcGRhdGUoKSx0aGlzLl92aWV3Lm5vdGlmeVVwZGF0ZSgpKSl9X3N0YXJ0Tm9kZUZhZGluZyhlLGQsbyl7MD09PXRoaXMuX251bUZhZGluZ05vZGVzJiYodGhpcy5fcHJlUmVuZGVyRnJhbWVUYXNrSGFuZGxlPXMoe3ByZVJlbmRlcjplPT50aGlzLl91cGRhdGVBbGxOb2RlRmFkaW5nKGUpfSksdGhpcy5fdmlldy5ub3RpZnlMT0RVcGRhdGUoKSksbnVsbD09ZS5sb2RDcm9zc2ZhZGVQcm9ncmVzcyYmKHRoaXMuX251bUZhZGluZ05vZGVzKyssdGhpcy5fdmlldy5ub3RpZnlVcGRhdGUoKSksZS5sb2RDcm9zc2ZhZGVTaWduZWREdXJhdGlvbj1vLGUubG9kQ3Jvc3NmYWRlUHJvZ3Jlc3M9ZH1fdXBkYXRlQWxsTm9kZUZhZGluZyhlKXtjb25zdCBzPXRoaXMuX3ZpZXcubm9kZUNyb3NzZmFkaW5nRW5hYmxlZDt0aGlzLl92aWV3LmZvcmVhY2hDcm9zc2ZhZGVOb2RlKCgoZCxvKT0+e2lmKG51bGwhPW8/LmxvZENyb3NzZmFkZVByb2dyZXNzKXtjb25zdCBpPW8ubG9kQ3Jvc3NmYWRlU2lnbmVkRHVyYXRpb24sdD1pPjA/dGhpcy5fdmlldy5mdWxsT3BhY2l0eTowLHI9ZS5kZWx0YVRpbWUvaSxhPW8ubG9kQ3Jvc3NmYWRlUHJvZ3Jlc3MrTWF0aC5hYnMociksbj0hc3x8YT49MXx8MD09PWksbD10LShuPzA6aT4wPzE6LTEpKigxLWEpO24/KHRoaXMuc3RvcE5vZGVGYWRpbmcobyksaTwwJiZ0aGlzLl92aWV3Lm1hcmtOb2RlVG9SZW1vdmUoZCkpOm8ubG9kQ3Jvc3NmYWRlUHJvZ3Jlc3M9YSx0aGlzLl92aWV3LnNldE5vZGVPcGFjaXR5QnlJbmRleChkLGwpfX0pKSx0aGlzLl92aWV3LnJlbW92ZU1hcmtlZE5vZGVzKCl9c3RvcEFsbE5vZGVGYWRpbmcoKXt0aGlzLl92aWV3LmZvcmVhY2hDcm9zc2ZhZGVOb2RlKCgoZSxzKT0+e2lmKG51bGwhPXM/LmxvZENyb3NzZmFkZVByb2dyZXNzKXt0aGlzLnN0b3BOb2RlRmFkaW5nKHMpO2NvbnN0IGQ9cy5sb2RDcm9zc2ZhZGVTaWduZWREdXJhdGlvbjtkPDAmJnRoaXMuX3ZpZXcubWFya05vZGVUb1JlbW92ZShlKTtjb25zdCBvPWQ+MD90aGlzLl92aWV3LmZ1bGxPcGFjaXR5OjA7dGhpcy5fdmlldy5zZXROb2RlT3BhY2l0eUJ5SW5kZXgoZSxvKX19KSksdGhpcy5fdmlldy5yZW1vdmVNYXJrZWROb2RlcygpfWZhZGVOb2RlKGUscyxvLGkpe251bGw9PXRoaXMuX2N1cnJlbnRGcmFtZVN0YXJ0VGltZSYmKHRoaXMuX2N1cnJlbnRGcmFtZVN0YXJ0VGltZT1EYXRlLm5vdygpKTtjb25zdCByPXRoaXMuX3ZpZXcsYT1yLm5vZGVDcm9zc2ZhZGluZ0VuYWJsZWQsbj1vPT09ZC5GYWRlSW4/ci5mdWxsT3BhY2l0eTowLGw9YT9pP289PT1kLkZhZGVJbj9yLmxvZENyb3NzZmFkZWluRHVyYXRpb246ci5sb2RDcm9zc2ZhZGVvdXREdXJhdGlvbjpyLmxvZENyb3NzZmFkZVVuY292ZXJlZER1cmF0aW9uOjAsaD10aGlzLl92aWV3LmdldE5vZGVPcGFjaXR5QnlJbmRleChlKTtpZihhJiZoIT09biYmbD4wKXtjb25zdCBlPTEtTWF0aC5hYnMobi1oKTt0aGlzLl9zdGFydE5vZGVGYWRpbmcocyxlLHQobykqbCl9ZWxzZSB0aGlzLnN0b3BOb2RlRmFkaW5nKHMpLHRoaXMuX3ZpZXcuc2V0Tm9kZU9wYWNpdHlCeUluZGV4KGUsbiksbz09PWQuRmFkZU91dCYmdGhpcy5fdmlldy5yZW1vdmVOb2RlKGUpfWlzTm9kZUZ1bGx5RmFkZWRJbihlKXtjb25zdCBzPXRoaXMuX3ZpZXcuZ2V0Tm9kZUNyb3NzZmFkZU1ldGFEYXRhKGUpO3JldHVybiBudWxsPT1zfHxudWxsPT1zLmxvZENyb3NzZmFkZVByb2dyZXNzJiZ0aGlzLl92aWV3LmdldE5vZGVPcGFjaXR5QnlJbmRleChlKT09PXRoaXMuX3ZpZXcuZnVsbE9wYWNpdHl9fWZ1bmN0aW9uIHQoZSl7cmV0dXJuIGU9PT1kLkZhZGVJbj8xOi0xfWV4cG9ydHtpIGFzIEkzU0Nyb3NzZmFkZUhlbHBlcixvIGFzIE5vZGVDcm9zc2ZhZGVNZXRhRGF0YX07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e18gYXMgZX1mcm9tXCIuLi8uLi8uLi8uLi9jaHVua3MvdHNsaWIuZXM2LmpzXCI7aW1wb3J0IHQgZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9BY2Nlc3Nvci5qc1wiO2ltcG9ydCByIGZyb21cIi4uLy4uLy4uLy4uL2NvcmUvRXZlbnRlZC5qc1wiO2ltcG9ydCBpIGZyb21cIi4uLy4uLy4uLy4uL2NvcmUvTG9nZ2VyLmpzXCI7aW1wb3J0e3Byb3BlcnR5IGFzIG59ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9wcm9wZXJ0eS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZW5zdXJlVHlwZS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vY29yZS9hcnJheVV0aWxzLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi9jb3JlL2hhcy5qc1wiO2ltcG9ydHtzdWJjbGFzcyBhcyBzfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvc3ViY2xhc3MuanNcIjtpbXBvcnR7RiBhcyBvfWZyb21cIi4uLy4uLy4uLy4uL2NodW5rcy9tYXQ0LmpzXCI7aW1wb3J0e2F9ZnJvbVwiLi4vLi4vLi4vLi4vY2h1bmtzL21hdDRmNjQuanNcIjtpbXBvcnR7ZSBhcyBsfWZyb21cIi4uLy4uLy4uLy4uL2NodW5rcy92ZWMzLmpzXCI7aW1wb3J0e2N9ZnJvbVwiLi4vLi4vLi4vLi4vY2h1bmtzL3ZlYzNmNjQuanNcIjtpbXBvcnR7cHJvamVjdEJvdW5kaW5nU3BoZXJlIGFzIHB9ZnJvbVwiLi4vLi4vLi4vLi4vZ2VvbWV0cnkvcHJvamVjdGlvbi9wcm9qZWN0Qm91bmRpbmdTcGhlcmUuanNcIjtpbXBvcnR7ZW1wdHkgYXMgbSxleHBhbmQgYXMgdX1mcm9tXCIuLi8uLi8uLi8uLi9nZW9tZXRyeS9zdXBwb3J0L2FhQm91bmRpbmdSZWN0LmpzXCI7aW1wb3J0e2YgYXMgaH1mcm9tXCIuLi8uLi8uLi8uLi9jaHVua3Mvc3BoZXJlLmpzXCI7aW1wb3J0e25ld0ludGVyc2VjdG9yIGFzIGZ9ZnJvbVwiLi4vLi4vd2ViZ2wtZW5naW5lL2xpYi9JbnRlcnNlY3Rvci5qc1wiO2ltcG9ydHtTdG9yZVJlc3VsdHMgYXMgZH1mcm9tXCIuLi8uLi93ZWJnbC1lbmdpbmUvbGliL0ludGVyc2VjdG9ySW50ZXJmYWNlcy5qc1wiO2NvbnN0IHY9bSgpLGc9YSgpLHg9aCgwLDAsMCwwKSx5PWMoKSxqPWMoKSxFPWMoKTtsZXQgXz1jbGFzcyBleHRlbmRzKHIuRXZlbnRlZE1peGluKHQpKXtnZXQgc3BhdGlhbFJlZmVyZW5jZSgpe3JldHVybiB0aGlzLnZpZXc/LmVsZXZhdGlvblByb3ZpZGVyPy5zcGF0aWFsUmVmZXJlbmNlfWNvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMuX3RtcEV2ZW50PXtzcGF0aWFsUmVmZXJlbmNlOm51bGwsZXh0ZW50OnYsY29udGV4dDpcInNjZW5lXCJ9fWluaXRpYWxpemUoKXt0aGlzLnZpZXc9dGhpcy5sYXllclZpZXcudmlldyx0aGlzLl9yZW5kZXJDb29yZHNIZWxwZXI9dGhpcy52aWV3LnJlbmRlckNvb3Jkc0hlbHBlcix0aGlzLl9pbnRlcnNlY3Rvcj1mKHRoaXMudmlldy5zdGF0ZS52aWV3aW5nTW9kZSksdGhpcy5faW50ZXJzZWN0b3Iub3B0aW9ucy5zdG9yZT1kLk1JTix0aGlzLl90bXBFdmVudC5jb250ZXh0PXRoaXMuaW50ZXJzZWN0aW9uSGFuZGxlci5pc0dyb3VuZD9cImdyb3VuZFwiOlwic2NlbmVcIn1nZXRFbGV2YXRpb24oZSx0LHIsbil7Y29uc3Qgcz15O3NbMF09ZSxzWzFdPXQsc1syXT1yO2NvbnN0IG89dGhpcy5fcmVuZGVyQ29vcmRzSGVscGVyO2lmKCFvLnRvUmVuZGVyQ29vcmRzKHMsbixzKSlyZXR1cm4gaS5nZXRMb2dnZXIodGhpcykuZXJyb3IoXCJjb3VsZCBub3QgcHJvamVjdCBwb2ludCB0byBjb21wdXRlIGVsZXZhdGlvblwiKSxudWxsO2NvbnN0e2xheWVyVmlldzphLF9pbnRlcnNlY3RvcjpsLGludGVyc2VjdGlvbkhhbmRsZXI6Y309dGhpcyxwPWEuaTNzbGF5ZXIuZnVsbEV4dGVudCxtPW51bGwhPXAmJk51bWJlci5pc0Zpbml0ZShwLnhtaW4pJiZOdW1iZXIuaXNGaW5pdGUocC54bWF4KSYmTnVtYmVyLmlzRmluaXRlKHAueW1pbikmJk51bWJlci5pc0Zpbml0ZShwLnltYXgpJiZOdW1iZXIuaXNGaW5pdGUocC56bWluKSYmTnVtYmVyLmlzRmluaXRlKHAuem1heCk/e21pbjpwLnptaW4sbWF4OnAuem1heH06YS5lbGV2YXRpb25SYW5nZTtpZihudWxsPT1tKXJldHVybiBudWxsO2NvbnN0IHU9YS5lbGV2YXRpb25PZmZzZXQsaD1tLm1pbit1LGY9bS5tYXgrdSxkPWosdj1FO3JldHVybiBvLnNldEFsdGl0dWRlKGQsZixzKSxvLnNldEFsdGl0dWRlKHYsaCxzKSxsLnJlc2V0KGQsdixudWxsKSxjLmludGVyc2VjdChsLG51bGwsZCx2KSxsLnJlc3VsdHMubWluLmdldEludGVyc2VjdGlvblBvaW50KHMpP28uZ2V0QWx0aXR1ZGUocyk6bnVsbH1nZXRTcGhlcmVFbGV2YXRpb25Cb3VuZHMoZSx0KXtyZXR1cm4gcChlLHQseCx0aGlzLl9yZW5kZXJDb29yZHNIZWxwZXIuc3BhdGlhbFJlZmVyZW5jZSksdGhpcy5sYXllclZpZXcuZ2V0RWxldmF0aW9uUmFuZ2UoeCl9Z2V0Um9vdEVsZXZhdGlvbkJvdW5kcygpe2NvbnN0IGU9dGhpcy5sYXllclZpZXcuaTNzbGF5ZXIuZnVsbEV4dGVudDtyZXR1cm4gZT8uaGFzWj97bWluOmUuem1pbixtYXg6ZS56bWF4fTpudWxsfWxheWVyQ2hhbmdlZCgpe3RoaXMuc3BhdGlhbFJlZmVyZW5jZSYmKHRoaXMuX3RtcEV2ZW50LmV4dGVudD10aGlzLl9jb21wdXRlTGF5ZXJFeHRlbnQoKSx0aGlzLl90bXBFdmVudC5zcGF0aWFsUmVmZXJlbmNlPXRoaXMuc3BhdGlhbFJlZmVyZW5jZSx0aGlzLmVtaXQoXCJlbGV2YXRpb24tY2hhbmdlXCIsdGhpcy5fdG1wRXZlbnQpKX1vYmplY3RDaGFuZ2VkKGUpe3RoaXMuc3BhdGlhbFJlZmVyZW5jZSYmKHRoaXMuX3RtcEV2ZW50LmV4dGVudD10aGlzLl9jb21wdXRlT2JqZWN0RXh0ZW50KGUpLHRoaXMuX3RtcEV2ZW50LnNwYXRpYWxSZWZlcmVuY2U9dGhpcy5zcGF0aWFsUmVmZXJlbmNlLHRoaXMuZW1pdChcImVsZXZhdGlvbi1jaGFuZ2VcIix0aGlzLl90bXBFdmVudCkpfV9jb21wdXRlT2JqZWN0RXh0ZW50KGUpe3JldHVybiBtKHYpLHRoaXMuX2V4cGFuZEV4dGVudChlLHYpLHZ9X2NvbXB1dGVMYXllckV4dGVudCgpe20odik7Zm9yKGNvbnN0IGUgb2YgdGhpcy5sYXllclZpZXcuZ2V0VmlzaWJsZU5vZGVzKCkpdGhpcy5fZXhwYW5kRXh0ZW50KGUsdik7cmV0dXJuIHZ9X2V4cGFuZEV4dGVudChlLHQpe2NvbnN0IHI9dGhpcy5zcGF0aWFsUmVmZXJlbmNlO2lmKG51bGw9PXIpcmV0dXJuO2NvbnN0IGk9dGhpcy5sYXllclZpZXcuZ2V0Tm9kZUNvbXBvbmVudE9iYihlKTtpZihudWxsIT1pKXtvKGcsaS5xdWF0ZXJuaW9uKSxnWzEyXT1pLmNlbnRlclswXSxnWzEzXT1pLmNlbnRlclsxXSxnWzE0XT1pLmNlbnRlclsyXTtmb3IobGV0IGU9MDtlPDg7KytlKXlbMF09MSZlP2kuaGFsZlNpemVbMF06LWkuaGFsZlNpemVbMF0seVsxXT0yJmU/aS5oYWxmU2l6ZVsxXTotaS5oYWxmU2l6ZVsxXSx5WzJdPTQmZT9pLmhhbGZTaXplWzJdOi1pLmhhbGZTaXplWzJdLGwoeSx5LGcpLHRoaXMuX3JlbmRlckNvb3Jkc0hlbHBlci5mcm9tUmVuZGVyQ29vcmRzKHkseSxyKSx1KHQseSx0KX19fTtlKFtuKHtjb25zdHJ1Y3RPbmx5OiEwfSldLF8ucHJvdG90eXBlLFwibGF5ZXJWaWV3XCIsdm9pZCAwKSxlKFtuKHtjb25zdHJ1Y3RPbmx5OiEwfSldLF8ucHJvdG90eXBlLFwiaW50ZXJzZWN0aW9uSGFuZGxlclwiLHZvaWQgMCksZShbbigpXSxfLnByb3RvdHlwZSxcInZpZXdcIix2b2lkIDApLGUoW24oKV0sXy5wcm90b3R5cGUsXCJzcGF0aWFsUmVmZXJlbmNlXCIsbnVsbCksXz1lKFtzKFwiZXNyaS52aWV3cy4zZC5sYXllcnMuaTNzLkkzU0VsZXZhdGlvblByb3ZpZGVyXCIpXSxfKTtjb25zdCBiPV87ZXhwb3J0e2IgYXMgZGVmYXVsdH07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e3QsZyBhcyBlfWZyb21cIi4uLy4uLy4uLy4uL2NodW5rcy92ZWMzLmpzXCI7aW1wb3J0e2MgYXMgcn1mcm9tXCIuLi8uLi8uLi8uLi9jaHVua3MvdmVjM2Y2NC5qc1wiO2ltcG9ydHtwcm9qZWN0QnVmZmVyIGFzIG99ZnJvbVwiLi4vLi4vLi4vLi4vZ2VvbWV0cnkvcHJvamVjdGlvbi9wcm9qZWN0QnVmZmVyLmpzXCI7aW1wb3J0e2NyZWF0ZSBhcyBuLHNldCBhcyBhLG5lZ2F0aXZlSW5maW5pdHkgYXMgbSxleHBhbmRXaXRoQnVmZmVyIGFzIHMsemVybyBhcyBmfWZyb21cIi4uLy4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvYWFCb3VuZGluZ0JveC5qc1wiO2ltcG9ydHtuZXdEb3VibGVBcnJheSBhcyB1fWZyb21cIi4uLy4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvRG91YmxlQXJyYXkuanNcIjtmdW5jdGlvbiBjKHQsZSxyKXtjb25zdCBuPXUoMjQpO3JldHVybiB1PT57bGV0IGM9dS5tZXRhLmZlYXR1cmVFeHRlbnRzO2lmKG51bGw9PWMpe2M9bmV3IEZsb2F0NjRBcnJheSg2KnUubWV0YS5mZWF0dXJlSWRzLmxlbmd0aCksdS5tZXRhLmZlYXR1cmVFeHRlbnRzPWM7Zm9yKGxldCB0PTA7dDxjLmxlbmd0aDt0Kz02KWNbdF09TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZfWNvbnN0IHA9bmV3IEZsb2F0NjRBcnJheShjLmJ1ZmZlciw2KnUuaW5kZXgqRmxvYXQ2NEFycmF5LkJZVEVTX1BFUl9FTEVNRU5ULDYpO3JldHVybiBwWzBdPT09TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZJiYoaSh1LmluZGV4LHIsdS5tZXRhLm9iamVjdEhhbmRsZSxuLDApLG8obixlLDAsbix0LDAsOCk/KGEocCxtKSxzKHAsbiwwLDgpKTphKHAsZikpLHB9fWZ1bmN0aW9uIGkocixvLG4sYSxtKXtjb25zdCBzPW8uZ2V0Q29tcG9uZW50QWFiYihuLHIsbCksZj1vLmdldE9iamVjdFRyYW5zZm9ybShuKTtmb3IobGV0IHU9MDt1PDg7Kyt1KUlbMF09MSZ1P3NbMF06c1szXSxJWzFdPTImdT9zWzFdOnNbNF0sSVsyXT00JnU/c1syXTpzWzVdLHQoSSxJLGYucm90YXRpb25TY2FsZSksZShJLEksZi5wb3NpdGlvbiksYVttKytdPUlbMF0sYVttKytdPUlbMV0sYVttKytdPUlbMl07cmV0dXJuIGF9Y29uc3QgcD0yNCxsPW4oKSxJPXIoKTtleHBvcnR7aSBhcyBib3VuZGluZ0JveENvcm5lclBvaW50cyxwIGFzIGJvdW5kaW5nQm94Q29ybmVyc1BvaW50c1N0cmlkZSxjIGFzIGNyZWF0ZUdldEZlYXR1cmVFeHRlbnR9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtWaWV3aW5nTW9kZSBhcyBlfWZyb21cIi4uLy4uLy4uL1ZpZXdpbmdNb2RlLmpzXCI7aW1wb3J0e2lzVmFsaWRPYmIgYXMgdCxpc1ZhbGlkTWJzIGFzIHJ9ZnJvbVwiLi9JM1NVdGlsLmpzXCI7aW1wb3J0e0kzc1RhcmdldCBhcyBpfWZyb21cIi4vSW50ZXJzZWN0b3IuanNcIjtpbXBvcnR7aW50ZXJzZWN0TGluZSBhcyBzfWZyb21cIi4uLy4uL3N1cHBvcnQvb3JpZW50ZWRCb3VuZGluZ0JveC5qc1wiO2ltcG9ydHtuZXdJbnRlcnNlY3RvclJlc3VsdCBhcyBufWZyb21cIi4uLy4uL3dlYmdsLWVuZ2luZS9saWIvSW50ZXJzZWN0b3IuanNcIjtpbXBvcnR7SW50ZXJzZWN0b3JUeXBlIGFzIGwsU3RvcmVSZXN1bHRzIGFzIG99ZnJvbVwiLi4vLi4vd2ViZ2wtZW5naW5lL2xpYi9JbnRlcnNlY3RvckludGVyZmFjZXMuanNcIjtpbXBvcnR7Z2V0VmVydGljYWxPZmZzZXRJM1MgYXMgY31mcm9tXCIuLi8uLi93ZWJnbC1lbmdpbmUvbGliL3ZlcnRpY2FsT2Zmc2V0VXRpbHMuanNcIjtjbGFzcyBke2NvbnN0cnVjdG9yKGUpe3RoaXMudHlwZT1sLkkzUyx0aGlzLl9uZWVkVmVydGljYWxPZmZzZXQ9ITEsdGhpcy5sYXllclVpZD1lLmxheWVyVWlkLHRoaXMuc3VibGF5ZXJVaWQ9ZS5zdWJsYXllclVpZCx0aGlzLl9jb2xsZWN0aW9uPWUuY29sbGVjdGlvbix0aGlzLl90cmF2ZXJzZU5vZGVIaWVyYXJjaHk9ZS50cmF2ZXJzZU5vZGVIaWVyYXJjaHksdGhpcy5zbGljZVBsYW5lRW5hYmxlZD1lLnNsaWNlUGxhbmVFbmFibGVkLHRoaXMuaXNHcm91bmQ9ZS5pc0dyb3VuZH11cGRhdGVFbGV2YXRpb25BbGlnblN0YXRlKHQscil7dGhpcy5fbmVlZFZlcnRpY2FsT2Zmc2V0PXQmJnI9PT1lLkdsb2JhbH1pbnRlcnNlY3QoZSxsLGQsdSl7Y29uc3QgZj1lLnJlc3VsdHMsYj1lLm9wdGlvbnMuc3RvcmU9PT1vLkFMTCxtPWUucmF5LmRpcmVjdGlvbixoPWUudG9sZXJhbmNlO2xldCBwPWU9PmUseT1lPT5lO2NvbnN0IGc9YyhudWxsIT1lLnZlcnRpY2FsT2Zmc2V0P2UudmVydGljYWxPZmZzZXQ6dGhpcy5fbmVlZFZlcnRpY2FsT2Zmc2V0PzA6bnVsbCk7bnVsbCE9ZS52ZXJ0aWNhbE9mZnNldCYmbnVsbCE9ZyYmKHA9ZT0+Zy5hcHBseVRvTWJzKGUpLHk9ZT0+Zy5hcHBseVRvT2JiKGUpKSx0aGlzLl90cmF2ZXJzZU5vZGVIaWVyYXJjaHkoKChvLGMpPT57aWYoMD09PW8uY2hpbGRyZW5Mb2FkZWQpcmV0dXJuITE7Y29uc3QgTz1udWxsIT1vLnNlcnZpY2VPYmJJblJlbmRlclNSJiZ0KG8uc2VydmljZU9iYkluUmVuZGVyU1IpP28uc2VydmljZU9iYkluUmVuZGVyU1I6bnVsbDtyZXR1cm4hKG51bGwhPU8mJiFzKHkoTyksZCxtLGgpKSYmKCFjfHxudWxsPT1PJiZyKG8ucmVuZGVyTWJzKSYmIWEocChvLnJlbmRlck1icyksZCxtLGgpfHxudWxsIT1vLmdlb21ldHJ5T2JiJiYhcyh5KG8uZ2VvbWV0cnlPYmIpLGQsbSxoKXx8dGhpcy5fY29sbGVjdGlvbi5pbnRlcnNlY3QoYyxkLHUsaCxnLCgodCxyLHMsYyk9PntpZihyPj0wKXtpZihudWxsIT1sJiYhbChkLHUscikpcmV0dXJuO2NvbnN0IGE9ZT0+e2NvbnN0IG49bmV3IGkodGhpcy5sYXllclVpZCx0aGlzLnN1YmxheWVyVWlkLG8uaW5kZXgsdCxjKTtlLnNldCh0aGlzLnR5cGUsbixyLHMpfTtpZih0aGlzLmlzR3JvdW5kJiYobnVsbD09Zi5ncm91bmQuZGlzdHx8cjxmLmdyb3VuZC5kaXN0KSYmYShmLmdyb3VuZCksZS5vcHRpb25zLmlzRmlsdGVyZWQpcmV0dXJuO2lmKChudWxsPT1mLm1pbi5kaXN0fHxyPGYubWluLmRpc3QpJiZhKGYubWluKSwobnVsbD09Zi5tYXguZGlzdHx8cj5mLm1heC5kaXN0KSYmYShmLm1heCksYil7Y29uc3QgdD1uKGUucmF5KTthKHQpLGUucmVzdWx0cy5hbGwucHVzaCh0KX19fSkpLCEwKX0pKX19ZnVuY3Rpb24gYShlLHQscixpPTApe2NvbnN0IHM9ZVszXStpLG49dFswXS1lWzBdLGw9dFsxXS1lWzFdLG89dFsyXS1lWzJdLGM9clswXSxkPXJbMV0sYT1yWzJdLHU9YypuK2QqbCthKm87cmV0dXJuIHUqdS0oYypjK2QqZCthKmEpKihuKm4rbCpsK28qby1zKnMpPj0wfWV4cG9ydHtkIGFzIEkzU0ludGVyc2VjdGlvbkhhbmRsZXJ9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtCeXRlU2l6ZVVuaXQgYXMgZX1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL0J5dGVTaXplVW5pdC5qc1wiO2ltcG9ydCB0IGZyb21cIi4uLy4uLy4uLy4uL2NvcmUvRXJyb3IuanNcIjtpbXBvcnR7b25BYm9ydCBhcyBzLHRocm93SWZBYm9ydGVkIGFzIHJ9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9wcm9taXNlVXRpbHMuanNcIjtjb25zdCBvPTE0O2NsYXNzIGl7Y29uc3RydWN0b3IodCxzLHI9byl7dGhpcy5fdmVyc2lvbj1yLHRoaXMuX2RiPW51bGwsdGhpcy5fcXVvdGFSZWR1Y3Rpb25Qcm9taXNlPW51bGwsdGhpcy5fZ2NDb3VudGVyPTAsdGhpcy5faGl0PTAsdGhpcy5fbWlzcz0wLHRoaXMuX2Rlc3Ryb3llZD0hMSx0aGlzLmdjRnJlcXVlbmN5PTUwLHRoaXMubWF4Qnl0ZVNpemU9ZS5HSUdBQllURVMsdGhpcy5xdW90YVJlZHVjdGlvbkZhY3Rvcj0uMix0aGlzLl9kYk5hbWU9dCx0aGlzLl9zdG9yZU5hbWU9c31pbml0KCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCgpPT57Y29uc3QgZT1pbmRleGVkREIub3Blbih0aGlzLl9kYk5hbWUsdGhpcy5fdmVyc2lvbik7cmV0dXJuIGUub251cGdyYWRlbmVlZGVkPXQ9Pntjb25zdCBzPWUucmVzdWx0LHI9ZS50cmFuc2FjdGlvbixvPXMub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucyh0aGlzLl9zdG9yZU5hbWUpP3Iub2JqZWN0U3RvcmUodGhpcy5fc3RvcmVOYW1lKTpzLmNyZWF0ZU9iamVjdFN0b3JlKHRoaXMuX3N0b3JlTmFtZSksaT1zLm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnMoXCJsYXN0X2FjY2Vzc1wiKT9yLm9iamVjdFN0b3JlKFwibGFzdF9hY2Nlc3NcIik6cy5jcmVhdGVPYmplY3RTdG9yZShcImxhc3RfYWNjZXNzXCIpO2kuaW5kZXhOYW1lcy5jb250YWlucyhcImRhdGVcIil8fGkuY3JlYXRlSW5kZXgoXCJkYXRlXCIsXCJkYXRlXCIse3VuaXF1ZTohMX0pLGkuaW5kZXhOYW1lcy5jb250YWlucyhcImJ5dGVTaXplXCIpfHxpLmNyZWF0ZUluZGV4KFwiYnl0ZVNpemVcIixcImJ5dGVTaXplXCIse3VuaXF1ZTohMX0pLHQub2xkVmVyc2lvbjx0aGlzLl92ZXJzaW9uJiYoby5jbGVhcigpLGkuY2xlYXIoKSl9LGMoZSl9KSkudGhlbigoZT0+e3RoaXMuX2Rlc3Ryb3llZD9lLmNsb3NlKCk6dGhpcy5fZGI9ZX0pKX1kZXN0cm95KCl7dGhpcy5fZGImJih0aGlzLl9kYi5jbG9zZSgpLHRoaXMuX2RiPW51bGwpLHRoaXMuX2Rlc3Ryb3llZD0hMH1nZXQgaW5pdGlhbGl6ZWQoKXtyZXR1cm4gbnVsbCE9dGhpcy5fZGJ9Z2V0SGl0UmF0ZSgpe3JldHVybiB0aGlzLl9oaXQvKHRoaXMuX2hpdCt0aGlzLl9taXNzKX1wdXQoZSxzKXtpZihudWxsPT10aGlzLl9kYilyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IHQoXCJpbmRleGVkYjpub3QtaW5pdGlhbGl6ZWRcIixcIkluZGV4ZWREQiBDYWNoZSBpcyBub3QgaW5pdGlhbGl6ZWRcIikpO3JldHVybihudWxsIT10aGlzLl9xdW90YVJlZHVjdGlvblByb21pc2U/dGhpcy5fcXVvdGFSZWR1Y3Rpb25Qcm9taXNlOlByb21pc2UucmVzb2x2ZSgpKS50aGVuKCgoKT0+dGhpcy5fcHV0KGUscykpKS5jYXRjaCgodD0+e2lmKHQmJlwiUXVvdGFFeGNlZWRlZEVycm9yXCI9PT10Lm5hbWUpcmV0dXJuIG51bGw9PXRoaXMuX3F1b3RhUmVkdWN0aW9uUHJvbWlzZSYmKHRoaXMuX3F1b3RhUmVkdWN0aW9uUHJvbWlzZT10aGlzLl9nZXRDYWNoZVNpemUoKS50aGVuKChlPT50aGlzLl9yZW1vdmVMZWFzdFJlY2VudGx5QWNjZXNzZWQocy5ieXRlU2l6ZStNYXRoLmNlaWwoZSp0aGlzLnF1b3RhUmVkdWN0aW9uRmFjdG9yKSkpKSx0aGlzLl9xdW90YVJlZHVjdGlvblByb21pc2UudGhlbigoKCk9PnRoaXMuX3F1b3RhUmVkdWN0aW9uUHJvbWlzZT1udWxsKSwoKCk9PnRoaXMuX3F1b3RhUmVkdWN0aW9uUHJvbWlzZT1udWxsKSkpLHRoaXMuX3F1b3RhUmVkdWN0aW9uUHJvbWlzZS50aGVuKCgoKT0+dGhpcy5fcHV0KGUscykpKTt0aHJvdyB0fSkpLnRoZW4oKCgpPT57dGhpcy5fZ2NDb3VudGVyLS0sdGhpcy5fZ2NDb3VudGVyPDAmJm51bGwhPXRoaXMuX2RiJiYodGhpcy5fZ2NDb3VudGVyPXRoaXMuZ2NGcmVxdWVuY3ksdGhpcy5fZ2V0Q2FjaGVTaXplKCkudGhlbigoZT0+dGhpcy5fcmVtb3ZlTGVhc3RSZWNlbnRseUFjY2Vzc2VkKGUtdGhpcy5tYXhCeXRlU2l6ZSkpKSl9KSl9Z2V0KGUsdCl7Y29uc3Qgbz10aGlzLl9kYjtpZihudWxsPT1vKXJldHVybiBQcm9taXNlLnJlc29sdmUodm9pZCAwKTtsZXQgaT1udWxsO3JldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgoKT0+e2NvbnN0IHI9by50cmFuc2FjdGlvbih0aGlzLl9zdG9yZU5hbWUsXCJyZWFkb25seVwiKTtpPXModCwoKCk9PntyLmFib3J0KCl9KSk7cmV0dXJuIGMoci5vYmplY3RTdG9yZSh0aGlzLl9zdG9yZU5hbWUpLmdldChlKSl9KSkudGhlbigodD0+e2lmKG51bGw9PXQpKyt0aGlzLl9taXNzO2Vsc2UgaWYodGhpcy5fZGIpeysrdGhpcy5faGl0O3RoaXMuX2RiLnRyYW5zYWN0aW9uKFwibGFzdF9hY2Nlc3NcIixcInJlYWR3cml0ZVwiKS5vYmplY3RTdG9yZShcImxhc3RfYWNjZXNzXCIpLnB1dCh7ZGF0ZTpEYXRlLm5vdygpLGJ5dGVTaXplOnQuYnl0ZVNpemV9LGUpfXJldHVybiBudWxsIT1pJiZpLnJlbW92ZSgpLHR9KSkuY2F0Y2goKCgpPT57Kyt0aGlzLl9taXNzLHIodCksbnVsbCE9aSYmaS5yZW1vdmUoKX0pKX1yZW1vdmUoZSl7Y29uc3QgdD10aGlzLl9kYjtyZXR1cm4gbnVsbD09dD9Qcm9taXNlLnJlc29sdmUoKTpQcm9taXNlLnJlc29sdmUoKS50aGVuKChhc3luYygpPT57Y29uc3Qgcz10LnRyYW5zYWN0aW9uKFt0aGlzLl9zdG9yZU5hbWUsXCJsYXN0X2FjY2Vzc1wiXSxcInJlYWR3cml0ZVwiKSxyPXMub2JqZWN0U3RvcmUodGhpcy5fc3RvcmVOYW1lKSxvPXMub2JqZWN0U3RvcmUoXCJsYXN0X2FjY2Vzc1wiKSxpPXIuZGVsZXRlKGUpLGE9by5kZWxldGUoZSk7YXdhaXQgUHJvbWlzZS5hbGwoW2MoaSksYyhhKSxuKHMpXSl9KSl9X3B1dChlLHQpe2NvbnN0IHM9dGhpcy5fZGI7aWYobnVsbD09cylyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7Y29uc3Qgcj1zLnRyYW5zYWN0aW9uKFt0aGlzLl9zdG9yZU5hbWUsXCJsYXN0X2FjY2Vzc1wiXSxcInJlYWR3cml0ZVwiKSxvPXIub2JqZWN0U3RvcmUodGhpcy5fc3RvcmVOYW1lKSxpPXIub2JqZWN0U3RvcmUoXCJsYXN0X2FjY2Vzc1wiKSxhPW8ucHV0KHQsZSksbD1pLnB1dCh7ZGF0ZTpEYXRlLm5vdygpLGJ5dGVTaXplOnQuYnl0ZVNpemV9LGUpO3JldHVybiBQcm9taXNlLmFsbChbYyhhKSxjKGwpLG4ocildKX1fcmVtb3ZlTGVhc3RSZWNlbnRseUFjY2Vzc2VkKGUpe2lmKGU8PTB8fCF0aGlzLl9kYilyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7Y29uc3QgdD10aGlzLl9kYi50cmFuc2FjdGlvbihbdGhpcy5fc3RvcmVOYW1lLFwibGFzdF9hY2Nlc3NcIl0sXCJyZWFkd3JpdGVcIikscz10Lm9iamVjdFN0b3JlKHRoaXMuX3N0b3JlTmFtZSkscj10Lm9iamVjdFN0b3JlKFwibGFzdF9hY2Nlc3NcIik7bGV0IG89MDtjb25zdCBpPXIuaW5kZXgoXCJkYXRlXCIpLm9wZW5DdXJzb3IobnVsbCxcIm5leHRcIik7cmV0dXJuIGkub25zdWNjZXNzPSgpPT57Y29uc3QgdD1pLnJlc3VsdDtudWxsIT10JiYobnVsbCE9dC52YWx1ZS5ieXRlU2l6ZSYmKG8rPXQudmFsdWUuYnl0ZVNpemUpLHMuZGVsZXRlKHQucHJpbWFyeUtleSksci5kZWxldGUodC5wcmltYXJ5S2V5KSxvPGUmJnQuY29udGludWUoKSl9LG4odCl9X2dldENhY2hlU2l6ZSgpe2NvbnN0IGU9dGhpcy5fZGI7aWYobnVsbD09ZSlyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKDApO2NvbnN0IHQ9ZS50cmFuc2FjdGlvbihcImxhc3RfYWNjZXNzXCIpLHM9dC5vYmplY3RTdG9yZShcImxhc3RfYWNjZXNzXCIpO2xldCByPTA7Y29uc3Qgbz1zLmluZGV4KFwiYnl0ZVNpemVcIikub3BlbktleUN1cnNvcigpO3JldHVybiBvLm9uc3VjY2Vzcz0oKT0+e2NvbnN0IGU9by5yZXN1bHQ7aWYoIWUpcmV0dXJuO2NvbnN0IHQ9ZS5rZXk7bnVsbCE9dCYmKHIrPXQpLGUuY29udGludWUoKX0sbih0KS50aGVuKCgoKT0+cikpfX1mdW5jdGlvbiBuKGUpe3JldHVybiBuZXcgUHJvbWlzZSgoKHQscyk9PntlLm9uY29tcGxldGU9KCk9PnQoKSxlLm9uZXJyb3I9KCk9PnMoZS5lcnJvciksZS5vbmFib3J0PSgpPT5zKGUuZXJyb3IpfSkpfWZ1bmN0aW9uIGMoZSl7cmV0dXJuIG5ldyBQcm9taXNlKCgodCxzKT0+e1wiZG9uZVwiPT09ZS5yZWFkeVN0YXRlP251bGwhPWUuZXJyb3I/cyhlLmVycm9yKTp0KGUucmVzdWx0KTooZS5vbnN1Y2Nlc3M9KCk9PnQoZS5yZXN1bHQpLGUub25lcnJvcj0oKT0+cyhlLmVycm9yKSl9KSl9ZXhwb3J0e2kgYXMgSURCQ2FjaGUsYyBhcyB3aGVuUmVxdWVzdCxuIGFzIHdoZW5UcmFuc2FjdGlvbn07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuY29uc3QgdD1uZXcgV2Vha01hcDtjbGFzcyBze2NvbnN0cnVjdG9yKHMsZSl7c3dpdGNoKHRoaXMuX21pc3M9MCx0aGlzLl9oaXQ9MCx0aGlzLmluaXRpYWxpemVkPSEwLGUpe2Nhc2VcImxheWVyXCI6dGhpcy5fZGF0YT1uZXcgTWFwO2JyZWFrO2Nhc2VcInZpZXdcIjp7Y29uc3QgZT10LmdldChzKTtpZihlKXt0aGlzLl9kYXRhPWU7YnJlYWt9Y29uc3QgaT1uZXcgTWFwO3RoaXMuX2RhdGE9aSx0LnNldChzLGkpfX19aW5pdCgpe3JldHVybiBQcm9taXNlLnJlc29sdmUoKX1hc3luYyBnZXQodCxzKXtpZih0aGlzLl9kYXRhLmhhcyh0KSlyZXR1cm4gdGhpcy5faGl0KyssdGhpcy5fZGF0YS5nZXQodCk/P3ZvaWQgMDt0aGlzLl9taXNzKyt9ZGVzdHJveSgpe31wdXQodCxzKXtyZXR1cm4gdGhpcy5fZGF0YS5zZXQodCxzKSxQcm9taXNlLnJlc29sdmUoKX1yZW1vdmUodCl7cmV0dXJuIHRoaXMuX2RhdGEuZGVsZXRlKHQpLFByb21pc2UucmVzb2x2ZSgpfWdldEhpdFJhdGUoKXtyZXR1cm4gdGhpcy5faGl0Lyh0aGlzLl9oaXQrdGhpcy5fbWlzcyl9fWV4cG9ydHtzIGFzIElEQk1vY2tDYWNoZX07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0IGUgZnJvbVwiLi4vLi4vLi4vY29yZS9FdmVudGVkLmpzXCI7aW1wb3J0e3NvbWVNYXAgYXMgdH1mcm9tXCIuLi8uLi8uLi9jb3JlL01hcFV0aWxzLmpzXCI7Y2xhc3MgciBleHRlbmRzIGV7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuX21hcD1uZXcgTWFwfWNsZWFyKCl7aWYodGhpcy5fbWFwLnNpemU+MCl7Y29uc3QgZT10aGlzLnRvQXJyYXkoKTt0aGlzLl9tYXAuY2xlYXIoKSx0aGlzLmVtaXQoXCJjaGFuZ2VcIix7YWRkZWQ6W10scmVtb3ZlZDplfSl9fWdldCBsZW5ndGgoKXtyZXR1cm4gdGhpcy5fbWFwLnNpemV9Z2V0KGUpe3JldHVybiB0aGlzLl9tYXAuZ2V0KGUpfWFkZE1hbnkoZSl7aWYoMD09PWUubGVuZ3RoKXJldHVybjtjb25zdCB0PW5ldyBTZXQ7Zm9yKGxldCBvPTA7bzxlLmxlbmd0aDtvKyspe2NvbnN0IHI9ZVtvXSxzPXIub2JqZWN0SWQsbj10aGlzLl9tYXAuZ2V0KHMpO24/KHQuYWRkKHMpLHIhPT1uJiYoZVtvXT1uKSxuLnJlZkNvdW50fHwobi5yZWZDb3VudD0wKSwrK24ucmVmQ291bnQpOihyLnJlZkNvdW50PTEsdGhpcy5fbWFwLnNldChzLHIpKX1jb25zdCByPXQuc2l6ZT4wP2UuZmlsdGVyKChlPT4hdC5oYXMoZS5vYmplY3RJZCkpKTplO3IubGVuZ3RoPjAmJnRoaXMuZW1pdChcImNoYW5nZVwiLHthZGRlZDpyLHJlbW92ZWQ6W119KX1yZW1vdmVNYW55KGUpe2NvbnN0IHQ9W107Zm9yKGNvbnN0IHIgb2YgZSl7Y29uc3QgZT1yLm9iamVjdElkLG89dGhpcy5fbWFwLmdldChlKTtudWxsIT1vJiYoIW8ucmVmQ291bnR8fC0tby5yZWZDb3VudDw9MCkmJih0aGlzLl9tYXAuZGVsZXRlKGUpLHQucHVzaChyKSl9dC5sZW5ndGg+MCYmdGhpcy5lbWl0KFwiY2hhbmdlXCIse2FkZGVkOltdLHJlbW92ZWQ6dH0pfXJlbW92ZU1hbnlCeU9iamVjdElkKGUpe2NvbnN0IHQ9W107Zm9yKGNvbnN0IHIgb2YgZSl7Y29uc3QgZT10aGlzLl9tYXAuZ2V0KHIpO251bGwhPWUmJighZS5yZWZDb3VudHx8LS1lLnJlZkNvdW50PD0wKSYmKHRoaXMuX21hcC5kZWxldGUociksdC5wdXNoKGUpKX10Lmxlbmd0aD4wJiZ0aGlzLmVtaXQoXCJjaGFuZ2VcIix7YWRkZWQ6W10scmVtb3ZlZDp0fSl9dG9BcnJheSgpe3JldHVyblsuLi50aGlzLl9tYXAudmFsdWVzKCldfWZpbmQoZSl7bGV0IHI7cmV0dXJuIHQodGhpcy5fbWFwLCh0PT4hIWUodCkmJihyPXQsITApKSkscn1mb3JFYWNoKGUpe3RoaXMuX21hcC5mb3JFYWNoKCh0PT5lKHQpKSl9fWV4cG9ydHtyIGFzIEdyYXBoaWNzTWFwfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnQgZSBmcm9tXCIuLi8uLi8uLi9jb3JlL0V2ZW50ZWQuanNcIjtpbXBvcnR7c29tZU1hcCBhcyB0fWZyb21cIi4uLy4uLy4uL2NvcmUvTWFwVXRpbHMuanNcIjtpbXBvcnR7R3JhcGhpY3NNYXAgYXMgc31mcm9tXCIuL0dyYXBoaWNzTWFwLmpzXCI7Y2xhc3MgaSBleHRlbmRzIGV7Y29uc3RydWN0b3IoZSl7c3VwZXIoKSx0aGlzLl9saW1pdD1lLHRoaXMuX2FsbD1uZXcgcyx0aGlzLl9hY3RpdmU9bmV3IGEodGhpcyksdGhpcy5fcGVuZGluZz1uZXcgTWFwLHRoaXMuX2hhbmRsZT10aGlzLl9hbGwub24oXCJjaGFuZ2VcIiwoZT0+dGhpcy5faGFuZGxlQ2hhbmdlcyhlKSkpfWRlc3Ryb3koKXt0aGlzLl9oYW5kbGUucmVtb3ZlKCl9Z2V0IGxlbmd0aCgpe3JldHVybiB0aGlzLl9hY3RpdmUubGVuZ3RofXRvQXJyYXkoKXtyZXR1cm4gdGhpcy5fYWN0aXZlLnRvQXJyYXkoKX1maW5kKGUpe3JldHVybiB0aGlzLl9hY3RpdmUuZmluZChlKX1mb3JFYWNoKGUpe3RoaXMuX2FjdGl2ZS5mb3JFYWNoKGUpfWFkZE1hbnkoZSl7dGhpcy5fYWxsLmFkZE1hbnkoZSl9cmVtb3ZlTWFueUJ5T2JqZWN0SWQoZSl7dGhpcy5fYWxsLnJlbW92ZU1hbnlCeU9iamVjdElkKGUpfV9oYW5kbGVDaGFuZ2VzKGUpe2xldCB0PWUucmVtb3ZlZDtpZih0aGlzLl9wZW5kaW5nLnNpemU+MCl7dD1uZXcgQXJyYXk7Zm9yKGNvbnN0IHMgb2YgZS5yZW1vdmVkKXRoaXMuX3BlbmRpbmcuZGVsZXRlKHMub2JqZWN0SWQpfHx0LnB1c2gocyl9bGV0IHM9dGhpcy5fbGltaXQtdGhpcy5fYWN0aXZlLmxlbmd0aCt0Lmxlbmd0aDtzPGUuYWRkZWQubGVuZ3RoJiYodGhpcy5fYWN0aXZlLnJlbW92ZU1hbnkodCksdD1bXSxoLnJlc2V0KDEtdGhpcy5fbGltaXQvKHRoaXMuX2FjdGl2ZS5sZW5ndGgrZS5hZGRlZC5sZW5ndGgpKSx0aGlzLl9hY3RpdmUuZm9yRWFjaCgoZT0+e2guc2FtcGxlKCkmJih0LnB1c2goZSksdGhpcy5fcGVuZGluZy5zZXQoZS5vYmplY3RJZCxlKSl9KSkscz10aGlzLl9saW1pdC10aGlzLl9hY3RpdmUubGVuZ3RoK3QubGVuZ3RoKTtsZXQgaT1lLmFkZGVkO2lmKHM8ZS5hZGRlZC5sZW5ndGgpe2k9bmV3IEFycmF5LGgucmVzZXQocy9lLmFkZGVkLmxlbmd0aCk7Zm9yKGNvbnN0IHQgb2YgZS5hZGRlZCloLnNhbXBsZSgpP2kucHVzaCh0KTp0aGlzLl9wZW5kaW5nLnNldCh0Lm9iamVjdElkLHQpfWNvbnN0IG49cy1pLmxlbmd0aDtuPjAmJnRoaXMuX3BlbmRpbmcuc2l6ZT4wJiYoaC5yZXNldChuL3RoaXMuX3BlbmRpbmcuc2l6ZSksdGhpcy5fcGVuZGluZy5mb3JFYWNoKChlPT57aC5zYW1wbGUoKSYmKGkucHVzaChlKSx0aGlzLl9wZW5kaW5nLmRlbGV0ZShlLm9iamVjdElkKSl9KSkpLHRoaXMuX2FjdGl2ZS5hZGRBbmRSZW1vdmUoaSx0KX19Y2xhc3Mgbntjb25zdHJ1Y3Rvcigpe3RoaXMuX3BlcmNlbnRhZ2U9MSx0aGlzLl9sYXN0PS0xLHRoaXMuX2luZGV4PTB9cmVzZXQoZSl7dGhpcy5fcGVyY2VudGFnZT1lLHRoaXMuX2xhc3Q9LTF9c2FtcGxlKCl7Y29uc3QgZT1NYXRoLmZsb29yKHRoaXMuX2luZGV4KnRoaXMuX3BlcmNlbnRhZ2UpO3JldHVybisrdGhpcy5faW5kZXgsZSE9PXRoaXMuX2xhc3QmJih0aGlzLl9sYXN0PWUsITApfX1jb25zdCBoPW5ldyBuO2NsYXNzIGF7Y29uc3RydWN0b3IoZSl7dGhpcy5fcGFyZW50PWUsdGhpcy5fbWFwPW5ldyBNYXB9Z2V0IGxlbmd0aCgpe3JldHVybiB0aGlzLl9tYXAuc2l6ZX1mb3JFYWNoKGUpe3RoaXMuX21hcC5mb3JFYWNoKCh0PT5lKHQpKSl9ZmluZChlKXtsZXQgcztyZXR1cm4gdCh0aGlzLl9tYXAsKHQ9PiEhZSh0KSYmKHM9dCwhMCkpKSxzfXRvQXJyYXkoKXtyZXR1cm5bLi4udGhpcy5fbWFwLnZhbHVlcygpXX1hZGRBbmRSZW1vdmUoZSx0KXtmb3IoY29uc3QgcyBvZiBlKXRoaXMuX21hcC5zZXQocy5vYmplY3RJZCxzKTtmb3IoY29uc3QgcyBvZiB0KXRoaXMuX21hcC5kZWxldGUocy5vYmplY3RJZCk7KGUubGVuZ3RoPjB8fHQubGVuZ3RoPjApJiZ0aGlzLl9wYXJlbnQuZW1pdChcImNoYW5nZVwiLHthZGRlZDplLHJlbW92ZWQ6dH0pfXJlbW92ZU1hbnkoZSl7Zm9yKGNvbnN0IHQgb2YgZSl0aGlzLl9tYXAuZGVsZXRlKHQub2JqZWN0SWQpO2UubGVuZ3RoPjAmJnRoaXMuX3BhcmVudC5lbWl0KFwiY2hhbmdlXCIse2FkZGVkOltdLHJlbW92ZWQ6ZX0pfX1leHBvcnR7aSBhcyBMaW1pdEdyYXBoaWNzTWFwfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==