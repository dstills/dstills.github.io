"use strict";
(self["webpackChunksynview"] = self["webpackChunksynview"] || []).push([["vendors-node_modules_arcgis_core_core_maybeUpdating_js-node_modules_arcgis_core_views_3d_laye-67f012"],{

/***/ "./node_modules/@arcgis/core/core/maybeUpdating.js":
/*!*********************************************************!*\
  !*** ./node_modules/@arcgis/core/core/maybeUpdating.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isUpdating: () => (/* binding */ u),
/* harmony export */   unwrapUpdating: () => (/* binding */ t),
/* harmony export */   updating: () => (/* binding */ n)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const n="updating";function t(n){return"updating"===n?null:n}function u(n){return"updating"===n}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/I3SPointsWorkerHandle.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/I3SPointsWorkerHandle.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I3SPointsWorkerHandle: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _core_workers_WorkerHandle_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/workers/WorkerHandle.js */ "./node_modules/@arcgis/core/core/workers/WorkerHandle.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class r extends _core_workers_WorkerHandle_js__WEBPACK_IMPORTED_MODULE_0__.WorkerHandle{constructor(e){super("SceneLayerWorker","dracoDecompressPointCloudData",{dracoDecompressPointCloudData:e=>[e.geometryBuffer]},e,{hasInitialize:!0})}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/SceneLayerGraphicsView3D.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/SceneLayerGraphicsView3D.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ re)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _Graphic_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../Graphic.js */ "./node_modules/@arcgis/core/Graphic.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../core/reactiveUtils.js */ "./node_modules/@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../core/typedArrayUtil.js */ "./node_modules/@arcgis/core/core/typedArrayUtil.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _chunks_vec3_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../chunks/vec3.js */ "./node_modules/@arcgis/core/chunks/vec3.js");
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../chunks/vec3f64.js */ "./node_modules/@arcgis/core/chunks/vec3f64.js");
/* harmony import */ var _geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../geometry/projection/projectBuffer.js */ "./node_modules/@arcgis/core/geometry/projection/projectBuffer.js");
/* harmony import */ var _geometry_projection_projectVectorToVector_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../geometry/projection/projectVectorToVector.js */ "./node_modules/@arcgis/core/geometry/projection/projectVectorToVector.js");
/* harmony import */ var _geometry_support_contains_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../geometry/support/contains.js */ "./node_modules/@arcgis/core/geometry/support/contains.js");
/* harmony import */ var _geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../geometry/support/DoubleArray.js */ "./node_modules/@arcgis/core/geometry/support/DoubleArray.js");
/* harmony import */ var _geometry_support_zscale_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../geometry/support/zscale.js */ "./node_modules/@arcgis/core/geometry/support/zscale.js");
/* harmony import */ var _layers_LayerConstants_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../layers/LayerConstants.js */ "./node_modules/@arcgis/core/layers/LayerConstants.js");
/* harmony import */ var _layers_graphics_dehydratedFeatures_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../layers/graphics/dehydratedFeatures.js */ "./node_modules/@arcgis/core/layers/graphics/dehydratedFeatures.js");
/* harmony import */ var _layers_graphics_dehydratedPoint_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../layers/graphics/dehydratedPoint.js */ "./node_modules/@arcgis/core/layers/graphics/dehydratedPoint.js");
/* harmony import */ var _layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../layers/graphics/hydratedFeatures.js */ "./node_modules/@arcgis/core/layers/graphics/hydratedFeatures.js");
/* harmony import */ var _layers_graphics_controllers_I3SOnDemandController_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../layers/graphics/controllers/I3SOnDemandController.js */ "./node_modules/@arcgis/core/layers/graphics/controllers/I3SOnDemandController.js");
/* harmony import */ var _layers_support_FeatureFilter_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../layers/support/FeatureFilter.js */ "./node_modules/@arcgis/core/layers/support/FeatureFilter.js");
/* harmony import */ var _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../../rest/support/Query.js */ "./node_modules/@arcgis/core/rest/support/Query.js");
/* harmony import */ var _support_basemapUtils_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../../../support/basemapUtils.js */ "./node_modules/@arcgis/core/support/basemapUtils.js");
/* harmony import */ var _I3SPointsWorkerHandle_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./I3SPointsWorkerHandle.js */ "./node_modules/@arcgis/core/views/3d/layers/I3SPointsWorkerHandle.js");
/* harmony import */ var _LayerView3D_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./LayerView3D.js */ "./node_modules/@arcgis/core/views/3d/layers/LayerView3D.js");
/* harmony import */ var _graphics_Graphics3DFeatureProcessor_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./graphics/Graphics3DFeatureProcessor.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DFeatureProcessor.js");
/* harmony import */ var _graphics_QueryEngine_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./graphics/QueryEngine.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/QueryEngine.js");
/* harmony import */ var _i3s_featureEditing_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./i3s/featureEditing.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/featureEditing.js");
/* harmony import */ var _i3s_I3SGraphicsMap_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./i3s/I3SGraphicsMap.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SGraphicsMap.js");
/* harmony import */ var _i3s_I3SOverrides_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./i3s/I3SOverrides.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SOverrides.js");
/* harmony import */ var _i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./i3s/I3SUtil.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SUtil.js");
/* harmony import */ var _support_DefinitionExpressionSceneLayerView_js__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./support/DefinitionExpressionSceneLayerView.js */ "./node_modules/@arcgis/core/views/3d/layers/support/DefinitionExpressionSceneLayerView.js");
/* harmony import */ var _support_fieldProperties_js__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./support/fieldProperties.js */ "./node_modules/@arcgis/core/views/3d/layers/support/fieldProperties.js");
/* harmony import */ var _support_PopupSceneLayerView_js__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./support/PopupSceneLayerView.js */ "./node_modules/@arcgis/core/views/3d/layers/support/PopupSceneLayerView.js");
/* harmony import */ var _support_SceneLayerViewRequiredFields_js__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./support/SceneLayerViewRequiredFields.js */ "./node_modules/@arcgis/core/views/3d/layers/support/SceneLayerViewRequiredFields.js");
/* harmony import */ var _support_debugFlags_js__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ../support/debugFlags.js */ "./node_modules/@arcgis/core/views/3d/support/debugFlags.js");
/* harmony import */ var _support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ../support/orientedBoundingBox.js */ "./node_modules/@arcgis/core/views/3d/support/orientedBoundingBox.js");
/* harmony import */ var _support_updatingProperties_js__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ../support/updatingProperties.js */ "./node_modules/@arcgis/core/views/3d/support/updatingProperties.js");
/* harmony import */ var _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ../webgl-engine/lib/Attribute.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Attribute.js");
/* harmony import */ var _webgl_engine_lib_UpdatePolicy_js__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ../webgl-engine/lib/UpdatePolicy.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/UpdatePolicy.js");
/* harmony import */ var _layers_SceneLayerView_js__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! ../../layers/SceneLayerView.js */ "./node_modules/@arcgis/core/views/layers/SceneLayerView.js");
/* harmony import */ var _layers_support_popupUtils_js__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! ../../layers/support/popupUtils.js */ "./node_modules/@arcgis/core/views/layers/support/popupUtils.js");
/* harmony import */ var _support_Scheduler_js__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! ../../support/Scheduler.js */ "./node_modules/@arcgis/core/views/support/Scheduler.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const X=(0,_support_fieldProperties_js__WEBPACK_IMPORTED_MODULE_34__.defineFieldProperties)();class ee{constructor(e,t,r,i){this.graphics=e,this.featureIds=t,this.attributeInfo=r,this.node=i}}let te=class extends((0,_support_DefinitionExpressionSceneLayerView_js__WEBPACK_IMPORTED_MODULE_33__.DefinitionExpressionSceneLayerView)((0,_support_PopupSceneLayerView_js__WEBPACK_IMPORTED_MODULE_35__.PopupSceneLayerView)((0,_LayerView3D_js__WEBPACK_IMPORTED_MODULE_26__.LayerView3D)(_layers_SceneLayerView_js__WEBPACK_IMPORTED_MODULE_42__["default"])))){constructor(){super(...arguments),this.type="scene-layer-graphics-3d",this._queryEngine=null,this._memCache=null,this._interactiveEditingSessions=new Map,this._pendingEditsQueue=Promise.resolve(),this.loadedGraphics=new _i3s_I3SGraphicsMap_js__WEBPACK_IMPORTED_MODULE_30__.I3SGraphicsMap(((e,t,r)=>oe(e,t,r)),(e=>this.processor.graphicsCore.recreateGraphics(e))),this.holeFilling="always",this.progressiveLoadFactor=1,this.supportsHeightUnitConversion=!0,this._coordinatesOutsideExtentErrors=0,this._maxCoordinatesOutsideExtentErrors=20}tryRecycleWith(e,t){return e.url===this.layer.url&&this._i3sOverrides.isEmpty?e.load(t).then((()=>{(0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_32__.checkRecyclable)(this.layer,e,this._i3sOverrides),this.layer=e,this._i3sOverrides.destroy();const t=this.view.resourceController?.memoryController;this._i3sOverrides=new _i3s_I3SOverrides_js__WEBPACK_IMPORTED_MODULE_31__.I3SOverrides({view:this.view,layer:e,memoryController:t}),(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.destroyMaybe)(this._queryEngine),this._setupQueryEngine(),this.processor.resetObjectStates()})):null}initialize(){this.addResolvingPromise(this.layer.indexInfo);const e=this.view.resourceController?.memoryController;this._i3sOverrides=new _i3s_I3SOverrides_js__WEBPACK_IMPORTED_MODULE_31__.I3SOverrides({view:this.view,layer:this.layer,memoryController:e}),(0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_32__.checkSpatialReferences)(this.layer,this.view.spatialReference,this.view.viewingMode),this._fieldsHelper=new _support_SceneLayerViewRequiredFields_js__WEBPACK_IMPORTED_MODULE_36__.SceneLayerViewRequiredFields({layerView:this}),this._updatingHandles.add((()=>this.layer.rangeInfos),(e=>this._rangeInfosChanged(e)),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_5__.initial),this._updatingHandles.add((()=>this.layer.renderer),((e,t)=>this._rendererChange(e,t))),this._updatingHandles.add((()=>[this.parsedDefinitionExpression,this._excludeObjectIdsSorted]),(()=>this._filterChange())),this.addHandles((0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_5__.watch)((()=>_support_debugFlags_js__WEBPACK_IMPORTED_MODULE_37__.debugFlags.I3S_TREE_SHOW_TILES),(e=>{if(e&&!this._treeDebugger){const e=this._controller.crsIndex;__webpack_require__.e(/*! import() */ "node_modules_arcgis_core_views_3d_layers_support_I3STreeDebugger_js").then(__webpack_require__.bind(__webpack_require__, /*! ./support/I3STreeDebugger.js */ "./node_modules/@arcgis/core/views/3d/layers/support/I3STreeDebugger.js")).then((({I3STreeDebugger:t})=>{!this._treeDebugger&&_support_debugFlags_js__WEBPACK_IMPORTED_MODULE_37__.debugFlags.I3S_TREE_SHOW_TILES&&(this._treeDebugger=new t({lv:this,view:this.view,nodeSR:e}))}))}else e||!this._treeDebugger||_support_debugFlags_js__WEBPACK_IMPORTED_MODULE_37__.debugFlags.I3S_TREE_SHOW_TILES||(this._treeDebugger.destroy(),this._treeDebugger=null)}),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_5__.initial)),this._set("processor",new _graphics_Graphics3DFeatureProcessor_js__WEBPACK_IMPORTED_MODULE_27__.Graphics3DFeatureProcessor({owner:this,preferredUpdatePolicy:_webgl_engine_lib_UpdatePolicy_js__WEBPACK_IMPORTED_MODULE_41__.UpdatePolicy.ASYNC,scaleVisibilityEnabled:!0,filterVisibilityEnabled:!0,timeExtentEnabled:!1,frustumVisibilityEnabled:!1,elevationAlignmentEnabled:!0,elevationFeatureExpressionEnabled:!1,setUidToIdOnAdd:!1,dataExtent:this.layer.fullExtent,updateClippingExtent:e=>this._updateClippingExtent(e)})),this.processor.elevationAlignment?.events.on("invalidate-elevation",(e=>this._controller.updateElevationChanged(e.extent,e.spatialReference))),this.supportsHeightUnitConversion&&(this._verticalScale=(0,_geometry_support_zscale_js__WEBPACK_IMPORTED_MODULE_16__.getGeometryZScaler)("point",this.layer.spatialReference,this.view.spatialReference)),this.addResolvingPromise(this.processor.initializePromise),this._memCache=this.view.resourceController.memoryController.newCache(`psl-${this.uid}`),this._controller=new _layers_graphics_controllers_I3SOnDemandController_js__WEBPACK_IMPORTED_MODULE_21__["default"]({layerView:this,scaleVisibilityEnabled:!1}),(0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_32__.containsDraco)(this.layer.geometryDefinitions)&&(this._worker=new _I3SPointsWorkerHandle_js__WEBPACK_IMPORTED_MODULE_25__.I3SPointsWorkerHandle((e=>this.view.resourceController.immediate.schedule(e)))),this.addHandles(this.layer.on("apply-edits",(e=>this._updatingHandles.addPromise(e.result)))),this.addHandles(this.layer.on("edits",(e=>{const t=this._pendingEditsQueue.then((()=>this._handleEdits(e))).then();this._pendingEditsQueue=t,this._updatingHandles.addPromise(t)}))),this.when((()=>{this._setupQueryEngine(),this._updatingHandles.add((()=>this.maximumNumberOfFeatures),(e=>this._controller.featureTarget=e),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_5__.initial),this._updatingHandles.add((()=>this.suspended),(e=>{e&&this._removeAllNodeData()}))}))}destroy(){this._treeDebugger=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.destroyMaybe)(this._treeDebugger),this._i3sOverrides=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.destroyMaybe)(this._i3sOverrides),this._set("processor",(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.destroyMaybe)(this.processor)),this._controller=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.destroyMaybe)(this._controller),this._queryEngine=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.destroyMaybe)(this._queryEngine),this._worker=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.destroyMaybe)(this._worker),this._memCache=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.destroyMaybe)(this._memCache),this.loadedGraphics.clear(),this._fieldsHelper=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.destroyMaybe)(this._fieldsHelper)}get i3slayer(){return this.layer}get updatingProgressValue(){return this._controller?.updatingProgress??1}get requiredFields(){return this._fieldsHelper?.requiredFields??[]}get maximumNumberOfFeatures(){const e=this.processor?.graphicsCore?.displayFeatureLimit;return e?.maximumNumberOfFeatures??0}set maximumNumberOfFeatures(e){null!=e?(this._override("maximumNumberOfFeatures",e),this._controller.fixedFeatureTarget=!0):(this._clearOverride("maximumNumberOfFeatures"),this._controller.fixedFeatureTarget=!1)}get maximumNumberOfFeaturesExceeded(){return!this.suspended&&(!!this._controller?.useMaximumNumberOfFeatures&&!this._controller.leavesReached)}get _excludeObjectIdsSorted(){const e=this.layer.excludeObjectIds;return e.length?e.toArray().sort(((e,t)=>e-t)):null}get lodFactor(){return"Labels"===this.layer.semantic?1:this.view.qualitySettings.sceneService.point.lodFactor}get hasM(){return!1}get hasZ(){return!0}get contentVisible(){return!this.suspended&&!!this._controller?.rootNodeVisible}get legendEnabled(){return this.contentVisible&&!0===this.i3slayer?.legendEnabled}async whenGraphicAttributes(e,t){return (0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_32__.whenGraphicAttributes)(this.layer,e,this._getObjectIdField(),t,(()=>[...this.loadedGraphics.nodes()]))}getHit(e){if(!this.loadedGraphics)return null;const t=(0,_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_20__.hydrateGraphic)(this.loadedGraphics.find((t=>t.uid===e)),this.layer),r=this._getObjectIdField();return t?.attributes?.[r]?(t.layer=this.layer,t.sourceLayer=this.layer,{type:"graphic",graphic:t,layer:t.layer}):null}whenGraphicBounds(e,t){return this.processor.whenGraphicBounds(e,t)}computeAttachmentOrigin(e,t){return this.processor.computeAttachmentOrigin(e,t)}isUpdating(){return!!(this._controller?.updating||this.processor?.updating||this._fieldsHelper?.updating||this.layerFilterUpdating)}highlight(e){return this.processor.highlight(e,this.layer.objectIdField)}get updatePolicy(){return this.processor.graphicsCore.effectiveUpdatePolicy}createInteractiveEditSession(e){return (0,_i3s_featureEditing_js__WEBPACK_IMPORTED_MODULE_29__.createInteractiveEditSession)(this._attributeEditingContext,e)}async _decompressBinaryPointData(e,t){const r={geometryBuffer:e.geometryBuffer};null==this._worker&&(this._worker=new _I3SPointsWorkerHandle_js__WEBPACK_IMPORTED_MODULE_25__.I3SPointsWorkerHandle((e=>this.view.resourceController.immediate.schedule(e))));const i=await this._worker.invoke(r,t);if(null==i)throw new Error("Failed to decompress Draco point data");return{positionData:i.positions,featureIds:i.featureIds}}async addNode(e,t,r){if(!se(t)&&!ie(t))throw new Error;if(this.loadedGraphics.hasNode(e.index))return void _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger(this).error("I3S node "+e.id+" already added");const s=null!=this.layer.fullExtent?ne(this.layer.fullExtent.clone(),.5):null,o=[],{featureIds:a,pointPositions:n}=se(t)?await this._extractBinaryPointPositions(e,t,r):this._extractLegacyPointPositions(t);this._validatePositions(e,a,n,s,o);const l=this._controller.crsVertex,d=this.view.spatialReference;(0,_geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_12__.projectBuffer)(n,l,0,n,d,0,a.length);const u=se(t)?e.level:0,h=this._createGraphics(a,n,e.index,u),p=new ee(h,a,t.attributeDataInfo,e);if(await this._i3sOverrides.applyAttributeOverrides(p.featureIds,t.attributeDataInfo,r),e.numFeatures=p.graphics.length,this._updateNodeMemory(e),ae(p),o.length>0&&(this._computeObb(e,o,l),this._controller.updateVisibility(e.index)),!this._controller.isGeometryVisible(e))return void this._cacheNodeData(p);if(null!=this._verticalScale)for(const i of p.graphics)this._verticalScale(i.geometry);const g=this.view._stage.renderView.objectAndLayerIdRenderHelper;if(null!=g){const e=(0,_support_basemapUtils_js__WEBPACK_IMPORTED_MODULE_24__.isBasemapLayer)(this.view.map,this.layer.uid);for(let t=0;t<p.featureIds.length;t++){const r=p.featureIds[t];g.setUidToObjectAndLayerId(r,p.graphics[t].uid,this.layer.id,this.layer.uid,this.layer.popupEnabled&&!e&&(0,_layers_support_popupUtils_js__WEBPACK_IMPORTED_MODULE_43__.hasPopupTemplate)(this.layer,this.view.popup?.defaultPopupTemplateEnabled),p.node.resources.attributes,t)}}this.loadedGraphics.addNode(e.index,p),this._controller.updateLoadStatus(e.index,!0),this._filterNode(p),this._treeDebugger&&this._treeDebugger.update()}_computeObb(e,t,r){const i=this._controller.crsIndex,s=i.isGeographic?this.view.renderSpatialReference:i;(0,_geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_12__.projectBuffer)(t,r,0,t,s,0,t.length/3),e.serviceObb=(0,_support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_38__.compute)(new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_40__.Vertices(t,3)),i.isGeographic&&(0,_geometry_projection_projectVectorToVector_js__WEBPACK_IMPORTED_MODULE_13__.projectVectorToVector)(e.serviceObb.center,s,e.serviceObb.center,i)}isNodeLoaded(e){return this.loadedGraphics.hasNode(e)}isNodeReloading(){return!1}updateNodeState(){}async _extractBinaryPointPositions(e,t,r){const i=await this._decompressBinaryPointData(t,r),s=i.positionData,o=3,a=s.length/o,n=(0,_geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_15__.newDoubleArray)(3*a),l=null!=e.serviceObb?e.serviceObb.center:[0,0,0],d=Math.abs(l[2])*2**-20;for(let u=0;u<a;u++){const e=u*o;n[e]=s[e]+l[0],n[e+1]=s[e+1]+l[1],n[e+2]=s[e+2]+l[2],Math.abs(n[e+2])<d&&(n[e+2]=0)}return{featureIds:i.featureIds?(0,_geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_15__.doubleArrayFrom)(i.featureIds):[],pointPositions:n}}_extractLegacyPointPositions(e){const t=e.pointData.length,r=(0,_geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_15__.newDoubleArray)(3*t),i=new Array;for(let s=0;s<t;s++){const t=e.pointData[s],o=t.featureDataPosition,a=o.length,n=t.geometries?.[0]??le[a],l=t.featureIds[0];if("Embedded"!==n.type||"points"!==n.params.type||a<2||a>3)continue;const d=n.params.vertexAttributes?.position??[0,0,0],u=3*i.length;r[u]=o[0]+d[0],r[u+1]=o[1]+d[1],r[u+2]=3===a?o[2]+d[2]:NaN,i.push(l)}return{featureIds:i,pointPositions:r}}_validatePositions(e,t,r,s,o){if(null==s&&e.serviceObb)return;const a=t.length,n=3;for(let l=0;l<a;l++){const t=l*n;(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_10__.s)(de,r[t],r[t+1],r[t+2]);const a=!Number.isNaN(r[2]);null==s||(a?(0,_geometry_support_contains_js__WEBPACK_IMPORTED_MODULE_14__.extentContainsCoords3D)(s,de):(0,_geometry_support_contains_js__WEBPACK_IMPORTED_MODULE_14__.extentContainsCoords2D)(s,de))||(this._coordinatesOutsideExtentErrors<this._maxCoordinatesOutsideExtentErrors&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger(this).error("Service Error: Coordinates outside of layer extent"),this._coordinatesOutsideExtentErrors+1===this._maxCoordinatesOutsideExtentErrors&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger(this).error("Maximum number of errors reached. Further errors are ignored."),this._coordinatesOutsideExtentErrors++),e.serviceObb||o.push(de[0],de[1],de[2])}}_createGraphics(e,r,i,s){const o=e.length,a=3,n=this._getObjectIdField(),l=this.processor.graphicsCore,d=new Array,u=this.view.spatialReference;for(let h=0;h<o;h++){const o=e[h],c={};null!=o&&(c[n]=o);const p=o??_Graphic_js__WEBPACK_IMPORTED_MODULE_1__["default"].generateUID(),g=h*a,m=isNaN(r[g+2])?void 0:r[g+2],y=(0,_layers_graphics_dehydratedPoint_js__WEBPACK_IMPORTED_MODULE_19__.makeDehydratedPoint)(r[g],r[g+1],m,u),f=this.loadedGraphics.get(p);if(null!=f)(null==f.level||f.level<s)&&(ue.property="geometry",ue.graphic=f,ue.oldValue=f.geometry,ue.newValue=y,f.geometry=y,f.level=s,l.graphicUpdateHandler(ue)),d.push(f);else{const e=_Graphic_js__WEBPACK_IMPORTED_MODULE_1__["default"].generateUID();d.push({objectId:p,uid:e,geometry:y,attributes:c,visible:!0,nodeIndex:i,level:s})}}return d}_updateNodeMemory(e){e.memory=4096+(null!=e.numFeatures?e.numFeatures*this.processor.graphicsCore.usedMemoryPerGraphic:0)}_cacheNodeData(e){const t=e.graphics.reduce(((e,t)=>(0,_layers_graphics_dehydratedFeatures_js__WEBPACK_IMPORTED_MODULE_18__.estimateSize)(t)+e),(0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_6__.estimateSize)(e.featureIds)+1024);this._memCache.put(this._getMemCacheKey(e.node),e,t)}_getMemCacheKey(e){return`${e.index}`}_removeAllNodeData(){this.loadedGraphics.forEachNode(((e,t)=>{if(e){const t=e.node;this._updateNodeMemory(t),this._cacheNodeData(e)}this._controller.updateLoadStatus(t,!1)})),this._treeDebugger&&this._treeDebugger.update(),this.loadedGraphics.clear()}removeNode(e){const t=this._removeNodeStageData(e);t&&(this._updateNodeMemory(t.node),this._cacheNodeData(t))}_removeNodeStageData(e){const t=this.loadedGraphics.getNode(e);return null==t?null:(this._controller.updateLoadStatus(e,!1),this.loadedGraphics.removeNode(e),this._treeDebugger&&this._treeDebugger.update(),t)}async loadCachedNodeData(e){return this._memCache?.pop(this._getMemCacheKey(e))}async addCachedNodeData(e,t,r,s){this.loadedGraphics.hasNode(e.index)?_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger(this).error("I3S node "+e.id+" already added"):(await this._i3sOverrides.applyAttributeOverrides(t.featureIds,r,s),this.loadedGraphics.addNode(e.index,t),this._controller.updateLoadStatus(e.index,!0),this._updateNodeMemory(e),t.attributeInfo=r,this._attributeValuesChanged(t),this._filterNode(t),this._treeDebugger&&this._treeDebugger.update())}getLoadedNodeIds(){const e=[];return this.loadedGraphics.forEachNode((t=>e.push(t.node.id))),e.sort()}getVisibleNodes(){const e=new Array;return this.loadedGraphics.forEachNode((t=>e.push(t.node))),e}getLoadedNodeIndices(e){this.loadedGraphics.forEachNode(((t,r)=>e.push(r)))}getLoadedAttributes(e){const t=this.loadedGraphics.getNode(e);if(null!=t?.attributeInfo)return t.attributeInfo.loadedAttributes}getAttributeData(e){const t=this.loadedGraphics.getNode(e);if(null!=t?.attributeInfo)return t.attributeInfo.attributeData}_setAttributeData(e,t){const r=this.loadedGraphics.getNode(e);null!=r?.attributeInfo&&(r.attributeInfo.attributeData=t,this._attributeValuesChanged(r))}async updateAttributes(e,t,r){const i=this.loadedGraphics.getNode(e);null!=i&&(await this._i3sOverrides.applyAttributeOverrides(i.featureIds,t,r),i.attributeInfo=t,this._attributeValuesChanged(i))}_attributeValuesChanged(e){if(ae(e),this._filterNode(e),this.processor.graphicsCore.labelsEnabled){const t=e.graphics.map((e=>e.uid));this.processor.graphicsCore.updateLabelingInfo(t)}}_updateClippingExtent(e){return this._controller&&this._controller.updateClippingArea(e),!1}_getObjectIdField(){return this.layer.objectIdField||_layers_LayerConstants_js__WEBPACK_IMPORTED_MODULE_17__.fallbackObjectIDAttribute}_getGlobalIdField(){return this.layer.associatedLayer?.globalIdField}async _rendererChange(e,t){const{layer:{fieldsIndex:r}}=this,i=new Set;let s,o;e?(await e.collectRequiredFields(i,r),s=Array.from(i).sort()):s=[],i.clear(),t?(await t.collectRequiredFields(i,r),o=Array.from(i).sort()):o=[],s.length===o.length&&s.every(((e,t)=>s[t]===o[t]))||this._reloadAllNodes()}_rangeInfosChanged(e){null!=e&&e.length>0&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger(this).warn("Unsupported property: rangeInfos are currently only serialized to and from web scenes but do not affect rendering.")}_filterChange(){this.loadedGraphics.forEachNode((e=>this._filterNode(e)))}_reloadAllNodes(){this._removeAllNodeData(),this._controller&&this._controller.restartNodeLoading()}_filterNode(e){const t=this.parsedDefinitionExpression,i=this._excludeObjectIdsSorted,s=this._getObjectIdField();for(const o of e.graphics){const e=o.visible,a=!t||this._evaluateClause(t,o),n=null==i||(0,_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_2__.binaryIndexOf)(i,o.attributes[s])<0;o.visible=a&&n,e!==o.visible&&(ue.graphic=o,ue.property="visible",ue.oldValue=e,ue.newValue=o.visible,this.processor.graphicsCore.graphicUpdateHandler(ue))}}createQuery(){const e={outFields:["*"],returnGeometry:!0,outSpatialReference:this.view.spatialReference};return null!=this.filter?this.filter.createQuery(e):new _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_23__["default"](e)}queryFeatures(e,t){return this._queryEngine.executeQuery(this._ensureQuery(e),t?.signal)}queryObjectIds(e,t){return this._queryEngine.executeQueryForIds(this._ensureQuery(e),t?.signal)}queryFeatureCount(e,t){return this._queryEngine.executeQueryForCount(this._ensureQuery(e),t?.signal)}queryExtent(e,t){return this._queryEngine.executeQueryForExtent(this._ensureQuery(e),t?.signal)}_ensureQuery(e){return this._addDefinitionExpressionToQuery(null==e?this.createQuery():_rest_support_Query_js__WEBPACK_IMPORTED_MODULE_23__["default"].from(e))}_setupQueryEngine(){const e=()=>this.processor.featureStore;this._queryEngine=new _graphics_QueryEngine_js__WEBPACK_IMPORTED_MODULE_28__.QueryEngine({context:{spatialReference:this.view.spatialReference,layer:this.layer,scheduler:this.view.resourceController.scheduler,get featureStore(){return e()},hasZ:this.hasZ,hasM:this.hasM},priority:_support_Scheduler_js__WEBPACK_IMPORTED_MODULE_44__.TaskPriority.FEATURE_QUERY_ENGINE})}get usedMemory(){return this.processor?.graphicsCore?.usedMemory??0}get unloadedMemory(){return.8*((this._controller?.unloadedMemoryEstimate??0)+(this.processor?.graphicsCore?.unprocessedMemoryEstimate??0))}get ignoresMemoryFactor(){return this._controller&&this._controller.fixedFeatureTarget}async _handleEdits(e){const t=this._attributeEditingContext,r=await (0,_i3s_featureEditing_js__WEBPACK_IMPORTED_MODULE_29__.normalizeEditResultsEvent)(t,e);(0,_i3s_featureEditing_js__WEBPACK_IMPORTED_MODULE_29__.processAttributeEdits)(t,r)}get _attributeEditingContext(){const e=this._getObjectIdField(),t=this._getGlobalIdField();return{sessions:this._interactiveEditingSessions,fieldsIndex:this.layer.fieldsIndex,objectIdField:e,globalIdField:t,forEachNode:e=>this.loadedGraphics.forEachNode((t=>e(t.node,t.featureIds))),attributeStorageInfo:this.i3slayer.attributeStorageInfo??[],i3sOverrides:this._i3sOverrides,getAttributeData:e=>this.getAttributeData(e),setAttributeData:(t,r,i)=>{this._setAttributeData(t,r);const s=this.loadedGraphics.getNode(t);if(null!=i){const t=this.loadedGraphics.get(i.attributes[e]);null!=t&&this.processor.graphicsCore.recreateGraphics([t])}else null!=s&&this.processor.graphicsCore.recreateGraphics(s.graphics)},clearMemCache:()=>{}}}get performanceInfo(){const e={displayedNumberOfFeatures:this.loadedGraphics.length,maximumNumberOfFeatures:this.maximumNumberOfFeatures,totalNumberOfFeatures:-1,nodes:this.loadedGraphics.nodeCount,core:this.processor.graphicsCore.performanceInfo};return this._controller&&this._controller.updateStats(e),e}get test(){return{controller:this._controller,numNodes:this.loadedGraphics.nodeCount,loadedGraphics:this.loadedGraphics}}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)()],te.prototype,"processor",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)({type:_layers_support_FeatureFilter_js__WEBPACK_IMPORTED_MODULE_22__["default"]})],te.prototype,"filter",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)()],te.prototype,"loadedGraphics",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)()],te.prototype,"i3slayer",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)()],te.prototype,"_controller",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)()],te.prototype,"updating",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)()],te.prototype,"suspended",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)()],te.prototype,"holeFilling",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)(_support_updatingProperties_js__WEBPACK_IMPORTED_MODULE_39__.updatingProgress)],te.prototype,"updatingProgress",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)()],te.prototype,"updatingProgressValue",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)(X.requiredFields)],te.prototype,"requiredFields",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)(X.availableFields)],te.prototype,"availableFields",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)()],te.prototype,"_fieldsHelper",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)({type:Number})],te.prototype,"maximumNumberOfFeatures",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)({readOnly:!0})],te.prototype,"maximumNumberOfFeaturesExceeded",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)()],te.prototype,"_excludeObjectIdsSorted",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)({readOnly:!0})],te.prototype,"lodFactor",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)({readOnly:!0})],te.prototype,"hasM",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)({readOnly:!0})],te.prototype,"hasZ",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)()],te.prototype,"contentVisible",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)({readOnly:!0})],te.prototype,"legendEnabled",null),te=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__.subclass)("esri.views.3d.layers.SceneLayerGraphicsView3D")],te);const re=te;function ie(e){return"pointData"in e}function se(e){return"geometryBuffer"in e&&null!==e.geometryBuffer}function oe(e,t,r){const i=t.attributeInfo;if(null==i?.loadedAttributes||null==i.attributeData)return!1;let s=!1;for(const{name:o}of i.loadedAttributes)if(i.attributeData[o]){const t=(0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_32__.getCachedAttributeValue)(i.attributeData[o],r);t!==e.attributes[o]&&(e.attributes[o]=t,s=!0)}return s}function ae(e){const t=e.attributeInfo,r=e.node.index;if(null!=t?.loadedAttributes&&null!=t.attributeData)for(let i=0;i<e.graphics.length;i++){const s=e.graphics[i];if(s.nodeIndex===r){s.attributes||(s.attributes={});for(const{name:e}of t.loadedAttributes)t.attributeData[e]&&(s.attributes[e]=(0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_32__.getCachedAttributeValue)(t.attributeData[e],i))}}}function ne(e,t){return e.xmin-=t,e.ymin-=t,e.xmax+=t,e.ymax+=t,null!=e.zmin&&null!=e.zmax&&(e.zmin-=t,e.zmax+=t),null!=e.mmin&&null!=e.mmax&&(e.mmin-=t,e.mmax+=t),e}const le={2:{type:"Embedded",params:{type:"points",vertexAttributes:{position:[0,0]}}},3:{type:"Embedded",params:{type:"points",vertexAttributes:{position:[0,0,0]}}}},de=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_11__.c)(),ue={graphic:null,property:null,oldValue:null,newValue:null};


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SGraphicsMap.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/I3SGraphicsMap.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I3SGraphicsMap: () => (/* binding */ s)
/* harmony export */ });
/* harmony import */ var _core_Evented_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/Evented.js */ "./node_modules/@arcgis/core/core/Evented.js");
/* harmony import */ var _core_MapUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/MapUtils.js */ "./node_modules/@arcgis/core/core/MapUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class s extends _core_Evented_js__WEBPACK_IMPORTED_MODULE_0__["default"]{constructor(e,t){super(),this._updateAndCompare=e,this._notifyUpdated=t,this._nodes=new Map,this._graphics=new Map,this._duplicates=new Map}clear(){if(this._graphics.size>0){const e=this.toArray();this._graphics.clear(),this.emit("change",{added:[],removed:e})}this._nodes.clear()}get length(){return this._graphics.size}get(e){return this._graphics.get(e)}getNode(e){return this._nodes.get(e)}hasNode(e){return this._nodes.has(e)}nodes(){return this._nodes.values()}addNode(e,t){this._nodes.set(e,t);const s=t.graphics;if(0===s.length)return;const n=new Set;for(let i=0;i<s.length;i++){const t=s[i],o=t.objectId,r=this._graphics.get(o);if(r){n.add(o),t!==r&&(s[i]=r);const d=this._duplicates.get(o);d?d.push(e):this._duplicates.set(o,[r.nodeIndex,e])}else t.nodeIndex=e,this._graphics.set(o,t)}n.size&&this._updateForeignGraphics(t);const o=n.size>0?s.filter((e=>!n.has(e.objectId))):s;o.length>0&&this.emit("change",{added:o,removed:[]})}removeNode(e){const t=this._nodes.get(e);if(!t)return void console.error("Removing unknown node");this._nodes.delete(e);const s=new Set,n=[];for(const o of t.graphics){const t=o.objectId,i=this._graphics.get(t);if(!i)continue;const r=this._duplicates.get(t);if(r){const n=r.indexOf(e);if(-1===n){console.error("error: removing graphic from node that should not reference it.");continue}if(r.splice(n,1),i.nodeIndex===e){let e=this.getNode(r[0]);for(let t=1;t<r.length;t++){const s=this.getNode(r[t]);(null==e||null!=s&&s.node.level>e.node.level)&&(e=s)}null!=e&&s.add(e)}1===r.length&&this._duplicates.delete(t)}else this._graphics.delete(t),n.push(o)}n.length>0&&this.emit("change",{added:[],removed:n}),s.forEach((e=>this._updateForeignGraphics(e)))}_updateForeignGraphics(e){const t=[],s=e.node.index,n=e.node.level;let o=0;for(;o<e.graphics.length;){const i=e.graphics[o].nodeIndex;if(i===s){o++;continue}let r=1;for(;o+r<e.graphics.length&&e.graphics[o+r].nodeIndex===i;)r++;const d=this.getNode(i);if(null!=d&&d.node.level>n)o+=r;else{for(let n=o;n<o+r;n++){const o=e.graphics[n];o.nodeIndex=s,this._updateAndCompare(o,e,n)&&t.push(o)}o+=r}}this._notifyUpdated(t)}toArray(){return Array.from(this._graphics.values())}find(e){let s;return (0,_core_MapUtils_js__WEBPACK_IMPORTED_MODULE_1__.someMap)(this._graphics,(t=>!!e(t)&&(s=t,!0))),s}forEach(e){this._graphics.forEach((t=>e(t)))}forEachNode(e){this._nodes.forEach(((t,s)=>e(t,s)))}get nodeCount(){return this._nodes.size}_checkInvariants(){const e=new Map;this._nodes.forEach(((t,s)=>{s!==t.node.index&&console.error("Mismatched node index"),t.graphics.forEach((t=>{e.set(t.objectId,1+(e.get(t.objectId)??0));const n=this._duplicates.get(t.objectId);n&&!n.includes(s)&&console.error("Node not listed in duplicate list"),n||t.nodeIndex===s||console.error("Unique graphic does not reference owning node index")}))})),this._graphics.size!==e.size&&console.error("Mismatch between actual and expected number of graphics");let t=0;e.forEach(((e,s)=>{t+=e>1?1:0;const n=this._graphics.get(s);if(!n)return void console.error("Missing graphic entry");const o=this._nodes.get(n.nodeIndex);if(!o)return void console.error("Graphic references unkown node");const i=this._duplicates.get(s);i?(i.length!==e&&console.error("Wrong number of entries in duplicate list"),i.forEach((e=>{const t=this._nodes.get(e);t?t.node.level>o.node.level&&console.error("Duplicated graphic does not reference highest level node"):console.error("Unknown node in duplicate list")}))):e>1&&console.error("Missing duplicates entry")})),this._duplicates.size!==t&&console.error("Mismatch between expected and actual number of duplicate entries")}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/support/DefinitionExpressionSceneLayerView.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/support/DefinitionExpressionSceneLayerView.js ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DefinitionExpressionSceneLayerView: () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../core/sql/WhereClause.js */ "./node_modules/@arcgis/core/core/sql/WhereClause.js");
/* harmony import */ var _i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../i3s/I3SUtil.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SUtil.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const t=t=>{let p=class extends t{constructor(){super(...arguments),this._definitionExpressionErrors=0,this._maxDefinitionExpressionErrors=20,this.logError=r=>{this._definitionExpressionErrors<this._maxDefinitionExpressionErrors&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__["default"].getLogger(this).error("Error while evaluating definitionExpression: "+r),this._definitionExpressionErrors++,this._definitionExpressionErrors===this._maxDefinitionExpressionErrors&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__["default"].getLogger(this).error("Further errors are ignored")}}get parsedDefinitionExpression(){if(!this.i3slayer?.definitionExpression)return null;try{const r=_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_7__.WhereClause.create(this.i3slayer.definitionExpression,this.i3slayer.fieldsIndex);if(!r.isStandardized)return _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__["default"].getLogger(this).error("definitionExpression is using non standard function"),null;const i=[],s=r.fieldNames;return (0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_8__.findFieldsCaseInsensitive)(s,this.i3slayer.fields,{missingFields:i}),i.length>0?(_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__["default"].getLogger(this).error(`definitionExpression references unknown fields: ${i.join(", ")}`),null):(this._definitionExpressionErrors=0,r)}catch(r){return _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__["default"].getLogger(this).error("Failed to parse definitionExpression: "+r),null}}get definitionExpressionFields(){return this.parsedDefinitionExpression?this.parsedDefinitionExpression.fieldNames:[]}_evaluateClause(r,e){try{return r.testFeature(e)}catch(i){return this.logError(i),!1}}_addDefinitionExpressionToQuery(r){if(!this.parsedDefinitionExpression)return r;const e=this.i3slayer.definitionExpression,i=r.clone();return i.where?i.where=`(${e}) AND (${i.where})`:i.where=e,i}};return (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.property)()],p.prototype,"i3slayer",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.property)({readOnly:!0})],p.prototype,"parsedDefinitionExpression",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.property)({readOnly:!0})],p.prototype,"definitionExpressionFields",null),p=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__.subclass)("esri.views.3d.layers.support.DefinitionExpressionSceneLayerView")],p),p};


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfYXJjZ2lzX2NvcmVfY29yZV9tYXliZVVwZGF0aW5nX2pzLW5vZGVfbW9kdWxlc19hcmNnaXNfY29yZV92aWV3c18zZF9sYXllLTY3ZjAxMi5idW5kbGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsY0FBYyw0QkFBNEIsY0FBYyxxQkFBK0U7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKMUo7QUFDQTtBQUNBO0FBQ0E7QUFDcUUsZ0JBQWdCLHVFQUFDLENBQUMsZUFBZSwwREFBMEQsb0RBQW9ELElBQUksaUJBQWlCLEdBQXNDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKL1E7QUFDQTtBQUNBO0FBQ0E7QUFDcWtHLFFBQVEsbUZBQUMsR0FBRyxTQUFTLHFCQUFxQixvRUFBb0UscUJBQXFCLG1IQUFDLENBQUMscUZBQUMsQ0FBQyw2REFBQyxDQUFDLGtFQUFDLEtBQUssY0FBYyw4TUFBOE0sbUVBQUMsMFBBQTBQLG9CQUFvQiwrRUFBK0UsaUVBQUMsNEVBQTRFLHVEQUF1RCx1QkFBdUIsK0RBQUMsRUFBRSwwQ0FBMEMsRUFBRSw0REFBQyxnRkFBZ0YsUUFBUSxhQUFhLCtDQUErQyx1REFBdUQsdUJBQXVCLCtEQUFDLEVBQUUsbURBQW1ELEVBQUUsd0VBQUMscUZBQXFGLG1HQUFDLEVBQUUsZUFBZSx3RkFBd0YsMkRBQUMscU9BQXFPLDZEQUFDLE1BQU0sK0RBQUMsMkJBQTJCLDJCQUEyQixrQ0FBa0MsOFFBQXNDLFNBQVMsa0JBQWtCLElBQUkscUJBQXFCLCtEQUFDLGlEQUFpRCxnQ0FBZ0MsR0FBRyxHQUFHLDZCQUE2QiwrREFBQyw2RUFBNkUsRUFBRSwyREFBQyw2QkFBNkIsZ0dBQUMsRUFBRSxpQ0FBaUMsNEVBQUMseVJBQXlSLDBNQUEwTSxnRkFBQywwTUFBME0sU0FBUyx3QkFBd0IsOEZBQUMsRUFB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bm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9jb3JlL21heWJlVXBkYXRpbmcuanMiLCJ3ZWJwYWNrOi8vc3ludmlldy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvM2QvbGF5ZXJzL0kzU1BvaW50c1dvcmtlckhhbmRsZS5qcyIsIndlYnBhY2s6Ly9zeW52aWV3Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8zZC9sYXllcnMvU2NlbmVMYXllckdyYXBoaWNzVmlldzNELmpzIiwid2VicGFjazovL3N5bnZpZXcvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL2xheWVycy9pM3MvSTNTR3JhcGhpY3NNYXAuanMiLCJ3ZWJwYWNrOi8vc3ludmlldy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvM2QvbGF5ZXJzL3N1cHBvcnQvRGVmaW5pdGlvbkV4cHJlc3Npb25TY2VuZUxheWVyVmlldy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuY29uc3Qgbj1cInVwZGF0aW5nXCI7ZnVuY3Rpb24gdChuKXtyZXR1cm5cInVwZGF0aW5nXCI9PT1uP251bGw6bn1mdW5jdGlvbiB1KG4pe3JldHVyblwidXBkYXRpbmdcIj09PW59ZXhwb3J0e3UgYXMgaXNVcGRhdGluZyx0IGFzIHVud3JhcFVwZGF0aW5nLG4gYXMgdXBkYXRpbmd9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtXb3JrZXJIYW5kbGUgYXMgZX1mcm9tXCIuLi8uLi8uLi9jb3JlL3dvcmtlcnMvV29ya2VySGFuZGxlLmpzXCI7Y2xhc3MgciBleHRlbmRzIGV7Y29uc3RydWN0b3IoZSl7c3VwZXIoXCJTY2VuZUxheWVyV29ya2VyXCIsXCJkcmFjb0RlY29tcHJlc3NQb2ludENsb3VkRGF0YVwiLHtkcmFjb0RlY29tcHJlc3NQb2ludENsb3VkRGF0YTplPT5bZS5nZW9tZXRyeUJ1ZmZlcl19LGUse2hhc0luaXRpYWxpemU6ITB9KX19ZXhwb3J0e3IgYXMgSTNTUG9pbnRzV29ya2VySGFuZGxlfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7XyBhcyBlfWZyb21cIi4uLy4uLy4uL2NodW5rcy90c2xpYi5lczYuanNcIjtpbXBvcnQgdCBmcm9tXCIuLi8uLi8uLi9HcmFwaGljLmpzXCI7aW1wb3J0e2JpbmFyeUluZGV4T2YgYXMgcn1mcm9tXCIuLi8uLi8uLi9jb3JlL2FycmF5VXRpbHMuanNcIjtpbXBvcnQgaSBmcm9tXCIuLi8uLi8uLi9jb3JlL0xvZ2dlci5qc1wiO2ltcG9ydHtkZXN0cm95TWF5YmUgYXMgc31mcm9tXCIuLi8uLi8uLi9jb3JlL21heWJlLmpzXCI7aW1wb3J0e2luaXRpYWwgYXMgbyx3YXRjaCBhcyBhfWZyb21cIi4uLy4uLy4uL2NvcmUvcmVhY3RpdmVVdGlscy5qc1wiO2ltcG9ydHtlc3RpbWF0ZVNpemUgYXMgbn1mcm9tXCIuLi8uLi8uLi9jb3JlL3R5cGVkQXJyYXlVdGlsLmpzXCI7aW1wb3J0e3Byb3BlcnR5IGFzIGx9ZnJvbVwiLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9wcm9wZXJ0eS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZW5zdXJlVHlwZS5qc1wiO2ltcG9ydHtzdWJjbGFzcyBhcyBkfWZyb21cIi4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvc3ViY2xhc3MuanNcIjtpbXBvcnR7cyBhcyB1fWZyb21cIi4uLy4uLy4uL2NodW5rcy92ZWMzLmpzXCI7aW1wb3J0e2MgYXMgaH1mcm9tXCIuLi8uLi8uLi9jaHVua3MvdmVjM2Y2NC5qc1wiO2ltcG9ydHtwcm9qZWN0QnVmZmVyIGFzIGN9ZnJvbVwiLi4vLi4vLi4vZ2VvbWV0cnkvcHJvamVjdGlvbi9wcm9qZWN0QnVmZmVyLmpzXCI7aW1wb3J0e3Byb2plY3RWZWN0b3JUb1ZlY3RvciBhcyBwfWZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L3Byb2plY3Rpb24vcHJvamVjdFZlY3RvclRvVmVjdG9yLmpzXCI7aW1wb3J0e2V4dGVudENvbnRhaW5zQ29vcmRzM0QgYXMgZyxleHRlbnRDb250YWluc0Nvb3JkczJEIGFzIG19ZnJvbVwiLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9jb250YWlucy5qc1wiO2ltcG9ydHtuZXdEb3VibGVBcnJheSBhcyB5LGRvdWJsZUFycmF5RnJvbSBhcyBmfWZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvRG91YmxlQXJyYXkuanNcIjtpbXBvcnR7Z2V0R2VvbWV0cnlaU2NhbGVyIGFzIF99ZnJvbVwiLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC96c2NhbGUuanNcIjtpbXBvcnR7ZmFsbGJhY2tPYmplY3RJREF0dHJpYnV0ZSBhcyBifWZyb21cIi4uLy4uLy4uL2xheWVycy9MYXllckNvbnN0YW50cy5qc1wiO2ltcG9ydHtlc3RpbWF0ZVNpemUgYXMgdn1mcm9tXCIuLi8uLi8uLi9sYXllcnMvZ3JhcGhpY3MvZGVoeWRyYXRlZEZlYXR1cmVzLmpzXCI7aW1wb3J0e21ha2VEZWh5ZHJhdGVkUG9pbnQgYXMgRX1mcm9tXCIuLi8uLi8uLi9sYXllcnMvZ3JhcGhpY3MvZGVoeWRyYXRlZFBvaW50LmpzXCI7aW1wb3J0e2h5ZHJhdGVHcmFwaGljIGFzIHh9ZnJvbVwiLi4vLi4vLi4vbGF5ZXJzL2dyYXBoaWNzL2h5ZHJhdGVkRmVhdHVyZXMuanNcIjtpbXBvcnQgSSBmcm9tXCIuLi8uLi8uLi9sYXllcnMvZ3JhcGhpY3MvY29udHJvbGxlcnMvSTNTT25EZW1hbmRDb250cm9sbGVyLmpzXCI7aW1wb3J0IHcgZnJvbVwiLi4vLi4vLi4vbGF5ZXJzL3N1cHBvcnQvRmVhdHVyZUZpbHRlci5qc1wiO2ltcG9ydCBOIGZyb21cIi4uLy4uLy4uL3Jlc3Qvc3VwcG9ydC9RdWVyeS5qc1wiO2ltcG9ydHtpc0Jhc2VtYXBMYXllciBhcyBPfWZyb21cIi4uLy4uLy4uL3N1cHBvcnQvYmFzZW1hcFV0aWxzLmpzXCI7aW1wb3J0e0kzU1BvaW50c1dvcmtlckhhbmRsZSBhcyBqfWZyb21cIi4vSTNTUG9pbnRzV29ya2VySGFuZGxlLmpzXCI7aW1wb3J0e0xheWVyVmlldzNEIGFzIEN9ZnJvbVwiLi9MYXllclZpZXczRC5qc1wiO2ltcG9ydHtHcmFwaGljczNERmVhdHVyZVByb2Nlc3NvciBhcyBGfWZyb21cIi4vZ3JhcGhpY3MvR3JhcGhpY3MzREZlYXR1cmVQcm9jZXNzb3IuanNcIjtpbXBvcnR7UXVlcnlFbmdpbmUgYXMgRH1mcm9tXCIuL2dyYXBoaWNzL1F1ZXJ5RW5naW5lLmpzXCI7aW1wb3J0e2NyZWF0ZUludGVyYWN0aXZlRWRpdFNlc3Npb24gYXMgUyxub3JtYWxpemVFZGl0UmVzdWx0c0V2ZW50IGFzIEcscHJvY2Vzc0F0dHJpYnV0ZUVkaXRzIGFzIEF9ZnJvbVwiLi9pM3MvZmVhdHVyZUVkaXRpbmcuanNcIjtpbXBvcnR7STNTR3JhcGhpY3NNYXAgYXMgUH1mcm9tXCIuL2kzcy9JM1NHcmFwaGljc01hcC5qc1wiO2ltcG9ydHtJM1NPdmVycmlkZXMgYXMgTH1mcm9tXCIuL2kzcy9JM1NPdmVycmlkZXMuanNcIjtpbXBvcnR7Y2hlY2tSZWN5Y2xhYmxlIGFzIFYsY2hlY2tTcGF0aWFsUmVmZXJlbmNlcyBhcyBNLGNvbnRhaW5zRHJhY28gYXMgSCx3aGVuR3JhcGhpY0F0dHJpYnV0ZXMgYXMgUixnZXRDYWNoZWRBdHRyaWJ1dGVWYWx1ZSBhcyBRfWZyb21cIi4vaTNzL0kzU1V0aWwuanNcIjtpbXBvcnR7RGVmaW5pdGlvbkV4cHJlc3Npb25TY2VuZUxheWVyVmlldyBhcyBVfWZyb21cIi4vc3VwcG9ydC9EZWZpbml0aW9uRXhwcmVzc2lvblNjZW5lTGF5ZXJWaWV3LmpzXCI7aW1wb3J0e2RlZmluZUZpZWxkUHJvcGVydGllcyBhcyBxfWZyb21cIi4vc3VwcG9ydC9maWVsZFByb3BlcnRpZXMuanNcIjtpbXBvcnR7UG9wdXBTY2VuZUxheWVyVmlldyBhcyBUfWZyb21cIi4vc3VwcG9ydC9Qb3B1cFNjZW5lTGF5ZXJWaWV3LmpzXCI7aW1wb3J0e1NjZW5lTGF5ZXJWaWV3UmVxdWlyZWRGaWVsZHMgYXMgQn1mcm9tXCIuL3N1cHBvcnQvU2NlbmVMYXllclZpZXdSZXF1aXJlZEZpZWxkcy5qc1wiO2ltcG9ydHtkZWJ1Z0ZsYWdzIGFzIGt9ZnJvbVwiLi4vc3VwcG9ydC9kZWJ1Z0ZsYWdzLmpzXCI7aW1wb3J0e2NvbXB1dGUgYXMgen1mcm9tXCIuLi9zdXBwb3J0L29yaWVudGVkQm91bmRpbmdCb3guanNcIjtpbXBvcnR7dXBkYXRpbmdQcm9ncmVzcyBhcyBXfWZyb21cIi4uL3N1cHBvcnQvdXBkYXRpbmdQcm9wZXJ0aWVzLmpzXCI7aW1wb3J0e1ZlcnRpY2VzIGFzIFp9ZnJvbVwiLi4vd2ViZ2wtZW5naW5lL2xpYi9BdHRyaWJ1dGUuanNcIjtpbXBvcnR7VXBkYXRlUG9saWN5IGFzIEt9ZnJvbVwiLi4vd2ViZ2wtZW5naW5lL2xpYi9VcGRhdGVQb2xpY3kuanNcIjtpbXBvcnQgWSBmcm9tXCIuLi8uLi9sYXllcnMvU2NlbmVMYXllclZpZXcuanNcIjtpbXBvcnR7aGFzUG9wdXBUZW1wbGF0ZSBhcyAkfWZyb21cIi4uLy4uL2xheWVycy9zdXBwb3J0L3BvcHVwVXRpbHMuanNcIjtpbXBvcnR7VGFza1ByaW9yaXR5IGFzIEp9ZnJvbVwiLi4vLi4vc3VwcG9ydC9TY2hlZHVsZXIuanNcIjtjb25zdCBYPXEoKTtjbGFzcyBlZXtjb25zdHJ1Y3RvcihlLHQscixpKXt0aGlzLmdyYXBoaWNzPWUsdGhpcy5mZWF0dXJlSWRzPXQsdGhpcy5hdHRyaWJ1dGVJbmZvPXIsdGhpcy5ub2RlPWl9fWxldCB0ZT1jbGFzcyBleHRlbmRzKFUoVChDKFkpKSkpe2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLnR5cGU9XCJzY2VuZS1sYXllci1ncmFwaGljcy0zZFwiLHRoaXMuX3F1ZXJ5RW5naW5lPW51bGwsdGhpcy5fbWVtQ2FjaGU9bnVsbCx0aGlzLl9pbnRlcmFjdGl2ZUVkaXRpbmdTZXNzaW9ucz1uZXcgTWFwLHRoaXMuX3BlbmRpbmdFZGl0c1F1ZXVlPVByb21pc2UucmVzb2x2ZSgpLHRoaXMubG9hZGVkR3JhcGhpY3M9bmV3IFAoKChlLHQscik9Pm9lKGUsdCxyKSksKGU9PnRoaXMucHJvY2Vzc29yLmdyYXBoaWNzQ29yZS5yZWNyZWF0ZUdyYXBoaWNzKGUpKSksdGhpcy5ob2xlRmlsbGluZz1cImFsd2F5c1wiLHRoaXMucHJvZ3Jlc3NpdmVMb2FkRmFjdG9yPTEsdGhpcy5zdXBwb3J0c0hlaWdodFVuaXRDb252ZXJzaW9uPSEwLHRoaXMuX2Nvb3JkaW5hdGVzT3V0c2lkZUV4dGVudEVycm9ycz0wLHRoaXMuX21heENvb3JkaW5hdGVzT3V0c2lkZUV4dGVudEVycm9ycz0yMH10cnlSZWN5Y2xlV2l0aChlLHQpe3JldHVybiBlLnVybD09PXRoaXMubGF5ZXIudXJsJiZ0aGlzLl9pM3NPdmVycmlkZXMuaXNFbXB0eT9lLmxvYWQodCkudGhlbigoKCk9PntWKHRoaXMubGF5ZXIsZSx0aGlzLl9pM3NPdmVycmlkZXMpLHRoaXMubGF5ZXI9ZSx0aGlzLl9pM3NPdmVycmlkZXMuZGVzdHJveSgpO2NvbnN0IHQ9dGhpcy52aWV3LnJlc291cmNlQ29udHJvbGxlcj8ubWVtb3J5Q29udHJvbGxlcjt0aGlzLl9pM3NPdmVycmlkZXM9bmV3IEwoe3ZpZXc6dGhpcy52aWV3LGxheWVyOmUsbWVtb3J5Q29udHJvbGxlcjp0fSkscyh0aGlzLl9xdWVyeUVuZ2luZSksdGhpcy5fc2V0dXBRdWVyeUVuZ2luZSgpLHRoaXMucHJvY2Vzc29yLnJlc2V0T2JqZWN0U3RhdGVzKCl9KSk6bnVsbH1pbml0aWFsaXplKCl7dGhpcy5hZGRSZXNvbHZpbmdQcm9taXNlKHRoaXMubGF5ZXIuaW5kZXhJbmZvKTtjb25zdCBlPXRoaXMudmlldy5yZXNvdXJjZUNvbnRyb2xsZXI/Lm1lbW9yeUNvbnRyb2xsZXI7dGhpcy5faTNzT3ZlcnJpZGVzPW5ldyBMKHt2aWV3OnRoaXMudmlldyxsYXllcjp0aGlzLmxheWVyLG1lbW9yeUNvbnRyb2xsZXI6ZX0pLE0odGhpcy5sYXllcix0aGlzLnZpZXcuc3BhdGlhbFJlZmVyZW5jZSx0aGlzLnZpZXcudmlld2luZ01vZGUpLHRoaXMuX2ZpZWxkc0hlbHBlcj1uZXcgQih7bGF5ZXJWaWV3OnRoaXN9KSx0aGlzLl91cGRhdGluZ0hhbmRsZXMuYWRkKCgoKT0+dGhpcy5sYXllci5yYW5nZUluZm9zKSwoZT0+dGhpcy5fcmFuZ2VJbmZvc0NoYW5nZWQoZSkpLG8pLHRoaXMuX3VwZGF0aW5nSGFuZGxlcy5hZGQoKCgpPT50aGlzLmxheWVyLnJlbmRlcmVyKSwoKGUsdCk9PnRoaXMuX3JlbmRlcmVyQ2hhbmdlKGUsdCkpKSx0aGlzLl91cGRhdGluZ0hhbmRsZXMuYWRkKCgoKT0+W3RoaXMucGFyc2VkRGVmaW5pdGlvbkV4cHJlc3Npb24sdGhpcy5fZXhjbHVkZU9iamVjdElkc1NvcnRlZF0pLCgoKT0+dGhpcy5fZmlsdGVyQ2hhbmdlKCkpKSx0aGlzLmFkZEhhbmRsZXMoYSgoKCk9PmsuSTNTX1RSRUVfU0hPV19USUxFUyksKGU9PntpZihlJiYhdGhpcy5fdHJlZURlYnVnZ2VyKXtjb25zdCBlPXRoaXMuX2NvbnRyb2xsZXIuY3JzSW5kZXg7aW1wb3J0KFwiLi9zdXBwb3J0L0kzU1RyZWVEZWJ1Z2dlci5qc1wiKS50aGVuKCgoe0kzU1RyZWVEZWJ1Z2dlcjp0fSk9PnshdGhpcy5fdHJlZURlYnVnZ2VyJiZrLkkzU19UUkVFX1NIT1dfVElMRVMmJih0aGlzLl90cmVlRGVidWdnZXI9bmV3IHQoe2x2OnRoaXMsdmlldzp0aGlzLnZpZXcsbm9kZVNSOmV9KSl9KSl9ZWxzZSBlfHwhdGhpcy5fdHJlZURlYnVnZ2VyfHxrLkkzU19UUkVFX1NIT1dfVElMRVN8fCh0aGlzLl90cmVlRGVidWdnZXIuZGVzdHJveSgpLHRoaXMuX3RyZWVEZWJ1Z2dlcj1udWxsKX0pLG8pKSx0aGlzLl9zZXQoXCJwcm9jZXNzb3JcIixuZXcgRih7b3duZXI6dGhpcyxwcmVmZXJyZWRVcGRhdGVQb2xpY3k6Sy5BU1lOQyxzY2FsZVZpc2liaWxpdHlFbmFibGVkOiEwLGZpbHRlclZpc2liaWxpdHlFbmFibGVkOiEwLHRpbWVFeHRlbnRFbmFibGVkOiExLGZydXN0dW1WaXNpYmlsaXR5RW5hYmxlZDohMSxlbGV2YXRpb25BbGlnbm1lbnRFbmFibGVkOiEwLGVsZXZhdGlvbkZlYXR1cmVFeHByZXNzaW9uRW5hYmxlZDohMSxzZXRVaWRUb0lkT25BZGQ6ITEsZGF0YUV4dGVudDp0aGlzLmxheWVyLmZ1bGxFeHRlbnQsdXBkYXRlQ2xpcHBpbmdFeHRlbnQ6ZT0+dGhpcy5fdXBkYXRlQ2xpcHBpbmdFeHRlbnQoZSl9KSksdGhpcy5wcm9jZXNzb3IuZWxldmF0aW9uQWxpZ25tZW50Py5ldmVudHMub24oXCJpbnZhbGlkYXRlLWVsZXZhdGlvblwiLChlPT50aGlzLl9jb250cm9sbGVyLnVwZGF0ZUVsZXZhdGlvbkNoYW5nZWQoZS5leHRlbnQsZS5zcGF0aWFsUmVmZXJlbmNlKSkpLHRoaXMuc3VwcG9ydHNIZWlnaHRVbml0Q29udmVyc2lvbiYmKHRoaXMuX3ZlcnRpY2FsU2NhbGU9XyhcInBvaW50XCIsdGhpcy5sYXllci5zcGF0aWFsUmVmZXJlbmNlLHRoaXMudmlldy5zcGF0aWFsUmVmZXJlbmNlKSksdGhpcy5hZGRSZXNvbHZpbmdQcm9taXNlKHRoaXMucHJvY2Vzc29yLmluaXRpYWxpemVQcm9taXNlKSx0aGlzLl9tZW1DYWNoZT10aGlzLnZpZXcucmVzb3VyY2VDb250cm9sbGVyLm1lbW9yeUNvbnRyb2xsZXIubmV3Q2FjaGUoYHBzbC0ke3RoaXMudWlkfWApLHRoaXMuX2NvbnRyb2xsZXI9bmV3IEkoe2xheWVyVmlldzp0aGlzLHNjYWxlVmlzaWJpbGl0eUVuYWJsZWQ6ITF9KSxIKHRoaXMubGF5ZXIuZ2VvbWV0cnlEZWZpbml0aW9ucykmJih0aGlzLl93b3JrZXI9bmV3IGooKGU9PnRoaXMudmlldy5yZXNvdXJjZUNvbnRyb2xsZXIuaW1tZWRpYXRlLnNjaGVkdWxlKGUpKSkpLHRoaXMuYWRkSGFuZGxlcyh0aGlzLmxheWVyLm9uKFwiYXBwbHktZWRpdHNcIiwoZT0+dGhpcy5fdXBkYXRpbmdIYW5kbGVzLmFkZFByb21pc2UoZS5yZXN1bHQpKSkpLHRoaXMuYWRkSGFuZGxlcyh0aGlzLmxheWVyLm9uKFwiZWRpdHNcIiwoZT0+e2NvbnN0IHQ9dGhpcy5fcGVuZGluZ0VkaXRzUXVldWUudGhlbigoKCk9PnRoaXMuX2hhbmRsZUVkaXRzKGUpKSkudGhlbigpO3RoaXMuX3BlbmRpbmdFZGl0c1F1ZXVlPXQsdGhpcy5fdXBkYXRpbmdIYW5kbGVzLmFkZFByb21pc2UodCl9KSkpLHRoaXMud2hlbigoKCk9Pnt0aGlzLl9zZXR1cFF1ZXJ5RW5naW5lKCksdGhpcy5fdXBkYXRpbmdIYW5kbGVzLmFkZCgoKCk9PnRoaXMubWF4aW11bU51bWJlck9mRmVhdHVyZXMpLChlPT50aGlzLl9jb250cm9sbGVyLmZlYXR1cmVUYXJnZXQ9ZSksbyksdGhpcy5fdXBkYXRpbmdIYW5kbGVzLmFkZCgoKCk9PnRoaXMuc3VzcGVuZGVkKSwoZT0+e2UmJnRoaXMuX3JlbW92ZUFsbE5vZGVEYXRhKCl9KSl9KSl9ZGVzdHJveSgpe3RoaXMuX3RyZWVEZWJ1Z2dlcj1zKHRoaXMuX3RyZWVEZWJ1Z2dlciksdGhpcy5faTNzT3ZlcnJpZGVzPXModGhpcy5faTNzT3ZlcnJpZGVzKSx0aGlzLl9zZXQoXCJwcm9jZXNzb3JcIixzKHRoaXMucHJvY2Vzc29yKSksdGhpcy5fY29udHJvbGxlcj1zKHRoaXMuX2NvbnRyb2xsZXIpLHRoaXMuX3F1ZXJ5RW5naW5lPXModGhpcy5fcXVlcnlFbmdpbmUpLHRoaXMuX3dvcmtlcj1zKHRoaXMuX3dvcmtlciksdGhpcy5fbWVtQ2FjaGU9cyh0aGlzLl9tZW1DYWNoZSksdGhpcy5sb2FkZWRHcmFwaGljcy5jbGVhcigpLHRoaXMuX2ZpZWxkc0hlbHBlcj1zKHRoaXMuX2ZpZWxkc0hlbHBlcil9Z2V0IGkzc2xheWVyKCl7cmV0dXJuIHRoaXMubGF5ZXJ9Z2V0IHVwZGF0aW5nUHJvZ3Jlc3NWYWx1ZSgpe3JldHVybiB0aGlzLl9jb250cm9sbGVyPy51cGRhdGluZ1Byb2dyZXNzPz8xfWdldCByZXF1aXJlZEZpZWxkcygpe3JldHVybiB0aGlzLl9maWVsZHNIZWxwZXI/LnJlcXVpcmVkRmllbGRzPz9bXX1nZXQgbWF4aW11bU51bWJlck9mRmVhdHVyZXMoKXtjb25zdCBlPXRoaXMucHJvY2Vzc29yPy5ncmFwaGljc0NvcmU/LmRpc3BsYXlGZWF0dXJlTGltaXQ7cmV0dXJuIGU/Lm1heGltdW1OdW1iZXJPZkZlYXR1cmVzPz8wfXNldCBtYXhpbXVtTnVtYmVyT2ZGZWF0dXJlcyhlKXtudWxsIT1lPyh0aGlzLl9vdmVycmlkZShcIm1heGltdW1OdW1iZXJPZkZlYXR1cmVzXCIsZSksdGhpcy5fY29udHJvbGxlci5maXhlZEZlYXR1cmVUYXJnZXQ9ITApOih0aGlzLl9jbGVhck92ZXJyaWRlKFwibWF4aW11bU51bWJlck9mRmVhdHVyZXNcIiksdGhpcy5fY29udHJvbGxlci5maXhlZEZlYXR1cmVUYXJnZXQ9ITEpfWdldCBtYXhpbXVtTnVtYmVyT2ZGZWF0dXJlc0V4Y2VlZGVkKCl7cmV0dXJuIXRoaXMuc3VzcGVuZGVkJiYoISF0aGlzLl9jb250cm9sbGVyPy51c2VNYXhpbXVtTnVtYmVyT2ZGZWF0dXJlcyYmIXRoaXMuX2NvbnRyb2xsZXIubGVhdmVzUmVhY2hlZCl9Z2V0IF9leGNsdWRlT2JqZWN0SWRzU29ydGVkKCl7Y29uc3QgZT10aGlzLmxheWVyLmV4Y2x1ZGVPYmplY3RJZHM7cmV0dXJuIGUubGVuZ3RoP2UudG9BcnJheSgpLnNvcnQoKChlLHQpPT5lLXQpKTpudWxsfWdldCBsb2RGYWN0b3IoKXtyZXR1cm5cIkxhYmVsc1wiPT09dGhpcy5sYXllci5zZW1hbnRpYz8xOnRoaXMudmlldy5xdWFsaXR5U2V0dGluZ3Muc2NlbmVTZXJ2aWNlLnBvaW50LmxvZEZhY3Rvcn1nZXQgaGFzTSgpe3JldHVybiExfWdldCBoYXNaKCl7cmV0dXJuITB9Z2V0IGNvbnRlbnRWaXNpYmxlKCl7cmV0dXJuIXRoaXMuc3VzcGVuZGVkJiYhIXRoaXMuX2NvbnRyb2xsZXI/LnJvb3ROb2RlVmlzaWJsZX1nZXQgbGVnZW5kRW5hYmxlZCgpe3JldHVybiB0aGlzLmNvbnRlbnRWaXNpYmxlJiYhMD09PXRoaXMuaTNzbGF5ZXI/LmxlZ2VuZEVuYWJsZWR9YXN5bmMgd2hlbkdyYXBoaWNBdHRyaWJ1dGVzKGUsdCl7cmV0dXJuIFIodGhpcy5sYXllcixlLHRoaXMuX2dldE9iamVjdElkRmllbGQoKSx0LCgoKT0+Wy4uLnRoaXMubG9hZGVkR3JhcGhpY3Mubm9kZXMoKV0pKX1nZXRIaXQoZSl7aWYoIXRoaXMubG9hZGVkR3JhcGhpY3MpcmV0dXJuIG51bGw7Y29uc3QgdD14KHRoaXMubG9hZGVkR3JhcGhpY3MuZmluZCgodD0+dC51aWQ9PT1lKSksdGhpcy5sYXllcikscj10aGlzLl9nZXRPYmplY3RJZEZpZWxkKCk7cmV0dXJuIHQ/LmF0dHJpYnV0ZXM/LltyXT8odC5sYXllcj10aGlzLmxheWVyLHQuc291cmNlTGF5ZXI9dGhpcy5sYXllcix7dHlwZTpcImdyYXBoaWNcIixncmFwaGljOnQsbGF5ZXI6dC5sYXllcn0pOm51bGx9d2hlbkdyYXBoaWNCb3VuZHMoZSx0KXtyZXR1cm4gdGhpcy5wcm9jZXNzb3Iud2hlbkdyYXBoaWNCb3VuZHMoZSx0KX1jb21wdXRlQXR0YWNobWVudE9yaWdpbihlLHQpe3JldHVybiB0aGlzLnByb2Nlc3Nvci5jb21wdXRlQXR0YWNobWVudE9yaWdpbihlLHQpfWlzVXBkYXRpbmcoKXtyZXR1cm4hISh0aGlzLl9jb250cm9sbGVyPy51cGRhdGluZ3x8dGhpcy5wcm9jZXNzb3I/LnVwZGF0aW5nfHx0aGlzLl9maWVsZHNIZWxwZXI/LnVwZGF0aW5nfHx0aGlzLmxheWVyRmlsdGVyVXBkYXRpbmcpfWhpZ2hsaWdodChlKXtyZXR1cm4gdGhpcy5wcm9jZXNzb3IuaGlnaGxpZ2h0KGUsdGhpcy5sYXllci5vYmplY3RJZEZpZWxkKX1nZXQgdXBkYXRlUG9saWN5KCl7cmV0dXJuIHRoaXMucHJvY2Vzc29yLmdyYXBoaWNzQ29yZS5lZmZlY3RpdmVVcGRhdGVQb2xpY3l9Y3JlYXRlSW50ZXJhY3RpdmVFZGl0U2Vzc2lvbihlKXtyZXR1cm4gUyh0aGlzLl9hdHRyaWJ1dGVFZGl0aW5nQ29udGV4dCxlKX1hc3luYyBfZGVjb21wcmVzc0JpbmFyeVBvaW50RGF0YShlLHQpe2NvbnN0IHI9e2dlb21ldHJ5QnVmZmVyOmUuZ2VvbWV0cnlCdWZmZXJ9O251bGw9PXRoaXMuX3dvcmtlciYmKHRoaXMuX3dvcmtlcj1uZXcgaigoZT0+dGhpcy52aWV3LnJlc291cmNlQ29udHJvbGxlci5pbW1lZGlhdGUuc2NoZWR1bGUoZSkpKSk7Y29uc3QgaT1hd2FpdCB0aGlzLl93b3JrZXIuaW52b2tlKHIsdCk7aWYobnVsbD09aSl0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gZGVjb21wcmVzcyBEcmFjbyBwb2ludCBkYXRhXCIpO3JldHVybntwb3NpdGlvbkRhdGE6aS5wb3NpdGlvbnMsZmVhdHVyZUlkczppLmZlYXR1cmVJZHN9fWFzeW5jIGFkZE5vZGUoZSx0LHIpe2lmKCFzZSh0KSYmIWllKHQpKXRocm93IG5ldyBFcnJvcjtpZih0aGlzLmxvYWRlZEdyYXBoaWNzLmhhc05vZGUoZS5pbmRleCkpcmV0dXJuIHZvaWQgaS5nZXRMb2dnZXIodGhpcykuZXJyb3IoXCJJM1Mgbm9kZSBcIitlLmlkK1wiIGFscmVhZHkgYWRkZWRcIik7Y29uc3Qgcz1udWxsIT10aGlzLmxheWVyLmZ1bGxFeHRlbnQ/bmUodGhpcy5sYXllci5mdWxsRXh0ZW50LmNsb25lKCksLjUpOm51bGwsbz1bXSx7ZmVhdHVyZUlkczphLHBvaW50UG9zaXRpb25zOm59PXNlKHQpP2F3YWl0IHRoaXMuX2V4dHJhY3RCaW5hcnlQb2ludFBvc2l0aW9ucyhlLHQscik6dGhpcy5fZXh0cmFjdExlZ2FjeVBvaW50UG9zaXRpb25zKHQpO3RoaXMuX3ZhbGlkYXRlUG9zaXRpb25zKGUsYSxuLHMsbyk7Y29uc3QgbD10aGlzLl9jb250cm9sbGVyLmNyc1ZlcnRleCxkPXRoaXMudmlldy5zcGF0aWFsUmVmZXJlbmNlO2MobixsLDAsbixkLDAsYS5sZW5ndGgpO2NvbnN0IHU9c2UodCk/ZS5sZXZlbDowLGg9dGhpcy5fY3JlYXRlR3JhcGhpY3MoYSxuLGUuaW5kZXgsdSkscD1uZXcgZWUoaCxhLHQuYXR0cmlidXRlRGF0YUluZm8sZSk7aWYoYXdhaXQgdGhpcy5faTNzT3ZlcnJpZGVzLmFwcGx5QXR0cmlidXRlT3ZlcnJpZGVzKHAuZmVhdHVyZUlkcyx0LmF0dHJpYnV0ZURhdGFJbmZvLHIpLGUubnVtRmVhdHVyZXM9cC5ncmFwaGljcy5sZW5ndGgsdGhpcy5fdXBkYXRlTm9kZU1lbW9yeShlKSxhZShwKSxvLmxlbmd0aD4wJiYodGhpcy5fY29tcHV0ZU9iYihlLG8sbCksdGhpcy5fY29udHJvbGxlci51cGRhdGVWaXNpYmlsaXR5KGUuaW5kZXgpKSwhdGhpcy5fY29udHJvbGxlci5pc0dlb21ldHJ5VmlzaWJsZShlKSlyZXR1cm4gdm9pZCB0aGlzLl9jYWNoZU5vZGVEYXRhKHApO2lmKG51bGwhPXRoaXMuX3ZlcnRpY2FsU2NhbGUpZm9yKGNvbnN0IGkgb2YgcC5ncmFwaGljcyl0aGlzLl92ZXJ0aWNhbFNjYWxlKGkuZ2VvbWV0cnkpO2NvbnN0IGc9dGhpcy52aWV3Ll9zdGFnZS5yZW5kZXJWaWV3Lm9iamVjdEFuZExheWVySWRSZW5kZXJIZWxwZXI7aWYobnVsbCE9Zyl7Y29uc3QgZT1PKHRoaXMudmlldy5tYXAsdGhpcy5sYXllci51aWQpO2ZvcihsZXQgdD0wO3Q8cC5mZWF0dXJlSWRzLmxlbmd0aDt0Kyspe2NvbnN0IHI9cC5mZWF0dXJlSWRzW3RdO2cuc2V0VWlkVG9PYmplY3RBbmRMYXllcklkKHIscC5ncmFwaGljc1t0XS51aWQsdGhpcy5sYXllci5pZCx0aGlzLmxheWVyLnVpZCx0aGlzLmxheWVyLnBvcHVwRW5hYmxlZCYmIWUmJiQodGhpcy5sYXllcix0aGlzLnZpZXcucG9wdXA/LmRlZmF1bHRQb3B1cFRlbXBsYXRlRW5hYmxlZCkscC5ub2RlLnJlc291cmNlcy5hdHRyaWJ1dGVzLHQpfX10aGlzLmxvYWRlZEdyYXBoaWNzLmFkZE5vZGUoZS5pbmRleCxwKSx0aGlzLl9jb250cm9sbGVyLnVwZGF0ZUxvYWRTdGF0dXMoZS5pbmRleCwhMCksdGhpcy5fZmlsdGVyTm9kZShwKSx0aGlzLl90cmVlRGVidWdnZXImJnRoaXMuX3RyZWVEZWJ1Z2dlci51cGRhdGUoKX1fY29tcHV0ZU9iYihlLHQscil7Y29uc3QgaT10aGlzLl9jb250cm9sbGVyLmNyc0luZGV4LHM9aS5pc0dlb2dyYXBoaWM/dGhpcy52aWV3LnJlbmRlclNwYXRpYWxSZWZlcmVuY2U6aTtjKHQsciwwLHQscywwLHQubGVuZ3RoLzMpLGUuc2VydmljZU9iYj16KG5ldyBaKHQsMykpLGkuaXNHZW9ncmFwaGljJiZwKGUuc2VydmljZU9iYi5jZW50ZXIscyxlLnNlcnZpY2VPYmIuY2VudGVyLGkpfWlzTm9kZUxvYWRlZChlKXtyZXR1cm4gdGhpcy5sb2FkZWRHcmFwaGljcy5oYXNOb2RlKGUpfWlzTm9kZVJlbG9hZGluZygpe3JldHVybiExfXVwZGF0ZU5vZGVTdGF0ZSgpe31hc3luYyBfZXh0cmFjdEJpbmFyeVBvaW50UG9zaXRpb25zKGUsdCxyKXtjb25zdCBpPWF3YWl0IHRoaXMuX2RlY29tcHJlc3NCaW5hcnlQb2ludERhdGEodCxyKSxzPWkucG9zaXRpb25EYXRhLG89MyxhPXMubGVuZ3RoL28sbj15KDMqYSksbD1udWxsIT1lLnNlcnZpY2VPYmI/ZS5zZXJ2aWNlT2JiLmNlbnRlcjpbMCwwLDBdLGQ9TWF0aC5hYnMobFsyXSkqMioqLTIwO2ZvcihsZXQgdT0wO3U8YTt1Kyspe2NvbnN0IGU9dSpvO25bZV09c1tlXStsWzBdLG5bZSsxXT1zW2UrMV0rbFsxXSxuW2UrMl09c1tlKzJdK2xbMl0sTWF0aC5hYnMobltlKzJdKTxkJiYobltlKzJdPTApfXJldHVybntmZWF0dXJlSWRzOmkuZmVhdHVyZUlkcz9mKGkuZmVhdHVyZUlkcyk6W10scG9pbnRQb3NpdGlvbnM6bn19X2V4dHJhY3RMZWdhY3lQb2ludFBvc2l0aW9ucyhlKXtjb25zdCB0PWUucG9pbnREYXRhLmxlbmd0aCxyPXkoMyp0KSxpPW5ldyBBcnJheTtmb3IobGV0IHM9MDtzPHQ7cysrKXtjb25zdCB0PWUucG9pbnREYXRhW3NdLG89dC5mZWF0dXJlRGF0YVBvc2l0aW9uLGE9by5sZW5ndGgsbj10Lmdlb21ldHJpZXM/LlswXT8/bGVbYV0sbD10LmZlYXR1cmVJZHNbMF07aWYoXCJFbWJlZGRlZFwiIT09bi50eXBlfHxcInBvaW50c1wiIT09bi5wYXJhbXMudHlwZXx8YTwyfHxhPjMpY29udGludWU7Y29uc3QgZD1uLnBhcmFtcy52ZXJ0ZXhBdHRyaWJ1dGVzPy5wb3NpdGlvbj8/WzAsMCwwXSx1PTMqaS5sZW5ndGg7clt1XT1vWzBdK2RbMF0sclt1KzFdPW9bMV0rZFsxXSxyW3UrMl09Mz09PWE/b1syXStkWzJdOk5hTixpLnB1c2gobCl9cmV0dXJue2ZlYXR1cmVJZHM6aSxwb2ludFBvc2l0aW9uczpyfX1fdmFsaWRhdGVQb3NpdGlvbnMoZSx0LHIscyxvKXtpZihudWxsPT1zJiZlLnNlcnZpY2VPYmIpcmV0dXJuO2NvbnN0IGE9dC5sZW5ndGgsbj0zO2ZvcihsZXQgbD0wO2w8YTtsKyspe2NvbnN0IHQ9bCpuO3UoZGUsclt0XSxyW3QrMV0sclt0KzJdKTtjb25zdCBhPSFOdW1iZXIuaXNOYU4oclsyXSk7bnVsbD09c3x8KGE/ZyhzLGRlKTptKHMsZGUpKXx8KHRoaXMuX2Nvb3JkaW5hdGVzT3V0c2lkZUV4dGVudEVycm9yczx0aGlzLl9tYXhDb29yZGluYXRlc091dHNpZGVFeHRlbnRFcnJvcnMmJmkuZ2V0TG9nZ2VyKHRoaXMpLmVycm9yKFwiU2VydmljZSBFcnJvcjogQ29vcmRpbmF0ZXMgb3V0c2lkZSBvZiBsYXllciBleHRlbnRcIiksdGhpcy5fY29vcmRpbmF0ZXNPdXRzaWRlRXh0ZW50RXJyb3JzKzE9PT10aGlzLl9tYXhDb29yZGluYXRlc091dHNpZGVFeHRlbnRFcnJvcnMmJmkuZ2V0TG9nZ2VyKHRoaXMpLmVycm9yKFwiTWF4aW11bSBudW1iZXIgb2YgZXJyb3JzIHJlYWNoZWQuIEZ1cnRoZXIgZXJyb3JzIGFyZSBpZ25vcmVkLlwiKSx0aGlzLl9jb29yZGluYXRlc091dHNpZGVFeHRlbnRFcnJvcnMrKyksZS5zZXJ2aWNlT2JifHxvLnB1c2goZGVbMF0sZGVbMV0sZGVbMl0pfX1fY3JlYXRlR3JhcGhpY3MoZSxyLGkscyl7Y29uc3Qgbz1lLmxlbmd0aCxhPTMsbj10aGlzLl9nZXRPYmplY3RJZEZpZWxkKCksbD10aGlzLnByb2Nlc3Nvci5ncmFwaGljc0NvcmUsZD1uZXcgQXJyYXksdT10aGlzLnZpZXcuc3BhdGlhbFJlZmVyZW5jZTtmb3IobGV0IGg9MDtoPG87aCsrKXtjb25zdCBvPWVbaF0sYz17fTtudWxsIT1vJiYoY1tuXT1vKTtjb25zdCBwPW8/P3QuZ2VuZXJhdGVVSUQoKSxnPWgqYSxtPWlzTmFOKHJbZysyXSk/dm9pZCAwOnJbZysyXSx5PUUocltnXSxyW2crMV0sbSx1KSxmPXRoaXMubG9hZGVkR3JhcGhpY3MuZ2V0KHApO2lmKG51bGwhPWYpKG51bGw9PWYubGV2ZWx8fGYubGV2ZWw8cykmJih1ZS5wcm9wZXJ0eT1cImdlb21ldHJ5XCIsdWUuZ3JhcGhpYz1mLHVlLm9sZFZhbHVlPWYuZ2VvbWV0cnksdWUubmV3VmFsdWU9eSxmLmdlb21ldHJ5PXksZi5sZXZlbD1zLGwuZ3JhcGhpY1VwZGF0ZUhhbmRsZXIodWUpKSxkLnB1c2goZik7ZWxzZXtjb25zdCBlPXQuZ2VuZXJhdGVVSUQoKTtkLnB1c2goe29iamVjdElkOnAsdWlkOmUsZ2VvbWV0cnk6eSxhdHRyaWJ1dGVzOmMsdmlzaWJsZTohMCxub2RlSW5kZXg6aSxsZXZlbDpzfSl9fXJldHVybiBkfV91cGRhdGVOb2RlTWVtb3J5KGUpe2UubWVtb3J5PTQwOTYrKG51bGwhPWUubnVtRmVhdHVyZXM/ZS5udW1GZWF0dXJlcyp0aGlzLnByb2Nlc3Nvci5ncmFwaGljc0NvcmUudXNlZE1lbW9yeVBlckdyYXBoaWM6MCl9X2NhY2hlTm9kZURhdGEoZSl7Y29uc3QgdD1lLmdyYXBoaWNzLnJlZHVjZSgoKGUsdCk9PnYodCkrZSksbihlLmZlYXR1cmVJZHMpKzEwMjQpO3RoaXMuX21lbUNhY2hlLnB1dCh0aGlzLl9nZXRNZW1DYWNoZUtleShlLm5vZGUpLGUsdCl9X2dldE1lbUNhY2hlS2V5KGUpe3JldHVybmAke2UuaW5kZXh9YH1fcmVtb3ZlQWxsTm9kZURhdGEoKXt0aGlzLmxvYWRlZEdyYXBoaWNzLmZvckVhY2hOb2RlKCgoZSx0KT0+e2lmKGUpe2NvbnN0IHQ9ZS5ub2RlO3RoaXMuX3VwZGF0ZU5vZGVNZW1vcnkodCksdGhpcy5fY2FjaGVOb2RlRGF0YShlKX10aGlzLl9jb250cm9sbGVyLnVwZGF0ZUxvYWRTdGF0dXModCwhMSl9KSksdGhpcy5fdHJlZURlYnVnZ2VyJiZ0aGlzLl90cmVlRGVidWdnZXIudXBkYXRlKCksdGhpcy5sb2FkZWRHcmFwaGljcy5jbGVhcigpfXJlbW92ZU5vZGUoZSl7Y29uc3QgdD10aGlzLl9yZW1vdmVOb2RlU3RhZ2VEYXRhKGUpO3QmJih0aGlzLl91cGRhdGVOb2RlTWVtb3J5KHQubm9kZSksdGhpcy5fY2FjaGVOb2RlRGF0YSh0KSl9X3JlbW92ZU5vZGVTdGFnZURhdGEoZSl7Y29uc3QgdD10aGlzLmxvYWRlZEdyYXBoaWNzLmdldE5vZGUoZSk7cmV0dXJuIG51bGw9PXQ/bnVsbDoodGhpcy5fY29udHJvbGxlci51cGRhdGVMb2FkU3RhdHVzKGUsITEpLHRoaXMubG9hZGVkR3JhcGhpY3MucmVtb3ZlTm9kZShlKSx0aGlzLl90cmVlRGVidWdnZXImJnRoaXMuX3RyZWVEZWJ1Z2dlci51cGRhdGUoKSx0KX1hc3luYyBsb2FkQ2FjaGVkTm9kZURhdGEoZSl7cmV0dXJuIHRoaXMuX21lbUNhY2hlPy5wb3AodGhpcy5fZ2V0TWVtQ2FjaGVLZXkoZSkpfWFzeW5jIGFkZENhY2hlZE5vZGVEYXRhKGUsdCxyLHMpe3RoaXMubG9hZGVkR3JhcGhpY3MuaGFzTm9kZShlLmluZGV4KT9pLmdldExvZ2dlcih0aGlzKS5lcnJvcihcIkkzUyBub2RlIFwiK2UuaWQrXCIgYWxyZWFkeSBhZGRlZFwiKTooYXdhaXQgdGhpcy5faTNzT3ZlcnJpZGVzLmFwcGx5QXR0cmlidXRlT3ZlcnJpZGVzKHQuZmVhdHVyZUlkcyxyLHMpLHRoaXMubG9hZGVkR3JhcGhpY3MuYWRkTm9kZShlLmluZGV4LHQpLHRoaXMuX2NvbnRyb2xsZXIudXBkYXRlTG9hZFN0YXR1cyhlLmluZGV4LCEwKSx0aGlzLl91cGRhdGVOb2RlTWVtb3J5KGUpLHQuYXR0cmlidXRlSW5mbz1yLHRoaXMuX2F0dHJpYnV0ZVZhbHVlc0NoYW5nZWQodCksdGhpcy5fZmlsdGVyTm9kZSh0KSx0aGlzLl90cmVlRGVidWdnZXImJnRoaXMuX3RyZWVEZWJ1Z2dlci51cGRhdGUoKSl9Z2V0TG9hZGVkTm9kZUlkcygpe2NvbnN0IGU9W107cmV0dXJuIHRoaXMubG9hZGVkR3JhcGhpY3MuZm9yRWFjaE5vZGUoKHQ9PmUucHVzaCh0Lm5vZGUuaWQpKSksZS5zb3J0KCl9Z2V0VmlzaWJsZU5vZGVzKCl7Y29uc3QgZT1uZXcgQXJyYXk7cmV0dXJuIHRoaXMubG9hZGVkR3JhcGhpY3MuZm9yRWFjaE5vZGUoKHQ9PmUucHVzaCh0Lm5vZGUpKSksZX1nZXRMb2FkZWROb2RlSW5kaWNlcyhlKXt0aGlzLmxvYWRlZEdyYXBoaWNzLmZvckVhY2hOb2RlKCgodCxyKT0+ZS5wdXNoKHIpKSl9Z2V0TG9hZGVkQXR0cmlidXRlcyhlKXtjb25zdCB0PXRoaXMubG9hZGVkR3JhcGhpY3MuZ2V0Tm9kZShlKTtpZihudWxsIT10Py5hdHRyaWJ1dGVJbmZvKXJldHVybiB0LmF0dHJpYnV0ZUluZm8ubG9hZGVkQXR0cmlidXRlc31nZXRBdHRyaWJ1dGVEYXRhKGUpe2NvbnN0IHQ9dGhpcy5sb2FkZWRHcmFwaGljcy5nZXROb2RlKGUpO2lmKG51bGwhPXQ/LmF0dHJpYnV0ZUluZm8pcmV0dXJuIHQuYXR0cmlidXRlSW5mby5hdHRyaWJ1dGVEYXRhfV9zZXRBdHRyaWJ1dGVEYXRhKGUsdCl7Y29uc3Qgcj10aGlzLmxvYWRlZEdyYXBoaWNzLmdldE5vZGUoZSk7bnVsbCE9cj8uYXR0cmlidXRlSW5mbyYmKHIuYXR0cmlidXRlSW5mby5hdHRyaWJ1dGVEYXRhPXQsdGhpcy5fYXR0cmlidXRlVmFsdWVzQ2hhbmdlZChyKSl9YXN5bmMgdXBkYXRlQXR0cmlidXRlcyhlLHQscil7Y29uc3QgaT10aGlzLmxvYWRlZEdyYXBoaWNzLmdldE5vZGUoZSk7bnVsbCE9aSYmKGF3YWl0IHRoaXMuX2kzc092ZXJyaWRlcy5hcHBseUF0dHJpYnV0ZU92ZXJyaWRlcyhpLmZlYXR1cmVJZHMsdCxyKSxpLmF0dHJpYnV0ZUluZm89dCx0aGlzLl9hdHRyaWJ1dGVWYWx1ZXNDaGFuZ2VkKGkpKX1fYXR0cmlidXRlVmFsdWVzQ2hhbmdlZChlKXtpZihhZShlKSx0aGlzLl9maWx0ZXJOb2RlKGUpLHRoaXMucHJvY2Vzc29yLmdyYXBoaWNzQ29yZS5sYWJlbHNFbmFibGVkKXtjb25zdCB0PWUuZ3JhcGhpY3MubWFwKChlPT5lLnVpZCkpO3RoaXMucHJvY2Vzc29yLmdyYXBoaWNzQ29yZS51cGRhdGVMYWJlbGluZ0luZm8odCl9fV91cGRhdGVDbGlwcGluZ0V4dGVudChlKXtyZXR1cm4gdGhpcy5fY29udHJvbGxlciYmdGhpcy5fY29udHJvbGxlci51cGRhdGVDbGlwcGluZ0FyZWEoZSksITF9X2dldE9iamVjdElkRmllbGQoKXtyZXR1cm4gdGhpcy5sYXllci5vYmplY3RJZEZpZWxkfHxifV9nZXRHbG9iYWxJZEZpZWxkKCl7cmV0dXJuIHRoaXMubGF5ZXIuYXNzb2NpYXRlZExheWVyPy5nbG9iYWxJZEZpZWxkfWFzeW5jIF9yZW5kZXJlckNoYW5nZShlLHQpe2NvbnN0e2xheWVyOntmaWVsZHNJbmRleDpyfX09dGhpcyxpPW5ldyBTZXQ7bGV0IHMsbztlPyhhd2FpdCBlLmNvbGxlY3RSZXF1aXJlZEZpZWxkcyhpLHIpLHM9QXJyYXkuZnJvbShpKS5zb3J0KCkpOnM9W10saS5jbGVhcigpLHQ/KGF3YWl0IHQuY29sbGVjdFJlcXVpcmVkRmllbGRzKGksciksbz1BcnJheS5mcm9tKGkpLnNvcnQoKSk6bz1bXSxzLmxlbmd0aD09PW8ubGVuZ3RoJiZzLmV2ZXJ5KCgoZSx0KT0+c1t0XT09PW9bdF0pKXx8dGhpcy5fcmVsb2FkQWxsTm9kZXMoKX1fcmFuZ2VJbmZvc0NoYW5nZWQoZSl7bnVsbCE9ZSYmZS5sZW5ndGg+MCYmaS5nZXRMb2dnZXIodGhpcykud2FybihcIlVuc3VwcG9ydGVkIHByb3BlcnR5OiByYW5nZUluZm9zIGFyZSBjdXJyZW50bHkgb25seSBzZXJpYWxpemVkIHRvIGFuZCBmcm9tIHdlYiBzY2VuZXMgYnV0IGRvIG5vdCBhZmZlY3QgcmVuZGVyaW5nLlwiKX1fZmlsdGVyQ2hhbmdlKCl7dGhpcy5sb2FkZWRHcmFwaGljcy5mb3JFYWNoTm9kZSgoZT0+dGhpcy5fZmlsdGVyTm9kZShlKSkpfV9yZWxvYWRBbGxOb2Rlcygpe3RoaXMuX3JlbW92ZUFsbE5vZGVEYXRhKCksdGhpcy5fY29udHJvbGxlciYmdGhpcy5fY29udHJvbGxlci5yZXN0YXJ0Tm9kZUxvYWRpbmcoKX1fZmlsdGVyTm9kZShlKXtjb25zdCB0PXRoaXMucGFyc2VkRGVmaW5pdGlvbkV4cHJlc3Npb24saT10aGlzLl9leGNsdWRlT2JqZWN0SWRzU29ydGVkLHM9dGhpcy5fZ2V0T2JqZWN0SWRGaWVsZCgpO2Zvcihjb25zdCBvIG9mIGUuZ3JhcGhpY3Mpe2NvbnN0IGU9by52aXNpYmxlLGE9IXR8fHRoaXMuX2V2YWx1YXRlQ2xhdXNlKHQsbyksbj1udWxsPT1pfHxyKGksby5hdHRyaWJ1dGVzW3NdKTwwO28udmlzaWJsZT1hJiZuLGUhPT1vLnZpc2libGUmJih1ZS5ncmFwaGljPW8sdWUucHJvcGVydHk9XCJ2aXNpYmxlXCIsdWUub2xkVmFsdWU9ZSx1ZS5uZXdWYWx1ZT1vLnZpc2libGUsdGhpcy5wcm9jZXNzb3IuZ3JhcGhpY3NDb3JlLmdyYXBoaWNVcGRhdGVIYW5kbGVyKHVlKSl9fWNyZWF0ZVF1ZXJ5KCl7Y29uc3QgZT17b3V0RmllbGRzOltcIipcIl0scmV0dXJuR2VvbWV0cnk6ITAsb3V0U3BhdGlhbFJlZmVyZW5jZTp0aGlzLnZpZXcuc3BhdGlhbFJlZmVyZW5jZX07cmV0dXJuIG51bGwhPXRoaXMuZmlsdGVyP3RoaXMuZmlsdGVyLmNyZWF0ZVF1ZXJ5KGUpOm5ldyBOKGUpfXF1ZXJ5RmVhdHVyZXMoZSx0KXtyZXR1cm4gdGhpcy5fcXVlcnlFbmdpbmUuZXhlY3V0ZVF1ZXJ5KHRoaXMuX2Vuc3VyZVF1ZXJ5KGUpLHQ/LnNpZ25hbCl9cXVlcnlPYmplY3RJZHMoZSx0KXtyZXR1cm4gdGhpcy5fcXVlcnlFbmdpbmUuZXhlY3V0ZVF1ZXJ5Rm9ySWRzKHRoaXMuX2Vuc3VyZVF1ZXJ5KGUpLHQ/LnNpZ25hbCl9cXVlcnlGZWF0dXJlQ291bnQoZSx0KXtyZXR1cm4gdGhpcy5fcXVlcnlFbmdpbmUuZXhlY3V0ZVF1ZXJ5Rm9yQ291bnQodGhpcy5fZW5zdXJlUXVlcnkoZSksdD8uc2lnbmFsKX1xdWVyeUV4dGVudChlLHQpe3JldHVybiB0aGlzLl9xdWVyeUVuZ2luZS5leGVjdXRlUXVlcnlGb3JFeHRlbnQodGhpcy5fZW5zdXJlUXVlcnkoZSksdD8uc2lnbmFsKX1fZW5zdXJlUXVlcnkoZSl7cmV0dXJuIHRoaXMuX2FkZERlZmluaXRpb25FeHByZXNzaW9uVG9RdWVyeShudWxsPT1lP3RoaXMuY3JlYXRlUXVlcnkoKTpOLmZyb20oZSkpfV9zZXR1cFF1ZXJ5RW5naW5lKCl7Y29uc3QgZT0oKT0+dGhpcy5wcm9jZXNzb3IuZmVhdHVyZVN0b3JlO3RoaXMuX3F1ZXJ5RW5naW5lPW5ldyBEKHtjb250ZXh0OntzcGF0aWFsUmVmZXJlbmNlOnRoaXMudmlldy5zcGF0aWFsUmVmZXJlbmNlLGxheWVyOnRoaXMubGF5ZXIsc2NoZWR1bGVyOnRoaXMudmlldy5yZXNvdXJjZUNvbnRyb2xsZXIuc2NoZWR1bGVyLGdldCBmZWF0dXJlU3RvcmUoKXtyZXR1cm4gZSgpfSxoYXNaOnRoaXMuaGFzWixoYXNNOnRoaXMuaGFzTX0scHJpb3JpdHk6Si5GRUFUVVJFX1FVRVJZX0VOR0lORX0pfWdldCB1c2VkTWVtb3J5KCl7cmV0dXJuIHRoaXMucHJvY2Vzc29yPy5ncmFwaGljc0NvcmU/LnVzZWRNZW1vcnk/PzB9Z2V0IHVubG9hZGVkTWVtb3J5KCl7cmV0dXJuLjgqKCh0aGlzLl9jb250cm9sbGVyPy51bmxvYWRlZE1lbW9yeUVzdGltYXRlPz8wKSsodGhpcy5wcm9jZXNzb3I/LmdyYXBoaWNzQ29yZT8udW5wcm9jZXNzZWRNZW1vcnlFc3RpbWF0ZT8/MCkpfWdldCBpZ25vcmVzTWVtb3J5RmFjdG9yKCl7cmV0dXJuIHRoaXMuX2NvbnRyb2xsZXImJnRoaXMuX2NvbnRyb2xsZXIuZml4ZWRGZWF0dXJlVGFyZ2V0fWFzeW5jIF9oYW5kbGVFZGl0cyhlKXtjb25zdCB0PXRoaXMuX2F0dHJpYnV0ZUVkaXRpbmdDb250ZXh0LHI9YXdhaXQgRyh0LGUpO0EodCxyKX1nZXQgX2F0dHJpYnV0ZUVkaXRpbmdDb250ZXh0KCl7Y29uc3QgZT10aGlzLl9nZXRPYmplY3RJZEZpZWxkKCksdD10aGlzLl9nZXRHbG9iYWxJZEZpZWxkKCk7cmV0dXJue3Nlc3Npb25zOnRoaXMuX2ludGVyYWN0aXZlRWRpdGluZ1Nlc3Npb25zLGZpZWxkc0luZGV4OnRoaXMubGF5ZXIuZmllbGRzSW5kZXgsb2JqZWN0SWRGaWVsZDplLGdsb2JhbElkRmllbGQ6dCxmb3JFYWNoTm9kZTplPT50aGlzLmxvYWRlZEdyYXBoaWNzLmZvckVhY2hOb2RlKCh0PT5lKHQubm9kZSx0LmZlYXR1cmVJZHMpKSksYXR0cmlidXRlU3RvcmFnZUluZm86dGhpcy5pM3NsYXllci5hdHRyaWJ1dGVTdG9yYWdlSW5mbz8/W10saTNzT3ZlcnJpZGVzOnRoaXMuX2kzc092ZXJyaWRlcyxnZXRBdHRyaWJ1dGVEYXRhOmU9PnRoaXMuZ2V0QXR0cmlidXRlRGF0YShlKSxzZXRBdHRyaWJ1dGVEYXRhOih0LHIsaSk9Pnt0aGlzLl9zZXRBdHRyaWJ1dGVEYXRhKHQscik7Y29uc3Qgcz10aGlzLmxvYWRlZEdyYXBoaWNzLmdldE5vZGUodCk7aWYobnVsbCE9aSl7Y29uc3QgdD10aGlzLmxvYWRlZEdyYXBoaWNzLmdldChpLmF0dHJpYnV0ZXNbZV0pO251bGwhPXQmJnRoaXMucHJvY2Vzc29yLmdyYXBoaWNzQ29yZS5yZWNyZWF0ZUdyYXBoaWNzKFt0XSl9ZWxzZSBudWxsIT1zJiZ0aGlzLnByb2Nlc3Nvci5ncmFwaGljc0NvcmUucmVjcmVhdGVHcmFwaGljcyhzLmdyYXBoaWNzKX0sY2xlYXJNZW1DYWNoZTooKT0+e319fWdldCBwZXJmb3JtYW5jZUluZm8oKXtjb25zdCBlPXtkaXNwbGF5ZWROdW1iZXJPZkZlYXR1cmVzOnRoaXMubG9hZGVkR3JhcGhpY3MubGVuZ3RoLG1heGltdW1OdW1iZXJPZkZlYXR1cmVzOnRoaXMubWF4aW11bU51bWJlck9mRmVhdHVyZXMsdG90YWxOdW1iZXJPZkZlYXR1cmVzOi0xLG5vZGVzOnRoaXMubG9hZGVkR3JhcGhpY3Mubm9kZUNvdW50LGNvcmU6dGhpcy5wcm9jZXNzb3IuZ3JhcGhpY3NDb3JlLnBlcmZvcm1hbmNlSW5mb307cmV0dXJuIHRoaXMuX2NvbnRyb2xsZXImJnRoaXMuX2NvbnRyb2xsZXIudXBkYXRlU3RhdHMoZSksZX1nZXQgdGVzdCgpe3JldHVybntjb250cm9sbGVyOnRoaXMuX2NvbnRyb2xsZXIsbnVtTm9kZXM6dGhpcy5sb2FkZWRHcmFwaGljcy5ub2RlQ291bnQsbG9hZGVkR3JhcGhpY3M6dGhpcy5sb2FkZWRHcmFwaGljc319fTtlKFtsKCldLHRlLnByb3RvdHlwZSxcInByb2Nlc3NvclwiLHZvaWQgMCksZShbbCh7dHlwZTp3fSldLHRlLnByb3RvdHlwZSxcImZpbHRlclwiLHZvaWQgMCksZShbbCgpXSx0ZS5wcm90b3R5cGUsXCJsb2FkZWRHcmFwaGljc1wiLHZvaWQgMCksZShbbCgpXSx0ZS5wcm90b3R5cGUsXCJpM3NsYXllclwiLG51bGwpLGUoW2woKV0sdGUucHJvdG90eXBlLFwiX2NvbnRyb2xsZXJcIix2b2lkIDApLGUoW2woKV0sdGUucHJvdG90eXBlLFwidXBkYXRpbmdcIix2b2lkIDApLGUoW2woKV0sdGUucHJvdG90eXBlLFwic3VzcGVuZGVkXCIsdm9pZCAwKSxlKFtsKCldLHRlLnByb3RvdHlwZSxcImhvbGVGaWxsaW5nXCIsdm9pZCAwKSxlKFtsKFcpXSx0ZS5wcm90b3R5cGUsXCJ1cGRhdGluZ1Byb2dyZXNzXCIsdm9pZCAwKSxlKFtsKCldLHRlLnByb3RvdHlwZSxcInVwZGF0aW5nUHJvZ3Jlc3NWYWx1ZVwiLG51bGwpLGUoW2woWC5yZXF1aXJlZEZpZWxkcyldLHRlLnByb3RvdHlwZSxcInJlcXVpcmVkRmllbGRzXCIsbnVsbCksZShbbChYLmF2YWlsYWJsZUZpZWxkcyldLHRlLnByb3RvdHlwZSxcImF2YWlsYWJsZUZpZWxkc1wiLHZvaWQgMCksZShbbCgpXSx0ZS5wcm90b3R5cGUsXCJfZmllbGRzSGVscGVyXCIsdm9pZCAwKSxlKFtsKHt0eXBlOk51bWJlcn0pXSx0ZS5wcm90b3R5cGUsXCJtYXhpbXVtTnVtYmVyT2ZGZWF0dXJlc1wiLG51bGwpLGUoW2woe3JlYWRPbmx5OiEwfSldLHRlLnByb3RvdHlwZSxcIm1heGltdW1OdW1iZXJPZkZlYXR1cmVzRXhjZWVkZWRcIixudWxsKSxlKFtsKCldLHRlLnByb3RvdHlwZSxcIl9leGNsdWRlT2JqZWN0SWRzU29ydGVkXCIsbnVsbCksZShbbCh7cmVhZE9ubHk6ITB9KV0sdGUucHJvdG90eXBlLFwibG9kRmFjdG9yXCIsbnVsbCksZShbbCh7cmVhZE9ubHk6ITB9KV0sdGUucHJvdG90eXBlLFwiaGFzTVwiLG51bGwpLGUoW2woe3JlYWRPbmx5OiEwfSldLHRlLnByb3RvdHlwZSxcImhhc1pcIixudWxsKSxlKFtsKCldLHRlLnByb3RvdHlwZSxcImNvbnRlbnRWaXNpYmxlXCIsbnVsbCksZShbbCh7cmVhZE9ubHk6ITB9KV0sdGUucHJvdG90eXBlLFwibGVnZW5kRW5hYmxlZFwiLG51bGwpLHRlPWUoW2QoXCJlc3JpLnZpZXdzLjNkLmxheWVycy5TY2VuZUxheWVyR3JhcGhpY3NWaWV3M0RcIildLHRlKTtjb25zdCByZT10ZTtmdW5jdGlvbiBpZShlKXtyZXR1cm5cInBvaW50RGF0YVwiaW4gZX1mdW5jdGlvbiBzZShlKXtyZXR1cm5cImdlb21ldHJ5QnVmZmVyXCJpbiBlJiZudWxsIT09ZS5nZW9tZXRyeUJ1ZmZlcn1mdW5jdGlvbiBvZShlLHQscil7Y29uc3QgaT10LmF0dHJpYnV0ZUluZm87aWYobnVsbD09aT8ubG9hZGVkQXR0cmlidXRlc3x8bnVsbD09aS5hdHRyaWJ1dGVEYXRhKXJldHVybiExO2xldCBzPSExO2Zvcihjb25zdHtuYW1lOm99b2YgaS5sb2FkZWRBdHRyaWJ1dGVzKWlmKGkuYXR0cmlidXRlRGF0YVtvXSl7Y29uc3QgdD1RKGkuYXR0cmlidXRlRGF0YVtvXSxyKTt0IT09ZS5hdHRyaWJ1dGVzW29dJiYoZS5hdHRyaWJ1dGVzW29dPXQscz0hMCl9cmV0dXJuIHN9ZnVuY3Rpb24gYWUoZSl7Y29uc3QgdD1lLmF0dHJpYnV0ZUluZm8scj1lLm5vZGUuaW5kZXg7aWYobnVsbCE9dD8ubG9hZGVkQXR0cmlidXRlcyYmbnVsbCE9dC5hdHRyaWJ1dGVEYXRhKWZvcihsZXQgaT0wO2k8ZS5ncmFwaGljcy5sZW5ndGg7aSsrKXtjb25zdCBzPWUuZ3JhcGhpY3NbaV07aWYocy5ub2RlSW5kZXg9PT1yKXtzLmF0dHJpYnV0ZXN8fChzLmF0dHJpYnV0ZXM9e30pO2Zvcihjb25zdHtuYW1lOmV9b2YgdC5sb2FkZWRBdHRyaWJ1dGVzKXQuYXR0cmlidXRlRGF0YVtlXSYmKHMuYXR0cmlidXRlc1tlXT1RKHQuYXR0cmlidXRlRGF0YVtlXSxpKSl9fX1mdW5jdGlvbiBuZShlLHQpe3JldHVybiBlLnhtaW4tPXQsZS55bWluLT10LGUueG1heCs9dCxlLnltYXgrPXQsbnVsbCE9ZS56bWluJiZudWxsIT1lLnptYXgmJihlLnptaW4tPXQsZS56bWF4Kz10KSxudWxsIT1lLm1taW4mJm51bGwhPWUubW1heCYmKGUubW1pbi09dCxlLm1tYXgrPXQpLGV9Y29uc3QgbGU9ezI6e3R5cGU6XCJFbWJlZGRlZFwiLHBhcmFtczp7dHlwZTpcInBvaW50c1wiLHZlcnRleEF0dHJpYnV0ZXM6e3Bvc2l0aW9uOlswLDBdfX19LDM6e3R5cGU6XCJFbWJlZGRlZFwiLHBhcmFtczp7dHlwZTpcInBvaW50c1wiLHZlcnRleEF0dHJpYnV0ZXM6e3Bvc2l0aW9uOlswLDAsMF19fX19LGRlPWgoKSx1ZT17Z3JhcGhpYzpudWxsLHByb3BlcnR5Om51bGwsb2xkVmFsdWU6bnVsbCxuZXdWYWx1ZTpudWxsfTtleHBvcnR7cmUgYXMgZGVmYXVsdH07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0IGUgZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9FdmVudGVkLmpzXCI7aW1wb3J0e3NvbWVNYXAgYXMgdH1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL01hcFV0aWxzLmpzXCI7Y2xhc3MgcyBleHRlbmRzIGV7Y29uc3RydWN0b3IoZSx0KXtzdXBlcigpLHRoaXMuX3VwZGF0ZUFuZENvbXBhcmU9ZSx0aGlzLl9ub3RpZnlVcGRhdGVkPXQsdGhpcy5fbm9kZXM9bmV3IE1hcCx0aGlzLl9ncmFwaGljcz1uZXcgTWFwLHRoaXMuX2R1cGxpY2F0ZXM9bmV3IE1hcH1jbGVhcigpe2lmKHRoaXMuX2dyYXBoaWNzLnNpemU+MCl7Y29uc3QgZT10aGlzLnRvQXJyYXkoKTt0aGlzLl9ncmFwaGljcy5jbGVhcigpLHRoaXMuZW1pdChcImNoYW5nZVwiLHthZGRlZDpbXSxyZW1vdmVkOmV9KX10aGlzLl9ub2Rlcy5jbGVhcigpfWdldCBsZW5ndGgoKXtyZXR1cm4gdGhpcy5fZ3JhcGhpY3Muc2l6ZX1nZXQoZSl7cmV0dXJuIHRoaXMuX2dyYXBoaWNzLmdldChlKX1nZXROb2RlKGUpe3JldHVybiB0aGlzLl9ub2Rlcy5nZXQoZSl9aGFzTm9kZShlKXtyZXR1cm4gdGhpcy5fbm9kZXMuaGFzKGUpfW5vZGVzKCl7cmV0dXJuIHRoaXMuX25vZGVzLnZhbHVlcygpfWFkZE5vZGUoZSx0KXt0aGlzLl9ub2Rlcy5zZXQoZSx0KTtjb25zdCBzPXQuZ3JhcGhpY3M7aWYoMD09PXMubGVuZ3RoKXJldHVybjtjb25zdCBuPW5ldyBTZXQ7Zm9yKGxldCBpPTA7aTxzLmxlbmd0aDtpKyspe2NvbnN0IHQ9c1tpXSxvPXQub2JqZWN0SWQscj10aGlzLl9ncmFwaGljcy5nZXQobyk7aWYocil7bi5hZGQobyksdCE9PXImJihzW2ldPXIpO2NvbnN0IGQ9dGhpcy5fZHVwbGljYXRlcy5nZXQobyk7ZD9kLnB1c2goZSk6dGhpcy5fZHVwbGljYXRlcy5zZXQobyxbci5ub2RlSW5kZXgsZV0pfWVsc2UgdC5ub2RlSW5kZXg9ZSx0aGlzLl9ncmFwaGljcy5zZXQobyx0KX1uLnNpemUmJnRoaXMuX3VwZGF0ZUZvcmVpZ25HcmFwaGljcyh0KTtjb25zdCBvPW4uc2l6ZT4wP3MuZmlsdGVyKChlPT4hbi5oYXMoZS5vYmplY3RJZCkpKTpzO28ubGVuZ3RoPjAmJnRoaXMuZW1pdChcImNoYW5nZVwiLHthZGRlZDpvLHJlbW92ZWQ6W119KX1yZW1vdmVOb2RlKGUpe2NvbnN0IHQ9dGhpcy5fbm9kZXMuZ2V0KGUpO2lmKCF0KXJldHVybiB2b2lkIGNvbnNvbGUuZXJyb3IoXCJSZW1vdmluZyB1bmtub3duIG5vZGVcIik7dGhpcy5fbm9kZXMuZGVsZXRlKGUpO2NvbnN0IHM9bmV3IFNldCxuPVtdO2Zvcihjb25zdCBvIG9mIHQuZ3JhcGhpY3Mpe2NvbnN0IHQ9by5vYmplY3RJZCxpPXRoaXMuX2dyYXBoaWNzLmdldCh0KTtpZighaSljb250aW51ZTtjb25zdCByPXRoaXMuX2R1cGxpY2F0ZXMuZ2V0KHQpO2lmKHIpe2NvbnN0IG49ci5pbmRleE9mKGUpO2lmKC0xPT09bil7Y29uc29sZS5lcnJvcihcImVycm9yOiByZW1vdmluZyBncmFwaGljIGZyb20gbm9kZSB0aGF0IHNob3VsZCBub3QgcmVmZXJlbmNlIGl0LlwiKTtjb250aW51ZX1pZihyLnNwbGljZShuLDEpLGkubm9kZUluZGV4PT09ZSl7bGV0IGU9dGhpcy5nZXROb2RlKHJbMF0pO2ZvcihsZXQgdD0xO3Q8ci5sZW5ndGg7dCsrKXtjb25zdCBzPXRoaXMuZ2V0Tm9kZShyW3RdKTsobnVsbD09ZXx8bnVsbCE9cyYmcy5ub2RlLmxldmVsPmUubm9kZS5sZXZlbCkmJihlPXMpfW51bGwhPWUmJnMuYWRkKGUpfTE9PT1yLmxlbmd0aCYmdGhpcy5fZHVwbGljYXRlcy5kZWxldGUodCl9ZWxzZSB0aGlzLl9ncmFwaGljcy5kZWxldGUodCksbi5wdXNoKG8pfW4ubGVuZ3RoPjAmJnRoaXMuZW1pdChcImNoYW5nZVwiLHthZGRlZDpbXSxyZW1vdmVkOm59KSxzLmZvckVhY2goKGU9PnRoaXMuX3VwZGF0ZUZvcmVpZ25HcmFwaGljcyhlKSkpfV91cGRhdGVGb3JlaWduR3JhcGhpY3MoZSl7Y29uc3QgdD1bXSxzPWUubm9kZS5pbmRleCxuPWUubm9kZS5sZXZlbDtsZXQgbz0wO2Zvcig7bzxlLmdyYXBoaWNzLmxlbmd0aDspe2NvbnN0IGk9ZS5ncmFwaGljc1tvXS5ub2RlSW5kZXg7aWYoaT09PXMpe28rKztjb250aW51ZX1sZXQgcj0xO2Zvcig7bytyPGUuZ3JhcGhpY3MubGVuZ3RoJiZlLmdyYXBoaWNzW28rcl0ubm9kZUluZGV4PT09aTspcisrO2NvbnN0IGQ9dGhpcy5nZXROb2RlKGkpO2lmKG51bGwhPWQmJmQubm9kZS5sZXZlbD5uKW8rPXI7ZWxzZXtmb3IobGV0IG49bztuPG8rcjtuKyspe2NvbnN0IG89ZS5ncmFwaGljc1tuXTtvLm5vZGVJbmRleD1zLHRoaXMuX3VwZGF0ZUFuZENvbXBhcmUobyxlLG4pJiZ0LnB1c2gobyl9bys9cn19dGhpcy5fbm90aWZ5VXBkYXRlZCh0KX10b0FycmF5KCl7cmV0dXJuIEFycmF5LmZyb20odGhpcy5fZ3JhcGhpY3MudmFsdWVzKCkpfWZpbmQoZSl7bGV0IHM7cmV0dXJuIHQodGhpcy5fZ3JhcGhpY3MsKHQ9PiEhZSh0KSYmKHM9dCwhMCkpKSxzfWZvckVhY2goZSl7dGhpcy5fZ3JhcGhpY3MuZm9yRWFjaCgodD0+ZSh0KSkpfWZvckVhY2hOb2RlKGUpe3RoaXMuX25vZGVzLmZvckVhY2goKCh0LHMpPT5lKHQscykpKX1nZXQgbm9kZUNvdW50KCl7cmV0dXJuIHRoaXMuX25vZGVzLnNpemV9X2NoZWNrSW52YXJpYW50cygpe2NvbnN0IGU9bmV3IE1hcDt0aGlzLl9ub2Rlcy5mb3JFYWNoKCgodCxzKT0+e3MhPT10Lm5vZGUuaW5kZXgmJmNvbnNvbGUuZXJyb3IoXCJNaXNtYXRjaGVkIG5vZGUgaW5kZXhcIiksdC5ncmFwaGljcy5mb3JFYWNoKCh0PT57ZS5zZXQodC5vYmplY3RJZCwxKyhlLmdldCh0Lm9iamVjdElkKT8/MCkpO2NvbnN0IG49dGhpcy5fZHVwbGljYXRlcy5nZXQodC5vYmplY3RJZCk7biYmIW4uaW5jbHVkZXMocykmJmNvbnNvbGUuZXJyb3IoXCJOb2RlIG5vdCBsaXN0ZWQgaW4gZHVwbGljYXRlIGxpc3RcIiksbnx8dC5ub2RlSW5kZXg9PT1zfHxjb25zb2xlLmVycm9yKFwiVW5pcXVlIGdyYXBoaWMgZG9lcyBub3QgcmVmZXJlbmNlIG93bmluZyBub2RlIGluZGV4XCIpfSkpfSkpLHRoaXMuX2dyYXBoaWNzLnNpemUhPT1lLnNpemUmJmNvbnNvbGUuZXJyb3IoXCJNaXNtYXRjaCBiZXR3ZWVuIGFjdHVhbCBhbmQgZXhwZWN0ZWQgbnVtYmVyIG9mIGdyYXBoaWNzXCIpO2xldCB0PTA7ZS5mb3JFYWNoKCgoZSxzKT0+e3QrPWU+MT8xOjA7Y29uc3Qgbj10aGlzLl9ncmFwaGljcy5nZXQocyk7aWYoIW4pcmV0dXJuIHZvaWQgY29uc29sZS5lcnJvcihcIk1pc3NpbmcgZ3JhcGhpYyBlbnRyeVwiKTtjb25zdCBvPXRoaXMuX25vZGVzLmdldChuLm5vZGVJbmRleCk7aWYoIW8pcmV0dXJuIHZvaWQgY29uc29sZS5lcnJvcihcIkdyYXBoaWMgcmVmZXJlbmNlcyB1bmtvd24gbm9kZVwiKTtjb25zdCBpPXRoaXMuX2R1cGxpY2F0ZXMuZ2V0KHMpO2k/KGkubGVuZ3RoIT09ZSYmY29uc29sZS5lcnJvcihcIldyb25nIG51bWJlciBvZiBlbnRyaWVzIGluIGR1cGxpY2F0ZSBsaXN0XCIpLGkuZm9yRWFjaCgoZT0+e2NvbnN0IHQ9dGhpcy5fbm9kZXMuZ2V0KGUpO3Q/dC5ub2RlLmxldmVsPm8ubm9kZS5sZXZlbCYmY29uc29sZS5lcnJvcihcIkR1cGxpY2F0ZWQgZ3JhcGhpYyBkb2VzIG5vdCByZWZlcmVuY2UgaGlnaGVzdCBsZXZlbCBub2RlXCIpOmNvbnNvbGUuZXJyb3IoXCJVbmtub3duIG5vZGUgaW4gZHVwbGljYXRlIGxpc3RcIil9KSkpOmU+MSYmY29uc29sZS5lcnJvcihcIk1pc3NpbmcgZHVwbGljYXRlcyBlbnRyeVwiKX0pKSx0aGlzLl9kdXBsaWNhdGVzLnNpemUhPT10JiZjb25zb2xlLmVycm9yKFwiTWlzbWF0Y2ggYmV0d2VlbiBleHBlY3RlZCBhbmQgYWN0dWFsIG51bWJlciBvZiBkdXBsaWNhdGUgZW50cmllc1wiKX19ZXhwb3J0e3MgYXMgSTNTR3JhcGhpY3NNYXB9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtfIGFzIHJ9ZnJvbVwiLi4vLi4vLi4vLi4vY2h1bmtzL3RzbGliLmVzNi5qc1wiO2ltcG9ydCBlIGZyb21cIi4uLy4uLy4uLy4uL2NvcmUvTG9nZ2VyLmpzXCI7aW1wb3J0e3Byb3BlcnR5IGFzIGl9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9wcm9wZXJ0eS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZW5zdXJlVHlwZS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vY29yZS9hcnJheVV0aWxzLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi9jb3JlL2hhcy5qc1wiO2ltcG9ydHtzdWJjbGFzcyBhcyBzfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvc3ViY2xhc3MuanNcIjtpbXBvcnR7V2hlcmVDbGF1c2UgYXMgb31mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL3NxbC9XaGVyZUNsYXVzZS5qc1wiO2ltcG9ydHtmaW5kRmllbGRzQ2FzZUluc2Vuc2l0aXZlIGFzIG59ZnJvbVwiLi4vaTNzL0kzU1V0aWwuanNcIjtjb25zdCB0PXQ9PntsZXQgcD1jbGFzcyBleHRlbmRzIHR7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuX2RlZmluaXRpb25FeHByZXNzaW9uRXJyb3JzPTAsdGhpcy5fbWF4RGVmaW5pdGlvbkV4cHJlc3Npb25FcnJvcnM9MjAsdGhpcy5sb2dFcnJvcj1yPT57dGhpcy5fZGVmaW5pdGlvbkV4cHJlc3Npb25FcnJvcnM8dGhpcy5fbWF4RGVmaW5pdGlvbkV4cHJlc3Npb25FcnJvcnMmJmUuZ2V0TG9nZ2VyKHRoaXMpLmVycm9yKFwiRXJyb3Igd2hpbGUgZXZhbHVhdGluZyBkZWZpbml0aW9uRXhwcmVzc2lvbjogXCIrciksdGhpcy5fZGVmaW5pdGlvbkV4cHJlc3Npb25FcnJvcnMrKyx0aGlzLl9kZWZpbml0aW9uRXhwcmVzc2lvbkVycm9ycz09PXRoaXMuX21heERlZmluaXRpb25FeHByZXNzaW9uRXJyb3JzJiZlLmdldExvZ2dlcih0aGlzKS5lcnJvcihcIkZ1cnRoZXIgZXJyb3JzIGFyZSBpZ25vcmVkXCIpfX1nZXQgcGFyc2VkRGVmaW5pdGlvbkV4cHJlc3Npb24oKXtpZighdGhpcy5pM3NsYXllcj8uZGVmaW5pdGlvbkV4cHJlc3Npb24pcmV0dXJuIG51bGw7dHJ5e2NvbnN0IHI9by5jcmVhdGUodGhpcy5pM3NsYXllci5kZWZpbml0aW9uRXhwcmVzc2lvbix0aGlzLmkzc2xheWVyLmZpZWxkc0luZGV4KTtpZighci5pc1N0YW5kYXJkaXplZClyZXR1cm4gZS5nZXRMb2dnZXIodGhpcykuZXJyb3IoXCJkZWZpbml0aW9uRXhwcmVzc2lvbiBpcyB1c2luZyBub24gc3RhbmRhcmQgZnVuY3Rpb25cIiksbnVsbDtjb25zdCBpPVtdLHM9ci5maWVsZE5hbWVzO3JldHVybiBuKHMsdGhpcy5pM3NsYXllci5maWVsZHMse21pc3NpbmdGaWVsZHM6aX0pLGkubGVuZ3RoPjA/KGUuZ2V0TG9nZ2VyKHRoaXMpLmVycm9yKGBkZWZpbml0aW9uRXhwcmVzc2lvbiByZWZlcmVuY2VzIHVua25vd24gZmllbGRzOiAke2kuam9pbihcIiwgXCIpfWApLG51bGwpOih0aGlzLl9kZWZpbml0aW9uRXhwcmVzc2lvbkVycm9ycz0wLHIpfWNhdGNoKHIpe3JldHVybiBlLmdldExvZ2dlcih0aGlzKS5lcnJvcihcIkZhaWxlZCB0byBwYXJzZSBkZWZpbml0aW9uRXhwcmVzc2lvbjogXCIrciksbnVsbH19Z2V0IGRlZmluaXRpb25FeHByZXNzaW9uRmllbGRzKCl7cmV0dXJuIHRoaXMucGFyc2VkRGVmaW5pdGlvbkV4cHJlc3Npb24/dGhpcy5wYXJzZWREZWZpbml0aW9uRXhwcmVzc2lvbi5maWVsZE5hbWVzOltdfV9ldmFsdWF0ZUNsYXVzZShyLGUpe3RyeXtyZXR1cm4gci50ZXN0RmVhdHVyZShlKX1jYXRjaChpKXtyZXR1cm4gdGhpcy5sb2dFcnJvcihpKSwhMX19X2FkZERlZmluaXRpb25FeHByZXNzaW9uVG9RdWVyeShyKXtpZighdGhpcy5wYXJzZWREZWZpbml0aW9uRXhwcmVzc2lvbilyZXR1cm4gcjtjb25zdCBlPXRoaXMuaTNzbGF5ZXIuZGVmaW5pdGlvbkV4cHJlc3Npb24saT1yLmNsb25lKCk7cmV0dXJuIGkud2hlcmU/aS53aGVyZT1gKCR7ZX0pIEFORCAoJHtpLndoZXJlfSlgOmkud2hlcmU9ZSxpfX07cmV0dXJuIHIoW2koKV0scC5wcm90b3R5cGUsXCJpM3NsYXllclwiLHZvaWQgMCkscihbaSh7cmVhZE9ubHk6ITB9KV0scC5wcm90b3R5cGUsXCJwYXJzZWREZWZpbml0aW9uRXhwcmVzc2lvblwiLG51bGwpLHIoW2koe3JlYWRPbmx5OiEwfSldLHAucHJvdG90eXBlLFwiZGVmaW5pdGlvbkV4cHJlc3Npb25GaWVsZHNcIixudWxsKSxwPXIoW3MoXCJlc3JpLnZpZXdzLjNkLmxheWVycy5zdXBwb3J0LkRlZmluaXRpb25FeHByZXNzaW9uU2NlbmVMYXllclZpZXdcIildLHApLHB9O2V4cG9ydHt0IGFzIERlZmluaXRpb25FeHByZXNzaW9uU2NlbmVMYXllclZpZXd9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9