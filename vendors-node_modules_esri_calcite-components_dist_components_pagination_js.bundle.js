"use strict";
(self["webpackChunksynview"] = self["webpackChunksynview"] || []).push([["vendors-node_modules_esri_calcite-components_dist_components_pagination_js"],{

/***/ "./node_modules/@esri/calcite-components/dist/components/pagination.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/components/pagination.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   P: () => (/* binding */ Pagination),
/* harmony export */   d: () => (/* binding */ defineCustomElement)
/* harmony export */ });
/* harmony import */ var _stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @stencil/core/internal/client/index.js */ "./node_modules/@stencil/core/internal/client/index.js");
/* harmony import */ var _loadable_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./loadable.js */ "./node_modules/@esri/calcite-components/dist/components/loadable.js");
/* harmony import */ var _locale_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./locale.js */ "./node_modules/@esri/calcite-components/dist/components/locale.js");
/* harmony import */ var _t9n_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./t9n.js */ "./node_modules/@esri/calcite-components/dist/components/t9n.js");
/* harmony import */ var _icon_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./icon.js */ "./node_modules/@esri/calcite-components/dist/components/icon.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.7.0
 */






const CSS = {
  page: "page",
  selected: "is-selected",
  previous: "previous",
  next: "next",
  disabled: "is-disabled",
  ellipsis: "ellipsis",
  ellipsisStart: "ellipsis--start",
  ellipsisEnd: "ellipsis--end",
};

const paginationCss = ":host([scale=s]){--calcite-pagination-spacing-internal:0.25rem 0.5rem}:host([scale=s]) .previous,:host([scale=s]) .next,:host([scale=s]) .page{block-size:1.5rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s]) .previous,:host([scale=s]) .next{padding-inline:0.25rem}:host([scale=m]){--calcite-pagination-spacing-internal:0.5rem 0.75rem}:host([scale=m]) .previous,:host([scale=m]) .next,:host([scale=m]) .page{block-size:2rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) .previous,:host([scale=m]) .next{padding-inline:0.5rem}:host([scale=l]){--calcite-pagination-spacing-internal:0.75rem 1rem}:host([scale=l]) .previous,:host([scale=l]) .next,:host([scale=l]) .page{block-size:2.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .previous,:host([scale=l]) .next{padding-inline:1rem}:host{display:flex;writing-mode:horizontal-tb}:host button{outline-color:transparent}:host button:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-ui-brand));outline-offset:calc(\n            -2px *\n            calc(\n              1 -\n              2 * clamp(\n                0,\n                var(--calcite-ui-focus-offset-invert),\n                1\n              )\n            )\n          )}.previous,.next,.page{box-sizing:border-box;display:flex;cursor:pointer;align-items:center;border-style:none;--tw-border-opacity:0;background-color:transparent;font-family:inherit;font-size:var(--calcite-font-size-0);line-height:1.25rem;color:var(--calcite-ui-text-3);border-block:2px solid transparent}.previous:hover,.next:hover,.page:hover{color:var(--calcite-ui-text-1);transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.page:hover{border-block-end-color:var(--calcite-ui-border-2)}.page.is-selected{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-ui-text-1);border-block-end-color:var(--calcite-ui-brand)}.previous:hover,.next:hover{background-color:var(--calcite-ui-foreground-2);color:var(--calcite-ui-brand)}.previous:active,.next:active{background-color:var(--calcite-ui-foreground-3)}.previous.is-disabled,.next.is-disabled{pointer-events:none;background-color:transparent}.previous.is-disabled>calcite-icon,.next.is-disabled>calcite-icon{opacity:var(--calcite-ui-opacity-disabled)}.next{margin-inline-end:0px}.page,.ellipsis{padding:var(--calcite-pagination-spacing-internal)}.ellipsis{display:flex;align-items:flex-end;color:var(--calcite-ui-text-3)}:host([hidden]){display:none}[hidden]{display:none}";

const maxPagesDisplayed = 5;
const Pagination = /*@__PURE__*/ (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_4__.proxyCustomElement)(class extends _stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_4__.HTMLElement {
  constructor() {
    super();
    this.__registerHost();
    this.__attachShadow();
    this.calcitePaginationChange = (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_4__.createEvent)(this, "calcitePaginationChange", 6);
    this.previousClicked = () => {
      this.previousPage().then();
      this.emitUpdate();
    };
    this.nextClicked = () => {
      this.nextPage();
      this.emitUpdate();
    };
    this.groupSeparator = false;
    this.messageOverrides = undefined;
    this.pageSize = 20;
    this.numberingSystem = undefined;
    this.startItem = 1;
    this.totalItems = 0;
    this.scale = "m";
    this.defaultMessages = undefined;
    this.effectiveLocale = "";
    this.messages = undefined;
  }
  onMessagesChange() {
    /* wired up by t9n util */
  }
  effectiveLocaleChange() {
    (0,_t9n_js__WEBPACK_IMPORTED_MODULE_2__.u)(this, this.effectiveLocale);
  }
  effectiveLocaleWatcher() {
    _locale_js__WEBPACK_IMPORTED_MODULE_1__.n.numberFormatOptions = {
      locale: this.effectiveLocale,
      numberingSystem: this.numberingSystem,
      useGrouping: this.groupSeparator,
    };
  }
  // --------------------------------------------------------------------------
  //
  //  Lifecycle
  //
  // --------------------------------------------------------------------------
  connectedCallback() {
    (0,_locale_js__WEBPACK_IMPORTED_MODULE_1__.c)(this);
    (0,_t9n_js__WEBPACK_IMPORTED_MODULE_2__.c)(this);
  }
  async componentWillLoad() {
    await (0,_t9n_js__WEBPACK_IMPORTED_MODULE_2__.s)(this);
    (0,_loadable_js__WEBPACK_IMPORTED_MODULE_0__.a)(this);
  }
  componentDidLoad() {
    (0,_loadable_js__WEBPACK_IMPORTED_MODULE_0__.s)(this);
  }
  disconnectedCallback() {
    (0,_locale_js__WEBPACK_IMPORTED_MODULE_1__.d)(this);
    (0,_t9n_js__WEBPACK_IMPORTED_MODULE_2__.d)(this);
  }
  // --------------------------------------------------------------------------
  //
  //  Public Methods
  //
  // --------------------------------------------------------------------------
  /** Sets focus on the component's first focusable element. */
  async setFocus() {
    await (0,_loadable_js__WEBPACK_IMPORTED_MODULE_0__.c)(this);
    this.el.focus();
  }
  /** Go to the next page of results. */
  async nextPage() {
    this.startItem = Math.min(this.getLastStart(), this.startItem + this.pageSize);
  }
  /** Go to the previous page of results. */
  async previousPage() {
    this.startItem = Math.max(1, this.startItem - this.pageSize);
  }
  // --------------------------------------------------------------------------
  //
  //  Private Methods
  //
  // --------------------------------------------------------------------------
  getLastStart() {
    const { totalItems, pageSize } = this;
    const lastStart = totalItems % pageSize === 0
      ? totalItems - pageSize
      : Math.floor(totalItems / pageSize) * pageSize;
    return lastStart + 1;
  }
  showLeftEllipsis() {
    return Math.floor(this.startItem / this.pageSize) > 3;
  }
  showRightEllipsis() {
    return (this.totalItems - this.startItem) / this.pageSize > 3;
  }
  emitUpdate() {
    this.calcitePaginationChange.emit();
  }
  //--------------------------------------------------------------------------
  //
  //  Render Methods
  //
  //--------------------------------------------------------------------------
  renderPages() {
    const lastStart = this.getLastStart();
    let end;
    let nextStart;
    // if we don't need ellipses render the whole set
    if (this.totalItems / this.pageSize <= maxPagesDisplayed) {
      nextStart = 1 + this.pageSize;
      end = lastStart - this.pageSize;
    }
    else {
      // if we're within max pages of page 1
      if (this.startItem / this.pageSize < maxPagesDisplayed - 1) {
        nextStart = 1 + this.pageSize;
        end = 1 + 4 * this.pageSize;
      }
      else {
        // if we're within max pages of last page
        if (this.startItem + 3 * this.pageSize >= this.totalItems) {
          nextStart = lastStart - 4 * this.pageSize;
          end = lastStart - this.pageSize;
        }
        else {
          nextStart = this.startItem - this.pageSize;
          end = this.startItem + this.pageSize;
        }
      }
    }
    const pages = [];
    while (nextStart <= end) {
      pages.push(nextStart);
      nextStart = nextStart + this.pageSize;
    }
    return pages.map((page) => this.renderPage(page));
  }
  renderPage(start) {
    const page = Math.floor(start / this.pageSize) + (this.pageSize === 1 ? 0 : 1);
    _locale_js__WEBPACK_IMPORTED_MODULE_1__.n.numberFormatOptions = {
      locale: this.effectiveLocale,
      numberingSystem: this.numberingSystem,
      useGrouping: this.groupSeparator,
    };
    const displayedPage = _locale_js__WEBPACK_IMPORTED_MODULE_1__.n.localize(page.toString());
    const selected = start === this.startItem;
    return ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_4__.h)("button", { "aria-current": selected ? "page" : "false", class: {
        [CSS.page]: true,
        [CSS.selected]: selected,
      }, onClick: () => {
        this.startItem = start;
        this.emitUpdate();
      } }, displayedPage));
  }
  renderLeftEllipsis() {
    if (this.totalItems / this.pageSize > maxPagesDisplayed && this.showLeftEllipsis()) {
      return (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_4__.h)("span", { class: `${CSS.ellipsis} ${CSS.ellipsisStart}` }, "\u2026");
    }
  }
  renderRightEllipsis() {
    if (this.totalItems / this.pageSize > maxPagesDisplayed && this.showRightEllipsis()) {
      return (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_4__.h)("span", { class: `${CSS.ellipsis} ${CSS.ellipsisEnd}` }, "\u2026");
    }
  }
  render() {
    const { totalItems, pageSize, startItem } = this;
    const prevDisabled = pageSize === 1 ? startItem <= pageSize : startItem < pageSize;
    const nextDisabled = pageSize === 1 ? startItem + pageSize > totalItems : startItem + pageSize > totalItems;
    return ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_4__.h)(_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_4__.Fragment, null, (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_4__.h)("button", { "aria-label": this.messages.previous, class: {
        [CSS.previous]: true,
        [CSS.disabled]: prevDisabled,
      }, disabled: prevDisabled, onClick: this.previousClicked }, (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_4__.h)("calcite-icon", { flipRtl: true, icon: "chevronLeft", scale: this.scale === "l" ? "m" : "s" })), totalItems > pageSize ? this.renderPage(1) : null, this.renderLeftEllipsis(), this.renderPages(), this.renderRightEllipsis(), this.renderPage(this.getLastStart()), (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_4__.h)("button", { "aria-label": this.messages.next, class: {
        [CSS.next]: true,
        [CSS.disabled]: nextDisabled,
      }, disabled: nextDisabled, onClick: this.nextClicked }, (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_4__.h)("calcite-icon", { flipRtl: true, icon: "chevronRight", scale: this.scale === "l" ? "m" : "s" }))));
  }
  static get delegatesFocus() { return true; }
  static get assetsDirs() { return ["assets"]; }
  get el() { return this; }
  static get watchers() { return {
    "messageOverrides": ["onMessagesChange"],
    "effectiveLocale": ["effectiveLocaleChange", "effectiveLocaleWatcher"]
  }; }
  static get style() { return paginationCss; }
}, [17, "calcite-pagination", {
    "groupSeparator": [516, "group-separator"],
    "messageOverrides": [1040],
    "pageSize": [514, "page-size"],
    "numberingSystem": [1, "numbering-system"],
    "startItem": [1538, "start-item"],
    "totalItems": [514, "total-items"],
    "scale": [513],
    "messages": [1040],
    "defaultMessages": [32],
    "effectiveLocale": [32],
    "setFocus": [64],
    "nextPage": [64],
    "previousPage": [64]
  }]);
function defineCustomElement() {
  if (typeof customElements === "undefined") {
    return;
  }
  const components = ["calcite-pagination", "calcite-icon"];
  components.forEach(tagName => { switch (tagName) {
    case "calcite-pagination":
      if (!customElements.get(tagName)) {
        customElements.define(tagName, Pagination);
      }
      break;
    case "calcite-icon":
      if (!customElements.get(tagName)) {
        (0,_icon_js__WEBPACK_IMPORTED_MODULE_3__.d)();
      }
      break;
  } });
}
defineCustomElement();




/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfZXNyaV9jYWxjaXRlLWNvbXBvbmVudHNfZGlzdF9jb21wb25lbnRzX3BhZ2luYXRpb25fanMuYnVuZGxlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ21IO0FBQ0w7QUFDSjtBQUNRO0FBQzNEOztBQUV2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSx3Q0FBd0MscURBQXFELHlFQUF5RSxrQkFBa0Isc0NBQXNDLGlCQUFpQixrREFBa0QsdUJBQXVCLGlCQUFpQixxREFBcUQseUVBQXlFLGdCQUFnQixzQ0FBc0MsaUJBQWlCLGtEQUFrRCxzQkFBc0IsaUJBQWlCLG1EQUFtRCx5RUFBeUUsbUJBQW1CLHFDQUFxQyxvQkFBb0Isa0RBQWtELG9CQUFvQixNQUFNLGFBQWEsMkJBQTJCLGFBQWEsMEJBQTBCLG1CQUFtQix5RUFBeUUscVBBQXFQLHNCQUFzQixzQkFBc0IsYUFBYSxlQUFlLG1CQUFtQixrQkFBa0Isc0JBQXNCLDZCQUE2QixvQkFBb0IscUNBQXFDLG9CQUFvQiwrQkFBK0IsbUNBQW1DLHdDQUF3QywrQkFBK0IsNkZBQTZGLFlBQVksa0RBQWtELGtCQUFrQiw4Q0FBOEMsK0JBQStCLCtDQUErQyw0QkFBNEIsZ0RBQWdELDhCQUE4Qiw4QkFBOEIsZ0RBQWdELHdDQUF3QyxvQkFBb0IsNkJBQTZCLGtFQUFrRSwyQ0FBMkMsTUFBTSxzQkFBc0IsZ0JBQWdCLG1EQUFtRCxVQUFVLGFBQWEscUJBQXFCLCtCQUErQixnQkFBZ0IsYUFBYSxTQUFTLGFBQWE7O0FBRXJoRjtBQUNBLGlDQUFpQywwRkFBa0IsZUFBZSwrRUFBVztBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxtRkFBVztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSwwQ0FBYztBQUNsQjtBQUNBO0FBQ0EsSUFBSSx5Q0FBcUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksNkNBQWdCO0FBQ3BCLElBQUksMENBQWU7QUFDbkI7QUFDQTtBQUNBLFVBQVUsMENBQWE7QUFDdkIsSUFBSSwrQ0FBc0I7QUFDMUI7QUFDQTtBQUNBLElBQUksK0NBQWtCO0FBQ3RCO0FBQ0E7QUFDQSxJQUFJLDZDQUFtQjtBQUN2QixJQUFJLDBDQUFrQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSwrQ0FBa0I7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHVCQUF1QjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUkseUNBQXFCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLHlDQUFxQjtBQUMvQztBQUNBLFlBQVkseUVBQUMsYUFBYTtBQUMxQjtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsYUFBYSx5RUFBQyxXQUFXLFVBQVUsY0FBYyxFQUFFLGtCQUFrQixHQUFHO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSx5RUFBQyxXQUFXLFVBQVUsY0FBYyxFQUFFLGdCQUFnQixHQUFHO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBLFlBQVksa0NBQWtDO0FBQzlDO0FBQ0E7QUFDQSxZQUFZLHlFQUFDLENBQUMsNEVBQVEsUUFBUSx5RUFBQyxhQUFhO0FBQzVDO0FBQ0E7QUFDQSxPQUFPLHlEQUF5RCxFQUFFLHlFQUFDLG1CQUFtQiwyRUFBMkUsd0tBQXdLLHlFQUFDLGFBQWE7QUFDdlY7QUFDQTtBQUNBLE9BQU8scURBQXFELEVBQUUseUVBQUMsbUJBQW1CLDRFQUE0RTtBQUM5SjtBQUNBLGdDQUFnQztBQUNoQyw0QkFBNEI7QUFDNUIsYUFBYTtBQUNiLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkIsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDJDQUFxQjtBQUM3QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRXFEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3ludmlldy8uL25vZGVfbW9kdWxlcy9AZXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvZGlzdC9jb21wb25lbnRzL3BhZ2luYXRpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtZGVzaWduLXN5c3RlbS9ibG9iL21haW4vTElDRU5TRS5tZCBmb3IgZGV0YWlscy5cbiAqIHYxLjcuMFxuICovXG5pbXBvcnQgeyBwcm94eUN1c3RvbUVsZW1lbnQsIEhUTUxFbGVtZW50LCBjcmVhdGVFdmVudCwgaCwgRnJhZ21lbnQgfSBmcm9tICdAc3RlbmNpbC9jb3JlL2ludGVybmFsL2NsaWVudC9pbmRleC5qcyc7XG5pbXBvcnQgeyBhIGFzIHNldFVwTG9hZGFibGVDb21wb25lbnQsIHMgYXMgc2V0Q29tcG9uZW50TG9hZGVkLCBjIGFzIGNvbXBvbmVudEZvY3VzYWJsZSB9IGZyb20gJy4vbG9hZGFibGUuanMnO1xuaW1wb3J0IHsgbiBhcyBudW1iZXJTdHJpbmdGb3JtYXR0ZXIsIGMgYXMgY29ubmVjdExvY2FsaXplZCwgZCBhcyBkaXNjb25uZWN0TG9jYWxpemVkIH0gZnJvbSAnLi9sb2NhbGUuanMnO1xuaW1wb3J0IHsgdSBhcyB1cGRhdGVNZXNzYWdlcywgYyBhcyBjb25uZWN0TWVzc2FnZXMsIHMgYXMgc2V0VXBNZXNzYWdlcywgZCBhcyBkaXNjb25uZWN0TWVzc2FnZXMgfSBmcm9tICcuL3Q5bi5qcyc7XG5pbXBvcnQgeyBkIGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkMSB9IGZyb20gJy4vaWNvbi5qcyc7XG5cbmNvbnN0IENTUyA9IHtcbiAgcGFnZTogXCJwYWdlXCIsXG4gIHNlbGVjdGVkOiBcImlzLXNlbGVjdGVkXCIsXG4gIHByZXZpb3VzOiBcInByZXZpb3VzXCIsXG4gIG5leHQ6IFwibmV4dFwiLFxuICBkaXNhYmxlZDogXCJpcy1kaXNhYmxlZFwiLFxuICBlbGxpcHNpczogXCJlbGxpcHNpc1wiLFxuICBlbGxpcHNpc1N0YXJ0OiBcImVsbGlwc2lzLS1zdGFydFwiLFxuICBlbGxpcHNpc0VuZDogXCJlbGxpcHNpcy0tZW5kXCIsXG59O1xuXG5jb25zdCBwYWdpbmF0aW9uQ3NzID0gXCI6aG9zdChbc2NhbGU9c10pey0tY2FsY2l0ZS1wYWdpbmF0aW9uLXNwYWNpbmctaW50ZXJuYWw6MC4yNXJlbSAwLjVyZW19Omhvc3QoW3NjYWxlPXNdKSAucHJldmlvdXMsOmhvc3QoW3NjYWxlPXNdKSAubmV4dCw6aG9zdChbc2NhbGU9c10pIC5wYWdle2Jsb2NrLXNpemU6MS41cmVtO2ZvbnQtc2l6ZTp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0tMik7bGluZS1oZWlnaHQ6MXJlbX06aG9zdChbc2NhbGU9c10pIC5wcmV2aW91cyw6aG9zdChbc2NhbGU9c10pIC5uZXh0e3BhZGRpbmctaW5saW5lOjAuMjVyZW19Omhvc3QoW3NjYWxlPW1dKXstLWNhbGNpdGUtcGFnaW5hdGlvbi1zcGFjaW5nLWludGVybmFsOjAuNXJlbSAwLjc1cmVtfTpob3N0KFtzY2FsZT1tXSkgLnByZXZpb3VzLDpob3N0KFtzY2FsZT1tXSkgLm5leHQsOmhvc3QoW3NjYWxlPW1dKSAucGFnZXtibG9jay1zaXplOjJyZW07Zm9udC1zaXplOnZhcigtLWNhbGNpdGUtZm9udC1zaXplLS0xKTtsaW5lLWhlaWdodDoxcmVtfTpob3N0KFtzY2FsZT1tXSkgLnByZXZpb3VzLDpob3N0KFtzY2FsZT1tXSkgLm5leHR7cGFkZGluZy1pbmxpbmU6MC41cmVtfTpob3N0KFtzY2FsZT1sXSl7LS1jYWxjaXRlLXBhZ2luYXRpb24tc3BhY2luZy1pbnRlcm5hbDowLjc1cmVtIDFyZW19Omhvc3QoW3NjYWxlPWxdKSAucHJldmlvdXMsOmhvc3QoW3NjYWxlPWxdKSAubmV4dCw6aG9zdChbc2NhbGU9bF0pIC5wYWdle2Jsb2NrLXNpemU6Mi43NXJlbTtmb250LXNpemU6dmFyKC0tY2FsY2l0ZS1mb250LXNpemUtMCk7bGluZS1oZWlnaHQ6MS4yNXJlbX06aG9zdChbc2NhbGU9bF0pIC5wcmV2aW91cyw6aG9zdChbc2NhbGU9bF0pIC5uZXh0e3BhZGRpbmctaW5saW5lOjFyZW19Omhvc3R7ZGlzcGxheTpmbGV4O3dyaXRpbmctbW9kZTpob3Jpem9udGFsLXRifTpob3N0IGJ1dHRvbntvdXRsaW5lLWNvbG9yOnRyYW5zcGFyZW50fTpob3N0IGJ1dHRvbjpmb2N1c3tvdXRsaW5lOjJweCBzb2xpZCB2YXIoLS1jYWxjaXRlLXVpLWZvY3VzLWNvbG9yLCB2YXIoLS1jYWxjaXRlLXVpLWJyYW5kKSk7b3V0bGluZS1vZmZzZXQ6Y2FsYyhcXG4gICAgICAgICAgICAtMnB4ICpcXG4gICAgICAgICAgICBjYWxjKFxcbiAgICAgICAgICAgICAgMSAtXFxuICAgICAgICAgICAgICAyICogY2xhbXAoXFxuICAgICAgICAgICAgICAgIDAsXFxuICAgICAgICAgICAgICAgIHZhcigtLWNhbGNpdGUtdWktZm9jdXMtb2Zmc2V0LWludmVydCksXFxuICAgICAgICAgICAgICAgIDFcXG4gICAgICAgICAgICAgIClcXG4gICAgICAgICAgICApXFxuICAgICAgICAgICl9LnByZXZpb3VzLC5uZXh0LC5wYWdle2JveC1zaXppbmc6Ym9yZGVyLWJveDtkaXNwbGF5OmZsZXg7Y3Vyc29yOnBvaW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyO2JvcmRlci1zdHlsZTpub25lOy0tdHctYm9yZGVyLW9wYWNpdHk6MDtiYWNrZ3JvdW5kLWNvbG9yOnRyYW5zcGFyZW50O2ZvbnQtZmFtaWx5OmluaGVyaXQ7Zm9udC1zaXplOnZhcigtLWNhbGNpdGUtZm9udC1zaXplLTApO2xpbmUtaGVpZ2h0OjEuMjVyZW07Y29sb3I6dmFyKC0tY2FsY2l0ZS11aS10ZXh0LTMpO2JvcmRlci1ibG9jazoycHggc29saWQgdHJhbnNwYXJlbnR9LnByZXZpb3VzOmhvdmVyLC5uZXh0OmhvdmVyLC5wYWdlOmhvdmVye2NvbG9yOnZhcigtLWNhbGNpdGUtdWktdGV4dC0xKTt0cmFuc2l0aW9uOmFsbCB2YXIoLS1jYWxjaXRlLWFuaW1hdGlvbi10aW1pbmcpIGVhc2UtaW4tb3V0IDBzLCBvdXRsaW5lIDBzLCBvdXRsaW5lLW9mZnNldCAwc30ucGFnZTpob3Zlcntib3JkZXItYmxvY2stZW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtdWktYm9yZGVyLTIpfS5wYWdlLmlzLXNlbGVjdGVke2ZvbnQtd2VpZ2h0OnZhcigtLWNhbGNpdGUtZm9udC13ZWlnaHQtbWVkaXVtKTtjb2xvcjp2YXIoLS1jYWxjaXRlLXVpLXRleHQtMSk7Ym9yZGVyLWJsb2NrLWVuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLXVpLWJyYW5kKX0ucHJldmlvdXM6aG92ZXIsLm5leHQ6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLXVpLWZvcmVncm91bmQtMik7Y29sb3I6dmFyKC0tY2FsY2l0ZS11aS1icmFuZCl9LnByZXZpb3VzOmFjdGl2ZSwubmV4dDphY3RpdmV7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLXVpLWZvcmVncm91bmQtMyl9LnByZXZpb3VzLmlzLWRpc2FibGVkLC5uZXh0LmlzLWRpc2FibGVke3BvaW50ZXItZXZlbnRzOm5vbmU7YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudH0ucHJldmlvdXMuaXMtZGlzYWJsZWQ+Y2FsY2l0ZS1pY29uLC5uZXh0LmlzLWRpc2FibGVkPmNhbGNpdGUtaWNvbntvcGFjaXR5OnZhcigtLWNhbGNpdGUtdWktb3BhY2l0eS1kaXNhYmxlZCl9Lm5leHR7bWFyZ2luLWlubGluZS1lbmQ6MHB4fS5wYWdlLC5lbGxpcHNpc3twYWRkaW5nOnZhcigtLWNhbGNpdGUtcGFnaW5hdGlvbi1zcGFjaW5nLWludGVybmFsKX0uZWxsaXBzaXN7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmZsZXgtZW5kO2NvbG9yOnZhcigtLWNhbGNpdGUtdWktdGV4dC0zKX06aG9zdChbaGlkZGVuXSl7ZGlzcGxheTpub25lfVtoaWRkZW5de2Rpc3BsYXk6bm9uZX1cIjtcblxuY29uc3QgbWF4UGFnZXNEaXNwbGF5ZWQgPSA1O1xuY29uc3QgUGFnaW5hdGlvbiA9IC8qQF9fUFVSRV9fKi8gcHJveHlDdXN0b21FbGVtZW50KGNsYXNzIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuX19yZWdpc3Rlckhvc3QoKTtcbiAgICB0aGlzLl9fYXR0YWNoU2hhZG93KCk7XG4gICAgdGhpcy5jYWxjaXRlUGFnaW5hdGlvbkNoYW5nZSA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiY2FsY2l0ZVBhZ2luYXRpb25DaGFuZ2VcIiwgNik7XG4gICAgdGhpcy5wcmV2aW91c0NsaWNrZWQgPSAoKSA9PiB7XG4gICAgICB0aGlzLnByZXZpb3VzUGFnZSgpLnRoZW4oKTtcbiAgICAgIHRoaXMuZW1pdFVwZGF0ZSgpO1xuICAgIH07XG4gICAgdGhpcy5uZXh0Q2xpY2tlZCA9ICgpID0+IHtcbiAgICAgIHRoaXMubmV4dFBhZ2UoKTtcbiAgICAgIHRoaXMuZW1pdFVwZGF0ZSgpO1xuICAgIH07XG4gICAgdGhpcy5ncm91cFNlcGFyYXRvciA9IGZhbHNlO1xuICAgIHRoaXMubWVzc2FnZU92ZXJyaWRlcyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnBhZ2VTaXplID0gMjA7XG4gICAgdGhpcy5udW1iZXJpbmdTeXN0ZW0gPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5zdGFydEl0ZW0gPSAxO1xuICAgIHRoaXMudG90YWxJdGVtcyA9IDA7XG4gICAgdGhpcy5zY2FsZSA9IFwibVwiO1xuICAgIHRoaXMuZGVmYXVsdE1lc3NhZ2VzID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuZWZmZWN0aXZlTG9jYWxlID0gXCJcIjtcbiAgICB0aGlzLm1lc3NhZ2VzID0gdW5kZWZpbmVkO1xuICB9XG4gIG9uTWVzc2FnZXNDaGFuZ2UoKSB7XG4gICAgLyogd2lyZWQgdXAgYnkgdDluIHV0aWwgKi9cbiAgfVxuICBlZmZlY3RpdmVMb2NhbGVDaGFuZ2UoKSB7XG4gICAgdXBkYXRlTWVzc2FnZXModGhpcywgdGhpcy5lZmZlY3RpdmVMb2NhbGUpO1xuICB9XG4gIGVmZmVjdGl2ZUxvY2FsZVdhdGNoZXIoKSB7XG4gICAgbnVtYmVyU3RyaW5nRm9ybWF0dGVyLm51bWJlckZvcm1hdE9wdGlvbnMgPSB7XG4gICAgICBsb2NhbGU6IHRoaXMuZWZmZWN0aXZlTG9jYWxlLFxuICAgICAgbnVtYmVyaW5nU3lzdGVtOiB0aGlzLm51bWJlcmluZ1N5c3RlbSxcbiAgICAgIHVzZUdyb3VwaW5nOiB0aGlzLmdyb3VwU2VwYXJhdG9yLFxuICAgIH07XG4gIH1cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy9cbiAgLy8gIExpZmVjeWNsZVxuICAvL1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBjb25uZWN0TG9jYWxpemVkKHRoaXMpO1xuICAgIGNvbm5lY3RNZXNzYWdlcyh0aGlzKTtcbiAgfVxuICBhc3luYyBjb21wb25lbnRXaWxsTG9hZCgpIHtcbiAgICBhd2FpdCBzZXRVcE1lc3NhZ2VzKHRoaXMpO1xuICAgIHNldFVwTG9hZGFibGVDb21wb25lbnQodGhpcyk7XG4gIH1cbiAgY29tcG9uZW50RGlkTG9hZCgpIHtcbiAgICBzZXRDb21wb25lbnRMb2FkZWQodGhpcyk7XG4gIH1cbiAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgZGlzY29ubmVjdExvY2FsaXplZCh0aGlzKTtcbiAgICBkaXNjb25uZWN0TWVzc2FnZXModGhpcyk7XG4gIH1cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy9cbiAgLy8gIFB1YmxpYyBNZXRob2RzXG4gIC8vXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8qKiBTZXRzIGZvY3VzIG9uIHRoZSBjb21wb25lbnQncyBmaXJzdCBmb2N1c2FibGUgZWxlbWVudC4gKi9cbiAgYXN5bmMgc2V0Rm9jdXMoKSB7XG4gICAgYXdhaXQgY29tcG9uZW50Rm9jdXNhYmxlKHRoaXMpO1xuICAgIHRoaXMuZWwuZm9jdXMoKTtcbiAgfVxuICAvKiogR28gdG8gdGhlIG5leHQgcGFnZSBvZiByZXN1bHRzLiAqL1xuICBhc3luYyBuZXh0UGFnZSgpIHtcbiAgICB0aGlzLnN0YXJ0SXRlbSA9IE1hdGgubWluKHRoaXMuZ2V0TGFzdFN0YXJ0KCksIHRoaXMuc3RhcnRJdGVtICsgdGhpcy5wYWdlU2l6ZSk7XG4gIH1cbiAgLyoqIEdvIHRvIHRoZSBwcmV2aW91cyBwYWdlIG9mIHJlc3VsdHMuICovXG4gIGFzeW5jIHByZXZpb3VzUGFnZSgpIHtcbiAgICB0aGlzLnN0YXJ0SXRlbSA9IE1hdGgubWF4KDEsIHRoaXMuc3RhcnRJdGVtIC0gdGhpcy5wYWdlU2l6ZSk7XG4gIH1cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy9cbiAgLy8gIFByaXZhdGUgTWV0aG9kc1xuICAvL1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBnZXRMYXN0U3RhcnQoKSB7XG4gICAgY29uc3QgeyB0b3RhbEl0ZW1zLCBwYWdlU2l6ZSB9ID0gdGhpcztcbiAgICBjb25zdCBsYXN0U3RhcnQgPSB0b3RhbEl0ZW1zICUgcGFnZVNpemUgPT09IDBcbiAgICAgID8gdG90YWxJdGVtcyAtIHBhZ2VTaXplXG4gICAgICA6IE1hdGguZmxvb3IodG90YWxJdGVtcyAvIHBhZ2VTaXplKSAqIHBhZ2VTaXplO1xuICAgIHJldHVybiBsYXN0U3RhcnQgKyAxO1xuICB9XG4gIHNob3dMZWZ0RWxsaXBzaXMoKSB7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IodGhpcy5zdGFydEl0ZW0gLyB0aGlzLnBhZ2VTaXplKSA+IDM7XG4gIH1cbiAgc2hvd1JpZ2h0RWxsaXBzaXMoKSB7XG4gICAgcmV0dXJuICh0aGlzLnRvdGFsSXRlbXMgLSB0aGlzLnN0YXJ0SXRlbSkgLyB0aGlzLnBhZ2VTaXplID4gMztcbiAgfVxuICBlbWl0VXBkYXRlKCkge1xuICAgIHRoaXMuY2FsY2l0ZVBhZ2luYXRpb25DaGFuZ2UuZW1pdCgpO1xuICB9XG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy9cbiAgLy8gIFJlbmRlciBNZXRob2RzXG4gIC8vXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgcmVuZGVyUGFnZXMoKSB7XG4gICAgY29uc3QgbGFzdFN0YXJ0ID0gdGhpcy5nZXRMYXN0U3RhcnQoKTtcbiAgICBsZXQgZW5kO1xuICAgIGxldCBuZXh0U3RhcnQ7XG4gICAgLy8gaWYgd2UgZG9uJ3QgbmVlZCBlbGxpcHNlcyByZW5kZXIgdGhlIHdob2xlIHNldFxuICAgIGlmICh0aGlzLnRvdGFsSXRlbXMgLyB0aGlzLnBhZ2VTaXplIDw9IG1heFBhZ2VzRGlzcGxheWVkKSB7XG4gICAgICBuZXh0U3RhcnQgPSAxICsgdGhpcy5wYWdlU2l6ZTtcbiAgICAgIGVuZCA9IGxhc3RTdGFydCAtIHRoaXMucGFnZVNpemU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgLy8gaWYgd2UncmUgd2l0aGluIG1heCBwYWdlcyBvZiBwYWdlIDFcbiAgICAgIGlmICh0aGlzLnN0YXJ0SXRlbSAvIHRoaXMucGFnZVNpemUgPCBtYXhQYWdlc0Rpc3BsYXllZCAtIDEpIHtcbiAgICAgICAgbmV4dFN0YXJ0ID0gMSArIHRoaXMucGFnZVNpemU7XG4gICAgICAgIGVuZCA9IDEgKyA0ICogdGhpcy5wYWdlU2l6ZTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICAvLyBpZiB3ZSdyZSB3aXRoaW4gbWF4IHBhZ2VzIG9mIGxhc3QgcGFnZVxuICAgICAgICBpZiAodGhpcy5zdGFydEl0ZW0gKyAzICogdGhpcy5wYWdlU2l6ZSA+PSB0aGlzLnRvdGFsSXRlbXMpIHtcbiAgICAgICAgICBuZXh0U3RhcnQgPSBsYXN0U3RhcnQgLSA0ICogdGhpcy5wYWdlU2l6ZTtcbiAgICAgICAgICBlbmQgPSBsYXN0U3RhcnQgLSB0aGlzLnBhZ2VTaXplO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIG5leHRTdGFydCA9IHRoaXMuc3RhcnRJdGVtIC0gdGhpcy5wYWdlU2l6ZTtcbiAgICAgICAgICBlbmQgPSB0aGlzLnN0YXJ0SXRlbSArIHRoaXMucGFnZVNpemU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgcGFnZXMgPSBbXTtcbiAgICB3aGlsZSAobmV4dFN0YXJ0IDw9IGVuZCkge1xuICAgICAgcGFnZXMucHVzaChuZXh0U3RhcnQpO1xuICAgICAgbmV4dFN0YXJ0ID0gbmV4dFN0YXJ0ICsgdGhpcy5wYWdlU2l6ZTtcbiAgICB9XG4gICAgcmV0dXJuIHBhZ2VzLm1hcCgocGFnZSkgPT4gdGhpcy5yZW5kZXJQYWdlKHBhZ2UpKTtcbiAgfVxuICByZW5kZXJQYWdlKHN0YXJ0KSB7XG4gICAgY29uc3QgcGFnZSA9IE1hdGguZmxvb3Ioc3RhcnQgLyB0aGlzLnBhZ2VTaXplKSArICh0aGlzLnBhZ2VTaXplID09PSAxID8gMCA6IDEpO1xuICAgIG51bWJlclN0cmluZ0Zvcm1hdHRlci5udW1iZXJGb3JtYXRPcHRpb25zID0ge1xuICAgICAgbG9jYWxlOiB0aGlzLmVmZmVjdGl2ZUxvY2FsZSxcbiAgICAgIG51bWJlcmluZ1N5c3RlbTogdGhpcy5udW1iZXJpbmdTeXN0ZW0sXG4gICAgICB1c2VHcm91cGluZzogdGhpcy5ncm91cFNlcGFyYXRvcixcbiAgICB9O1xuICAgIGNvbnN0IGRpc3BsYXllZFBhZ2UgPSBudW1iZXJTdHJpbmdGb3JtYXR0ZXIubG9jYWxpemUocGFnZS50b1N0cmluZygpKTtcbiAgICBjb25zdCBzZWxlY3RlZCA9IHN0YXJ0ID09PSB0aGlzLnN0YXJ0SXRlbTtcbiAgICByZXR1cm4gKGgoXCJidXR0b25cIiwgeyBcImFyaWEtY3VycmVudFwiOiBzZWxlY3RlZCA/IFwicGFnZVwiIDogXCJmYWxzZVwiLCBjbGFzczoge1xuICAgICAgICBbQ1NTLnBhZ2VdOiB0cnVlLFxuICAgICAgICBbQ1NTLnNlbGVjdGVkXTogc2VsZWN0ZWQsXG4gICAgICB9LCBvbkNsaWNrOiAoKSA9PiB7XG4gICAgICAgIHRoaXMuc3RhcnRJdGVtID0gc3RhcnQ7XG4gICAgICAgIHRoaXMuZW1pdFVwZGF0ZSgpO1xuICAgICAgfSB9LCBkaXNwbGF5ZWRQYWdlKSk7XG4gIH1cbiAgcmVuZGVyTGVmdEVsbGlwc2lzKCkge1xuICAgIGlmICh0aGlzLnRvdGFsSXRlbXMgLyB0aGlzLnBhZ2VTaXplID4gbWF4UGFnZXNEaXNwbGF5ZWQgJiYgdGhpcy5zaG93TGVmdEVsbGlwc2lzKCkpIHtcbiAgICAgIHJldHVybiBoKFwic3BhblwiLCB7IGNsYXNzOiBgJHtDU1MuZWxsaXBzaXN9ICR7Q1NTLmVsbGlwc2lzU3RhcnR9YCB9LCBcIlxcdTIwMjZcIik7XG4gICAgfVxuICB9XG4gIHJlbmRlclJpZ2h0RWxsaXBzaXMoKSB7XG4gICAgaWYgKHRoaXMudG90YWxJdGVtcyAvIHRoaXMucGFnZVNpemUgPiBtYXhQYWdlc0Rpc3BsYXllZCAmJiB0aGlzLnNob3dSaWdodEVsbGlwc2lzKCkpIHtcbiAgICAgIHJldHVybiBoKFwic3BhblwiLCB7IGNsYXNzOiBgJHtDU1MuZWxsaXBzaXN9ICR7Q1NTLmVsbGlwc2lzRW5kfWAgfSwgXCJcXHUyMDI2XCIpO1xuICAgIH1cbiAgfVxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyB0b3RhbEl0ZW1zLCBwYWdlU2l6ZSwgc3RhcnRJdGVtIH0gPSB0aGlzO1xuICAgIGNvbnN0IHByZXZEaXNhYmxlZCA9IHBhZ2VTaXplID09PSAxID8gc3RhcnRJdGVtIDw9IHBhZ2VTaXplIDogc3RhcnRJdGVtIDwgcGFnZVNpemU7XG4gICAgY29uc3QgbmV4dERpc2FibGVkID0gcGFnZVNpemUgPT09IDEgPyBzdGFydEl0ZW0gKyBwYWdlU2l6ZSA+IHRvdGFsSXRlbXMgOiBzdGFydEl0ZW0gKyBwYWdlU2l6ZSA+IHRvdGFsSXRlbXM7XG4gICAgcmV0dXJuIChoKEZyYWdtZW50LCBudWxsLCBoKFwiYnV0dG9uXCIsIHsgXCJhcmlhLWxhYmVsXCI6IHRoaXMubWVzc2FnZXMucHJldmlvdXMsIGNsYXNzOiB7XG4gICAgICAgIFtDU1MucHJldmlvdXNdOiB0cnVlLFxuICAgICAgICBbQ1NTLmRpc2FibGVkXTogcHJldkRpc2FibGVkLFxuICAgICAgfSwgZGlzYWJsZWQ6IHByZXZEaXNhYmxlZCwgb25DbGljazogdGhpcy5wcmV2aW91c0NsaWNrZWQgfSwgaChcImNhbGNpdGUtaWNvblwiLCB7IGZsaXBSdGw6IHRydWUsIGljb246IFwiY2hldnJvbkxlZnRcIiwgc2NhbGU6IHRoaXMuc2NhbGUgPT09IFwibFwiID8gXCJtXCIgOiBcInNcIiB9KSksIHRvdGFsSXRlbXMgPiBwYWdlU2l6ZSA/IHRoaXMucmVuZGVyUGFnZSgxKSA6IG51bGwsIHRoaXMucmVuZGVyTGVmdEVsbGlwc2lzKCksIHRoaXMucmVuZGVyUGFnZXMoKSwgdGhpcy5yZW5kZXJSaWdodEVsbGlwc2lzKCksIHRoaXMucmVuZGVyUGFnZSh0aGlzLmdldExhc3RTdGFydCgpKSwgaChcImJ1dHRvblwiLCB7IFwiYXJpYS1sYWJlbFwiOiB0aGlzLm1lc3NhZ2VzLm5leHQsIGNsYXNzOiB7XG4gICAgICAgIFtDU1MubmV4dF06IHRydWUsXG4gICAgICAgIFtDU1MuZGlzYWJsZWRdOiBuZXh0RGlzYWJsZWQsXG4gICAgICB9LCBkaXNhYmxlZDogbmV4dERpc2FibGVkLCBvbkNsaWNrOiB0aGlzLm5leHRDbGlja2VkIH0sIGgoXCJjYWxjaXRlLWljb25cIiwgeyBmbGlwUnRsOiB0cnVlLCBpY29uOiBcImNoZXZyb25SaWdodFwiLCBzY2FsZTogdGhpcy5zY2FsZSA9PT0gXCJsXCIgPyBcIm1cIiA6IFwic1wiIH0pKSkpO1xuICB9XG4gIHN0YXRpYyBnZXQgZGVsZWdhdGVzRm9jdXMoKSB7IHJldHVybiB0cnVlOyB9XG4gIHN0YXRpYyBnZXQgYXNzZXRzRGlycygpIHsgcmV0dXJuIFtcImFzc2V0c1wiXTsgfVxuICBnZXQgZWwoKSB7IHJldHVybiB0aGlzOyB9XG4gIHN0YXRpYyBnZXQgd2F0Y2hlcnMoKSB7IHJldHVybiB7XG4gICAgXCJtZXNzYWdlT3ZlcnJpZGVzXCI6IFtcIm9uTWVzc2FnZXNDaGFuZ2VcIl0sXG4gICAgXCJlZmZlY3RpdmVMb2NhbGVcIjogW1wiZWZmZWN0aXZlTG9jYWxlQ2hhbmdlXCIsIFwiZWZmZWN0aXZlTG9jYWxlV2F0Y2hlclwiXVxuICB9OyB9XG4gIHN0YXRpYyBnZXQgc3R5bGUoKSB7IHJldHVybiBwYWdpbmF0aW9uQ3NzOyB9XG59LCBbMTcsIFwiY2FsY2l0ZS1wYWdpbmF0aW9uXCIsIHtcbiAgICBcImdyb3VwU2VwYXJhdG9yXCI6IFs1MTYsIFwiZ3JvdXAtc2VwYXJhdG9yXCJdLFxuICAgIFwibWVzc2FnZU92ZXJyaWRlc1wiOiBbMTA0MF0sXG4gICAgXCJwYWdlU2l6ZVwiOiBbNTE0LCBcInBhZ2Utc2l6ZVwiXSxcbiAgICBcIm51bWJlcmluZ1N5c3RlbVwiOiBbMSwgXCJudW1iZXJpbmctc3lzdGVtXCJdLFxuICAgIFwic3RhcnRJdGVtXCI6IFsxNTM4LCBcInN0YXJ0LWl0ZW1cIl0sXG4gICAgXCJ0b3RhbEl0ZW1zXCI6IFs1MTQsIFwidG90YWwtaXRlbXNcIl0sXG4gICAgXCJzY2FsZVwiOiBbNTEzXSxcbiAgICBcIm1lc3NhZ2VzXCI6IFsxMDQwXSxcbiAgICBcImRlZmF1bHRNZXNzYWdlc1wiOiBbMzJdLFxuICAgIFwiZWZmZWN0aXZlTG9jYWxlXCI6IFszMl0sXG4gICAgXCJzZXRGb2N1c1wiOiBbNjRdLFxuICAgIFwibmV4dFBhZ2VcIjogWzY0XSxcbiAgICBcInByZXZpb3VzUGFnZVwiOiBbNjRdXG4gIH1dKTtcbmZ1bmN0aW9uIGRlZmluZUN1c3RvbUVsZW1lbnQoKSB7XG4gIGlmICh0eXBlb2YgY3VzdG9tRWxlbWVudHMgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgY29tcG9uZW50cyA9IFtcImNhbGNpdGUtcGFnaW5hdGlvblwiLCBcImNhbGNpdGUtaWNvblwiXTtcbiAgY29tcG9uZW50cy5mb3JFYWNoKHRhZ05hbWUgPT4geyBzd2l0Y2ggKHRhZ05hbWUpIHtcbiAgICBjYXNlIFwiY2FsY2l0ZS1wYWdpbmF0aW9uXCI6XG4gICAgICBpZiAoIWN1c3RvbUVsZW1lbnRzLmdldCh0YWdOYW1lKSkge1xuICAgICAgICBjdXN0b21FbGVtZW50cy5kZWZpbmUodGFnTmFtZSwgUGFnaW5hdGlvbik7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwiY2FsY2l0ZS1pY29uXCI6XG4gICAgICBpZiAoIWN1c3RvbUVsZW1lbnRzLmdldCh0YWdOYW1lKSkge1xuICAgICAgICBkZWZpbmVDdXN0b21FbGVtZW50JDEoKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICB9IH0pO1xufVxuZGVmaW5lQ3VzdG9tRWxlbWVudCgpO1xuXG5leHBvcnQgeyBQYWdpbmF0aW9uIGFzIFAsIGRlZmluZUN1c3RvbUVsZW1lbnQgYXMgZCB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9