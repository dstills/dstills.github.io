"use strict";
(self["webpackChunksynview"] = self["webpackChunksynview"] || []).push([["node_modules_esri_calcite-components_dist_components_calcite-color-picker-swatch_js"],{

/***/ "./node_modules/@esri/calcite-components/dist/components/calcite-color-picker-swatch.js":
/*!**********************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/components/calcite-color-picker-swatch.js ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CalciteColorPickerSwatch: () => (/* binding */ CalciteColorPickerSwatch),
/* harmony export */   defineCustomElement: () => (/* binding */ defineCustomElement)
/* harmony export */ });
/* harmony import */ var _color_picker_swatch_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./color-picker-swatch.js */ "./node_modules/@esri/calcite-components/dist/components/color-picker-swatch.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.7.0
 */


const CalciteColorPickerSwatch = _color_picker_swatch_js__WEBPACK_IMPORTED_MODULE_0__.C;
const defineCustomElement = _color_picker_swatch_js__WEBPACK_IMPORTED_MODULE_0__.d;




/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/components/color-picker-swatch.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/components/color-picker-swatch.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   C: () => (/* binding */ ColorPickerSwatch),
/* harmony export */   d: () => (/* binding */ defineCustomElement)
/* harmony export */ });
/* harmony import */ var _stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @stencil/core/internal/client/index.js */ "./node_modules/@stencil/core/internal/client/index.js");
/* harmony import */ var _index2_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index2.js */ "./node_modules/@esri/calcite-components/dist/components/index2.js");
/* harmony import */ var _dom_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./dom.js */ "./node_modules/@esri/calcite-components/dist/components/dom.js");
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils.js */ "./node_modules/@esri/calcite-components/dist/components/utils.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.7.0
 */





const CSS = {
  swatch: "swatch",
  noColorSwatch: "swatch--no-color",
  checker: "checker",
};
const COLORS = {
  borderLight: "rgba(0, 0, 0, 0.3)",
  borderDark: "rgba(255, 255, 255, 0.15)",
};
const checkerSquareSize = 4;
const CHECKER_DIMENSIONS = {
  squareSize: checkerSquareSize,
  size: checkerSquareSize * 2,
};

const colorPickerSwatchCss = ":host{position:relative;display:inline-flex}:host([scale=s]){block-size:1.25rem;inline-size:1.25rem}:host([scale=m]){block-size:1.5rem;inline-size:1.5rem}:host([scale=l]){block-size:2rem;inline-size:2rem}.swatch{overflow:hidden;block-size:inherit;inline-size:inherit}.swatch rect{transition-property:all;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}.swatch--no-color rect{fill:var(--calcite-ui-foreground-1)}.swatch--no-color line{stroke:var(--calcite-ui-danger)}.checker{fill:#cacaca}:host([hidden]){display:none}[hidden]{display:none}";

const ColorPickerSwatch = /*@__PURE__*/ (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_3__.proxyCustomElement)(class extends _stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_3__.HTMLElement {
  constructor() {
    super();
    this.__registerHost();
    this.__attachShadow();
    this.active = false;
    this.color = undefined;
    this.scale = "m";
  }
  handleColorChange(color$1) {
    this.internalColor = color$1 ? (0,_index2_js__WEBPACK_IMPORTED_MODULE_0__.c)(color$1) : null;
  }
  //--------------------------------------------------------------------------
  //
  //  Lifecycle
  //
  //--------------------------------------------------------------------------
  componentWillLoad() {
    this.handleColorChange(this.color);
  }
  render() {
    const isEmpty = !this.internalColor;
    const classes = {
      [CSS.swatch]: true,
      [CSS.noColorSwatch]: isEmpty,
    };
    return ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_3__.h)("svg", { class: classes, xmlns: "http://www.w3.org/2000/svg" }, this.renderSwatch()));
  }
  renderSwatch() {
    const { active, el, internalColor } = this;
    const borderRadius = active ? "100%" : "0";
    const theme = (0,_dom_js__WEBPACK_IMPORTED_MODULE_1__.r)(el);
    const borderColor = theme === "light" ? COLORS.borderLight : COLORS.borderDark;
    const commonSwatchProps = {
      height: "100%",
      rx: borderRadius,
      stroke: borderColor,
      // stroke-width and clip-path are needed to hide overflowing portion of stroke
      // see https://stackoverflow.com/a/7273346/194216
      // using attribute to work around Stencil using the prop name vs the attribute when rendering
      ["stroke-width"]: "2",
      width: "100%",
    };
    const isEmpty = !internalColor;
    if (isEmpty) {
      return ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_3__.h)(_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_3__.Fragment, null, (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_3__.h)("clipPath", { id: "shape" }, (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_3__.h)("rect", { height: "100%", rx: borderRadius, width: "100%" })), (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_3__.h)("rect", { "clip-path": `inset(0 round ${borderRadius})`, rx: borderRadius, ...commonSwatchProps }), (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_3__.h)("line", { "clip-path": "url(#shape)", "stroke-width": "3", x1: "100%", x2: "0", y1: "0", y2: "100%" })));
    }
    const alpha = internalColor.alpha();
    const hex = (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.h)(internalColor);
    const hexa = (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.h)(internalColor, alpha < 1);
    return ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_3__.h)(_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_3__.Fragment, null, (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_3__.h)("title", null, hexa), (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_3__.h)("defs", null, (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_3__.h)("pattern", { height: CHECKER_DIMENSIONS.size, id: "checker", patternUnits: "userSpaceOnUse", width: CHECKER_DIMENSIONS.size, x: "0", y: "0" }, (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_3__.h)("rect", { class: CSS.checker, height: CHECKER_DIMENSIONS.squareSize, width: CHECKER_DIMENSIONS.squareSize, x: "0", y: "0" }), (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_3__.h)("rect", { class: CSS.checker, height: CHECKER_DIMENSIONS.squareSize, width: CHECKER_DIMENSIONS.squareSize, x: CHECKER_DIMENSIONS.squareSize, y: CHECKER_DIMENSIONS.squareSize }))), (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_3__.h)("rect", { fill: "url(#checker)", height: "100%", rx: borderRadius, width: "100%" }), (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_3__.h)("rect", { fill: hex, style: {
        "clip-path": alpha < 1 ? "polygon(100% 0, 0 0, 0 100%)" : `inset(0 round ${borderRadius})`,
      }, ...commonSwatchProps }), alpha < 1 ? ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_3__.h)("rect", { fill: hexa, key: "opacity-fill", style: { "clip-path": "polygon(100% 0, 100% 100%, 0 100%)" }, ...commonSwatchProps })) : null));
  }
  get el() { return this; }
  static get watchers() { return {
    "color": ["handleColorChange"]
  }; }
  static get style() { return colorPickerSwatchCss; }
}, [1, "calcite-color-picker-swatch", {
    "active": [516],
    "color": [1],
    "scale": [513]
  }]);
function defineCustomElement() {
  if (typeof customElements === "undefined") {
    return;
  }
  const components = ["calcite-color-picker-swatch"];
  components.forEach(tagName => { switch (tagName) {
    case "calcite-color-picker-swatch":
      if (!customElements.get(tagName)) {
        customElements.define(tagName, ColorPickerSwatch);
      }
      break;
  } });
}
defineCustomElement();




/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX2VzcmlfY2FsY2l0ZS1jb21wb25lbnRzX2Rpc3RfY29tcG9uZW50c19jYWxjaXRlLWNvbG9yLXBpY2tlci1zd2F0Y2hfanMuYnVuZGxlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDOEY7O0FBRTlGLGlDQUFpQyxzREFBaUI7QUFDbEQsNEJBQTRCLHNEQUFxQjs7QUFFUTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNWekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNzRztBQUM3RDtBQUNHO0FBQ0g7O0FBRXpDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsb0NBQW9DLGtCQUFrQixvQkFBb0IsaUJBQWlCLG1CQUFtQixvQkFBb0IsaUJBQWlCLGtCQUFrQixtQkFBbUIsaUJBQWlCLGdCQUFnQixpQkFBaUIsUUFBUSxnQkFBZ0IsbUJBQW1CLG9CQUFvQixhQUFhLHdCQUF3QiwwQkFBMEIsd0RBQXdELHVCQUF1QixvQ0FBb0MsdUJBQXVCLGdDQUFnQyxTQUFTLGFBQWEsZ0JBQWdCLGFBQWEsU0FBUyxhQUFhOztBQUUzbEIsd0NBQXdDLDBGQUFrQixlQUFlLCtFQUFXO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyw2Q0FBSztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHlFQUFDLFVBQVUscURBQXFEO0FBQzVFO0FBQ0E7QUFDQSxZQUFZLDRCQUE0QjtBQUN4QztBQUNBLGtCQUFrQiwwQ0FBVztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMseUVBQUMsQ0FBQyw0RUFBUSxRQUFRLHlFQUFDLGVBQWUsYUFBYSxFQUFFLHlFQUFDLFdBQVcsaURBQWlELElBQUkseUVBQUMsV0FBVyw4QkFBOEIsYUFBYSw0Q0FBNEMsR0FBRyx5RUFBQyxXQUFXLDJGQUEyRjtBQUM3VTtBQUNBO0FBQ0EsZ0JBQWdCLDRDQUFNO0FBQ3RCLGlCQUFpQiw0Q0FBTTtBQUN2QixZQUFZLHlFQUFDLENBQUMsNEVBQVEsUUFBUSx5RUFBQyx1QkFBdUIseUVBQUMsZUFBZSx5RUFBQyxjQUFjLGdJQUFnSSxFQUFFLHlFQUFDLFdBQVcsaUhBQWlILEdBQUcseUVBQUMsV0FBVyxxS0FBcUssS0FBSyx5RUFBQyxXQUFXLHdFQUF3RSxHQUFHLHlFQUFDLFdBQVc7QUFDaG5CLG1GQUFtRixhQUFhO0FBQ2hHLE9BQU8sd0JBQXdCLGdCQUFnQix5RUFBQyxXQUFXLDBDQUEwQyxtREFBbUQsd0JBQXdCO0FBQ2hMO0FBQ0EsYUFBYTtBQUNiLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRTREIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3ludmlldy8uL25vZGVfbW9kdWxlcy9AZXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvZGlzdC9jb21wb25lbnRzL2NhbGNpdGUtY29sb3ItcGlja2VyLXN3YXRjaC5qcyIsIndlYnBhY2s6Ly9zeW52aWV3Ly4vbm9kZV9tb2R1bGVzL0Blc3JpL2NhbGNpdGUtY29tcG9uZW50cy9kaXN0L2NvbXBvbmVudHMvY29sb3ItcGlja2VyLXN3YXRjaC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1kZXNpZ24tc3lzdGVtL2Jsb2IvbWFpbi9MSUNFTlNFLm1kIGZvciBkZXRhaWxzLlxuICogdjEuNy4wXG4gKi9cbmltcG9ydCB7IEMgYXMgQ29sb3JQaWNrZXJTd2F0Y2gsIGQgYXMgZGVmaW5lQ3VzdG9tRWxlbWVudCQxIH0gZnJvbSAnLi9jb2xvci1waWNrZXItc3dhdGNoLmpzJztcblxuY29uc3QgQ2FsY2l0ZUNvbG9yUGlja2VyU3dhdGNoID0gQ29sb3JQaWNrZXJTd2F0Y2g7XG5jb25zdCBkZWZpbmVDdXN0b21FbGVtZW50ID0gZGVmaW5lQ3VzdG9tRWxlbWVudCQxO1xuXG5leHBvcnQgeyBDYWxjaXRlQ29sb3JQaWNrZXJTd2F0Y2gsIGRlZmluZUN1c3RvbUVsZW1lbnQgfTtcbiIsIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWRlc2lnbi1zeXN0ZW0vYmxvYi9tYWluL0xJQ0VOU0UubWQgZm9yIGRldGFpbHMuXG4gKiB2MS43LjBcbiAqL1xuaW1wb3J0IHsgcHJveHlDdXN0b21FbGVtZW50LCBIVE1MRWxlbWVudCwgaCwgRnJhZ21lbnQgfSBmcm9tICdAc3RlbmNpbC9jb3JlL2ludGVybmFsL2NsaWVudC9pbmRleC5qcyc7XG5pbXBvcnQgeyBjIGFzIGNvbG9yIH0gZnJvbSAnLi9pbmRleDIuanMnO1xuaW1wb3J0IHsgciBhcyBnZXRNb2RlTmFtZSB9IGZyb20gJy4vZG9tLmpzJztcbmltcG9ydCB7IGggYXMgaGV4aWZ5IH0gZnJvbSAnLi91dGlscy5qcyc7XG5cbmNvbnN0IENTUyA9IHtcbiAgc3dhdGNoOiBcInN3YXRjaFwiLFxuICBub0NvbG9yU3dhdGNoOiBcInN3YXRjaC0tbm8tY29sb3JcIixcbiAgY2hlY2tlcjogXCJjaGVja2VyXCIsXG59O1xuY29uc3QgQ09MT1JTID0ge1xuICBib3JkZXJMaWdodDogXCJyZ2JhKDAsIDAsIDAsIDAuMylcIixcbiAgYm9yZGVyRGFyazogXCJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMTUpXCIsXG59O1xuY29uc3QgY2hlY2tlclNxdWFyZVNpemUgPSA0O1xuY29uc3QgQ0hFQ0tFUl9ESU1FTlNJT05TID0ge1xuICBzcXVhcmVTaXplOiBjaGVja2VyU3F1YXJlU2l6ZSxcbiAgc2l6ZTogY2hlY2tlclNxdWFyZVNpemUgKiAyLFxufTtcblxuY29uc3QgY29sb3JQaWNrZXJTd2F0Y2hDc3MgPSBcIjpob3N0e3Bvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6aW5saW5lLWZsZXh9Omhvc3QoW3NjYWxlPXNdKXtibG9jay1zaXplOjEuMjVyZW07aW5saW5lLXNpemU6MS4yNXJlbX06aG9zdChbc2NhbGU9bV0pe2Jsb2NrLXNpemU6MS41cmVtO2lubGluZS1zaXplOjEuNXJlbX06aG9zdChbc2NhbGU9bF0pe2Jsb2NrLXNpemU6MnJlbTtpbmxpbmUtc2l6ZToycmVtfS5zd2F0Y2h7b3ZlcmZsb3c6aGlkZGVuO2Jsb2NrLXNpemU6aW5oZXJpdDtpbmxpbmUtc2l6ZTppbmhlcml0fS5zd2F0Y2ggcmVjdHt0cmFuc2l0aW9uLXByb3BlcnR5OmFsbDt0cmFuc2l0aW9uLWR1cmF0aW9uOjE1MG1zO3RyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOmN1YmljLWJlemllcigwLjQsIDAsIDAuMiwgMSl9LnN3YXRjaC0tbm8tY29sb3IgcmVjdHtmaWxsOnZhcigtLWNhbGNpdGUtdWktZm9yZWdyb3VuZC0xKX0uc3dhdGNoLS1uby1jb2xvciBsaW5le3N0cm9rZTp2YXIoLS1jYWxjaXRlLXVpLWRhbmdlcil9LmNoZWNrZXJ7ZmlsbDojY2FjYWNhfTpob3N0KFtoaWRkZW5dKXtkaXNwbGF5Om5vbmV9W2hpZGRlbl17ZGlzcGxheTpub25lfVwiO1xuXG5jb25zdCBDb2xvclBpY2tlclN3YXRjaCA9IC8qQF9fUFVSRV9fKi8gcHJveHlDdXN0b21FbGVtZW50KGNsYXNzIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuX19yZWdpc3Rlckhvc3QoKTtcbiAgICB0aGlzLl9fYXR0YWNoU2hhZG93KCk7XG4gICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICB0aGlzLmNvbG9yID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuc2NhbGUgPSBcIm1cIjtcbiAgfVxuICBoYW5kbGVDb2xvckNoYW5nZShjb2xvciQxKSB7XG4gICAgdGhpcy5pbnRlcm5hbENvbG9yID0gY29sb3IkMSA/IGNvbG9yKGNvbG9yJDEpIDogbnVsbDtcbiAgfVxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vXG4gIC8vICBMaWZlY3ljbGVcbiAgLy9cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBjb21wb25lbnRXaWxsTG9hZCgpIHtcbiAgICB0aGlzLmhhbmRsZUNvbG9yQ2hhbmdlKHRoaXMuY29sb3IpO1xuICB9XG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCBpc0VtcHR5ID0gIXRoaXMuaW50ZXJuYWxDb2xvcjtcbiAgICBjb25zdCBjbGFzc2VzID0ge1xuICAgICAgW0NTUy5zd2F0Y2hdOiB0cnVlLFxuICAgICAgW0NTUy5ub0NvbG9yU3dhdGNoXTogaXNFbXB0eSxcbiAgICB9O1xuICAgIHJldHVybiAoaChcInN2Z1wiLCB7IGNsYXNzOiBjbGFzc2VzLCB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIH0sIHRoaXMucmVuZGVyU3dhdGNoKCkpKTtcbiAgfVxuICByZW5kZXJTd2F0Y2goKSB7XG4gICAgY29uc3QgeyBhY3RpdmUsIGVsLCBpbnRlcm5hbENvbG9yIH0gPSB0aGlzO1xuICAgIGNvbnN0IGJvcmRlclJhZGl1cyA9IGFjdGl2ZSA/IFwiMTAwJVwiIDogXCIwXCI7XG4gICAgY29uc3QgdGhlbWUgPSBnZXRNb2RlTmFtZShlbCk7XG4gICAgY29uc3QgYm9yZGVyQ29sb3IgPSB0aGVtZSA9PT0gXCJsaWdodFwiID8gQ09MT1JTLmJvcmRlckxpZ2h0IDogQ09MT1JTLmJvcmRlckRhcms7XG4gICAgY29uc3QgY29tbW9uU3dhdGNoUHJvcHMgPSB7XG4gICAgICBoZWlnaHQ6IFwiMTAwJVwiLFxuICAgICAgcng6IGJvcmRlclJhZGl1cyxcbiAgICAgIHN0cm9rZTogYm9yZGVyQ29sb3IsXG4gICAgICAvLyBzdHJva2Utd2lkdGggYW5kIGNsaXAtcGF0aCBhcmUgbmVlZGVkIHRvIGhpZGUgb3ZlcmZsb3dpbmcgcG9ydGlvbiBvZiBzdHJva2VcbiAgICAgIC8vIHNlZSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvNzI3MzM0Ni8xOTQyMTZcbiAgICAgIC8vIHVzaW5nIGF0dHJpYnV0ZSB0byB3b3JrIGFyb3VuZCBTdGVuY2lsIHVzaW5nIHRoZSBwcm9wIG5hbWUgdnMgdGhlIGF0dHJpYnV0ZSB3aGVuIHJlbmRlcmluZ1xuICAgICAgW1wic3Ryb2tlLXdpZHRoXCJdOiBcIjJcIixcbiAgICAgIHdpZHRoOiBcIjEwMCVcIixcbiAgICB9O1xuICAgIGNvbnN0IGlzRW1wdHkgPSAhaW50ZXJuYWxDb2xvcjtcbiAgICBpZiAoaXNFbXB0eSkge1xuICAgICAgcmV0dXJuIChoKEZyYWdtZW50LCBudWxsLCBoKFwiY2xpcFBhdGhcIiwgeyBpZDogXCJzaGFwZVwiIH0sIGgoXCJyZWN0XCIsIHsgaGVpZ2h0OiBcIjEwMCVcIiwgcng6IGJvcmRlclJhZGl1cywgd2lkdGg6IFwiMTAwJVwiIH0pKSwgaChcInJlY3RcIiwgeyBcImNsaXAtcGF0aFwiOiBgaW5zZXQoMCByb3VuZCAke2JvcmRlclJhZGl1c30pYCwgcng6IGJvcmRlclJhZGl1cywgLi4uY29tbW9uU3dhdGNoUHJvcHMgfSksIGgoXCJsaW5lXCIsIHsgXCJjbGlwLXBhdGhcIjogXCJ1cmwoI3NoYXBlKVwiLCBcInN0cm9rZS13aWR0aFwiOiBcIjNcIiwgeDE6IFwiMTAwJVwiLCB4MjogXCIwXCIsIHkxOiBcIjBcIiwgeTI6IFwiMTAwJVwiIH0pKSk7XG4gICAgfVxuICAgIGNvbnN0IGFscGhhID0gaW50ZXJuYWxDb2xvci5hbHBoYSgpO1xuICAgIGNvbnN0IGhleCA9IGhleGlmeShpbnRlcm5hbENvbG9yKTtcbiAgICBjb25zdCBoZXhhID0gaGV4aWZ5KGludGVybmFsQ29sb3IsIGFscGhhIDwgMSk7XG4gICAgcmV0dXJuIChoKEZyYWdtZW50LCBudWxsLCBoKFwidGl0bGVcIiwgbnVsbCwgaGV4YSksIGgoXCJkZWZzXCIsIG51bGwsIGgoXCJwYXR0ZXJuXCIsIHsgaGVpZ2h0OiBDSEVDS0VSX0RJTUVOU0lPTlMuc2l6ZSwgaWQ6IFwiY2hlY2tlclwiLCBwYXR0ZXJuVW5pdHM6IFwidXNlclNwYWNlT25Vc2VcIiwgd2lkdGg6IENIRUNLRVJfRElNRU5TSU9OUy5zaXplLCB4OiBcIjBcIiwgeTogXCIwXCIgfSwgaChcInJlY3RcIiwgeyBjbGFzczogQ1NTLmNoZWNrZXIsIGhlaWdodDogQ0hFQ0tFUl9ESU1FTlNJT05TLnNxdWFyZVNpemUsIHdpZHRoOiBDSEVDS0VSX0RJTUVOU0lPTlMuc3F1YXJlU2l6ZSwgeDogXCIwXCIsIHk6IFwiMFwiIH0pLCBoKFwicmVjdFwiLCB7IGNsYXNzOiBDU1MuY2hlY2tlciwgaGVpZ2h0OiBDSEVDS0VSX0RJTUVOU0lPTlMuc3F1YXJlU2l6ZSwgd2lkdGg6IENIRUNLRVJfRElNRU5TSU9OUy5zcXVhcmVTaXplLCB4OiBDSEVDS0VSX0RJTUVOU0lPTlMuc3F1YXJlU2l6ZSwgeTogQ0hFQ0tFUl9ESU1FTlNJT05TLnNxdWFyZVNpemUgfSkpKSwgaChcInJlY3RcIiwgeyBmaWxsOiBcInVybCgjY2hlY2tlcilcIiwgaGVpZ2h0OiBcIjEwMCVcIiwgcng6IGJvcmRlclJhZGl1cywgd2lkdGg6IFwiMTAwJVwiIH0pLCBoKFwicmVjdFwiLCB7IGZpbGw6IGhleCwgc3R5bGU6IHtcbiAgICAgICAgXCJjbGlwLXBhdGhcIjogYWxwaGEgPCAxID8gXCJwb2x5Z29uKDEwMCUgMCwgMCAwLCAwIDEwMCUpXCIgOiBgaW5zZXQoMCByb3VuZCAke2JvcmRlclJhZGl1c30pYCxcbiAgICAgIH0sIC4uLmNvbW1vblN3YXRjaFByb3BzIH0pLCBhbHBoYSA8IDEgPyAoaChcInJlY3RcIiwgeyBmaWxsOiBoZXhhLCBrZXk6IFwib3BhY2l0eS1maWxsXCIsIHN0eWxlOiB7IFwiY2xpcC1wYXRoXCI6IFwicG9seWdvbigxMDAlIDAsIDEwMCUgMTAwJSwgMCAxMDAlKVwiIH0sIC4uLmNvbW1vblN3YXRjaFByb3BzIH0pKSA6IG51bGwpKTtcbiAgfVxuICBnZXQgZWwoKSB7IHJldHVybiB0aGlzOyB9XG4gIHN0YXRpYyBnZXQgd2F0Y2hlcnMoKSB7IHJldHVybiB7XG4gICAgXCJjb2xvclwiOiBbXCJoYW5kbGVDb2xvckNoYW5nZVwiXVxuICB9OyB9XG4gIHN0YXRpYyBnZXQgc3R5bGUoKSB7IHJldHVybiBjb2xvclBpY2tlclN3YXRjaENzczsgfVxufSwgWzEsIFwiY2FsY2l0ZS1jb2xvci1waWNrZXItc3dhdGNoXCIsIHtcbiAgICBcImFjdGl2ZVwiOiBbNTE2XSxcbiAgICBcImNvbG9yXCI6IFsxXSxcbiAgICBcInNjYWxlXCI6IFs1MTNdXG4gIH1dKTtcbmZ1bmN0aW9uIGRlZmluZUN1c3RvbUVsZW1lbnQoKSB7XG4gIGlmICh0eXBlb2YgY3VzdG9tRWxlbWVudHMgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgY29tcG9uZW50cyA9IFtcImNhbGNpdGUtY29sb3ItcGlja2VyLXN3YXRjaFwiXTtcbiAgY29tcG9uZW50cy5mb3JFYWNoKHRhZ05hbWUgPT4geyBzd2l0Y2ggKHRhZ05hbWUpIHtcbiAgICBjYXNlIFwiY2FsY2l0ZS1jb2xvci1waWNrZXItc3dhdGNoXCI6XG4gICAgICBpZiAoIWN1c3RvbUVsZW1lbnRzLmdldCh0YWdOYW1lKSkge1xuICAgICAgICBjdXN0b21FbGVtZW50cy5kZWZpbmUodGFnTmFtZSwgQ29sb3JQaWNrZXJTd2F0Y2gpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gIH0gfSk7XG59XG5kZWZpbmVDdXN0b21FbGVtZW50KCk7XG5cbmV4cG9ydCB7IENvbG9yUGlja2VyU3dhdGNoIGFzIEMsIGRlZmluZUN1c3RvbUVsZW1lbnQgYXMgZCB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9