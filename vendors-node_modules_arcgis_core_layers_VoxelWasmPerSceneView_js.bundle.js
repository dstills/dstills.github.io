"use strict";
(self["webpackChunksynview"] = self["webpackChunksynview"] || []).push([["vendors-node_modules_arcgis_core_layers_VoxelWasmPerSceneView_js"],{

/***/ "./node_modules/@arcgis/core/layers/VoxelWasmPerSceneView.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/VoxelWasmPerSceneView.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ A)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _Graphic_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Graphic.js */ "./node_modules/@arcgis/core/Graphic.js");
/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../request.js */ "./node_modules/@arcgis/core/request.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../core/reactiveUtils.js */ "./node_modules/@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _chunks_vec3_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../chunks/vec3.js */ "./node_modules/@arcgis/core/chunks/vec3.js");
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../chunks/vec3f64.js */ "./node_modules/@arcgis/core/chunks/vec3f64.js");
/* harmony import */ var _geometry_support_coordinateSystem_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../geometry/support/coordinateSystem.js */ "./node_modules/@arcgis/core/geometry/support/coordinateSystem.js");
/* harmony import */ var _geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../geometry/support/frustum.js */ "./node_modules/@arcgis/core/geometry/support/frustum.js");
/* harmony import */ var _libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../libs/vxl/enums.js */ "./node_modules/@arcgis/core/libs/vxl/enums.js");
/* harmony import */ var _libs_vxl_VxlModule_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../libs/vxl/VxlModule.js */ "./node_modules/@arcgis/core/libs/vxl/VxlModule.js");
/* harmony import */ var _views_ViewingMode_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../views/ViewingMode.js */ "./node_modules/@arcgis/core/views/ViewingMode.js");
/* harmony import */ var _views_3d_layers_i3s_Intersector_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../views/3d/layers/i3s/Intersector.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/Intersector.js");
/* harmony import */ var _views_3d_state_Frustum_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../views/3d/state/Frustum.js */ "./node_modules/@arcgis/core/views/3d/state/Frustum.js");
/* harmony import */ var _views_3d_support_RenderCoordsHelper_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../views/3d/support/RenderCoordsHelper.js */ "./node_modules/@arcgis/core/views/3d/support/RenderCoordsHelper.js");
/* harmony import */ var _views_3d_webgl_engine_effects_RenderPlugin_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../views/3d/webgl-engine/effects/RenderPlugin.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/effects/RenderPlugin.js");
/* harmony import */ var _views_3d_webgl_engine_lib_Intersector_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../views/3d/webgl-engine/lib/Intersector.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Intersector.js");
/* harmony import */ var _views_3d_webgl_engine_lib_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../views/3d/webgl-engine/lib/IntersectorInterfaces.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/IntersectorInterfaces.js");
/* harmony import */ var _views_3d_webgl_engine_lib_RenderFeature_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../views/3d/webgl-engine/lib/RenderFeature.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderFeature.js");
/* harmony import */ var _views_3d_webgl_engine_lib_RenderSlot_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../views/3d/webgl-engine/lib/RenderSlot.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderSlot.js");
/* harmony import */ var _views_webgl_contextUtils_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../views/webgl/contextUtils.js */ "./node_modules/@arcgis/core/views/webgl/contextUtils.js");
/* harmony import */ var _views_webgl_enums_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../views/webgl/enums.js */ "./node_modules/@arcgis/core/views/webgl/enums.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const k=_core_Logger_js__WEBPACK_IMPORTED_MODULE_4__["default"].getLogger("esri.layers.VoxelWasmPerSceneView");var I;!function(e){e[e.Lifetime=1]="Lifetime",e[e.RequestResponse=2]="RequestResponse",e[e.Rendering=3]="Rendering",e[e.Error=4]="Error"}(I||(I={}));let B=class extends _views_3d_webgl_engine_effects_RenderPlugin_js__WEBPACK_IMPORTED_MODULE_21__.SyncRenderPlugin{constructor(e){super(e),this._halfIntTexturesAvailable=!1,this._textureFloatLinearAvailable=!1,this._havePreparedWithAllLayers=!1,this._renderPluginContext=null,this._vxlPromise=null,this._vxl=null,this._pluginIsActive=!1,this._moreToLoad=!1,this._viewportWidth=-1,this._viewportHeight=-1,this._newLayers=[],this._layers=new Map,this._rctx=null,this._renderTargetToRestore=null,this._lastFrameWasStationary=!1,this._wasmMemBlockSizes=[512,1024,2048,4096,8192,16384,32768,65536],this._wasmMemBlocks=new Map,this._dbgFlags=new Set,this._captureFrustum=!1,this._frustum=null,this._frustumRenderableId=-1,this._renderCoordsHelper=null,this.produces=new Map([[_views_3d_webgl_engine_lib_RenderSlot_js__WEBPACK_IMPORTED_MODULE_25__.RenderSlot.VOXEL,()=>!!this._vxl&&"local"===this.view.viewingMode]]),this.type=_views_3d_webgl_engine_lib_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_23__.IntersectorType.VOXEL,this.slicePlaneEnabled=!0,this.isGround=!1,this.layerUid=[]}_dbg(e,t){this._dbgFlags.has(e)&&(e===I.Error?k.error(t):k.warn(t))}_removeRenderPlugin(){this._pluginIsActive&&this.view._stage&&(this._dbg(I.Lifetime,"--removeRenderPlugin--"),this.view._stage.removeRenderPlugin(this)),this._pluginIsActive=!1}initialize(){this._dbg(I.Lifetime,"--initialize--");for(const e of this._wasmMemBlockSizes)this._wasmMemBlocks.set(e,0);this.addHandles([(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__.watch)((()=>this.view.ready),(e=>{e&&"local"===this.view.viewingMode?(this._dbg(I.Lifetime,"view ready status changed to ready on a local view, calling addRenderPlugin"),this.view._stage.addRenderPlugin(this),this._pluginIsActive=!0):(this._dbg(I.Lifetime,"view ready status changed, not ready or not a local view!"),this._removeRenderPlugin())}),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__.initial),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__.watch)((()=>this.view?.qualityProfile),(e=>{this._dbg(I.Rendering,"qualityProfile changed to "+e),this._vxl&&this._vxl.set_quality(this._toWasmQuality(e))}),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__.initial),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__.watch)((()=>this.view?.timeExtent),(()=>{if(this._vxl){const e=this._getTimeArgs(this.view?.timeExtent);this._dbg(I.Rendering,"sceneView timeExtent changed to useTime="+e.useTime+" st="+e.startTime+" et="+e.endTime),this._vxl.set_scene_time_extent(e.startTime,e.endTime,e.useTime),this._renderPluginContext.requestRender()}}),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__.initial),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__.watch)((()=>this.view?.stationary),(e=>{this._vxl&&e&&!this._lastFrameWasStationary&&this._renderPluginContext.requestRender()}))])}initializeRenderContext(e){this._dbg(I.Lifetime,"--initializeRenderContext--");const t=e.renderContext.rctx;t.type===_views_webgl_contextUtils_js__WEBPACK_IMPORTED_MODULE_26__.ContextType.WEBGL2?(this._renderPluginContext=e,this._rctx=e.renderContext.rctx,this._halfIntTexturesAvailable=!!this._rctx.capabilities.textureNorm16,this._textureFloatLinearAvailable=this._rctx.capabilities.textureFloatLinear,this._initializeWasm(t.gl)):this._dbg(I.Error,"WebGL 1 context only!")}uninitializeRenderContext(){this._renderPluginContext=null,this._rctx=null,this._dbg(I.Lifetime,"--uninitializeRenderContext--")}_restoreFramebuffer(){if(!this._renderTargetToRestore)return;const e=this._renderTargetToRestore.fbo;if(!!!this._rctx)return void this._dbg(I.Error,"no context in restoreFramebuffer!");this._rctx.bindFramebuffer(e,!0);const t=this._renderTargetToRestore.viewport;this._rctx.setViewport(t.x,t.y,t.width,t.height)}_bindPreviousDepthToSlot(e,t){const s=!!this._rctx,r=!!this._renderTargetToRestore;if(!s||!r)return 0;const i=this._renderTargetToRestore.fbo.depthStencilTexture;return i?(0===t?this._rctx.bindTexture(null,e,!0):this._rctx.bindTexture(i,e,!0),1):(this._dbg(I.Error,"no depth/stencil texture exists!"),0)}_modifyResourceCount(e,t,s){if(!this._rctx)return void this._dbg(I.Error,"modifyAllocation callback has no rendering context!");const r=e;1===s?this._rctx.instanceCounter.increment(r,t):this._rctx.instanceCounter.decrement(r,t)}_setBlendState(e,t,s,r){this._rctx?(this._rctx.setBlendingEnabled(1===e),this._rctx.setBlendFunction(t,s),this._rctx.setBlendEquation(r)):this._dbg(I.Error,"setBlendState callback has no rendering context!")}_setFrontFace(e){this._rctx?this._rctx.setFrontFace(e):this._dbg(I.Error,"setFrontFace callback has no rendering context!")}_setDepthStencilStateFunction(e,t,s){this._rctx?(this._rctx.setDepthFunction(s),this._rctx.setDepthTestEnabled(1===e),this._rctx.setDepthWriteEnabled(1===t),this._rctx.setStencilTestEnabled(!1),this._rctx.setStencilFunction(_views_webgl_enums_js__WEBPACK_IMPORTED_MODULE_27__.CompareFunction.ALWAYS,0,255),this._rctx.setStencilOpSeparate(_views_webgl_enums_js__WEBPACK_IMPORTED_MODULE_27__.Face.FRONT,_views_webgl_enums_js__WEBPACK_IMPORTED_MODULE_27__.StencilOperation.KEEP,_views_webgl_enums_js__WEBPACK_IMPORTED_MODULE_27__.StencilOperation.INCR,_views_webgl_enums_js__WEBPACK_IMPORTED_MODULE_27__.StencilOperation.KEEP),this._rctx.setStencilOpSeparate(_views_webgl_enums_js__WEBPACK_IMPORTED_MODULE_27__.Face.BACK,_views_webgl_enums_js__WEBPACK_IMPORTED_MODULE_27__.StencilOperation.KEEP,_views_webgl_enums_js__WEBPACK_IMPORTED_MODULE_27__.StencilOperation.DECR,_views_webgl_enums_js__WEBPACK_IMPORTED_MODULE_27__.StencilOperation.KEEP)):this._dbg(I.Error,"setDepthStencilStateFunction callback has no rendering context!")}_setRasterizerState(e){if(this._rctx)switch(e){case _libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_15__.WasmCullMode.None:this._rctx.setFaceCullingEnabled(!1);break;case _libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_15__.WasmCullMode.Back:this._rctx.setCullFace(_views_webgl_enums_js__WEBPACK_IMPORTED_MODULE_27__.Face.BACK),this._rctx.setFaceCullingEnabled(!0);break;case _libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_15__.WasmCullMode.Front:this._rctx.setCullFace(_views_webgl_enums_js__WEBPACK_IMPORTED_MODULE_27__.Face.FRONT),this._rctx.setFaceCullingEnabled(!0)}else this._dbg(I.Error,"setRasterizerState callback has no rendering context!")}_setViewport(e,t,s,r){this._rctx?this._rctx.setViewport(e,t,s,r):this._dbg(I.Error,"setViewport callback has no rendering context!")}_updateMemoryUsage(){this._layers.forEach(((e,t)=>{if(e.needMemoryUsageUpdate){const s=this._vxl.estimate_memory_usage(t);s>=0&&(e.needMemoryUsageUpdate=!1,e.layerView.setUsedMemory(s))}}))}_syncRequestsResponses(){this._layers.forEach(((e,t)=>{const r=[];e.responses.forEach(((s,i)=>{r.push(i),this._dbg(I.RequestResponse,"responding for requestID:"+i+" size:"+s.size),this._vxl.respond(t,i,s),s.requestType!==_libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_15__.VoxelRequestType.TreeIndex&&s.requestType!==_libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_15__.VoxelRequestType.Section||(e.needMemoryUsageUpdate=!0)}));const a=e.responses;for(const s of r)a.delete(s);const n=this._vxl.get_new_requests(t),o=e.abortController.signal;for(const l in n){e.outstandingRequestCount+=1,1===e.outstandingRequestCount&&e.layerView.updatingFlagChanged();const t=n[l],r={responseType:"array-buffer",signal:o};this._dbg(I.RequestResponse,"making requestID:"+l+" url:"+t.url),(0,_request_js__WEBPACK_IMPORTED_MODULE_2__["default"])(t.url,r).then((s=>{e.outstandingRequestCount-=1,0===e.outstandingRequestCount&&e.layerView.updatingFlagChanged(),this._dbg(I.RequestResponse,"have response for requestID:"+l);let r=0;if(s.data.byteLength>0){r=this._vxl._malloc(s.data.byteLength);const e=new Uint8Array(this._vxl.HEAPU8.buffer,r,s.data.byteLength),t=new Uint8Array(s.data);for(let r=0;r<s.data.byteLength;++r)e[r]=t[r]}a.set(+l,{responseType:t.responseType,ptr:r,size:s.data.byteLength,success:!0,requestType:t.requestType})})).catch((s=>{e.outstandingRequestCount-=1,0===e.outstandingRequestCount&&e.layerView.updatingFlagChanged(),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__.isAbortError)(s)||(this._dbg(I.Error,`requestID:${l} failed, error=${s.toString()}`),a.set(+l,{responseType:t.responseType,ptr:0,size:0,success:!1,requestType:t.requestType}))}))}}))}updateWasmCamera(e){this._vxl.set_projection_matrix.apply(this._vxl,e.projectionMatrix),this._vxl.set_view_matrix.apply(this._vxl,e.viewMatrix),this._vxl.set_near_far(e.near,e.far)}isUpdating(e){if(!this._vxl&&this._vxlPromise)return!0;const t=this._layers.get(e);return!!t&&t.outstandingRequestCount>0}getLayerTimes(e){const t=[];return this._layers.forEach(((s,r)=>{if(s.layerView.wasmLayerId===e.wasmLayerId){const s=this._vxl.get_layer_epoch_times(r,e.layer.currentVariableId);for(let e=0;e<s.length;++e)t.push(s[e])}})),t}getCurrentLayerTimeIndex(e){let t=0;return this._layers.forEach(((s,r)=>{s.layerView.wasmLayerId===e.wasmLayerId&&(t=this._vxl.get_layer_current_time_id(r))})),t}setEnabled(e,t){this._layers.forEach(((s,r)=>{s.layerView.wasmLayerId===e.wasmLayerId&&(this._vxl.set_enabled(r,t),s.needMemoryUsageUpdate=!0,this._renderPluginContext.requestRender())}))}setStaticSections(e,t){const s={mask:_libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_15__.UpdateFlags.StaticSections,staticSections:t};return this._doMaskedUIUpdate(e,s,!0)}setCurrentVariable(e,t){const s={mask:_libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_15__.UpdateFlags.CurrentVariable,currentVariable:t};return this._doMaskedUIUpdate(e,s,!0)}setRenderMode(e,t){const s={mask:_libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_15__.UpdateFlags.RenderMode,renderMode:t};return this._doMaskedUIUpdate(e,s,!0)}setVerticalExaggerationAndOffset(e,t,s,r){const i={mask:_libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_15__.UpdateFlags.ExaggerationAndOffset,volStyleDesc:{volumeId:t,verticalExaggeration:s,verticalOffset:r}};return this._doMaskedUIUpdate(e,i,!0)}setVariableStyles(e,t){const s={mask:_libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_15__.UpdateFlags.VariableStyles,variableStyles:t};return this._doMaskedUIUpdate(e,s,!0)}setVolumeStyles(e,t){const s={mask:_libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_15__.UpdateFlags.VolumeStyles,volumeStyles:t};return this._doMaskedUIUpdate(e,s,!0)}setEnableDynamicSections(e,t){const s={mask:_libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_15__.UpdateFlags.ContainerVisibility,containerIsVisible:t,container:_libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_15__.ContainerType.DynamicSections};return this._doMaskedUIUpdate(e,s,!0)}setEnableIsosurfaces(e,t){const s={mask:_libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_15__.UpdateFlags.ContainerVisibility,containerIsVisible:t,container:_libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_15__.ContainerType.Isosurfaces};return this._doMaskedUIUpdate(e,s,!0)}setEnableSections(e,t){const s={mask:_libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_15__.UpdateFlags.ContainerVisibility,containerIsVisible:t,container:_libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_15__.ContainerType.StaticSections};return this._doMaskedUIUpdate(e,s,!0)}setAnalysisSlice(e,t,s,r){const i={mask:_libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_15__.UpdateFlags.AnalysisSlice,analysisSlice:{point:s,normal:r,enabled:t}};return this._doMaskedUIUpdate(e,i,!0)}_doMaskedUIUpdate(e,t,s){if(!this._vxl)return!1;let r=!1;return this._layers.forEach(((s,i)=>{if(s.layerView.wasmLayerId===e.wasmLayerId){const e={str:JSON.stringify(t),byteCount:0,ptr:0,isReusable:!1};this._allocateBlock(e)&&(r=1===this._vxl.handle_masked_ui_update(i,e.ptr,e.byteCount),e.isReusable||this._vxl._free(e.ptr))}})),r&&s&&this._renderPluginContext.requestRender(),r}_addTriangleToWasmBuffer(e,t,s,r,i){return e[3*t]=s[0],e[3*t+1]=s[1],e[3*t+2]=s[2],e[3*(t+=1)]=r[0],e[3*t+1]=r[1],e[3*t+2]=r[2],e[3*(t+=1)]=i[0],e[3*t+1]=i[1],e[3*t+2]=i[2],t+=1}_addNormalToWasmBuffer(e,t,s){return e[3*t]=s[0],e[3*t+1]=s[1],e[3*t+2]=s[2],t+=1}_doCaptureFrustum(){if(!this._vxl)return;const e=36,t=e/3,s=this._vxl._malloc(3*e*Float32Array.BYTES_PER_ELEMENT),r=new Float32Array(this._vxl.HEAPF32.buffer,s,3*e),i=this._vxl._malloc(3*t*Float32Array.BYTES_PER_ELEMENT),a=new Float32Array(this._vxl.HEAPF32.buffer,i,e),n=this._frustum.points[_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_14__.PointIndex.NEAR_BOTTOM_LEFT],o=this._frustum.points[_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_14__.PointIndex.NEAR_BOTTOM_RIGHT],l=this._frustum.points[_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_14__.PointIndex.NEAR_TOP_RIGHT],h=this._frustum.points[_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_14__.PointIndex.NEAR_TOP_LEFT],d=this._frustum.points[_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_14__.PointIndex.FAR_BOTTOM_LEFT],u=this._frustum.points[_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_14__.PointIndex.FAR_BOTTOM_RIGHT],m=this._frustum.points[_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_14__.PointIndex.FAR_TOP_RIGHT],p=this._frustum.points[_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_14__.PointIndex.FAR_TOP_LEFT];let g=0,f=0;const x=this._frustum.planes[_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_14__.PlaneIndex.NEAR];g=this._addTriangleToWasmBuffer(r,g,l,o,n),f=this._addNormalToWasmBuffer(a,f,x),g=this._addTriangleToWasmBuffer(r,g,n,h,l),f=this._addNormalToWasmBuffer(a,f,x);const y=this._frustum.planes[_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_14__.PlaneIndex.FAR];g=this._addTriangleToWasmBuffer(r,g,d,u,m),f=this._addNormalToWasmBuffer(a,f,y),g=this._addTriangleToWasmBuffer(r,g,m,p,d),f=this._addNormalToWasmBuffer(a,f,y);const v=this._frustum.planes[_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_14__.PlaneIndex.TOP];g=this._addTriangleToWasmBuffer(r,g,m,l,h),f=this._addNormalToWasmBuffer(a,f,v),g=this._addTriangleToWasmBuffer(r,g,h,p,m),f=this._addNormalToWasmBuffer(a,f,v);const b=this._frustum.planes[_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_14__.PlaneIndex.BOTTOM];g=this._addTriangleToWasmBuffer(r,g,n,o,u),f=this._addNormalToWasmBuffer(a,f,b),g=this._addTriangleToWasmBuffer(r,g,u,d,n),f=this._addNormalToWasmBuffer(a,f,b);const w=this._frustum.planes[_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_14__.PlaneIndex.LEFT];g=this._addTriangleToWasmBuffer(r,g,h,n,d),f=this._addNormalToWasmBuffer(a,f,w),g=this._addTriangleToWasmBuffer(r,g,d,p,h),f=this._addNormalToWasmBuffer(a,f,w);const T=this._frustum.planes[_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_14__.PlaneIndex.RIGHT];g=this._addTriangleToWasmBuffer(r,g,l,m,u),f=this._addNormalToWasmBuffer(a,f,T),g=this._addTriangleToWasmBuffer(r,g,u,o,l),f=this._addNormalToWasmBuffer(a,f,T),-1!==this._frustumRenderableId&&this._vxl.remove_generic_mesh(this._frustumRenderableId),this._frustumRenderableId=this._vxl.add_generic_mesh(s,3*e,i,e,255,0,0,64),this._vxl._free(s),this._vxl._free(i),this._captureFrustum=!1,this._renderPluginContext.requestRender()}captureFrustum(){null===this._renderCoordsHelper&&(this._renderCoordsHelper=_views_3d_support_RenderCoordsHelper_js__WEBPACK_IMPORTED_MODULE_20__.RenderCoordsHelper.create(_views_ViewingMode_js__WEBPACK_IMPORTED_MODULE_17__.ViewingMode.Local,(0,_geometry_support_coordinateSystem_js__WEBPACK_IMPORTED_MODULE_13__.renderSRFromViewSR)(!1,this.view.spatialReference))),null===this._frustum&&(this._frustum=new _views_3d_state_Frustum_js__WEBPACK_IMPORTED_MODULE_19__.Frustum(this._renderCoordsHelper)),this._captureFrustum=!0,null!==this._renderPluginContext&&this._renderPluginContext.requestRender()}toggleFullVolumeExtentDraw(e){this._vxl&&this._layers.forEach(((t,s)=>{t.layerView.wasmLayerId===e.wasmLayerId&&(this._vxl.toggle_full_volume_extent_draw(s),this._renderPluginContext.requestRender())}))}addVoxelLayer(e){if(!this._vxl){const t={layerView:e,resolveCallback:null,rejectCallback:null},s=new Promise(((e,s)=>{t.resolveCallback=e,t.rejectCallback=s}));return this._newLayers.push(t),s}const t=this._addVoxelLayer(e);return t<0?Promise.reject(-1):Promise.resolve(t)}removeVoxelLayer(e){if(!this._vxl){const t=this._newLayers.findIndex((t=>e.uid===t.layerView.uid));t>=0&&(this._newLayers[t].resolveCallback(-1),this._newLayers.splice(t,1));const s=this._newLayers.length;return 0===s&&(this._dbg(I.Lifetime," no voxel layers left after removing a layer, removing RenderPlugin and destroying"),this.destroy()),s}let t=-1;this._layers.forEach(((s,r)=>{if(s.layerView.wasmLayerId===e.wasmLayerId){t=r,s.abortController.abort(),this._vxl.remove_layer(t);const i=this.layerUid.indexOf(e.layer.uid);-1!==i&&this.layerUid.splice(i,1)}})),t>=0&&this._layers.delete(t);const s=this._layers.size;return 0===s&&(this._dbg(I.Lifetime," no voxel layers left after removing a layer, removing RenderPlugin and destroying"),this.destroy()),s}_getBlockSize(e){for(const t of this._wasmMemBlockSizes)if(e<t)return t;return-1}_allocateBlock(e){e.byteCount=this._vxl.lengthBytesUTF8(e.str)+1;const t=this._getBlockSize(e.byteCount);return t<0?(e.isReusable=!1,e.ptr=this._vxl._malloc(e.byteCount)):(e.isReusable=!0,e.ptr=this._wasmMemBlocks.get(t),0===e.ptr&&(e.ptr=this._vxl._malloc(t),this._wasmMemBlocks.set(t,e.ptr))),0!==e.ptr&&(this._vxl.stringToUTF8(e.str,e.ptr,e.byteCount),!0)}_getTimeArgs(e){let t=-Number.MAX_VALUE,s=Number.MAX_VALUE,r=!1;return null!=e&&(e.isAllTime?r=!0:(null!=e.start&&(r=!0,t=e.start.getTime()/1e3),null!=e.end&&(r=!0,s=e.end.getTime()/1e3))),{startTime:t,endTime:s,useTime:r}}_addVoxelLayer(e){const t=e.layer;let s=-1;const r=t.getConfiguration();if(r.length<1)return-1;const i={str:r,byteCount:0,ptr:0,isReusable:!1};if(!this._allocateBlock(i))return-1;const a=this._getTimeArgs(this.view?.timeExtent),n=this.view.spatialReference.isWGS84&&t.spatialReference.isWGS84?111319.49079327357:1;if(s=this._vxl.add_layer(t.serviceRoot,i.ptr,i.byteCount,n,n,a.startTime,a.endTime,a.useTime,this._toWasmQuality(this.view.qualityProfile)),i.isReusable||this._vxl._free(i.ptr),s>=0){t.test?.constantUpscaling&&(this._setUpscalingLimits(0,.25,.25),this._setUpscalingLimits(1,.5,.5),this._setUpscalingLimits(2,.75,.75));const r=new AbortController;if(this._layers.set(s,{layerView:e,responses:new Map,outstandingRequestCount:0,abortController:r,needMemoryUsageUpdate:!1}),this.layerUid.push(e.layer.uid),!this._halfIntTexturesAvailable||(0,_core_has_js__WEBPACK_IMPORTED_MODULE_3__["default"])("mac")){const t=[];let s="";for(const r of e.layer.variables)"Int16"!==r.renderingFormat.type&&"UInt16"!==r.renderingFormat.type||(t.push(r.name),r.id===e.layer.currentVariableId&&(s=r.name));""!==s&&k.error("#addVoxelLayer_error()",e.layer,`The voxel layer '${e.layer.title}' cannot render the current variable '${s}' in this browser`),t.length>0&&k.warn("#addVoxelLayer_warning()",e.layer,`The voxel layer '${e.layer.title}' cannot render the variables '${t.toString()}' in this browser`)}if(!this._textureFloatLinearAvailable){const t=[];let s="";for(const r of e.layer.variables)"Float32"===r.renderingFormat.type&&(t.push(r.name),r.id===e.layer.currentVariableId&&(s=r.name));""!==s&&k.error("#addVoxelLayer_error()",e.layer,`The voxel layer '${e.layer.title}' cannot render the current variable '${s}' in this browser`),t.length>0&&k.warn("#addVoxelLayer_warning()",e.layer,`The voxel layer '${e.layer.title}' cannot render the variables '${t.toString()}' in this browser`)}return (0,_core_has_js__WEBPACK_IMPORTED_MODULE_3__["default"])("esri-mobile")&&k.warnOnce("Mobile support differs across devices. Voxel layer might not display as expected."),s}return-1}prepareRender(e){if(!this._vxl)return;const t=e.bindParameters.camera.viewForward,s=e.bindParameters.camera.eye;this._vxl.update_camera_pos_and_direction(s[0],s[1],s[2],t[0],t[1],t[2]);const r=this._vxl.cull();this._dbg(I.RequestResponse,"missingResourceCount="+r),this._moreToLoad=r>0,this._havePreparedWithAllLayers=0===this._newLayers.length,this._updateMemoryUsage()}renderNode(e){if(!this._vxl)return;for(const s of this._newLayers){const e=this._addVoxelLayer(s.layerView);-1===e?s.rejectCallback(-1):s.resolveCallback(e)}if(this._newLayers=[],0===this._layers.size)return void this._dbg(I.Error,"No voxel layers but RenderPlugin instance is being asked to render!");this._lastFrameWasStationary=this.view.stationary,this._syncRequestsResponses(),this._beforeDraw(),this._vxl.begin_color_frame(!this.view._stage.renderer.isFeatureEnabled(_views_3d_webgl_engine_lib_RenderFeature_js__WEBPACK_IMPORTED_MODULE_24__.RenderFeature.HighResolutionVoxel),e.bindParameters.lighting.mainLight.direction[0],e.bindParameters.lighting.mainLight.direction[1],e.bindParameters.lighting.mainLight.direction[2]);const t=this._renderTargetToRestore.viewport;t.width===this._viewportWidth&&t.height===this._viewportHeight||(this._viewportWidth=t.width,this._viewportHeight=t.height,this._vxl.set_viewport(t.width,t.height),this._layers.forEach((e=>{e.needMemoryUsageUpdate=!0}))),0===t.x&&0===t.y||this._dbg(I.Error,"Unsupported viewport parameters detected!"),this.updateWasmCamera(e.bindParameters.camera),this._captureFrustum&&(this._frustum.update(e.bindParameters.camera),this._doCaptureFrustum()),this._vxl.draw(),this._afterDraw(),(this._moreToLoad||!this._havePreparedWithAllLayers&&this._layers.size>0)&&this._renderPluginContext.requestRender()}destroy(){this._dbg(I.Lifetime,"--destroy--"),this._removeRenderPlugin(),this._vxl&&(this._layers.forEach((e=>{e.abortController.abort()})),this._wasmMemBlocks.forEach((e=>{0!==e&&this._vxl._free(e)})),this._vxl.uninitialize_voxel_wasm(),this._vxl=null)}_initializeWasm(e){return this._vxl?Promise.resolve():(this._vxlPromise||(this._vxlPromise=(0,_libs_vxl_VxlModule_js__WEBPACK_IMPORTED_MODULE_16__.loadVoxelWASM)(e).then((e=>{if(this._vxl=e,this._vxlPromise=null,this._newLayers.length<=0)return this._dbg(I.Lifetime," no voxel layers left after WASM downloaded, removing RenderPlugin and destroying"),void this.destroy();const t=this._getTimeArgs(this.view?.timeExtent),s=this._vxl.addFunction(this._restoreFramebuffer.bind(this),"v"),r=this._vxl.addFunction(this._setBlendState.bind(this),"viiii"),i=this._vxl.addFunction(this._setFrontFace.bind(this),"vi"),a=this._vxl.addFunction(this._setRasterizerState.bind(this),"vi"),n=this._vxl.addFunction(this._setDepthStencilStateFunction.bind(this),"viii"),o=this._vxl.addFunction(this._setViewport.bind(this),"viiii"),l=this._vxl.addFunction(this._bindPreviousDepthToSlot.bind(this),"iii"),h=this._vxl.addFunction(this._modifyResourceCount.bind(this),"viii"),d=this._halfIntTexturesAvailable&&!(0,_core_has_js__WEBPACK_IMPORTED_MODULE_3__["default"])("mac"),u=this._textureFloatLinearAvailable;this._vxl.initialize_voxel_wasm(s,r,i,a,n,o,l,h,t.startTime,t.endTime,t.useTime,d,u),this._renderPluginContext&&this._renderPluginContext.requestRender()})).catch((()=>{for(const e of this._newLayers)e.rejectCallback(-2);this._dbg(I.Error," WASM failed to download, removing RenderPlugin and destroying"),this.destroy()}))),this._vxlPromise)}pickDepth(e,t,s){if(!this._vxl||!this._rctx||0===this._layers.size)return null;const r=s.viewport[3]-t;if(e<0||e>s.viewport[2]||t<0||t>s.viewport[3])return this._dbg(I.Error,`[js] pickDepth: outOfRange, screenXY=[${e.toFixed(0)}, ${r.toFixed(0)}]]`),null;this._beforeDraw();const i=s.viewForward,a=s.eye;this._vxl.update_camera_pos_and_direction(a[0],a[1],a[2],i[0],i[1],i[2]),this.updateWasmCamera(s),this._vxl.begin_frame();const n=this._vxl.pick_depth(e,r);if(this._afterDraw(),n.success){return n.distanceToCamera}return null}pickObject(e,t,s,r){if(!this._vxl||!this._rctx||0===this._layers.size)return null;const i=Math.round(e),a=Math.round(t);if(i<0||i>s.viewport[2]||a<0||a>s.viewport[3])return this._dbg(I.Error,`[js] pickObject: outOfRange, screenXY=[${i}, ${a}], vp=[${s.viewport.toString()}]`),null;this._beforeDraw();const n=s.viewForward,o=s.eye;this._vxl.update_camera_pos_and_direction(o[0],o[1],o[2],n[0],n[1],n[2]),this.updateWasmCamera(s),this._vxl.begin_frame();let l=null;if(0===r.length)l=this._vxl.pick_object(i,a,0,0);else{const e={str:JSON.stringify({layerIds:r}),byteCount:0,ptr:0,isReusable:!1};this._allocateBlock(e)&&(l=this._vxl.pick_object(i,a,e.ptr,e.byteCount),e.isReusable||this._vxl._free(e.ptr))}return this._afterDraw(),l}_beforeDraw(){this._renderTargetToRestore={fbo:this._rctx.getBoundFramebufferObject(),viewport:this._rctx.getViewport()},this._rctx.setPolygonOffsetFillEnabled(!1),this._rctx.setScissorTestEnabled(!1),this._rctx.setColorMask(!0,!0,!0,!0)}_afterDraw(){this._renderTargetToRestore.fbo=null,this._rctx.externalTextureUnitUpdate(this._vxl.get_texture_units_bound_in_frame(),this._vxl.get_active_texture_unit()),this._rctx.externalVertexArrayObjectUpdate(),this._rctx.externalVertexBufferUpdate(),this._rctx.externalProgramUpdate()}intersect(e,t,s,r,i){if(!this._vxl||!this._rctx||0===this._layers.size||!e.options.selectionMode||e.options.isFiltered)return;if(i[0]<0||i[0]>e.camera.viewport[2]||i[1]<0||i[1]>e.camera.viewport[3])return this._dbg(I.Error,`[js] VoxelWasmPerScene.intersect: outOfRange, screenXY=[${i[0].toFixed(0)}, ${i[1].toFixed(0)}]`),null;const a=[];this._layers.forEach((t=>{e.options.filteredLayerUids.includes(t.layerView.layer.uid)&&a.push(t.layerView.wasmLayerId)}));const n=this.pickObject(i[0],i[1],e.camera,a);if(null==n||-1===n.layerId)return;const o=this._layers.get(n.layerId);if(o){const t=o.layerView.layer.uid,i=n.distanceToCamera/(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_11__.o)(s,r),a=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_12__.c)();a[0]=n.worldX,a[1]=n.worldY,a[2]=n.worldZ;const l={};if(null!=n.continuousValue&&null!=n.continuousValueUnits?l["Voxel.ServiceValue"]=`${n.continuousValue.toLocaleString()} ${n.continuousValueUnits}`:null!=n.uniqueValueLabel&&null!=n.uniqueValue?l["Voxel.ServiceValue"]=`${n.uniqueValueLabel} (${n.uniqueValue})`:null!=n.uniqueValue&&(l["Voxel.ServiceValue"]=`${n.uniqueValue}`),l["Voxel.ServiceVariableLabel"]=n.variableLabel,l["Voxel.Position"]=n.voxelSpacePosition,null!=n.epochTime&&null!=n.nativeTime&&null!=n.nativeTimeUnits){const e=new Date(n.epochTime);l["Voxel.ServiceLocalTime"]=e.toString(),l["Voxel.ServiceNativeTime"]=`${n.nativeTime.toLocaleString()} ${n.nativeTimeUnits}`}null!=n.depth&&null!=n.depthUnits&&(l["Voxel.ServiceDepth"]=`${n.depth.toLocaleString()} ${n.depthUnits}`);const u=n.faceNormal;l["Voxel.WorldPosition"]=`[${a[0]}, ${a[1]}, ${a[2]}]`;const _=e=>{const s=new _views_3d_layers_i3s_Intersector_js__WEBPACK_IMPORTED_MODULE_18__.VoxelTarget(a,t,(()=>this._createVoxelGraphic(o.layerView.layer,l)));e.set(this.type,s,i,u)},c=e.results,m=e.options.store===_views_3d_webgl_engine_lib_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_23__.StoreResults.ALL;if((null==c.min.dist||i<c.min.dist)&&_(c.min),(null==c.max.dist||i>c.max.dist)&&_(c.max),m){const t=(0,_views_3d_webgl_engine_lib_Intersector_js__WEBPACK_IMPORTED_MODULE_22__.newIntersectorResult)(e.ray);_(t),e.results.all.push(t)}}}_createVoxelGraphic(e,s){return new _Graphic_js__WEBPACK_IMPORTED_MODULE_1__["default"]({layer:e,sourceLayer:e,attributes:s})}_toWasmQuality(e){switch(e){case"low":return 0;case"medium":return 1;case"high":return 2}}_setUpscalingLimits(e,t,s){this._vxl&&this._vxl.set_upscaling_limits(e,t,s)}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)({constructOnly:!0})],B.prototype,"view",void 0),B=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_10__.subclass)("esri.layers.VoxelWasmPerSceneView")],B);const A=B;


/***/ }),

/***/ "./node_modules/@arcgis/core/libs/vxl/VxlModule.js":
/*!*********************************************************!*\
  !*** ./node_modules/@arcgis/core/libs/vxl/VxlModule.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   loadVoxelWASM: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _assets_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../assets.js */ "./node_modules/@arcgis/core/assets.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function e(t){return new Promise((e=>__webpack_require__.e(/*! import() */ "vendors-node_modules_arcgis_core_chunks_vxlLayer_js").then(__webpack_require__.bind(__webpack_require__, /*! ../../chunks/vxlLayer.js */ "./node_modules/@arcgis/core/chunks/vxlLayer.js")).then((t=>t.v)).then((({default:n})=>{const r=n({locateFile:i,preinitializedWebGLContext:t,onRuntimeInitialized:()=>e(r)})})))).catch((t=>{throw t}))}function i(e){return (0,_assets_js__WEBPACK_IMPORTED_MODULE_0__.getAssetUrl)(`esri/libs/vxl/${e}`)}


/***/ }),

/***/ "./node_modules/@arcgis/core/libs/vxl/enums.js":
/*!*****************************************************!*\
  !*** ./node_modules/@arcgis/core/libs/vxl/enums.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ContainerType: () => (/* binding */ o),
/* harmony export */   UpdateFlags: () => (/* binding */ a),
/* harmony export */   VoxelRequestType: () => (/* binding */ i),
/* harmony export */   WasmCullMode: () => (/* binding */ t),
/* harmony export */   WasmRenderingQuality: () => (/* binding */ n),
/* harmony export */   WasmResponseType: () => (/* binding */ e)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var e,i,t,n,a,o;!function(e){e[e.Binary=0]="Binary",e[e.JSON=1]="JSON"}(e||(e={})),function(e){e[e.TreeIndex=0]="TreeIndex",e[e.TreeStats=1]="TreeStats",e[e.TreeData=2]="TreeData",e[e.BrickBundles=3]="BrickBundles",e[e.Section=4]="Section",e[e.VariableStats=5]="VariableStats"}(i||(i={})),function(e){e[e.None=1]="None",e[e.Front=2]="Front",e[e.Back=3]="Back"}(t||(t={})),function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"}(n||(n={})),function(e){e[e.None=0]="None",e[e.StaticSections=1]="StaticSections",e[e.Slices=2]="Slices",e[e.DynamicSections=4]="DynamicSections",e[e.GhostShell=8]="GhostShell",e[e.Isosurface=16]="Isosurface",e[e.Quality=32]="Quality",e[e.SunLocation=64]="SunLocation",e[e.StaticSectionSelection=128]="StaticSectionSelection",e[e.ExaggerationAndOffset=256]="ExaggerationAndOffset",e[e.CurrentTime=512]="CurrentTime",e[e.CurrentVariable=1024]="CurrentVariable",e[e.DeleteIsosurface=2048]="DeleteIsosurface",e[e.ContainerVisibility=4096]="ContainerVisibility",e[e.RenderMode=8192]="RenderMode",e[e.Optimization=16384]="Optimization",e[e.VariableStyles=32768]="VariableStyles",e[e.VolumeStyles=65536]="VolumeStyles",e[e.AnalysisSlice=131072]="AnalysisSlice"}(a||(a={})),function(e){e[e.Isosurfaces=0]="Isosurfaces",e[e.DynamicSections=1]="DynamicSections",e[e.StaticSections=2]="StaticSections"}(o||(o={}));


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfYXJjZ2lzX2NvcmVfbGF5ZXJzX1ZveGVsV2FzbVBlclNjZW5lVmlld19qcy5idW5kbGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUN3c0QsUUFBUSx1REFBQyxnREFBZ0QsTUFBTSxhQUFhLHNIQUFzSCxTQUFTLEdBQUcsb0JBQW9CLDZGQUFDLENBQUMsZUFBZSxnb0JBQWdvQixpRkFBQyxxRUFBcUUsaUdBQUMsbUVBQW1FLFVBQVUsMERBQTBELHNCQUFzQiwySkFBMkosYUFBYSx1Q0FBdUMsb0VBQW9FLGlCQUFpQiw2REFBQyw0QkFBNEIsdVRBQXVULEVBQUUsMkRBQUMsRUFBRSw2REFBQyxzQ0FBc0MsK0dBQStHLEVBQUUsMkRBQUMsRUFBRSw2REFBQyxtQ0FBbUMsY0FBYyxpREFBaUQsNE5BQTROLEVBQUUsMkRBQUMsRUFBRSw2REFBQyxrQ0FBa0MsdUZBQXVGLEtBQUssMkJBQTJCLG9EQUFvRCw2QkFBNkIsU0FBUyxzRUFBQyxnU0FBZ1MsNEJBQTRCLHFHQUFxRyxzQkFBc0IsdUNBQXVDLHdDQUF3QyxvRkFBb0YsaUNBQWlDLDZDQUE2QyxpREFBaUQsOEJBQThCLHFEQUFxRCxtQkFBbUIsNERBQTRELDhJQUE4SSw0QkFBNEIsb0dBQW9HLFVBQVUsMEZBQTBGLHdCQUF3Qix3TEFBd0wsaUJBQWlCLDJHQUEyRyxxQ0FBcUMsMkxBQTJMLG1FQUFDLCtDQUErQyx3REFBQyxPQUFPLG9FQUFDLE1BQU0sb0VBQUMsTUFBTSxvRUFBQyx1Q0FBdUMsd0RBQUMsTUFBTSxvRUFBQyxNQUFNLG9FQUFDLE1BQU0sb0VBQUMsNkZBQTZGLHVCQUF1Qix3QkFBd0IsS0FBSyw2REFBQywyQ0FBMkMsTUFBTSxLQUFLLDZEQUFDLDZCQUE2Qix3REFBQyw0Q0FBNEMsTUFBTSxLQUFLLDZEQUFDLDhCQUE4Qix3REFBQyw2Q0FBNkMsZ0ZBQWdGLHNC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SUFBSSxLQUFLLEdBQUcsWUFBWSxZQUFZLDZFQUFDLDBEQUEwRCx1QkFBdUIsaUNBQWlDLDhGQUFDLEtBQUssNEZBQTRGLFFBQVEsZ0dBQUMsUUFBUSw2QkFBNkIseUJBQXlCLFdBQVcsbURBQUMsRUFBRSxtQ0FBbUMsRUFBRSxrQkFBa0IsVUFBVSxtQkFBbUIsc0JBQXNCLHFCQUFxQiwyQkFBMkIsbURBQW1ELHVEQUFDLEVBQUUsc0ZBQUMsRUFBRSxpQkFBaUIsZ0NBQWdDLHVEQUFDLEVBQUUsdUZBQUMsMENBQTBDLFVBQStCOzs7Ozs7Ozs7Ozs7Ozs7O0FDSnQvdkI7QUFDQTtBQUNBO0FBQ0E7QUFDOEMsY0FBYyx1QkFBdUIsa09BQWtDLHdCQUF3QixVQUFVLElBQUksV0FBVyx3RUFBd0UsRUFBRSxnQkFBZ0IsUUFBUSxHQUFHLGNBQWMsT0FBTyx1REFBQyxrQkFBa0IsRUFBRSxHQUE4Qjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKblY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsYUFBYSwwQ0FBMEMsU0FBUyxlQUFlLHNMQUFzTCxTQUFTLGVBQWUsMkRBQTJELFNBQVMsZUFBZSwyREFBMkQsU0FBUyxlQUFlLDJ0QkFBMnRCLFNBQVMsZUFBZSxpSEFBaUgsU0FBUyxHQUF1SSIsInNvdXJjZXMiOlsid2VicGFjazovL3N5bnZpZXcvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL2xheWVycy9Wb3hlbFdhc21QZXJTY2VuZVZpZXcuanMiLCJ3ZWJwYWNrOi8vc3ludmlldy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvbGlicy92eGwvVnhsTW9kdWxlLmpzIiwid2VicGFjazovL3N5bnZpZXcvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL2xpYnMvdnhsL2VudW1zLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7XyBhcyBlfWZyb21cIi4uL2NodW5rcy90c2xpYi5lczYuanNcIjtpbXBvcnQgdCBmcm9tXCIuLi9HcmFwaGljLmpzXCI7aW1wb3J0IHMgZnJvbVwiLi4vcmVxdWVzdC5qc1wiO2ltcG9ydCBoYXMgZnJvbVwiLi4vY29yZS9oYXMuanNcIjtpbXBvcnQgciBmcm9tXCIuLi9jb3JlL0xvZ2dlci5qc1wiO2ltcG9ydHtpc0Fib3J0RXJyb3IgYXMgaX1mcm9tXCIuLi9jb3JlL3Byb21pc2VVdGlscy5qc1wiO2ltcG9ydHt3YXRjaCBhcyBhLGluaXRpYWwgYXMgbn1mcm9tXCIuLi9jb3JlL3JlYWN0aXZlVXRpbHMuanNcIjtpbXBvcnR7cHJvcGVydHkgYXMgb31mcm9tXCIuLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3Byb3BlcnR5LmpzXCI7aW1wb3J0XCIuLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9lbnN1cmVUeXBlLmpzXCI7aW1wb3J0XCIuLi9jb3JlL2FycmF5VXRpbHMuanNcIjtpbXBvcnR7c3ViY2xhc3MgYXMgbH1mcm9tXCIuLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3N1YmNsYXNzLmpzXCI7aW1wb3J0e28gYXMgaH1mcm9tXCIuLi9jaHVua3MvdmVjMy5qc1wiO2ltcG9ydHtjIGFzIGR9ZnJvbVwiLi4vY2h1bmtzL3ZlYzNmNjQuanNcIjtpbXBvcnR7cmVuZGVyU1JGcm9tVmlld1NSIGFzIHV9ZnJvbVwiLi4vZ2VvbWV0cnkvc3VwcG9ydC9jb29yZGluYXRlU3lzdGVtLmpzXCI7aW1wb3J0e1BvaW50SW5kZXggYXMgXyxQbGFuZUluZGV4IGFzIGN9ZnJvbVwiLi4vZ2VvbWV0cnkvc3VwcG9ydC9mcnVzdHVtLmpzXCI7aW1wb3J0e1dhc21DdWxsTW9kZSBhcyBtLFZveGVsUmVxdWVzdFR5cGUgYXMgcCxVcGRhdGVGbGFncyBhcyBnLENvbnRhaW5lclR5cGUgYXMgZn1mcm9tXCIuLi9saWJzL3Z4bC9lbnVtcy5qc1wiO2ltcG9ydHtsb2FkVm94ZWxXQVNNIGFzIHh9ZnJvbVwiLi4vbGlicy92eGwvVnhsTW9kdWxlLmpzXCI7aW1wb3J0e1ZpZXdpbmdNb2RlIGFzIHl9ZnJvbVwiLi4vdmlld3MvVmlld2luZ01vZGUuanNcIjtpbXBvcnR7Vm94ZWxUYXJnZXQgYXMgdn1mcm9tXCIuLi92aWV3cy8zZC9sYXllcnMvaTNzL0ludGVyc2VjdG9yLmpzXCI7aW1wb3J0e0ZydXN0dW0gYXMgYn1mcm9tXCIuLi92aWV3cy8zZC9zdGF0ZS9GcnVzdHVtLmpzXCI7aW1wb3J0e1JlbmRlckNvb3Jkc0hlbHBlciBhcyB3fWZyb21cIi4uL3ZpZXdzLzNkL3N1cHBvcnQvUmVuZGVyQ29vcmRzSGVscGVyLmpzXCI7aW1wb3J0e1N5bmNSZW5kZXJQbHVnaW4gYXMgVH1mcm9tXCIuLi92aWV3cy8zZC93ZWJnbC1lbmdpbmUvZWZmZWN0cy9SZW5kZXJQbHVnaW4uanNcIjtpbXBvcnR7bmV3SW50ZXJzZWN0b3JSZXN1bHQgYXMgUn1mcm9tXCIuLi92aWV3cy8zZC93ZWJnbC1lbmdpbmUvbGliL0ludGVyc2VjdG9yLmpzXCI7aW1wb3J0e0ludGVyc2VjdG9yVHlwZSBhcyBMLFN0b3JlUmVzdWx0cyBhcyBFfWZyb21cIi4uL3ZpZXdzLzNkL3dlYmdsLWVuZ2luZS9saWIvSW50ZXJzZWN0b3JJbnRlcmZhY2VzLmpzXCI7aW1wb3J0e1JlbmRlckZlYXR1cmUgYXMgVn1mcm9tXCIuLi92aWV3cy8zZC93ZWJnbC1lbmdpbmUvbGliL1JlbmRlckZlYXR1cmUuanNcIjtpbXBvcnR7UmVuZGVyU2xvdCBhcyBGfWZyb21cIi4uL3ZpZXdzLzNkL3dlYmdsLWVuZ2luZS9saWIvUmVuZGVyU2xvdC5qc1wiO2ltcG9ydHtDb250ZXh0VHlwZSBhcyBDfWZyb21cIi4uL3ZpZXdzL3dlYmdsL2NvbnRleHRVdGlscy5qc1wiO2ltcG9ydHtDb21wYXJlRnVuY3Rpb24gYXMgUyxGYWNlIGFzIFAsU3RlbmNpbE9wZXJhdGlvbiBhcyBVfWZyb21cIi4uL3ZpZXdzL3dlYmdsL2VudW1zLmpzXCI7Y29uc3Qgaz1yLmdldExvZ2dlcihcImVzcmkubGF5ZXJzLlZveGVsV2FzbVBlclNjZW5lVmlld1wiKTt2YXIgSTshZnVuY3Rpb24oZSl7ZVtlLkxpZmV0aW1lPTFdPVwiTGlmZXRpbWVcIixlW2UuUmVxdWVzdFJlc3BvbnNlPTJdPVwiUmVxdWVzdFJlc3BvbnNlXCIsZVtlLlJlbmRlcmluZz0zXT1cIlJlbmRlcmluZ1wiLGVbZS5FcnJvcj00XT1cIkVycm9yXCJ9KEl8fChJPXt9KSk7bGV0IEI9Y2xhc3MgZXh0ZW5kcyBUe2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMuX2hhbGZJbnRUZXh0dXJlc0F2YWlsYWJsZT0hMSx0aGlzLl90ZXh0dXJlRmxvYXRMaW5lYXJBdmFpbGFibGU9ITEsdGhpcy5faGF2ZVByZXBhcmVkV2l0aEFsbExheWVycz0hMSx0aGlzLl9yZW5kZXJQbHVnaW5Db250ZXh0PW51bGwsdGhpcy5fdnhsUHJvbWlzZT1udWxsLHRoaXMuX3Z4bD1udWxsLHRoaXMuX3BsdWdpbklzQWN0aXZlPSExLHRoaXMuX21vcmVUb0xvYWQ9ITEsdGhpcy5fdmlld3BvcnRXaWR0aD0tMSx0aGlzLl92aWV3cG9ydEhlaWdodD0tMSx0aGlzLl9uZXdMYXllcnM9W10sdGhpcy5fbGF5ZXJzPW5ldyBNYXAsdGhpcy5fcmN0eD1udWxsLHRoaXMuX3JlbmRlclRhcmdldFRvUmVzdG9yZT1udWxsLHRoaXMuX2xhc3RGcmFtZVdhc1N0YXRpb25hcnk9ITEsdGhpcy5fd2FzbU1lbUJsb2NrU2l6ZXM9WzUxMiwxMDI0LDIwNDgsNDA5Niw4MTkyLDE2Mzg0LDMyNzY4LDY1NTM2XSx0aGlzLl93YXNtTWVtQmxvY2tzPW5ldyBNYXAsdGhpcy5fZGJnRmxhZ3M9bmV3IFNldCx0aGlzLl9jYXB0dXJlRnJ1c3R1bT0hMSx0aGlzLl9mcnVzdHVtPW51bGwsdGhpcy5fZnJ1c3R1bVJlbmRlcmFibGVJZD0tMSx0aGlzLl9yZW5kZXJDb29yZHNIZWxwZXI9bnVsbCx0aGlzLnByb2R1Y2VzPW5ldyBNYXAoW1tGLlZPWEVMLCgpPT4hIXRoaXMuX3Z4bCYmXCJsb2NhbFwiPT09dGhpcy52aWV3LnZpZXdpbmdNb2RlXV0pLHRoaXMudHlwZT1MLlZPWEVMLHRoaXMuc2xpY2VQbGFuZUVuYWJsZWQ9ITAsdGhpcy5pc0dyb3VuZD0hMSx0aGlzLmxheWVyVWlkPVtdfV9kYmcoZSx0KXt0aGlzLl9kYmdGbGFncy5oYXMoZSkmJihlPT09SS5FcnJvcj9rLmVycm9yKHQpOmsud2Fybih0KSl9X3JlbW92ZVJlbmRlclBsdWdpbigpe3RoaXMuX3BsdWdpbklzQWN0aXZlJiZ0aGlzLnZpZXcuX3N0YWdlJiYodGhpcy5fZGJnKEkuTGlmZXRpbWUsXCItLXJlbW92ZVJlbmRlclBsdWdpbi0tXCIpLHRoaXMudmlldy5fc3RhZ2UucmVtb3ZlUmVuZGVyUGx1Z2luKHRoaXMpKSx0aGlzLl9wbHVnaW5Jc0FjdGl2ZT0hMX1pbml0aWFsaXplKCl7dGhpcy5fZGJnKEkuTGlmZXRpbWUsXCItLWluaXRpYWxpemUtLVwiKTtmb3IoY29uc3QgZSBvZiB0aGlzLl93YXNtTWVtQmxvY2tTaXplcyl0aGlzLl93YXNtTWVtQmxvY2tzLnNldChlLDApO3RoaXMuYWRkSGFuZGxlcyhbYSgoKCk9PnRoaXMudmlldy5yZWFkeSksKGU9PntlJiZcImxvY2FsXCI9PT10aGlzLnZpZXcudmlld2luZ01vZGU/KHRoaXMuX2RiZyhJLkxpZmV0aW1lLFwidmlldyByZWFkeSBzdGF0dXMgY2hhbmdlZCB0byByZWFkeSBvbiBhIGxvY2FsIHZpZXcsIGNhbGxpbmcgYWRkUmVuZGVyUGx1Z2luXCIpLHRoaXMudmlldy5fc3RhZ2UuYWRkUmVuZGVyUGx1Z2luKHRoaXMpLHRoaXMuX3BsdWdpbklzQWN0aXZlPSEwKToodGhpcy5fZGJnKEkuTGlmZXRpbWUsXCJ2aWV3IHJlYWR5IHN0YXR1cyBjaGFuZ2VkLCBub3QgcmVhZHkgb3Igbm90IGEgbG9jYWwgdmlldyFcIiksdGhpcy5fcmVtb3ZlUmVuZGVyUGx1Z2luKCkpfSksbiksYSgoKCk9PnRoaXMudmlldz8ucXVhbGl0eVByb2ZpbGUpLChlPT57dGhpcy5fZGJnKEkuUmVuZGVyaW5nLFwicXVhbGl0eVByb2ZpbGUgY2hhbmdlZCB0byBcIitlKSx0aGlzLl92eGwmJnRoaXMuX3Z4bC5zZXRfcXVhbGl0eSh0aGlzLl90b1dhc21RdWFsaXR5KGUpKX0pLG4pLGEoKCgpPT50aGlzLnZpZXc/LnRpbWVFeHRlbnQpLCgoKT0+e2lmKHRoaXMuX3Z4bCl7Y29uc3QgZT10aGlzLl9nZXRUaW1lQXJncyh0aGlzLnZpZXc/LnRpbWVFeHRlbnQpO3RoaXMuX2RiZyhJLlJlbmRlcmluZyxcInNjZW5lVmlldyB0aW1lRXh0ZW50IGNoYW5nZWQgdG8gdXNlVGltZT1cIitlLnVzZVRpbWUrXCIgc3Q9XCIrZS5zdGFydFRpbWUrXCIgZXQ9XCIrZS5lbmRUaW1lKSx0aGlzLl92eGwuc2V0X3NjZW5lX3RpbWVfZXh0ZW50KGUuc3RhcnRUaW1lLGUuZW5kVGltZSxlLnVzZVRpbWUpLHRoaXMuX3JlbmRlclBsdWdpbkNvbnRleHQucmVxdWVzdFJlbmRlcigpfX0pLG4pLGEoKCgpPT50aGlzLnZpZXc/LnN0YXRpb25hcnkpLChlPT57dGhpcy5fdnhsJiZlJiYhdGhpcy5fbGFzdEZyYW1lV2FzU3RhdGlvbmFyeSYmdGhpcy5fcmVuZGVyUGx1Z2luQ29udGV4dC5yZXF1ZXN0UmVuZGVyKCl9KSldKX1pbml0aWFsaXplUmVuZGVyQ29udGV4dChlKXt0aGlzLl9kYmcoSS5MaWZldGltZSxcIi0taW5pdGlhbGl6ZVJlbmRlckNvbnRleHQtLVwiKTtjb25zdCB0PWUucmVuZGVyQ29udGV4dC5yY3R4O3QudHlwZT09PUMuV0VCR0wyPyh0aGlzLl9yZW5kZXJQbHVnaW5Db250ZXh0PWUsdGhpcy5fcmN0eD1lLnJlbmRlckNvbnRleHQucmN0eCx0aGlzLl9oYWxmSW50VGV4dHVyZXNBdmFpbGFibGU9ISF0aGlzLl9yY3R4LmNhcGFiaWxpdGllcy50ZXh0dXJlTm9ybTE2LHRoaXMuX3RleHR1cmVGbG9hdExpbmVhckF2YWlsYWJsZT10aGlzLl9yY3R4LmNhcGFiaWxpdGllcy50ZXh0dXJlRmxvYXRMaW5lYXIsdGhpcy5faW5pdGlhbGl6ZVdhc20odC5nbCkpOnRoaXMuX2RiZyhJLkVycm9yLFwiV2ViR0wgMSBjb250ZXh0IG9ubHkhXCIpfXVuaW5pdGlhbGl6ZVJlbmRlckNvbnRleHQoKXt0aGlzLl9yZW5kZXJQbHVnaW5Db250ZXh0PW51bGwsdGhpcy5fcmN0eD1udWxsLHRoaXMuX2RiZyhJLkxpZmV0aW1lLFwiLS11bmluaXRpYWxpemVSZW5kZXJDb250ZXh0LS1cIil9X3Jlc3RvcmVGcmFtZWJ1ZmZlcigpe2lmKCF0aGlzLl9yZW5kZXJUYXJnZXRUb1Jlc3RvcmUpcmV0dXJuO2NvbnN0IGU9dGhpcy5fcmVuZGVyVGFyZ2V0VG9SZXN0b3JlLmZibztpZighISF0aGlzLl9yY3R4KXJldHVybiB2b2lkIHRoaXMuX2RiZyhJLkVycm9yLFwibm8gY29udGV4dCBpbiByZXN0b3JlRnJhbWVidWZmZXIhXCIpO3RoaXMuX3JjdHguYmluZEZyYW1lYnVmZmVyKGUsITApO2NvbnN0IHQ9dGhpcy5fcmVuZGVyVGFyZ2V0VG9SZXN0b3JlLnZpZXdwb3J0O3RoaXMuX3JjdHguc2V0Vmlld3BvcnQodC54LHQueSx0LndpZHRoLHQuaGVpZ2h0KX1fYmluZFByZXZpb3VzRGVwdGhUb1Nsb3QoZSx0KXtjb25zdCBzPSEhdGhpcy5fcmN0eCxyPSEhdGhpcy5fcmVuZGVyVGFyZ2V0VG9SZXN0b3JlO2lmKCFzfHwhcilyZXR1cm4gMDtjb25zdCBpPXRoaXMuX3JlbmRlclRhcmdldFRvUmVzdG9yZS5mYm8uZGVwdGhTdGVuY2lsVGV4dHVyZTtyZXR1cm4gaT8oMD09PXQ/dGhpcy5fcmN0eC5iaW5kVGV4dHVyZShudWxsLGUsITApOnRoaXMuX3JjdHguYmluZFRleHR1cmUoaSxlLCEwKSwxKToodGhpcy5fZGJnKEkuRXJyb3IsXCJubyBkZXB0aC9zdGVuY2lsIHRleHR1cmUgZXhpc3RzIVwiKSwwKX1fbW9kaWZ5UmVzb3VyY2VDb3VudChlLHQscyl7aWYoIXRoaXMuX3JjdHgpcmV0dXJuIHZvaWQgdGhpcy5fZGJnKEkuRXJyb3IsXCJtb2RpZnlBbGxvY2F0aW9uIGNhbGxiYWNrIGhhcyBubyByZW5kZXJpbmcgY29udGV4dCFcIik7Y29uc3Qgcj1lOzE9PT1zP3RoaXMuX3JjdHguaW5zdGFuY2VDb3VudGVyLmluY3JlbWVudChyLHQpOnRoaXMuX3JjdHguaW5zdGFuY2VDb3VudGVyLmRlY3JlbWVudChyLHQpfV9zZXRCbGVuZFN0YXRlKGUsdCxzLHIpe3RoaXMuX3JjdHg/KHRoaXMuX3JjdHguc2V0QmxlbmRpbmdFbmFibGVkKDE9PT1lKSx0aGlzLl9yY3R4LnNldEJsZW5kRnVuY3Rpb24odCxzKSx0aGlzLl9yY3R4LnNldEJsZW5kRXF1YXRpb24ocikpOnRoaXMuX2RiZyhJLkVycm9yLFwic2V0QmxlbmRTdGF0ZSBjYWxsYmFjayBoYXMgbm8gcmVuZGVyaW5nIGNvbnRleHQhXCIpfV9zZXRGcm9udEZhY2UoZSl7dGhpcy5fcmN0eD90aGlzLl9yY3R4LnNldEZyb250RmFjZShlKTp0aGlzLl9kYmcoSS5FcnJvcixcInNldEZyb250RmFjZSBjYWxsYmFjayBoYXMgbm8gcmVuZGVyaW5nIGNvbnRleHQhXCIpfV9zZXREZXB0aFN0ZW5jaWxTdGF0ZUZ1bmN0aW9uKGUsdCxzKXt0aGlzLl9yY3R4Pyh0aGlzLl9yY3R4LnNldERlcHRoRnVuY3Rpb24ocyksdGhpcy5fcmN0eC5zZXREZXB0aFRlc3RFbmFibGVkKDE9PT1lKSx0aGlzLl9yY3R4LnNldERlcHRoV3JpdGVFbmFibGVkKDE9PT10KSx0aGlzLl9yY3R4LnNldFN0ZW5jaWxUZXN0RW5hYmxlZCghMSksdGhpcy5fcmN0eC5zZXRTdGVuY2lsRnVuY3Rpb24oUy5BTFdBWVMsMCwyNTUpLHRoaXMuX3JjdHguc2V0U3RlbmNpbE9wU2VwYXJhdGUoUC5GUk9OVCxVLktFRVAsVS5JTkNSLFUuS0VFUCksdGhpcy5fcmN0eC5zZXRTdGVuY2lsT3BTZXBhcmF0ZShQLkJBQ0ssVS5LRUVQLFUuREVDUixVLktFRVApKTp0aGlzLl9kYmcoSS5FcnJvcixcInNldERlcHRoU3RlbmNpbFN0YXRlRnVuY3Rpb24gY2FsbGJhY2sgaGFzIG5vIHJlbmRlcmluZyBjb250ZXh0IVwiKX1fc2V0UmFzdGVyaXplclN0YXRlKGUpe2lmKHRoaXMuX3JjdHgpc3dpdGNoKGUpe2Nhc2UgbS5Ob25lOnRoaXMuX3JjdHguc2V0RmFjZUN1bGxpbmdFbmFibGVkKCExKTticmVhaztjYXNlIG0uQmFjazp0aGlzLl9yY3R4LnNldEN1bGxGYWNlKFAuQkFDSyksdGhpcy5fcmN0eC5zZXRGYWNlQ3VsbGluZ0VuYWJsZWQoITApO2JyZWFrO2Nhc2UgbS5Gcm9udDp0aGlzLl9yY3R4LnNldEN1bGxGYWNlKFAuRlJPTlQpLHRoaXMuX3JjdHguc2V0RmFjZUN1bGxpbmdFbmFibGVkKCEwKX1lbHNlIHRoaXMuX2RiZyhJLkVycm9yLFwic2V0UmFzdGVyaXplclN0YXRlIGNhbGxiYWNrIGhhcyBubyByZW5kZXJpbmcgY29udGV4dCFcIil9X3NldFZpZXdwb3J0KGUsdCxzLHIpe3RoaXMuX3JjdHg/dGhpcy5fcmN0eC5zZXRWaWV3cG9ydChlLHQscyxyKTp0aGlzLl9kYmcoSS5FcnJvcixcInNldFZpZXdwb3J0IGNhbGxiYWNrIGhhcyBubyByZW5kZXJpbmcgY29udGV4dCFcIil9X3VwZGF0ZU1lbW9yeVVzYWdlKCl7dGhpcy5fbGF5ZXJzLmZvckVhY2goKChlLHQpPT57aWYoZS5uZWVkTWVtb3J5VXNhZ2VVcGRhdGUpe2NvbnN0IHM9dGhpcy5fdnhsLmVzdGltYXRlX21lbW9yeV91c2FnZSh0KTtzPj0wJiYoZS5uZWVkTWVtb3J5VXNhZ2VVcGRhdGU9ITEsZS5sYXllclZpZXcuc2V0VXNlZE1lbW9yeShzKSl9fSkpfV9zeW5jUmVxdWVzdHNSZXNwb25zZXMoKXt0aGlzLl9sYXllcnMuZm9yRWFjaCgoKGUsdCk9Pntjb25zdCByPVtdO2UucmVzcG9uc2VzLmZvckVhY2goKChzLGkpPT57ci5wdXNoKGkpLHRoaXMuX2RiZyhJLlJlcXVlc3RSZXNwb25zZSxcInJlc3BvbmRpbmcgZm9yIHJlcXVlc3RJRDpcIitpK1wiIHNpemU6XCIrcy5zaXplKSx0aGlzLl92eGwucmVzcG9uZCh0LGkscykscy5yZXF1ZXN0VHlwZSE9PXAuVHJlZUluZGV4JiZzLnJlcXVlc3RUeXBlIT09cC5TZWN0aW9ufHwoZS5uZWVkTWVtb3J5VXNhZ2VVcGRhdGU9ITApfSkpO2NvbnN0IGE9ZS5yZXNwb25zZXM7Zm9yKGNvbnN0IHMgb2YgcilhLmRlbGV0ZShzKTtjb25zdCBuPXRoaXMuX3Z4bC5nZXRfbmV3X3JlcXVlc3RzKHQpLG89ZS5hYm9ydENvbnRyb2xsZXIuc2lnbmFsO2Zvcihjb25zdCBsIGluIG4pe2Uub3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQrPTEsMT09PWUub3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQmJmUubGF5ZXJWaWV3LnVwZGF0aW5nRmxhZ0NoYW5nZWQoKTtjb25zdCB0PW5bbF0scj17cmVzcG9uc2VUeXBlOlwiYXJyYXktYnVmZmVyXCIsc2lnbmFsOm99O3RoaXMuX2RiZyhJLlJlcXVlc3RSZXNwb25zZSxcIm1ha2luZyByZXF1ZXN0SUQ6XCIrbCtcIiB1cmw6XCIrdC51cmwpLHModC51cmwscikudGhlbigocz0+e2Uub3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQtPTEsMD09PWUub3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQmJmUubGF5ZXJWaWV3LnVwZGF0aW5nRmxhZ0NoYW5nZWQoKSx0aGlzLl9kYmcoSS5SZXF1ZXN0UmVzcG9uc2UsXCJoYXZlIHJlc3BvbnNlIGZvciByZXF1ZXN0SUQ6XCIrbCk7bGV0IHI9MDtpZihzLmRhdGEuYnl0ZUxlbmd0aD4wKXtyPXRoaXMuX3Z4bC5fbWFsbG9jKHMuZGF0YS5ieXRlTGVuZ3RoKTtjb25zdCBlPW5ldyBVaW50OEFycmF5KHRoaXMuX3Z4bC5IRUFQVTguYnVmZmVyLHIscy5kYXRhLmJ5dGVMZW5ndGgpLHQ9bmV3IFVpbnQ4QXJyYXkocy5kYXRhKTtmb3IobGV0IHI9MDtyPHMuZGF0YS5ieXRlTGVuZ3RoOysrcillW3JdPXRbcl19YS5zZXQoK2wse3Jlc3BvbnNlVHlwZTp0LnJlc3BvbnNlVHlwZSxwdHI6cixzaXplOnMuZGF0YS5ieXRlTGVuZ3RoLHN1Y2Nlc3M6ITAscmVxdWVzdFR5cGU6dC5yZXF1ZXN0VHlwZX0pfSkpLmNhdGNoKChzPT57ZS5vdXRzdGFuZGluZ1JlcXVlc3RDb3VudC09MSwwPT09ZS5vdXRzdGFuZGluZ1JlcXVlc3RDb3VudCYmZS5sYXllclZpZXcudXBkYXRpbmdGbGFnQ2hhbmdlZCgpLGkocyl8fCh0aGlzLl9kYmcoSS5FcnJvcixgcmVxdWVzdElEOiR7bH0gZmFpbGVkLCBlcnJvcj0ke3MudG9TdHJpbmcoKX1gKSxhLnNldCgrbCx7cmVzcG9uc2VUeXBlOnQucmVzcG9uc2VUeXBlLHB0cjowLHNpemU6MCxzdWNjZXNzOiExLHJlcXVlc3RUeXBlOnQucmVxdWVzdFR5cGV9KSl9KSl9fSkpfXVwZGF0ZVdhc21DYW1lcmEoZSl7dGhpcy5fdnhsLnNldF9wcm9qZWN0aW9uX21hdHJpeC5hcHBseSh0aGlzLl92eGwsZS5wcm9qZWN0aW9uTWF0cml4KSx0aGlzLl92eGwuc2V0X3ZpZXdfbWF0cml4LmFwcGx5KHRoaXMuX3Z4bCxlLnZpZXdNYXRyaXgpLHRoaXMuX3Z4bC5zZXRfbmVhcl9mYXIoZS5uZWFyLGUuZmFyKX1pc1VwZGF0aW5nKGUpe2lmKCF0aGlzLl92eGwmJnRoaXMuX3Z4bFByb21pc2UpcmV0dXJuITA7Y29uc3QgdD10aGlzLl9sYXllcnMuZ2V0KGUpO3JldHVybiEhdCYmdC5vdXRzdGFuZGluZ1JlcXVlc3RDb3VudD4wfWdldExheWVyVGltZXMoZSl7Y29uc3QgdD1bXTtyZXR1cm4gdGhpcy5fbGF5ZXJzLmZvckVhY2goKChzLHIpPT57aWYocy5sYXllclZpZXcud2FzbUxheWVySWQ9PT1lLndhc21MYXllcklkKXtjb25zdCBzPXRoaXMuX3Z4bC5nZXRfbGF5ZXJfZXBvY2hfdGltZXMocixlLmxheWVyLmN1cnJlbnRWYXJpYWJsZUlkKTtmb3IobGV0IGU9MDtlPHMubGVuZ3RoOysrZSl0LnB1c2goc1tlXSl9fSkpLHR9Z2V0Q3VycmVudExheWVyVGltZUluZGV4KGUpe2xldCB0PTA7cmV0dXJuIHRoaXMuX2xheWVycy5mb3JFYWNoKCgocyxyKT0+e3MubGF5ZXJWaWV3Lndhc21MYXllcklkPT09ZS53YXNtTGF5ZXJJZCYmKHQ9dGhpcy5fdnhsLmdldF9sYXllcl9jdXJyZW50X3RpbWVfaWQocikpfSkpLHR9c2V0RW5hYmxlZChlLHQpe3RoaXMuX2xheWVycy5mb3JFYWNoKCgocyxyKT0+e3MubGF5ZXJWaWV3Lndhc21MYXllcklkPT09ZS53YXNtTGF5ZXJJZCYmKHRoaXMuX3Z4bC5zZXRfZW5hYmxlZChyLHQpLHMubmVlZE1lbW9yeVVzYWdlVXBkYXRlPSEwLHRoaXMuX3JlbmRlclBsdWdpbkNvbnRleHQucmVxdWVzdFJlbmRlcigpKX0pKX1zZXRTdGF0aWNTZWN0aW9ucyhlLHQpe2NvbnN0IHM9e21hc2s6Zy5TdGF0aWNTZWN0aW9ucyxzdGF0aWNTZWN0aW9uczp0fTtyZXR1cm4gdGhpcy5fZG9NYXNrZWRVSVVwZGF0ZShlLHMsITApfXNldEN1cnJlbnRWYXJpYWJsZShlLHQpe2NvbnN0IHM9e21hc2s6Zy5DdXJyZW50VmFyaWFibGUsY3VycmVudFZhcmlhYmxlOnR9O3JldHVybiB0aGlzLl9kb01hc2tlZFVJVXBkYXRlKGUscywhMCl9c2V0UmVuZGVyTW9kZShlLHQpe2NvbnN0IHM9e21hc2s6Zy5SZW5kZXJNb2RlLHJlbmRlck1vZGU6dH07cmV0dXJuIHRoaXMuX2RvTWFza2VkVUlVcGRhdGUoZSxzLCEwKX1zZXRWZXJ0aWNhbEV4YWdnZXJhdGlvbkFuZE9mZnNldChlLHQscyxyKXtjb25zdCBpPXttYXNrOmcuRXhhZ2dlcmF0aW9uQW5kT2Zmc2V0LHZvbFN0eWxlRGVzYzp7dm9sdW1lSWQ6dCx2ZXJ0aWNhbEV4YWdnZXJhdGlvbjpzLHZlcnRpY2FsT2Zmc2V0OnJ9fTtyZXR1cm4gdGhpcy5fZG9NYXNrZWRVSVVwZGF0ZShlLGksITApfXNldFZhcmlhYmxlU3R5bGVzKGUsdCl7Y29uc3Qgcz17bWFzazpnLlZhcmlhYmxlU3R5bGVzLHZhcmlhYmxlU3R5bGVzOnR9O3JldHVybiB0aGlzLl9kb01hc2tlZFVJVXBkYXRlKGUscywhMCl9c2V0Vm9sdW1lU3R5bGVzKGUsdCl7Y29uc3Qgcz17bWFzazpnLlZvbHVtZVN0eWxlcyx2b2x1bWVTdHlsZXM6dH07cmV0dXJuIHRoaXMuX2RvTWFza2VkVUlVcGRhdGUoZSxzLCEwKX1zZXRFbmFibGVEeW5hbWljU2VjdGlvbnMoZSx0KXtjb25zdCBzPXttYXNrOmcuQ29udGFpbmVyVmlzaWJpbGl0eSxjb250YWluZXJJc1Zpc2libGU6dCxjb250YWluZXI6Zi5EeW5hbWljU2VjdGlvbnN9O3JldHVybiB0aGlzLl9kb01hc2tlZFVJVXBkYXRlKGUscywhMCl9c2V0RW5hYmxlSXNvc3VyZmFjZXMoZSx0KXtjb25zdCBzPXttYXNrOmcuQ29udGFpbmVyVmlzaWJpbGl0eSxjb250YWluZXJJc1Zpc2libGU6dCxjb250YWluZXI6Zi5Jc29zdXJmYWNlc307cmV0dXJuIHRoaXMuX2RvTWFza2VkVUlVcGRhdGUoZSxzLCEwKX1zZXRFbmFibGVTZWN0aW9ucyhlLHQpe2NvbnN0IHM9e21hc2s6Zy5Db250YWluZXJWaXNpYmlsaXR5LGNvbnRhaW5lcklzVmlzaWJsZTp0LGNvbnRhaW5lcjpmLlN0YXRpY1NlY3Rpb25zfTtyZXR1cm4gdGhpcy5fZG9NYXNrZWRVSVVwZGF0ZShlLHMsITApfXNldEFuYWx5c2lzU2xpY2UoZSx0LHMscil7Y29uc3QgaT17bWFzazpnLkFuYWx5c2lzU2xpY2UsYW5hbHlzaXNTbGljZTp7cG9pbnQ6cyxub3JtYWw6cixlbmFibGVkOnR9fTtyZXR1cm4gdGhpcy5fZG9NYXNrZWRVSVVwZGF0ZShlLGksITApfV9kb01hc2tlZFVJVXBkYXRlKGUsdCxzKXtpZighdGhpcy5fdnhsKXJldHVybiExO2xldCByPSExO3JldHVybiB0aGlzLl9sYXllcnMuZm9yRWFjaCgoKHMsaSk9PntpZihzLmxheWVyVmlldy53YXNtTGF5ZXJJZD09PWUud2FzbUxheWVySWQpe2NvbnN0IGU9e3N0cjpKU09OLnN0cmluZ2lmeSh0KSxieXRlQ291bnQ6MCxwdHI6MCxpc1JldXNhYmxlOiExfTt0aGlzLl9hbGxvY2F0ZUJsb2NrKGUpJiYocj0xPT09dGhpcy5fdnhsLmhhbmRsZV9tYXNrZWRfdWlfdXBkYXRlKGksZS5wdHIsZS5ieXRlQ291bnQpLGUuaXNSZXVzYWJsZXx8dGhpcy5fdnhsLl9mcmVlKGUucHRyKSl9fSkpLHImJnMmJnRoaXMuX3JlbmRlclBsdWdpbkNvbnRleHQucmVxdWVzdFJlbmRlcigpLHJ9X2FkZFRyaWFuZ2xlVG9XYXNtQnVmZmVyKGUsdCxzLHIsaSl7cmV0dXJuIGVbMyp0XT1zWzBdLGVbMyp0KzFdPXNbMV0sZVszKnQrMl09c1syXSxlWzMqKHQrPTEpXT1yWzBdLGVbMyp0KzFdPXJbMV0sZVszKnQrMl09clsyXSxlWzMqKHQrPTEpXT1pWzBdLGVbMyp0KzFdPWlbMV0sZVszKnQrMl09aVsyXSx0Kz0xfV9hZGROb3JtYWxUb1dhc21CdWZmZXIoZSx0LHMpe3JldHVybiBlWzMqdF09c1swXSxlWzMqdCsxXT1zWzFdLGVbMyp0KzJdPXNbMl0sdCs9MX1fZG9DYXB0dXJlRnJ1c3R1bSgpe2lmKCF0aGlzLl92eGwpcmV0dXJuO2NvbnN0IGU9MzYsdD1lLzMscz10aGlzLl92eGwuX21hbGxvYygzKmUqRmxvYXQzMkFycmF5LkJZVEVTX1BFUl9FTEVNRU5UKSxyPW5ldyBGbG9hdDMyQXJyYXkodGhpcy5fdnhsLkhFQVBGMzIuYnVmZmVyLHMsMyplKSxpPXRoaXMuX3Z4bC5fbWFsbG9jKDMqdCpGbG9hdDMyQXJyYXkuQllURVNfUEVSX0VMRU1FTlQpLGE9bmV3IEZsb2F0MzJBcnJheSh0aGlzLl92eGwuSEVBUEYzMi5idWZmZXIsaSxlKSxuPXRoaXMuX2ZydXN0dW0ucG9pbnRzW18uTkVBUl9CT1RUT01fTEVGVF0sbz10aGlzLl9mcnVzdHVtLnBvaW50c1tfLk5FQVJfQk9UVE9NX1JJR0hUXSxsPXRoaXMuX2ZydXN0dW0ucG9pbnRzW18uTkVBUl9UT1BfUklHSFRdLGg9dGhpcy5fZnJ1c3R1bS5wb2ludHNbXy5ORUFSX1RPUF9MRUZUXSxkPXRoaXMuX2ZydXN0dW0ucG9pbnRzW18uRkFSX0JPVFRPTV9MRUZUXSx1PXRoaXMuX2ZydXN0dW0ucG9pbnRzW18uRkFSX0JPVFRPTV9SSUdIVF0sbT10aGlzLl9mcnVzdHVtLnBvaW50c1tfLkZBUl9UT1BfUklHSFRdLHA9dGhpcy5fZnJ1c3R1bS5wb2ludHNbXy5GQVJfVE9QX0xFRlRdO2xldCBnPTAsZj0wO2NvbnN0IHg9dGhpcy5fZnJ1c3R1bS5wbGFuZXNbYy5ORUFSXTtnPXRoaXMuX2FkZFRyaWFuZ2xlVG9XYXNtQnVmZmVyKHIsZyxsLG8sbiksZj10aGlzLl9hZGROb3JtYWxUb1dhc21CdWZmZXIoYSxmLHgpLGc9dGhpcy5fYWRkVHJpYW5nbGVUb1dhc21CdWZmZXIocixnLG4saCxsKSxmPXRoaXMuX2FkZE5vcm1hbFRvV2FzbUJ1ZmZlcihhLGYseCk7Y29uc3QgeT10aGlzLl9mcnVzdHVtLnBsYW5lc1tjLkZBUl07Zz10aGlzLl9hZGRUcmlhbmdsZVRvV2FzbUJ1ZmZlcihyLGcsZCx1LG0pLGY9dGhpcy5fYWRkTm9ybWFsVG9XYXNtQnVmZmVyKGEsZix5KSxnPXRoaXMuX2FkZFRyaWFuZ2xlVG9XYXNtQnVmZmVyKHIsZyxtLHAsZCksZj10aGlzLl9hZGROb3JtYWxUb1dhc21CdWZmZXIoYSxmLHkpO2NvbnN0IHY9dGhpcy5fZnJ1c3R1bS5wbGFuZXNbYy5UT1BdO2c9dGhpcy5fYWRkVHJpYW5nbGVUb1dhc21CdWZmZXIocixnLG0sbCxoKSxmPXRoaXMuX2FkZE5vcm1hbFRvV2FzbUJ1ZmZlcihhLGYsdiksZz10aGlzLl9hZGRUcmlhbmdsZVRvV2FzbUJ1ZmZlcihyLGcsaCxwLG0pLGY9dGhpcy5fYWRkTm9ybWFsVG9XYXNtQnVmZmVyKGEsZix2KTtjb25zdCBiPXRoaXMuX2ZydXN0dW0ucGxhbmVzW2MuQk9UVE9NXTtnPXRoaXMuX2FkZFRyaWFuZ2xlVG9XYXNtQnVmZmVyKHIsZyxuLG8sdSksZj10aGlzLl9hZGROb3JtYWxUb1dhc21CdWZmZXIoYSxmLGIpLGc9dGhpcy5fYWRkVHJpYW5nbGVUb1dhc21CdWZmZXIocixnLHUsZCxuKSxmPXRoaXMuX2FkZE5vcm1hbFRvV2FzbUJ1ZmZlcihhLGYsYik7Y29uc3Qgdz10aGlzLl9mcnVzdHVtLnBsYW5lc1tjLkxFRlRdO2c9dGhpcy5fYWRkVHJpYW5nbGVUb1dhc21CdWZmZXIocixnLGgsbixkKSxmPXRoaXMuX2FkZE5vcm1hbFRvV2FzbUJ1ZmZlcihhLGYsdyksZz10aGlzLl9hZGRUcmlhbmdsZVRvV2FzbUJ1ZmZlcihyLGcsZCxwLGgpLGY9dGhpcy5fYWRkTm9ybWFsVG9XYXNtQnVmZmVyKGEsZix3KTtjb25zdCBUPXRoaXMuX2ZydXN0dW0ucGxhbmVzW2MuUklHSFRdO2c9dGhpcy5fYWRkVHJpYW5nbGVUb1dhc21CdWZmZXIocixnLGwsbSx1KSxmPXRoaXMuX2FkZE5vcm1hbFRvV2FzbUJ1ZmZlcihhLGYsVCksZz10aGlzLl9hZGRUcmlhbmdsZVRvV2FzbUJ1ZmZlcihyLGcsdSxvLGwpLGY9dGhpcy5fYWRkTm9ybWFsVG9XYXNtQnVmZmVyKGEsZixUKSwtMSE9PXRoaXMuX2ZydXN0dW1SZW5kZXJhYmxlSWQmJnRoaXMuX3Z4bC5yZW1vdmVfZ2VuZXJpY19tZXNoKHRoaXMuX2ZydXN0dW1SZW5kZXJhYmxlSWQpLHRoaXMuX2ZydXN0dW1SZW5kZXJhYmxlSWQ9dGhpcy5fdnhsLmFkZF9nZW5lcmljX21lc2gocywzKmUsaSxlLDI1NSwwLDAsNjQpLHRoaXMuX3Z4bC5fZnJlZShzKSx0aGlzLl92eGwuX2ZyZWUoaSksdGhpcy5fY2FwdHVyZUZydXN0dW09ITEsdGhpcy5fcmVuZGVyUGx1Z2luQ29udGV4dC5yZXF1ZXN0UmVuZGVyKCl9Y2FwdHVyZUZydXN0dW0oKXtudWxsPT09dGhpcy5fcmVuZGVyQ29vcmRzSGVscGVyJiYodGhpcy5fcmVuZGVyQ29vcmRzSGVscGVyPXcuY3JlYXRlKHkuTG9jYWwsdSghMSx0aGlzLnZpZXcuc3BhdGlhbFJlZmVyZW5jZSkpKSxudWxsPT09dGhpcy5fZnJ1c3R1bSYmKHRoaXMuX2ZydXN0dW09bmV3IGIodGhpcy5fcmVuZGVyQ29vcmRzSGVscGVyKSksdGhpcy5fY2FwdHVyZUZydXN0dW09ITAsbnVsbCE9PXRoaXMuX3JlbmRlclBsdWdpbkNvbnRleHQmJnRoaXMuX3JlbmRlclBsdWdpbkNvbnRleHQucmVxdWVzdFJlbmRlcigpfXRvZ2dsZUZ1bGxWb2x1bWVFeHRlbnREcmF3KGUpe3RoaXMuX3Z4bCYmdGhpcy5fbGF5ZXJzLmZvckVhY2goKCh0LHMpPT57dC5sYXllclZpZXcud2FzbUxheWVySWQ9PT1lLndhc21MYXllcklkJiYodGhpcy5fdnhsLnRvZ2dsZV9mdWxsX3ZvbHVtZV9leHRlbnRfZHJhdyhzKSx0aGlzLl9yZW5kZXJQbHVnaW5Db250ZXh0LnJlcXVlc3RSZW5kZXIoKSl9KSl9YWRkVm94ZWxMYXllcihlKXtpZighdGhpcy5fdnhsKXtjb25zdCB0PXtsYXllclZpZXc6ZSxyZXNvbHZlQ2FsbGJhY2s6bnVsbCxyZWplY3RDYWxsYmFjazpudWxsfSxzPW5ldyBQcm9taXNlKCgoZSxzKT0+e3QucmVzb2x2ZUNhbGxiYWNrPWUsdC5yZWplY3RDYWxsYmFjaz1zfSkpO3JldHVybiB0aGlzLl9uZXdMYXllcnMucHVzaCh0KSxzfWNvbnN0IHQ9dGhpcy5fYWRkVm94ZWxMYXllcihlKTtyZXR1cm4gdDwwP1Byb21pc2UucmVqZWN0KC0xKTpQcm9taXNlLnJlc29sdmUodCl9cmVtb3ZlVm94ZWxMYXllcihlKXtpZighdGhpcy5fdnhsKXtjb25zdCB0PXRoaXMuX25ld0xheWVycy5maW5kSW5kZXgoKHQ9PmUudWlkPT09dC5sYXllclZpZXcudWlkKSk7dD49MCYmKHRoaXMuX25ld0xheWVyc1t0XS5yZXNvbHZlQ2FsbGJhY2soLTEpLHRoaXMuX25ld0xheWVycy5zcGxpY2UodCwxKSk7Y29uc3Qgcz10aGlzLl9uZXdMYXllcnMubGVuZ3RoO3JldHVybiAwPT09cyYmKHRoaXMuX2RiZyhJLkxpZmV0aW1lLFwiIG5vIHZveGVsIGxheWVycyBsZWZ0IGFmdGVyIHJlbW92aW5nIGEgbGF5ZXIsIHJlbW92aW5nIFJlbmRlclBsdWdpbiBhbmQgZGVzdHJveWluZ1wiKSx0aGlzLmRlc3Ryb3koKSksc31sZXQgdD0tMTt0aGlzLl9sYXllcnMuZm9yRWFjaCgoKHMscik9PntpZihzLmxheWVyVmlldy53YXNtTGF5ZXJJZD09PWUud2FzbUxheWVySWQpe3Q9cixzLmFib3J0Q29udHJvbGxlci5hYm9ydCgpLHRoaXMuX3Z4bC5yZW1vdmVfbGF5ZXIodCk7Y29uc3QgaT10aGlzLmxheWVyVWlkLmluZGV4T2YoZS5sYXllci51aWQpOy0xIT09aSYmdGhpcy5sYXllclVpZC5zcGxpY2UoaSwxKX19KSksdD49MCYmdGhpcy5fbGF5ZXJzLmRlbGV0ZSh0KTtjb25zdCBzPXRoaXMuX2xheWVycy5zaXplO3JldHVybiAwPT09cyYmKHRoaXMuX2RiZyhJLkxpZmV0aW1lLFwiIG5vIHZveGVsIGxheWVycyBsZWZ0IGFmdGVyIHJlbW92aW5nIGEgbGF5ZXIsIHJlbW92aW5nIFJlbmRlclBsdWdpbiBhbmQgZGVzdHJveWluZ1wiKSx0aGlzLmRlc3Ryb3koKSksc31fZ2V0QmxvY2tTaXplKGUpe2Zvcihjb25zdCB0IG9mIHRoaXMuX3dhc21NZW1CbG9ja1NpemVzKWlmKGU8dClyZXR1cm4gdDtyZXR1cm4tMX1fYWxsb2NhdGVCbG9jayhlKXtlLmJ5dGVDb3VudD10aGlzLl92eGwubGVuZ3RoQnl0ZXNVVEY4KGUuc3RyKSsxO2NvbnN0IHQ9dGhpcy5fZ2V0QmxvY2tTaXplKGUuYnl0ZUNvdW50KTtyZXR1cm4gdDwwPyhlLmlzUmV1c2FibGU9ITEsZS5wdHI9dGhpcy5fdnhsLl9tYWxsb2MoZS5ieXRlQ291bnQpKTooZS5pc1JldXNhYmxlPSEwLGUucHRyPXRoaXMuX3dhc21NZW1CbG9ja3MuZ2V0KHQpLDA9PT1lLnB0ciYmKGUucHRyPXRoaXMuX3Z4bC5fbWFsbG9jKHQpLHRoaXMuX3dhc21NZW1CbG9ja3Muc2V0KHQsZS5wdHIpKSksMCE9PWUucHRyJiYodGhpcy5fdnhsLnN0cmluZ1RvVVRGOChlLnN0cixlLnB0cixlLmJ5dGVDb3VudCksITApfV9nZXRUaW1lQXJncyhlKXtsZXQgdD0tTnVtYmVyLk1BWF9WQUxVRSxzPU51bWJlci5NQVhfVkFMVUUscj0hMTtyZXR1cm4gbnVsbCE9ZSYmKGUuaXNBbGxUaW1lP3I9ITA6KG51bGwhPWUuc3RhcnQmJihyPSEwLHQ9ZS5zdGFydC5nZXRUaW1lKCkvMWUzKSxudWxsIT1lLmVuZCYmKHI9ITAscz1lLmVuZC5nZXRUaW1lKCkvMWUzKSkpLHtzdGFydFRpbWU6dCxlbmRUaW1lOnMsdXNlVGltZTpyfX1fYWRkVm94ZWxMYXllcihlKXtjb25zdCB0PWUubGF5ZXI7bGV0IHM9LTE7Y29uc3Qgcj10LmdldENvbmZpZ3VyYXRpb24oKTtpZihyLmxlbmd0aDwxKXJldHVybi0xO2NvbnN0IGk9e3N0cjpyLGJ5dGVDb3VudDowLHB0cjowLGlzUmV1c2FibGU6ITF9O2lmKCF0aGlzLl9hbGxvY2F0ZUJsb2NrKGkpKXJldHVybi0xO2NvbnN0IGE9dGhpcy5fZ2V0VGltZUFyZ3ModGhpcy52aWV3Py50aW1lRXh0ZW50KSxuPXRoaXMudmlldy5zcGF0aWFsUmVmZXJlbmNlLmlzV0dTODQmJnQuc3BhdGlhbFJlZmVyZW5jZS5pc1dHUzg0PzExMTMxOS40OTA3OTMyNzM1NzoxO2lmKHM9dGhpcy5fdnhsLmFkZF9sYXllcih0LnNlcnZpY2VSb290LGkucHRyLGkuYnl0ZUNvdW50LG4sbixhLnN0YXJ0VGltZSxhLmVuZFRpbWUsYS51c2VUaW1lLHRoaXMuX3RvV2FzbVF1YWxpdHkodGhpcy52aWV3LnF1YWxpdHlQcm9maWxlKSksaS5pc1JldXNhYmxlfHx0aGlzLl92eGwuX2ZyZWUoaS5wdHIpLHM+PTApe3QudGVzdD8uY29uc3RhbnRVcHNjYWxpbmcmJih0aGlzLl9zZXRVcHNjYWxpbmdMaW1pdHMoMCwuMjUsLjI1KSx0aGlzLl9zZXRVcHNjYWxpbmdMaW1pdHMoMSwuNSwuNSksdGhpcy5fc2V0VXBzY2FsaW5nTGltaXRzKDIsLjc1LC43NSkpO2NvbnN0IHI9bmV3IEFib3J0Q29udHJvbGxlcjtpZih0aGlzLl9sYXllcnMuc2V0KHMse2xheWVyVmlldzplLHJlc3BvbnNlczpuZXcgTWFwLG91dHN0YW5kaW5nUmVxdWVzdENvdW50OjAsYWJvcnRDb250cm9sbGVyOnIsbmVlZE1lbW9yeVVzYWdlVXBkYXRlOiExfSksdGhpcy5sYXllclVpZC5wdXNoKGUubGF5ZXIudWlkKSwhdGhpcy5faGFsZkludFRleHR1cmVzQXZhaWxhYmxlfHxoYXMoXCJtYWNcIikpe2NvbnN0IHQ9W107bGV0IHM9XCJcIjtmb3IoY29uc3QgciBvZiBlLmxheWVyLnZhcmlhYmxlcylcIkludDE2XCIhPT1yLnJlbmRlcmluZ0Zvcm1hdC50eXBlJiZcIlVJbnQxNlwiIT09ci5yZW5kZXJpbmdGb3JtYXQudHlwZXx8KHQucHVzaChyLm5hbWUpLHIuaWQ9PT1lLmxheWVyLmN1cnJlbnRWYXJpYWJsZUlkJiYocz1yLm5hbWUpKTtcIlwiIT09cyYmay5lcnJvcihcIiNhZGRWb3hlbExheWVyX2Vycm9yKClcIixlLmxheWVyLGBUaGUgdm94ZWwgbGF5ZXIgJyR7ZS5sYXllci50aXRsZX0nIGNhbm5vdCByZW5kZXIgdGhlIGN1cnJlbnQgdmFyaWFibGUgJyR7c30nIGluIHRoaXMgYnJvd3NlcmApLHQubGVuZ3RoPjAmJmsud2FybihcIiNhZGRWb3hlbExheWVyX3dhcm5pbmcoKVwiLGUubGF5ZXIsYFRoZSB2b3hlbCBsYXllciAnJHtlLmxheWVyLnRpdGxlfScgY2Fubm90IHJlbmRlciB0aGUgdmFyaWFibGVzICcke3QudG9TdHJpbmcoKX0nIGluIHRoaXMgYnJvd3NlcmApfWlmKCF0aGlzLl90ZXh0dXJlRmxvYXRMaW5lYXJBdmFpbGFibGUpe2NvbnN0IHQ9W107bGV0IHM9XCJcIjtmb3IoY29uc3QgciBvZiBlLmxheWVyLnZhcmlhYmxlcylcIkZsb2F0MzJcIj09PXIucmVuZGVyaW5nRm9ybWF0LnR5cGUmJih0LnB1c2goci5uYW1lKSxyLmlkPT09ZS5sYXllci5jdXJyZW50VmFyaWFibGVJZCYmKHM9ci5uYW1lKSk7XCJcIiE9PXMmJmsuZXJyb3IoXCIjYWRkVm94ZWxMYXllcl9lcnJvcigpXCIsZS5sYXllcixgVGhlIHZveGVsIGxheWVyICcke2UubGF5ZXIudGl0bGV9JyBjYW5ub3QgcmVuZGVyIHRoZSBjdXJyZW50IHZhcmlhYmxlICcke3N9JyBpbiB0aGlzIGJyb3dzZXJgKSx0Lmxlbmd0aD4wJiZrLndhcm4oXCIjYWRkVm94ZWxMYXllcl93YXJuaW5nKClcIixlLmxheWVyLGBUaGUgdm94ZWwgbGF5ZXIgJyR7ZS5sYXllci50aXRsZX0nIGNhbm5vdCByZW5kZXIgdGhlIHZhcmlhYmxlcyAnJHt0LnRvU3RyaW5nKCl9JyBpbiB0aGlzIGJyb3dzZXJgKX1yZXR1cm4gaGFzKFwiZXNyaS1tb2JpbGVcIikmJmsud2Fybk9uY2UoXCJNb2JpbGUgc3VwcG9ydCBkaWZmZXJzIGFjcm9zcyBkZXZpY2VzLiBWb3hlbCBsYXllciBtaWdodCBub3QgZGlzcGxheSBhcyBleHBlY3RlZC5cIiksc31yZXR1cm4tMX1wcmVwYXJlUmVuZGVyKGUpe2lmKCF0aGlzLl92eGwpcmV0dXJuO2NvbnN0IHQ9ZS5iaW5kUGFyYW1ldGVycy5jYW1lcmEudmlld0ZvcndhcmQscz1lLmJpbmRQYXJhbWV0ZXJzLmNhbWVyYS5leWU7dGhpcy5fdnhsLnVwZGF0ZV9jYW1lcmFfcG9zX2FuZF9kaXJlY3Rpb24oc1swXSxzWzFdLHNbMl0sdFswXSx0WzFdLHRbMl0pO2NvbnN0IHI9dGhpcy5fdnhsLmN1bGwoKTt0aGlzLl9kYmcoSS5SZXF1ZXN0UmVzcG9uc2UsXCJtaXNzaW5nUmVzb3VyY2VDb3VudD1cIityKSx0aGlzLl9tb3JlVG9Mb2FkPXI+MCx0aGlzLl9oYXZlUHJlcGFyZWRXaXRoQWxsTGF5ZXJzPTA9PT10aGlzLl9uZXdMYXllcnMubGVuZ3RoLHRoaXMuX3VwZGF0ZU1lbW9yeVVzYWdlKCl9cmVuZGVyTm9kZShlKXtpZighdGhpcy5fdnhsKXJldHVybjtmb3IoY29uc3QgcyBvZiB0aGlzLl9uZXdMYXllcnMpe2NvbnN0IGU9dGhpcy5fYWRkVm94ZWxMYXllcihzLmxheWVyVmlldyk7LTE9PT1lP3MucmVqZWN0Q2FsbGJhY2soLTEpOnMucmVzb2x2ZUNhbGxiYWNrKGUpfWlmKHRoaXMuX25ld0xheWVycz1bXSwwPT09dGhpcy5fbGF5ZXJzLnNpemUpcmV0dXJuIHZvaWQgdGhpcy5fZGJnKEkuRXJyb3IsXCJObyB2b3hlbCBsYXllcnMgYnV0IFJlbmRlclBsdWdpbiBpbnN0YW5jZSBpcyBiZWluZyBhc2tlZCB0byByZW5kZXIhXCIpO3RoaXMuX2xhc3RGcmFtZVdhc1N0YXRpb25hcnk9dGhpcy52aWV3LnN0YXRpb25hcnksdGhpcy5fc3luY1JlcXVlc3RzUmVzcG9uc2VzKCksdGhpcy5fYmVmb3JlRHJhdygpLHRoaXMuX3Z4bC5iZWdpbl9jb2xvcl9mcmFtZSghdGhpcy52aWV3Ll9zdGFnZS5yZW5kZXJlci5pc0ZlYXR1cmVFbmFibGVkKFYuSGlnaFJlc29sdXRpb25Wb3hlbCksZS5iaW5kUGFyYW1ldGVycy5saWdodGluZy5tYWluTGlnaHQuZGlyZWN0aW9uWzBdLGUuYmluZFBhcmFtZXRlcnMubGlnaHRpbmcubWFpbkxpZ2h0LmRpcmVjdGlvblsxXSxlLmJpbmRQYXJhbWV0ZXJzLmxpZ2h0aW5nLm1haW5MaWdodC5kaXJlY3Rpb25bMl0pO2NvbnN0IHQ9dGhpcy5fcmVuZGVyVGFyZ2V0VG9SZXN0b3JlLnZpZXdwb3J0O3Qud2lkdGg9PT10aGlzLl92aWV3cG9ydFdpZHRoJiZ0LmhlaWdodD09PXRoaXMuX3ZpZXdwb3J0SGVpZ2h0fHwodGhpcy5fdmlld3BvcnRXaWR0aD10LndpZHRoLHRoaXMuX3ZpZXdwb3J0SGVpZ2h0PXQuaGVpZ2h0LHRoaXMuX3Z4bC5zZXRfdmlld3BvcnQodC53aWR0aCx0LmhlaWdodCksdGhpcy5fbGF5ZXJzLmZvckVhY2goKGU9PntlLm5lZWRNZW1vcnlVc2FnZVVwZGF0ZT0hMH0pKSksMD09PXQueCYmMD09PXQueXx8dGhpcy5fZGJnKEkuRXJyb3IsXCJVbnN1cHBvcnRlZCB2aWV3cG9ydCBwYXJhbWV0ZXJzIGRldGVjdGVkIVwiKSx0aGlzLnVwZGF0ZVdhc21DYW1lcmEoZS5iaW5kUGFyYW1ldGVycy5jYW1lcmEpLHRoaXMuX2NhcHR1cmVGcnVzdHVtJiYodGhpcy5fZnJ1c3R1bS51cGRhdGUoZS5iaW5kUGFyYW1ldGVycy5jYW1lcmEpLHRoaXMuX2RvQ2FwdHVyZUZydXN0dW0oKSksdGhpcy5fdnhsLmRyYXcoKSx0aGlzLl9hZnRlckRyYXcoKSwodGhpcy5fbW9yZVRvTG9hZHx8IXRoaXMuX2hhdmVQcmVwYXJlZFdpdGhBbGxMYXllcnMmJnRoaXMuX2xheWVycy5zaXplPjApJiZ0aGlzLl9yZW5kZXJQbHVnaW5Db250ZXh0LnJlcXVlc3RSZW5kZXIoKX1kZXN0cm95KCl7dGhpcy5fZGJnKEkuTGlmZXRpbWUsXCItLWRlc3Ryb3ktLVwiKSx0aGlzLl9yZW1vdmVSZW5kZXJQbHVnaW4oKSx0aGlzLl92eGwmJih0aGlzLl9sYXllcnMuZm9yRWFjaCgoZT0+e2UuYWJvcnRDb250cm9sbGVyLmFib3J0KCl9KSksdGhpcy5fd2FzbU1lbUJsb2Nrcy5mb3JFYWNoKChlPT57MCE9PWUmJnRoaXMuX3Z4bC5fZnJlZShlKX0pKSx0aGlzLl92eGwudW5pbml0aWFsaXplX3ZveGVsX3dhc20oKSx0aGlzLl92eGw9bnVsbCl9X2luaXRpYWxpemVXYXNtKGUpe3JldHVybiB0aGlzLl92eGw/UHJvbWlzZS5yZXNvbHZlKCk6KHRoaXMuX3Z4bFByb21pc2V8fCh0aGlzLl92eGxQcm9taXNlPXgoZSkudGhlbigoZT0+e2lmKHRoaXMuX3Z4bD1lLHRoaXMuX3Z4bFByb21pc2U9bnVsbCx0aGlzLl9uZXdMYXllcnMubGVuZ3RoPD0wKXJldHVybiB0aGlzLl9kYmcoSS5MaWZldGltZSxcIiBubyB2b3hlbCBsYXllcnMgbGVmdCBhZnRlciBXQVNNIGRvd25sb2FkZWQsIHJlbW92aW5nIFJlbmRlclBsdWdpbiBhbmQgZGVzdHJveWluZ1wiKSx2b2lkIHRoaXMuZGVzdHJveSgpO2NvbnN0IHQ9dGhpcy5fZ2V0VGltZUFyZ3ModGhpcy52aWV3Py50aW1lRXh0ZW50KSxzPXRoaXMuX3Z4bC5hZGRGdW5jdGlvbih0aGlzLl9yZXN0b3JlRnJhbWVidWZmZXIuYmluZCh0aGlzKSxcInZcIikscj10aGlzLl92eGwuYWRkRnVuY3Rpb24odGhpcy5fc2V0QmxlbmRTdGF0ZS5iaW5kKHRoaXMpLFwidmlpaWlcIiksaT10aGlzLl92eGwuYWRkRnVuY3Rpb24odGhpcy5fc2V0RnJvbnRGYWNlLmJpbmQodGhpcyksXCJ2aVwiKSxhPXRoaXMuX3Z4bC5hZGRGdW5jdGlvbih0aGlzLl9zZXRSYXN0ZXJpemVyU3RhdGUuYmluZCh0aGlzKSxcInZpXCIpLG49dGhpcy5fdnhsLmFkZEZ1bmN0aW9uKHRoaXMuX3NldERlcHRoU3RlbmNpbFN0YXRlRnVuY3Rpb24uYmluZCh0aGlzKSxcInZpaWlcIiksbz10aGlzLl92eGwuYWRkRnVuY3Rpb24odGhpcy5fc2V0Vmlld3BvcnQuYmluZCh0aGlzKSxcInZpaWlpXCIpLGw9dGhpcy5fdnhsLmFkZEZ1bmN0aW9uKHRoaXMuX2JpbmRQcmV2aW91c0RlcHRoVG9TbG90LmJpbmQodGhpcyksXCJpaWlcIiksaD10aGlzLl92eGwuYWRkRnVuY3Rpb24odGhpcy5fbW9kaWZ5UmVzb3VyY2VDb3VudC5iaW5kKHRoaXMpLFwidmlpaVwiKSxkPXRoaXMuX2hhbGZJbnRUZXh0dXJlc0F2YWlsYWJsZSYmIWhhcyhcIm1hY1wiKSx1PXRoaXMuX3RleHR1cmVGbG9hdExpbmVhckF2YWlsYWJsZTt0aGlzLl92eGwuaW5pdGlhbGl6ZV92b3hlbF93YXNtKHMscixpLGEsbixvLGwsaCx0LnN0YXJ0VGltZSx0LmVuZFRpbWUsdC51c2VUaW1lLGQsdSksdGhpcy5fcmVuZGVyUGx1Z2luQ29udGV4dCYmdGhpcy5fcmVuZGVyUGx1Z2luQ29udGV4dC5yZXF1ZXN0UmVuZGVyKCl9KSkuY2F0Y2goKCgpPT57Zm9yKGNvbnN0IGUgb2YgdGhpcy5fbmV3TGF5ZXJzKWUucmVqZWN0Q2FsbGJhY2soLTIpO3RoaXMuX2RiZyhJLkVycm9yLFwiIFdBU00gZmFpbGVkIHRvIGRvd25sb2FkLCByZW1vdmluZyBSZW5kZXJQbHVnaW4gYW5kIGRlc3Ryb3lpbmdcIiksdGhpcy5kZXN0cm95KCl9KSkpLHRoaXMuX3Z4bFByb21pc2UpfXBpY2tEZXB0aChlLHQscyl7aWYoIXRoaXMuX3Z4bHx8IXRoaXMuX3JjdHh8fDA9PT10aGlzLl9sYXllcnMuc2l6ZSlyZXR1cm4gbnVsbDtjb25zdCByPXMudmlld3BvcnRbM10tdDtpZihlPDB8fGU+cy52aWV3cG9ydFsyXXx8dDwwfHx0PnMudmlld3BvcnRbM10pcmV0dXJuIHRoaXMuX2RiZyhJLkVycm9yLGBbanNdIHBpY2tEZXB0aDogb3V0T2ZSYW5nZSwgc2NyZWVuWFk9WyR7ZS50b0ZpeGVkKDApfSwgJHtyLnRvRml4ZWQoMCl9XV1gKSxudWxsO3RoaXMuX2JlZm9yZURyYXcoKTtjb25zdCBpPXMudmlld0ZvcndhcmQsYT1zLmV5ZTt0aGlzLl92eGwudXBkYXRlX2NhbWVyYV9wb3NfYW5kX2RpcmVjdGlvbihhWzBdLGFbMV0sYVsyXSxpWzBdLGlbMV0saVsyXSksdGhpcy51cGRhdGVXYXNtQ2FtZXJhKHMpLHRoaXMuX3Z4bC5iZWdpbl9mcmFtZSgpO2NvbnN0IG49dGhpcy5fdnhsLnBpY2tfZGVwdGgoZSxyKTtpZih0aGlzLl9hZnRlckRyYXcoKSxuLnN1Y2Nlc3Mpe3JldHVybiBuLmRpc3RhbmNlVG9DYW1lcmF9cmV0dXJuIG51bGx9cGlja09iamVjdChlLHQscyxyKXtpZighdGhpcy5fdnhsfHwhdGhpcy5fcmN0eHx8MD09PXRoaXMuX2xheWVycy5zaXplKXJldHVybiBudWxsO2NvbnN0IGk9TWF0aC5yb3VuZChlKSxhPU1hdGgucm91bmQodCk7aWYoaTwwfHxpPnMudmlld3BvcnRbMl18fGE8MHx8YT5zLnZpZXdwb3J0WzNdKXJldHVybiB0aGlzLl9kYmcoSS5FcnJvcixgW2pzXSBwaWNrT2JqZWN0OiBvdXRPZlJhbmdlLCBzY3JlZW5YWT1bJHtpfSwgJHthfV0sIHZwPVske3Mudmlld3BvcnQudG9TdHJpbmcoKX1dYCksbnVsbDt0aGlzLl9iZWZvcmVEcmF3KCk7Y29uc3Qgbj1zLnZpZXdGb3J3YXJkLG89cy5leWU7dGhpcy5fdnhsLnVwZGF0ZV9jYW1lcmFfcG9zX2FuZF9kaXJlY3Rpb24ob1swXSxvWzFdLG9bMl0sblswXSxuWzFdLG5bMl0pLHRoaXMudXBkYXRlV2FzbUNhbWVyYShzKSx0aGlzLl92eGwuYmVnaW5fZnJhbWUoKTtsZXQgbD1udWxsO2lmKDA9PT1yLmxlbmd0aClsPXRoaXMuX3Z4bC5waWNrX29iamVjdChpLGEsMCwwKTtlbHNle2NvbnN0IGU9e3N0cjpKU09OLnN0cmluZ2lmeSh7bGF5ZXJJZHM6cn0pLGJ5dGVDb3VudDowLHB0cjowLGlzUmV1c2FibGU6ITF9O3RoaXMuX2FsbG9jYXRlQmxvY2soZSkmJihsPXRoaXMuX3Z4bC5waWNrX29iamVjdChpLGEsZS5wdHIsZS5ieXRlQ291bnQpLGUuaXNSZXVzYWJsZXx8dGhpcy5fdnhsLl9mcmVlKGUucHRyKSl9cmV0dXJuIHRoaXMuX2FmdGVyRHJhdygpLGx9X2JlZm9yZURyYXcoKXt0aGlzLl9yZW5kZXJUYXJnZXRUb1Jlc3RvcmU9e2Zibzp0aGlzLl9yY3R4LmdldEJvdW5kRnJhbWVidWZmZXJPYmplY3QoKSx2aWV3cG9ydDp0aGlzLl9yY3R4LmdldFZpZXdwb3J0KCl9LHRoaXMuX3JjdHguc2V0UG9seWdvbk9mZnNldEZpbGxFbmFibGVkKCExKSx0aGlzLl9yY3R4LnNldFNjaXNzb3JUZXN0RW5hYmxlZCghMSksdGhpcy5fcmN0eC5zZXRDb2xvck1hc2soITAsITAsITAsITApfV9hZnRlckRyYXcoKXt0aGlzLl9yZW5kZXJUYXJnZXRUb1Jlc3RvcmUuZmJvPW51bGwsdGhpcy5fcmN0eC5leHRlcm5hbFRleHR1cmVVbml0VXBkYXRlKHRoaXMuX3Z4bC5nZXRfdGV4dHVyZV91bml0c19ib3VuZF9pbl9mcmFtZSgpLHRoaXMuX3Z4bC5nZXRfYWN0aXZlX3RleHR1cmVfdW5pdCgpKSx0aGlzLl9yY3R4LmV4dGVybmFsVmVydGV4QXJyYXlPYmplY3RVcGRhdGUoKSx0aGlzLl9yY3R4LmV4dGVybmFsVmVydGV4QnVmZmVyVXBkYXRlKCksdGhpcy5fcmN0eC5leHRlcm5hbFByb2dyYW1VcGRhdGUoKX1pbnRlcnNlY3QoZSx0LHMscixpKXtpZighdGhpcy5fdnhsfHwhdGhpcy5fcmN0eHx8MD09PXRoaXMuX2xheWVycy5zaXplfHwhZS5vcHRpb25zLnNlbGVjdGlvbk1vZGV8fGUub3B0aW9ucy5pc0ZpbHRlcmVkKXJldHVybjtpZihpWzBdPDB8fGlbMF0+ZS5jYW1lcmEudmlld3BvcnRbMl18fGlbMV08MHx8aVsxXT5lLmNhbWVyYS52aWV3cG9ydFszXSlyZXR1cm4gdGhpcy5fZGJnKEkuRXJyb3IsYFtqc10gVm94ZWxXYXNtUGVyU2NlbmUuaW50ZXJzZWN0OiBvdXRPZlJhbmdlLCBzY3JlZW5YWT1bJHtpWzBdLnRvRml4ZWQoMCl9LCAke2lbMV0udG9GaXhlZCgwKX1dYCksbnVsbDtjb25zdCBhPVtdO3RoaXMuX2xheWVycy5mb3JFYWNoKCh0PT57ZS5vcHRpb25zLmZpbHRlcmVkTGF5ZXJVaWRzLmluY2x1ZGVzKHQubGF5ZXJWaWV3LmxheWVyLnVpZCkmJmEucHVzaCh0LmxheWVyVmlldy53YXNtTGF5ZXJJZCl9KSk7Y29uc3Qgbj10aGlzLnBpY2tPYmplY3QoaVswXSxpWzFdLGUuY2FtZXJhLGEpO2lmKG51bGw9PW58fC0xPT09bi5sYXllcklkKXJldHVybjtjb25zdCBvPXRoaXMuX2xheWVycy5nZXQobi5sYXllcklkKTtpZihvKXtjb25zdCB0PW8ubGF5ZXJWaWV3LmxheWVyLnVpZCxpPW4uZGlzdGFuY2VUb0NhbWVyYS9oKHMsciksYT1kKCk7YVswXT1uLndvcmxkWCxhWzFdPW4ud29ybGRZLGFbMl09bi53b3JsZFo7Y29uc3QgbD17fTtpZihudWxsIT1uLmNvbnRpbnVvdXNWYWx1ZSYmbnVsbCE9bi5jb250aW51b3VzVmFsdWVVbml0cz9sW1wiVm94ZWwuU2VydmljZVZhbHVlXCJdPWAke24uY29udGludW91c1ZhbHVlLnRvTG9jYWxlU3RyaW5nKCl9ICR7bi5jb250aW51b3VzVmFsdWVVbml0c31gOm51bGwhPW4udW5pcXVlVmFsdWVMYWJlbCYmbnVsbCE9bi51bmlxdWVWYWx1ZT9sW1wiVm94ZWwuU2VydmljZVZhbHVlXCJdPWAke24udW5pcXVlVmFsdWVMYWJlbH0gKCR7bi51bmlxdWVWYWx1ZX0pYDpudWxsIT1uLnVuaXF1ZVZhbHVlJiYobFtcIlZveGVsLlNlcnZpY2VWYWx1ZVwiXT1gJHtuLnVuaXF1ZVZhbHVlfWApLGxbXCJWb3hlbC5TZXJ2aWNlVmFyaWFibGVMYWJlbFwiXT1uLnZhcmlhYmxlTGFiZWwsbFtcIlZveGVsLlBvc2l0aW9uXCJdPW4udm94ZWxTcGFjZVBvc2l0aW9uLG51bGwhPW4uZXBvY2hUaW1lJiZudWxsIT1uLm5hdGl2ZVRpbWUmJm51bGwhPW4ubmF0aXZlVGltZVVuaXRzKXtjb25zdCBlPW5ldyBEYXRlKG4uZXBvY2hUaW1lKTtsW1wiVm94ZWwuU2VydmljZUxvY2FsVGltZVwiXT1lLnRvU3RyaW5nKCksbFtcIlZveGVsLlNlcnZpY2VOYXRpdmVUaW1lXCJdPWAke24ubmF0aXZlVGltZS50b0xvY2FsZVN0cmluZygpfSAke24ubmF0aXZlVGltZVVuaXRzfWB9bnVsbCE9bi5kZXB0aCYmbnVsbCE9bi5kZXB0aFVuaXRzJiYobFtcIlZveGVsLlNlcnZpY2VEZXB0aFwiXT1gJHtuLmRlcHRoLnRvTG9jYWxlU3RyaW5nKCl9ICR7bi5kZXB0aFVuaXRzfWApO2NvbnN0IHU9bi5mYWNlTm9ybWFsO2xbXCJWb3hlbC5Xb3JsZFBvc2l0aW9uXCJdPWBbJHthWzBdfSwgJHthWzFdfSwgJHthWzJdfV1gO2NvbnN0IF89ZT0+e2NvbnN0IHM9bmV3IHYoYSx0LCgoKT0+dGhpcy5fY3JlYXRlVm94ZWxHcmFwaGljKG8ubGF5ZXJWaWV3LmxheWVyLGwpKSk7ZS5zZXQodGhpcy50eXBlLHMsaSx1KX0sYz1lLnJlc3VsdHMsbT1lLm9wdGlvbnMuc3RvcmU9PT1FLkFMTDtpZigobnVsbD09Yy5taW4uZGlzdHx8aTxjLm1pbi5kaXN0KSYmXyhjLm1pbiksKG51bGw9PWMubWF4LmRpc3R8fGk+Yy5tYXguZGlzdCkmJl8oYy5tYXgpLG0pe2NvbnN0IHQ9UihlLnJheSk7Xyh0KSxlLnJlc3VsdHMuYWxsLnB1c2godCl9fX1fY3JlYXRlVm94ZWxHcmFwaGljKGUscyl7cmV0dXJuIG5ldyB0KHtsYXllcjplLHNvdXJjZUxheWVyOmUsYXR0cmlidXRlczpzfSl9X3RvV2FzbVF1YWxpdHkoZSl7c3dpdGNoKGUpe2Nhc2VcImxvd1wiOnJldHVybiAwO2Nhc2VcIm1lZGl1bVwiOnJldHVybiAxO2Nhc2VcImhpZ2hcIjpyZXR1cm4gMn19X3NldFVwc2NhbGluZ0xpbWl0cyhlLHQscyl7dGhpcy5fdnhsJiZ0aGlzLl92eGwuc2V0X3Vwc2NhbGluZ19saW1pdHMoZSx0LHMpfX07ZShbbyh7Y29uc3RydWN0T25seTohMH0pXSxCLnByb3RvdHlwZSxcInZpZXdcIix2b2lkIDApLEI9ZShbbChcImVzcmkubGF5ZXJzLlZveGVsV2FzbVBlclNjZW5lVmlld1wiKV0sQik7Y29uc3QgQT1CO2V4cG9ydHtBIGFzIGRlZmF1bHR9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtnZXRBc3NldFVybCBhcyB0fWZyb21cIi4uLy4uL2Fzc2V0cy5qc1wiO2Z1bmN0aW9uIGUodCl7cmV0dXJuIG5ldyBQcm9taXNlKChlPT5pbXBvcnQoXCIuLi8uLi9jaHVua3MvdnhsTGF5ZXIuanNcIikudGhlbigodD0+dC52KSkudGhlbigoKHtkZWZhdWx0Om59KT0+e2NvbnN0IHI9bih7bG9jYXRlRmlsZTppLHByZWluaXRpYWxpemVkV2ViR0xDb250ZXh0OnQsb25SdW50aW1lSW5pdGlhbGl6ZWQ6KCk9PmUocil9KX0pKSkpLmNhdGNoKCh0PT57dGhyb3cgdH0pKX1mdW5jdGlvbiBpKGUpe3JldHVybiB0KGBlc3JpL2xpYnMvdnhsLyR7ZX1gKX1leHBvcnR7ZSBhcyBsb2FkVm94ZWxXQVNNfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG52YXIgZSxpLHQsbixhLG87IWZ1bmN0aW9uKGUpe2VbZS5CaW5hcnk9MF09XCJCaW5hcnlcIixlW2UuSlNPTj0xXT1cIkpTT05cIn0oZXx8KGU9e30pKSxmdW5jdGlvbihlKXtlW2UuVHJlZUluZGV4PTBdPVwiVHJlZUluZGV4XCIsZVtlLlRyZWVTdGF0cz0xXT1cIlRyZWVTdGF0c1wiLGVbZS5UcmVlRGF0YT0yXT1cIlRyZWVEYXRhXCIsZVtlLkJyaWNrQnVuZGxlcz0zXT1cIkJyaWNrQnVuZGxlc1wiLGVbZS5TZWN0aW9uPTRdPVwiU2VjdGlvblwiLGVbZS5WYXJpYWJsZVN0YXRzPTVdPVwiVmFyaWFibGVTdGF0c1wifShpfHwoaT17fSkpLGZ1bmN0aW9uKGUpe2VbZS5Ob25lPTFdPVwiTm9uZVwiLGVbZS5Gcm9udD0yXT1cIkZyb250XCIsZVtlLkJhY2s9M109XCJCYWNrXCJ9KHR8fCh0PXt9KSksZnVuY3Rpb24oZSl7ZVtlLkxvdz0wXT1cIkxvd1wiLGVbZS5NZWRpdW09MV09XCJNZWRpdW1cIixlW2UuSGlnaD0yXT1cIkhpZ2hcIn0obnx8KG49e30pKSxmdW5jdGlvbihlKXtlW2UuTm9uZT0wXT1cIk5vbmVcIixlW2UuU3RhdGljU2VjdGlvbnM9MV09XCJTdGF0aWNTZWN0aW9uc1wiLGVbZS5TbGljZXM9Ml09XCJTbGljZXNcIixlW2UuRHluYW1pY1NlY3Rpb25zPTRdPVwiRHluYW1pY1NlY3Rpb25zXCIsZVtlLkdob3N0U2hlbGw9OF09XCJHaG9zdFNoZWxsXCIsZVtlLklzb3N1cmZhY2U9MTZdPVwiSXNvc3VyZmFjZVwiLGVbZS5RdWFsaXR5PTMyXT1cIlF1YWxpdHlcIixlW2UuU3VuTG9jYXRpb249NjRdPVwiU3VuTG9jYXRpb25cIixlW2UuU3RhdGljU2VjdGlvblNlbGVjdGlvbj0xMjhdPVwiU3RhdGljU2VjdGlvblNlbGVjdGlvblwiLGVbZS5FeGFnZ2VyYXRpb25BbmRPZmZzZXQ9MjU2XT1cIkV4YWdnZXJhdGlvbkFuZE9mZnNldFwiLGVbZS5DdXJyZW50VGltZT01MTJdPVwiQ3VycmVudFRpbWVcIixlW2UuQ3VycmVudFZhcmlhYmxlPTEwMjRdPVwiQ3VycmVudFZhcmlhYmxlXCIsZVtlLkRlbGV0ZUlzb3N1cmZhY2U9MjA0OF09XCJEZWxldGVJc29zdXJmYWNlXCIsZVtlLkNvbnRhaW5lclZpc2liaWxpdHk9NDA5Nl09XCJDb250YWluZXJWaXNpYmlsaXR5XCIsZVtlLlJlbmRlck1vZGU9ODE5Ml09XCJSZW5kZXJNb2RlXCIsZVtlLk9wdGltaXphdGlvbj0xNjM4NF09XCJPcHRpbWl6YXRpb25cIixlW2UuVmFyaWFibGVTdHlsZXM9MzI3NjhdPVwiVmFyaWFibGVTdHlsZXNcIixlW2UuVm9sdW1lU3R5bGVzPTY1NTM2XT1cIlZvbHVtZVN0eWxlc1wiLGVbZS5BbmFseXNpc1NsaWNlPTEzMTA3Ml09XCJBbmFseXNpc1NsaWNlXCJ9KGF8fChhPXt9KSksZnVuY3Rpb24oZSl7ZVtlLklzb3N1cmZhY2VzPTBdPVwiSXNvc3VyZmFjZXNcIixlW2UuRHluYW1pY1NlY3Rpb25zPTFdPVwiRHluYW1pY1NlY3Rpb25zXCIsZVtlLlN0YXRpY1NlY3Rpb25zPTJdPVwiU3RhdGljU2VjdGlvbnNcIn0ob3x8KG89e30pKTtleHBvcnR7byBhcyBDb250YWluZXJUeXBlLGEgYXMgVXBkYXRlRmxhZ3MsaSBhcyBWb3hlbFJlcXVlc3RUeXBlLHQgYXMgV2FzbUN1bGxNb2RlLG4gYXMgV2FzbVJlbmRlcmluZ1F1YWxpdHksZSBhcyBXYXNtUmVzcG9uc2VUeXBlfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==