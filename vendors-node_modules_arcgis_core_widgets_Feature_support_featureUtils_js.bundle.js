"use strict";
(self["webpackChunksynview"] = self["webpackChunksynview"] || []).push([["vendors-node_modules_arcgis_core_widgets_Feature_support_featureUtils_js"],{

/***/ "./node_modules/@arcgis/core/smartMapping/support/utils.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@arcgis/core/smartMapping/support/utils.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   castIntegerFieldToFloat: () => (/* binding */ M),
/* harmony export */   dateTypes: () => (/* binding */ T),
/* harmony export */   defaultBasemapGroups: () => (/* binding */ u),
/* harmony export */   fieldDelimiter: () => (/* binding */ d),
/* harmony export */   formatAnyDate: () => (/* binding */ N),
/* harmony export */   getBasemapGroup: () => (/* binding */ C),
/* harmony export */   getBasemapId: () => (/* binding */ F),
/* harmony export */   getDateDiffSQL: () => (/* binding */ D),
/* harmony export */   getDateType: () => (/* binding */ S),
/* harmony export */   getFieldsList: () => (/* binding */ $),
/* harmony export */   getNormalizationType: () => (/* binding */ w),
/* harmony export */   isAnyDateField: () => (/* binding */ Z),
/* harmony export */   isIntegerField: () => (/* binding */ b),
/* harmony export */   unitValueInDays: () => (/* binding */ y)
/* harmony export */ });
/* harmony import */ var _intl_date_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../intl/date.js */ "./node_modules/@arcgis/core/intl/date.js");
/* harmony import */ var _layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../layers/support/fieldUtils.js */ "./node_modules/@arcgis/core/layers/support/fieldUtils.js");
/* harmony import */ var _support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../support/arcadeOnDemand.js */ "./node_modules/@arcgis/core/support/arcadeOnDemand.js");
/* harmony import */ var _support_basemapUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../support/basemapUtils.js */ "./node_modules/@arcgis/core/support/basemapUtils.js");
/* harmony import */ var _time_timeZoneUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../time/timeZoneUtils.js */ "./node_modules/@arcgis/core/time/timeZoneUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const d=",",u={light:["streets","gray","topo","terrain","oceans","osm","gray-vector","streets-vector","topo-vector","streets-relief-vector","streets-navigation-vector","topo-3d","navigation-3d","arcgis-light-gray","arcgis-navigation","arcgis-streets","arcgis-streets-relief","arcgis-topographic","arcgis-oceans","osm-standard","osm-standard-relief","osm-streets","osm-streets-relief","osm-light-gray","arcgis-terrain","arcgis-charted-territory","arcgis-community","arcgis-colored-pencil","arcgis-modern-antique","arcgis-midcentury","arcgis-newspaper","arcgis-hillshade-light"],dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector","navigation-dark-3d","arcgis-imagery","arcgis-imagery-standard","arcgis-dark-gray","arcgis-navigation-night","arcgis-streets-night","osm-dark-gray","arcgis-nova","arcgis-hillshade-dark"]},f="percent-of-total",p="field",y={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864e5},h=new Set(["integer","small-integer"]);let v=null;const T=["date","date-only","timestamp-offset"];function Z(t){return (0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_1__.isDateField)(t)||(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_1__.isDateOnlyField)(t)||(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_1__.isTimestampOffsetField)(t)}async function $(t){const{field:e,field2:r,field3:i,normalizationField:n,valueExpression:s}=t;let o=[];if(s){if(!v){const{arcadeUtils:t}=await (0,_support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_2__.loadArcade)();v=t}o=v.extractFieldNames(s)}return e&&o.push(e),r&&o.push(r),i&&o.push(i),n&&o.push(n),o}function w(t){let e=t.normalizationType;return e||(t.normalizationField?e=p:null!=t.normalizationTotal&&(e=f)),e??void 0}function U(t){return String(t).padStart(2,"0")}function k(t,e,r){let i;if("date"===e||"number"===e){"number"===e&&(t=new Date(t));i=`TIMESTAMP'${r?t.getFullYear():t.getUTCFullYear()}-${U((r?t.getMonth():t.getUTCMonth())+1)}-${U(r?t.getDate():t.getUTCDate())} ${U(r?t.getHours():t.getUTCHours())}:${U(r?t.getMinutes():t.getUTCMinutes())}:${U(r?t.getSeconds():t.getUTCSeconds())}'`}else i=t;return i}function D(t,e,r,i){const{hasQueryEngine:n}=t,s=`(${k(r,S(t,r),n)} - ${k(e,S(t,e),n)})`;let o=y[i],a="/";o<1&&(o=1/o,a="*");return{sqlExpression:1===o?s:`(${s} ${a} ${o})`,sqlWhere:null}}function S(t,e){if(e instanceof Date)return"date";if("number"==typeof e)return"number";if("string"==typeof e){const r=t.getField(e);if("<now>"===e.toLowerCase())return;if((0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_1__.isDateField)(r))return"field"}}function C(t,e=u){for(const r in e)if(e[r].includes(t))return r}function F(t,e,r=!0){let i=null;return t&&("string"==typeof t?e.includes(t)&&(i=t):i=(0,_support_basemapUtils_js__WEBPACK_IMPORTED_MODULE_3__.getWellKnownBasemapId)(t)),r?i||"gray":i}function b(t,e){const r=e&&t.getField(e);return!!r&&h.has(r.type)}function M(t){return`cast(${t} as float)`}function N(s,o){const{format:a,timeZoneOptions:c,fieldType:l}=o??{};let d,u;if(c&&({timeZone:d,timeZoneName:u}=(0,_time_timeZoneUtils_js__WEBPACK_IMPORTED_MODULE_4__.getTimeZoneFormattingOptions)(c.layerTimeZone,c.datesInUnknownTimezone,c.viewTimeZone,(0,_intl_date_js__WEBPACK_IMPORTED_MODULE_0__.convertDateFormatToIntlOptions)(a||"short-date-short-time"),l)),"string"==typeof s&&isNaN(Date.parse("time-only"===l?`1970-01-01T${s}Z`:s)))return s;switch(l){case"date-only":{const r=(0,_intl_date_js__WEBPACK_IMPORTED_MODULE_0__.convertDateFormatToIntlOptions)(a||"short-date");return"string"==typeof s?(0,_intl_date_js__WEBPACK_IMPORTED_MODULE_0__.formatDateOnly)(s,{...r}):(0,_intl_date_js__WEBPACK_IMPORTED_MODULE_0__.formatDate)(s,{...r,timeZone:_time_timeZoneUtils_js__WEBPACK_IMPORTED_MODULE_4__.utc})}case"time-only":{const r=(0,_intl_date_js__WEBPACK_IMPORTED_MODULE_0__.convertDateFormatToIntlOptions)(a||"short-time");return"string"==typeof s?(0,_intl_date_js__WEBPACK_IMPORTED_MODULE_0__.formatTimeOnly)(s,r):(0,_intl_date_js__WEBPACK_IMPORTED_MODULE_0__.formatDate)(s,{...r,timeZone:_time_timeZoneUtils_js__WEBPACK_IMPORTED_MODULE_4__.utc})}case"timestamp-offset":{if(!d&&"string"==typeof s&&new Date(s).toISOString()!==s)return s;const i=a||c?(0,_intl_date_js__WEBPACK_IMPORTED_MODULE_0__.convertDateFormatToIntlOptions)(a||"short-date-short-time"):void 0,n=i?{...i,timeZone:d,timeZoneName:u}:void 0;return"string"==typeof s?(0,_intl_date_js__WEBPACK_IMPORTED_MODULE_0__.formatTimestamp)(s,n):(0,_intl_date_js__WEBPACK_IMPORTED_MODULE_0__.formatDate)(s,n)}default:{const r=a||c?(0,_intl_date_js__WEBPACK_IMPORTED_MODULE_0__.convertDateFormatToIntlOptions)(a||"short-date-short-time"):void 0;return (0,_intl_date_js__WEBPACK_IMPORTED_MODULE_0__.formatDate)("string"==typeof s?new Date(s):s,r?{...r,timeZone:d,timeZoneName:u}:void 0)}}}


/***/ }),

/***/ "./node_modules/@arcgis/core/widgets/Feature/support/featureUtils.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@arcgis/core/widgets/Feature/support/featureUtils.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   applyTextFormattingHTML: () => (/* binding */ ae),
/* harmony export */   createfieldInfoMap: () => (/* binding */ re),
/* harmony export */   findRelatedLayer: () => (/* binding */ Te),
/* harmony export */   fixTokens: () => (/* binding */ P),
/* harmony export */   formatAttributes: () => (/* binding */ ue),
/* harmony export */   formatEditInfo: () => (/* binding */ ne),
/* harmony export */   formatValueToFieldInfo: () => (/* binding */ V),
/* harmony export */   getAllFieldInfos: () => (/* binding */ ie),
/* harmony export */   getFieldInfo: () => (/* binding */ Y),
/* harmony export */   getFieldInfoLabel: () => (/* binding */ q),
/* harmony export */   getFixedFieldName: () => (/* binding */ v),
/* harmony export */   getFixedFieldNames: () => (/* binding */ R),
/* harmony export */   getHighlightKeyForFeature: () => (/* binding */ Fe),
/* harmony export */   getSourceLayer: () => (/* binding */ E),
/* harmony export */   graphicCallback: () => (/* binding */ x),
/* harmony export */   htmlEntities: () => (/* binding */ oe),
/* harmony export */   isExpressionField: () => (/* binding */ M),
/* harmony export */   isFeatureSupportedLayer: () => (/* binding */ H),
/* harmony export */   isGraphicForRelatableFeatureSupportedLayer: () => (/* binding */ K),
/* harmony export */   isRelatableFeatureSupportedLayer: () => (/* binding */ J),
/* harmony export */   isRelatableLayer: () => (/* binding */ B),
/* harmony export */   isRelatedField: () => (/* binding */ de),
/* harmony export */   preLayerQueryCallback: () => (/* binding */ he),
/* harmony export */   preRequestCallback: () => (/* binding */ be),
/* harmony export */   querySourceLayer: () => (/* binding */ se),
/* harmony export */   queryUpdatedFeature: () => (/* binding */ ce),
/* harmony export */   shouldOpenInNewTab: () => (/* binding */ C),
/* harmony export */   substituteAttributes: () => (/* binding */ z),
/* harmony export */   substituteFieldsInLinksAndAttributes: () => (/* binding */ D)
/* harmony export */ });
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_string_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/string.js */ "./node_modules/@arcgis/core/core/string.js");
/* harmony import */ var _intl_date_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../intl/date.js */ "./node_modules/@arcgis/core/intl/date.js");
/* harmony import */ var _intl_number_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../intl/number.js */ "./node_modules/@arcgis/core/intl/number.js");
/* harmony import */ var _layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../layers/support/fieldUtils.js */ "./node_modules/@arcgis/core/layers/support/fieldUtils.js");
/* harmony import */ var _layers_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../layers/support/layerUtils.js */ "./node_modules/@arcgis/core/layers/support/layerUtils.js");
/* harmony import */ var _smartMapping_support_utils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../smartMapping/support/utils.js */ "./node_modules/@arcgis/core/smartMapping/support/utils.js");
/* harmony import */ var _support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../support/arcadeOnDemand.js */ "./node_modules/@arcgis/core/support/arcadeOnDemand.js");
/* harmony import */ var _time_timeZoneUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../time/timeZoneUtils.js */ "./node_modules/@arcgis/core/time/timeZoneUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const m="esri.widgets.Feature.support.featureUtils",y=_core_Logger_js__WEBPACK_IMPORTED_MODULE_0__["default"].getLogger(m),g=/href=(""|'')/gi,I=/(\{([^\{\r\n]+)\})/g,h=/\'/g,b=/^\s*expression\//i,T=/(\n)/gi,w=/[\u00A0-\u9999<>\&]/gim,F=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,N=/^(?:mailto:|tel:)/,j="relationships/",Z=(0,_intl_date_js__WEBPACK_IMPORTED_MODULE_2__.convertDateFormatToIntlOptions)("short-date-short-time");function E(e){if(null!=e)return(e.sourceLayer||e.layer)??void 0}async function x(e,t){return"function"==typeof e?e(t):e}function C(e=""){if(e)return!N.test(e.trim().toLowerCase())}function M(e){return!!e&&b.test(e)}function U(e,t){if(!M(t)||!e)return null;const n=t.replace(b,"").toLowerCase();let r=null;return e.some((e=>e.name.toLowerCase()===n&&(r=e,!0))),r}function q(e,t){const n=U(t,e?.fieldName);return n?n.title||null:e?e.label||e.fieldName:null}function A(e,t){const n=t.get(e.toLowerCase());return`{${n?.fieldName||e}}`}function L(e){return e.replaceAll(g,"")}function v(e,t){const n=$(t,e);return n?n.name:e}function R(e,t){return e&&e.map((e=>v(e,t)))}function $(e,t){return e&&"function"==typeof e.getField&&t?e.getField(t)??null:null}function k(e){return`${e}`.trim()}function D({attributes:e,globalAttributes:t,layer:n,text:r,expressionAttributes:i,fieldInfoMap:o}){return r?z({formattedAttributes:t,template:Q(r,{...t,...i,...e},n),fieldInfoMap:o}):""}function z({formattedAttributes:e,template:n,fieldInfoMap:r}){return k(L((0,_core_string_js__WEBPACK_IMPORTED_MODULE_1__.replace)((0,_core_string_js__WEBPACK_IMPORTED_MODULE_1__.replace)(n,(e=>A(e,r))),e)))}function O(e,t,n=!1){const r=t[e];if("string"==typeof r){const i="%27",o=(n?encodeURIComponent(r):r).replaceAll(h,i);t[e]=o}}function G(e,t=!1){const n={...e};return Object.keys(n).forEach((e=>O(e,n,t))),n}function S(e,n,r){const i=(n=k(n))&&"{"!==n[0];return (0,_core_string_js__WEBPACK_IMPORTED_MODULE_1__.replace)(e,G(r,i||!1))}function P(e,t){return e.replaceAll(I,((e,n,r)=>{const i=$(t,r);return i?`{${i.name}}`:n}))}function Q(e,t,n){const r=P(e,n);return r?r.replaceAll(F,((e,n,r)=>S(e,n||r,t))):r}function _(e,t){if("string"==typeof e&&t&&null==t.dateFormat&&(null!=t.places||null!=t.digitSeparator)){const t=Number(e);if(!isNaN(t))return t}return e}function H(e){return null!=e&&"object"==typeof e&&"fieldsIndex"in e&&"geometryType"in e&&"getField"in e&&"load"in e&&"loaded"in e&&"objectIdField"in e&&"spatialReference"in e&&"type"in e&&("feature"===e.type||"scene"===e.type)&&"when"in e}function B(e){return null!=e&&"object"==typeof e&&"createQuery"in e&&"queryFeatureCount"in e&&"queryObjectIds"in e&&"queryRelatedFeatures"in e&&"queryRelatedFeaturesCount"in e&&"relationships"in e}function J(e){return H(e)&&B(e)}function K(e){return!!e&&"object"==typeof e&&"sourceLayer"in e&&J(e.sourceLayer)}function V(e,t){const{fieldInfos:n,fieldName:r,preventPlacesFormatting:l,layer:u,timeZone:s}=t,c=Y(n,r),d=$(u,r);if(c&&!(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__.isRasterPixelValueField)(r)){const t=d?.type,n=c.format?.dateFormat;if("date"===t||"date-only"===t||"time-only"===t||"timestamp-offset"===t||n)return (0,_smartMapping_support_utils_js__WEBPACK_IMPORTED_MODULE_6__.formatAnyDate)(e,{format:n,fieldType:t,timeZoneOptions:{layerTimeZone:u&&"preferredTimeZone"in u?u.preferredTimeZone:null,viewTimeZone:s,datesInUnknownTimezone:!(!u||!("datesInUnknownTimezone"in u))&&!!u.datesInUnknownTimezone}})}const p=c?.format;return"string"==typeof e&&(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__.isRasterPixelValueField)(r)&&p?W(e,p):"string"==typeof(e=_(e,p))||null==e||null==p?ae(e):(0,_intl_number_js__WEBPACK_IMPORTED_MODULE_3__.formatNumber)(e,l?{...(0,_intl_number_js__WEBPACK_IMPORTED_MODULE_3__.convertNumberFormatToIntlOptions)(p),minimumFractionDigits:0,maximumFractionDigits:20}:(0,_intl_number_js__WEBPACK_IMPORTED_MODULE_3__.convertNumberFormatToIntlOptions)(p))}function W(e,t){return e=e.trim(),/\d{2}-\d{2}/.test(e)?e:e.includes(",")?X(e,",",", ",t):e.includes(";")?X(e,";","; ",t):e.includes(" ")?X(e," "," ",t):(0,_intl_number_js__WEBPACK_IMPORTED_MODULE_3__.formatNumber)(Number(e),(0,_intl_number_js__WEBPACK_IMPORTED_MODULE_3__.convertNumberFormatToIntlOptions)(t))}function X(e,t,n,r){return e.trim().split(t).map((e=>(0,_intl_number_js__WEBPACK_IMPORTED_MODULE_3__.formatNumber)(Number(e),(0,_intl_number_js__WEBPACK_IMPORTED_MODULE_3__.convertNumberFormatToIntlOptions)(r)))).join(n)}function Y(e,t){if(e?.length&&t)return e.find((e=>e.fieldName?.toLowerCase()===t.toLowerCase()))}function ee({fieldName:e,graphic:t,layer:n}){if(de(e))return null;if(!n||"function"!=typeof n.getFeatureType)return null;const{typeIdField:r}=n;if(!r||e!==r)return null;const i=n.getFeatureType(t);return i?i.name:null}function te({fieldName:e,value:t,graphic:n,layer:r}){if(de(e))return null;if(!r||"function"!=typeof r.getFieldDomain)return null;const i=n&&r.getFieldDomain(e,{feature:n});return i&&"coded-value"===i.type?i.getName(t):null}function ne(e,t,r,i){const{creatorField:o,creationDateField:a,editorField:l,editDateField:u}=e;if(!t)return;const s=(0,_time_timeZoneUtils_js__WEBPACK_IMPORTED_MODULE_8__.getTimeZoneFormattingOptions)(i&&"preferredTimeZone"in i?i.preferredTimeZone:null,!(!i||!("datesInUnknownTimezone"in i))&&!!i.datesInUnknownTimezone,r,Z,"date"),f={...Z,...s},c=t[u];if("number"==typeof c){const e=t[l];return{type:"edit",date:(0,_intl_date_js__WEBPACK_IMPORTED_MODULE_2__.formatDate)(c,f),user:e}}const d=t[a];if("number"==typeof d){const e=t[o];return{type:"create",date:(0,_intl_date_js__WEBPACK_IMPORTED_MODULE_2__.formatDate)(d,f),user:e}}return null}function re(e,t){const n=new Map;return e?(e.forEach((e=>{const r=v(e.fieldName,t);e.fieldName=r,n.set(r.toLowerCase(),e)})),n):n}function ie(e){const t=[];if(!e)return t;const{fieldInfos:n,content:r}=e;return n&&t.push(...n),r&&Array.isArray(r)?(r.forEach((e=>{if("fields"===e.type){const n=e?.fieldInfos;n&&t.push(...n)}})),t):t}function oe(e){return e.replaceAll(w,(e=>`&#${e.charCodeAt(0)};`))}function ae(e){return"string"==typeof e?e.replaceAll(T,'<br class="esri-text-new-line" />'):e}function le(e){const{value:t,fieldName:n,fieldInfos:r,fieldInfoMap:i,layer:o,graphic:a,timeZone:l}=e;if(null==t)return"";const s=te({fieldName:n,value:t,graphic:a,layer:o});if(s)return s;const d=ee({fieldName:n,graphic:a,layer:o});if(d)return d;if(i.get(n.toLowerCase()))return V(t,{fieldInfos:r||Array.from(i.values()),fieldName:n,layer:o,timeZone:l});const p=o?.fieldsIndex?.get(n);return p&&((0,_smartMapping_support_utils_js__WEBPACK_IMPORTED_MODULE_6__.isAnyDateField)(p)||(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__.isTimeOnlyField)(p))?(0,_smartMapping_support_utils_js__WEBPACK_IMPORTED_MODULE_6__.formatAnyDate)(t,{fieldType:p.type,timeZoneOptions:{layerTimeZone:o&&"preferredTimeZone"in o?o.preferredTimeZone:null,viewTimeZone:l,datesInUnknownTimezone:!(!o||!("datesInUnknownTimezone"in o))&&!!o.datesInUnknownTimezone}}):ae(t)}function ue({fieldInfos:e,attributes:t,layer:n,graphic:r,fieldInfoMap:i,relatedInfos:o,timeZone:a}){const l={};return o?.forEach((t=>ye({attributes:l,relatedInfo:t,fieldInfoMap:i,fieldInfos:e,layer:n,timeZone:a}))),t&&Object.keys(t).forEach((o=>{const u=t[o];l[o]=le({fieldName:o,fieldInfos:e,fieldInfoMap:i,layer:n,value:u,graphic:r,timeZone:a})})),l}async function se(e,t){const{layer:n,graphic:r,outFields:i,objectIds:o,returnGeometry:a,spatialReference:l}=e,u=o[0];if("number"!=typeof u&&"string"!=typeof u){const e="Could not query required fields for the specified feature. The feature's ID is invalid.",t={layer:n,graphic:r,objectId:u,requiredFields:i};return y.warn(e,t),null}if(!(0,_layers_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_5__.getEffectiveLayerCapabilities)(n)?.operations?.supportsQuery){const e="The specified layer cannot be queried. The following fields will not be available.",t={layer:n,graphic:r,requiredFields:i,returnGeometry:a};return y.warn(e,t),null}const f=n.createQuery();f.objectIds=o,f.outFields=i?.length?i:[n.objectIdField],f.returnGeometry=!!a,f.returnZ=!!a,f.returnM=!!a,f.outSpatialReference=l;return(await n.queryFeatures(f,t)).features[0]}async function fe(e){if(!e.expressionInfos?.length)return!1;const t=await (0,_support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_7__.loadArcade)(),{arcadeUtils:{hasGeometryFunctions:n}}=t;return n(e)}async function ce({graphic:e,popupTemplate:t,layer:n,spatialReference:r},i){if(!n||!t)return;if("function"==typeof n.load&&await n.load(i),!e.attributes)return;const o=e.attributes[n.objectIdField];if(null==o)return;const a=[o],u=await t.getRequiredFields(n.fieldsIndex),s=(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__.featureHasFields)(u,e),f=s?[]:u,c=t.returnGeometry||await fe(t);if(s&&!c)return;const d=await se({layer:n,graphic:e,outFields:f,objectIds:a,returnGeometry:c,spatialReference:r},i);d&&(d.geometry&&(e.geometry=d.geometry),d.attributes&&(e.attributes={...e.attributes,...d.attributes}))}function de(e=""){return!!e&&e.includes(j)}function pe(e){return e?`${j}${e.layerId}/${e.fieldName}`:""}function me({attributes:e,graphic:t,relatedInfo:n,fieldInfos:r,fieldInfoMap:i,layer:o,timeZone:a}){e&&t&&n&&Object.keys(t.attributes).forEach((l=>{const u=pe({layerId:n.relation.id.toString(),fieldName:l}),s=t.attributes[l];e[u]=le({fieldName:u,fieldInfos:r,fieldInfoMap:i,layer:o,value:s,graphic:t,timeZone:a})}))}function ye({attributes:e,relatedInfo:t,fieldInfoMap:n,fieldInfos:r,layer:i,timeZone:o}){e&&t&&(t.relatedFeatures?.forEach((a=>me({attributes:e,graphic:a,relatedInfo:t,fieldInfoMap:n,fieldInfos:r,layer:i,timeZone:o}))),t.relatedStatsFeatures?.forEach((a=>me({attributes:e,graphic:a,relatedInfo:t,fieldInfoMap:n,fieldInfos:r,layer:i,timeZone:o}))))}const ge=e=>{if(!e)return!1;const t=e.toUpperCase();return t.includes("CURRENT_TIMESTAMP")||t.includes("CURRENT_DATE")||t.includes("CURRENT_TIME")},Ie=({layer:e,method:t,query:n,definitionExpression:r})=>{if(!e.capabilities?.query?.supportsCacheHint||"attachments"===t)return;const i=null!=n.where?n.where:null,o=null!=n.geometry?n.geometry:null;ge(r)||ge(i)||"extent"===o?.type||"tile"===n.resultType||(n.cacheHint=!0)},he=({query:e,layer:t,method:n})=>{Ie({layer:t,method:n,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression}`})},be=({queryPayload:e,layer:t,method:n})=>{Ie({layer:t,method:n,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression}`})};function Te(e,t,n){return e&&t&&n?we(e.allLayers,t,n)||we(e.allTables,t,n):null}function we(e,t,n){const r="scene"===t.type&&t.associatedLayer?t.associatedLayer.url:t.url;return e.filter(J).find((e=>e!==t&&e.url===r&&e.layerId===n.relatedTableId))}function Fe(e){const t=e.getObjectId();return null!=t?`oid:${t}`:`uid:${e.uid}`}


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfYXJjZ2lzX2NvcmVfd2lkZ2V0c19GZWF0dXJlX3N1cHBvcnRfZmVhdHVyZVV0aWxzX2pzLmJ1bmRsZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDMGQsZUFBZSw4ekJBQTh6QixtQ0FBbUMsMEZBQTBGLHdDQUF3QyxXQUFXLGdEQUFnRCxjQUFjLE9BQU8sMEVBQUMsS0FBSyw4RUFBQyxLQUFLLHFGQUFDLElBQUksb0JBQW9CLE1BQU0saUVBQWlFLEdBQUcsU0FBUyxNQUFNLE9BQU8sTUFBTSxjQUFjLE9BQU8sc0VBQUMsR0FBRyxJQUFJLHlCQUF5Qiw2REFBNkQsY0FBYywwQkFBMEIsaUZBQWlGLGNBQWMsaUNBQWlDLGtCQUFrQixNQUFNLDZCQUE2Qiw4QkFBOEIsZUFBZSxxQ0FBcUMsR0FBRyxzQ0FBc0MsR0FBRyxpQ0FBaUMsRUFBRSxrQ0FBa0MsR0FBRyxzQ0FBc0MsR0FBRyxzQ0FBc0MsR0FBRyxTQUFTLFNBQVMsb0JBQW9CLE1BQU0saUJBQWlCLFNBQVMsZUFBZSxJQUFJLGNBQWMsR0FBRyxpQkFBaUIsbUJBQW1CLE9BQU8sMEJBQTBCLEdBQUcsRUFBRSxHQUFHLEVBQUUsRUFBRSxrQkFBa0IsZ0JBQWdCLGtDQUFrQyxxQ0FBcUMsdUJBQXVCLHNCQUFzQixvQ0FBb0MsR0FBRywwRUFBQyxtQkFBbUIsa0JBQWtCLDhDQUE4QyxxQkFBcUIsV0FBVyxxREFBcUQsK0VBQUMsbUJBQW1CLGdCQUFnQix5QkFBeUIseUJBQXlCLGNBQWMsY0FBYyxHQUFHLFdBQVcsZ0JBQWdCLE1BQU0sdUNBQXVDLE9BQU8sUUFBUSxRQUFRLDBCQUEwQixDQUFDLG9GQUFDLHlEQUF5RCw2RUFBQyxvR0FBb0csRUFBRSxnQkFBZ0IsVUFBVSxpQkFBaUIsUUFBUSw2RUFBQyxrQkFBa0IseUJBQXlCLDZEQUFDLElBQUksS0FBSyxFQUFFLHlEQUFDLElBQUksY0FBYyx1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QUssdUJBQXVCLE1BQU0sOEVBQThFLFVBQVUsMkNBQTJDLHFHQUFxRywrQ0FBK0Msd0JBQXdCLElBQUksNEZBQUMsZ0NBQWdDLGdHQUFnRyxxREFBcUQsd0JBQXdCLHdCQUF3QixpSUFBaUksK0NBQStDLHFCQUFxQix1Q0FBdUMsY0FBYyxzRUFBQyxJQUFJLGFBQWEsd0JBQXdCLEdBQUcsWUFBWSxtQkFBbUIscURBQXFELElBQUksaUJBQWlCLG1FQUFtRSxzQ0FBc0Msa0JBQWtCLHlEQUF5RCwrRUFBQywrQ0FBK0MsZ0JBQWdCLGtCQUFrQiw4RUFBOEUsSUFBSSxxRUFBcUUsZ0NBQWdDLEdBQUcsa0JBQWtCLHlCQUF5QixlQUFlLFlBQVksRUFBRSxFQUFFLFVBQVUsR0FBRyxZQUFZLEtBQUssYUFBYSxvRkFBb0YsRUFBRSxnREFBZ0QsWUFBWSw2Q0FBNkMsb0JBQW9CLFNBQVMsNkVBQTZFLEVBQUUsR0FBRyxhQUFhLDBFQUEwRSxFQUFFLDBDQUEwQyxvRkFBb0YsNENBQTRDLG9GQUFvRixLQUFLLGFBQWEsZUFBZSx3QkFBd0IsK0ZBQStGLE1BQU0sZ0RBQWdELElBQUksdUVBQXVFLHNFQUFzRSwwRUFBMEUsTUFBTSx5QkFBeUIsSUFBSSxJQUFJLGlEQUFpRCx3QkFBd0IsRUFBRSw4QkFBOEIsRUFBRSxFQUFFLE1BQU0sZ0NBQWdDLElBQUksSUFBSSxpREFBaUQsd0JBQXdCLEVBQUUsOEJBQThCLEVBQUUsR0FBRyxtQkFBbUIsNkRBQTZELG1CQUFtQix3RUFBd0UsNkVBQTZFLGVBQWUsd0JBQXdCLHNCQUFzQixFQUFFLFNBQVMsTUFBTSxFQUFpdkIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zeW52aWV3Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9zbWFydE1hcHBpbmcvc3VwcG9ydC91dGlscy5qcyIsIndlYnBhY2s6Ly9zeW52aWV3Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS93aWRnZXRzL0ZlYXR1cmUvc3VwcG9ydC9mZWF0dXJlVXRpbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtjb252ZXJ0RGF0ZUZvcm1hdFRvSW50bE9wdGlvbnMgYXMgdCxmb3JtYXREYXRlIGFzIGUsZm9ybWF0VGltZXN0YW1wIGFzIHIsZm9ybWF0VGltZU9ubHkgYXMgaSxmb3JtYXREYXRlT25seSBhcyBufWZyb21cIi4uLy4uL2ludGwvZGF0ZS5qc1wiO2ltcG9ydHtpc0RhdGVGaWVsZCBhcyBzLGlzRGF0ZU9ubHlGaWVsZCBhcyBvLGlzVGltZXN0YW1wT2Zmc2V0RmllbGQgYXMgYX1mcm9tXCIuLi8uLi9sYXllcnMvc3VwcG9ydC9maWVsZFV0aWxzLmpzXCI7aW1wb3J0e2xvYWRBcmNhZGUgYXMgY31mcm9tXCIuLi8uLi9zdXBwb3J0L2FyY2FkZU9uRGVtYW5kLmpzXCI7aW1wb3J0e2dldFdlbGxLbm93bkJhc2VtYXBJZCBhcyBsfWZyb21cIi4uLy4uL3N1cHBvcnQvYmFzZW1hcFV0aWxzLmpzXCI7aW1wb3J0e2dldFRpbWVab25lRm9ybWF0dGluZ09wdGlvbnMgYXMgZyx1dGMgYXMgbX1mcm9tXCIuLi8uLi90aW1lL3RpbWVab25lVXRpbHMuanNcIjtjb25zdCBkPVwiLFwiLHU9e2xpZ2h0OltcInN0cmVldHNcIixcImdyYXlcIixcInRvcG9cIixcInRlcnJhaW5cIixcIm9jZWFuc1wiLFwib3NtXCIsXCJncmF5LXZlY3RvclwiLFwic3RyZWV0cy12ZWN0b3JcIixcInRvcG8tdmVjdG9yXCIsXCJzdHJlZXRzLXJlbGllZi12ZWN0b3JcIixcInN0cmVldHMtbmF2aWdhdGlvbi12ZWN0b3JcIixcInRvcG8tM2RcIixcIm5hdmlnYXRpb24tM2RcIixcImFyY2dpcy1saWdodC1ncmF5XCIsXCJhcmNnaXMtbmF2aWdhdGlvblwiLFwiYXJjZ2lzLXN0cmVldHNcIixcImFyY2dpcy1zdHJlZXRzLXJlbGllZlwiLFwiYXJjZ2lzLXRvcG9ncmFwaGljXCIsXCJhcmNnaXMtb2NlYW5zXCIsXCJvc20tc3RhbmRhcmRcIixcIm9zbS1zdGFuZGFyZC1yZWxpZWZcIixcIm9zbS1zdHJlZXRzXCIsXCJvc20tc3RyZWV0cy1yZWxpZWZcIixcIm9zbS1saWdodC1ncmF5XCIsXCJhcmNnaXMtdGVycmFpblwiLFwiYXJjZ2lzLWNoYXJ0ZWQtdGVycml0b3J5XCIsXCJhcmNnaXMtY29tbXVuaXR5XCIsXCJhcmNnaXMtY29sb3JlZC1wZW5jaWxcIixcImFyY2dpcy1tb2Rlcm4tYW50aXF1ZVwiLFwiYXJjZ2lzLW1pZGNlbnR1cnlcIixcImFyY2dpcy1uZXdzcGFwZXJcIixcImFyY2dpcy1oaWxsc2hhZGUtbGlnaHRcIl0sZGFyazpbXCJzYXRlbGxpdGVcIixcImh5YnJpZFwiLFwiZGFyay1ncmF5XCIsXCJkYXJrLWdyYXktdmVjdG9yXCIsXCJzdHJlZXRzLW5pZ2h0LXZlY3RvclwiLFwibmF2aWdhdGlvbi1kYXJrLTNkXCIsXCJhcmNnaXMtaW1hZ2VyeVwiLFwiYXJjZ2lzLWltYWdlcnktc3RhbmRhcmRcIixcImFyY2dpcy1kYXJrLWdyYXlcIixcImFyY2dpcy1uYXZpZ2F0aW9uLW5pZ2h0XCIsXCJhcmNnaXMtc3RyZWV0cy1uaWdodFwiLFwib3NtLWRhcmstZ3JheVwiLFwiYXJjZ2lzLW5vdmFcIixcImFyY2dpcy1oaWxsc2hhZGUtZGFya1wiXX0sZj1cInBlcmNlbnQtb2YtdG90YWxcIixwPVwiZmllbGRcIix5PXt5ZWFyczozNjUsbW9udGhzOjMwLGRheXM6MSxob3VyczoxLzI0LG1pbnV0ZXM6MS8xNDQwLHNlY29uZHM6MS84NjQwMCxtaWxsaXNlY29uZHM6MS84NjRlNX0saD1uZXcgU2V0KFtcImludGVnZXJcIixcInNtYWxsLWludGVnZXJcIl0pO2xldCB2PW51bGw7Y29uc3QgVD1bXCJkYXRlXCIsXCJkYXRlLW9ubHlcIixcInRpbWVzdGFtcC1vZmZzZXRcIl07ZnVuY3Rpb24gWih0KXtyZXR1cm4gcyh0KXx8byh0KXx8YSh0KX1hc3luYyBmdW5jdGlvbiAkKHQpe2NvbnN0e2ZpZWxkOmUsZmllbGQyOnIsZmllbGQzOmksbm9ybWFsaXphdGlvbkZpZWxkOm4sdmFsdWVFeHByZXNzaW9uOnN9PXQ7bGV0IG89W107aWYocyl7aWYoIXYpe2NvbnN0e2FyY2FkZVV0aWxzOnR9PWF3YWl0IGMoKTt2PXR9bz12LmV4dHJhY3RGaWVsZE5hbWVzKHMpfXJldHVybiBlJiZvLnB1c2goZSksciYmby5wdXNoKHIpLGkmJm8ucHVzaChpKSxuJiZvLnB1c2gobiksb31mdW5jdGlvbiB3KHQpe2xldCBlPXQubm9ybWFsaXphdGlvblR5cGU7cmV0dXJuIGV8fCh0Lm5vcm1hbGl6YXRpb25GaWVsZD9lPXA6bnVsbCE9dC5ub3JtYWxpemF0aW9uVG90YWwmJihlPWYpKSxlPz92b2lkIDB9ZnVuY3Rpb24gVSh0KXtyZXR1cm4gU3RyaW5nKHQpLnBhZFN0YXJ0KDIsXCIwXCIpfWZ1bmN0aW9uIGsodCxlLHIpe2xldCBpO2lmKFwiZGF0ZVwiPT09ZXx8XCJudW1iZXJcIj09PWUpe1wibnVtYmVyXCI9PT1lJiYodD1uZXcgRGF0ZSh0KSk7aT1gVElNRVNUQU1QJyR7cj90LmdldEZ1bGxZZWFyKCk6dC5nZXRVVENGdWxsWWVhcigpfS0ke1UoKHI/dC5nZXRNb250aCgpOnQuZ2V0VVRDTW9udGgoKSkrMSl9LSR7VShyP3QuZ2V0RGF0ZSgpOnQuZ2V0VVRDRGF0ZSgpKX0gJHtVKHI/dC5nZXRIb3VycygpOnQuZ2V0VVRDSG91cnMoKSl9OiR7VShyP3QuZ2V0TWludXRlcygpOnQuZ2V0VVRDTWludXRlcygpKX06JHtVKHI/dC5nZXRTZWNvbmRzKCk6dC5nZXRVVENTZWNvbmRzKCkpfSdgfWVsc2UgaT10O3JldHVybiBpfWZ1bmN0aW9uIEQodCxlLHIsaSl7Y29uc3R7aGFzUXVlcnlFbmdpbmU6bn09dCxzPWAoJHtrKHIsUyh0LHIpLG4pfSAtICR7ayhlLFModCxlKSxuKX0pYDtsZXQgbz15W2ldLGE9XCIvXCI7bzwxJiYobz0xL28sYT1cIipcIik7cmV0dXJue3NxbEV4cHJlc3Npb246MT09PW8/czpgKCR7c30gJHthfSAke299KWAsc3FsV2hlcmU6bnVsbH19ZnVuY3Rpb24gUyh0LGUpe2lmKGUgaW5zdGFuY2VvZiBEYXRlKXJldHVyblwiZGF0ZVwiO2lmKFwibnVtYmVyXCI9PXR5cGVvZiBlKXJldHVyblwibnVtYmVyXCI7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUpe2NvbnN0IHI9dC5nZXRGaWVsZChlKTtpZihcIjxub3c+XCI9PT1lLnRvTG93ZXJDYXNlKCkpcmV0dXJuO2lmKHMocikpcmV0dXJuXCJmaWVsZFwifX1mdW5jdGlvbiBDKHQsZT11KXtmb3IoY29uc3QgciBpbiBlKWlmKGVbcl0uaW5jbHVkZXModCkpcmV0dXJuIHJ9ZnVuY3Rpb24gRih0LGUscj0hMCl7bGV0IGk9bnVsbDtyZXR1cm4gdCYmKFwic3RyaW5nXCI9PXR5cGVvZiB0P2UuaW5jbHVkZXModCkmJihpPXQpOmk9bCh0KSkscj9pfHxcImdyYXlcIjppfWZ1bmN0aW9uIGIodCxlKXtjb25zdCByPWUmJnQuZ2V0RmllbGQoZSk7cmV0dXJuISFyJiZoLmhhcyhyLnR5cGUpfWZ1bmN0aW9uIE0odCl7cmV0dXJuYGNhc3QoJHt0fSBhcyBmbG9hdClgfWZ1bmN0aW9uIE4ocyxvKXtjb25zdHtmb3JtYXQ6YSx0aW1lWm9uZU9wdGlvbnM6YyxmaWVsZFR5cGU6bH09bz8/e307bGV0IGQsdTtpZihjJiYoe3RpbWVab25lOmQsdGltZVpvbmVOYW1lOnV9PWcoYy5sYXllclRpbWVab25lLGMuZGF0ZXNJblVua25vd25UaW1lem9uZSxjLnZpZXdUaW1lWm9uZSx0KGF8fFwic2hvcnQtZGF0ZS1zaG9ydC10aW1lXCIpLGwpKSxcInN0cmluZ1wiPT10eXBlb2YgcyYmaXNOYU4oRGF0ZS5wYXJzZShcInRpbWUtb25seVwiPT09bD9gMTk3MC0wMS0wMVQke3N9WmA6cykpKXJldHVybiBzO3N3aXRjaChsKXtjYXNlXCJkYXRlLW9ubHlcIjp7Y29uc3Qgcj10KGF8fFwic2hvcnQtZGF0ZVwiKTtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2Ygcz9uKHMsey4uLnJ9KTplKHMsey4uLnIsdGltZVpvbmU6bX0pfWNhc2VcInRpbWUtb25seVwiOntjb25zdCByPXQoYXx8XCJzaG9ydC10aW1lXCIpO3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBzP2kocyxyKTplKHMsey4uLnIsdGltZVpvbmU6bX0pfWNhc2VcInRpbWVzdGFtcC1vZmZzZXRcIjp7aWYoIWQmJlwic3RyaW5nXCI9PXR5cGVvZiBzJiZuZXcgRGF0ZShzKS50b0lTT1N0cmluZygpIT09cylyZXR1cm4gcztjb25zdCBpPWF8fGM/dChhfHxcInNob3J0LWRhdGUtc2hvcnQtdGltZVwiKTp2b2lkIDAsbj1pP3suLi5pLHRpbWVab25lOmQsdGltZVpvbmVOYW1lOnV9OnZvaWQgMDtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2Ygcz9yKHMsbik6ZShzLG4pfWRlZmF1bHQ6e2NvbnN0IHI9YXx8Yz90KGF8fFwic2hvcnQtZGF0ZS1zaG9ydC10aW1lXCIpOnZvaWQgMDtyZXR1cm4gZShcInN0cmluZ1wiPT10eXBlb2Ygcz9uZXcgRGF0ZShzKTpzLHI/ey4uLnIsdGltZVpvbmU6ZCx0aW1lWm9uZU5hbWU6dX06dm9pZCAwKX19fWV4cG9ydHtNIGFzIGNhc3RJbnRlZ2VyRmllbGRUb0Zsb2F0LFQgYXMgZGF0ZVR5cGVzLHUgYXMgZGVmYXVsdEJhc2VtYXBHcm91cHMsZCBhcyBmaWVsZERlbGltaXRlcixOIGFzIGZvcm1hdEFueURhdGUsQyBhcyBnZXRCYXNlbWFwR3JvdXAsRiBhcyBnZXRCYXNlbWFwSWQsRCBhcyBnZXREYXRlRGlmZlNRTCxTIGFzIGdldERhdGVUeXBlLCQgYXMgZ2V0RmllbGRzTGlzdCx3IGFzIGdldE5vcm1hbGl6YXRpb25UeXBlLFogYXMgaXNBbnlEYXRlRmllbGQsYiBhcyBpc0ludGVnZXJGaWVsZCx5IGFzIHVuaXRWYWx1ZUluRGF5c307XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0IGUgZnJvbVwiLi4vLi4vLi4vY29yZS9Mb2dnZXIuanNcIjtpbXBvcnR7cmVwbGFjZSBhcyB0fWZyb21cIi4uLy4uLy4uL2NvcmUvc3RyaW5nLmpzXCI7aW1wb3J0e2Zvcm1hdERhdGUgYXMgbixjb252ZXJ0RGF0ZUZvcm1hdFRvSW50bE9wdGlvbnMgYXMgcn1mcm9tXCIuLi8uLi8uLi9pbnRsL2RhdGUuanNcIjtpbXBvcnR7Zm9ybWF0TnVtYmVyIGFzIGksY29udmVydE51bWJlckZvcm1hdFRvSW50bE9wdGlvbnMgYXMgb31mcm9tXCIuLi8uLi8uLi9pbnRsL251bWJlci5qc1wiO2ltcG9ydHtpc1Jhc3RlclBpeGVsVmFsdWVGaWVsZCBhcyBhLGZlYXR1cmVIYXNGaWVsZHMgYXMgbCxpc1RpbWVPbmx5RmllbGQgYXMgdX1mcm9tXCIuLi8uLi8uLi9sYXllcnMvc3VwcG9ydC9maWVsZFV0aWxzLmpzXCI7aW1wb3J0e2dldEVmZmVjdGl2ZUxheWVyQ2FwYWJpbGl0aWVzIGFzIHN9ZnJvbVwiLi4vLi4vLi4vbGF5ZXJzL3N1cHBvcnQvbGF5ZXJVdGlscy5qc1wiO2ltcG9ydHtmb3JtYXRBbnlEYXRlIGFzIGYsaXNBbnlEYXRlRmllbGQgYXMgY31mcm9tXCIuLi8uLi8uLi9zbWFydE1hcHBpbmcvc3VwcG9ydC91dGlscy5qc1wiO2ltcG9ydHtsb2FkQXJjYWRlIGFzIGR9ZnJvbVwiLi4vLi4vLi4vc3VwcG9ydC9hcmNhZGVPbkRlbWFuZC5qc1wiO2ltcG9ydHtnZXRUaW1lWm9uZUZvcm1hdHRpbmdPcHRpb25zIGFzIHB9ZnJvbVwiLi4vLi4vLi4vdGltZS90aW1lWm9uZVV0aWxzLmpzXCI7Y29uc3QgbT1cImVzcmkud2lkZ2V0cy5GZWF0dXJlLnN1cHBvcnQuZmVhdHVyZVV0aWxzXCIseT1lLmdldExvZ2dlcihtKSxnPS9ocmVmPShcIlwifCcnKS9naSxJPS8oXFx7KFteXFx7XFxyXFxuXSspXFx9KS9nLGg9L1xcJy9nLGI9L15cXHMqZXhwcmVzc2lvblxcLy9pLFQ9LyhcXG4pL2dpLHc9L1tcXHUwMEEwLVxcdTk5OTk8PlxcJl0vZ2ltLEY9L2hyZWZcXHMqPVxccyooPzpcXFwiKFteXFxcIl0rKVxcXCJ8XFwnKFteXFwnXSspXFwnKS9naSxOPS9eKD86bWFpbHRvOnx0ZWw6KS8saj1cInJlbGF0aW9uc2hpcHMvXCIsWj1yKFwic2hvcnQtZGF0ZS1zaG9ydC10aW1lXCIpO2Z1bmN0aW9uIEUoZSl7aWYobnVsbCE9ZSlyZXR1cm4oZS5zb3VyY2VMYXllcnx8ZS5sYXllcik/P3ZvaWQgMH1hc3luYyBmdW5jdGlvbiB4KGUsdCl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgZT9lKHQpOmV9ZnVuY3Rpb24gQyhlPVwiXCIpe2lmKGUpcmV0dXJuIU4udGVzdChlLnRyaW0oKS50b0xvd2VyQ2FzZSgpKX1mdW5jdGlvbiBNKGUpe3JldHVybiEhZSYmYi50ZXN0KGUpfWZ1bmN0aW9uIFUoZSx0KXtpZighTSh0KXx8IWUpcmV0dXJuIG51bGw7Y29uc3Qgbj10LnJlcGxhY2UoYixcIlwiKS50b0xvd2VyQ2FzZSgpO2xldCByPW51bGw7cmV0dXJuIGUuc29tZSgoZT0+ZS5uYW1lLnRvTG93ZXJDYXNlKCk9PT1uJiYocj1lLCEwKSkpLHJ9ZnVuY3Rpb24gcShlLHQpe2NvbnN0IG49VSh0LGU/LmZpZWxkTmFtZSk7cmV0dXJuIG4/bi50aXRsZXx8bnVsbDplP2UubGFiZWx8fGUuZmllbGROYW1lOm51bGx9ZnVuY3Rpb24gQShlLHQpe2NvbnN0IG49dC5nZXQoZS50b0xvd2VyQ2FzZSgpKTtyZXR1cm5geyR7bj8uZmllbGROYW1lfHxlfX1gfWZ1bmN0aW9uIEwoZSl7cmV0dXJuIGUucmVwbGFjZUFsbChnLFwiXCIpfWZ1bmN0aW9uIHYoZSx0KXtjb25zdCBuPSQodCxlKTtyZXR1cm4gbj9uLm5hbWU6ZX1mdW5jdGlvbiBSKGUsdCl7cmV0dXJuIGUmJmUubWFwKChlPT52KGUsdCkpKX1mdW5jdGlvbiAkKGUsdCl7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGUuZ2V0RmllbGQmJnQ/ZS5nZXRGaWVsZCh0KT8/bnVsbDpudWxsfWZ1bmN0aW9uIGsoZSl7cmV0dXJuYCR7ZX1gLnRyaW0oKX1mdW5jdGlvbiBEKHthdHRyaWJ1dGVzOmUsZ2xvYmFsQXR0cmlidXRlczp0LGxheWVyOm4sdGV4dDpyLGV4cHJlc3Npb25BdHRyaWJ1dGVzOmksZmllbGRJbmZvTWFwOm99KXtyZXR1cm4gcj96KHtmb3JtYXR0ZWRBdHRyaWJ1dGVzOnQsdGVtcGxhdGU6UShyLHsuLi50LC4uLmksLi4uZX0sbiksZmllbGRJbmZvTWFwOm99KTpcIlwifWZ1bmN0aW9uIHooe2Zvcm1hdHRlZEF0dHJpYnV0ZXM6ZSx0ZW1wbGF0ZTpuLGZpZWxkSW5mb01hcDpyfSl7cmV0dXJuIGsoTCh0KHQobiwoZT0+QShlLHIpKSksZSkpKX1mdW5jdGlvbiBPKGUsdCxuPSExKXtjb25zdCByPXRbZV07aWYoXCJzdHJpbmdcIj09dHlwZW9mIHIpe2NvbnN0IGk9XCIlMjdcIixvPShuP2VuY29kZVVSSUNvbXBvbmVudChyKTpyKS5yZXBsYWNlQWxsKGgsaSk7dFtlXT1vfX1mdW5jdGlvbiBHKGUsdD0hMSl7Y29uc3Qgbj17Li4uZX07cmV0dXJuIE9iamVjdC5rZXlzKG4pLmZvckVhY2goKGU9Pk8oZSxuLHQpKSksbn1mdW5jdGlvbiBTKGUsbixyKXtjb25zdCBpPShuPWsobikpJiZcIntcIiE9PW5bMF07cmV0dXJuIHQoZSxHKHIsaXx8ITEpKX1mdW5jdGlvbiBQKGUsdCl7cmV0dXJuIGUucmVwbGFjZUFsbChJLCgoZSxuLHIpPT57Y29uc3QgaT0kKHQscik7cmV0dXJuIGk/YHske2kubmFtZX19YDpufSkpfWZ1bmN0aW9uIFEoZSx0LG4pe2NvbnN0IHI9UChlLG4pO3JldHVybiByP3IucmVwbGFjZUFsbChGLCgoZSxuLHIpPT5TKGUsbnx8cix0KSkpOnJ9ZnVuY3Rpb24gXyhlLHQpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlJiZ0JiZudWxsPT10LmRhdGVGb3JtYXQmJihudWxsIT10LnBsYWNlc3x8bnVsbCE9dC5kaWdpdFNlcGFyYXRvcikpe2NvbnN0IHQ9TnVtYmVyKGUpO2lmKCFpc05hTih0KSlyZXR1cm4gdH1yZXR1cm4gZX1mdW5jdGlvbiBIKGUpe3JldHVybiBudWxsIT1lJiZcIm9iamVjdFwiPT10eXBlb2YgZSYmXCJmaWVsZHNJbmRleFwiaW4gZSYmXCJnZW9tZXRyeVR5cGVcImluIGUmJlwiZ2V0RmllbGRcImluIGUmJlwibG9hZFwiaW4gZSYmXCJsb2FkZWRcImluIGUmJlwib2JqZWN0SWRGaWVsZFwiaW4gZSYmXCJzcGF0aWFsUmVmZXJlbmNlXCJpbiBlJiZcInR5cGVcImluIGUmJihcImZlYXR1cmVcIj09PWUudHlwZXx8XCJzY2VuZVwiPT09ZS50eXBlKSYmXCJ3aGVuXCJpbiBlfWZ1bmN0aW9uIEIoZSl7cmV0dXJuIG51bGwhPWUmJlwib2JqZWN0XCI9PXR5cGVvZiBlJiZcImNyZWF0ZVF1ZXJ5XCJpbiBlJiZcInF1ZXJ5RmVhdHVyZUNvdW50XCJpbiBlJiZcInF1ZXJ5T2JqZWN0SWRzXCJpbiBlJiZcInF1ZXJ5UmVsYXRlZEZlYXR1cmVzXCJpbiBlJiZcInF1ZXJ5UmVsYXRlZEZlYXR1cmVzQ291bnRcImluIGUmJlwicmVsYXRpb25zaGlwc1wiaW4gZX1mdW5jdGlvbiBKKGUpe3JldHVybiBIKGUpJiZCKGUpfWZ1bmN0aW9uIEsoZSl7cmV0dXJuISFlJiZcIm9iamVjdFwiPT10eXBlb2YgZSYmXCJzb3VyY2VMYXllclwiaW4gZSYmSihlLnNvdXJjZUxheWVyKX1mdW5jdGlvbiBWKGUsdCl7Y29uc3R7ZmllbGRJbmZvczpuLGZpZWxkTmFtZTpyLHByZXZlbnRQbGFjZXNGb3JtYXR0aW5nOmwsbGF5ZXI6dSx0aW1lWm9uZTpzfT10LGM9WShuLHIpLGQ9JCh1LHIpO2lmKGMmJiFhKHIpKXtjb25zdCB0PWQ/LnR5cGUsbj1jLmZvcm1hdD8uZGF0ZUZvcm1hdDtpZihcImRhdGVcIj09PXR8fFwiZGF0ZS1vbmx5XCI9PT10fHxcInRpbWUtb25seVwiPT09dHx8XCJ0aW1lc3RhbXAtb2Zmc2V0XCI9PT10fHxuKXJldHVybiBmKGUse2Zvcm1hdDpuLGZpZWxkVHlwZTp0LHRpbWVab25lT3B0aW9uczp7bGF5ZXJUaW1lWm9uZTp1JiZcInByZWZlcnJlZFRpbWVab25lXCJpbiB1P3UucHJlZmVycmVkVGltZVpvbmU6bnVsbCx2aWV3VGltZVpvbmU6cyxkYXRlc0luVW5rbm93blRpbWV6b25lOiEoIXV8fCEoXCJkYXRlc0luVW5rbm93blRpbWV6b25lXCJpbiB1KSkmJiEhdS5kYXRlc0luVW5rbm93blRpbWV6b25lfX0pfWNvbnN0IHA9Yz8uZm9ybWF0O3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBlJiZhKHIpJiZwP1coZSxwKTpcInN0cmluZ1wiPT10eXBlb2YoZT1fKGUscCkpfHxudWxsPT1lfHxudWxsPT1wP2FlKGUpOmkoZSxsP3suLi5vKHApLG1pbmltdW1GcmFjdGlvbkRpZ2l0czowLG1heGltdW1GcmFjdGlvbkRpZ2l0czoyMH06byhwKSl9ZnVuY3Rpb24gVyhlLHQpe3JldHVybiBlPWUudHJpbSgpLC9cXGR7Mn0tXFxkezJ9Ly50ZXN0KGUpP2U6ZS5pbmNsdWRlcyhcIixcIik/WChlLFwiLFwiLFwiLCBcIix0KTplLmluY2x1ZGVzKFwiO1wiKT9YKGUsXCI7XCIsXCI7IFwiLHQpOmUuaW5jbHVkZXMoXCIgXCIpP1goZSxcIiBcIixcIiBcIix0KTppKE51bWJlcihlKSxvKHQpKX1mdW5jdGlvbiBYKGUsdCxuLHIpe3JldHVybiBlLnRyaW0oKS5zcGxpdCh0KS5tYXAoKGU9PmkoTnVtYmVyKGUpLG8ocikpKSkuam9pbihuKX1mdW5jdGlvbiBZKGUsdCl7aWYoZT8ubGVuZ3RoJiZ0KXJldHVybiBlLmZpbmQoKGU9PmUuZmllbGROYW1lPy50b0xvd2VyQ2FzZSgpPT09dC50b0xvd2VyQ2FzZSgpKSl9ZnVuY3Rpb24gZWUoe2ZpZWxkTmFtZTplLGdyYXBoaWM6dCxsYXllcjpufSl7aWYoZGUoZSkpcmV0dXJuIG51bGw7aWYoIW58fFwiZnVuY3Rpb25cIiE9dHlwZW9mIG4uZ2V0RmVhdHVyZVR5cGUpcmV0dXJuIG51bGw7Y29uc3R7dHlwZUlkRmllbGQ6cn09bjtpZighcnx8ZSE9PXIpcmV0dXJuIG51bGw7Y29uc3QgaT1uLmdldEZlYXR1cmVUeXBlKHQpO3JldHVybiBpP2kubmFtZTpudWxsfWZ1bmN0aW9uIHRlKHtmaWVsZE5hbWU6ZSx2YWx1ZTp0LGdyYXBoaWM6bixsYXllcjpyfSl7aWYoZGUoZSkpcmV0dXJuIG51bGw7aWYoIXJ8fFwiZnVuY3Rpb25cIiE9dHlwZW9mIHIuZ2V0RmllbGREb21haW4pcmV0dXJuIG51bGw7Y29uc3QgaT1uJiZyLmdldEZpZWxkRG9tYWluKGUse2ZlYXR1cmU6bn0pO3JldHVybiBpJiZcImNvZGVkLXZhbHVlXCI9PT1pLnR5cGU/aS5nZXROYW1lKHQpOm51bGx9ZnVuY3Rpb24gbmUoZSx0LHIsaSl7Y29uc3R7Y3JlYXRvckZpZWxkOm8sY3JlYXRpb25EYXRlRmllbGQ6YSxlZGl0b3JGaWVsZDpsLGVkaXREYXRlRmllbGQ6dX09ZTtpZighdClyZXR1cm47Y29uc3Qgcz1wKGkmJlwicHJlZmVycmVkVGltZVpvbmVcImluIGk/aS5wcmVmZXJyZWRUaW1lWm9uZTpudWxsLCEoIWl8fCEoXCJkYXRlc0luVW5rbm93blRpbWV6b25lXCJpbiBpKSkmJiEhaS5kYXRlc0luVW5rbm93blRpbWV6b25lLHIsWixcImRhdGVcIiksZj17Li4uWiwuLi5zfSxjPXRbdV07aWYoXCJudW1iZXJcIj09dHlwZW9mIGMpe2NvbnN0IGU9dFtsXTtyZXR1cm57dHlwZTpcImVkaXRcIixkYXRlOm4oYyxmKSx1c2VyOmV9fWNvbnN0IGQ9dFthXTtpZihcIm51bWJlclwiPT10eXBlb2YgZCl7Y29uc3QgZT10W29dO3JldHVybnt0eXBlOlwiY3JlYXRlXCIsZGF0ZTpuKGQsZiksdXNlcjplfX1yZXR1cm4gbnVsbH1mdW5jdGlvbiByZShlLHQpe2NvbnN0IG49bmV3IE1hcDtyZXR1cm4gZT8oZS5mb3JFYWNoKChlPT57Y29uc3Qgcj12KGUuZmllbGROYW1lLHQpO2UuZmllbGROYW1lPXIsbi5zZXQoci50b0xvd2VyQ2FzZSgpLGUpfSkpLG4pOm59ZnVuY3Rpb24gaWUoZSl7Y29uc3QgdD1bXTtpZighZSlyZXR1cm4gdDtjb25zdHtmaWVsZEluZm9zOm4sY29udGVudDpyfT1lO3JldHVybiBuJiZ0LnB1c2goLi4ubiksciYmQXJyYXkuaXNBcnJheShyKT8oci5mb3JFYWNoKChlPT57aWYoXCJmaWVsZHNcIj09PWUudHlwZSl7Y29uc3Qgbj1lPy5maWVsZEluZm9zO24mJnQucHVzaCguLi5uKX19KSksdCk6dH1mdW5jdGlvbiBvZShlKXtyZXR1cm4gZS5yZXBsYWNlQWxsKHcsKGU9PmAmIyR7ZS5jaGFyQ29kZUF0KDApfTtgKSl9ZnVuY3Rpb24gYWUoZSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGU/ZS5yZXBsYWNlQWxsKFQsJzxiciBjbGFzcz1cImVzcmktdGV4dC1uZXctbGluZVwiIC8+Jyk6ZX1mdW5jdGlvbiBsZShlKXtjb25zdHt2YWx1ZTp0LGZpZWxkTmFtZTpuLGZpZWxkSW5mb3M6cixmaWVsZEluZm9NYXA6aSxsYXllcjpvLGdyYXBoaWM6YSx0aW1lWm9uZTpsfT1lO2lmKG51bGw9PXQpcmV0dXJuXCJcIjtjb25zdCBzPXRlKHtmaWVsZE5hbWU6bix2YWx1ZTp0LGdyYXBoaWM6YSxsYXllcjpvfSk7aWYocylyZXR1cm4gcztjb25zdCBkPWVlKHtmaWVsZE5hbWU6bixncmFwaGljOmEsbGF5ZXI6b30pO2lmKGQpcmV0dXJuIGQ7aWYoaS5nZXQobi50b0xvd2VyQ2FzZSgpKSlyZXR1cm4gVih0LHtmaWVsZEluZm9zOnJ8fEFycmF5LmZyb20oaS52YWx1ZXMoKSksZmllbGROYW1lOm4sbGF5ZXI6byx0aW1lWm9uZTpsfSk7Y29uc3QgcD1vPy5maWVsZHNJbmRleD8uZ2V0KG4pO3JldHVybiBwJiYoYyhwKXx8dShwKSk/Zih0LHtmaWVsZFR5cGU6cC50eXBlLHRpbWVab25lT3B0aW9uczp7bGF5ZXJUaW1lWm9uZTpvJiZcInByZWZlcnJlZFRpbWVab25lXCJpbiBvP28ucHJlZmVycmVkVGltZVpvbmU6bnVsbCx2aWV3VGltZVpvbmU6bCxkYXRlc0luVW5rbm93blRpbWV6b25lOiEoIW98fCEoXCJkYXRlc0luVW5rbm93blRpbWV6b25lXCJpbiBvKSkmJiEhby5kYXRlc0luVW5rbm93blRpbWV6b25lfX0pOmFlKHQpfWZ1bmN0aW9uIHVlKHtmaWVsZEluZm9zOmUsYXR0cmlidXRlczp0LGxheWVyOm4sZ3JhcGhpYzpyLGZpZWxkSW5mb01hcDppLHJlbGF0ZWRJbmZvczpvLHRpbWVab25lOmF9KXtjb25zdCBsPXt9O3JldHVybiBvPy5mb3JFYWNoKCh0PT55ZSh7YXR0cmlidXRlczpsLHJlbGF0ZWRJbmZvOnQsZmllbGRJbmZvTWFwOmksZmllbGRJbmZvczplLGxheWVyOm4sdGltZVpvbmU6YX0pKSksdCYmT2JqZWN0LmtleXModCkuZm9yRWFjaCgobz0+e2NvbnN0IHU9dFtvXTtsW29dPWxlKHtmaWVsZE5hbWU6byxmaWVsZEluZm9zOmUsZmllbGRJbmZvTWFwOmksbGF5ZXI6bix2YWx1ZTp1LGdyYXBoaWM6cix0aW1lWm9uZTphfSl9KSksbH1hc3luYyBmdW5jdGlvbiBzZShlLHQpe2NvbnN0e2xheWVyOm4sZ3JhcGhpYzpyLG91dEZpZWxkczppLG9iamVjdElkczpvLHJldHVybkdlb21ldHJ5OmEsc3BhdGlhbFJlZmVyZW5jZTpsfT1lLHU9b1swXTtpZihcIm51bWJlclwiIT10eXBlb2YgdSYmXCJzdHJpbmdcIiE9dHlwZW9mIHUpe2NvbnN0IGU9XCJDb3VsZCBub3QgcXVlcnkgcmVxdWlyZWQgZmllbGRzIGZvciB0aGUgc3BlY2lmaWVkIGZlYXR1cmUuIFRoZSBmZWF0dXJlJ3MgSUQgaXMgaW52YWxpZC5cIix0PXtsYXllcjpuLGdyYXBoaWM6cixvYmplY3RJZDp1LHJlcXVpcmVkRmllbGRzOml9O3JldHVybiB5Lndhcm4oZSx0KSxudWxsfWlmKCFzKG4pPy5vcGVyYXRpb25zPy5zdXBwb3J0c1F1ZXJ5KXtjb25zdCBlPVwiVGhlIHNwZWNpZmllZCBsYXllciBjYW5ub3QgYmUgcXVlcmllZC4gVGhlIGZvbGxvd2luZyBmaWVsZHMgd2lsbCBub3QgYmUgYXZhaWxhYmxlLlwiLHQ9e2xheWVyOm4sZ3JhcGhpYzpyLHJlcXVpcmVkRmllbGRzOmkscmV0dXJuR2VvbWV0cnk6YX07cmV0dXJuIHkud2FybihlLHQpLG51bGx9Y29uc3QgZj1uLmNyZWF0ZVF1ZXJ5KCk7Zi5vYmplY3RJZHM9byxmLm91dEZpZWxkcz1pPy5sZW5ndGg/aTpbbi5vYmplY3RJZEZpZWxkXSxmLnJldHVybkdlb21ldHJ5PSEhYSxmLnJldHVyblo9ISFhLGYucmV0dXJuTT0hIWEsZi5vdXRTcGF0aWFsUmVmZXJlbmNlPWw7cmV0dXJuKGF3YWl0IG4ucXVlcnlGZWF0dXJlcyhmLHQpKS5mZWF0dXJlc1swXX1hc3luYyBmdW5jdGlvbiBmZShlKXtpZighZS5leHByZXNzaW9uSW5mb3M/Lmxlbmd0aClyZXR1cm4hMTtjb25zdCB0PWF3YWl0IGQoKSx7YXJjYWRlVXRpbHM6e2hhc0dlb21ldHJ5RnVuY3Rpb25zOm59fT10O3JldHVybiBuKGUpfWFzeW5jIGZ1bmN0aW9uIGNlKHtncmFwaGljOmUscG9wdXBUZW1wbGF0ZTp0LGxheWVyOm4sc3BhdGlhbFJlZmVyZW5jZTpyfSxpKXtpZighbnx8IXQpcmV0dXJuO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIG4ubG9hZCYmYXdhaXQgbi5sb2FkKGkpLCFlLmF0dHJpYnV0ZXMpcmV0dXJuO2NvbnN0IG89ZS5hdHRyaWJ1dGVzW24ub2JqZWN0SWRGaWVsZF07aWYobnVsbD09bylyZXR1cm47Y29uc3QgYT1bb10sdT1hd2FpdCB0LmdldFJlcXVpcmVkRmllbGRzKG4uZmllbGRzSW5kZXgpLHM9bCh1LGUpLGY9cz9bXTp1LGM9dC5yZXR1cm5HZW9tZXRyeXx8YXdhaXQgZmUodCk7aWYocyYmIWMpcmV0dXJuO2NvbnN0IGQ9YXdhaXQgc2Uoe2xheWVyOm4sZ3JhcGhpYzplLG91dEZpZWxkczpmLG9iamVjdElkczphLHJldHVybkdlb21ldHJ5OmMsc3BhdGlhbFJlZmVyZW5jZTpyfSxpKTtkJiYoZC5nZW9tZXRyeSYmKGUuZ2VvbWV0cnk9ZC5nZW9tZXRyeSksZC5hdHRyaWJ1dGVzJiYoZS5hdHRyaWJ1dGVzPXsuLi5lLmF0dHJpYnV0ZXMsLi4uZC5hdHRyaWJ1dGVzfSkpfWZ1bmN0aW9uIGRlKGU9XCJcIil7cmV0dXJuISFlJiZlLmluY2x1ZGVzKGopfWZ1bmN0aW9uIHBlKGUpe3JldHVybiBlP2Ake2p9JHtlLmxheWVySWR9LyR7ZS5maWVsZE5hbWV9YDpcIlwifWZ1bmN0aW9uIG1lKHthdHRyaWJ1dGVzOmUsZ3JhcGhpYzp0LHJlbGF0ZWRJbmZvOm4sZmllbGRJbmZvczpyLGZpZWxkSW5mb01hcDppLGxheWVyOm8sdGltZVpvbmU6YX0pe2UmJnQmJm4mJk9iamVjdC5rZXlzKHQuYXR0cmlidXRlcykuZm9yRWFjaCgobD0+e2NvbnN0IHU9cGUoe2xheWVySWQ6bi5yZWxhdGlvbi5pZC50b1N0cmluZygpLGZpZWxkTmFtZTpsfSkscz10LmF0dHJpYnV0ZXNbbF07ZVt1XT1sZSh7ZmllbGROYW1lOnUsZmllbGRJbmZvczpyLGZpZWxkSW5mb01hcDppLGxheWVyOm8sdmFsdWU6cyxncmFwaGljOnQsdGltZVpvbmU6YX0pfSkpfWZ1bmN0aW9uIHllKHthdHRyaWJ1dGVzOmUscmVsYXRlZEluZm86dCxmaWVsZEluZm9NYXA6bixmaWVsZEluZm9zOnIsbGF5ZXI6aSx0aW1lWm9uZTpvfSl7ZSYmdCYmKHQucmVsYXRlZEZlYXR1cmVzPy5mb3JFYWNoKChhPT5tZSh7YXR0cmlidXRlczplLGdyYXBoaWM6YSxyZWxhdGVkSW5mbzp0LGZpZWxkSW5mb01hcDpuLGZpZWxkSW5mb3M6cixsYXllcjppLHRpbWVab25lOm99KSkpLHQucmVsYXRlZFN0YXRzRmVhdHVyZXM/LmZvckVhY2goKGE9Pm1lKHthdHRyaWJ1dGVzOmUsZ3JhcGhpYzphLHJlbGF0ZWRJbmZvOnQsZmllbGRJbmZvTWFwOm4sZmllbGRJbmZvczpyLGxheWVyOmksdGltZVpvbmU6b30pKSkpfWNvbnN0IGdlPWU9PntpZighZSlyZXR1cm4hMTtjb25zdCB0PWUudG9VcHBlckNhc2UoKTtyZXR1cm4gdC5pbmNsdWRlcyhcIkNVUlJFTlRfVElNRVNUQU1QXCIpfHx0LmluY2x1ZGVzKFwiQ1VSUkVOVF9EQVRFXCIpfHx0LmluY2x1ZGVzKFwiQ1VSUkVOVF9USU1FXCIpfSxJZT0oe2xheWVyOmUsbWV0aG9kOnQscXVlcnk6bixkZWZpbml0aW9uRXhwcmVzc2lvbjpyfSk9PntpZighZS5jYXBhYmlsaXRpZXM/LnF1ZXJ5Py5zdXBwb3J0c0NhY2hlSGludHx8XCJhdHRhY2htZW50c1wiPT09dClyZXR1cm47Y29uc3QgaT1udWxsIT1uLndoZXJlP24ud2hlcmU6bnVsbCxvPW51bGwhPW4uZ2VvbWV0cnk/bi5nZW9tZXRyeTpudWxsO2dlKHIpfHxnZShpKXx8XCJleHRlbnRcIj09PW8/LnR5cGV8fFwidGlsZVwiPT09bi5yZXN1bHRUeXBlfHwobi5jYWNoZUhpbnQ9ITApfSxoZT0oe3F1ZXJ5OmUsbGF5ZXI6dCxtZXRob2Q6bn0pPT57SWUoe2xheWVyOnQsbWV0aG9kOm4scXVlcnk6ZSxkZWZpbml0aW9uRXhwcmVzc2lvbjpgJHt0LmRlZmluaXRpb25FeHByZXNzaW9ufSAke3Quc2VydmljZURlZmluaXRpb25FeHByZXNzaW9ufWB9KX0sYmU9KHtxdWVyeVBheWxvYWQ6ZSxsYXllcjp0LG1ldGhvZDpufSk9PntJZSh7bGF5ZXI6dCxtZXRob2Q6bixxdWVyeTplLGRlZmluaXRpb25FeHByZXNzaW9uOmAke3QuZGVmaW5pdGlvbkV4cHJlc3Npb259ICR7dC5zZXJ2aWNlRGVmaW5pdGlvbkV4cHJlc3Npb259YH0pfTtmdW5jdGlvbiBUZShlLHQsbil7cmV0dXJuIGUmJnQmJm4/d2UoZS5hbGxMYXllcnMsdCxuKXx8d2UoZS5hbGxUYWJsZXMsdCxuKTpudWxsfWZ1bmN0aW9uIHdlKGUsdCxuKXtjb25zdCByPVwic2NlbmVcIj09PXQudHlwZSYmdC5hc3NvY2lhdGVkTGF5ZXI/dC5hc3NvY2lhdGVkTGF5ZXIudXJsOnQudXJsO3JldHVybiBlLmZpbHRlcihKKS5maW5kKChlPT5lIT09dCYmZS51cmw9PT1yJiZlLmxheWVySWQ9PT1uLnJlbGF0ZWRUYWJsZUlkKSl9ZnVuY3Rpb24gRmUoZSl7Y29uc3QgdD1lLmdldE9iamVjdElkKCk7cmV0dXJuIG51bGwhPXQ/YG9pZDoke3R9YDpgdWlkOiR7ZS51aWR9YH1leHBvcnR7YWUgYXMgYXBwbHlUZXh0Rm9ybWF0dGluZ0hUTUwscmUgYXMgY3JlYXRlZmllbGRJbmZvTWFwLFRlIGFzIGZpbmRSZWxhdGVkTGF5ZXIsUCBhcyBmaXhUb2tlbnMsdWUgYXMgZm9ybWF0QXR0cmlidXRlcyxuZSBhcyBmb3JtYXRFZGl0SW5mbyxWIGFzIGZvcm1hdFZhbHVlVG9GaWVsZEluZm8saWUgYXMgZ2V0QWxsRmllbGRJbmZvcyxZIGFzIGdldEZpZWxkSW5mbyxxIGFzIGdldEZpZWxkSW5mb0xhYmVsLHYgYXMgZ2V0Rml4ZWRGaWVsZE5hbWUsUiBhcyBnZXRGaXhlZEZpZWxkTmFtZXMsRmUgYXMgZ2V0SGlnaGxpZ2h0S2V5Rm9yRmVhdHVyZSxFIGFzIGdldFNvdXJjZUxheWVyLHggYXMgZ3JhcGhpY0NhbGxiYWNrLG9lIGFzIGh0bWxFbnRpdGllcyxNIGFzIGlzRXhwcmVzc2lvbkZpZWxkLEggYXMgaXNGZWF0dXJlU3VwcG9ydGVkTGF5ZXIsSyBhcyBpc0dyYXBoaWNGb3JSZWxhdGFibGVGZWF0dXJlU3VwcG9ydGVkTGF5ZXIsSiBhcyBpc1JlbGF0YWJsZUZlYXR1cmVTdXBwb3J0ZWRMYXllcixCIGFzIGlzUmVsYXRhYmxlTGF5ZXIsZGUgYXMgaXNSZWxhdGVkRmllbGQsaGUgYXMgcHJlTGF5ZXJRdWVyeUNhbGxiYWNrLGJlIGFzIHByZVJlcXVlc3RDYWxsYmFjayxzZSBhcyBxdWVyeVNvdXJjZUxheWVyLGNlIGFzIHF1ZXJ5VXBkYXRlZEZlYXR1cmUsQyBhcyBzaG91bGRPcGVuSW5OZXdUYWIseiBhcyBzdWJzdGl0dXRlQXR0cmlidXRlcyxEIGFzIHN1YnN0aXR1dGVGaWVsZHNJbkxpbmtzQW5kQXR0cmlidXRlc307XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=