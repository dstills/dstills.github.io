"use strict";
(self["webpackChunksynview"] = self["webpackChunksynview"] || []).push([["node_modules_arcgis_core_views_2d_layers_RouteLayerView2D_js"],{

/***/ "./node_modules/@arcgis/core/views/2d/layers/RouteLayerView2D.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/RouteLayerView2D.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ I)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_Collection_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/Collection.js */ "./node_modules/@arcgis/core/core/Collection.js");
/* harmony import */ var _core_CollectionFlattener_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../core/CollectionFlattener.js */ "./node_modules/@arcgis/core/core/CollectionFlattener.js");
/* harmony import */ var _core_handleUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../core/handleUtils.js */ "./node_modules/@arcgis/core/core/handleUtils.js");
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../core/reactiveUtils.js */ "./node_modules/@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _rest_support_DirectionLine_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../rest/support/DirectionLine.js */ "./node_modules/@arcgis/core/rest/support/DirectionLine.js");
/* harmony import */ var _rest_support_DirectionPoint_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../rest/support/DirectionPoint.js */ "./node_modules/@arcgis/core/rest/support/DirectionPoint.js");
/* harmony import */ var _rest_support_PointBarrier_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../rest/support/PointBarrier.js */ "./node_modules/@arcgis/core/rest/support/PointBarrier.js");
/* harmony import */ var _rest_support_PolygonBarrier_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../rest/support/PolygonBarrier.js */ "./node_modules/@arcgis/core/rest/support/PolygonBarrier.js");
/* harmony import */ var _rest_support_PolylineBarrier_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../rest/support/PolylineBarrier.js */ "./node_modules/@arcgis/core/rest/support/PolylineBarrier.js");
/* harmony import */ var _rest_support_RouteInfo_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../rest/support/RouteInfo.js */ "./node_modules/@arcgis/core/rest/support/RouteInfo.js");
/* harmony import */ var _rest_support_Stop_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../rest/support/Stop.js */ "./node_modules/@arcgis/core/rest/support/Stop.js");
/* harmony import */ var _LayerView2D_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./LayerView2D.js */ "./node_modules/@arcgis/core/views/2d/layers/LayerView2D.js");
/* harmony import */ var _graphics_GraphicContainer_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./graphics/GraphicContainer.js */ "./node_modules/@arcgis/core/views/2d/layers/graphics/GraphicContainer.js");
/* harmony import */ var _graphics_GraphicsView2D_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./graphics/GraphicsView2D.js */ "./node_modules/@arcgis/core/views/2d/layers/graphics/GraphicsView2D.js");
/* harmony import */ var _layers_LayerView_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../layers/LayerView.js */ "./node_modules/@arcgis/core/views/layers/LayerView.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const k=["route-info","direction-line","direction-point","polygon-barrier","polyline-barrier","point-barrier","stop"],M={graphic:null,property:null,oldValue:null,newValue:null};function V(t){return t instanceof _rest_support_DirectionLine_js__WEBPACK_IMPORTED_MODULE_10__["default"]||t instanceof _rest_support_DirectionPoint_js__WEBPACK_IMPORTED_MODULE_11__["default"]||t instanceof _rest_support_PointBarrier_js__WEBPACK_IMPORTED_MODULE_12__["default"]||t instanceof _rest_support_PolygonBarrier_js__WEBPACK_IMPORTED_MODULE_13__["default"]||t instanceof _rest_support_PolylineBarrier_js__WEBPACK_IMPORTED_MODULE_14__["default"]||t instanceof _rest_support_RouteInfo_js__WEBPACK_IMPORTED_MODULE_15__["default"]||t instanceof _rest_support_Stop_js__WEBPACK_IMPORTED_MODULE_16__["default"]}function j(t){return _core_Collection_js__WEBPACK_IMPORTED_MODULE_2__["default"].isCollection(t)&&t.length&&V(t.at(0))}function v(t){return Array.isArray(t)&&t.length>0&&V(t[0])}let G=class extends((0,_LayerView2D_js__WEBPACK_IMPORTED_MODULE_17__.LayerView2DMixin)(_layers_LayerView_js__WEBPACK_IMPORTED_MODULE_20__["default"])){constructor(){super(...arguments),this._graphics=new _core_Collection_js__WEBPACK_IMPORTED_MODULE_2__["default"],this._highlightIds=new Map,this._networkFeatureMap=new Map,this._networkGraphicMap=new Map}get _routeItems(){return new _core_CollectionFlattener_js__WEBPACK_IMPORTED_MODULE_3__["default"]({getCollections:()=>null==this.layer||this.destroyed?[]:[null!=this.layer.routeInfo?new _core_Collection_js__WEBPACK_IMPORTED_MODULE_2__["default"]([this.layer.routeInfo]):null,this.layer.directionLines,this.layer.directionPoints,this.layer.polygonBarriers,this.layer.polylineBarriers,this.layer.pointBarriers,this.layer.stops]})}initialize(){this._updatingHandles.addOnCollectionChange((()=>this._routeItems),(t=>this._routeItemsChanged(t)),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_5__.initial)}destroy(){this._networkFeatureMap.clear(),this._networkGraphicMap.clear(),this._graphics.removeAll(),this._get("_routeItems")?.destroy()}attach(){this._createGraphicsView()}detach(){this._destroyGraphicsView()}async fetchPopupFeatures(t){return this._graphicsView.hitTest(t).filter((t=>!!t.popupTemplate))}highlight(t){let r;r=V(t)?[this._getNetworkFeatureUid(t)]:v(t)?t.map((t=>this._getNetworkFeatureUid(t))):j(t)?t.map((t=>this._getNetworkFeatureUid(t))).toArray():[t.uid];const i=r.filter(_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_1__.isSome);return i.length?(this._addHighlight(i),(0,_core_handleUtils_js__WEBPACK_IMPORTED_MODULE_4__.makeHandle)((()=>this._removeHighlight(i)))):(0,_core_handleUtils_js__WEBPACK_IMPORTED_MODULE_4__.makeHandle)()}async hitTest(t,r){if(this.suspended)return null;const i=this._graphicsView.hitTest(t).filter(_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_1__.isSome).map((t=>this._networkGraphicMap.get(t)));if(!i.length)return null;const{layer:s}=this;return i.reverse().map((e=>({type:"route",layer:s,mapPoint:t,networkFeature:e})))}isUpdating(){return this._graphicsView.updating}moveStart(){}moveEnd(){}update(t){this._graphicsView.processUpdate(t)}viewChange(){this._graphicsView.viewChange()}_addHighlight(t){for(const e of t)if(this._highlightIds.has(e)){const t=this._highlightIds.get(e);this._highlightIds.set(e,t+1)}else this._highlightIds.set(e,1);this._updateHighlight()}_createGraphic(t){const e=t.toGraphic();return e.layer=this.layer,e.sourceLayer=this.layer,e}_createGraphicsView(){const t=this.view,e=()=>this.requestUpdate(),r=new _graphics_GraphicContainer_js__WEBPACK_IMPORTED_MODULE_18__["default"](t.featuresTilingScheme);this._graphicsView=new _graphics_GraphicsView2D_js__WEBPACK_IMPORTED_MODULE_19__["default"]({container:r,graphics:this._graphics,requestUpdateCallback:e,view:t}),this.container.addChild(r),this._updateHighlight()}_destroyGraphicsView(){this.container.removeChild(this._graphicsView.container),this._graphicsView.destroy()}_getDrawOrder(t){const e=this._networkGraphicMap.get(t);return k.indexOf(e.type)}_getNetworkFeatureUid(t){return this._networkFeatureMap.has(t)?this._networkFeatureMap.get(t).uid:null}_removeHighlight(t){for(const e of t)if(this._highlightIds.has(e)){const t=this._highlightIds.get(e)-1;0===t?this._highlightIds.delete(e):this._highlightIds.set(e,t)}this._updateHighlight()}_routeItemsChanged(t){if(t.removed.length){this._graphics.removeMany(t.removed.map((t=>{const e=this._networkFeatureMap.get(t);return this._networkFeatureMap.delete(t),this._networkGraphicMap.delete(e),e})));for(const e of t.removed)this.removeHandles(e)}if(t.added.length){this._graphics.addMany(t.added.map((t=>{const e=this._createGraphic(t);return null==e.symbol?null:(this._networkFeatureMap.set(t,e),this._networkGraphicMap.set(e,t),e)})).filter(_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_1__.isSome));for(const e of t.added)this.addHandles([(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_5__.watch)((()=>e.geometry),((t,r)=>{this._updateGraphic(e,"geometry",t,r)})),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_5__.watch)((()=>e.symbol),((t,r)=>{this._updateGraphic(e,"symbol",t,r)}))],e);this._graphics.sort(((t,e)=>this._getDrawOrder(t)-this._getDrawOrder(e)))}}_updateGraphic(t,e,r,i){if(!this._networkFeatureMap.has(t)){const e=this._createGraphic(t);return this._networkFeatureMap.set(t,e),this._networkGraphicMap.set(e,t),void this._graphics.add(e)}const s=this._networkFeatureMap.get(t);s[e]=r,M.graphic=s,M.property=e,M.oldValue=i,M.newValue=r,this._graphicsView.graphicUpdateHandler(M)}_updateHighlight(){const t=Array.from(this._highlightIds.keys());this._graphicsView.setHighlight(t)}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)()],G.prototype,"_graphics",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)()],G.prototype,"_routeItems",null),G=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__.subclass)("esri.views.2d.layers.RouteLayerView2D")],G);const I=G;


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/graphics/GraphicContainer.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/graphics/GraphicContainer.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../engine/webgl/enums.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/enums.js");
/* harmony import */ var _BaseGraphicContainer_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./BaseGraphicContainer.js */ "./node_modules/@arcgis/core/views/2d/layers/graphics/BaseGraphicContainer.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class i extends _BaseGraphicContainer_js__WEBPACK_IMPORTED_MODULE_1__["default"]{renderChildren(r){this.attributeView.update(),this.children.some((e=>e.hasData))&&(this.attributeView.bindTextures(r.context,!1),super.renderChildren(r),r.drawPhase===_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.WGLDrawPhase.MAP&&this._renderChildren(r),this.hasHighlight&&r.drawPhase===_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.WGLDrawPhase.HIGHLIGHT&&this._renderHighlight(r),this._boundsRenderer&&this._boundsRenderer.doRender(r))}_renderHighlight(e){const{painter:r}=e,i=r.effects.highlight;i.bind(e),this._renderChildren(e,i.defines),i.draw(e),i.unbind()}}


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX2FyY2dpc19jb3JlX3ZpZXdzXzJkX2xheWVyc19Sb3V0ZUxheWVyVmlldzJEX2pzLmJ1bmRsZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDMmxDLHlIQUF5SCx3REFBd0QsY0FBYyxvQkFBb0IsdUVBQUMsZUFBZSx3RUFBQyxlQUFlLHNFQUFDLGVBQWUsd0VBQUMsZUFBZSx5RUFBQyxlQUFlLG1FQUFDLGVBQWUsOERBQUMsQ0FBQyxjQUFjLE9BQU8sMkRBQUMsdUNBQXVDLGNBQWMsNkNBQTZDLG9CQUFvQixrRUFBQyxDQUFDLDZEQUFDLEdBQUcsY0FBYyx1Q0FBdUMsMkRBQUMsNEZBQTRGLGtCQUFrQixXQUFXLG9FQUFDLEVBQUUsdUZBQXVGLDJEQUFDLHFMQUFxTCxFQUFFLGFBQWEsbUdBQW1HLDJEQUFDLEVBQUUsVUFBVSwrSEFBK0gsU0FBUywyQkFBMkIsU0FBUyw0QkFBNEIsNEJBQTRCLG9FQUFvRSxhQUFhLE1BQU0sdUpBQXVKLGlCQUFpQix1REFBQyxFQUFFLHVDQUF1QyxnRUFBQyxrQ0FBa0MsZ0VBQUMsR0FBRyxtQkFBbUIsOEJBQThCLDZDQUE2Qyx1REFBQywyQ0FBMkMseUJBQXlCLE1BQU0sUUFBUSxNQUFNLDZCQUE2QixpREFBaUQsSUFBSSxhQUFhLG1DQUFtQyxhQUFhLFdBQVcsVUFBVSxvQ0FBb0MsYUFBYSxnQ0FBZ0MsaUJBQWlCLCtDQUErQyxrQ0FBa0MsOEJBQThCLGlDQUFpQyx3QkFBd0Isa0JBQWtCLHNCQUFzQixxREFBcUQsc0JBQXNCLG1EQUFtRCxzRUFBQyx5QkFBeUIsdUJBQXVCLG9FQUFDLEVBQUUsbUVBQW1FLHFEQUFxRCx1QkFBdUIsc0ZBQXNGLGlCQUFpQix1Q0FBdUMseUJBQXlCLHlCQUF5Qiw4RUFBOEUsb0JBQW9CLCtDQUErQyxvQ0FBb0MsK0RBQStELHdCQUF3QixzQkFBc0IscUJBQXFCLDZDQUE2Qyx1Q0FBdUMsNkVBQTZFLElBQUksK0NBQStDLG1CQUFtQix3Q0FBd0MsK0JBQStCLGlHQUFpRyxVQUFVLHVEQUFDLEdBQUcsd0NBQXdDLDZEQUFDLDJCQUEyQixzQ0FBc0MsR0FBRyw2REFBQyx5QkFBeUIsb0NBQW9DLE9BQU8sMkVBQTJFLHdCQUF3QixvQ0FBb0MsK0JBQStCLG9HQUFvRyx1Q0FBdUMscUdBQXFHLG1CQUFtQiw4Q0FBOEMscUNBQXFDLHVEQUFDLEVBQUUsc0ZBQUMsb0NBQW9DLHVEQUFDLEVBQUUsc0ZBQUMsc0NBQXNDLHVEQUFDLEVBQUUsc0ZBQUMsOENBQThDLFVBQStCOzs7Ozs7Ozs7Ozs7Ozs7OztBQ0p2MEs7QUFDQTtBQUNBO0FBQ0E7QUFDb0csZ0JBQWdCLGdFQUFDLENBQUMsa0JBQWtCLHFKQUFxSixnRUFBQywrREFBK0QsZ0VBQUMsNkZBQTZGLG9CQUFvQixNQUFNLFVBQVUseUJBQXlCLGtFQUF1RiIsInNvdXJjZXMiOlsid2VicGFjazovL3N5bnZpZXcvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzJkL2xheWVycy9Sb3V0ZUxheWVyVmlldzJELmpzIiwid2VicGFjazovL3N5bnZpZXcvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzJkL2xheWVycy9ncmFwaGljcy9HcmFwaGljQ29udGFpbmVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7XyBhcyB0fWZyb21cIi4uLy4uLy4uL2NodW5rcy90c2xpYi5lczYuanNcIjtpbXBvcnR7aXNTb21lIGFzIGV9ZnJvbVwiLi4vLi4vLi4vY29yZS9hcnJheVV0aWxzLmpzXCI7aW1wb3J0IHIgZnJvbVwiLi4vLi4vLi4vY29yZS9Db2xsZWN0aW9uLmpzXCI7aW1wb3J0IGkgZnJvbVwiLi4vLi4vLi4vY29yZS9Db2xsZWN0aW9uRmxhdHRlbmVyLmpzXCI7aW1wb3J0e21ha2VIYW5kbGUgYXMgc31mcm9tXCIuLi8uLi8uLi9jb3JlL2hhbmRsZVV0aWxzLmpzXCI7aW1wb3J0e2luaXRpYWwgYXMgbyx3YXRjaCBhcyBhfWZyb21cIi4uLy4uLy4uL2NvcmUvcmVhY3RpdmVVdGlscy5qc1wiO2ltcG9ydHtwcm9wZXJ0eSBhcyBofWZyb21cIi4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvcHJvcGVydHkuanNcIjtpbXBvcnRcIi4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2Vuc3VyZVR5cGUuanNcIjtpbXBvcnRcIi4uLy4uLy4uL2NvcmUvaGFzLmpzXCI7aW1wb3J0e3N1YmNsYXNzIGFzIG59ZnJvbVwiLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9zdWJjbGFzcy5qc1wiO2ltcG9ydCBwIGZyb21cIi4uLy4uLy4uL3Jlc3Qvc3VwcG9ydC9EaXJlY3Rpb25MaW5lLmpzXCI7aW1wb3J0IGwgZnJvbVwiLi4vLi4vLi4vcmVzdC9zdXBwb3J0L0RpcmVjdGlvblBvaW50LmpzXCI7aW1wb3J0IGMgZnJvbVwiLi4vLi4vLi4vcmVzdC9zdXBwb3J0L1BvaW50QmFycmllci5qc1wiO2ltcG9ydCBnIGZyb21cIi4uLy4uLy4uL3Jlc3Qvc3VwcG9ydC9Qb2x5Z29uQmFycmllci5qc1wiO2ltcG9ydCB1IGZyb21cIi4uLy4uLy4uL3Jlc3Qvc3VwcG9ydC9Qb2x5bGluZUJhcnJpZXIuanNcIjtpbXBvcnQgZCBmcm9tXCIuLi8uLi8uLi9yZXN0L3N1cHBvcnQvUm91dGVJbmZvLmpzXCI7aW1wb3J0IF8gZnJvbVwiLi4vLi4vLi4vcmVzdC9zdXBwb3J0L1N0b3AuanNcIjtpbXBvcnR7TGF5ZXJWaWV3MkRNaXhpbiBhcyBtfWZyb21cIi4vTGF5ZXJWaWV3MkQuanNcIjtpbXBvcnQgdyBmcm9tXCIuL2dyYXBoaWNzL0dyYXBoaWNDb250YWluZXIuanNcIjtpbXBvcnQgZiBmcm9tXCIuL2dyYXBoaWNzL0dyYXBoaWNzVmlldzJELmpzXCI7aW1wb3J0IHkgZnJvbVwiLi4vLi4vbGF5ZXJzL0xheWVyVmlldy5qc1wiO2NvbnN0IGs9W1wicm91dGUtaW5mb1wiLFwiZGlyZWN0aW9uLWxpbmVcIixcImRpcmVjdGlvbi1wb2ludFwiLFwicG9seWdvbi1iYXJyaWVyXCIsXCJwb2x5bGluZS1iYXJyaWVyXCIsXCJwb2ludC1iYXJyaWVyXCIsXCJzdG9wXCJdLE09e2dyYXBoaWM6bnVsbCxwcm9wZXJ0eTpudWxsLG9sZFZhbHVlOm51bGwsbmV3VmFsdWU6bnVsbH07ZnVuY3Rpb24gVih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIHB8fHQgaW5zdGFuY2VvZiBsfHx0IGluc3RhbmNlb2YgY3x8dCBpbnN0YW5jZW9mIGd8fHQgaW5zdGFuY2VvZiB1fHx0IGluc3RhbmNlb2YgZHx8dCBpbnN0YW5jZW9mIF99ZnVuY3Rpb24gaih0KXtyZXR1cm4gci5pc0NvbGxlY3Rpb24odCkmJnQubGVuZ3RoJiZWKHQuYXQoMCkpfWZ1bmN0aW9uIHYodCl7cmV0dXJuIEFycmF5LmlzQXJyYXkodCkmJnQubGVuZ3RoPjAmJlYodFswXSl9bGV0IEc9Y2xhc3MgZXh0ZW5kcyhtKHkpKXtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5fZ3JhcGhpY3M9bmV3IHIsdGhpcy5faGlnaGxpZ2h0SWRzPW5ldyBNYXAsdGhpcy5fbmV0d29ya0ZlYXR1cmVNYXA9bmV3IE1hcCx0aGlzLl9uZXR3b3JrR3JhcGhpY01hcD1uZXcgTWFwfWdldCBfcm91dGVJdGVtcygpe3JldHVybiBuZXcgaSh7Z2V0Q29sbGVjdGlvbnM6KCk9Pm51bGw9PXRoaXMubGF5ZXJ8fHRoaXMuZGVzdHJveWVkP1tdOltudWxsIT10aGlzLmxheWVyLnJvdXRlSW5mbz9uZXcgcihbdGhpcy5sYXllci5yb3V0ZUluZm9dKTpudWxsLHRoaXMubGF5ZXIuZGlyZWN0aW9uTGluZXMsdGhpcy5sYXllci5kaXJlY3Rpb25Qb2ludHMsdGhpcy5sYXllci5wb2x5Z29uQmFycmllcnMsdGhpcy5sYXllci5wb2x5bGluZUJhcnJpZXJzLHRoaXMubGF5ZXIucG9pbnRCYXJyaWVycyx0aGlzLmxheWVyLnN0b3BzXX0pfWluaXRpYWxpemUoKXt0aGlzLl91cGRhdGluZ0hhbmRsZXMuYWRkT25Db2xsZWN0aW9uQ2hhbmdlKCgoKT0+dGhpcy5fcm91dGVJdGVtcyksKHQ9PnRoaXMuX3JvdXRlSXRlbXNDaGFuZ2VkKHQpKSxvKX1kZXN0cm95KCl7dGhpcy5fbmV0d29ya0ZlYXR1cmVNYXAuY2xlYXIoKSx0aGlzLl9uZXR3b3JrR3JhcGhpY01hcC5jbGVhcigpLHRoaXMuX2dyYXBoaWNzLnJlbW92ZUFsbCgpLHRoaXMuX2dldChcIl9yb3V0ZUl0ZW1zXCIpPy5kZXN0cm95KCl9YXR0YWNoKCl7dGhpcy5fY3JlYXRlR3JhcGhpY3NWaWV3KCl9ZGV0YWNoKCl7dGhpcy5fZGVzdHJveUdyYXBoaWNzVmlldygpfWFzeW5jIGZldGNoUG9wdXBGZWF0dXJlcyh0KXtyZXR1cm4gdGhpcy5fZ3JhcGhpY3NWaWV3LmhpdFRlc3QodCkuZmlsdGVyKCh0PT4hIXQucG9wdXBUZW1wbGF0ZSkpfWhpZ2hsaWdodCh0KXtsZXQgcjtyPVYodCk/W3RoaXMuX2dldE5ldHdvcmtGZWF0dXJlVWlkKHQpXTp2KHQpP3QubWFwKCh0PT50aGlzLl9nZXROZXR3b3JrRmVhdHVyZVVpZCh0KSkpOmoodCk/dC5tYXAoKHQ9PnRoaXMuX2dldE5ldHdvcmtGZWF0dXJlVWlkKHQpKSkudG9BcnJheSgpOlt0LnVpZF07Y29uc3QgaT1yLmZpbHRlcihlKTtyZXR1cm4gaS5sZW5ndGg/KHRoaXMuX2FkZEhpZ2hsaWdodChpKSxzKCgoKT0+dGhpcy5fcmVtb3ZlSGlnaGxpZ2h0KGkpKSkpOnMoKX1hc3luYyBoaXRUZXN0KHQscil7aWYodGhpcy5zdXNwZW5kZWQpcmV0dXJuIG51bGw7Y29uc3QgaT10aGlzLl9ncmFwaGljc1ZpZXcuaGl0VGVzdCh0KS5maWx0ZXIoZSkubWFwKCh0PT50aGlzLl9uZXR3b3JrR3JhcGhpY01hcC5nZXQodCkpKTtpZighaS5sZW5ndGgpcmV0dXJuIG51bGw7Y29uc3R7bGF5ZXI6c309dGhpcztyZXR1cm4gaS5yZXZlcnNlKCkubWFwKChlPT4oe3R5cGU6XCJyb3V0ZVwiLGxheWVyOnMsbWFwUG9pbnQ6dCxuZXR3b3JrRmVhdHVyZTplfSkpKX1pc1VwZGF0aW5nKCl7cmV0dXJuIHRoaXMuX2dyYXBoaWNzVmlldy51cGRhdGluZ31tb3ZlU3RhcnQoKXt9bW92ZUVuZCgpe311cGRhdGUodCl7dGhpcy5fZ3JhcGhpY3NWaWV3LnByb2Nlc3NVcGRhdGUodCl9dmlld0NoYW5nZSgpe3RoaXMuX2dyYXBoaWNzVmlldy52aWV3Q2hhbmdlKCl9X2FkZEhpZ2hsaWdodCh0KXtmb3IoY29uc3QgZSBvZiB0KWlmKHRoaXMuX2hpZ2hsaWdodElkcy5oYXMoZSkpe2NvbnN0IHQ9dGhpcy5faGlnaGxpZ2h0SWRzLmdldChlKTt0aGlzLl9oaWdobGlnaHRJZHMuc2V0KGUsdCsxKX1lbHNlIHRoaXMuX2hpZ2hsaWdodElkcy5zZXQoZSwxKTt0aGlzLl91cGRhdGVIaWdobGlnaHQoKX1fY3JlYXRlR3JhcGhpYyh0KXtjb25zdCBlPXQudG9HcmFwaGljKCk7cmV0dXJuIGUubGF5ZXI9dGhpcy5sYXllcixlLnNvdXJjZUxheWVyPXRoaXMubGF5ZXIsZX1fY3JlYXRlR3JhcGhpY3NWaWV3KCl7Y29uc3QgdD10aGlzLnZpZXcsZT0oKT0+dGhpcy5yZXF1ZXN0VXBkYXRlKCkscj1uZXcgdyh0LmZlYXR1cmVzVGlsaW5nU2NoZW1lKTt0aGlzLl9ncmFwaGljc1ZpZXc9bmV3IGYoe2NvbnRhaW5lcjpyLGdyYXBoaWNzOnRoaXMuX2dyYXBoaWNzLHJlcXVlc3RVcGRhdGVDYWxsYmFjazplLHZpZXc6dH0pLHRoaXMuY29udGFpbmVyLmFkZENoaWxkKHIpLHRoaXMuX3VwZGF0ZUhpZ2hsaWdodCgpfV9kZXN0cm95R3JhcGhpY3NWaWV3KCl7dGhpcy5jb250YWluZXIucmVtb3ZlQ2hpbGQodGhpcy5fZ3JhcGhpY3NWaWV3LmNvbnRhaW5lciksdGhpcy5fZ3JhcGhpY3NWaWV3LmRlc3Ryb3koKX1fZ2V0RHJhd09yZGVyKHQpe2NvbnN0IGU9dGhpcy5fbmV0d29ya0dyYXBoaWNNYXAuZ2V0KHQpO3JldHVybiBrLmluZGV4T2YoZS50eXBlKX1fZ2V0TmV0d29ya0ZlYXR1cmVVaWQodCl7cmV0dXJuIHRoaXMuX25ldHdvcmtGZWF0dXJlTWFwLmhhcyh0KT90aGlzLl9uZXR3b3JrRmVhdHVyZU1hcC5nZXQodCkudWlkOm51bGx9X3JlbW92ZUhpZ2hsaWdodCh0KXtmb3IoY29uc3QgZSBvZiB0KWlmKHRoaXMuX2hpZ2hsaWdodElkcy5oYXMoZSkpe2NvbnN0IHQ9dGhpcy5faGlnaGxpZ2h0SWRzLmdldChlKS0xOzA9PT10P3RoaXMuX2hpZ2hsaWdodElkcy5kZWxldGUoZSk6dGhpcy5faGlnaGxpZ2h0SWRzLnNldChlLHQpfXRoaXMuX3VwZGF0ZUhpZ2hsaWdodCgpfV9yb3V0ZUl0ZW1zQ2hhbmdlZCh0KXtpZih0LnJlbW92ZWQubGVuZ3RoKXt0aGlzLl9ncmFwaGljcy5yZW1vdmVNYW55KHQucmVtb3ZlZC5tYXAoKHQ9Pntjb25zdCBlPXRoaXMuX25ldHdvcmtGZWF0dXJlTWFwLmdldCh0KTtyZXR1cm4gdGhpcy5fbmV0d29ya0ZlYXR1cmVNYXAuZGVsZXRlKHQpLHRoaXMuX25ldHdvcmtHcmFwaGljTWFwLmRlbGV0ZShlKSxlfSkpKTtmb3IoY29uc3QgZSBvZiB0LnJlbW92ZWQpdGhpcy5yZW1vdmVIYW5kbGVzKGUpfWlmKHQuYWRkZWQubGVuZ3RoKXt0aGlzLl9ncmFwaGljcy5hZGRNYW55KHQuYWRkZWQubWFwKCh0PT57Y29uc3QgZT10aGlzLl9jcmVhdGVHcmFwaGljKHQpO3JldHVybiBudWxsPT1lLnN5bWJvbD9udWxsOih0aGlzLl9uZXR3b3JrRmVhdHVyZU1hcC5zZXQodCxlKSx0aGlzLl9uZXR3b3JrR3JhcGhpY01hcC5zZXQoZSx0KSxlKX0pKS5maWx0ZXIoZSkpO2Zvcihjb25zdCBlIG9mIHQuYWRkZWQpdGhpcy5hZGRIYW5kbGVzKFthKCgoKT0+ZS5nZW9tZXRyeSksKCh0LHIpPT57dGhpcy5fdXBkYXRlR3JhcGhpYyhlLFwiZ2VvbWV0cnlcIix0LHIpfSkpLGEoKCgpPT5lLnN5bWJvbCksKCh0LHIpPT57dGhpcy5fdXBkYXRlR3JhcGhpYyhlLFwic3ltYm9sXCIsdCxyKX0pKV0sZSk7dGhpcy5fZ3JhcGhpY3Muc29ydCgoKHQsZSk9PnRoaXMuX2dldERyYXdPcmRlcih0KS10aGlzLl9nZXREcmF3T3JkZXIoZSkpKX19X3VwZGF0ZUdyYXBoaWModCxlLHIsaSl7aWYoIXRoaXMuX25ldHdvcmtGZWF0dXJlTWFwLmhhcyh0KSl7Y29uc3QgZT10aGlzLl9jcmVhdGVHcmFwaGljKHQpO3JldHVybiB0aGlzLl9uZXR3b3JrRmVhdHVyZU1hcC5zZXQodCxlKSx0aGlzLl9uZXR3b3JrR3JhcGhpY01hcC5zZXQoZSx0KSx2b2lkIHRoaXMuX2dyYXBoaWNzLmFkZChlKX1jb25zdCBzPXRoaXMuX25ldHdvcmtGZWF0dXJlTWFwLmdldCh0KTtzW2VdPXIsTS5ncmFwaGljPXMsTS5wcm9wZXJ0eT1lLE0ub2xkVmFsdWU9aSxNLm5ld1ZhbHVlPXIsdGhpcy5fZ3JhcGhpY3NWaWV3LmdyYXBoaWNVcGRhdGVIYW5kbGVyKE0pfV91cGRhdGVIaWdobGlnaHQoKXtjb25zdCB0PUFycmF5LmZyb20odGhpcy5faGlnaGxpZ2h0SWRzLmtleXMoKSk7dGhpcy5fZ3JhcGhpY3NWaWV3LnNldEhpZ2hsaWdodCh0KX19O3QoW2goKV0sRy5wcm90b3R5cGUsXCJfZ3JhcGhpY3NcIix2b2lkIDApLHQoW2goKV0sRy5wcm90b3R5cGUsXCJfcm91dGVJdGVtc1wiLG51bGwpLEc9dChbbihcImVzcmkudmlld3MuMmQubGF5ZXJzLlJvdXRlTGF5ZXJWaWV3MkRcIildLEcpO2NvbnN0IEk9RztleHBvcnR7SSBhcyBkZWZhdWx0fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7V0dMRHJhd1BoYXNlIGFzIGV9ZnJvbVwiLi4vLi4vZW5naW5lL3dlYmdsL2VudW1zLmpzXCI7aW1wb3J0IHIgZnJvbVwiLi9CYXNlR3JhcGhpY0NvbnRhaW5lci5qc1wiO2NsYXNzIGkgZXh0ZW5kcyBye3JlbmRlckNoaWxkcmVuKHIpe3RoaXMuYXR0cmlidXRlVmlldy51cGRhdGUoKSx0aGlzLmNoaWxkcmVuLnNvbWUoKGU9PmUuaGFzRGF0YSkpJiYodGhpcy5hdHRyaWJ1dGVWaWV3LmJpbmRUZXh0dXJlcyhyLmNvbnRleHQsITEpLHN1cGVyLnJlbmRlckNoaWxkcmVuKHIpLHIuZHJhd1BoYXNlPT09ZS5NQVAmJnRoaXMuX3JlbmRlckNoaWxkcmVuKHIpLHRoaXMuaGFzSGlnaGxpZ2h0JiZyLmRyYXdQaGFzZT09PWUuSElHSExJR0hUJiZ0aGlzLl9yZW5kZXJIaWdobGlnaHQociksdGhpcy5fYm91bmRzUmVuZGVyZXImJnRoaXMuX2JvdW5kc1JlbmRlcmVyLmRvUmVuZGVyKHIpKX1fcmVuZGVySGlnaGxpZ2h0KGUpe2NvbnN0e3BhaW50ZXI6cn09ZSxpPXIuZWZmZWN0cy5oaWdobGlnaHQ7aS5iaW5kKGUpLHRoaXMuX3JlbmRlckNoaWxkcmVuKGUsaS5kZWZpbmVzKSxpLmRyYXcoZSksaS51bmJpbmQoKX19ZXhwb3J0e2kgYXMgZGVmYXVsdH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=