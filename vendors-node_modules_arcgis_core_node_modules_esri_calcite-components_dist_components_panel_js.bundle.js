"use strict";
(self["webpackChunksynview"] = self["webpackChunksynview"] || []).push([["vendors-node_modules_arcgis_core_node_modules_esri_calcite-components_dist_components_panel_js"],{

/***/ "./node_modules/@arcgis/core/node_modules/@esri/calcite-components/dist/components/panel.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/node_modules/@esri/calcite-components/dist/components/panel.js ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   P: () => (/* binding */ Panel),
/* harmony export */   S: () => (/* binding */ SLOTS),
/* harmony export */   d: () => (/* binding */ defineCustomElement)
/* harmony export */ });
/* harmony import */ var _stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @stencil/core/internal/client/index.js */ "./node_modules/@stencil/core/internal/client/index.js");
/* harmony import */ var _dom_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dom.js */ "./node_modules/@arcgis/core/node_modules/@esri/calcite-components/dist/components/dom.js");
/* harmony import */ var _interactive_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./interactive.js */ "./node_modules/@arcgis/core/node_modules/@esri/calcite-components/dist/components/interactive.js");
/* harmony import */ var _loadable_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./loadable.js */ "./node_modules/@arcgis/core/node_modules/@esri/calcite-components/dist/components/loadable.js");
/* harmony import */ var _observers_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./observers.js */ "./node_modules/@arcgis/core/node_modules/@esri/calcite-components/dist/components/observers.js");
/* harmony import */ var _action_menu_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./action-menu.js */ "./node_modules/@arcgis/core/node_modules/@esri/calcite-components/dist/components/action-menu.js");
/* harmony import */ var _Heading_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Heading.js */ "./node_modules/@arcgis/core/node_modules/@esri/calcite-components/dist/components/Heading.js");
/* harmony import */ var _locale_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./locale.js */ "./node_modules/@arcgis/core/node_modules/@esri/calcite-components/dist/components/locale.js");
/* harmony import */ var _t9n_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./t9n.js */ "./node_modules/@arcgis/core/node_modules/@esri/calcite-components/dist/components/t9n.js");
/* harmony import */ var _action_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./action.js */ "./node_modules/@arcgis/core/node_modules/@esri/calcite-components/dist/components/action.js");
/* harmony import */ var _icon_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./icon.js */ "./node_modules/@arcgis/core/node_modules/@esri/calcite-components/dist/components/icon.js");
/* harmony import */ var _loader_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./loader.js */ "./node_modules/@arcgis/core/node_modules/@esri/calcite-components/dist/components/loader.js");
/* harmony import */ var _popover_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./popover.js */ "./node_modules/@arcgis/core/node_modules/@esri/calcite-components/dist/components/popover.js");
/* harmony import */ var _scrim_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./scrim.js */ "./node_modules/@arcgis/core/node_modules/@esri/calcite-components/dist/components/scrim.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.11.0
 */















const CSS = {
  actionBarContainer: "action-bar-container",
  backButton: "back-button",
  container: "container",
  header: "header",
  headerContainer: "header-container",
  headerContainerBorderEnd: "header-container--border-end",
  heading: "heading",
  summary: "summary",
  description: "description",
  headerContent: "header-content",
  headerActions: "header-actions",
  headerActionsEnd: "header-actions--end",
  headerActionsStart: "header-actions--start",
  contentWrapper: "content-wrapper",
  fabContainer: "fab-container",
  footer: "footer",
};
const ICONS = {
  close: "x",
  menu: "ellipsis",
  backLeft: "chevron-left",
  backRight: "chevron-right",
  expand: "chevron-down",
  collapse: "chevron-up",
};
const SLOTS = {
  actionBar: "action-bar",
  headerActionsStart: "header-actions-start",
  headerActionsEnd: "header-actions-end",
  headerMenuActions: "header-menu-actions",
  headerContent: "header-content",
  fab: "fab",
  footer: "footer",
  footerActions: "footer-actions",
};

const panelCss = ":host{box-sizing:border-box;background-color:var(--calcite-ui-foreground-1);color:var(--calcite-ui-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{position:relative;display:flex;block-size:100%;inline-size:100%;flex:1 1 auto;--calcite-min-header-height:calc(var(--calcite-icon-size) * 3)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.header{margin:0px;display:flex;align-content:space-between;align-items:center;fill:var(--calcite-ui-text-2);color:var(--calcite-ui-text-2)}.heading{margin:0px;padding:0px;font-weight:var(--calcite-font-weight-medium)}.header .heading{flex:1 1 auto;padding:0.5rem}.container{margin:0px;display:flex;inline-size:100%;flex:1 1 auto;flex-direction:column;align-items:stretch;background-color:var(--calcite-ui-background);padding:0px;transition:max-block-size var(--calcite-animation-timing), inline-size var(--calcite-animation-timing)}.container[hidden]{display:none}.header{z-index:var(--calcite-app-z-index-header);display:flex;flex-direction:column;background-color:var(--calcite-ui-foreground-1);border-block-end:var(--calcite-panel-header-border-block-end, 1px solid var(--calcite-ui-border-3))}.header-container{display:flex;inline-size:100%;flex-direction:row;align-items:stretch;justify-content:flex-start;flex:0 0 auto}.header-container--border-end{border-block-end:1px solid var(--calcite-ui-border-3)}.action-bar-container{inline-size:100%}.action-bar-container ::slotted(calcite-action-bar){inline-size:100%}.header-content{display:flex;flex-direction:column;overflow:hidden;padding-inline:0.75rem;padding-block:0.875rem;margin-inline-end:auto}.header-content .heading,.header-content .description{display:block;overflow-wrap:break-word;padding:0px}.header-content .heading{margin-inline:0px;margin-block:0px 0.25rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;font-weight:var(--calcite-font-weight-medium)}.header-content .heading:only-child{margin-block-end:0px}.header-content .description{font-size:var(--calcite-font-size--1);line-height:1rem;color:var(--calcite-ui-text-2)}.back-button{border-width:0px;border-style:solid;border-color:var(--calcite-ui-border-3);border-inline-end-width:1px}.header-actions{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:stretch}.header-actions--end{margin-inline-start:auto}.content-wrapper{display:flex;block-size:100%;flex:1 1 auto;flex-direction:column;flex-wrap:nowrap;align-items:stretch;overflow:auto;background-color:var(--calcite-ui-background)}.footer{display:flex;inline-size:100%;justify-content:space-evenly;background-color:var(--calcite-ui-foreground-1);flex:0 0 auto;padding:var(--calcite-panel-footer-padding, 0.5rem);border-block-start:1px solid var(--calcite-ui-border-3)}.fab-container{position:sticky;inset-block-end:0px;z-index:var(--calcite-app-z-index-sticky);margin-block:0px;margin-inline:auto;display:block;padding:0.5rem;inset-inline:0;inline-size:-moz-fit-content;inline-size:fit-content}:host([hidden]){display:none}[hidden]{display:none}";

const Panel = /*@__PURE__*/ (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_13__.proxyCustomElement)(class extends _stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_13__.HTMLElement {
  constructor() {
    super();
    this.__registerHost();
    this.__attachShadow();
    this.calcitePanelClose = (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_13__.createEvent)(this, "calcitePanelClose", 6);
    this.calcitePanelToggle = (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_13__.createEvent)(this, "calcitePanelToggle", 6);
    this.calcitePanelScroll = (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_13__.createEvent)(this, "calcitePanelScroll", 6);
    this.resizeObserver = (0,_observers_js__WEBPACK_IMPORTED_MODULE_3__.c)("resize", () => this.resizeHandler());
    // --------------------------------------------------------------------------
    //
    //  Private Methods
    //
    // --------------------------------------------------------------------------
    this.resizeHandler = () => {
      const { panelScrollEl } = this;
      if (!panelScrollEl ||
        typeof panelScrollEl.scrollHeight !== "number" ||
        typeof panelScrollEl.offsetHeight !== "number") {
        return;
      }
      panelScrollEl.tabIndex = panelScrollEl.scrollHeight > panelScrollEl.offsetHeight ? 0 : -1;
    };
    this.setContainerRef = (node) => {
      this.containerEl = node;
    };
    this.panelKeyDownHandler = (event) => {
      if (this.closable && event.key === "Escape" && !event.defaultPrevented) {
        this.close();
        event.preventDefault();
      }
    };
    this.close = () => {
      this.closed = true;
      this.calcitePanelClose.emit();
    };
    this.collapse = () => {
      this.collapsed = !this.collapsed;
      this.calcitePanelToggle.emit();
    };
    this.panelScrollHandler = () => {
      this.calcitePanelScroll.emit();
    };
    this.handleHeaderActionsStartSlotChange = (event) => {
      this.hasStartActions = (0,_dom_js__WEBPACK_IMPORTED_MODULE_0__.e)(event);
    };
    this.handleHeaderActionsEndSlotChange = (event) => {
      this.hasEndActions = (0,_dom_js__WEBPACK_IMPORTED_MODULE_0__.e)(event);
    };
    this.handleHeaderMenuActionsSlotChange = (event) => {
      this.hasMenuItems = (0,_dom_js__WEBPACK_IMPORTED_MODULE_0__.e)(event);
    };
    this.handleActionBarSlotChange = (event) => {
      const actionBars = (0,_dom_js__WEBPACK_IMPORTED_MODULE_0__.s)(event).filter((el) => el?.matches("calcite-action-bar"));
      actionBars.forEach((actionBar) => (actionBar.layout = "horizontal"));
      this.hasActionBar = !!actionBars.length;
    };
    this.handleHeaderContentSlotChange = (event) => {
      this.hasHeaderContent = (0,_dom_js__WEBPACK_IMPORTED_MODULE_0__.e)(event);
    };
    this.handleFooterSlotChange = (event) => {
      this.hasFooterContent = (0,_dom_js__WEBPACK_IMPORTED_MODULE_0__.e)(event);
    };
    this.handleFooterActionsSlotChange = (event) => {
      this.hasFooterActions = (0,_dom_js__WEBPACK_IMPORTED_MODULE_0__.e)(event);
    };
    this.handleFabSlotChange = (event) => {
      this.hasFab = (0,_dom_js__WEBPACK_IMPORTED_MODULE_0__.e)(event);
    };
    this.setPanelScrollEl = (el) => {
      this.panelScrollEl = el;
      this.resizeObserver?.disconnect();
      if (el) {
        this.resizeObserver?.observe(el);
        this.resizeHandler();
      }
    };
    this.closed = false;
    this.disabled = false;
    this.closable = false;
    this.collapsed = false;
    this.collapseDirection = "down";
    this.collapsible = false;
    this.headingLevel = undefined;
    this.loading = false;
    this.heading = undefined;
    this.description = undefined;
    this.menuOpen = false;
    this.messageOverrides = undefined;
    this.messages = undefined;
    this.hasStartActions = false;
    this.hasEndActions = false;
    this.hasMenuItems = false;
    this.hasHeaderContent = false;
    this.hasActionBar = false;
    this.hasFooterContent = false;
    this.hasFooterActions = false;
    this.hasFab = false;
    this.defaultMessages = undefined;
    this.effectiveLocale = "";
    this.showHeaderContent = false;
  }
  onMessagesChange() {
    /* wired up by t9n util */
  }
  //--------------------------------------------------------------------------
  //
  //  Lifecycle
  //
  //--------------------------------------------------------------------------
  connectedCallback() {
    (0,_interactive_js__WEBPACK_IMPORTED_MODULE_1__.c)(this);
    (0,_locale_js__WEBPACK_IMPORTED_MODULE_6__.c)(this);
    (0,_t9n_js__WEBPACK_IMPORTED_MODULE_7__.c)(this);
  }
  async componentWillLoad() {
    (0,_loadable_js__WEBPACK_IMPORTED_MODULE_2__.a)(this);
    await (0,_t9n_js__WEBPACK_IMPORTED_MODULE_7__.s)(this);
  }
  componentDidLoad() {
    (0,_loadable_js__WEBPACK_IMPORTED_MODULE_2__.s)(this);
  }
  componentDidRender() {
    (0,_interactive_js__WEBPACK_IMPORTED_MODULE_1__.u)(this);
  }
  disconnectedCallback() {
    (0,_interactive_js__WEBPACK_IMPORTED_MODULE_1__.d)(this);
    (0,_locale_js__WEBPACK_IMPORTED_MODULE_6__.d)(this);
    (0,_t9n_js__WEBPACK_IMPORTED_MODULE_7__.d)(this);
    this.resizeObserver?.disconnect();
  }
  effectiveLocaleChange() {
    (0,_t9n_js__WEBPACK_IMPORTED_MODULE_7__.u)(this, this.effectiveLocale);
  }
  // --------------------------------------------------------------------------
  //
  //  Methods
  //
  // --------------------------------------------------------------------------
  /**
   * Sets focus on the component's first focusable element.
   */
  async setFocus() {
    await (0,_loadable_js__WEBPACK_IMPORTED_MODULE_2__.c)(this);
    (0,_dom_js__WEBPACK_IMPORTED_MODULE_0__.f)(this.containerEl);
  }
  /**
   * Scrolls the component's content to a specified set of coordinates.
   *
   * @example
   * myCalciteFlowItem.scrollContentTo({
   *   left: 0, // Specifies the number of pixels along the X axis to scroll the window or element.
   *   top: 0, // Specifies the number of pixels along the Y axis to scroll the window or element
   *   behavior: "auto" // Specifies whether the scrolling should animate smoothly (smooth), or happen instantly in a single jump (auto, the default value).
   * });
   * @param options - allows specific coordinates to be defined.
   * @returns - promise that resolves once the content is scrolled to.
   */
  async scrollContentTo(options) {
    this.panelScrollEl?.scrollTo(options);
  }
  // --------------------------------------------------------------------------
  //
  //  Render Methods
  //
  // --------------------------------------------------------------------------
  renderHeaderContent() {
    const { heading, headingLevel, description, hasHeaderContent } = this;
    const headingNode = heading ? ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_13__.h)(_Heading_js__WEBPACK_IMPORTED_MODULE_5__.H, { class: CSS.heading, level: headingLevel }, heading)) : null;
    const descriptionNode = description ? (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_13__.h)("span", { class: CSS.description }, description) : null;
    return !hasHeaderContent && (headingNode || descriptionNode) ? ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_13__.h)("div", { class: CSS.headerContent, key: "header-content" }, headingNode, descriptionNode)) : null;
  }
  renderActionBar() {
    return ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_13__.h)("div", { class: CSS.actionBarContainer, hidden: !this.hasActionBar }, (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_13__.h)("slot", { name: SLOTS.actionBar, onSlotchange: this.handleActionBarSlotChange })));
  }
  renderHeaderSlottedContent() {
    return ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_13__.h)("div", { class: CSS.headerContent, hidden: !this.hasHeaderContent, key: "slotted-header-content" }, (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_13__.h)("slot", { name: SLOTS.headerContent, onSlotchange: this.handleHeaderContentSlotChange })));
  }
  renderHeaderStartActions() {
    const { hasStartActions } = this;
    return ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_13__.h)("div", { class: { [CSS.headerActionsStart]: true, [CSS.headerActions]: true }, hidden: !hasStartActions, key: "header-actions-start" }, (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_13__.h)("slot", { name: SLOTS.headerActionsStart, onSlotchange: this.handleHeaderActionsStartSlotChange })));
  }
  renderHeaderActionsEnd() {
    const { hasEndActions, messages, closable, collapsed, collapseDirection, collapsible, hasMenuItems, } = this;
    const { collapse, expand, close } = messages;
    const icons = [ICONS.expand, ICONS.collapse];
    if (collapseDirection === "up") {
      icons.reverse();
    }
    const collapseNode = collapsible ? ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_13__.h)("calcite-action", { "aria-expanded": (0,_dom_js__WEBPACK_IMPORTED_MODULE_0__.t)(!collapsed), "aria-label": collapse, "data-test": "collapse", icon: collapsed ? icons[0] : icons[1], onClick: this.collapse, text: collapse, title: collapsed ? expand : collapse })) : null;
    const closeNode = closable ? ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_13__.h)("calcite-action", { "aria-label": close, "data-test": "close", icon: ICONS.close, onClick: this.close, text: close, title: close })) : null;
    const slotNode = ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_13__.h)("slot", { name: SLOTS.headerActionsEnd, onSlotchange: this.handleHeaderActionsEndSlotChange }));
    const showContainer = hasEndActions || collapseNode || closeNode || hasMenuItems;
    return ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_13__.h)("div", { class: { [CSS.headerActionsEnd]: true, [CSS.headerActions]: true }, hidden: !showContainer, key: "header-actions-end" }, slotNode, this.renderMenu(), collapseNode, closeNode));
  }
  renderMenu() {
    const { hasMenuItems, messages, menuOpen } = this;
    return ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_13__.h)("calcite-action-menu", { flipPlacements: ["top", "bottom"], hidden: !hasMenuItems, key: "menu", label: messages.options, open: menuOpen, placement: "bottom-end" }, (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_13__.h)("calcite-action", { icon: ICONS.menu, slot: _action_menu_js__WEBPACK_IMPORTED_MODULE_4__.S.trigger, text: messages.options }), (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_13__.h)("slot", { name: SLOTS.headerMenuActions, onSlotchange: this.handleHeaderMenuActionsSlotChange })));
  }
  renderHeaderNode() {
    const { hasHeaderContent, hasStartActions, hasEndActions, closable, collapsible, hasMenuItems, hasActionBar, } = this;
    const headerContentNode = this.renderHeaderContent();
    const showHeaderContent = hasHeaderContent ||
      !!headerContentNode ||
      hasStartActions ||
      hasEndActions ||
      collapsible ||
      closable ||
      hasMenuItems;
    this.showHeaderContent = showHeaderContent;
    return ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_13__.h)("header", { class: CSS.header, hidden: !(showHeaderContent || hasActionBar) }, (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_13__.h)("div", { class: { [CSS.headerContainer]: true, [CSS.headerContainerBorderEnd]: hasActionBar }, hidden: !showHeaderContent }, this.renderHeaderStartActions(), this.renderHeaderSlottedContent(), headerContentNode, this.renderHeaderActionsEnd()), this.renderActionBar()));
  }
  renderFooterNode() {
    const { hasFooterContent, hasFooterActions } = this;
    const showFooter = hasFooterContent || hasFooterActions;
    return ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_13__.h)("footer", { class: CSS.footer, hidden: !showFooter }, (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_13__.h)("slot", { key: "footer-slot", name: SLOTS.footer, onSlotchange: this.handleFooterSlotChange }), (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_13__.h)("slot", { key: "footer-actions-slot", name: SLOTS.footerActions, onSlotchange: this.handleFooterActionsSlotChange })));
  }
  renderContent() {
    return ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_13__.h)("div", { class: CSS.contentWrapper, hidden: this.collapsible && this.collapsed, onScroll: this.panelScrollHandler,
      // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)
      ref: this.setPanelScrollEl }, (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_13__.h)("slot", null), this.renderFab()));
  }
  renderFab() {
    return ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_13__.h)("div", { class: CSS.fabContainer, hidden: !this.hasFab }, (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_13__.h)("slot", { name: SLOTS.fab, onSlotchange: this.handleFabSlotChange })));
  }
  render() {
    const { loading, panelKeyDownHandler, closed, closable } = this;
    const panelNode = ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_13__.h)("article", { "aria-busy": (0,_dom_js__WEBPACK_IMPORTED_MODULE_0__.t)(loading), class: CSS.container, hidden: closed, onKeyDown: panelKeyDownHandler, tabIndex: closable ? 0 : -1,
      // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)
      ref: this.setContainerRef }, this.renderHeaderNode(), this.renderContent(), this.renderFooterNode()));
    return ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_13__.h)(_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_13__.Fragment, null, loading ? (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_13__.h)("calcite-scrim", { loading: loading }) : null, panelNode));
  }
  static get assetsDirs() { return ["assets"]; }
  get el() { return this; }
  static get watchers() { return {
    "messageOverrides": ["onMessagesChange"],
    "effectiveLocale": ["effectiveLocaleChange"]
  }; }
  static get style() { return panelCss; }
}, [1, "calcite-panel", {
    "closed": [1540],
    "disabled": [516],
    "closable": [516],
    "collapsed": [516],
    "collapseDirection": [1, "collapse-direction"],
    "collapsible": [516],
    "headingLevel": [514, "heading-level"],
    "loading": [516],
    "heading": [1],
    "description": [1],
    "menuOpen": [516, "menu-open"],
    "messageOverrides": [1040],
    "messages": [1040],
    "hasStartActions": [32],
    "hasEndActions": [32],
    "hasMenuItems": [32],
    "hasHeaderContent": [32],
    "hasActionBar": [32],
    "hasFooterContent": [32],
    "hasFooterActions": [32],
    "hasFab": [32],
    "defaultMessages": [32],
    "effectiveLocale": [32],
    "showHeaderContent": [32],
    "setFocus": [64],
    "scrollContentTo": [64]
  }]);
function defineCustomElement() {
  if (typeof customElements === "undefined") {
    return;
  }
  const components = ["calcite-panel", "calcite-action", "calcite-action-menu", "calcite-icon", "calcite-loader", "calcite-popover", "calcite-scrim"];
  components.forEach(tagName => { switch (tagName) {
    case "calcite-panel":
      if (!customElements.get(tagName)) {
        customElements.define(tagName, Panel);
      }
      break;
    case "calcite-action":
      if (!customElements.get(tagName)) {
        (0,_action_js__WEBPACK_IMPORTED_MODULE_8__.d)();
      }
      break;
    case "calcite-action-menu":
      if (!customElements.get(tagName)) {
        (0,_action_menu_js__WEBPACK_IMPORTED_MODULE_4__.d)();
      }
      break;
    case "calcite-icon":
      if (!customElements.get(tagName)) {
        (0,_icon_js__WEBPACK_IMPORTED_MODULE_9__.d)();
      }
      break;
    case "calcite-loader":
      if (!customElements.get(tagName)) {
        (0,_loader_js__WEBPACK_IMPORTED_MODULE_10__.d)();
      }
      break;
    case "calcite-popover":
      if (!customElements.get(tagName)) {
        (0,_popover_js__WEBPACK_IMPORTED_MODULE_11__.d)();
      }
      break;
    case "calcite-scrim":
      if (!customElements.get(tagName)) {
        (0,_scrim_js__WEBPACK_IMPORTED_MODULE_12__.d)();
      }
      break;
  } });
}
defineCustomElement();




/***/ }),

/***/ "./node_modules/@arcgis/core/node_modules/@esri/calcite-components/dist/components/scrim.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/node_modules/@esri/calcite-components/dist/components/scrim.js ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   S: () => (/* binding */ Scrim),
/* harmony export */   d: () => (/* binding */ defineCustomElement)
/* harmony export */ });
/* harmony import */ var _stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @stencil/core/internal/client/index.js */ "./node_modules/@stencil/core/internal/client/index.js");
/* harmony import */ var _locale_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./locale.js */ "./node_modules/@arcgis/core/node_modules/@esri/calcite-components/dist/components/locale.js");
/* harmony import */ var _t9n_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./t9n.js */ "./node_modules/@arcgis/core/node_modules/@esri/calcite-components/dist/components/t9n.js");
/* harmony import */ var _observers_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./observers.js */ "./node_modules/@arcgis/core/node_modules/@esri/calcite-components/dist/components/observers.js");
/* harmony import */ var _dom_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./dom.js */ "./node_modules/@arcgis/core/node_modules/@esri/calcite-components/dist/components/dom.js");
/* harmony import */ var _loader_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./loader.js */ "./node_modules/@arcgis/core/node_modules/@esri/calcite-components/dist/components/loader.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.11.0
 */







const CSS = {
  scrim: "scrim",
  content: "content",
};
const BREAKPOINTS = {
  s: 72,
  // medium is assumed default.
  l: 480, // Greater than or equal to 480px.
};

const scrimCss = ":host{position:absolute;inset:0px;z-index:var(--calcite-app-z-index-overlay);display:flex;block-size:100%;inline-size:100%;flex-direction:column;align-items:stretch}@keyframes calcite-scrim-fade-in{0%{--tw-bg-opacity:0}100%{--tw-text-opacity:1}}.scrim{position:absolute;inset:0px;display:flex;flex-direction:column;align-content:center;align-items:center;justify-content:center;overflow:hidden;animation:calcite-scrim-fade-in var(--calcite-internal-animation-timing-medium) ease-in-out;background-color:var(--calcite-scrim-background, var(--calcite-scrim-background-internal))}.content{padding:1rem}:host([hidden]){display:none}[hidden]{display:none}";

const Scrim = /*@__PURE__*/ (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_5__.proxyCustomElement)(class extends _stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_5__.HTMLElement {
  constructor() {
    super();
    this.__registerHost();
    this.__attachShadow();
    this.resizeObserver = (0,_observers_js__WEBPACK_IMPORTED_MODULE_2__.c)("resize", () => this.handleResize());
    // --------------------------------------------------------------------------
    //
    //  Private Methods
    //
    // --------------------------------------------------------------------------
    this.handleDefaultSlotChange = (event) => {
      this.hasContent = (0,_dom_js__WEBPACK_IMPORTED_MODULE_3__.w)(event);
    };
    this.storeLoaderEl = (el) => {
      this.loaderEl = el;
      this.handleResize();
    };
    this.loading = false;
    this.messages = undefined;
    this.messageOverrides = undefined;
    this.loaderScale = undefined;
    this.defaultMessages = undefined;
    this.effectiveLocale = "";
    this.hasContent = false;
  }
  onMessagesChange() {
    /* wired up by t9n util */
  }
  effectiveLocaleChange() {
    (0,_t9n_js__WEBPACK_IMPORTED_MODULE_1__.u)(this, this.effectiveLocale);
  }
  //--------------------------------------------------------------------------
  //
  //  Lifecycle
  //
  //--------------------------------------------------------------------------
  connectedCallback() {
    (0,_locale_js__WEBPACK_IMPORTED_MODULE_0__.c)(this);
    (0,_t9n_js__WEBPACK_IMPORTED_MODULE_1__.c)(this);
    this.resizeObserver?.observe(this.el);
  }
  async componentWillLoad() {
    await (0,_t9n_js__WEBPACK_IMPORTED_MODULE_1__.s)(this);
  }
  disconnectedCallback() {
    (0,_locale_js__WEBPACK_IMPORTED_MODULE_0__.d)(this);
    (0,_t9n_js__WEBPACK_IMPORTED_MODULE_1__.d)(this);
    this.resizeObserver?.disconnect();
  }
  // --------------------------------------------------------------------------
  //
  //  Render Method
  //
  // --------------------------------------------------------------------------
  render() {
    const { hasContent, loading, messages } = this;
    return ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_5__.h)("div", { class: CSS.scrim }, loading ? ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_5__.h)("calcite-loader", { label: messages.loading, scale: this.loaderScale,
      // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)
      ref: this.storeLoaderEl })) : null, (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_5__.h)("div", { class: CSS.content, hidden: !hasContent }, (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_5__.h)("slot", { onSlotchange: this.handleDefaultSlotChange }))));
  }
  getScale(size) {
    if (size < BREAKPOINTS.s) {
      return "s";
    }
    else if (size >= BREAKPOINTS.l) {
      return "l";
    }
    else {
      return "m";
    }
  }
  handleResize() {
    const { loaderEl, el } = this;
    if (!loaderEl) {
      return;
    }
    this.loaderScale = this.getScale(Math.min(el.clientHeight, el.clientWidth) ?? 0);
  }
  static get assetsDirs() { return ["assets"]; }
  get el() { return this; }
  static get watchers() { return {
    "messageOverrides": ["onMessagesChange"],
    "effectiveLocale": ["effectiveLocaleChange"]
  }; }
  static get style() { return scrimCss; }
}, [1, "calcite-scrim", {
    "loading": [516],
    "messages": [1040],
    "messageOverrides": [1040],
    "loaderScale": [32],
    "defaultMessages": [32],
    "effectiveLocale": [32],
    "hasContent": [32]
  }]);
function defineCustomElement() {
  if (typeof customElements === "undefined") {
    return;
  }
  const components = ["calcite-scrim", "calcite-loader"];
  components.forEach(tagName => { switch (tagName) {
    case "calcite-scrim":
      if (!customElements.get(tagName)) {
        customElements.define(tagName, Scrim);
      }
      break;
    case "calcite-loader":
      if (!customElements.get(tagName)) {
        (0,_loader_js__WEBPACK_IMPORTED_MODULE_4__.d)();
      }
      break;
  } });
}
defineCustomElement();




/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfYXJjZ2lzX2NvcmVfbm9kZV9tb2R1bGVzX2VzcmlfY2FsY2l0ZS1jb21wb25lbnRzX2Rpc3RfY29tcG9uZW50c19wYW5lbF9qcy5idW5kbGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ21IO0FBQzJCO0FBQzNCO0FBQ0w7QUFDekQ7QUFDdUI7QUFDaEM7QUFDa0M7QUFDb0M7QUFDekQ7QUFDRjtBQUNFO0FBQ0M7QUFDRjs7QUFFeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHdCQUF3QixzQkFBc0IsZ0RBQWdELCtCQUErQixzQ0FBc0MsUUFBUSxzQkFBc0Isa0JBQWtCLGVBQWUseUJBQXlCLGlCQUFpQiwyQ0FBMkMsbURBQW1ELG9CQUFvQixNQUFNLGtCQUFrQixhQUFhLGdCQUFnQixpQkFBaUIsY0FBYywrREFBK0QseUdBQXlHLFVBQVUsUUFBUSxXQUFXLGFBQWEsNEJBQTRCLG1CQUFtQiw4QkFBOEIsK0JBQStCLFNBQVMsV0FBVyxZQUFZLDhDQUE4QyxpQkFBaUIsY0FBYyxlQUFlLFdBQVcsV0FBVyxhQUFhLGlCQUFpQixjQUFjLHNCQUFzQixvQkFBb0IsOENBQThDLFlBQVksdUdBQXVHLG1CQUFtQixhQUFhLFFBQVEsMENBQTBDLGFBQWEsc0JBQXNCLGdEQUFnRCxvR0FBb0csa0JBQWtCLGFBQWEsaUJBQWlCLG1CQUFtQixvQkFBb0IsMkJBQTJCLGNBQWMsOEJBQThCLHNEQUFzRCxzQkFBc0IsaUJBQWlCLG9EQUFvRCxpQkFBaUIsZ0JBQWdCLGFBQWEs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bEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDZDQUFxQjtBQUM3QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRWdEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3ludmlldy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvbm9kZV9tb2R1bGVzL0Blc3JpL2NhbGNpdGUtY29tcG9uZW50cy9kaXN0L2NvbXBvbmVudHMvcGFuZWwuanMiLCJ3ZWJwYWNrOi8vc3ludmlldy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvbm9kZV9tb2R1bGVzL0Blc3JpL2NhbGNpdGUtY29tcG9uZW50cy9kaXN0L2NvbXBvbmVudHMvc2NyaW0uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtZGVzaWduLXN5c3RlbS9ibG9iL21haW4vTElDRU5TRS5tZCBmb3IgZGV0YWlscy5cbiAqIHYxLjExLjBcbiAqL1xuaW1wb3J0IHsgcHJveHlDdXN0b21FbGVtZW50LCBIVE1MRWxlbWVudCwgY3JlYXRlRXZlbnQsIGgsIEZyYWdtZW50IH0gZnJvbSAnQHN0ZW5jaWwvY29yZS9pbnRlcm5hbC9jbGllbnQvaW5kZXguanMnO1xuaW1wb3J0IHsgZSBhcyBzbG90Q2hhbmdlSGFzQXNzaWduZWRFbGVtZW50LCBzIGFzIHNsb3RDaGFuZ2VHZXRBc3NpZ25lZEVsZW1lbnRzLCBmIGFzIGZvY3VzRmlyc3RUYWJiYWJsZSwgdCBhcyB0b0FyaWFCb29sZWFuIH0gZnJvbSAnLi9kb20uanMnO1xuaW1wb3J0IHsgYyBhcyBjb25uZWN0SW50ZXJhY3RpdmUsIHUgYXMgdXBkYXRlSG9zdEludGVyYWN0aW9uLCBkIGFzIGRpc2Nvbm5lY3RJbnRlcmFjdGl2ZSB9IGZyb20gJy4vaW50ZXJhY3RpdmUuanMnO1xuaW1wb3J0IHsgYSBhcyBzZXRVcExvYWRhYmxlQ29tcG9uZW50LCBzIGFzIHNldENvbXBvbmVudExvYWRlZCwgYyBhcyBjb21wb25lbnRGb2N1c2FibGUgfSBmcm9tICcuL2xvYWRhYmxlLmpzJztcbmltcG9ydCB7IGMgYXMgY3JlYXRlT2JzZXJ2ZXIgfSBmcm9tICcuL29ic2VydmVycy5qcyc7XG5pbXBvcnQgeyBTIGFzIFNMT1RTJDEsIGQgYXMgZGVmaW5lQ3VzdG9tRWxlbWVudCQ1IH0gZnJvbSAnLi9hY3Rpb24tbWVudS5qcyc7XG5pbXBvcnQgeyBIIGFzIEhlYWRpbmcgfSBmcm9tICcuL0hlYWRpbmcuanMnO1xuaW1wb3J0IHsgYyBhcyBjb25uZWN0TG9jYWxpemVkLCBkIGFzIGRpc2Nvbm5lY3RMb2NhbGl6ZWQgfSBmcm9tICcuL2xvY2FsZS5qcyc7XG5pbXBvcnQgeyBjIGFzIGNvbm5lY3RNZXNzYWdlcywgcyBhcyBzZXRVcE1lc3NhZ2VzLCBkIGFzIGRpc2Nvbm5lY3RNZXNzYWdlcywgdSBhcyB1cGRhdGVNZXNzYWdlcyB9IGZyb20gJy4vdDluLmpzJztcbmltcG9ydCB7IGQgYXMgZGVmaW5lQ3VzdG9tRWxlbWVudCQ2IH0gZnJvbSAnLi9hY3Rpb24uanMnO1xuaW1wb3J0IHsgZCBhcyBkZWZpbmVDdXN0b21FbGVtZW50JDQgfSBmcm9tICcuL2ljb24uanMnO1xuaW1wb3J0IHsgZCBhcyBkZWZpbmVDdXN0b21FbGVtZW50JDMgfSBmcm9tICcuL2xvYWRlci5qcyc7XG5pbXBvcnQgeyBkIGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkMiB9IGZyb20gJy4vcG9wb3Zlci5qcyc7XG5pbXBvcnQgeyBkIGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkMSB9IGZyb20gJy4vc2NyaW0uanMnO1xuXG5jb25zdCBDU1MgPSB7XG4gIGFjdGlvbkJhckNvbnRhaW5lcjogXCJhY3Rpb24tYmFyLWNvbnRhaW5lclwiLFxuICBiYWNrQnV0dG9uOiBcImJhY2stYnV0dG9uXCIsXG4gIGNvbnRhaW5lcjogXCJjb250YWluZXJcIixcbiAgaGVhZGVyOiBcImhlYWRlclwiLFxuICBoZWFkZXJDb250YWluZXI6IFwiaGVhZGVyLWNvbnRhaW5lclwiLFxuICBoZWFkZXJDb250YWluZXJCb3JkZXJFbmQ6IFwiaGVhZGVyLWNvbnRhaW5lci0tYm9yZGVyLWVuZFwiLFxuICBoZWFkaW5nOiBcImhlYWRpbmdcIixcbiAgc3VtbWFyeTogXCJzdW1tYXJ5XCIsXG4gIGRlc2NyaXB0aW9uOiBcImRlc2NyaXB0aW9uXCIsXG4gIGhlYWRlckNvbnRlbnQ6IFwiaGVhZGVyLWNvbnRlbnRcIixcbiAgaGVhZGVyQWN0aW9uczogXCJoZWFkZXItYWN0aW9uc1wiLFxuICBoZWFkZXJBY3Rpb25zRW5kOiBcImhlYWRlci1hY3Rpb25zLS1lbmRcIixcbiAgaGVhZGVyQWN0aW9uc1N0YXJ0OiBcImhlYWRlci1hY3Rpb25zLS1zdGFydFwiLFxuICBjb250ZW50V3JhcHBlcjogXCJjb250ZW50LXdyYXBwZXJcIixcbiAgZmFiQ29udGFpbmVyOiBcImZhYi1jb250YWluZXJcIixcbiAgZm9vdGVyOiBcImZvb3RlclwiLFxufTtcbmNvbnN0IElDT05TID0ge1xuICBjbG9zZTogXCJ4XCIsXG4gIG1lbnU6IFwiZWxsaXBzaXNcIixcbiAgYmFja0xlZnQ6IFwiY2hldnJvbi1sZWZ0XCIsXG4gIGJhY2tSaWdodDogXCJjaGV2cm9uLXJpZ2h0XCIsXG4gIGV4cGFuZDogXCJjaGV2cm9uLWRvd25cIixcbiAgY29sbGFwc2U6IFwiY2hldnJvbi11cFwiLFxufTtcbmNvbnN0IFNMT1RTID0ge1xuICBhY3Rpb25CYXI6IFwiYWN0aW9uLWJhclwiLFxuICBoZWFkZXJBY3Rpb25zU3RhcnQ6IFwiaGVhZGVyLWFjdGlvbnMtc3RhcnRcIixcbiAgaGVhZGVyQWN0aW9uc0VuZDogXCJoZWFkZXItYWN0aW9ucy1lbmRcIixcbiAgaGVhZGVyTWVudUFjdGlvbnM6IFwiaGVhZGVyLW1lbnUtYWN0aW9uc1wiLFxuICBoZWFkZXJDb250ZW50OiBcImhlYWRlci1jb250ZW50XCIsXG4gIGZhYjogXCJmYWJcIixcbiAgZm9vdGVyOiBcImZvb3RlclwiLFxuICBmb290ZXJBY3Rpb25zOiBcImZvb3Rlci1hY3Rpb25zXCIsXG59O1xuXG5jb25zdCBwYW5lbENzcyA9IFwiOmhvc3R7Ym94LXNpemluZzpib3JkZXItYm94O2JhY2tncm91bmQtY29sb3I6dmFyKC0tY2FsY2l0ZS11aS1mb3JlZ3JvdW5kLTEpO2NvbG9yOnZhcigtLWNhbGNpdGUtdWktdGV4dC0yKTtmb250LXNpemU6dmFyKC0tY2FsY2l0ZS1mb250LXNpemUtLTEpfTpob3N0ICp7Ym94LXNpemluZzpib3JkZXItYm94fTpob3N0KFtkaXNhYmxlZF0pe2N1cnNvcjpkZWZhdWx0Oy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lO29wYWNpdHk6dmFyKC0tY2FsY2l0ZS11aS1vcGFjaXR5LWRpc2FibGVkKX06aG9zdChbZGlzYWJsZWRdKSAqLDpob3N0KFtkaXNhYmxlZF0pIDo6c2xvdHRlZCgqKXtwb2ludGVyLWV2ZW50czpub25lfTpob3N0e3Bvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6ZmxleDtibG9jay1zaXplOjEwMCU7aW5saW5lLXNpemU6MTAwJTtmbGV4OjEgMSBhdXRvOy0tY2FsY2l0ZS1taW4taGVhZGVyLWhlaWdodDpjYWxjKHZhcigtLWNhbGNpdGUtaWNvbi1zaXplKSAqIDMpfTpob3N0KFtkaXNhYmxlZF0pIDo6c2xvdHRlZChbY2FsY2l0ZS1oeWRyYXRlZF1bZGlzYWJsZWRdKSw6aG9zdChbZGlzYWJsZWRdKSBbY2FsY2l0ZS1oeWRyYXRlZF1bZGlzYWJsZWRde29wYWNpdHk6MX0uaGVhZGVye21hcmdpbjowcHg7ZGlzcGxheTpmbGV4O2FsaWduLWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjthbGlnbi1pdGVtczpjZW50ZXI7ZmlsbDp2YXIoLS1jYWxjaXRlLXVpLXRleHQtMik7Y29sb3I6dmFyKC0tY2FsY2l0ZS11aS10ZXh0LTIpfS5oZWFkaW5ne21hcmdpbjowcHg7cGFkZGluZzowcHg7Zm9udC13ZWlnaHQ6dmFyKC0tY2FsY2l0ZS1mb250LXdlaWdodC1tZWRpdW0pfS5oZWFkZXIgLmhlYWRpbmd7ZmxleDoxIDEgYXV0bztwYWRkaW5nOjAuNXJlbX0uY29udGFpbmVye21hcmdpbjowcHg7ZGlzcGxheTpmbGV4O2lubGluZS1zaXplOjEwMCU7ZmxleDoxIDEgYXV0bztmbGV4LWRpcmVjdGlvbjpjb2x1bW47YWxpZ24taXRlbXM6c3RyZXRjaDtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtdWktYmFja2dyb3VuZCk7cGFkZGluZzowcHg7dHJhbnNpdGlvbjptYXgtYmxvY2stc2l6ZSB2YXIoLS1jYWxjaXRlLWFuaW1hdGlvbi10aW1pbmcpLCBpbmxpbmUtc2l6ZSB2YXIoLS1jYWxjaXRlLWFuaW1hdGlvbi10aW1pbmcpfS5jb250YWluZXJbaGlkZGVuXXtkaXNwbGF5Om5vbmV9LmhlYWRlcnt6LWluZGV4OnZhcigtLWNhbGNpdGUtYXBwLXotaW5kZXgtaGVhZGVyKTtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2JhY2tncm91bmQtY29sb3I6dmFyKC0tY2FsY2l0ZS11aS1mb3JlZ3JvdW5kLTEpO2JvcmRlci1ibG9jay1lbmQ6dmFyKC0tY2FsY2l0ZS1wYW5lbC1oZWFkZXItYm9yZGVyLWJsb2NrLWVuZCwgMXB4IHNvbGlkIHZhcigtLWNhbGNpdGUtdWktYm9yZGVyLTMpKX0uaGVhZGVyLWNvbnRhaW5lcntkaXNwbGF5OmZsZXg7aW5saW5lLXNpemU6MTAwJTtmbGV4LWRpcmVjdGlvbjpyb3c7YWxpZ24taXRlbXM6c3RyZXRjaDtqdXN0aWZ5LWNvbnRlbnQ6ZmxleC1zdGFydDtmbGV4OjAgMCBhdXRvfS5oZWFkZXItY29udGFpbmVyLS1ib3JkZXItZW5ke2JvcmRlci1ibG9jay1lbmQ6MXB4IHNvbGlkIHZhcigtLWNhbGNpdGUtdWktYm9yZGVyLTMpfS5hY3Rpb24tYmFyLWNvbnRhaW5lcntpbmxpbmUtc2l6ZToxMDAlfS5hY3Rpb24tYmFyLWNvbnRhaW5lciA6OnNsb3R0ZWQoY2FsY2l0ZS1hY3Rpb24tYmFyKXtpbmxpbmUtc2l6ZToxMDAlfS5oZWFkZXItY29udGVudHtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO292ZXJmbG93OmhpZGRlbjtwYWRkaW5nLWlubGluZTowLjc1cmVtO3BhZGRpbmctYmxvY2s6MC44NzVyZW07bWFyZ2luLWlubGluZS1lbmQ6YXV0b30uaGVhZGVyLWNvbnRlbnQgLmhlYWRpbmcsLmhlYWRlci1jb250ZW50IC5kZXNjcmlwdGlvbntkaXNwbGF5OmJsb2NrO292ZXJmbG93LXdyYXA6YnJlYWstd29yZDtwYWRkaW5nOjBweH0uaGVhZGVyLWNvbnRlbnQgLmhlYWRpbmd7bWFyZ2luLWlubGluZTowcHg7bWFyZ2luLWJsb2NrOjBweCAwLjI1cmVtO2ZvbnQtc2l6ZTp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0wKTtsaW5lLWhlaWdodDoxLjI1cmVtO2ZvbnQtd2VpZ2h0OnZhcigtLWNhbGNpdGUtZm9udC13ZWlnaHQtbWVkaXVtKX0uaGVhZGVyLWNvbnRlbnQgLmhlYWRpbmc6b25seS1jaGlsZHttYXJnaW4tYmxvY2stZW5kOjBweH0uaGVhZGVyLWNvbnRlbnQgLmRlc2NyaXB0aW9ue2ZvbnQtc2l6ZTp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0tMSk7bGluZS1oZWlnaHQ6MXJlbTtjb2xvcjp2YXIoLS1jYWxjaXRlLXVpLXRleHQtMil9LmJhY2stYnV0dG9ue2JvcmRlci13aWR0aDowcHg7Ym9yZGVyLXN0eWxlOnNvbGlkO2JvcmRlci1jb2xvcjp2YXIoLS1jYWxjaXRlLXVpLWJvcmRlci0zKTtib3JkZXItaW5saW5lLWVuZC13aWR0aDoxcHh9LmhlYWRlci1hY3Rpb25ze2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpyb3c7ZmxleC13cmFwOm5vd3JhcDthbGlnbi1pdGVtczpzdHJldGNofS5oZWFkZXItYWN0aW9ucy0tZW5ke21hcmdpbi1pbmxpbmUtc3RhcnQ6YXV0b30uY29udGVudC13cmFwcGVye2Rpc3BsYXk6ZmxleDtibG9jay1zaXplOjEwMCU7ZmxleDoxIDEgYXV0bztmbGV4LWRpcmVjdGlvbjpjb2x1bW47ZmxleC13cmFwOm5vd3JhcDthbGlnbi1pdGVtczpzdHJldGNoO292ZXJmbG93OmF1dG87YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLXVpLWJhY2tncm91bmQpfS5mb290ZXJ7ZGlzcGxheTpmbGV4O2lubGluZS1zaXplOjEwMCU7anVzdGlmeS1jb250ZW50OnNwYWNlLWV2ZW5seTtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtdWktZm9yZWdyb3VuZC0xKTtmbGV4OjAgMCBhdXRvO3BhZGRpbmc6dmFyKC0tY2FsY2l0ZS1wYW5lbC1mb290ZXItcGFkZGluZywgMC41cmVtKTtib3JkZXItYmxvY2stc3RhcnQ6MXB4IHNvbGlkIHZhcigtLWNhbGNpdGUtdWktYm9yZGVyLTMpfS5mYWItY29udGFpbmVye3Bvc2l0aW9uOnN0aWNreTtpbnNldC1ibG9jay1lbmQ6MHB4O3otaW5kZXg6dmFyKC0tY2FsY2l0ZS1hcHAtei1pbmRleC1zdGlja3kpO21hcmdpbi1ibG9jazowcHg7bWFyZ2luLWlubGluZTphdXRvO2Rpc3BsYXk6YmxvY2s7cGFkZGluZzowLjVyZW07aW5zZXQtaW5saW5lOjA7aW5saW5lLXNpemU6LW1vei1maXQtY29udGVudDtpbmxpbmUtc2l6ZTpmaXQtY29udGVudH06aG9zdChbaGlkZGVuXSl7ZGlzcGxheTpub25lfVtoaWRkZW5de2Rpc3BsYXk6bm9uZX1cIjtcblxuY29uc3QgUGFuZWwgPSAvKkBfX1BVUkVfXyovIHByb3h5Q3VzdG9tRWxlbWVudChjbGFzcyBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLl9fcmVnaXN0ZXJIb3N0KCk7XG4gICAgdGhpcy5fX2F0dGFjaFNoYWRvdygpO1xuICAgIHRoaXMuY2FsY2l0ZVBhbmVsQ2xvc2UgPSBjcmVhdGVFdmVudCh0aGlzLCBcImNhbGNpdGVQYW5lbENsb3NlXCIsIDYpO1xuICAgIHRoaXMuY2FsY2l0ZVBhbmVsVG9nZ2xlID0gY3JlYXRlRXZlbnQodGhpcywgXCJjYWxjaXRlUGFuZWxUb2dnbGVcIiwgNik7XG4gICAgdGhpcy5jYWxjaXRlUGFuZWxTY3JvbGwgPSBjcmVhdGVFdmVudCh0aGlzLCBcImNhbGNpdGVQYW5lbFNjcm9sbFwiLCA2KTtcbiAgICB0aGlzLnJlc2l6ZU9ic2VydmVyID0gY3JlYXRlT2JzZXJ2ZXIoXCJyZXNpemVcIiwgKCkgPT4gdGhpcy5yZXNpemVIYW5kbGVyKCkpO1xuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy9cbiAgICAvLyAgUHJpdmF0ZSBNZXRob2RzXG4gICAgLy9cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIHRoaXMucmVzaXplSGFuZGxlciA9ICgpID0+IHtcbiAgICAgIGNvbnN0IHsgcGFuZWxTY3JvbGxFbCB9ID0gdGhpcztcbiAgICAgIGlmICghcGFuZWxTY3JvbGxFbCB8fFxuICAgICAgICB0eXBlb2YgcGFuZWxTY3JvbGxFbC5zY3JvbGxIZWlnaHQgIT09IFwibnVtYmVyXCIgfHxcbiAgICAgICAgdHlwZW9mIHBhbmVsU2Nyb2xsRWwub2Zmc2V0SGVpZ2h0ICE9PSBcIm51bWJlclwiKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHBhbmVsU2Nyb2xsRWwudGFiSW5kZXggPSBwYW5lbFNjcm9sbEVsLnNjcm9sbEhlaWdodCA+IHBhbmVsU2Nyb2xsRWwub2Zmc2V0SGVpZ2h0ID8gMCA6IC0xO1xuICAgIH07XG4gICAgdGhpcy5zZXRDb250YWluZXJSZWYgPSAobm9kZSkgPT4ge1xuICAgICAgdGhpcy5jb250YWluZXJFbCA9IG5vZGU7XG4gICAgfTtcbiAgICB0aGlzLnBhbmVsS2V5RG93bkhhbmRsZXIgPSAoZXZlbnQpID0+IHtcbiAgICAgIGlmICh0aGlzLmNsb3NhYmxlICYmIGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIiAmJiAhZXZlbnQuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLmNsb3NlID0gKCkgPT4ge1xuICAgICAgdGhpcy5jbG9zZWQgPSB0cnVlO1xuICAgICAgdGhpcy5jYWxjaXRlUGFuZWxDbG9zZS5lbWl0KCk7XG4gICAgfTtcbiAgICB0aGlzLmNvbGxhcHNlID0gKCkgPT4ge1xuICAgICAgdGhpcy5jb2xsYXBzZWQgPSAhdGhpcy5jb2xsYXBzZWQ7XG4gICAgICB0aGlzLmNhbGNpdGVQYW5lbFRvZ2dsZS5lbWl0KCk7XG4gICAgfTtcbiAgICB0aGlzLnBhbmVsU2Nyb2xsSGFuZGxlciA9ICgpID0+IHtcbiAgICAgIHRoaXMuY2FsY2l0ZVBhbmVsU2Nyb2xsLmVtaXQoKTtcbiAgICB9O1xuICAgIHRoaXMuaGFuZGxlSGVhZGVyQWN0aW9uc1N0YXJ0U2xvdENoYW5nZSA9IChldmVudCkgPT4ge1xuICAgICAgdGhpcy5oYXNTdGFydEFjdGlvbnMgPSBzbG90Q2hhbmdlSGFzQXNzaWduZWRFbGVtZW50KGV2ZW50KTtcbiAgICB9O1xuICAgIHRoaXMuaGFuZGxlSGVhZGVyQWN0aW9uc0VuZFNsb3RDaGFuZ2UgPSAoZXZlbnQpID0+IHtcbiAgICAgIHRoaXMuaGFzRW5kQWN0aW9ucyA9IHNsb3RDaGFuZ2VIYXNBc3NpZ25lZEVsZW1lbnQoZXZlbnQpO1xuICAgIH07XG4gICAgdGhpcy5oYW5kbGVIZWFkZXJNZW51QWN0aW9uc1Nsb3RDaGFuZ2UgPSAoZXZlbnQpID0+IHtcbiAgICAgIHRoaXMuaGFzTWVudUl0ZW1zID0gc2xvdENoYW5nZUhhc0Fzc2lnbmVkRWxlbWVudChldmVudCk7XG4gICAgfTtcbiAgICB0aGlzLmhhbmRsZUFjdGlvbkJhclNsb3RDaGFuZ2UgPSAoZXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IGFjdGlvbkJhcnMgPSBzbG90Q2hhbmdlR2V0QXNzaWduZWRFbGVtZW50cyhldmVudCkuZmlsdGVyKChlbCkgPT4gZWw/Lm1hdGNoZXMoXCJjYWxjaXRlLWFjdGlvbi1iYXJcIikpO1xuICAgICAgYWN0aW9uQmFycy5mb3JFYWNoKChhY3Rpb25CYXIpID0+IChhY3Rpb25CYXIubGF5b3V0ID0gXCJob3Jpem9udGFsXCIpKTtcbiAgICAgIHRoaXMuaGFzQWN0aW9uQmFyID0gISFhY3Rpb25CYXJzLmxlbmd0aDtcbiAgICB9O1xuICAgIHRoaXMuaGFuZGxlSGVhZGVyQ29udGVudFNsb3RDaGFuZ2UgPSAoZXZlbnQpID0+IHtcbiAgICAgIHRoaXMuaGFzSGVhZGVyQ29udGVudCA9IHNsb3RDaGFuZ2VIYXNBc3NpZ25lZEVsZW1lbnQoZXZlbnQpO1xuICAgIH07XG4gICAgdGhpcy5oYW5kbGVGb290ZXJTbG90Q2hhbmdlID0gKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLmhhc0Zvb3RlckNvbnRlbnQgPSBzbG90Q2hhbmdlSGFzQXNzaWduZWRFbGVtZW50KGV2ZW50KTtcbiAgICB9O1xuICAgIHRoaXMuaGFuZGxlRm9vdGVyQWN0aW9uc1Nsb3RDaGFuZ2UgPSAoZXZlbnQpID0+IHtcbiAgICAgIHRoaXMuaGFzRm9vdGVyQWN0aW9ucyA9IHNsb3RDaGFuZ2VIYXNBc3NpZ25lZEVsZW1lbnQoZXZlbnQpO1xuICAgIH07XG4gICAgdGhpcy5oYW5kbGVGYWJTbG90Q2hhbmdlID0gKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLmhhc0ZhYiA9IHNsb3RDaGFuZ2VIYXNBc3NpZ25lZEVsZW1lbnQoZXZlbnQpO1xuICAgIH07XG4gICAgdGhpcy5zZXRQYW5lbFNjcm9sbEVsID0gKGVsKSA9PiB7XG4gICAgICB0aGlzLnBhbmVsU2Nyb2xsRWwgPSBlbDtcbiAgICAgIHRoaXMucmVzaXplT2JzZXJ2ZXI/LmRpc2Nvbm5lY3QoKTtcbiAgICAgIGlmIChlbCkge1xuICAgICAgICB0aGlzLnJlc2l6ZU9ic2VydmVyPy5vYnNlcnZlKGVsKTtcbiAgICAgICAgdGhpcy5yZXNpemVIYW5kbGVyKCk7XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLmNsb3NlZCA9IGZhbHNlO1xuICAgIHRoaXMuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB0aGlzLmNsb3NhYmxlID0gZmFsc2U7XG4gICAgdGhpcy5jb2xsYXBzZWQgPSBmYWxzZTtcbiAgICB0aGlzLmNvbGxhcHNlRGlyZWN0aW9uID0gXCJkb3duXCI7XG4gICAgdGhpcy5jb2xsYXBzaWJsZSA9IGZhbHNlO1xuICAgIHRoaXMuaGVhZGluZ0xldmVsID0gdW5kZWZpbmVkO1xuICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgIHRoaXMuaGVhZGluZyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmRlc2NyaXB0aW9uID0gdW5kZWZpbmVkO1xuICAgIHRoaXMubWVudU9wZW4gPSBmYWxzZTtcbiAgICB0aGlzLm1lc3NhZ2VPdmVycmlkZXMgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5tZXNzYWdlcyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmhhc1N0YXJ0QWN0aW9ucyA9IGZhbHNlO1xuICAgIHRoaXMuaGFzRW5kQWN0aW9ucyA9IGZhbHNlO1xuICAgIHRoaXMuaGFzTWVudUl0ZW1zID0gZmFsc2U7XG4gICAgdGhpcy5oYXNIZWFkZXJDb250ZW50ID0gZmFsc2U7XG4gICAgdGhpcy5oYXNBY3Rpb25CYXIgPSBmYWxzZTtcbiAgICB0aGlzLmhhc0Zvb3RlckNvbnRlbnQgPSBmYWxzZTtcbiAgICB0aGlzLmhhc0Zvb3RlckFjdGlvbnMgPSBmYWxzZTtcbiAgICB0aGlzLmhhc0ZhYiA9IGZhbHNlO1xuICAgIHRoaXMuZGVmYXVsdE1lc3NhZ2VzID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuZWZmZWN0aXZlTG9jYWxlID0gXCJcIjtcbiAgICB0aGlzLnNob3dIZWFkZXJDb250ZW50ID0gZmFsc2U7XG4gIH1cbiAgb25NZXNzYWdlc0NoYW5nZSgpIHtcbiAgICAvKiB3aXJlZCB1cCBieSB0OW4gdXRpbCAqL1xuICB9XG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy9cbiAgLy8gIExpZmVjeWNsZVxuICAvL1xuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIGNvbm5lY3RJbnRlcmFjdGl2ZSh0aGlzKTtcbiAgICBjb25uZWN0TG9jYWxpemVkKHRoaXMpO1xuICAgIGNvbm5lY3RNZXNzYWdlcyh0aGlzKTtcbiAgfVxuICBhc3luYyBjb21wb25lbnRXaWxsTG9hZCgpIHtcbiAgICBzZXRVcExvYWRhYmxlQ29tcG9uZW50KHRoaXMpO1xuICAgIGF3YWl0IHNldFVwTWVzc2FnZXModGhpcyk7XG4gIH1cbiAgY29tcG9uZW50RGlkTG9hZCgpIHtcbiAgICBzZXRDb21wb25lbnRMb2FkZWQodGhpcyk7XG4gIH1cbiAgY29tcG9uZW50RGlkUmVuZGVyKCkge1xuICAgIHVwZGF0ZUhvc3RJbnRlcmFjdGlvbih0aGlzKTtcbiAgfVxuICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBkaXNjb25uZWN0SW50ZXJhY3RpdmUodGhpcyk7XG4gICAgZGlzY29ubmVjdExvY2FsaXplZCh0aGlzKTtcbiAgICBkaXNjb25uZWN0TWVzc2FnZXModGhpcyk7XG4gICAgdGhpcy5yZXNpemVPYnNlcnZlcj8uZGlzY29ubmVjdCgpO1xuICB9XG4gIGVmZmVjdGl2ZUxvY2FsZUNoYW5nZSgpIHtcbiAgICB1cGRhdGVNZXNzYWdlcyh0aGlzLCB0aGlzLmVmZmVjdGl2ZUxvY2FsZSk7XG4gIH1cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy9cbiAgLy8gIE1ldGhvZHNcbiAgLy9cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLyoqXG4gICAqIFNldHMgZm9jdXMgb24gdGhlIGNvbXBvbmVudCdzIGZpcnN0IGZvY3VzYWJsZSBlbGVtZW50LlxuICAgKi9cbiAgYXN5bmMgc2V0Rm9jdXMoKSB7XG4gICAgYXdhaXQgY29tcG9uZW50Rm9jdXNhYmxlKHRoaXMpO1xuICAgIGZvY3VzRmlyc3RUYWJiYWJsZSh0aGlzLmNvbnRhaW5lckVsKTtcbiAgfVxuICAvKipcbiAgICogU2Nyb2xscyB0aGUgY29tcG9uZW50J3MgY29udGVudCB0byBhIHNwZWNpZmllZCBzZXQgb2YgY29vcmRpbmF0ZXMuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIG15Q2FsY2l0ZUZsb3dJdGVtLnNjcm9sbENvbnRlbnRUbyh7XG4gICAqICAgbGVmdDogMCwgLy8gU3BlY2lmaWVzIHRoZSBudW1iZXIgb2YgcGl4ZWxzIGFsb25nIHRoZSBYIGF4aXMgdG8gc2Nyb2xsIHRoZSB3aW5kb3cgb3IgZWxlbWVudC5cbiAgICogICB0b3A6IDAsIC8vIFNwZWNpZmllcyB0aGUgbnVtYmVyIG9mIHBpeGVscyBhbG9uZyB0aGUgWSBheGlzIHRvIHNjcm9sbCB0aGUgd2luZG93IG9yIGVsZW1lbnRcbiAgICogICBiZWhhdmlvcjogXCJhdXRvXCIgLy8gU3BlY2lmaWVzIHdoZXRoZXIgdGhlIHNjcm9sbGluZyBzaG91bGQgYW5pbWF0ZSBzbW9vdGhseSAoc21vb3RoKSwgb3IgaGFwcGVuIGluc3RhbnRseSBpbiBhIHNpbmdsZSBqdW1wIChhdXRvLCB0aGUgZGVmYXVsdCB2YWx1ZSkuXG4gICAqIH0pO1xuICAgKiBAcGFyYW0gb3B0aW9ucyAtIGFsbG93cyBzcGVjaWZpYyBjb29yZGluYXRlcyB0byBiZSBkZWZpbmVkLlxuICAgKiBAcmV0dXJucyAtIHByb21pc2UgdGhhdCByZXNvbHZlcyBvbmNlIHRoZSBjb250ZW50IGlzIHNjcm9sbGVkIHRvLlxuICAgKi9cbiAgYXN5bmMgc2Nyb2xsQ29udGVudFRvKG9wdGlvbnMpIHtcbiAgICB0aGlzLnBhbmVsU2Nyb2xsRWw/LnNjcm9sbFRvKG9wdGlvbnMpO1xuICB9XG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vXG4gIC8vICBSZW5kZXIgTWV0aG9kc1xuICAvL1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICByZW5kZXJIZWFkZXJDb250ZW50KCkge1xuICAgIGNvbnN0IHsgaGVhZGluZywgaGVhZGluZ0xldmVsLCBkZXNjcmlwdGlvbiwgaGFzSGVhZGVyQ29udGVudCB9ID0gdGhpcztcbiAgICBjb25zdCBoZWFkaW5nTm9kZSA9IGhlYWRpbmcgPyAoaChIZWFkaW5nLCB7IGNsYXNzOiBDU1MuaGVhZGluZywgbGV2ZWw6IGhlYWRpbmdMZXZlbCB9LCBoZWFkaW5nKSkgOiBudWxsO1xuICAgIGNvbnN0IGRlc2NyaXB0aW9uTm9kZSA9IGRlc2NyaXB0aW9uID8gaChcInNwYW5cIiwgeyBjbGFzczogQ1NTLmRlc2NyaXB0aW9uIH0sIGRlc2NyaXB0aW9uKSA6IG51bGw7XG4gICAgcmV0dXJuICFoYXNIZWFkZXJDb250ZW50ICYmIChoZWFkaW5nTm9kZSB8fCBkZXNjcmlwdGlvbk5vZGUpID8gKGgoXCJkaXZcIiwgeyBjbGFzczogQ1NTLmhlYWRlckNvbnRlbnQsIGtleTogXCJoZWFkZXItY29udGVudFwiIH0sIGhlYWRpbmdOb2RlLCBkZXNjcmlwdGlvbk5vZGUpKSA6IG51bGw7XG4gIH1cbiAgcmVuZGVyQWN0aW9uQmFyKCkge1xuICAgIHJldHVybiAoaChcImRpdlwiLCB7IGNsYXNzOiBDU1MuYWN0aW9uQmFyQ29udGFpbmVyLCBoaWRkZW46ICF0aGlzLmhhc0FjdGlvbkJhciB9LCBoKFwic2xvdFwiLCB7IG5hbWU6IFNMT1RTLmFjdGlvbkJhciwgb25TbG90Y2hhbmdlOiB0aGlzLmhhbmRsZUFjdGlvbkJhclNsb3RDaGFuZ2UgfSkpKTtcbiAgfVxuICByZW5kZXJIZWFkZXJTbG90dGVkQ29udGVudCgpIHtcbiAgICByZXR1cm4gKGgoXCJkaXZcIiwgeyBjbGFzczogQ1NTLmhlYWRlckNvbnRlbnQsIGhpZGRlbjogIXRoaXMuaGFzSGVhZGVyQ29udGVudCwga2V5OiBcInNsb3R0ZWQtaGVhZGVyLWNvbnRlbnRcIiB9LCBoKFwic2xvdFwiLCB7IG5hbWU6IFNMT1RTLmhlYWRlckNvbnRlbnQsIG9uU2xvdGNoYW5nZTogdGhpcy5oYW5kbGVIZWFkZXJDb250ZW50U2xvdENoYW5nZSB9KSkpO1xuICB9XG4gIHJlbmRlckhlYWRlclN0YXJ0QWN0aW9ucygpIHtcbiAgICBjb25zdCB7IGhhc1N0YXJ0QWN0aW9ucyB9ID0gdGhpcztcbiAgICByZXR1cm4gKGgoXCJkaXZcIiwgeyBjbGFzczogeyBbQ1NTLmhlYWRlckFjdGlvbnNTdGFydF06IHRydWUsIFtDU1MuaGVhZGVyQWN0aW9uc106IHRydWUgfSwgaGlkZGVuOiAhaGFzU3RhcnRBY3Rpb25zLCBrZXk6IFwiaGVhZGVyLWFjdGlvbnMtc3RhcnRcIiB9LCBoKFwic2xvdFwiLCB7IG5hbWU6IFNMT1RTLmhlYWRlckFjdGlvbnNTdGFydCwgb25TbG90Y2hhbmdlOiB0aGlzLmhhbmRsZUhlYWRlckFjdGlvbnNTdGFydFNsb3RDaGFuZ2UgfSkpKTtcbiAgfVxuICByZW5kZXJIZWFkZXJBY3Rpb25zRW5kKCkge1xuICAgIGNvbnN0IHsgaGFzRW5kQWN0aW9ucywgbWVzc2FnZXMsIGNsb3NhYmxlLCBjb2xsYXBzZWQsIGNvbGxhcHNlRGlyZWN0aW9uLCBjb2xsYXBzaWJsZSwgaGFzTWVudUl0ZW1zLCB9ID0gdGhpcztcbiAgICBjb25zdCB7IGNvbGxhcHNlLCBleHBhbmQsIGNsb3NlIH0gPSBtZXNzYWdlcztcbiAgICBjb25zdCBpY29ucyA9IFtJQ09OUy5leHBhbmQsIElDT05TLmNvbGxhcHNlXTtcbiAgICBpZiAoY29sbGFwc2VEaXJlY3Rpb24gPT09IFwidXBcIikge1xuICAgICAgaWNvbnMucmV2ZXJzZSgpO1xuICAgIH1cbiAgICBjb25zdCBjb2xsYXBzZU5vZGUgPSBjb2xsYXBzaWJsZSA/IChoKFwiY2FsY2l0ZS1hY3Rpb25cIiwgeyBcImFyaWEtZXhwYW5kZWRcIjogdG9BcmlhQm9vbGVhbighY29sbGFwc2VkKSwgXCJhcmlhLWxhYmVsXCI6IGNvbGxhcHNlLCBcImRhdGEtdGVzdFwiOiBcImNvbGxhcHNlXCIsIGljb246IGNvbGxhcHNlZCA/IGljb25zWzBdIDogaWNvbnNbMV0sIG9uQ2xpY2s6IHRoaXMuY29sbGFwc2UsIHRleHQ6IGNvbGxhcHNlLCB0aXRsZTogY29sbGFwc2VkID8gZXhwYW5kIDogY29sbGFwc2UgfSkpIDogbnVsbDtcbiAgICBjb25zdCBjbG9zZU5vZGUgPSBjbG9zYWJsZSA/IChoKFwiY2FsY2l0ZS1hY3Rpb25cIiwgeyBcImFyaWEtbGFiZWxcIjogY2xvc2UsIFwiZGF0YS10ZXN0XCI6IFwiY2xvc2VcIiwgaWNvbjogSUNPTlMuY2xvc2UsIG9uQ2xpY2s6IHRoaXMuY2xvc2UsIHRleHQ6IGNsb3NlLCB0aXRsZTogY2xvc2UgfSkpIDogbnVsbDtcbiAgICBjb25zdCBzbG90Tm9kZSA9IChoKFwic2xvdFwiLCB7IG5hbWU6IFNMT1RTLmhlYWRlckFjdGlvbnNFbmQsIG9uU2xvdGNoYW5nZTogdGhpcy5oYW5kbGVIZWFkZXJBY3Rpb25zRW5kU2xvdENoYW5nZSB9KSk7XG4gICAgY29uc3Qgc2hvd0NvbnRhaW5lciA9IGhhc0VuZEFjdGlvbnMgfHwgY29sbGFwc2VOb2RlIHx8IGNsb3NlTm9kZSB8fCBoYXNNZW51SXRlbXM7XG4gICAgcmV0dXJuIChoKFwiZGl2XCIsIHsgY2xhc3M6IHsgW0NTUy5oZWFkZXJBY3Rpb25zRW5kXTogdHJ1ZSwgW0NTUy5oZWFkZXJBY3Rpb25zXTogdHJ1ZSB9LCBoaWRkZW46ICFzaG93Q29udGFpbmVyLCBrZXk6IFwiaGVhZGVyLWFjdGlvbnMtZW5kXCIgfSwgc2xvdE5vZGUsIHRoaXMucmVuZGVyTWVudSgpLCBjb2xsYXBzZU5vZGUsIGNsb3NlTm9kZSkpO1xuICB9XG4gIHJlbmRlck1lbnUoKSB7XG4gICAgY29uc3QgeyBoYXNNZW51SXRlbXMsIG1lc3NhZ2VzLCBtZW51T3BlbiB9ID0gdGhpcztcbiAgICByZXR1cm4gKGgoXCJjYWxjaXRlLWFjdGlvbi1tZW51XCIsIHsgZmxpcFBsYWNlbWVudHM6IFtcInRvcFwiLCBcImJvdHRvbVwiXSwgaGlkZGVuOiAhaGFzTWVudUl0ZW1zLCBrZXk6IFwibWVudVwiLCBsYWJlbDogbWVzc2FnZXMub3B0aW9ucywgb3BlbjogbWVudU9wZW4sIHBsYWNlbWVudDogXCJib3R0b20tZW5kXCIgfSwgaChcImNhbGNpdGUtYWN0aW9uXCIsIHsgaWNvbjogSUNPTlMubWVudSwgc2xvdDogU0xPVFMkMS50cmlnZ2VyLCB0ZXh0OiBtZXNzYWdlcy5vcHRpb25zIH0pLCBoKFwic2xvdFwiLCB7IG5hbWU6IFNMT1RTLmhlYWRlck1lbnVBY3Rpb25zLCBvblNsb3RjaGFuZ2U6IHRoaXMuaGFuZGxlSGVhZGVyTWVudUFjdGlvbnNTbG90Q2hhbmdlIH0pKSk7XG4gIH1cbiAgcmVuZGVySGVhZGVyTm9kZSgpIHtcbiAgICBjb25zdCB7IGhhc0hlYWRlckNvbnRlbnQsIGhhc1N0YXJ0QWN0aW9ucywgaGFzRW5kQWN0aW9ucywgY2xvc2FibGUsIGNvbGxhcHNpYmxlLCBoYXNNZW51SXRlbXMsIGhhc0FjdGlvbkJhciwgfSA9IHRoaXM7XG4gICAgY29uc3QgaGVhZGVyQ29udGVudE5vZGUgPSB0aGlzLnJlbmRlckhlYWRlckNvbnRlbnQoKTtcbiAgICBjb25zdCBzaG93SGVhZGVyQ29udGVudCA9IGhhc0hlYWRlckNvbnRlbnQgfHxcbiAgICAgICEhaGVhZGVyQ29udGVudE5vZGUgfHxcbiAgICAgIGhhc1N0YXJ0QWN0aW9ucyB8fFxuICAgICAgaGFzRW5kQWN0aW9ucyB8fFxuICAgICAgY29sbGFwc2libGUgfHxcbiAgICAgIGNsb3NhYmxlIHx8XG4gICAgICBoYXNNZW51SXRlbXM7XG4gICAgdGhpcy5zaG93SGVhZGVyQ29udGVudCA9IHNob3dIZWFkZXJDb250ZW50O1xuICAgIHJldHVybiAoaChcImhlYWRlclwiLCB7IGNsYXNzOiBDU1MuaGVhZGVyLCBoaWRkZW46ICEoc2hvd0hlYWRlckNvbnRlbnQgfHwgaGFzQWN0aW9uQmFyKSB9LCBoKFwiZGl2XCIsIHsgY2xhc3M6IHsgW0NTUy5oZWFkZXJDb250YWluZXJdOiB0cnVlLCBbQ1NTLmhlYWRlckNvbnRhaW5lckJvcmRlckVuZF06IGhhc0FjdGlvbkJhciB9LCBoaWRkZW46ICFzaG93SGVhZGVyQ29udGVudCB9LCB0aGlzLnJlbmRlckhlYWRlclN0YXJ0QWN0aW9ucygpLCB0aGlzLnJlbmRlckhlYWRlclNsb3R0ZWRDb250ZW50KCksIGhlYWRlckNvbnRlbnROb2RlLCB0aGlzLnJlbmRlckhlYWRlckFjdGlvbnNFbmQoKSksIHRoaXMucmVuZGVyQWN0aW9uQmFyKCkpKTtcbiAgfVxuICByZW5kZXJGb290ZXJOb2RlKCkge1xuICAgIGNvbnN0IHsgaGFzRm9vdGVyQ29udGVudCwgaGFzRm9vdGVyQWN0aW9ucyB9ID0gdGhpcztcbiAgICBjb25zdCBzaG93Rm9vdGVyID0gaGFzRm9vdGVyQ29udGVudCB8fCBoYXNGb290ZXJBY3Rpb25zO1xuICAgIHJldHVybiAoaChcImZvb3RlclwiLCB7IGNsYXNzOiBDU1MuZm9vdGVyLCBoaWRkZW46ICFzaG93Rm9vdGVyIH0sIGgoXCJzbG90XCIsIHsga2V5OiBcImZvb3Rlci1zbG90XCIsIG5hbWU6IFNMT1RTLmZvb3Rlciwgb25TbG90Y2hhbmdlOiB0aGlzLmhhbmRsZUZvb3RlclNsb3RDaGFuZ2UgfSksIGgoXCJzbG90XCIsIHsga2V5OiBcImZvb3Rlci1hY3Rpb25zLXNsb3RcIiwgbmFtZTogU0xPVFMuZm9vdGVyQWN0aW9ucywgb25TbG90Y2hhbmdlOiB0aGlzLmhhbmRsZUZvb3RlckFjdGlvbnNTbG90Q2hhbmdlIH0pKSk7XG4gIH1cbiAgcmVuZGVyQ29udGVudCgpIHtcbiAgICByZXR1cm4gKGgoXCJkaXZcIiwgeyBjbGFzczogQ1NTLmNvbnRlbnRXcmFwcGVyLCBoaWRkZW46IHRoaXMuY29sbGFwc2libGUgJiYgdGhpcy5jb2xsYXBzZWQsIG9uU2Nyb2xsOiB0aGlzLnBhbmVsU2Nyb2xsSGFuZGxlcixcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC9qc3gtc29ydC1wcm9wcyAtLSByZWYgc2hvdWxkIGJlIGxhc3Qgc28gbm9kZSBhdHRycy9wcm9wcyBhcmUgaW4gc3luYyAoc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtZGVzaWduLXN5c3RlbS9wdWxsLzY1MzApXG4gICAgICByZWY6IHRoaXMuc2V0UGFuZWxTY3JvbGxFbCB9LCBoKFwic2xvdFwiLCBudWxsKSwgdGhpcy5yZW5kZXJGYWIoKSkpO1xuICB9XG4gIHJlbmRlckZhYigpIHtcbiAgICByZXR1cm4gKGgoXCJkaXZcIiwgeyBjbGFzczogQ1NTLmZhYkNvbnRhaW5lciwgaGlkZGVuOiAhdGhpcy5oYXNGYWIgfSwgaChcInNsb3RcIiwgeyBuYW1lOiBTTE9UUy5mYWIsIG9uU2xvdGNoYW5nZTogdGhpcy5oYW5kbGVGYWJTbG90Q2hhbmdlIH0pKSk7XG4gIH1cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHsgbG9hZGluZywgcGFuZWxLZXlEb3duSGFuZGxlciwgY2xvc2VkLCBjbG9zYWJsZSB9ID0gdGhpcztcbiAgICBjb25zdCBwYW5lbE5vZGUgPSAoaChcImFydGljbGVcIiwgeyBcImFyaWEtYnVzeVwiOiB0b0FyaWFCb29sZWFuKGxvYWRpbmcpLCBjbGFzczogQ1NTLmNvbnRhaW5lciwgaGlkZGVuOiBjbG9zZWQsIG9uS2V5RG93bjogcGFuZWxLZXlEb3duSGFuZGxlciwgdGFiSW5kZXg6IGNsb3NhYmxlID8gMCA6IC0xLFxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0L2pzeC1zb3J0LXByb3BzIC0tIHJlZiBzaG91bGQgYmUgbGFzdCBzbyBub2RlIGF0dHJzL3Byb3BzIGFyZSBpbiBzeW5jIChzZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1kZXNpZ24tc3lzdGVtL3B1bGwvNjUzMClcbiAgICAgIHJlZjogdGhpcy5zZXRDb250YWluZXJSZWYgfSwgdGhpcy5yZW5kZXJIZWFkZXJOb2RlKCksIHRoaXMucmVuZGVyQ29udGVudCgpLCB0aGlzLnJlbmRlckZvb3Rlck5vZGUoKSkpO1xuICAgIHJldHVybiAoaChGcmFnbWVudCwgbnVsbCwgbG9hZGluZyA/IGgoXCJjYWxjaXRlLXNjcmltXCIsIHsgbG9hZGluZzogbG9hZGluZyB9KSA6IG51bGwsIHBhbmVsTm9kZSkpO1xuICB9XG4gIHN0YXRpYyBnZXQgYXNzZXRzRGlycygpIHsgcmV0dXJuIFtcImFzc2V0c1wiXTsgfVxuICBnZXQgZWwoKSB7IHJldHVybiB0aGlzOyB9XG4gIHN0YXRpYyBnZXQgd2F0Y2hlcnMoKSB7IHJldHVybiB7XG4gICAgXCJtZXNzYWdlT3ZlcnJpZGVzXCI6IFtcIm9uTWVzc2FnZXNDaGFuZ2VcIl0sXG4gICAgXCJlZmZlY3RpdmVMb2NhbGVcIjogW1wiZWZmZWN0aXZlTG9jYWxlQ2hhbmdlXCJdXG4gIH07IH1cbiAgc3RhdGljIGdldCBzdHlsZSgpIHsgcmV0dXJuIHBhbmVsQ3NzOyB9XG59LCBbMSwgXCJjYWxjaXRlLXBhbmVsXCIsIHtcbiAgICBcImNsb3NlZFwiOiBbMTU0MF0sXG4gICAgXCJkaXNhYmxlZFwiOiBbNTE2XSxcbiAgICBcImNsb3NhYmxlXCI6IFs1MTZdLFxuICAgIFwiY29sbGFwc2VkXCI6IFs1MTZdLFxuICAgIFwiY29sbGFwc2VEaXJlY3Rpb25cIjogWzEsIFwiY29sbGFwc2UtZGlyZWN0aW9uXCJdLFxuICAgIFwiY29sbGFwc2libGVcIjogWzUxNl0sXG4gICAgXCJoZWFkaW5nTGV2ZWxcIjogWzUxNCwgXCJoZWFkaW5nLWxldmVsXCJdLFxuICAgIFwibG9hZGluZ1wiOiBbNTE2XSxcbiAgICBcImhlYWRpbmdcIjogWzFdLFxuICAgIFwiZGVzY3JpcHRpb25cIjogWzFdLFxuICAgIFwibWVudU9wZW5cIjogWzUxNiwgXCJtZW51LW9wZW5cIl0sXG4gICAgXCJtZXNzYWdlT3ZlcnJpZGVzXCI6IFsxMDQwXSxcbiAgICBcIm1lc3NhZ2VzXCI6IFsxMDQwXSxcbiAgICBcImhhc1N0YXJ0QWN0aW9uc1wiOiBbMzJdLFxuICAgIFwiaGFzRW5kQWN0aW9uc1wiOiBbMzJdLFxuICAgIFwiaGFzTWVudUl0ZW1zXCI6IFszMl0sXG4gICAgXCJoYXNIZWFkZXJDb250ZW50XCI6IFszMl0sXG4gICAgXCJoYXNBY3Rpb25CYXJcIjogWzMyXSxcbiAgICBcImhhc0Zvb3RlckNvbnRlbnRcIjogWzMyXSxcbiAgICBcImhhc0Zvb3RlckFjdGlvbnNcIjogWzMyXSxcbiAgICBcImhhc0ZhYlwiOiBbMzJdLFxuICAgIFwiZGVmYXVsdE1lc3NhZ2VzXCI6IFszMl0sXG4gICAgXCJlZmZlY3RpdmVMb2NhbGVcIjogWzMyXSxcbiAgICBcInNob3dIZWFkZXJDb250ZW50XCI6IFszMl0sXG4gICAgXCJzZXRGb2N1c1wiOiBbNjRdLFxuICAgIFwic2Nyb2xsQ29udGVudFRvXCI6IFs2NF1cbiAgfV0pO1xuZnVuY3Rpb24gZGVmaW5lQ3VzdG9tRWxlbWVudCgpIHtcbiAgaWYgKHR5cGVvZiBjdXN0b21FbGVtZW50cyA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBjb21wb25lbnRzID0gW1wiY2FsY2l0ZS1wYW5lbFwiLCBcImNhbGNpdGUtYWN0aW9uXCIsIFwiY2FsY2l0ZS1hY3Rpb24tbWVudVwiLCBcImNhbGNpdGUtaWNvblwiLCBcImNhbGNpdGUtbG9hZGVyXCIsIFwiY2FsY2l0ZS1wb3BvdmVyXCIsIFwiY2FsY2l0ZS1zY3JpbVwiXTtcbiAgY29tcG9uZW50cy5mb3JFYWNoKHRhZ05hbWUgPT4geyBzd2l0Y2ggKHRhZ05hbWUpIHtcbiAgICBjYXNlIFwiY2FsY2l0ZS1wYW5lbFwiOlxuICAgICAgaWYgKCFjdXN0b21FbGVtZW50cy5nZXQodGFnTmFtZSkpIHtcbiAgICAgICAgY3VzdG9tRWxlbWVudHMuZGVmaW5lKHRhZ05hbWUsIFBhbmVsKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJjYWxjaXRlLWFjdGlvblwiOlxuICAgICAgaWYgKCFjdXN0b21FbGVtZW50cy5nZXQodGFnTmFtZSkpIHtcbiAgICAgICAgZGVmaW5lQ3VzdG9tRWxlbWVudCQ2KCk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwiY2FsY2l0ZS1hY3Rpb24tbWVudVwiOlxuICAgICAgaWYgKCFjdXN0b21FbGVtZW50cy5nZXQodGFnTmFtZSkpIHtcbiAgICAgICAgZGVmaW5lQ3VzdG9tRWxlbWVudCQ1KCk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwiY2FsY2l0ZS1pY29uXCI6XG4gICAgICBpZiAoIWN1c3RvbUVsZW1lbnRzLmdldCh0YWdOYW1lKSkge1xuICAgICAgICBkZWZpbmVDdXN0b21FbGVtZW50JDQoKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJjYWxjaXRlLWxvYWRlclwiOlxuICAgICAgaWYgKCFjdXN0b21FbGVtZW50cy5nZXQodGFnTmFtZSkpIHtcbiAgICAgICAgZGVmaW5lQ3VzdG9tRWxlbWVudCQzKCk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwiY2FsY2l0ZS1wb3BvdmVyXCI6XG4gICAgICBpZiAoIWN1c3RvbUVsZW1lbnRzLmdldCh0YWdOYW1lKSkge1xuICAgICAgICBkZWZpbmVDdXN0b21FbGVtZW50JDIoKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJjYWxjaXRlLXNjcmltXCI6XG4gICAgICBpZiAoIWN1c3RvbUVsZW1lbnRzLmdldCh0YWdOYW1lKSkge1xuICAgICAgICBkZWZpbmVDdXN0b21FbGVtZW50JDEoKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICB9IH0pO1xufVxuZGVmaW5lQ3VzdG9tRWxlbWVudCgpO1xuXG5leHBvcnQgeyBQYW5lbCBhcyBQLCBTTE9UUyBhcyBTLCBkZWZpbmVDdXN0b21FbGVtZW50IGFzIGQgfTtcbiIsIi8qIVxuICogQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWRlc2lnbi1zeXN0ZW0vYmxvYi9tYWluL0xJQ0VOU0UubWQgZm9yIGRldGFpbHMuXG4gKiB2MS4xMS4wXG4gKi9cbmltcG9ydCB7IHByb3h5Q3VzdG9tRWxlbWVudCwgSFRNTEVsZW1lbnQsIGggfSBmcm9tICdAc3RlbmNpbC9jb3JlL2ludGVybmFsL2NsaWVudC9pbmRleC5qcyc7XG5pbXBvcnQgeyBjIGFzIGNvbm5lY3RMb2NhbGl6ZWQsIGQgYXMgZGlzY29ubmVjdExvY2FsaXplZCB9IGZyb20gJy4vbG9jYWxlLmpzJztcbmltcG9ydCB7IHUgYXMgdXBkYXRlTWVzc2FnZXMsIGMgYXMgY29ubmVjdE1lc3NhZ2VzLCBzIGFzIHNldFVwTWVzc2FnZXMsIGQgYXMgZGlzY29ubmVjdE1lc3NhZ2VzIH0gZnJvbSAnLi90OW4uanMnO1xuaW1wb3J0IHsgYyBhcyBjcmVhdGVPYnNlcnZlciB9IGZyb20gJy4vb2JzZXJ2ZXJzLmpzJztcbmltcG9ydCB7IHcgYXMgc2xvdENoYW5nZUhhc0NvbnRlbnQgfSBmcm9tICcuL2RvbS5qcyc7XG5pbXBvcnQgeyBkIGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkMSB9IGZyb20gJy4vbG9hZGVyLmpzJztcblxuY29uc3QgQ1NTID0ge1xuICBzY3JpbTogXCJzY3JpbVwiLFxuICBjb250ZW50OiBcImNvbnRlbnRcIixcbn07XG5jb25zdCBCUkVBS1BPSU5UUyA9IHtcbiAgczogNzIsXG4gIC8vIG1lZGl1bSBpcyBhc3N1bWVkIGRlZmF1bHQuXG4gIGw6IDQ4MCwgLy8gR3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIDQ4MHB4LlxufTtcblxuY29uc3Qgc2NyaW1Dc3MgPSBcIjpob3N0e3Bvc2l0aW9uOmFic29sdXRlO2luc2V0OjBweDt6LWluZGV4OnZhcigtLWNhbGNpdGUtYXBwLXotaW5kZXgtb3ZlcmxheSk7ZGlzcGxheTpmbGV4O2Jsb2NrLXNpemU6MTAwJTtpbmxpbmUtc2l6ZToxMDAlO2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjthbGlnbi1pdGVtczpzdHJldGNofUBrZXlmcmFtZXMgY2FsY2l0ZS1zY3JpbS1mYWRlLWluezAley0tdHctYmctb3BhY2l0eTowfTEwMCV7LS10dy10ZXh0LW9wYWNpdHk6MX19LnNjcmlte3Bvc2l0aW9uOmFic29sdXRlO2luc2V0OjBweDtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2FsaWduLWNvbnRlbnQ6Y2VudGVyO2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO292ZXJmbG93OmhpZGRlbjthbmltYXRpb246Y2FsY2l0ZS1zY3JpbS1mYWRlLWluIHZhcigtLWNhbGNpdGUtaW50ZXJuYWwtYW5pbWF0aW9uLXRpbWluZy1tZWRpdW0pIGVhc2UtaW4tb3V0O2JhY2tncm91bmQtY29sb3I6dmFyKC0tY2FsY2l0ZS1zY3JpbS1iYWNrZ3JvdW5kLCB2YXIoLS1jYWxjaXRlLXNjcmltLWJhY2tncm91bmQtaW50ZXJuYWwpKX0uY29udGVudHtwYWRkaW5nOjFyZW19Omhvc3QoW2hpZGRlbl0pe2Rpc3BsYXk6bm9uZX1baGlkZGVuXXtkaXNwbGF5Om5vbmV9XCI7XG5cbmNvbnN0IFNjcmltID0gLypAX19QVVJFX18qLyBwcm94eUN1c3RvbUVsZW1lbnQoY2xhc3MgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5fX3JlZ2lzdGVySG9zdCgpO1xuICAgIHRoaXMuX19hdHRhY2hTaGFkb3coKTtcbiAgICB0aGlzLnJlc2l6ZU9ic2VydmVyID0gY3JlYXRlT2JzZXJ2ZXIoXCJyZXNpemVcIiwgKCkgPT4gdGhpcy5oYW5kbGVSZXNpemUoKSk7XG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvL1xuICAgIC8vICBQcml2YXRlIE1ldGhvZHNcbiAgICAvL1xuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgdGhpcy5oYW5kbGVEZWZhdWx0U2xvdENoYW5nZSA9IChldmVudCkgPT4ge1xuICAgICAgdGhpcy5oYXNDb250ZW50ID0gc2xvdENoYW5nZUhhc0NvbnRlbnQoZXZlbnQpO1xuICAgIH07XG4gICAgdGhpcy5zdG9yZUxvYWRlckVsID0gKGVsKSA9PiB7XG4gICAgICB0aGlzLmxvYWRlckVsID0gZWw7XG4gICAgICB0aGlzLmhhbmRsZVJlc2l6ZSgpO1xuICAgIH07XG4gICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XG4gICAgdGhpcy5tZXNzYWdlcyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLm1lc3NhZ2VPdmVycmlkZXMgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5sb2FkZXJTY2FsZSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmRlZmF1bHRNZXNzYWdlcyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmVmZmVjdGl2ZUxvY2FsZSA9IFwiXCI7XG4gICAgdGhpcy5oYXNDb250ZW50ID0gZmFsc2U7XG4gIH1cbiAgb25NZXNzYWdlc0NoYW5nZSgpIHtcbiAgICAvKiB3aXJlZCB1cCBieSB0OW4gdXRpbCAqL1xuICB9XG4gIGVmZmVjdGl2ZUxvY2FsZUNoYW5nZSgpIHtcbiAgICB1cGRhdGVNZXNzYWdlcyh0aGlzLCB0aGlzLmVmZmVjdGl2ZUxvY2FsZSk7XG4gIH1cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvL1xuICAvLyAgTGlmZWN5Y2xlXG4gIC8vXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgY29ubmVjdExvY2FsaXplZCh0aGlzKTtcbiAgICBjb25uZWN0TWVzc2FnZXModGhpcyk7XG4gICAgdGhpcy5yZXNpemVPYnNlcnZlcj8ub2JzZXJ2ZSh0aGlzLmVsKTtcbiAgfVxuICBhc3luYyBjb21wb25lbnRXaWxsTG9hZCgpIHtcbiAgICBhd2FpdCBzZXRVcE1lc3NhZ2VzKHRoaXMpO1xuICB9XG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIGRpc2Nvbm5lY3RMb2NhbGl6ZWQodGhpcyk7XG4gICAgZGlzY29ubmVjdE1lc3NhZ2VzKHRoaXMpO1xuICAgIHRoaXMucmVzaXplT2JzZXJ2ZXI/LmRpc2Nvbm5lY3QoKTtcbiAgfVxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvL1xuICAvLyAgUmVuZGVyIE1ldGhvZFxuICAvL1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBoYXNDb250ZW50LCBsb2FkaW5nLCBtZXNzYWdlcyB9ID0gdGhpcztcbiAgICByZXR1cm4gKGgoXCJkaXZcIiwgeyBjbGFzczogQ1NTLnNjcmltIH0sIGxvYWRpbmcgPyAoaChcImNhbGNpdGUtbG9hZGVyXCIsIHsgbGFiZWw6IG1lc3NhZ2VzLmxvYWRpbmcsIHNjYWxlOiB0aGlzLmxvYWRlclNjYWxlLFxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0L2pzeC1zb3J0LXByb3BzIC0tIHJlZiBzaG91bGQgYmUgbGFzdCBzbyBub2RlIGF0dHJzL3Byb3BzIGFyZSBpbiBzeW5jIChzZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1kZXNpZ24tc3lzdGVtL3B1bGwvNjUzMClcbiAgICAgIHJlZjogdGhpcy5zdG9yZUxvYWRlckVsIH0pKSA6IG51bGwsIGgoXCJkaXZcIiwgeyBjbGFzczogQ1NTLmNvbnRlbnQsIGhpZGRlbjogIWhhc0NvbnRlbnQgfSwgaChcInNsb3RcIiwgeyBvblNsb3RjaGFuZ2U6IHRoaXMuaGFuZGxlRGVmYXVsdFNsb3RDaGFuZ2UgfSkpKSk7XG4gIH1cbiAgZ2V0U2NhbGUoc2l6ZSkge1xuICAgIGlmIChzaXplIDwgQlJFQUtQT0lOVFMucykge1xuICAgICAgcmV0dXJuIFwic1wiO1xuICAgIH1cbiAgICBlbHNlIGlmIChzaXplID49IEJSRUFLUE9JTlRTLmwpIHtcbiAgICAgIHJldHVybiBcImxcIjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICByZXR1cm4gXCJtXCI7XG4gICAgfVxuICB9XG4gIGhhbmRsZVJlc2l6ZSgpIHtcbiAgICBjb25zdCB7IGxvYWRlckVsLCBlbCB9ID0gdGhpcztcbiAgICBpZiAoIWxvYWRlckVsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMubG9hZGVyU2NhbGUgPSB0aGlzLmdldFNjYWxlKE1hdGgubWluKGVsLmNsaWVudEhlaWdodCwgZWwuY2xpZW50V2lkdGgpID8/IDApO1xuICB9XG4gIHN0YXRpYyBnZXQgYXNzZXRzRGlycygpIHsgcmV0dXJuIFtcImFzc2V0c1wiXTsgfVxuICBnZXQgZWwoKSB7IHJldHVybiB0aGlzOyB9XG4gIHN0YXRpYyBnZXQgd2F0Y2hlcnMoKSB7IHJldHVybiB7XG4gICAgXCJtZXNzYWdlT3ZlcnJpZGVzXCI6IFtcIm9uTWVzc2FnZXNDaGFuZ2VcIl0sXG4gICAgXCJlZmZlY3RpdmVMb2NhbGVcIjogW1wiZWZmZWN0aXZlTG9jYWxlQ2hhbmdlXCJdXG4gIH07IH1cbiAgc3RhdGljIGdldCBzdHlsZSgpIHsgcmV0dXJuIHNjcmltQ3NzOyB9XG59LCBbMSwgXCJjYWxjaXRlLXNjcmltXCIsIHtcbiAgICBcImxvYWRpbmdcIjogWzUxNl0sXG4gICAgXCJtZXNzYWdlc1wiOiBbMTA0MF0sXG4gICAgXCJtZXNzYWdlT3ZlcnJpZGVzXCI6IFsxMDQwXSxcbiAgICBcImxvYWRlclNjYWxlXCI6IFszMl0sXG4gICAgXCJkZWZhdWx0TWVzc2FnZXNcIjogWzMyXSxcbiAgICBcImVmZmVjdGl2ZUxvY2FsZVwiOiBbMzJdLFxuICAgIFwiaGFzQ29udGVudFwiOiBbMzJdXG4gIH1dKTtcbmZ1bmN0aW9uIGRlZmluZUN1c3RvbUVsZW1lbnQoKSB7XG4gIGlmICh0eXBlb2YgY3VzdG9tRWxlbWVudHMgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgY29tcG9uZW50cyA9IFtcImNhbGNpdGUtc2NyaW1cIiwgXCJjYWxjaXRlLWxvYWRlclwiXTtcbiAgY29tcG9uZW50cy5mb3JFYWNoKHRhZ05hbWUgPT4geyBzd2l0Y2ggKHRhZ05hbWUpIHtcbiAgICBjYXNlIFwiY2FsY2l0ZS1zY3JpbVwiOlxuICAgICAgaWYgKCFjdXN0b21FbGVtZW50cy5nZXQodGFnTmFtZSkpIHtcbiAgICAgICAgY3VzdG9tRWxlbWVudHMuZGVmaW5lKHRhZ05hbWUsIFNjcmltKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJjYWxjaXRlLWxvYWRlclwiOlxuICAgICAgaWYgKCFjdXN0b21FbGVtZW50cy5nZXQodGFnTmFtZSkpIHtcbiAgICAgICAgZGVmaW5lQ3VzdG9tRWxlbWVudCQxKCk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgfSB9KTtcbn1cbmRlZmluZUN1c3RvbUVsZW1lbnQoKTtcblxuZXhwb3J0IHsgU2NyaW0gYXMgUywgZGVmaW5lQ3VzdG9tRWxlbWVudCBhcyBkIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=