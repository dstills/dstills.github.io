"use strict";
(self["webpackChunksynview"] = self["webpackChunksynview"] || []).push([["vendors-node_modules_esri_calcite-components_dist_components_calcite-value-list_js"],{

/***/ "./node_modules/@esri/calcite-components/dist/components/calcite-value-list.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/components/calcite-value-list.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CalciteValueList: () => (/* binding */ CalciteValueList),
/* harmony export */   defineCustomElement: () => (/* binding */ defineCustomElement)
/* harmony export */ });
/* harmony import */ var _stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @stencil/core/internal/client/index.js */ "./node_modules/@stencil/core/internal/client/index.js");
/* harmony import */ var _interactive_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./interactive.js */ "./node_modules/@esri/calcite-components/dist/components/interactive.js");
/* harmony import */ var _loadable_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./loadable.js */ "./node_modules/@esri/calcite-components/dist/components/loadable.js");
/* harmony import */ var _locale_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./locale.js */ "./node_modules/@esri/calcite-components/dist/components/locale.js");
/* harmony import */ var _observers_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./observers.js */ "./node_modules/@esri/calcite-components/dist/components/observers.js");
/* harmony import */ var _t9n_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./t9n.js */ "./node_modules/@esri/calcite-components/dist/components/t9n.js");
/* harmony import */ var _shared_list_render_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./shared-list-render.js */ "./node_modules/@esri/calcite-components/dist/components/shared-list-render.js");
/* harmony import */ var _sortableComponent_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./sortableComponent.js */ "./node_modules/@esri/calcite-components/dist/components/sortableComponent.js");
/* harmony import */ var _dom_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./dom.js */ "./node_modules/@esri/calcite-components/dist/components/dom.js");
/* harmony import */ var _filter_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./filter.js */ "./node_modules/@esri/calcite-components/dist/components/filter.js");
/* harmony import */ var _icon_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./icon.js */ "./node_modules/@esri/calcite-components/dist/components/icon.js");
/* harmony import */ var _input_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./input.js */ "./node_modules/@esri/calcite-components/dist/components/input.js");
/* harmony import */ var _loader_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./loader.js */ "./node_modules/@esri/calcite-components/dist/components/loader.js");
/* harmony import */ var _progress_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./progress.js */ "./node_modules/@esri/calcite-components/dist/components/progress.js");
/* harmony import */ var _scrim_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./scrim.js */ "./node_modules/@esri/calcite-components/dist/components/scrim.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.7.0
 */
















const CSS = {
  container: "container",
  handle: "handle",
};
var ICON_TYPES;
(function (ICON_TYPES) {
  ICON_TYPES["grip"] = "grip";
})(ICON_TYPES || (ICON_TYPES = {}));

function getScreenReaderText(item, status, valueList) {
  const { items, messages } = valueList;
  const total = items.length;
  const position = (0,_shared_list_render_js__WEBPACK_IMPORTED_MODULE_5__.q)(valueList, item) + 1;
  const template = status === "idle"
    ? messages.dragHandleIdle
    : status === "active"
      ? messages.dragHandleActive
      : status === "change"
        ? messages.dragHandleChange
        : messages.dragHandleCommit;
  return replacePlaceholders(template, item.label, position, total);
}
function getHandleAndItemElement(event) {
  const handle = event
    .composedPath()
    .find((item) => item.dataset?.jsHandle !== undefined);
  const item = event
    .composedPath()
    .find((item) => item.tagName?.toLowerCase() === "calcite-value-list-item");
  return { handle, item };
}
function replacePlaceholders(text, label, position, total) {
  const replacePosition = text.replace("{position}", position.toString());
  const replaceLabel = replacePosition.replace("{itemLabel}", label);
  return replaceLabel.replace("{total}", total.toString());
}

const valueListCss = ":host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{position:relative;box-sizing:border-box;display:flex;flex-shrink:0;flex-grow:0;flex-direction:column;align-items:stretch;background-color:transparent;font-size:var(--calcite-font-size--1);color:var(--calcite-ui-text-2)}:host *{box-sizing:border-box}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}calcite-value-list-item:last-of-type{--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}:host([filter-enabled]) header{margin-block-end:0.25rem;display:flex;align-items:center;justify-content:flex-end;background-color:var(--calcite-ui-foreground-1);--tw-shadow:0 1px 0 var(--calcite-ui-border-3);--tw-shadow-colored:0 1px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}:host([filter-enabled]) header.sticky-pos{position:sticky;inset-block-start:0px;z-index:var(--calcite-app-z-index-sticky)}calcite-filter{margin-block-end:1px}.assistive-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}:host([hidden]){display:none}[hidden]{display:none}";

const ValueList = /*@__PURE__*/ (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_14__.proxyCustomElement)(class extends _stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_14__.HTMLElement {
  constructor() {
    super();
    this.__registerHost();
    this.__attachShadow();
    this.calciteListChange = (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_14__.createEvent)(this, "calciteListChange", 6);
    this.calciteListOrderChange = (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_14__.createEvent)(this, "calciteListOrderChange", 6);
    this.calciteListFilter = (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_14__.createEvent)(this, "calciteListFilter", 6);
    this.lastSelectedItem = null;
    this.mutationObserver = (0,_observers_js__WEBPACK_IMPORTED_MODULE_3__.c)("mutation", _shared_list_render_js__WEBPACK_IMPORTED_MODULE_5__.m.bind(this));
    this.handleSelector = `.${CSS.handle}`;
    this.dragSelector = "calcite-value-list-item";
    this.setFilterEl = (el) => {
      this.filterEl = el;
    };
    this.setFilteredItems = (filteredItems) => {
      this.filteredItems = filteredItems;
    };
    this.deselectRemovedItems = _shared_list_render_js__WEBPACK_IMPORTED_MODULE_5__.d.bind(this);
    this.deselectSiblingItems = _shared_list_render_js__WEBPACK_IMPORTED_MODULE_5__.a.bind(this);
    this.selectSiblings = _shared_list_render_js__WEBPACK_IMPORTED_MODULE_5__.s.bind(this);
    this.handleFilter = _shared_list_render_js__WEBPACK_IMPORTED_MODULE_5__.h.bind(this);
    this.handleFilterEvent = _shared_list_render_js__WEBPACK_IMPORTED_MODULE_5__.b.bind(this);
    this.getItemData = _shared_list_render_js__WEBPACK_IMPORTED_MODULE_5__.g.bind(this);
    this.keyDownHandler = (event) => {
      if (event.defaultPrevented) {
        return;
      }
      const { handle, item } = getHandleAndItemElement(event);
      if (handle && !item.handleActivated && event.key === " ") {
        this.updateScreenReaderText(getScreenReaderText(item, "commit", this));
      }
      if (!handle || !item.handleActivated) {
        _shared_list_render_js__WEBPACK_IMPORTED_MODULE_5__.k.call(this, event);
        return;
      }
      event.preventDefault();
      const { items } = this;
      if (event.key === " ") {
        this.updateScreenReaderText(getScreenReaderText(item, "active", this));
      }
      if ((event.key !== "ArrowUp" && event.key !== "ArrowDown") || items.length <= 1) {
        return;
      }
      const { el } = this;
      const nextIndex = (0,_shared_list_render_js__WEBPACK_IMPORTED_MODULE_5__.t)(this, item, event.key === "ArrowUp" ? "up" : "down");
      if (nextIndex === items.length - 1) {
        el.appendChild(item);
      }
      else {
        const itemAtNextIndex = el.children[nextIndex];
        const insertionReferenceItem = itemAtNextIndex === item.nextElementSibling
          ? itemAtNextIndex.nextElementSibling
          : itemAtNextIndex;
        el.insertBefore(item, insertionReferenceItem);
      }
      this.items = this.getItems();
      this.calciteListOrderChange.emit(this.items.map(({ value }) => value));
      requestAnimationFrame(() => (0,_dom_js__WEBPACK_IMPORTED_MODULE_7__.k)(handle));
      item.handleActivated = true;
      this.updateHandleAriaLabel(handle, getScreenReaderText(item, "change", this));
    };
    this.storeAssistiveEl = (el) => {
      this.assistiveTextEl = el;
    };
    this.handleFocusIn = (event) => {
      const { handle, item } = getHandleAndItemElement(event);
      if (!item?.handleActivated && item && handle) {
        this.updateHandleAriaLabel(handle, getScreenReaderText(item, "idle", this));
      }
    };
    this.disabled = false;
    this.canPull = undefined;
    this.canPut = undefined;
    this.dragEnabled = false;
    this.filteredItems = [];
    this.filteredData = [];
    this.filterEnabled = false;
    this.filterPlaceholder = undefined;
    this.filterText = undefined;
    this.group = undefined;
    this.loading = false;
    this.multiple = false;
    this.selectionFollowsFocus = false;
    this.messageOverrides = undefined;
    this.messages = undefined;
    this.dataForFilter = [];
    this.defaultMessages = undefined;
    this.effectiveLocale = "";
    this.selectedValues = new Map();
  }
  onMessagesChange() {
    /* wired up by t9n util */
  }
  effectiveLocaleChange() {
    (0,_t9n_js__WEBPACK_IMPORTED_MODULE_4__.u)(this, this.effectiveLocale);
  }
  // --------------------------------------------------------------------------
  //
  //  Lifecycle
  //
  // --------------------------------------------------------------------------
  connectedCallback() {
    if ((0,_sortableComponent_js__WEBPACK_IMPORTED_MODULE_6__.d)(this)) {
      return;
    }
    (0,_interactive_js__WEBPACK_IMPORTED_MODULE_0__.c)(this);
    (0,_locale_js__WEBPACK_IMPORTED_MODULE_2__.c)(this);
    (0,_t9n_js__WEBPACK_IMPORTED_MODULE_4__.c)(this);
    _shared_list_render_js__WEBPACK_IMPORTED_MODULE_5__.i.call(this);
    _shared_list_render_js__WEBPACK_IMPORTED_MODULE_5__.c.call(this);
    this.setUpSorting();
  }
  async componentWillLoad() {
    (0,_loadable_js__WEBPACK_IMPORTED_MODULE_1__.a)(this);
    await (0,_t9n_js__WEBPACK_IMPORTED_MODULE_4__.s)(this);
  }
  componentDidLoad() {
    (0,_loadable_js__WEBPACK_IMPORTED_MODULE_1__.s)(this);
    _shared_list_render_js__WEBPACK_IMPORTED_MODULE_5__.f.call(this);
  }
  componentDidRender() {
    (0,_interactive_js__WEBPACK_IMPORTED_MODULE_0__.u)(this);
  }
  disconnectedCallback() {
    if ((0,_sortableComponent_js__WEBPACK_IMPORTED_MODULE_6__.d)(this)) {
      return;
    }
    (0,_interactive_js__WEBPACK_IMPORTED_MODULE_0__.d)(this);
    (0,_sortableComponent_js__WEBPACK_IMPORTED_MODULE_6__.a)(this);
    (0,_locale_js__WEBPACK_IMPORTED_MODULE_2__.d)(this);
    (0,_t9n_js__WEBPACK_IMPORTED_MODULE_4__.d)(this);
    _shared_list_render_js__WEBPACK_IMPORTED_MODULE_5__.e.call(this);
  }
  calciteListFocusOutHandler(event) {
    _shared_list_render_js__WEBPACK_IMPORTED_MODULE_5__.n.call(this, event);
  }
  calciteListItemRemoveHandler(event) {
    _shared_list_render_js__WEBPACK_IMPORTED_MODULE_5__.r.call(this, event);
  }
  calciteListItemChangeHandler(event) {
    _shared_list_render_js__WEBPACK_IMPORTED_MODULE_5__.j.call(this, event);
  }
  calciteInternalListItemPropsChangeHandler(event) {
    event.stopPropagation();
    this.setUpFilter();
  }
  calciteInternalListItemValueChangeHandler(event) {
    _shared_list_render_js__WEBPACK_IMPORTED_MODULE_5__.l.call(this, event);
    event.stopPropagation();
  }
  // --------------------------------------------------------------------------
  //
  //  Private Methods
  //
  // --------------------------------------------------------------------------
  onDragStart() {
    _shared_list_render_js__WEBPACK_IMPORTED_MODULE_5__.e.call(this);
  }
  onDragEnd() {
    _shared_list_render_js__WEBPACK_IMPORTED_MODULE_5__.c.call(this);
  }
  onDragSort() {
    this.items = Array.from(this.el.querySelectorAll("calcite-value-list-item"));
    const values = this.items.map((item) => item.value);
    this.calciteListOrderChange.emit(values);
  }
  getItems() {
    return Array.from(this.el.querySelectorAll("calcite-value-list-item"));
  }
  setUpItems() {
    _shared_list_render_js__WEBPACK_IMPORTED_MODULE_5__.o.call(this, "calcite-value-list-item");
    this.setUpSorting();
  }
  setUpFilter() {
    if (this.filterEnabled) {
      this.dataForFilter = this.getItemData();
    }
  }
  setUpSorting() {
    const { dragEnabled } = this;
    if (!dragEnabled) {
      return;
    }
    (0,_sortableComponent_js__WEBPACK_IMPORTED_MODULE_6__.c)(this);
  }
  handleBlur() {
    if (this.dragEnabled) {
      this.updateScreenReaderText("");
    }
  }
  // --------------------------------------------------------------------------
  //
  //  Public Methods
  //
  // --------------------------------------------------------------------------
  /** Returns the currently selected items */
  async getSelectedItems() {
    return this.selectedValues;
  }
  /**
   * Sets focus on the component's first focusable element.
   *
   * @param focusId
   */
  async setFocus(focusId) {
    await (0,_loadable_js__WEBPACK_IMPORTED_MODULE_1__.c)(this);
    return _shared_list_render_js__WEBPACK_IMPORTED_MODULE_5__.p.call(this, focusId);
  }
  // --------------------------------------------------------------------------
  //
  //  Render Methods
  //
  // --------------------------------------------------------------------------
  getIconType() {
    let type = null;
    if (this.dragEnabled) {
      type = ICON_TYPES.grip;
    }
    return type;
  }
  updateScreenReaderText(text) {
    this.assistiveTextEl.textContent = text;
  }
  updateHandleAriaLabel(handleElement, text) {
    handleElement.ariaLabel = text;
  }
  handleValueListItemBlur(event) {
    const { item, handle } = event.detail;
    if (!item?.handleActivated && item) {
      this.updateHandleAriaLabel(handle, getScreenReaderText(item, "idle", this));
    }
    event.stopPropagation();
  }
  render() {
    return ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_14__.h)(_shared_list_render_js__WEBPACK_IMPORTED_MODULE_5__.L, { onBlur: this.handleBlur, onFocusin: this.handleFocusIn, onKeyDown: this.keyDownHandler, props: this }));
  }
  static get assetsDirs() { return ["assets"]; }
  get el() { return this; }
  static get watchers() { return {
    "messageOverrides": ["onMessagesChange"],
    "effectiveLocale": ["effectiveLocaleChange"]
  }; }
  static get style() { return valueListCss; }
}, [1, "calcite-value-list", {
    "disabled": [516],
    "canPull": [16],
    "canPut": [16],
    "dragEnabled": [516, "drag-enabled"],
    "filteredItems": [1040],
    "filteredData": [1040],
    "filterEnabled": [516, "filter-enabled"],
    "filterPlaceholder": [513, "filter-placeholder"],
    "filterText": [1537, "filter-text"],
    "group": [513],
    "loading": [516],
    "multiple": [516],
    "selectionFollowsFocus": [516, "selection-follows-focus"],
    "messageOverrides": [1040],
    "messages": [1040],
    "dataForFilter": [32],
    "defaultMessages": [32],
    "effectiveLocale": [32],
    "selectedValues": [32],
    "getSelectedItems": [64],
    "setFocus": [64]
  }, [[0, "focusout", "calciteListFocusOutHandler"], [0, "calciteListItemRemove", "calciteListItemRemoveHandler"], [0, "calciteListItemChange", "calciteListItemChangeHandler"], [0, "calciteInternalListItemPropsChange", "calciteInternalListItemPropsChangeHandler"], [0, "calciteInternalListItemValueChange", "calciteInternalListItemValueChangeHandler"], [0, "calciteValueListItemDragHandleBlur", "handleValueListItemBlur"]]]);
function defineCustomElement$1() {
  if (typeof customElements === "undefined") {
    return;
  }
  const components = ["calcite-value-list", "calcite-filter", "calcite-icon", "calcite-input", "calcite-loader", "calcite-progress", "calcite-scrim"];
  components.forEach(tagName => { switch (tagName) {
    case "calcite-value-list":
      if (!customElements.get(tagName)) {
        customElements.define(tagName, ValueList);
      }
      break;
    case "calcite-filter":
      if (!customElements.get(tagName)) {
        (0,_filter_js__WEBPACK_IMPORTED_MODULE_8__.d)();
      }
      break;
    case "calcite-icon":
      if (!customElements.get(tagName)) {
        (0,_icon_js__WEBPACK_IMPORTED_MODULE_9__.d)();
      }
      break;
    case "calcite-input":
      if (!customElements.get(tagName)) {
        (0,_input_js__WEBPACK_IMPORTED_MODULE_10__.d)();
      }
      break;
    case "calcite-loader":
      if (!customElements.get(tagName)) {
        (0,_loader_js__WEBPACK_IMPORTED_MODULE_11__.d)();
      }
      break;
    case "calcite-progress":
      if (!customElements.get(tagName)) {
        (0,_progress_js__WEBPACK_IMPORTED_MODULE_12__.d)();
      }
      break;
    case "calcite-scrim":
      if (!customElements.get(tagName)) {
        (0,_scrim_js__WEBPACK_IMPORTED_MODULE_13__.d)();
      }
      break;
  } });
}
defineCustomElement$1();

const CalciteValueList = ValueList;
const defineCustomElement = defineCustomElement$1;




/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/components/filter.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/components/filter.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   F: () => (/* binding */ Filter),
/* harmony export */   d: () => (/* binding */ defineCustomElement)
/* harmony export */ });
/* harmony import */ var _stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @stencil/core/internal/client/index.js */ "./node_modules/@stencil/core/internal/client/index.js");
/* harmony import */ var _filter2_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./filter2.js */ "./node_modules/@esri/calcite-components/dist/components/filter2.js");
/* harmony import */ var _interactive_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./interactive.js */ "./node_modules/@esri/calcite-components/dist/components/interactive.js");
/* harmony import */ var _loadable_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./loadable.js */ "./node_modules/@esri/calcite-components/dist/components/loadable.js");
/* harmony import */ var _locale_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./locale.js */ "./node_modules/@esri/calcite-components/dist/components/locale.js");
/* harmony import */ var _t9n_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./t9n.js */ "./node_modules/@esri/calcite-components/dist/components/t9n.js");
/* harmony import */ var _icon_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./icon.js */ "./node_modules/@esri/calcite-components/dist/components/icon.js");
/* harmony import */ var _input_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./input.js */ "./node_modules/@esri/calcite-components/dist/components/input.js");
/* harmony import */ var _progress_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./progress.js */ "./node_modules/@esri/calcite-components/dist/components/progress.js");
/* harmony import */ var _debounce_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./debounce.js */ "./node_modules/@esri/calcite-components/dist/components/debounce.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.7.0
 */











const CSS = {
  container: "container",
  searchIcon: "search-icon",
};
const ICONS = {
  search: "search",
  close: "x",
};
const DEBOUNCE_TIMEOUT = 250;

const filterCss = ":host{box-sizing:border-box;background-color:var(--calcite-ui-foreground-1);color:var(--calcite-ui-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;inline-size:100%}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.container{display:flex;inline-size:100%;padding:0.5rem}label{position:relative;margin-inline:0.25rem;margin-block:0px;display:flex;inline-size:100%;align-items:center;overflow:hidden}input[type=text]{margin-block-end:0.25rem;inline-size:100%;border-style:none;background-color:transparent;padding-block:0.25rem;font-family:inherit;font-size:var(--calcite-font-size--2);line-height:1rem;color:var(--calcite-ui-text-1);padding-inline-end:0.25rem;padding-inline-start:1.5rem;transition:padding var(--calcite-animation-timing), box-shadow var(--calcite-animation-timing)}input[type=text]::-ms-clear{display:none}calcite-input{inline-size:100%}.search-icon{position:absolute;display:flex;color:var(--calcite-ui-text-2);inset-inline-start:0;transition:inset-inline-start var(--calcite-animation-timing), inset-inline-end var(--calcite-animation-timing), opacity var(--calcite-animation-timing)}input[type=text]:focus{border-color:var(--calcite-ui-brand);outline:2px solid transparent;outline-offset:2px;padding-inline:0.25rem}input[type=text]:focus~.search-icon{inset-inline-start:calc(1rem * -1);opacity:0}.clear-button{display:flex;cursor:pointer;align-items:center;border-width:0px;background-color:transparent;color:var(--calcite-ui-text-2)}.clear-button:hover,.clear-button:focus{color:var(--calcite-ui-text-1)}:host([hidden]){display:none}[hidden]{display:none}";

const Filter = /*@__PURE__*/ (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_9__.proxyCustomElement)(class extends _stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_9__.HTMLElement {
  constructor() {
    super();
    this.__registerHost();
    this.__attachShadow();
    this.calciteFilterChange = (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_9__.createEvent)(this, "calciteFilterChange", 6);
    // --------------------------------------------------------------------------
    //
    //  Private Methods
    //
    // --------------------------------------------------------------------------
    this.filterDebounced = (0,_debounce_js__WEBPACK_IMPORTED_MODULE_8__.d)((value, emit = false, onFilter) => this.updateFiltered((0,_filter2_js__WEBPACK_IMPORTED_MODULE_0__.f)(this.items, value), emit, onFilter), DEBOUNCE_TIMEOUT);
    this.inputHandler = (event) => {
      const target = event.target;
      this.value = target.value;
      this.filterDebounced(target.value, true);
    };
    this.keyDownHandler = (event) => {
      if (event.key === "Escape") {
        this.clear();
        event.preventDefault();
      }
      if (event.key === "Enter") {
        event.preventDefault();
      }
    };
    this.clear = () => {
      this.value = "";
      this.filterDebounced("", true);
      this.setFocus();
    };
    this.items = [];
    this.disabled = false;
    this.filteredItems = [];
    this.placeholder = undefined;
    this.scale = "m";
    this.value = "";
    this.messages = undefined;
    this.messageOverrides = undefined;
    this.effectiveLocale = undefined;
    this.defaultMessages = undefined;
  }
  watchItemsHandler() {
    this.filterDebounced(this.value);
  }
  onMessagesChange() {
    /* wired up by t9n util */
  }
  valueHandler(value) {
    this.filterDebounced(value);
  }
  effectiveLocaleChange() {
    (0,_t9n_js__WEBPACK_IMPORTED_MODULE_4__.u)(this, this.effectiveLocale);
  }
  //--------------------------------------------------------------------------
  //
  //  Lifecycle
  //
  //--------------------------------------------------------------------------
  async componentWillLoad() {
    (0,_loadable_js__WEBPACK_IMPORTED_MODULE_2__.a)(this);
    this.updateFiltered((0,_filter2_js__WEBPACK_IMPORTED_MODULE_0__.f)(this.items, this.value));
    await (0,_t9n_js__WEBPACK_IMPORTED_MODULE_4__.s)(this);
  }
  connectedCallback() {
    (0,_interactive_js__WEBPACK_IMPORTED_MODULE_1__.c)(this);
    (0,_locale_js__WEBPACK_IMPORTED_MODULE_3__.c)(this);
    (0,_t9n_js__WEBPACK_IMPORTED_MODULE_4__.c)(this);
  }
  componentDidRender() {
    (0,_interactive_js__WEBPACK_IMPORTED_MODULE_1__.u)(this);
  }
  disconnectedCallback() {
    (0,_interactive_js__WEBPACK_IMPORTED_MODULE_1__.d)(this);
    (0,_locale_js__WEBPACK_IMPORTED_MODULE_3__.d)(this);
    (0,_t9n_js__WEBPACK_IMPORTED_MODULE_4__.d)(this);
    this.filterDebounced.cancel();
  }
  componentDidLoad() {
    (0,_loadable_js__WEBPACK_IMPORTED_MODULE_2__.s)(this);
  }
  // --------------------------------------------------------------------------
  //
  //  Public Methods
  //
  // --------------------------------------------------------------------------
  /**
   * Performs a filter on the component.
   *
   * This method can be useful because filtering is delayed and asynchronous.
   *
   * @param {string} value - The filter text value.
   * @returns {Promise<void>}
   */
  async filter(value = this.value) {
    return new Promise((resolve) => {
      this.value = value;
      this.filterDebounced(value, false, resolve);
    });
  }
  /** Sets focus on the component. */
  async setFocus() {
    await (0,_loadable_js__WEBPACK_IMPORTED_MODULE_2__.c)(this);
    this.el?.focus();
  }
  updateFiltered(filtered, emit = false, callback) {
    this.filteredItems = filtered;
    if (emit) {
      this.calciteFilterChange.emit();
    }
    callback?.();
  }
  // --------------------------------------------------------------------------
  //
  //  Render Methods
  //
  // --------------------------------------------------------------------------
  render() {
    const { disabled, scale } = this;
    return ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_9__.h)(_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_9__.Fragment, null, (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_9__.h)("div", { class: CSS.container }, (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_9__.h)("label", null, (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_9__.h)("calcite-input", { "aria-label": this.messages.label, clearable: true, disabled: disabled, icon: ICONS.search, messageOverrides: { clear: this.messages.clear }, onCalciteInputInput: this.inputHandler, onKeyDown: this.keyDownHandler, placeholder: this.placeholder, scale: scale, type: "text", value: this.value,
      // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)
      ref: (el) => {
        this.textInput = el;
      } })))));
  }
  static get delegatesFocus() { return true; }
  static get assetsDirs() { return ["assets"]; }
  get el() { return this; }
  static get watchers() { return {
    "items": ["watchItemsHandler"],
    "messageOverrides": ["onMessagesChange"],
    "value": ["valueHandler"],
    "effectiveLocale": ["effectiveLocaleChange"]
  }; }
  static get style() { return filterCss; }
}, [17, "calcite-filter", {
    "items": [16],
    "disabled": [516],
    "filteredItems": [1040],
    "placeholder": [1],
    "scale": [513],
    "value": [1025],
    "messages": [1040],
    "messageOverrides": [1040],
    "effectiveLocale": [32],
    "defaultMessages": [32],
    "filter": [64],
    "setFocus": [64]
  }]);
function defineCustomElement() {
  if (typeof customElements === "undefined") {
    return;
  }
  const components = ["calcite-filter", "calcite-icon", "calcite-input", "calcite-progress"];
  components.forEach(tagName => { switch (tagName) {
    case "calcite-filter":
      if (!customElements.get(tagName)) {
        customElements.define(tagName, Filter);
      }
      break;
    case "calcite-icon":
      if (!customElements.get(tagName)) {
        (0,_icon_js__WEBPACK_IMPORTED_MODULE_5__.d)();
      }
      break;
    case "calcite-input":
      if (!customElements.get(tagName)) {
        (0,_input_js__WEBPACK_IMPORTED_MODULE_6__.d)();
      }
      break;
    case "calcite-progress":
      if (!customElements.get(tagName)) {
        (0,_progress_js__WEBPACK_IMPORTED_MODULE_7__.d)();
      }
      break;
  } });
}
defineCustomElement();




/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfZXNyaV9jYWxjaXRlLWNvbXBvbmVudHNfZGlzdF9jb21wb25lbnRzX2NhbGNpdGUtdmFsdWUtbGlzdF9qcy5idW5kbGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ3lHO0FBQ1U7QUFDTDtBQUNoQztBQUN6QjtBQUM2RDtBQUNvYTtBQUM1WjtBQUM3RTtBQUNZO0FBQ0Y7QUFDQztBQUNDO0FBQ0U7QUFDSDs7QUFFeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGdDQUFnQzs7QUFFakM7QUFDQSxVQUFVLGtCQUFrQjtBQUM1QjtBQUNBLG1CQUFtQix5REFBWTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EseUNBQXlDLFNBQVM7QUFDbEQsaURBQWlELFVBQVU7QUFDM0QsZ0NBQWdDLE1BQU07QUFDdEM7O0FBRUEsd0NBQXdDLGVBQWUseUJBQXlCLGlCQUFpQiwyQ0FBMkMsbURBQW1ELG9CQUFvQixNQUFNLGtCQUFrQixzQkFBc0IsYUFBYSxjQUFjLFlBQVksc0JBQXNCLG9CQUFvQiw2QkFBNkIsc0NBQXNDLCtCQUErQixRQUFRLHNCQUFzQix5R0FBeUcsVUFBVSxxQ0FBcUMsc0JBQXNCLDhCQUE4Qix1R0FBdUcsK0JBQStCLHlCQUF5QixhQUFhLG1CQUFtQix5QkFBeUIsZ0RBQWdELCtDQUErQyxtREFBbUQsdUdBQXVHLDBDQUEwQyxnQkFBZ0Isc0JBQXNCLDBDQUEwQyxlQUFlLHFCQUFxQixnQkFBZ0Isa0JBQWtCLGdCQUFnQixlQUFlLFVBQVUsWUFBWSxnQkFBZ0Isc0JBQXNCLG1CQUFtQixlQUFlLGdCQUFnQixhQUFhLFNBQVMsYUFBYTs7QUFFLzlDLGdDQUFnQywy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QW1CO0FBQ3ZCLElBQUksMENBQWtCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBLElBQUksK0NBQWtCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsVUFBVSwrQ0FBa0I7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxrQkFBa0I7QUFDOUIsWUFBWSx5RUFBQyxDQUFDLDRFQUFRLFFBQVEseUVBQUMsVUFBVSxzQkFBc0IsRUFBRSx5RUFBQyxnQkFBZ0IseUVBQUMsb0JBQW9CLGdIQUFnSCw0QkFBNEI7QUFDblA7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsZ0NBQWdDO0FBQ2hDLDRCQUE0QjtBQUM1QixhQUFhO0FBQ2IsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkIsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwyQ0FBcUI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDRDQUFxQjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsK0NBQXFCO0FBQzdCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFaUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zeW52aWV3Ly4vbm9kZV9tb2R1bGVzL0Blc3JpL2NhbGNpdGUtY29tcG9uZW50cy9kaXN0L2NvbXBvbmVudHMvY2FsY2l0ZS12YWx1ZS1saXN0LmpzIiwid2VicGFjazovL3N5bnZpZXcvLi9ub2RlX21vZHVsZXMvQGVzcmkvY2FsY2l0ZS1jb21wb25lbnRzL2Rpc3QvY29tcG9uZW50cy9maWx0ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Fc3JpL2NhbGNpdGUtZGVzaWduLXN5c3RlbS9ibG9iL21haW4vTElDRU5TRS5tZCBmb3IgZGV0YWlscy5cbiAqIHYxLjcuMFxuICovXG5pbXBvcnQgeyBwcm94eUN1c3RvbUVsZW1lbnQsIEhUTUxFbGVtZW50LCBjcmVhdGVFdmVudCwgaCB9IGZyb20gJ0BzdGVuY2lsL2NvcmUvaW50ZXJuYWwvY2xpZW50L2luZGV4LmpzJztcbmltcG9ydCB7IGMgYXMgY29ubmVjdEludGVyYWN0aXZlLCB1IGFzIHVwZGF0ZUhvc3RJbnRlcmFjdGlvbiwgZCBhcyBkaXNjb25uZWN0SW50ZXJhY3RpdmUgfSBmcm9tICcuL2ludGVyYWN0aXZlLmpzJztcbmltcG9ydCB7IGEgYXMgc2V0VXBMb2FkYWJsZUNvbXBvbmVudCwgcyBhcyBzZXRDb21wb25lbnRMb2FkZWQsIGMgYXMgY29tcG9uZW50Rm9jdXNhYmxlIH0gZnJvbSAnLi9sb2FkYWJsZS5qcyc7XG5pbXBvcnQgeyBjIGFzIGNvbm5lY3RMb2NhbGl6ZWQsIGQgYXMgZGlzY29ubmVjdExvY2FsaXplZCB9IGZyb20gJy4vbG9jYWxlLmpzJztcbmltcG9ydCB7IGMgYXMgY3JlYXRlT2JzZXJ2ZXIgfSBmcm9tICcuL29ic2VydmVycy5qcyc7XG5pbXBvcnQgeyB1IGFzIHVwZGF0ZU1lc3NhZ2VzLCBjIGFzIGNvbm5lY3RNZXNzYWdlcywgcyBhcyBzZXRVcE1lc3NhZ2VzLCBkIGFzIGRpc2Nvbm5lY3RNZXNzYWdlcyB9IGZyb20gJy4vdDluLmpzJztcbmltcG9ydCB7IHEgYXMgZ2V0SXRlbUluZGV4LCBtIGFzIG11dGF0aW9uT2JzZXJ2ZXJDYWxsYmFjaywgZCBhcyBkZXNlbGVjdFJlbW92ZWRJdGVtcywgYSBhcyBkZXNlbGVjdFNpYmxpbmdJdGVtcywgcyBhcyBzZWxlY3RTaWJsaW5ncywgaCBhcyBoYW5kbGVGaWx0ZXIsIGIgYXMgaGFuZGxlRmlsdGVyRXZlbnQsIGcgYXMgZ2V0SXRlbURhdGEsIGsgYXMga2V5RG93bkhhbmRsZXIsIHQgYXMgbW92ZUl0ZW1JbmRleCwgaSBhcyBpbml0aWFsaXplLCBjIGFzIGluaXRpYWxpemVPYnNlcnZlciwgZiBhcyBoYW5kbGVJbml0aWFsRmlsdGVyLCBlIGFzIGNsZWFuVXBPYnNlcnZlciwgbiBhcyBjYWxjaXRlTGlzdEZvY3VzT3V0SGFuZGxlciwgciBhcyByZW1vdmVJdGVtLCBqIGFzIGNhbGNpdGVMaXN0SXRlbUNoYW5nZUhhbmRsZXIsIGwgYXMgY2FsY2l0ZUludGVybmFsTGlzdEl0ZW1WYWx1ZUNoYW5nZUhhbmRsZXIsIG8gYXMgc2V0VXBJdGVtcywgcCBhcyBzZXRGb2N1cywgTCBhcyBMaXN0IH0gZnJvbSAnLi9zaGFyZWQtbGlzdC1yZW5kZXIuanMnO1xuaW1wb3J0IHsgZCBhcyBkcmFnQWN0aXZlLCBhIGFzIGRpc2Nvbm5lY3RTb3J0YWJsZUNvbXBvbmVudCwgYyBhcyBjb25uZWN0U29ydGFibGVDb21wb25lbnQgfSBmcm9tICcuL3NvcnRhYmxlQ29tcG9uZW50LmpzJztcbmltcG9ydCB7IGsgYXMgZm9jdXNFbGVtZW50IH0gZnJvbSAnLi9kb20uanMnO1xuaW1wb3J0IHsgZCBhcyBkZWZpbmVDdXN0b21FbGVtZW50JDcgfSBmcm9tICcuL2ZpbHRlci5qcyc7XG5pbXBvcnQgeyBkIGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkNiB9IGZyb20gJy4vaWNvbi5qcyc7XG5pbXBvcnQgeyBkIGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkNSB9IGZyb20gJy4vaW5wdXQuanMnO1xuaW1wb3J0IHsgZCBhcyBkZWZpbmVDdXN0b21FbGVtZW50JDQgfSBmcm9tICcuL2xvYWRlci5qcyc7XG5pbXBvcnQgeyBkIGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkMyB9IGZyb20gJy4vcHJvZ3Jlc3MuanMnO1xuaW1wb3J0IHsgZCBhcyBkZWZpbmVDdXN0b21FbGVtZW50JDIgfSBmcm9tICcuL3NjcmltLmpzJztcblxuY29uc3QgQ1NTID0ge1xuICBjb250YWluZXI6IFwiY29udGFpbmVyXCIsXG4gIGhhbmRsZTogXCJoYW5kbGVcIixcbn07XG52YXIgSUNPTl9UWVBFUztcbihmdW5jdGlvbiAoSUNPTl9UWVBFUykge1xuICBJQ09OX1RZUEVTW1wiZ3JpcFwiXSA9IFwiZ3JpcFwiO1xufSkoSUNPTl9UWVBFUyB8fCAoSUNPTl9UWVBFUyA9IHt9KSk7XG5cbmZ1bmN0aW9uIGdldFNjcmVlblJlYWRlclRleHQoaXRlbSwgc3RhdHVzLCB2YWx1ZUxpc3QpIHtcbiAgY29uc3QgeyBpdGVtcywgbWVzc2FnZXMgfSA9IHZhbHVlTGlzdDtcbiAgY29uc3QgdG90YWwgPSBpdGVtcy5sZW5ndGg7XG4gIGNvbnN0IHBvc2l0aW9uID0gZ2V0SXRlbUluZGV4KHZhbHVlTGlzdCwgaXRlbSkgKyAxO1xuICBjb25zdCB0ZW1wbGF0ZSA9IHN0YXR1cyA9PT0gXCJpZGxlXCJcbiAgICA/IG1lc3NhZ2VzLmRyYWdIYW5kbGVJZGxlXG4gICAgOiBzdGF0dXMgPT09IFwiYWN0aXZlXCJcbiAgICAgID8gbWVzc2FnZXMuZHJhZ0hhbmRsZUFjdGl2ZVxuICAgICAgOiBzdGF0dXMgPT09IFwiY2hhbmdlXCJcbiAgICAgICAgPyBtZXNzYWdlcy5kcmFnSGFuZGxlQ2hhbmdlXG4gICAgICAgIDogbWVzc2FnZXMuZHJhZ0hhbmRsZUNvbW1pdDtcbiAgcmV0dXJuIHJlcGxhY2VQbGFjZWhvbGRlcnModGVtcGxhdGUsIGl0ZW0ubGFiZWwsIHBvc2l0aW9uLCB0b3RhbCk7XG59XG5mdW5jdGlvbiBnZXRIYW5kbGVBbmRJdGVtRWxlbWVudChldmVudCkge1xuICBjb25zdCBoYW5kbGUgPSBldmVudFxuICAgIC5jb21wb3NlZFBhdGgoKVxuICAgIC5maW5kKChpdGVtKSA9PiBpdGVtLmRhdGFzZXQ/LmpzSGFuZGxlICE9PSB1bmRlZmluZWQpO1xuICBjb25zdCBpdGVtID0gZXZlbnRcbiAgICAuY29tcG9zZWRQYXRoKClcbiAgICAuZmluZCgoaXRlbSkgPT4gaXRlbS50YWdOYW1lPy50b0xvd2VyQ2FzZSgpID09PSBcImNhbGNpdGUtdmFsdWUtbGlzdC1pdGVtXCIpO1xuICByZXR1cm4geyBoYW5kbGUsIGl0ZW0gfTtcbn1cbmZ1bmN0aW9uIHJlcGxhY2VQbGFjZWhvbGRlcnModGV4dCwgbGFiZWwsIHBvc2l0aW9uLCB0b3RhbCkge1xuICBjb25zdCByZXBsYWNlUG9zaXRpb24gPSB0ZXh0LnJlcGxhY2UoXCJ7cG9zaXRpb259XCIsIHBvc2l0aW9uLnRvU3RyaW5nKCkpO1xuICBjb25zdCByZXBsYWNlTGFiZWwgPSByZXBsYWNlUG9zaXRpb24ucmVwbGFjZShcIntpdGVtTGFiZWx9XCIsIGxhYmVsKTtcbiAgcmV0dXJuIHJlcGxhY2VMYWJlbC5yZXBsYWNlKFwie3RvdGFsfVwiLCB0b3RhbC50b1N0cmluZygpKTtcbn1cblxuY29uc3QgdmFsdWVMaXN0Q3NzID0gXCI6aG9zdChbZGlzYWJsZWRdKXtjdXJzb3I6ZGVmYXVsdDstd2Via2l0LXVzZXItc2VsZWN0Om5vbmU7dXNlci1zZWxlY3Q6bm9uZTtvcGFjaXR5OnZhcigtLWNhbGNpdGUtdWktb3BhY2l0eS1kaXNhYmxlZCl9Omhvc3QoW2Rpc2FibGVkXSkgKiw6aG9zdChbZGlzYWJsZWRdKSA6OnNsb3R0ZWQoKil7cG9pbnRlci1ldmVudHM6bm9uZX06aG9zdHtwb3NpdGlvbjpyZWxhdGl2ZTtib3gtc2l6aW5nOmJvcmRlci1ib3g7ZGlzcGxheTpmbGV4O2ZsZXgtc2hyaW5rOjA7ZmxleC1ncm93OjA7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2FsaWduLWl0ZW1zOnN0cmV0Y2g7YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudDtmb250LXNpemU6dmFyKC0tY2FsY2l0ZS1mb250LXNpemUtLTEpO2NvbG9yOnZhcigtLWNhbGNpdGUtdWktdGV4dC0yKX06aG9zdCAqe2JveC1zaXppbmc6Ym9yZGVyLWJveH06aG9zdChbZGlzYWJsZWRdKSA6OnNsb3R0ZWQoW2NhbGNpdGUtaHlkcmF0ZWRdW2Rpc2FibGVkXSksOmhvc3QoW2Rpc2FibGVkXSkgW2NhbGNpdGUtaHlkcmF0ZWRdW2Rpc2FibGVkXXtvcGFjaXR5OjF9Y2FsY2l0ZS12YWx1ZS1saXN0LWl0ZW06bGFzdC1vZi10eXBley0tdHctc2hhZG93OjAgMCAjMDAwMDstLXR3LXNoYWRvdy1jb2xvcmVkOjAgMCAjMDAwMDtib3gtc2hhZG93OnZhcigtLXR3LXJpbmctb2Zmc2V0LXNoYWRvdywgMCAwICMwMDAwKSwgdmFyKC0tdHctcmluZy1zaGFkb3csIDAgMCAjMDAwMCksIHZhcigtLXR3LXNoYWRvdyl9Omhvc3QoW2ZpbHRlci1lbmFibGVkXSkgaGVhZGVye21hcmdpbi1ibG9jay1lbmQ6MC4yNXJlbTtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpmbGV4LWVuZDtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtdWktZm9yZWdyb3VuZC0xKTstLXR3LXNoYWRvdzowIDFweCAwIHZhcigtLWNhbGNpdGUtdWktYm9yZGVyLTMpOy0tdHctc2hhZG93LWNvbG9yZWQ6MCAxcHggMCB2YXIoLS10dy1zaGFkb3ctY29sb3IpO2JveC1zaGFkb3c6dmFyKC0tdHctcmluZy1vZmZzZXQtc2hhZG93LCAwIDAgIzAwMDApLCB2YXIoLS10dy1yaW5nLXNoYWRvdywgMCAwICMwMDAwKSwgdmFyKC0tdHctc2hhZG93KX06aG9zdChbZmlsdGVyLWVuYWJsZWRdKSBoZWFkZXIuc3RpY2t5LXBvc3twb3NpdGlvbjpzdGlja3k7aW5zZXQtYmxvY2stc3RhcnQ6MHB4O3otaW5kZXg6dmFyKC0tY2FsY2l0ZS1hcHAtei1pbmRleC1zdGlja3kpfWNhbGNpdGUtZmlsdGVye21hcmdpbi1ibG9jay1lbmQ6MXB4fS5hc3Npc3RpdmUtdGV4dHtwb3NpdGlvbjphYnNvbHV0ZTtpbmxpbmUtc2l6ZToxcHg7YmxvY2stc2l6ZToxcHg7cGFkZGluZzowO21hcmdpbjotMXB4O292ZXJmbG93OmhpZGRlbjtjbGlwOnJlY3QoMCwgMCwgMCwgMCk7d2hpdGUtc3BhY2U6bm93cmFwO2JvcmRlci13aWR0aDowfTpob3N0KFtoaWRkZW5dKXtkaXNwbGF5Om5vbmV9W2hpZGRlbl17ZGlzcGxheTpub25lfVwiO1xuXG5jb25zdCBWYWx1ZUxpc3QgPSAvKkBfX1BVUkVfXyovIHByb3h5Q3VzdG9tRWxlbWVudChjbGFzcyBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLl9fcmVnaXN0ZXJIb3N0KCk7XG4gICAgdGhpcy5fX2F0dGFjaFNoYWRvdygpO1xuICAgIHRoaXMuY2FsY2l0ZUxpc3RDaGFuZ2UgPSBjcmVhdGVFdmVudCh0aGlzLCBcImNhbGNpdGVMaXN0Q2hhbmdlXCIsIDYpO1xuICAgIHRoaXMuY2FsY2l0ZUxpc3RPcmRlckNoYW5nZSA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiY2FsY2l0ZUxpc3RPcmRlckNoYW5nZVwiLCA2KTtcbiAgICB0aGlzLmNhbGNpdGVMaXN0RmlsdGVyID0gY3JlYXRlRXZlbnQodGhpcywgXCJjYWxjaXRlTGlzdEZpbHRlclwiLCA2KTtcbiAgICB0aGlzLmxhc3RTZWxlY3RlZEl0ZW0gPSBudWxsO1xuICAgIHRoaXMubXV0YXRpb25PYnNlcnZlciA9IGNyZWF0ZU9ic2VydmVyKFwibXV0YXRpb25cIiwgbXV0YXRpb25PYnNlcnZlckNhbGxiYWNrLmJpbmQodGhpcykpO1xuICAgIHRoaXMuaGFuZGxlU2VsZWN0b3IgPSBgLiR7Q1NTLmhhbmRsZX1gO1xuICAgIHRoaXMuZHJhZ1NlbGVjdG9yID0gXCJjYWxjaXRlLXZhbHVlLWxpc3QtaXRlbVwiO1xuICAgIHRoaXMuc2V0RmlsdGVyRWwgPSAoZWwpID0+IHtcbiAgICAgIHRoaXMuZmlsdGVyRWwgPSBlbDtcbiAgICB9O1xuICAgIHRoaXMuc2V0RmlsdGVyZWRJdGVtcyA9IChmaWx0ZXJlZEl0ZW1zKSA9PiB7XG4gICAgICB0aGlzLmZpbHRlcmVkSXRlbXMgPSBmaWx0ZXJlZEl0ZW1zO1xuICAgIH07XG4gICAgdGhpcy5kZXNlbGVjdFJlbW92ZWRJdGVtcyA9IGRlc2VsZWN0UmVtb3ZlZEl0ZW1zLmJpbmQodGhpcyk7XG4gICAgdGhpcy5kZXNlbGVjdFNpYmxpbmdJdGVtcyA9IGRlc2VsZWN0U2libGluZ0l0ZW1zLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zZWxlY3RTaWJsaW5ncyA9IHNlbGVjdFNpYmxpbmdzLmJpbmQodGhpcyk7XG4gICAgdGhpcy5oYW5kbGVGaWx0ZXIgPSBoYW5kbGVGaWx0ZXIuYmluZCh0aGlzKTtcbiAgICB0aGlzLmhhbmRsZUZpbHRlckV2ZW50ID0gaGFuZGxlRmlsdGVyRXZlbnQuYmluZCh0aGlzKTtcbiAgICB0aGlzLmdldEl0ZW1EYXRhID0gZ2V0SXRlbURhdGEuYmluZCh0aGlzKTtcbiAgICB0aGlzLmtleURvd25IYW5kbGVyID0gKGV2ZW50KSA9PiB7XG4gICAgICBpZiAoZXZlbnQuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCB7IGhhbmRsZSwgaXRlbSB9ID0gZ2V0SGFuZGxlQW5kSXRlbUVsZW1lbnQoZXZlbnQpO1xuICAgICAgaWYgKGhhbmRsZSAmJiAhaXRlbS5oYW5kbGVBY3RpdmF0ZWQgJiYgZXZlbnQua2V5ID09PSBcIiBcIikge1xuICAgICAgICB0aGlzLnVwZGF0ZVNjcmVlblJlYWRlclRleHQoZ2V0U2NyZWVuUmVhZGVyVGV4dChpdGVtLCBcImNvbW1pdFwiLCB0aGlzKSk7XG4gICAgICB9XG4gICAgICBpZiAoIWhhbmRsZSB8fCAhaXRlbS5oYW5kbGVBY3RpdmF0ZWQpIHtcbiAgICAgICAga2V5RG93bkhhbmRsZXIuY2FsbCh0aGlzLCBldmVudCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBjb25zdCB7IGl0ZW1zIH0gPSB0aGlzO1xuICAgICAgaWYgKGV2ZW50LmtleSA9PT0gXCIgXCIpIHtcbiAgICAgICAgdGhpcy51cGRhdGVTY3JlZW5SZWFkZXJUZXh0KGdldFNjcmVlblJlYWRlclRleHQoaXRlbSwgXCJhY3RpdmVcIiwgdGhpcykpO1xuICAgICAgfVxuICAgICAgaWYgKChldmVudC5rZXkgIT09IFwiQXJyb3dVcFwiICYmIGV2ZW50LmtleSAhPT0gXCJBcnJvd0Rvd25cIikgfHwgaXRlbXMubGVuZ3RoIDw9IDEpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgeyBlbCB9ID0gdGhpcztcbiAgICAgIGNvbnN0IG5leHRJbmRleCA9IG1vdmVJdGVtSW5kZXgodGhpcywgaXRlbSwgZXZlbnQua2V5ID09PSBcIkFycm93VXBcIiA/IFwidXBcIiA6IFwiZG93blwiKTtcbiAgICAgIGlmIChuZXh0SW5kZXggPT09IGl0ZW1zLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgZWwuYXBwZW5kQ2hpbGQoaXRlbSk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgaXRlbUF0TmV4dEluZGV4ID0gZWwuY2hpbGRyZW5bbmV4dEluZGV4XTtcbiAgICAgICAgY29uc3QgaW5zZXJ0aW9uUmVmZXJlbmNlSXRlbSA9IGl0ZW1BdE5leHRJbmRleCA9PT0gaXRlbS5uZXh0RWxlbWVudFNpYmxpbmdcbiAgICAgICAgICA/IGl0ZW1BdE5leHRJbmRleC5uZXh0RWxlbWVudFNpYmxpbmdcbiAgICAgICAgICA6IGl0ZW1BdE5leHRJbmRleDtcbiAgICAgICAgZWwuaW5zZXJ0QmVmb3JlKGl0ZW0sIGluc2VydGlvblJlZmVyZW5jZUl0ZW0pO1xuICAgICAgfVxuICAgICAgdGhpcy5pdGVtcyA9IHRoaXMuZ2V0SXRlbXMoKTtcbiAgICAgIHRoaXMuY2FsY2l0ZUxpc3RPcmRlckNoYW5nZS5lbWl0KHRoaXMuaXRlbXMubWFwKCh7IHZhbHVlIH0pID0+IHZhbHVlKSk7XG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gZm9jdXNFbGVtZW50KGhhbmRsZSkpO1xuICAgICAgaXRlbS5oYW5kbGVBY3RpdmF0ZWQgPSB0cnVlO1xuICAgICAgdGhpcy51cGRhdGVIYW5kbGVBcmlhTGFiZWwoaGFuZGxlLCBnZXRTY3JlZW5SZWFkZXJUZXh0KGl0ZW0sIFwiY2hhbmdlXCIsIHRoaXMpKTtcbiAgICB9O1xuICAgIHRoaXMuc3RvcmVBc3Npc3RpdmVFbCA9IChlbCkgPT4ge1xuICAgICAgdGhpcy5hc3Npc3RpdmVUZXh0RWwgPSBlbDtcbiAgICB9O1xuICAgIHRoaXMuaGFuZGxlRm9jdXNJbiA9IChldmVudCkgPT4ge1xuICAgICAgY29uc3QgeyBoYW5kbGUsIGl0ZW0gfSA9IGdldEhhbmRsZUFuZEl0ZW1FbGVtZW50KGV2ZW50KTtcbiAgICAgIGlmICghaXRlbT8uaGFuZGxlQWN0aXZhdGVkICYmIGl0ZW0gJiYgaGFuZGxlKSB7XG4gICAgICAgIHRoaXMudXBkYXRlSGFuZGxlQXJpYUxhYmVsKGhhbmRsZSwgZ2V0U2NyZWVuUmVhZGVyVGV4dChpdGVtLCBcImlkbGVcIiwgdGhpcykpO1xuICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIHRoaXMuY2FuUHVsbCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmNhblB1dCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmRyYWdFbmFibGVkID0gZmFsc2U7XG4gICAgdGhpcy5maWx0ZXJlZEl0ZW1zID0gW107XG4gICAgdGhpcy5maWx0ZXJlZERhdGEgPSBbXTtcbiAgICB0aGlzLmZpbHRlckVuYWJsZWQgPSBmYWxzZTtcbiAgICB0aGlzLmZpbHRlclBsYWNlaG9sZGVyID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuZmlsdGVyVGV4dCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmdyb3VwID0gdW5kZWZpbmVkO1xuICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgIHRoaXMubXVsdGlwbGUgPSBmYWxzZTtcbiAgICB0aGlzLnNlbGVjdGlvbkZvbGxvd3NGb2N1cyA9IGZhbHNlO1xuICAgIHRoaXMubWVzc2FnZU92ZXJyaWRlcyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLm1lc3NhZ2VzID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuZGF0YUZvckZpbHRlciA9IFtdO1xuICAgIHRoaXMuZGVmYXVsdE1lc3NhZ2VzID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuZWZmZWN0aXZlTG9jYWxlID0gXCJcIjtcbiAgICB0aGlzLnNlbGVjdGVkVmFsdWVzID0gbmV3IE1hcCgpO1xuICB9XG4gIG9uTWVzc2FnZXNDaGFuZ2UoKSB7XG4gICAgLyogd2lyZWQgdXAgYnkgdDluIHV0aWwgKi9cbiAgfVxuICBlZmZlY3RpdmVMb2NhbGVDaGFuZ2UoKSB7XG4gICAgdXBkYXRlTWVzc2FnZXModGhpcywgdGhpcy5lZmZlY3RpdmVMb2NhbGUpO1xuICB9XG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vXG4gIC8vICBMaWZlY3ljbGVcbiAgLy9cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgaWYgKGRyYWdBY3RpdmUodGhpcykpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29ubmVjdEludGVyYWN0aXZlKHRoaXMpO1xuICAgIGNvbm5lY3RMb2NhbGl6ZWQodGhpcyk7XG4gICAgY29ubmVjdE1lc3NhZ2VzKHRoaXMpO1xuICAgIGluaXRpYWxpemUuY2FsbCh0aGlzKTtcbiAgICBpbml0aWFsaXplT2JzZXJ2ZXIuY2FsbCh0aGlzKTtcbiAgICB0aGlzLnNldFVwU29ydGluZygpO1xuICB9XG4gIGFzeW5jIGNvbXBvbmVudFdpbGxMb2FkKCkge1xuICAgIHNldFVwTG9hZGFibGVDb21wb25lbnQodGhpcyk7XG4gICAgYXdhaXQgc2V0VXBNZXNzYWdlcyh0aGlzKTtcbiAgfVxuICBjb21wb25lbnREaWRMb2FkKCkge1xuICAgIHNldENvbXBvbmVudExvYWRlZCh0aGlzKTtcbiAgICBoYW5kbGVJbml0aWFsRmlsdGVyLmNhbGwodGhpcyk7XG4gIH1cbiAgY29tcG9uZW50RGlkUmVuZGVyKCkge1xuICAgIHVwZGF0ZUhvc3RJbnRlcmFjdGlvbih0aGlzKTtcbiAgfVxuICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBpZiAoZHJhZ0FjdGl2ZSh0aGlzKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkaXNjb25uZWN0SW50ZXJhY3RpdmUodGhpcyk7XG4gICAgZGlzY29ubmVjdFNvcnRhYmxlQ29tcG9uZW50KHRoaXMpO1xuICAgIGRpc2Nvbm5lY3RMb2NhbGl6ZWQodGhpcyk7XG4gICAgZGlzY29ubmVjdE1lc3NhZ2VzKHRoaXMpO1xuICAgIGNsZWFuVXBPYnNlcnZlci5jYWxsKHRoaXMpO1xuICB9XG4gIGNhbGNpdGVMaXN0Rm9jdXNPdXRIYW5kbGVyKGV2ZW50KSB7XG4gICAgY2FsY2l0ZUxpc3RGb2N1c091dEhhbmRsZXIuY2FsbCh0aGlzLCBldmVudCk7XG4gIH1cbiAgY2FsY2l0ZUxpc3RJdGVtUmVtb3ZlSGFuZGxlcihldmVudCkge1xuICAgIHJlbW92ZUl0ZW0uY2FsbCh0aGlzLCBldmVudCk7XG4gIH1cbiAgY2FsY2l0ZUxpc3RJdGVtQ2hhbmdlSGFuZGxlcihldmVudCkge1xuICAgIGNhbGNpdGVMaXN0SXRlbUNoYW5nZUhhbmRsZXIuY2FsbCh0aGlzLCBldmVudCk7XG4gIH1cbiAgY2FsY2l0ZUludGVybmFsTGlzdEl0ZW1Qcm9wc0NoYW5nZUhhbmRsZXIoZXZlbnQpIHtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB0aGlzLnNldFVwRmlsdGVyKCk7XG4gIH1cbiAgY2FsY2l0ZUludGVybmFsTGlzdEl0ZW1WYWx1ZUNoYW5nZUhhbmRsZXIoZXZlbnQpIHtcbiAgICBjYWxjaXRlSW50ZXJuYWxMaXN0SXRlbVZhbHVlQ2hhbmdlSGFuZGxlci5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgfVxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvL1xuICAvLyAgUHJpdmF0ZSBNZXRob2RzXG4gIC8vXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIG9uRHJhZ1N0YXJ0KCkge1xuICAgIGNsZWFuVXBPYnNlcnZlci5jYWxsKHRoaXMpO1xuICB9XG4gIG9uRHJhZ0VuZCgpIHtcbiAgICBpbml0aWFsaXplT2JzZXJ2ZXIuY2FsbCh0aGlzKTtcbiAgfVxuICBvbkRyYWdTb3J0KCkge1xuICAgIHRoaXMuaXRlbXMgPSBBcnJheS5mcm9tKHRoaXMuZWwucXVlcnlTZWxlY3RvckFsbChcImNhbGNpdGUtdmFsdWUtbGlzdC1pdGVtXCIpKTtcbiAgICBjb25zdCB2YWx1ZXMgPSB0aGlzLml0ZW1zLm1hcCgoaXRlbSkgPT4gaXRlbS52YWx1ZSk7XG4gICAgdGhpcy5jYWxjaXRlTGlzdE9yZGVyQ2hhbmdlLmVtaXQodmFsdWVzKTtcbiAgfVxuICBnZXRJdGVtcygpIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmVsLnF1ZXJ5U2VsZWN0b3JBbGwoXCJjYWxjaXRlLXZhbHVlLWxpc3QtaXRlbVwiKSk7XG4gIH1cbiAgc2V0VXBJdGVtcygpIHtcbiAgICBzZXRVcEl0ZW1zLmNhbGwodGhpcywgXCJjYWxjaXRlLXZhbHVlLWxpc3QtaXRlbVwiKTtcbiAgICB0aGlzLnNldFVwU29ydGluZygpO1xuICB9XG4gIHNldFVwRmlsdGVyKCkge1xuICAgIGlmICh0aGlzLmZpbHRlckVuYWJsZWQpIHtcbiAgICAgIHRoaXMuZGF0YUZvckZpbHRlciA9IHRoaXMuZ2V0SXRlbURhdGEoKTtcbiAgICB9XG4gIH1cbiAgc2V0VXBTb3J0aW5nKCkge1xuICAgIGNvbnN0IHsgZHJhZ0VuYWJsZWQgfSA9IHRoaXM7XG4gICAgaWYgKCFkcmFnRW5hYmxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25uZWN0U29ydGFibGVDb21wb25lbnQodGhpcyk7XG4gIH1cbiAgaGFuZGxlQmx1cigpIHtcbiAgICBpZiAodGhpcy5kcmFnRW5hYmxlZCkge1xuICAgICAgdGhpcy51cGRhdGVTY3JlZW5SZWFkZXJUZXh0KFwiXCIpO1xuICAgIH1cbiAgfVxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvL1xuICAvLyAgUHVibGljIE1ldGhvZHNcbiAgLy9cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLyoqIFJldHVybnMgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCBpdGVtcyAqL1xuICBhc3luYyBnZXRTZWxlY3RlZEl0ZW1zKCkge1xuICAgIHJldHVybiB0aGlzLnNlbGVjdGVkVmFsdWVzO1xuICB9XG4gIC8qKlxuICAgKiBTZXRzIGZvY3VzIG9uIHRoZSBjb21wb25lbnQncyBmaXJzdCBmb2N1c2FibGUgZWxlbWVudC5cbiAgICpcbiAgICogQHBhcmFtIGZvY3VzSWRcbiAgICovXG4gIGFzeW5jIHNldEZvY3VzKGZvY3VzSWQpIHtcbiAgICBhd2FpdCBjb21wb25lbnRGb2N1c2FibGUodGhpcyk7XG4gICAgcmV0dXJuIHNldEZvY3VzLmNhbGwodGhpcywgZm9jdXNJZCk7XG4gIH1cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy9cbiAgLy8gIFJlbmRlciBNZXRob2RzXG4gIC8vXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIGdldEljb25UeXBlKCkge1xuICAgIGxldCB0eXBlID0gbnVsbDtcbiAgICBpZiAodGhpcy5kcmFnRW5hYmxlZCkge1xuICAgICAgdHlwZSA9IElDT05fVFlQRVMuZ3JpcDtcbiAgICB9XG4gICAgcmV0dXJuIHR5cGU7XG4gIH1cbiAgdXBkYXRlU2NyZWVuUmVhZGVyVGV4dCh0ZXh0KSB7XG4gICAgdGhpcy5hc3Npc3RpdmVUZXh0RWwudGV4dENvbnRlbnQgPSB0ZXh0O1xuICB9XG4gIHVwZGF0ZUhhbmRsZUFyaWFMYWJlbChoYW5kbGVFbGVtZW50LCB0ZXh0KSB7XG4gICAgaGFuZGxlRWxlbWVudC5hcmlhTGFiZWwgPSB0ZXh0O1xuICB9XG4gIGhhbmRsZVZhbHVlTGlzdEl0ZW1CbHVyKGV2ZW50KSB7XG4gICAgY29uc3QgeyBpdGVtLCBoYW5kbGUgfSA9IGV2ZW50LmRldGFpbDtcbiAgICBpZiAoIWl0ZW0/LmhhbmRsZUFjdGl2YXRlZCAmJiBpdGVtKSB7XG4gICAgICB0aGlzLnVwZGF0ZUhhbmRsZUFyaWFMYWJlbChoYW5kbGUsIGdldFNjcmVlblJlYWRlclRleHQoaXRlbSwgXCJpZGxlXCIsIHRoaXMpKTtcbiAgICB9XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIH1cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiAoaChMaXN0LCB7IG9uQmx1cjogdGhpcy5oYW5kbGVCbHVyLCBvbkZvY3VzaW46IHRoaXMuaGFuZGxlRm9jdXNJbiwgb25LZXlEb3duOiB0aGlzLmtleURvd25IYW5kbGVyLCBwcm9wczogdGhpcyB9KSk7XG4gIH1cbiAgc3RhdGljIGdldCBhc3NldHNEaXJzKCkgeyByZXR1cm4gW1wiYXNzZXRzXCJdOyB9XG4gIGdldCBlbCgpIHsgcmV0dXJuIHRoaXM7IH1cbiAgc3RhdGljIGdldCB3YXRjaGVycygpIHsgcmV0dXJuIHtcbiAgICBcIm1lc3NhZ2VPdmVycmlkZXNcIjogW1wib25NZXNzYWdlc0NoYW5nZVwiXSxcbiAgICBcImVmZmVjdGl2ZUxvY2FsZVwiOiBbXCJlZmZlY3RpdmVMb2NhbGVDaGFuZ2VcIl1cbiAgfTsgfVxuICBzdGF0aWMgZ2V0IHN0eWxlKCkgeyByZXR1cm4gdmFsdWVMaXN0Q3NzOyB9XG59LCBbMSwgXCJjYWxjaXRlLXZhbHVlLWxpc3RcIiwge1xuICAgIFwiZGlzYWJsZWRcIjogWzUxNl0sXG4gICAgXCJjYW5QdWxsXCI6IFsxNl0sXG4gICAgXCJjYW5QdXRcIjogWzE2XSxcbiAgICBcImRyYWdFbmFibGVkXCI6IFs1MTYsIFwiZHJhZy1lbmFibGVkXCJdLFxuICAgIFwiZmlsdGVyZWRJdGVtc1wiOiBbMTA0MF0sXG4gICAgXCJmaWx0ZXJlZERhdGFcIjogWzEwNDBdLFxuICAgIFwiZmlsdGVyRW5hYmxlZFwiOiBbNTE2LCBcImZpbHRlci1lbmFibGVkXCJdLFxuICAgIFwiZmlsdGVyUGxhY2Vob2xkZXJcIjogWzUxMywgXCJmaWx0ZXItcGxhY2Vob2xkZXJcIl0sXG4gICAgXCJmaWx0ZXJUZXh0XCI6IFsxNTM3LCBcImZpbHRlci10ZXh0XCJdLFxuICAgIFwiZ3JvdXBcIjogWzUxM10sXG4gICAgXCJsb2FkaW5nXCI6IFs1MTZdLFxuICAgIFwibXVsdGlwbGVcIjogWzUxNl0sXG4gICAgXCJzZWxlY3Rpb25Gb2xsb3dzRm9jdXNcIjogWzUxNiwgXCJzZWxlY3Rpb24tZm9sbG93cy1mb2N1c1wiXSxcbiAgICBcIm1lc3NhZ2VPdmVycmlkZXNcIjogWzEwNDBdLFxuICAgIFwibWVzc2FnZXNcIjogWzEwNDBdLFxuICAgIFwiZGF0YUZvckZpbHRlclwiOiBbMzJdLFxuICAgIFwiZGVmYXVsdE1lc3NhZ2VzXCI6IFszMl0sXG4gICAgXCJlZmZlY3RpdmVMb2NhbGVcIjogWzMyXSxcbiAgICBcInNlbGVjdGVkVmFsdWVzXCI6IFszMl0sXG4gICAgXCJnZXRTZWxlY3RlZEl0ZW1zXCI6IFs2NF0sXG4gICAgXCJzZXRGb2N1c1wiOiBbNjRdXG4gIH0sIFtbMCwgXCJmb2N1c291dFwiLCBcImNhbGNpdGVMaXN0Rm9jdXNPdXRIYW5kbGVyXCJdLCBbMCwgXCJjYWxjaXRlTGlzdEl0ZW1SZW1vdmVcIiwgXCJjYWxjaXRlTGlzdEl0ZW1SZW1vdmVIYW5kbGVyXCJdLCBbMCwgXCJjYWxjaXRlTGlzdEl0ZW1DaGFuZ2VcIiwgXCJjYWxjaXRlTGlzdEl0ZW1DaGFuZ2VIYW5kbGVyXCJdLCBbMCwgXCJjYWxjaXRlSW50ZXJuYWxMaXN0SXRlbVByb3BzQ2hhbmdlXCIsIFwiY2FsY2l0ZUludGVybmFsTGlzdEl0ZW1Qcm9wc0NoYW5nZUhhbmRsZXJcIl0sIFswLCBcImNhbGNpdGVJbnRlcm5hbExpc3RJdGVtVmFsdWVDaGFuZ2VcIiwgXCJjYWxjaXRlSW50ZXJuYWxMaXN0SXRlbVZhbHVlQ2hhbmdlSGFuZGxlclwiXSwgWzAsIFwiY2FsY2l0ZVZhbHVlTGlzdEl0ZW1EcmFnSGFuZGxlQmx1clwiLCBcImhhbmRsZVZhbHVlTGlzdEl0ZW1CbHVyXCJdXV0pO1xuZnVuY3Rpb24gZGVmaW5lQ3VzdG9tRWxlbWVudCQxKCkge1xuICBpZiAodHlwZW9mIGN1c3RvbUVsZW1lbnRzID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IGNvbXBvbmVudHMgPSBbXCJjYWxjaXRlLXZhbHVlLWxpc3RcIiwgXCJjYWxjaXRlLWZpbHRlclwiLCBcImNhbGNpdGUtaWNvblwiLCBcImNhbGNpdGUtaW5wdXRcIiwgXCJjYWxjaXRlLWxvYWRlclwiLCBcImNhbGNpdGUtcHJvZ3Jlc3NcIiwgXCJjYWxjaXRlLXNjcmltXCJdO1xuICBjb21wb25lbnRzLmZvckVhY2godGFnTmFtZSA9PiB7IHN3aXRjaCAodGFnTmFtZSkge1xuICAgIGNhc2UgXCJjYWxjaXRlLXZhbHVlLWxpc3RcIjpcbiAgICAgIGlmICghY3VzdG9tRWxlbWVudHMuZ2V0KHRhZ05hbWUpKSB7XG4gICAgICAgIGN1c3RvbUVsZW1lbnRzLmRlZmluZSh0YWdOYW1lLCBWYWx1ZUxpc3QpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcImNhbGNpdGUtZmlsdGVyXCI6XG4gICAgICBpZiAoIWN1c3RvbUVsZW1lbnRzLmdldCh0YWdOYW1lKSkge1xuICAgICAgICBkZWZpbmVDdXN0b21FbGVtZW50JDcoKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJjYWxjaXRlLWljb25cIjpcbiAgICAgIGlmICghY3VzdG9tRWxlbWVudHMuZ2V0KHRhZ05hbWUpKSB7XG4gICAgICAgIGRlZmluZUN1c3RvbUVsZW1lbnQkNigpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcImNhbGNpdGUtaW5wdXRcIjpcbiAgICAgIGlmICghY3VzdG9tRWxlbWVudHMuZ2V0KHRhZ05hbWUpKSB7XG4gICAgICAgIGRlZmluZUN1c3RvbUVsZW1lbnQkNSgpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcImNhbGNpdGUtbG9hZGVyXCI6XG4gICAgICBpZiAoIWN1c3RvbUVsZW1lbnRzLmdldCh0YWdOYW1lKSkge1xuICAgICAgICBkZWZpbmVDdXN0b21FbGVtZW50JDQoKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJjYWxjaXRlLXByb2dyZXNzXCI6XG4gICAgICBpZiAoIWN1c3RvbUVsZW1lbnRzLmdldCh0YWdOYW1lKSkge1xuICAgICAgICBkZWZpbmVDdXN0b21FbGVtZW50JDMoKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJjYWxjaXRlLXNjcmltXCI6XG4gICAgICBpZiAoIWN1c3RvbUVsZW1lbnRzLmdldCh0YWdOYW1lKSkge1xuICAgICAgICBkZWZpbmVDdXN0b21FbGVtZW50JDIoKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICB9IH0pO1xufVxuZGVmaW5lQ3VzdG9tRWxlbWVudCQxKCk7XG5cbmNvbnN0IENhbGNpdGVWYWx1ZUxpc3QgPSBWYWx1ZUxpc3Q7XG5jb25zdCBkZWZpbmVDdXN0b21FbGVtZW50ID0gZGVmaW5lQ3VzdG9tRWxlbWVudCQxO1xuXG5leHBvcnQgeyBDYWxjaXRlVmFsdWVMaXN0LCBkZWZpbmVDdXN0b21FbGVtZW50IH07XG4iLCIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1kZXNpZ24tc3lzdGVtL2Jsb2IvbWFpbi9MSUNFTlNFLm1kIGZvciBkZXRhaWxzLlxuICogdjEuNy4wXG4gKi9cbmltcG9ydCB7IHByb3h5Q3VzdG9tRWxlbWVudCwgSFRNTEVsZW1lbnQsIGNyZWF0ZUV2ZW50LCBoLCBGcmFnbWVudCB9IGZyb20gJ0BzdGVuY2lsL2NvcmUvaW50ZXJuYWwvY2xpZW50L2luZGV4LmpzJztcbmltcG9ydCB7IGYgYXMgZmlsdGVyIH0gZnJvbSAnLi9maWx0ZXIyLmpzJztcbmltcG9ydCB7IGMgYXMgY29ubmVjdEludGVyYWN0aXZlLCB1IGFzIHVwZGF0ZUhvc3RJbnRlcmFjdGlvbiwgZCBhcyBkaXNjb25uZWN0SW50ZXJhY3RpdmUgfSBmcm9tICcuL2ludGVyYWN0aXZlLmpzJztcbmltcG9ydCB7IGEgYXMgc2V0VXBMb2FkYWJsZUNvbXBvbmVudCwgcyBhcyBzZXRDb21wb25lbnRMb2FkZWQsIGMgYXMgY29tcG9uZW50Rm9jdXNhYmxlIH0gZnJvbSAnLi9sb2FkYWJsZS5qcyc7XG5pbXBvcnQgeyBjIGFzIGNvbm5lY3RMb2NhbGl6ZWQsIGQgYXMgZGlzY29ubmVjdExvY2FsaXplZCB9IGZyb20gJy4vbG9jYWxlLmpzJztcbmltcG9ydCB7IHUgYXMgdXBkYXRlTWVzc2FnZXMsIHMgYXMgc2V0VXBNZXNzYWdlcywgYyBhcyBjb25uZWN0TWVzc2FnZXMsIGQgYXMgZGlzY29ubmVjdE1lc3NhZ2VzIH0gZnJvbSAnLi90OW4uanMnO1xuaW1wb3J0IHsgZCBhcyBkZWZpbmVDdXN0b21FbGVtZW50JDMgfSBmcm9tICcuL2ljb24uanMnO1xuaW1wb3J0IHsgZCBhcyBkZWZpbmVDdXN0b21FbGVtZW50JDIgfSBmcm9tICcuL2lucHV0LmpzJztcbmltcG9ydCB7IGQgYXMgZGVmaW5lQ3VzdG9tRWxlbWVudCQxIH0gZnJvbSAnLi9wcm9ncmVzcy5qcyc7XG5pbXBvcnQgeyBkIGFzIGRlYm91bmNlIH0gZnJvbSAnLi9kZWJvdW5jZS5qcyc7XG5cbmNvbnN0IENTUyA9IHtcbiAgY29udGFpbmVyOiBcImNvbnRhaW5lclwiLFxuICBzZWFyY2hJY29uOiBcInNlYXJjaC1pY29uXCIsXG59O1xuY29uc3QgSUNPTlMgPSB7XG4gIHNlYXJjaDogXCJzZWFyY2hcIixcbiAgY2xvc2U6IFwieFwiLFxufTtcbmNvbnN0IERFQk9VTkNFX1RJTUVPVVQgPSAyNTA7XG5cbmNvbnN0IGZpbHRlckNzcyA9IFwiOmhvc3R7Ym94LXNpemluZzpib3JkZXItYm94O2JhY2tncm91bmQtY29sb3I6dmFyKC0tY2FsY2l0ZS11aS1mb3JlZ3JvdW5kLTEpO2NvbG9yOnZhcigtLWNhbGNpdGUtdWktdGV4dC0yKTtmb250LXNpemU6dmFyKC0tY2FsY2l0ZS1mb250LXNpemUtLTEpfTpob3N0ICp7Ym94LXNpemluZzpib3JkZXItYm94fTpob3N0KFtkaXNhYmxlZF0pe2N1cnNvcjpkZWZhdWx0Oy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lO29wYWNpdHk6dmFyKC0tY2FsY2l0ZS11aS1vcGFjaXR5LWRpc2FibGVkKX06aG9zdChbZGlzYWJsZWRdKSAqLDpob3N0KFtkaXNhYmxlZF0pIDo6c2xvdHRlZCgqKXtwb2ludGVyLWV2ZW50czpub25lfTpob3N0e2Rpc3BsYXk6ZmxleDtpbmxpbmUtc2l6ZToxMDAlfTpob3N0KFtkaXNhYmxlZF0pIDo6c2xvdHRlZChbY2FsY2l0ZS1oeWRyYXRlZF1bZGlzYWJsZWRdKSw6aG9zdChbZGlzYWJsZWRdKSBbY2FsY2l0ZS1oeWRyYXRlZF1bZGlzYWJsZWRde29wYWNpdHk6MX0uY29udGFpbmVye2Rpc3BsYXk6ZmxleDtpbmxpbmUtc2l6ZToxMDAlO3BhZGRpbmc6MC41cmVtfWxhYmVse3Bvc2l0aW9uOnJlbGF0aXZlO21hcmdpbi1pbmxpbmU6MC4yNXJlbTttYXJnaW4tYmxvY2s6MHB4O2Rpc3BsYXk6ZmxleDtpbmxpbmUtc2l6ZToxMDAlO2FsaWduLWl0ZW1zOmNlbnRlcjtvdmVyZmxvdzpoaWRkZW59aW5wdXRbdHlwZT10ZXh0XXttYXJnaW4tYmxvY2stZW5kOjAuMjVyZW07aW5saW5lLXNpemU6MTAwJTtib3JkZXItc3R5bGU6bm9uZTtiYWNrZ3JvdW5kLWNvbG9yOnRyYW5zcGFyZW50O3BhZGRpbmctYmxvY2s6MC4yNXJlbTtmb250LWZhbWlseTppbmhlcml0O2ZvbnQtc2l6ZTp2YXIoLS1jYWxjaXRlLWZvbnQtc2l6ZS0tMik7bGluZS1oZWlnaHQ6MXJlbTtjb2xvcjp2YXIoLS1jYWxjaXRlLXVpLXRleHQtMSk7cGFkZGluZy1pbmxpbmUtZW5kOjAuMjVyZW07cGFkZGluZy1pbmxpbmUtc3RhcnQ6MS41cmVtO3RyYW5zaXRpb246cGFkZGluZyB2YXIoLS1jYWxjaXRlLWFuaW1hdGlvbi10aW1pbmcpLCBib3gtc2hhZG93IHZhcigtLWNhbGNpdGUtYW5pbWF0aW9uLXRpbWluZyl9aW5wdXRbdHlwZT10ZXh0XTo6LW1zLWNsZWFye2Rpc3BsYXk6bm9uZX1jYWxjaXRlLWlucHV0e2lubGluZS1zaXplOjEwMCV9LnNlYXJjaC1pY29ue3Bvc2l0aW9uOmFic29sdXRlO2Rpc3BsYXk6ZmxleDtjb2xvcjp2YXIoLS1jYWxjaXRlLXVpLXRleHQtMik7aW5zZXQtaW5saW5lLXN0YXJ0OjA7dHJhbnNpdGlvbjppbnNldC1pbmxpbmUtc3RhcnQgdmFyKC0tY2FsY2l0ZS1hbmltYXRpb24tdGltaW5nKSwgaW5zZXQtaW5saW5lLWVuZCB2YXIoLS1jYWxjaXRlLWFuaW1hdGlvbi10aW1pbmcpLCBvcGFjaXR5IHZhcigtLWNhbGNpdGUtYW5pbWF0aW9uLXRpbWluZyl9aW5wdXRbdHlwZT10ZXh0XTpmb2N1c3tib3JkZXItY29sb3I6dmFyKC0tY2FsY2l0ZS11aS1icmFuZCk7b3V0bGluZToycHggc29saWQgdHJhbnNwYXJlbnQ7b3V0bGluZS1vZmZzZXQ6MnB4O3BhZGRpbmctaW5saW5lOjAuMjVyZW19aW5wdXRbdHlwZT10ZXh0XTpmb2N1c34uc2VhcmNoLWljb257aW5zZXQtaW5saW5lLXN0YXJ0OmNhbGMoMXJlbSAqIC0xKTtvcGFjaXR5OjB9LmNsZWFyLWJ1dHRvbntkaXNwbGF5OmZsZXg7Y3Vyc29yOnBvaW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyO2JvcmRlci13aWR0aDowcHg7YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudDtjb2xvcjp2YXIoLS1jYWxjaXRlLXVpLXRleHQtMil9LmNsZWFyLWJ1dHRvbjpob3ZlciwuY2xlYXItYnV0dG9uOmZvY3Vze2NvbG9yOnZhcigtLWNhbGNpdGUtdWktdGV4dC0xKX06aG9zdChbaGlkZGVuXSl7ZGlzcGxheTpub25lfVtoaWRkZW5de2Rpc3BsYXk6bm9uZX1cIjtcblxuY29uc3QgRmlsdGVyID0gLypAX19QVVJFX18qLyBwcm94eUN1c3RvbUVsZW1lbnQoY2xhc3MgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5fX3JlZ2lzdGVySG9zdCgpO1xuICAgIHRoaXMuX19hdHRhY2hTaGFkb3coKTtcbiAgICB0aGlzLmNhbGNpdGVGaWx0ZXJDaGFuZ2UgPSBjcmVhdGVFdmVudCh0aGlzLCBcImNhbGNpdGVGaWx0ZXJDaGFuZ2VcIiwgNik7XG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvL1xuICAgIC8vICBQcml2YXRlIE1ldGhvZHNcbiAgICAvL1xuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgdGhpcy5maWx0ZXJEZWJvdW5jZWQgPSBkZWJvdW5jZSgodmFsdWUsIGVtaXQgPSBmYWxzZSwgb25GaWx0ZXIpID0+IHRoaXMudXBkYXRlRmlsdGVyZWQoZmlsdGVyKHRoaXMuaXRlbXMsIHZhbHVlKSwgZW1pdCwgb25GaWx0ZXIpLCBERUJPVU5DRV9USU1FT1VUKTtcbiAgICB0aGlzLmlucHV0SGFuZGxlciA9IChldmVudCkgPT4ge1xuICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xuICAgICAgdGhpcy52YWx1ZSA9IHRhcmdldC52YWx1ZTtcbiAgICAgIHRoaXMuZmlsdGVyRGVib3VuY2VkKHRhcmdldC52YWx1ZSwgdHJ1ZSk7XG4gICAgfTtcbiAgICB0aGlzLmtleURvd25IYW5kbGVyID0gKGV2ZW50KSA9PiB7XG4gICAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICAgIHRoaXMuY2xlYXIoKTtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH1cbiAgICAgIGlmIChldmVudC5rZXkgPT09IFwiRW50ZXJcIikge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5jbGVhciA9ICgpID0+IHtcbiAgICAgIHRoaXMudmFsdWUgPSBcIlwiO1xuICAgICAgdGhpcy5maWx0ZXJEZWJvdW5jZWQoXCJcIiwgdHJ1ZSk7XG4gICAgICB0aGlzLnNldEZvY3VzKCk7XG4gICAgfTtcbiAgICB0aGlzLml0ZW1zID0gW107XG4gICAgdGhpcy5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIHRoaXMuZmlsdGVyZWRJdGVtcyA9IFtdO1xuICAgIHRoaXMucGxhY2Vob2xkZXIgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5zY2FsZSA9IFwibVwiO1xuICAgIHRoaXMudmFsdWUgPSBcIlwiO1xuICAgIHRoaXMubWVzc2FnZXMgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5tZXNzYWdlT3ZlcnJpZGVzID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuZWZmZWN0aXZlTG9jYWxlID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuZGVmYXVsdE1lc3NhZ2VzID0gdW5kZWZpbmVkO1xuICB9XG4gIHdhdGNoSXRlbXNIYW5kbGVyKCkge1xuICAgIHRoaXMuZmlsdGVyRGVib3VuY2VkKHRoaXMudmFsdWUpO1xuICB9XG4gIG9uTWVzc2FnZXNDaGFuZ2UoKSB7XG4gICAgLyogd2lyZWQgdXAgYnkgdDluIHV0aWwgKi9cbiAgfVxuICB2YWx1ZUhhbmRsZXIodmFsdWUpIHtcbiAgICB0aGlzLmZpbHRlckRlYm91bmNlZCh2YWx1ZSk7XG4gIH1cbiAgZWZmZWN0aXZlTG9jYWxlQ2hhbmdlKCkge1xuICAgIHVwZGF0ZU1lc3NhZ2VzKHRoaXMsIHRoaXMuZWZmZWN0aXZlTG9jYWxlKTtcbiAgfVxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vXG4gIC8vICBMaWZlY3ljbGVcbiAgLy9cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBhc3luYyBjb21wb25lbnRXaWxsTG9hZCgpIHtcbiAgICBzZXRVcExvYWRhYmxlQ29tcG9uZW50KHRoaXMpO1xuICAgIHRoaXMudXBkYXRlRmlsdGVyZWQoZmlsdGVyKHRoaXMuaXRlbXMsIHRoaXMudmFsdWUpKTtcbiAgICBhd2FpdCBzZXRVcE1lc3NhZ2VzKHRoaXMpO1xuICB9XG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIGNvbm5lY3RJbnRlcmFjdGl2ZSh0aGlzKTtcbiAgICBjb25uZWN0TG9jYWxpemVkKHRoaXMpO1xuICAgIGNvbm5lY3RNZXNzYWdlcyh0aGlzKTtcbiAgfVxuICBjb21wb25lbnREaWRSZW5kZXIoKSB7XG4gICAgdXBkYXRlSG9zdEludGVyYWN0aW9uKHRoaXMpO1xuICB9XG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIGRpc2Nvbm5lY3RJbnRlcmFjdGl2ZSh0aGlzKTtcbiAgICBkaXNjb25uZWN0TG9jYWxpemVkKHRoaXMpO1xuICAgIGRpc2Nvbm5lY3RNZXNzYWdlcyh0aGlzKTtcbiAgICB0aGlzLmZpbHRlckRlYm91bmNlZC5jYW5jZWwoKTtcbiAgfVxuICBjb21wb25lbnREaWRMb2FkKCkge1xuICAgIHNldENvbXBvbmVudExvYWRlZCh0aGlzKTtcbiAgfVxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvL1xuICAvLyAgUHVibGljIE1ldGhvZHNcbiAgLy9cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLyoqXG4gICAqIFBlcmZvcm1zIGEgZmlsdGVyIG9uIHRoZSBjb21wb25lbnQuXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIGNhbiBiZSB1c2VmdWwgYmVjYXVzZSBmaWx0ZXJpbmcgaXMgZGVsYXllZCBhbmQgYXN5bmNocm9ub3VzLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgLSBUaGUgZmlsdGVyIHRleHQgdmFsdWUuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPHZvaWQ+fVxuICAgKi9cbiAgYXN5bmMgZmlsdGVyKHZhbHVlID0gdGhpcy52YWx1ZSkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgdGhpcy5maWx0ZXJEZWJvdW5jZWQodmFsdWUsIGZhbHNlLCByZXNvbHZlKTtcbiAgICB9KTtcbiAgfVxuICAvKiogU2V0cyBmb2N1cyBvbiB0aGUgY29tcG9uZW50LiAqL1xuICBhc3luYyBzZXRGb2N1cygpIHtcbiAgICBhd2FpdCBjb21wb25lbnRGb2N1c2FibGUodGhpcyk7XG4gICAgdGhpcy5lbD8uZm9jdXMoKTtcbiAgfVxuICB1cGRhdGVGaWx0ZXJlZChmaWx0ZXJlZCwgZW1pdCA9IGZhbHNlLCBjYWxsYmFjaykge1xuICAgIHRoaXMuZmlsdGVyZWRJdGVtcyA9IGZpbHRlcmVkO1xuICAgIGlmIChlbWl0KSB7XG4gICAgICB0aGlzLmNhbGNpdGVGaWx0ZXJDaGFuZ2UuZW1pdCgpO1xuICAgIH1cbiAgICBjYWxsYmFjaz8uKCk7XG4gIH1cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy9cbiAgLy8gIFJlbmRlciBNZXRob2RzXG4gIC8vXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IGRpc2FibGVkLCBzY2FsZSB9ID0gdGhpcztcbiAgICByZXR1cm4gKGgoRnJhZ21lbnQsIG51bGwsIGgoXCJkaXZcIiwgeyBjbGFzczogQ1NTLmNvbnRhaW5lciB9LCBoKFwibGFiZWxcIiwgbnVsbCwgaChcImNhbGNpdGUtaW5wdXRcIiwgeyBcImFyaWEtbGFiZWxcIjogdGhpcy5tZXNzYWdlcy5sYWJlbCwgY2xlYXJhYmxlOiB0cnVlLCBkaXNhYmxlZDogZGlzYWJsZWQsIGljb246IElDT05TLnNlYXJjaCwgbWVzc2FnZU92ZXJyaWRlczogeyBjbGVhcjogdGhpcy5tZXNzYWdlcy5jbGVhciB9LCBvbkNhbGNpdGVJbnB1dElucHV0OiB0aGlzLmlucHV0SGFuZGxlciwgb25LZXlEb3duOiB0aGlzLmtleURvd25IYW5kbGVyLCBwbGFjZWhvbGRlcjogdGhpcy5wbGFjZWhvbGRlciwgc2NhbGU6IHNjYWxlLCB0eXBlOiBcInRleHRcIiwgdmFsdWU6IHRoaXMudmFsdWUsXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QvanN4LXNvcnQtcHJvcHMgLS0gcmVmIHNob3VsZCBiZSBsYXN0IHNvIG5vZGUgYXR0cnMvcHJvcHMgYXJlIGluIHN5bmMgKHNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWRlc2lnbi1zeXN0ZW0vcHVsbC82NTMwKVxuICAgICAgcmVmOiAoZWwpID0+IHtcbiAgICAgICAgdGhpcy50ZXh0SW5wdXQgPSBlbDtcbiAgICAgIH0gfSkpKSkpO1xuICB9XG4gIHN0YXRpYyBnZXQgZGVsZWdhdGVzRm9jdXMoKSB7IHJldHVybiB0cnVlOyB9XG4gIHN0YXRpYyBnZXQgYXNzZXRzRGlycygpIHsgcmV0dXJuIFtcImFzc2V0c1wiXTsgfVxuICBnZXQgZWwoKSB7IHJldHVybiB0aGlzOyB9XG4gIHN0YXRpYyBnZXQgd2F0Y2hlcnMoKSB7IHJldHVybiB7XG4gICAgXCJpdGVtc1wiOiBbXCJ3YXRjaEl0ZW1zSGFuZGxlclwiXSxcbiAgICBcIm1lc3NhZ2VPdmVycmlkZXNcIjogW1wib25NZXNzYWdlc0NoYW5nZVwiXSxcbiAgICBcInZhbHVlXCI6IFtcInZhbHVlSGFuZGxlclwiXSxcbiAgICBcImVmZmVjdGl2ZUxvY2FsZVwiOiBbXCJlZmZlY3RpdmVMb2NhbGVDaGFuZ2VcIl1cbiAgfTsgfVxuICBzdGF0aWMgZ2V0IHN0eWxlKCkgeyByZXR1cm4gZmlsdGVyQ3NzOyB9XG59LCBbMTcsIFwiY2FsY2l0ZS1maWx0ZXJcIiwge1xuICAgIFwiaXRlbXNcIjogWzE2XSxcbiAgICBcImRpc2FibGVkXCI6IFs1MTZdLFxuICAgIFwiZmlsdGVyZWRJdGVtc1wiOiBbMTA0MF0sXG4gICAgXCJwbGFjZWhvbGRlclwiOiBbMV0sXG4gICAgXCJzY2FsZVwiOiBbNTEzXSxcbiAgICBcInZhbHVlXCI6IFsxMDI1XSxcbiAgICBcIm1lc3NhZ2VzXCI6IFsxMDQwXSxcbiAgICBcIm1lc3NhZ2VPdmVycmlkZXNcIjogWzEwNDBdLFxuICAgIFwiZWZmZWN0aXZlTG9jYWxlXCI6IFszMl0sXG4gICAgXCJkZWZhdWx0TWVzc2FnZXNcIjogWzMyXSxcbiAgICBcImZpbHRlclwiOiBbNjRdLFxuICAgIFwic2V0Rm9jdXNcIjogWzY0XVxuICB9XSk7XG5mdW5jdGlvbiBkZWZpbmVDdXN0b21FbGVtZW50KCkge1xuICBpZiAodHlwZW9mIGN1c3RvbUVsZW1lbnRzID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IGNvbXBvbmVudHMgPSBbXCJjYWxjaXRlLWZpbHRlclwiLCBcImNhbGNpdGUtaWNvblwiLCBcImNhbGNpdGUtaW5wdXRcIiwgXCJjYWxjaXRlLXByb2dyZXNzXCJdO1xuICBjb21wb25lbnRzLmZvckVhY2godGFnTmFtZSA9PiB7IHN3aXRjaCAodGFnTmFtZSkge1xuICAgIGNhc2UgXCJjYWxjaXRlLWZpbHRlclwiOlxuICAgICAgaWYgKCFjdXN0b21FbGVtZW50cy5nZXQodGFnTmFtZSkpIHtcbiAgICAgICAgY3VzdG9tRWxlbWVudHMuZGVmaW5lKHRhZ05hbWUsIEZpbHRlcik7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwiY2FsY2l0ZS1pY29uXCI6XG4gICAgICBpZiAoIWN1c3RvbUVsZW1lbnRzLmdldCh0YWdOYW1lKSkge1xuICAgICAgICBkZWZpbmVDdXN0b21FbGVtZW50JDMoKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJjYWxjaXRlLWlucHV0XCI6XG4gICAgICBpZiAoIWN1c3RvbUVsZW1lbnRzLmdldCh0YWdOYW1lKSkge1xuICAgICAgICBkZWZpbmVDdXN0b21FbGVtZW50JDIoKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJjYWxjaXRlLXByb2dyZXNzXCI6XG4gICAgICBpZiAoIWN1c3RvbUVsZW1lbnRzLmdldCh0YWdOYW1lKSkge1xuICAgICAgICBkZWZpbmVDdXN0b21FbGVtZW50JDEoKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICB9IH0pO1xufVxuZGVmaW5lQ3VzdG9tRWxlbWVudCgpO1xuXG5leHBvcnQgeyBGaWx0ZXIgYXMgRiwgZGVmaW5lQ3VzdG9tRWxlbWVudCBhcyBkIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=