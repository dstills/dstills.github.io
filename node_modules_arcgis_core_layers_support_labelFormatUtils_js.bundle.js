"use strict";
(self["webpackChunksynview"] = self["webpackChunksynview"] || []).push([["node_modules_arcgis_core_layers_support_labelFormatUtils_js"],{

/***/ "./node_modules/@arcgis/core/layers/support/labelFormatUtils.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/support/labelFormatUtils.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createLabelFunction: () => (/* binding */ w),
/* harmony export */   formatField: () => (/* binding */ g)
/* harmony export */ });
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_sql_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/sql.js */ "./node_modules/@arcgis/core/core/sql.js");
/* harmony import */ var _intl_date_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../intl/date.js */ "./node_modules/@arcgis/core/intl/date.js");
/* harmony import */ var _intl_number_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../intl/number.js */ "./node_modules/@arcgis/core/intl/number.js");
/* harmony import */ var _domainUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./domainUtils.js */ "./node_modules/@arcgis/core/layers/support/domainUtils.js");
/* harmony import */ var _fieldUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./fieldUtils.js */ "./node_modules/@arcgis/core/layers/support/fieldUtils.js");
/* harmony import */ var _labelUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./labelUtils.js */ "./node_modules/@arcgis/core/layers/support/labelUtils.js");
/* harmony import */ var _support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../support/arcadeOnDemand.js */ "./node_modules/@arcgis/core/support/arcadeOnDemand.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const m=_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__["default"].getLogger("esri.layers.support.labelFormatUtils"),p={type:"simple",evaluate:()=>null},d={getAttribute:(e,r)=>e.field(r)};async function w(r,n,o){if(!r||!r.symbol||!n)return p;const a=r.where,l=(0,_labelUtils_js__WEBPACK_IMPORTED_MODULE_7__.getLabelExpression)(r);let i;if("arcade"===l.type){const r=await (0,_support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_8__.createLabelExpression)(l.expression,o,n);if(null==r)return p;i={type:"arcade",evaluate(t,n){try{const e="attributes"in t?r.repurposeFeature(t):t;e.contextTimeZone=n??null;const o=r.evaluate({$view:{timeZone:n},$feature:e},r.services);if(null!=o)return o.toString()}catch(o){m.error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"]("arcade-expression-error","Encountered an error when evaluating label expression for feature",{error:o,feature:t,expression:l}))}return null},needsHydrationToEvaluate:()=>null==(0,_labelUtils_js__WEBPACK_IMPORTED_MODULE_7__.getSingleFieldArcadeExpression)(l.expression)}}else i={type:"simple",evaluate:e=>l.expression.replaceAll(/{[^}]*}/g,(r=>{const t=r.slice(1,-1),o=n.get(t);if(!o)return r;let a=null;if("attributes"in e){e&&e.attributes&&(a=e.attributes[o.name])}else a=e.field(o.name);return null==a?"":g(a,o)}))};if(a){let r;try{r=await (0,_core_sql_js__WEBPACK_IMPORTED_MODULE_2__.parseWhereClause)(a,n)}catch(s){return m.error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"]("bad-where-clause","Encountered an error when evaluating where clause, ignoring",{where:a,error:s})),p}const o=i.evaluate;i.evaluate=(t,n)=>{const l="attributes"in t?void 0:d;try{if(r.testFeature(t,l))return o(t,n)}catch(s){m.error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"]("bad-where-clause","Encountered an error when evaluating where clause for feature",{where:a,feature:t,error:s}))}return null}}return i}function g(e,r){if(null==e)return"";const t=r.domain;if(t)if("codedValue"===t.type||"coded-value"===t.type){const r=e;for(const e of t.codedValues)if(e.code===r)return e.name}else if("range"===t.type){const{max:n,min:o}=(0,_domainUtils_js__WEBPACK_IMPORTED_MODULE_5__.getDomainRange)(r),a=+e;if(null!=o&&null!=n&&o<=a&&a<=n)return t.name}let u=e;return (0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_6__.isDateField)(r)?u=(0,_intl_date_js__WEBPACK_IMPORTED_MODULE_3__.formatDate)(u,(0,_intl_date_js__WEBPACK_IMPORTED_MODULE_3__.convertDateFormatToIntlOptions)("short-date")):(0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_6__.isNumericField)(r)&&(u=(0,_intl_number_js__WEBPACK_IMPORTED_MODULE_4__.formatNumber)(+u)),u||""}


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX2FyY2dpc19jb3JlX2xheWVyc19zdXBwb3J0X2xhYmVsRm9ybWF0VXRpbHNfanMuYnVuZGxlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDeWhCLFFBQVEsdURBQUMsc0RBQXNELGdDQUFnQyxJQUFJLGdDQUFnQyx3QkFBd0IsOEJBQThCLGtCQUFrQixrRUFBQyxJQUFJLE1BQU0sc0JBQXNCLGNBQWMsaUZBQUMsbUJBQW1CLG9CQUFvQixHQUFHLDRCQUE0QixJQUFJLGlEQUFpRCwwQkFBMEIsb0JBQW9CLE9BQU8sV0FBVyxZQUFZLGFBQWEsK0JBQStCLFNBQVMsWUFBWSxzREFBQyxnR0FBZ0csK0JBQStCLEdBQUcsWUFBWSxvQ0FBb0MsOEVBQUMsZ0JBQWdCLFFBQVEsb0RBQW9ELEdBQUcsR0FBRyxRQUFRLGlDQUFpQyxlQUFlLFdBQVcscUJBQXFCLDBDQUEwQyx1QkFBdUIseUJBQXlCLElBQUksTUFBTSxNQUFNLElBQUksUUFBUSw4REFBQyxNQUFNLFNBQVMsbUJBQW1CLHNEQUFDLG1GQUFtRixnQkFBZ0IsS0FBSyxtQkFBbUIsbUJBQW1CLGtDQUFrQyxJQUFJLG9DQUFvQyxTQUFTLFlBQVksc0RBQUMscUZBQXFGLDBCQUEwQixHQUFHLGFBQWEsU0FBUyxnQkFBZ0Isb0JBQW9CLGlCQUFpQix1REFBdUQsVUFBVSx5REFBeUQsMEJBQTBCLE1BQU0sWUFBWSxDQUFDLCtEQUFDLFNBQVMsOENBQThDLFFBQVEsT0FBTywyREFBQyxNQUFNLHlEQUFDLEdBQUcsNkVBQUMsZ0JBQWdCLDhEQUFDLFFBQVEsNkRBQUMsWUFBOEQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zeW52aWV3Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9sYXllcnMvc3VwcG9ydC9sYWJlbEZvcm1hdFV0aWxzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnQgZSBmcm9tXCIuLi8uLi9jb3JlL0Vycm9yLmpzXCI7aW1wb3J0IHIgZnJvbVwiLi4vLi4vY29yZS9Mb2dnZXIuanNcIjtpbXBvcnR7cGFyc2VXaGVyZUNsYXVzZSBhcyB0fWZyb21cIi4uLy4uL2NvcmUvc3FsLmpzXCI7aW1wb3J0e2Zvcm1hdERhdGUgYXMgbixjb252ZXJ0RGF0ZUZvcm1hdFRvSW50bE9wdGlvbnMgYXMgb31mcm9tXCIuLi8uLi9pbnRsL2RhdGUuanNcIjtpbXBvcnR7Zm9ybWF0TnVtYmVyIGFzIGF9ZnJvbVwiLi4vLi4vaW50bC9udW1iZXIuanNcIjtpbXBvcnR7Z2V0RG9tYWluUmFuZ2UgYXMgbH1mcm9tXCIuL2RvbWFpblV0aWxzLmpzXCI7aW1wb3J0e2lzRGF0ZUZpZWxkIGFzIGksaXNOdW1lcmljRmllbGQgYXMgc31mcm9tXCIuL2ZpZWxkVXRpbHMuanNcIjtpbXBvcnR7Z2V0TGFiZWxFeHByZXNzaW9uIGFzIHUsZ2V0U2luZ2xlRmllbGRBcmNhZGVFeHByZXNzaW9uIGFzIGN9ZnJvbVwiLi9sYWJlbFV0aWxzLmpzXCI7aW1wb3J0e2NyZWF0ZUxhYmVsRXhwcmVzc2lvbiBhcyBmfWZyb21cIi4uLy4uL3N1cHBvcnQvYXJjYWRlT25EZW1hbmQuanNcIjtjb25zdCBtPXIuZ2V0TG9nZ2VyKFwiZXNyaS5sYXllcnMuc3VwcG9ydC5sYWJlbEZvcm1hdFV0aWxzXCIpLHA9e3R5cGU6XCJzaW1wbGVcIixldmFsdWF0ZTooKT0+bnVsbH0sZD17Z2V0QXR0cmlidXRlOihlLHIpPT5lLmZpZWxkKHIpfTthc3luYyBmdW5jdGlvbiB3KHIsbixvKXtpZighcnx8IXIuc3ltYm9sfHwhbilyZXR1cm4gcDtjb25zdCBhPXIud2hlcmUsbD11KHIpO2xldCBpO2lmKFwiYXJjYWRlXCI9PT1sLnR5cGUpe2NvbnN0IHI9YXdhaXQgZihsLmV4cHJlc3Npb24sbyxuKTtpZihudWxsPT1yKXJldHVybiBwO2k9e3R5cGU6XCJhcmNhZGVcIixldmFsdWF0ZSh0LG4pe3RyeXtjb25zdCBlPVwiYXR0cmlidXRlc1wiaW4gdD9yLnJlcHVycG9zZUZlYXR1cmUodCk6dDtlLmNvbnRleHRUaW1lWm9uZT1uPz9udWxsO2NvbnN0IG89ci5ldmFsdWF0ZSh7JHZpZXc6e3RpbWVab25lOm59LCRmZWF0dXJlOmV9LHIuc2VydmljZXMpO2lmKG51bGwhPW8pcmV0dXJuIG8udG9TdHJpbmcoKX1jYXRjaChvKXttLmVycm9yKG5ldyBlKFwiYXJjYWRlLWV4cHJlc3Npb24tZXJyb3JcIixcIkVuY291bnRlcmVkIGFuIGVycm9yIHdoZW4gZXZhbHVhdGluZyBsYWJlbCBleHByZXNzaW9uIGZvciBmZWF0dXJlXCIse2Vycm9yOm8sZmVhdHVyZTp0LGV4cHJlc3Npb246bH0pKX1yZXR1cm4gbnVsbH0sbmVlZHNIeWRyYXRpb25Ub0V2YWx1YXRlOigpPT5udWxsPT1jKGwuZXhwcmVzc2lvbil9fWVsc2UgaT17dHlwZTpcInNpbXBsZVwiLGV2YWx1YXRlOmU9PmwuZXhwcmVzc2lvbi5yZXBsYWNlQWxsKC97W159XSp9L2csKHI9Pntjb25zdCB0PXIuc2xpY2UoMSwtMSksbz1uLmdldCh0KTtpZighbylyZXR1cm4gcjtsZXQgYT1udWxsO2lmKFwiYXR0cmlidXRlc1wiaW4gZSl7ZSYmZS5hdHRyaWJ1dGVzJiYoYT1lLmF0dHJpYnV0ZXNbby5uYW1lXSl9ZWxzZSBhPWUuZmllbGQoby5uYW1lKTtyZXR1cm4gbnVsbD09YT9cIlwiOmcoYSxvKX0pKX07aWYoYSl7bGV0IHI7dHJ5e3I9YXdhaXQgdChhLG4pfWNhdGNoKHMpe3JldHVybiBtLmVycm9yKG5ldyBlKFwiYmFkLXdoZXJlLWNsYXVzZVwiLFwiRW5jb3VudGVyZWQgYW4gZXJyb3Igd2hlbiBldmFsdWF0aW5nIHdoZXJlIGNsYXVzZSwgaWdub3JpbmdcIix7d2hlcmU6YSxlcnJvcjpzfSkpLHB9Y29uc3Qgbz1pLmV2YWx1YXRlO2kuZXZhbHVhdGU9KHQsbik9Pntjb25zdCBsPVwiYXR0cmlidXRlc1wiaW4gdD92b2lkIDA6ZDt0cnl7aWYoci50ZXN0RmVhdHVyZSh0LGwpKXJldHVybiBvKHQsbil9Y2F0Y2gocyl7bS5lcnJvcihuZXcgZShcImJhZC13aGVyZS1jbGF1c2VcIixcIkVuY291bnRlcmVkIGFuIGVycm9yIHdoZW4gZXZhbHVhdGluZyB3aGVyZSBjbGF1c2UgZm9yIGZlYXR1cmVcIix7d2hlcmU6YSxmZWF0dXJlOnQsZXJyb3I6c30pKX1yZXR1cm4gbnVsbH19cmV0dXJuIGl9ZnVuY3Rpb24gZyhlLHIpe2lmKG51bGw9PWUpcmV0dXJuXCJcIjtjb25zdCB0PXIuZG9tYWluO2lmKHQpaWYoXCJjb2RlZFZhbHVlXCI9PT10LnR5cGV8fFwiY29kZWQtdmFsdWVcIj09PXQudHlwZSl7Y29uc3Qgcj1lO2Zvcihjb25zdCBlIG9mIHQuY29kZWRWYWx1ZXMpaWYoZS5jb2RlPT09cilyZXR1cm4gZS5uYW1lfWVsc2UgaWYoXCJyYW5nZVwiPT09dC50eXBlKXtjb25zdHttYXg6bixtaW46b309bChyKSxhPStlO2lmKG51bGwhPW8mJm51bGwhPW4mJm88PWEmJmE8PW4pcmV0dXJuIHQubmFtZX1sZXQgdT1lO3JldHVybiBpKHIpP3U9bih1LG8oXCJzaG9ydC1kYXRlXCIpKTpzKHIpJiYodT1hKCt1KSksdXx8XCJcIn1leHBvcnR7dyBhcyBjcmVhdGVMYWJlbEZ1bmN0aW9uLGcgYXMgZm9ybWF0RmllbGR9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9