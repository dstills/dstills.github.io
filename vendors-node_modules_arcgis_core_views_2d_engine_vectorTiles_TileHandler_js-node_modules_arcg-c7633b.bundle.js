"use strict";
(self["webpackChunksynview"] = self["webpackChunksynview"] || []).push([["vendors-node_modules_arcgis_core_views_2d_engine_vectorTiles_TileHandler_js-node_modules_arcg-c7633b"],{

/***/ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/GlyphMosaic.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/GlyphMosaic.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ n)
/* harmony export */ });
/* harmony import */ var _RectangleBinPack_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./RectangleBinPack.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/RectangleBinPack.js");
/* harmony import */ var _webgl_Rect_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../webgl/Rect.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/Rect.js");
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../webgl/enums.js */ "./node_modules/@arcgis/core/views/webgl/enums.js");
/* harmony import */ var _webgl_Texture_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../webgl/Texture.js */ "./node_modules/@arcgis/core/views/webgl/Texture.js");
/* harmony import */ var _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../webgl/TextureDescriptor.js */ "./node_modules/@arcgis/core/views/webgl/TextureDescriptor.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class n{constructor(e,s,i){this.width=0,this.height=0,this._dirties=[],this._glyphData=[],this._currentPage=0,this._glyphIndex={},this._textures=[],this._rangePromises=new Map,this.width=e,this.height=s,this._glyphSource=i,this._binPack=new _RectangleBinPack_js__WEBPACK_IMPORTED_MODULE_0__["default"](e-4,s-4),this._glyphData.push(new Uint8Array(e*s)),this._dirties.push(!0),this._textures.push(void 0)}getGlyphItems(s,i){const h=[],r=this._glyphSource,n=new Set,o=1/256;for(const t of i){const e=Math.floor(t*o);n.add(e)}const a=[];return n.forEach((t=>{const e=s+t;if(this._rangePromises.has(e))a.push(this._rangePromises.get(e));else{const i=r.getRange(s,t).then((()=>{this._rangePromises.delete(e)}),(()=>{this._rangePromises.delete(e)}));this._rangePromises.set(e,i),a.push(i)}})),Promise.all(a).then((()=>{let n=this._glyphIndex[s];n||(n={},this._glyphIndex[s]=n);for(const o of i){const i=n[o];if(i){h[o]={sdf:!0,rect:i.rect,metrics:i.metrics,page:i.page,code:o};continue}const a=r.getGlyph(s,o);if(!a?.metrics)continue;const l=a.metrics;let c;if(0===l.width)c=new _webgl_Rect_js__WEBPACK_IMPORTED_MODULE_1__["default"](0,0,0,0);else{const e=3,s=l.width+2*e,i=l.height+2*e;let h=s%4?4-s%4:4,r=i%4?4-i%4:4;1===h&&(h=5),1===r&&(r=5),c=this._binPack.allocate(s+h,i+r),c.isEmpty&&(this._dirties[this._currentPage]||(this._glyphData[this._currentPage]=null),this._currentPage=this._glyphData.length,this._glyphData.push(new Uint8Array(this.width*this.height)),this._dirties.push(!0),this._textures.push(void 0),this._binPack=new _RectangleBinPack_js__WEBPACK_IMPORTED_MODULE_0__["default"](this.width-4,this.height-4),c=this._binPack.allocate(s+h,i+r));const n=this._glyphData[this._currentPage],o=a.bitmap;let g,_;if(o)for(let t=0;t<i;t++){g=s*t,_=this.width*(c.y+t+1)+c.x;for(let t=0;t<s;t++)n[_+t+1]=o.at(g+t)}}n[o]={rect:c,metrics:l,tileIDs:null,page:this._currentPage},h[o]={sdf:!0,rect:c,metrics:l,page:this._currentPage,code:o},this._dirties[this._currentPage]=!0}return h}))}removeGlyphs(t){for(const e in this._glyphIndex){const s=this._glyphIndex[e];if(!s)continue;let i;for(const e in s)if(i=s[e],i.tileIDs.delete(t),0===i.tileIDs.size){const t=this._glyphData[i.page],h=i.rect;let r,n;for(let e=0;e<h.height;e++)for(r=this.width*(h.y+e)+h.x,n=0;n<h.width;n++)t[r+n]=0;delete s[e],this._dirties[i.page]=!0}}}bind(t,e,n,o=0){if(!this._textures[n]){const e=new _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_4__.TextureDescriptor;e.pixelFormat=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__.PixelFormat.ALPHA,e.wrapMode=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureWrapMode.CLAMP_TO_EDGE,e.width=this.width,e.height=this.height,this._textures[n]=new _webgl_Texture_js__WEBPACK_IMPORTED_MODULE_3__.Texture(t,e,new Uint8Array(this.width*this.height))}const a=this._textures[n];a.setSamplingMode(e),this._dirties[n]&&a.setData(this._glyphData[n]),t.bindTexture(a,o),this._dirties[n]=!1}destroy(){this.dispose()}dispose(){this._glyphData.length=0,this._binPack=null;for(const t of this._textures)t&&t.dispose();this._textures.length=0}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/GlyphSource.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/GlyphSource.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../request.js */ "./node_modules/@arcgis/core/request.js");
/* harmony import */ var _core_pbf_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/pbf.js */ "./node_modules/@arcgis/core/core/pbf.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class s{constructor(t){if(this._metrics=[],!t)return void(this._allBitmaps=null);const e=new Map;let s=0;for(;t.next();)switch(t.tag()){case 1:{const a=t.getMessage();for(;a.next();)switch(a.tag()){case 3:{const t=a.getMessage();let r,n,i,c,o,g,h;for(;t.next();)switch(t.tag()){case 1:r=t.getUInt32();break;case 2:n=t.getBytes();break;case 3:i=t.getUInt32();break;case 4:c=t.getUInt32();break;case 5:o=t.getSInt32();break;case 6:g=t.getSInt32();break;case 7:h=t.getUInt32();break;default:t.skip()}if(t.release(),r){const t=n?.length??0;this._metrics[r]={width:i,height:c,left:o,top:g,advance:h,startOffset:s,length:t},e.set(r,n),s+=t}break}default:a.skip()}a.release();break}default:t.skip()}const a=new Uint8Array(s),r=this._metrics;for(const[n,i]of e){const{startOffset:t,length:e}=r[n];if(i)for(let s=0;s<e;++s)a[t+s]=i[s]}this._allBitmaps=a}getMetrics(t){return this._metrics[t]}getBitmap(t){if(!this._allBitmaps)return;const e=this._metrics[t];if(void 0===e)return;const{startOffset:s,length:a}=e;return 0!==a?new n(this._allBitmaps,s,a):void 0}}class a{constructor(){this._ranges=[]}get ranges(){return this._ranges}getRange(t){return this._ranges[t]}addRange(t,e){this._ranges[t]=e}}class r{constructor(t){this._glyphInfo={},this._baseURL=t}getRange(a,r){const n=this._getFontStack(a);if(n.getRange(r))return Promise.resolve();const i=256*r,c=i+255;if(this._baseURL){const o=this._baseURL.replace("{fontstack}",a).replace("{range}",i+"-"+c);return (0,_request_js__WEBPACK_IMPORTED_MODULE_0__["default"])(o,{responseType:"array-buffer"}).then((t=>{n.addRange(r,new s(new _core_pbf_js__WEBPACK_IMPORTED_MODULE_1__["default"](new Uint8Array(t.data),new DataView(t.data))))})).catch((()=>{n.addRange(r,new s)}))}return n.addRange(r,new s),Promise.resolve()}getGlyph(t,e){const s=this._getFontStack(t);if(!s)return;const a=Math.floor(e/256),r=s.getRange(a);return r?{metrics:r.getMetrics(e),bitmap:r.getBitmap(e)}:void 0}_getFontStack(t){let e=this._glyphInfo[t];return e||(e=this._glyphInfo[t]=new a),e}}class n{constructor(t,e,s){this._array=t,this._start=e,this.length=s}at(t){return 0<=t&&t<this.length?this._array[this._start+t]:void 0}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/RectangleBinPack.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/RectangleBinPack.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _webgl_Rect_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../webgl/Rect.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/Rect.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class e{constructor(e,t){this._width=0,this._height=0,this._free=[],this._width=e,this._height=t,this._free.push(new _webgl_Rect_js__WEBPACK_IMPORTED_MODULE_0__["default"](0,0,e,t))}get width(){return this._width}get height(){return this._height}allocate(e,t){if(e>this._width||t>this._height)return new _webgl_Rect_js__WEBPACK_IMPORTED_MODULE_0__["default"];let i=null,s=-1;for(let h=0;h<this._free.length;++h){const w=this._free[h];e<=w.width&&t<=w.height&&(null===i||w.y<=i.y&&w.x<=i.x)&&(i=w,s=h)}return null===i?new _webgl_Rect_js__WEBPACK_IMPORTED_MODULE_0__["default"]:(this._free.splice(s,1),i.width<i.height?(i.width>e&&this._free.push(new _webgl_Rect_js__WEBPACK_IMPORTED_MODULE_0__["default"](i.x+e,i.y,i.width-e,t)),i.height>t&&this._free.push(new _webgl_Rect_js__WEBPACK_IMPORTED_MODULE_0__["default"](i.x,i.y+t,i.width,i.height-t))):(i.width>e&&this._free.push(new _webgl_Rect_js__WEBPACK_IMPORTED_MODULE_0__["default"](i.x+e,i.y,i.width-e,i.height)),i.height>t&&this._free.push(new _webgl_Rect_js__WEBPACK_IMPORTED_MODULE_0__["default"](i.x,i.y+t,e,i.height-t))),new _webgl_Rect_js__WEBPACK_IMPORTED_MODULE_0__["default"](i.x,i.y,e,t))}release(h){for(let e=0;e<this._free.length;++e){const t=this._free[e];if(t.y===h.y&&t.height===h.height&&t.x+t.width===h.x)t.width+=h.width;else if(t.x===h.x&&t.width===h.width&&t.y+t.height===h.y)t.height+=h.height;else if(h.y===t.y&&h.height===t.height&&h.x+h.width===t.x)t.x=h.x,t.width+=h.width;else{if(h.x!==t.x||h.width!==t.width||h.y+h.height!==t.y)continue;t.y=h.y,t.height+=h.height}this._free.splice(e,1),this.release(h)}this._free.push(h)}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/SpriteMosaic.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/SpriteMosaic.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _symbols_cim_rasterizingUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../symbols/cim/rasterizingUtils.js */ "./node_modules/@arcgis/core/symbols/cim/rasterizingUtils.js");
/* harmony import */ var _RectangleBinPack_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./RectangleBinPack.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/RectangleBinPack.js");
/* harmony import */ var _webgl_Rect_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../webgl/Rect.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/Rect.js");
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../webgl/enums.js */ "./node_modules/@arcgis/core/views/webgl/enums.js");
/* harmony import */ var _webgl_Texture_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../webgl/Texture.js */ "./node_modules/@arcgis/core/views/webgl/Texture.js");
/* harmony import */ var _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../webgl/TextureDescriptor.js */ "./node_modules/@arcgis/core/views/webgl/TextureDescriptor.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const r="dasharray-";class o{constructor(t,e,s=0){this._size=[],this._mosaicsData=[],this._textures=[],this._dirties=[],this._maxItemSize=0,this._currentPage=0,this._pageWidth=0,this._pageHeight=0,this._mosaicRects={},this.pixelRatio=1,(t<=0||e<=0)&&console.error("Sprites mosaic defaultWidth and defaultHeight must be greater than zero!"),this._pageWidth=t,this._pageHeight=e,s>0&&(this._maxItemSize=s),this._binPack=new _RectangleBinPack_js__WEBPACK_IMPORTED_MODULE_1__["default"](t-4,e-4)}destroy(){this.dispose()}dispose(){this._binPack=null,this._mosaicsData.length=0,this._mosaicRects={};for(const t of this._textures)t&&t.dispose();this._textures.length=0}getWidth(t){return t>=this._size.length?-1:this._size[t][0]}getHeight(t){return t>=this._size.length?-1:this._size[t][1]}getPageSize(t){return t>=this._size.length?null:this._size[t]}setSpriteSource(t){if(this.dispose(),this.pixelRatio=t.devicePixelRatio,0===this._mosaicsData.length){this._binPack=new _RectangleBinPack_js__WEBPACK_IMPORTED_MODULE_1__["default"](this._pageWidth-4,this._pageHeight-4);const t=Math.floor(this._pageWidth),e=Math.floor(this._pageHeight),s=new Uint32Array(t*e);this._mosaicsData[0]=s,this._dirties.push(!0),this._size.push([this._pageWidth,this._pageHeight]),this._textures.push(void 0)}this._sprites=t}getSpriteItem(t,i=!1){let e,s,h=this._mosaicRects[t];if(h)return h;if(!this._sprites||"loaded"!==this._sprites.loadStatus)return null;if(t&&t.startsWith(r)?([e,s]=this._rasterizeDash(t),i=!0):e=this._sprites.getSpriteInfo(t),!e?.width||!e.height||e.width<0||e.height<0)return null;const a=e.width,o=e.height,[n,_,g]=this._allocateImage(a,o);return n.width<=0?null:(this._copy(n,e,_,g,i,s),h={rect:n,width:a,height:o,sdf:e.sdf,simplePattern:!1,pixelRatio:e.pixelRatio,page:_},this._mosaicRects[t]=h,h)}getSpriteItems(t){const i={};for(const e of t)i[e.name]=this.getSpriteItem(e.name,e.repeat);return i}getMosaicItemPosition(t,i){const e=this.getSpriteItem(t,i),s=e&&e.rect;if(!s)return null;s.width=e.width,s.height=e.height;const h=e.width,a=e.height,r=2;return{tl:[s.x+r,s.y+r],br:[s.x+r+h,s.y+r+a],page:e.page}}bind(t,i,e=0,r=0){if(e>=this._size.length||e>=this._mosaicsData.length)return;if(!this._textures[e]){const i=new _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_5__.TextureDescriptor;i.wrapMode=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_3__.TextureWrapMode.CLAMP_TO_EDGE,i.width=this._size[e][0],i.height=this._size[e][1],this._textures[e]=new _webgl_Texture_js__WEBPACK_IMPORTED_MODULE_4__.Texture(t,i,new Uint8Array(this._mosaicsData[e].buffer))}const o=this._textures[e];o.setSamplingMode(i),this._dirties[e]&&o.setData(new Uint8Array(this._mosaicsData[e].buffer)),t.bindTexture(o,r),this._dirties[e]=!1}static _copyBits(t,i,e,s,h,a,r,o,n,_,g){let c=s*i+e,l=o*a+r;if(g){l-=a;for(let r=-1;r<=_;r++,c=((r+_)%_+s)*i+e,l+=a)for(let i=-1;i<=n;i++)h[l+i]=t[c+(i+n)%n]}else for(let p=0;p<_;p++){for(let i=0;i<n;i++)h[l+i]=t[c+i];c+=i,l+=a}}_copy(t,i,e,s,h,a){if(!this._sprites||"loaded"!==this._sprites.loadStatus||e>=this._mosaicsData.length)return;const r=new Uint32Array(a?a.buffer:this._sprites.image.buffer),n=this._mosaicsData[e];n&&r||console.error("Source or target images are uninitialized!");const _=2,g=a?i.width:this._sprites.width;o._copyBits(r,g,i.x,i.y,n,s[0],t.x+_,t.y+_,i.width,i.height,h),this._dirties[e]=!0}_allocateImage(t,s){t+=2,s+=2;const h=Math.max(t,s);if(this._maxItemSize&&this._maxItemSize<h){const i=new _webgl_Rect_js__WEBPACK_IMPORTED_MODULE_2__["default"](0,0,t,s);return this._mosaicsData.push(new Uint32Array(t*s)),this._dirties.push(!0),this._size.push([t,s]),this._textures.push(void 0),[i,this._mosaicsData.length-1,[t,s]]}let a=t%4?4-t%4:4,r=s%4?4-s%4:4;1===a&&(a=5),1===r&&(r=5);const o=this._binPack.allocate(t+a,s+r);return o.width<=0?(this._dirties[this._currentPage]||(this._mosaicsData[this._currentPage]=null),this._currentPage=this._mosaicsData.length,this._mosaicsData.push(new Uint32Array(this._pageWidth*this._pageHeight)),this._dirties.push(!0),this._size.push([this._pageWidth,this._pageHeight]),this._textures.push(void 0),this._binPack=new _RectangleBinPack_js__WEBPACK_IMPORTED_MODULE_1__["default"](this._pageWidth-4,this._pageHeight-4),this._allocateImage(t,s)):[o,this._currentPage,[this._pageWidth,this._pageHeight]]}_rasterizeDash(i){const e=/\[(.*?)\]/,s=i.match(e);if(!s)return null;const h=s[1].split(",").map(Number),a=i.slice(i.lastIndexOf("-")+1),[r,o,n]=(0,_symbols_cim_rasterizingUtils_js__WEBPACK_IMPORTED_MODULE_0__.rasterizeDash)(h,a);return[{x:0,y:0,width:o,height:n,sdf:!0,pixelRatio:1},new Uint8Array(r.buffer)]}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/TileHandler.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/TileHandler.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TileHandler: () => (/* binding */ u)
/* harmony export */ });
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/urlUtils.js */ "./node_modules/@arcgis/core/core/urlUtils.js");
/* harmony import */ var _core_workers_workers_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/workers/workers.js */ "./node_modules/@arcgis/core/core/workers/workers.js");
/* harmony import */ var _GlyphMosaic_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./GlyphMosaic.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/GlyphMosaic.js");
/* harmony import */ var _GlyphSource_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./GlyphSource.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/GlyphSource.js");
/* harmony import */ var _SpriteMosaic_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./SpriteMosaic.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/SpriteMosaic.js");
/* harmony import */ var _tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../tiling/TileKey.js */ "./node_modules/@arcgis/core/views/2d/tiling/TileKey.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class u{constructor(t,e,s){this._layer=t,this._styleRepository=e,this.devicePixelRatio=s,this._spriteMosaic=null,this._glyphMosaic=null,this._connection=null,this._spriteSourceAbortController=null,this._startOptionsInputSignal=null,this._inputSignalEventListener=null}destroy(){this._connection?.close(),this._connection=null,this._styleRepository=null,this._layer=null,this._spriteMosaic?.destroy(),this._spriteMosaic=null,this._glyphMosaic=null,this._spriteSourceAbortController=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.abortMaybe)(this._spriteSourceAbortController),this._spriteSourcePromise=null,this._inputSignalEventListener&&this._startOptionsInputSignal?.removeEventListener("abort",this._inputSignalEventListener),this._startOptionsInputSignal=null,this._inputSignalEventListener=null}get spriteMosaic(){return this._spriteSourcePromise.then((()=>this._spriteMosaic))}get glyphMosaic(){return this._glyphMosaic}async start(t){this._requestSprite(t);const s=this._layer.currentStyleInfo.glyphsUrl,r=new _GlyphSource_js__WEBPACK_IMPORTED_MODULE_5__["default"](s?(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_2__.addQueryParameters)(s,{...this._layer.customParameters,token:this._layer.apiKey}):null);this._glyphMosaic=new _GlyphMosaic_js__WEBPACK_IMPORTED_MODULE_4__["default"](1024,1024,r),this._broadcastPromise=(0,_core_workers_workers_js__WEBPACK_IMPORTED_MODULE_3__.open)("WorkerTileHandler",{client:this,schedule:t.schedule,signal:t.signal}).then((s=>{if(this._layer&&(this._connection?.close(),this._connection=s,this._layer&&!this._connection.closed)){const r=s.broadcast("setStyle",this._layer.currentStyleInfo.style,t);Promise.all(r).catch((t=>(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__.throwIfNotAbortError)(t)))}}))}_requestSprite(t){this._spriteSourceAbortController?.abort();const e=new AbortController;this._spriteSourceAbortController=e;const r=t?.signal;this._inputSignalEventListener&&this._startOptionsInputSignal?.removeEventListener("abort",this._inputSignalEventListener),this._startOptionsInputSignal=null,r&&(this._inputSignalEventListener=h(e),r.addEventListener("abort",this._inputSignalEventListener,{once:!0}));const{signal:i}=e,o={...t,signal:i};this._spriteSourcePromise=this._layer.loadSpriteSource(this.devicePixelRatio,o),this._spriteSourcePromise.then((t=>{(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__.throwIfAbortError)(i),this._spriteMosaic=new _SpriteMosaic_js__WEBPACK_IMPORTED_MODULE_6__["default"](1024,1024,250),this._spriteMosaic.setSpriteSource(t)}))}async updateStyle(t){return await this._broadcastPromise,this._broadcastPromise=Promise.all(this._connection.broadcast("updateStyle",t)),this._broadcastPromise}setSpriteSource(t){const e=new _SpriteMosaic_js__WEBPACK_IMPORTED_MODULE_6__["default"](1024,1024,250);return e.setSpriteSource(t),this._spriteMosaic=e,this._spriteSourcePromise=Promise.resolve(t),this._spriteSourceAbortController=null,e}async setStyle(t,e){await this._broadcastPromise,this._styleRepository=t,this._requestSprite();const s=new _GlyphSource_js__WEBPACK_IMPORTED_MODULE_5__["default"](this._layer.currentStyleInfo.glyphsUrl?(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_2__.addQueryParameters)(this._layer.currentStyleInfo.glyphsUrl,{...this._layer.customParameters,token:this._layer.apiKey}):null);return this._glyphMosaic=new _GlyphMosaic_js__WEBPACK_IMPORTED_MODULE_4__["default"](1024,1024,s),this._broadcastPromise=Promise.all(this._connection.broadcast("setStyle",e)),this._broadcastPromise}fetchTileData(t,e){return this._getRefKeys(t,e).then((t=>{const s=this._layer.sourceNameToSource,r=[];for(const e in s)r.push(e);return this._getSourcesData(r,t,e)}))}parseTileData(t,e){const s=t&&t.data;if(!s)return Promise.resolve(null);const{sourceName2DataAndRefKey:r,transferList:i}=s;return 0===Object.keys(r).length?Promise.resolve(null):this._broadcastPromise.then((()=>this._connection.invoke("createTileAndParse",{key:t.key.id,sourceName2DataAndRefKey:r,styleLayerUIDs:t.styleLayerUIDs},{...e,transferList:i})))}async getSprites(t){return await this._spriteSourcePromise,this._spriteMosaic.getSpriteItems(t)}getGlyphs(t){return this._glyphMosaic.getGlyphItems(t.font,t.codePoints)}async _getTilePayload(t,e,s){const i=_tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_7__["default"].pool.acquire(t.id),o=this._layer.sourceNameToSource[e],{level:n,row:l,col:a}=i;_tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_7__["default"].pool.release(i);try{return{protobuff:await o.requestTile(n,l,a,s),sourceName:e}}catch(u){if((0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__.isAbortError)(u))throw u;return{protobuff:null,sourceName:e}}}_getRefKeys(t,e){const s=this._layer.sourceNameToSource,r=new Array;for(const i in s){const o=s[i].getRefKey(t,e);r.push(o)}return Promise.allSettled(r)}_getSourcesData(t,e,s){const r=[];for(let i=0;i<e.length;i++){const o=e[i],n="fulfilled"===o.status?o.value:null;if(null==n||null==t[i])r.push(null);else{const e=this._getTilePayload(n,t[i],s);r.push(e)}}return Promise.allSettled(r).then((t=>{const s={},r=[];for(let i=0;i<t.length;i++){const o=t[i],n="fulfilled"===o.status?o.value:null,l=n?.protobuff;if(!n||!l?.byteLength)continue;const a=e[i],c="fulfilled"===a.status?a.value:null;if(c){const t=c.id;s[n.sourceName]={refKey:t,protobuff:l},r.push(l)}}return{sourceName2DataAndRefKey:s,transferList:r}}))}}function h(t){return()=>t.abort()}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/SymbolDeclutterer.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/SymbolDeclutterer.js ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SymbolDeclutterer: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/config.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function t(o,t){if(o.priority-t.priority)return o.priority-t.priority;const e=o.tile.key,i=t.tile.key;return e.world-i.world?e.world-i.world:e.level-i.level?e.level-i.level:e.row-i.row?e.row-i.row:e.col-i.col?e.col-i.col:o.xTile-t.xTile?o.xTile-t.xTile:o.yTile-t.yTile}class e{get running(){return this._running}constructor(o,t,e,i,s,n){this._visibleTiles=o,this._symbolRepository=t,this._createCollisionJob=e,this._assignTileSymbolsOpacity=i,this._symbolLayerSorter=s,this._isLayerVisible=n,this._selectionJob=null,this._selectionJobCompleted=!1,this._collisionJob=null,this._collisionJobCompleted=!1,this._opacityJob=null,this._opacityJobCompleted=!1,this._running=!0}setScreenSize(o,t){this._screenWidth===o&&this._screenHeight===t||this.restart(),this._screenWidth=o,this._screenHeight=t}restart(){this._selectionJob=null,this._selectionJobCompleted=!1,this._collisionJob=null,this._collisionJobCompleted=!1,this._opacityJob=null,this._opacityJobCompleted=!1,this._running=!0}continue(o){if(this._selectionJob||(this._selectionJob=this._createSelectionJob()),!this._selectionJobCompleted){const t=performance.now();if(!this._selectionJob.work(o))return!1;if(this._selectionJobCompleted=!0,0===(o=Math.max(0,o-(performance.now()-t))))return!1}if(this._collisionJob||(this._collisionJob=this._createCollisionJob(this._selectionJob.sortedSymbols,this._screenWidth,this._screenHeight)),!this._collisionJobCompleted){const t=performance.now();if(!this._collisionJob.work(o))return!1;if(this._collisionJobCompleted=!0,0===(o=Math.max(0,o-(performance.now()-t))))return!1}if(this._opacityJob||(this._opacityJob=this._createOpacityJob()),!this._opacityJobCompleted){const t=performance.now();if(!this._opacityJob.work(o))return!1;if(this._opacityJobCompleted=!0,0===(o=Math.max(0,o-(performance.now()-t))))return!1}return this._running=!1,!0}_createSelectionJob(){const o=this._symbolRepository.uniqueSymbols;for(let t=0;t<o.length;t++){const e=o[t];for(let o=0;o<e.uniqueSymbols.length;o++){const t=e.uniqueSymbols[o];for(const o of t.tileSymbols)o.selectedForRendering=!1}}const e=[];let i=0,s=0;const n=this._isLayerVisible;function r(r){let l;const c=performance.now();for(;s<o.length;s++,i=0){const t=o[s],h=t.styleLayerUID;if(!n(h)){e[s]||(e[s]={styleLayerUID:h,symbols:[]});continue}e[s]=e[s]||{styleLayerUID:h,symbols:[]};const a=e[s];for(;i<t.uniqueSymbols.length;i++){if(l=t.uniqueSymbols[i],i%100==99&&performance.now()-c>r)return!1;let o=null,e=!1,s=!1;for(const t of l.tileSymbols)if(!s||!e){const i=t.tile;(!o||i.isCoverage||i.neededForCoverage&&!e)&&(o=t,(i.neededForCoverage||i.isCoverage)&&(s=!0),i.isCoverage&&(e=!0))}if(o.selectedForRendering=!0,s){a.symbols.push(o),l.show=!0;for(const o of l.parts)o.show=!0}else l.show=!1}}for(const o of e)o.symbols.sort(t);return!0}const l=this._symbolLayerSorter;return{work:r,get sortedSymbols(){return e.sort(l)}}}_createOpacityJob(){const o=this._assignTileSymbolsOpacity,t=this._visibleTiles;let e=0;function s(t,e){const n=t.symbols;for(const[o,s]of n)i(s,e);o(t,e);for(const o of t.childrenTiles)s(o,e)}return{work(o){const i=performance.now();for(;e<t.length;e++){if(performance.now()-i>o)return!1;const n=t[e];if(null!=n.parentTile)continue;s(n,performance.now())}return!0}}}}function i(t,e){for(const i of t){const t=i.unique;for(const i of t.parts){const s=i.targetOpacity>.5?1:-1;i.startOpacity+=s*((e-i.startTime)/_config_js__WEBPACK_IMPORTED_MODULE_0__.fadeDuration),i.startOpacity=Math.min(Math.max(i.startOpacity,0),1),i.startTime=e,i.targetOpacity=t.show&&i.show?1:0}}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/SymbolRepository.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/SymbolRepository.js ***!
  \************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SymbolRepository: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./util.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/util.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const l=32,o=8,t=64;class i{constructor(e,s,l){this.tileCoordRange=e,this._visibleTiles=s,this._createUnique=l,this._tiles=new Map,this._uniqueSymbolsReferences=new Map}get uniqueSymbols(){return null==this._uniqueSymbolLayerArray&&(this._uniqueSymbolLayerArray=this._createUniqueSymbolLayerArray()),this._uniqueSymbolLayerArray}add(s,i){this._uniqueSymbolLayerArray=null;let n=this._tiles.get(s.id);n||(n={symbols:new Map},this._tiles.set(s.id,n));const r=new Map;if(i)for(const e of i)n.symbols.has(e)&&(r.set(e,n.symbols.get(e)),n.symbols.delete(e));else for(const[e,l]of s.layerData)n.symbols.has(e)&&(r.set(e,n.symbols.get(e)),n.symbols.delete(e));this._removeSymbols(r);const y=s.symbols,a=new Map;for(const[f,c]of y){let s=c.length;if(s>=l){let l=this.tileCoordRange;do{l/=2,s/=4}while(s>o&&l>t);const i=new _util_js__WEBPACK_IMPORTED_MODULE_0__.GridIndex(this.tileCoordRange,this.tileCoordRange,l);a.set(f,{flat:c,index:i}),n.symbols.set(f,{flat:c,index:i});for(const e of c)i.getCell(e.xTile,e.yTile).push(e)}else a.set(f,{flat:c}),n.symbols.set(f,{flat:c})}this._addSymbols(s.key,y)}deleteStyleLayers(e){this._uniqueSymbolLayerArray=null;for(const[s,l]of this._tiles){const o=new Map;for(const s of e)l.symbols.has(s)&&(o.set(s,l.symbols.get(s)),l.symbols.delete(s));this._removeSymbols(o),0===l.symbols.size&&this._tiles.delete(s)}}removeTile(e){this._uniqueSymbolLayerArray=null;const s=this._tiles.get(e.id);if(!s)return;const l=new Map;for(const[o,t]of e.symbols)s.symbols.has(o)&&(l.set(o,s.symbols.get(o)),s.symbols.delete(o));this._removeSymbols(l),0===s.symbols.size&&this._tiles.delete(e.id)}_removeSymbols(e){for(const[s,{flat:l}]of e)for(const e of l){const l=e.unique,o=l.tileSymbols,t=o.length-1;for(let s=0;s<t;s++)if(o[s]===e){o[s]=o[t];break}if(o.length=t,0===t){const e=this._uniqueSymbolsReferences.get(s);e.delete(l),0===e.size&&this._uniqueSymbolsReferences.delete(s)}e.unique=null}}_addSymbols(e,s){if(0===s.size)return;const l=this._visibleTiles;for(const o of l)o.parentTile||o.key.world!==e.world||o.key.level===e.level&&!o.key.equals(e)||this._matchSymbols(o,e,s);for(const[o,t]of s)for(const e of t)if(null==e.unique){const s=this._createUnique();e.unique=s,s.tileSymbols.push(e);let l=this._uniqueSymbolsReferences.get(o);l||(l=new Set,this._uniqueSymbolsReferences.set(o,l)),l.add(s)}}_matchSymbols(e,l,o){if(e.key.level>l.level){const s=e.key.level-l.level;if(e.key.row>>s!==l.row||e.key.col>>s!==l.col)return}if(l.level>e.key.level){const s=l.level-e.key.level;if(l.row>>s!==e.key.row||l.col>>s!==e.key.col)return}if(l.equals(e.key)){for(const s of e.childrenTiles)this._matchSymbols(s,l,o);return}const t=new Map;for(const[i,n]of o){const o=[];for(const t of n){const i=(0,_util_js__WEBPACK_IMPORTED_MODULE_0__.tileCoordChange)(this.tileCoordRange,t.xTile,l.level,l.col,e.key.level,e.key.col),n=(0,_util_js__WEBPACK_IMPORTED_MODULE_0__.tileCoordChange)(this.tileCoordRange,t.yTile,l.level,l.row,e.key.level,e.key.row);i>=0&&i<this.tileCoordRange&&n>=0&&n<this.tileCoordRange&&o.push({symbol:t,xTransformed:i,yTransformed:n})}const r=[],y=e.key.level<l.level?1:1<<e.key.level-l.level,a=this._tiles.get(e.id).symbols.get(i);if(a){const e=a.flat;for(const s of o){let l,o=!1;const t=s.xTransformed,i=s.yTransformed;l=null!=a.index?a.index.getCell(t,i):e;const n=s.symbol,f=n.hash;for(const e of l)if(f===e.hash&&Math.abs(t-e.xTile)<=y&&Math.abs(i-e.yTile)<=y){const s=e.unique;n.unique=s,s.tileSymbols.push(n),o=!0;break}o||r.push(n)}}r.length>0&&t.set(i,r)}for(const s of e.childrenTiles)this._matchSymbols(s,l,t)}_createUniqueSymbolLayerArray(){const e=this._uniqueSymbolsReferences,s=new Array(e.size);let l,o=0;for(const[t,i]of e){const e=new Array(i.size);l=0;for(const s of i)e[l++]=s;s[o]={styleLayerUID:t,uniqueSymbols:e},o++}return s}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/jobs.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/jobs.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CollisionJob: () => (/* binding */ l)
/* harmony export */ });
/* harmony import */ var _chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../chunks/mat3f32.js */ "./node_modules/@arcgis/core/chunks/mat3f32.js");
/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/config.js");
/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./util.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/util.js");
/* harmony import */ var _style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../style/StyleDefinition.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/style/StyleDefinition.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function i(e,t,n,o,i,l){const{iconRotationAlignment:a,textRotationAlignment:c,iconTranslate:h,iconTranslateAnchor:u,textTranslate:d,textTranslateAnchor:y}=o;let x=0;for(const g of e.colliders){const[e,o]=0===g.partIndex?h:d,m=0===g.partIndex?u:y,f=g.minLod<=l&&l<=g.maxLod;x+=f?0:1,g.enabled=f,g.xScreen=g.xTile*i[0]+g.yTile*i[3]+i[6],g.yScreen=g.xTile*i[1]+g.yTile*i[4]+i[7],m===_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_3__.TranslateAnchor.MAP?(g.xScreen+=n*e-t*o,g.yScreen+=t*e+n*o):(g.xScreen+=e,g.yScreen+=o),_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_3__.RotationAlignment.VIEWPORT===(0===g.partIndex?a:c)?(g.dxScreen=g.dxPixels,g.dyScreen=g.dyPixels):(g.dxScreen=n*(g.dxPixels+g.width/2)-t*(g.dyPixels+g.height/2)-g.width/2,g.dyScreen=t*(g.dxPixels+g.width/2)+n*(g.dyPixels+g.height/2)-g.height/2)}e.colliders.length>0&&x===e.colliders.length&&(e.unique.show=!1)}class l{constructor(o,r,s,i,l,a){this._symbols=o,this._styleRepository=i,this._zoom=l,this._currentLayerCursor=0,this._currentSymbolCursor=0,this._styleProps=new Map,this._allNeededMatrices=new Map,this._gridIndex=new _util_js__WEBPACK_IMPORTED_MODULE_2__.GridIndex(r,s,_config_js__WEBPACK_IMPORTED_MODULE_1__.collisionGridCellSize),this._si=Math.sin(Math.PI*a/180),this._co=Math.cos(Math.PI*a/180);for(const t of o)for(const n of t.symbols)this._allNeededMatrices.has(n.tile)||this._allNeededMatrices.set(n.tile,(0,_chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_0__.a)(n.tile.transforms.tileUnitsToPixels))}work(e){const t=this._gridIndex;function n(e){const n=e.xScreen+e.dxScreen,o=e.yScreen+e.dyScreen,r=n+e.width,s=o+e.height,[i,l,a,c]=t.getCellSpan(n,o,r,s);for(let h=l;h<=c;h++)for(let e=i;e<=a;e++){const i=t.cells[h][e];for(const e of i){const t=e.xScreen+e.dxScreen,i=e.yScreen+e.dyScreen,l=t+e.width,a=i+e.height;if(!(r<t||n>l||s<i||o>a))return!0}}return!1}const o=performance.now();for(;this._currentLayerCursor<this._symbols.length;this._currentLayerCursor++,this._currentSymbolCursor=0){const t=this._symbols[this._currentLayerCursor],r=this._getProperties(t.styleLayerUID);for(;this._currentSymbolCursor<t.symbols.length;this._currentSymbolCursor++){if(this._currentSymbolCursor%100==99&&performance.now()-o>e)return!1;const s=t.symbols[this._currentSymbolCursor];if(!s.unique.show)continue;i(s,this._si,this._co,r,this._allNeededMatrices.get(s.tile),this._zoom);const l=s.unique;if(!l.show)continue;const{iconAllowOverlap:a,iconIgnorePlacement:c,textAllowOverlap:h,textIgnorePlacement:u}=r;for(const e of s.colliders){if(!e.enabled)continue;const t=l.parts[e.partIndex];if(!t.show)continue;!(e.partIndex?h:a)&&n(e)&&(e.hard?l.show=!1:t.show=!1)}if(l.show)for(const e of s.colliders){if(!e.enabled)continue;if(e.partIndex?u:c)continue;if(!l.parts[e.partIndex].show)continue;const t=e.xScreen+e.dxScreen,n=e.yScreen+e.dyScreen,o=t+e.width,r=n+e.height,[s,i,a,h]=this._gridIndex.getCellSpan(t,n,o,r);for(let l=i;l<=h;l++)for(let t=s;t<=a;t++){this._gridIndex.cells[l][t].push(e)}}}}return!0}_getProperties(e){const t=this._styleProps.get(e);if(t)return t;const n=this._zoom,s=this._styleRepository.getStyleLayerByUID(e),i=s.getLayoutValue("symbol-placement",n)!==_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_3__.SymbolPlacement.POINT;let l=s.getLayoutValue("icon-rotation-alignment",n);l===_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_3__.RotationAlignment.AUTO&&(l=i?_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_3__.RotationAlignment.MAP:_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_3__.RotationAlignment.VIEWPORT);let a=s.getLayoutValue("text-rotation-alignment",n);a===_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_3__.RotationAlignment.AUTO&&(a=i?_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_3__.RotationAlignment.MAP:_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_3__.RotationAlignment.VIEWPORT);const c=s.getPaintValue("icon-translate",n),h=s.getPaintValue("icon-translate-anchor",n),u=s.getPaintValue("text-translate",n),d=s.getPaintValue("text-translate-anchor",n),y={iconAllowOverlap:s.getLayoutValue("icon-allow-overlap",n),iconIgnorePlacement:s.getLayoutValue("icon-ignore-placement",n),textAllowOverlap:s.getLayoutValue("text-allow-overlap",n),textIgnorePlacement:s.getLayoutValue("text-ignore-placement",n),iconRotationAlignment:l,textRotationAlignment:a,iconTranslateAnchor:h,iconTranslate:c,textTranslateAnchor:d,textTranslate:u};return this._styleProps.set(e,y),y}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/webgl/Rect.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/webgl/Rect.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class t{constructor(t=0,h=0,i=0,s=0){this.x=t,this.y=h,this.width=i,this.height=s}get isEmpty(){return this.width<=0||this.height<=0}union(t){this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.width=Math.max(this.width,t.width),this.height=Math.max(this.height,t.height)}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/tiling/TileInfoViewPOT.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/tiling/TileInfoViewPOT.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _layers_support_TileInfo_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../layers/support/TileInfo.js */ "./node_modules/@arcgis/core/layers/support/TileInfo.js");
/* harmony import */ var _TileInfoView_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./TileInfoView.js */ "./node_modules/@arcgis/core/views/2d/tiling/TileInfoView.js");
/* harmony import */ var _TileKey_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./TileKey.js */ "./node_modules/@arcgis/core/views/2d/tiling/TileKey.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class t extends _TileInfoView_js__WEBPACK_IMPORTED_MODULE_1__["default"]{constructor(){super(...arguments),this._fullCacheLodInfos=null,this._levelByScale={}}getTileParentId(e){const l=_TileKey_js__WEBPACK_IMPORTED_MODULE_2__["default"].pool.acquire(e),t=0===l.level?null:_TileKey_js__WEBPACK_IMPORTED_MODULE_2__["default"].getId(l.level-1,l.row>>1,l.col>>1,l.world);return _TileKey_js__WEBPACK_IMPORTED_MODULE_2__["default"].pool.release(l),t}getTileCoverage(e,l,s=!0,t){const o=super.getTileCoverage(e,l,s,t);if(!o)return o;const i=1<<o.lodInfo.level;return o.spans=o.spans.filter((e=>e.row>=0&&e.row<i)),o}scaleToLevel(e){if(this._fullCacheLodInfos||this._initializeFullCacheLODs(this._lodInfos),this._levelByScale[e])return this._levelByScale[e];{const l=this._fullCacheLodInfos;if(e>l[0].scale)return l[0].level;let s,t;for(let o=0;o<l.length-1;o++)if(t=l[o+1],e>t.scale)return s=l[o],s.level+(s.scale-e)/(s.scale-t.scale);return l[l.length-1].level}}_initializeFullCacheLODs(l){let s;if(0===l[0].level)s=l.map((e=>({level:e.level,resolution:e.resolution,scale:e.scale})));else{const l=this.tileInfo.size[0],t=this.tileInfo.spatialReference;s=_layers_support_TileInfo_js__WEBPACK_IMPORTED_MODULE_0__["default"].create({size:l,spatialReference:t}).lods.map((e=>({level:e.level,resolution:e.resolution,scale:e.scale})))}for(let e=0;e<s.length;e++)this._levelByScale[s[e].scale]=s[e].level;this._fullCacheLodInfos=s}}


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfYXJjZ2lzX2NvcmVfdmlld3NfMmRfZW5naW5lX3ZlY3RvclRpbGVzX1RpbGVIYW5kbGVyX2pzLW5vZGVfbW9kdWxlc19hcmNnLWM3NjMzYi5idW5kbGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDNFEsUUFBUSxtQkFBbUIsc0dBQXNHLGdIQUFnSCw0REFBQyx1R0FBdUcsbUJBQW1CLGlEQUFpRCxrQkFBa0Isd0JBQXdCLFNBQVMsV0FBVyxzQkFBc0IsWUFBWSxpRUFBaUUsS0FBSyxtQ0FBbUMsOEJBQThCLFFBQVEsOEJBQThCLEdBQUcsd0NBQXdDLDZCQUE2QiwwQkFBMEIsUUFBUSx3QkFBd0Isa0JBQWtCLGFBQWEsTUFBTSxNQUFNLHlEQUF5RCxTQUFTLHdCQUF3Qix3QkFBd0Isa0JBQWtCLE1BQU0scUJBQXFCLHNEQUFDLFVBQVUsS0FBSyx1Q0FBdUMsZ0NBQWdDLCtUQUErVCw0REFBQyxnRUFBZ0Usc0RBQXNELFFBQVEsaUJBQWlCLElBQUksS0FBSyxpQ0FBaUMsWUFBWSxJQUFJLHdCQUF3QixNQUFNLHFEQUFxRCxPQUFPLHNEQUFzRCxxQ0FBcUMsU0FBUyxHQUFHLGdCQUFnQixpQ0FBaUMsNEJBQTRCLGVBQWUsTUFBTSxtRUFBbUUseUNBQXlDLFFBQVEsWUFBWSxXQUFXLHFDQUFxQyxVQUFVLGFBQWEsdUNBQXVDLGdCQUFnQix1QkFBdUIsWUFBWSwwRUFBQyxDQUFDLGNBQWMsd0RBQUMsa0JBQWtCLDREQUFDLDZFQUE2RSxzREFBQyw2Q0FBNkMsMEJBQTBCLDRHQUE0RyxVQUFVLGVBQWUsVUFBVSw0Q0FBNEMsNkNBQTZDLHlCQUE4Qzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKcjNGO0FBQ0E7QUFDQTtBQUNBO0FBQzZFLFFBQVEsZUFBZSwwREFBMEQsZ0JBQWdCLFFBQVEsS0FBSyxTQUFTLGlCQUFpQixRQUFRLHVCQUF1QixLQUFLLFNBQVMsaUJBQWlCLFFBQVEsdUJB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QUFzQyx1QkFBdUIsNEJBQTRCLHVDQUF1Qyw0SEFBNEgsWUFBWSxLQUFLLGdCQUFnQixLQUFLLEtBQUssdUNBQXVDLFNBQVMsa0JBQWtCLGdDQUFnQyxjQUFjLDRHQUE0RyxzRUFBQyxPQUFPLG9EQUFvRCxJQUFJLHdFQUFDLFlBQVksd0VBQUMsS0FBSyx3RUFBQyxXQUFXLG9EQUFvRCxJQUFJLHdFQUFDLFlBQVksd0VBQUMsS0FBSyx3RUFBQyxXQUFXLCtLQUErSyxpWEFBaVgsb0NBQThEOzs7Ozs7Ozs7Ozs7Ozs7QUNKM3pIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSw2QkFBNkIsNkNBQTZDLGNBQWMscUNBQXFDLFNBQVMsNElBQWlLOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKL1M7QUFDQTtBQUNBO0FBQ0E7QUFDZ0gsZ0JBQWdCLHdEQUFDLENBQUMsY0FBYyx1RUFBdUUsbUJBQW1CLFFBQVEsbURBQUMsb0NBQW9DLG1EQUFDLDRDQUE0QyxPQUFPLG1EQUFDLG1CQUFtQiw0QkFBNEIsdUNBQXVDLGVBQWUsMkJBQTJCLHdEQUF3RCxnQkFBZ0IsOEhBQThILGdDQUFnQyxrQ0FBa0MsUUFBUSxZQUFZLGFBQWEsOEVBQThFLDRCQUE0Qiw0QkFBNEIsTUFBTSxnQ0FBZ0Msb0RBQW9ELElBQUksS0FBSywrREFBK0QsRUFBRSxtRUFBQyxTQUFTLDBCQUEwQixpQkFBaUIsb0RBQW9ELElBQUksWUFBWSxXQUFXLDhDQUE4QywyQkFBZ0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zeW52aWV3Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8yZC9lbmdpbmUvdmVjdG9yVGlsZXMvR2x5cGhNb3NhaWMuanMiLCJ3ZWJwYWNrOi8vc3ludmlldy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvMmQvZW5naW5lL3ZlY3RvclRpbGVzL0dseXBoU291cmNlLmpzIiwid2VicGFjazovL3N5bnZpZXcvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzJkL2VuZ2luZS92ZWN0b3JUaWxlcy9SZWN0YW5nbGVCaW5QYWNrLmpzIiwid2VicGFjazovL3N5bnZpZXcvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzJkL2VuZ2luZS92ZWN0b3JUaWxlcy9TcHJpdGVNb3NhaWMuanMiLCJ3ZWJwYWNrOi8vc3ludmlldy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvMmQvZW5naW5lL3ZlY3RvclRpbGVzL1RpbGVIYW5kbGVyLmpzIiwid2VicGFjazovL3N5bnZpZXcvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzJkL2VuZ2luZS92ZWN0b3JUaWxlcy9kZWNsdXR0ZXJpbmcvU3ltYm9sRGVjbHV0dGVyZXIuanMiLCJ3ZWJwYWNrOi8vc3ludmlldy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvMmQvZW5naW5lL3ZlY3RvclRpbGVzL2RlY2x1dHRlcmluZy9TeW1ib2xSZXBvc2l0b3J5LmpzIiwid2VicGFjazovL3N5bnZpZXcvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzJkL2VuZ2luZS92ZWN0b3JUaWxlcy9kZWNsdXR0ZXJpbmcvam9icy5qcyIsIndlYnBhY2s6Ly9zeW52aWV3Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8yZC9lbmdpbmUvd2ViZ2wvUmVjdC5qcyIsIndlYnBhY2s6Ly9zeW52aWV3Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8yZC90aWxpbmcvVGlsZUluZm9WaWV3UE9ULmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnQgdCBmcm9tXCIuL1JlY3RhbmdsZUJpblBhY2suanNcIjtpbXBvcnQgZSBmcm9tXCIuLi93ZWJnbC9SZWN0LmpzXCI7aW1wb3J0e1BpeGVsRm9ybWF0IGFzIHMsVGV4dHVyZVdyYXBNb2RlIGFzIGl9ZnJvbVwiLi4vLi4vLi4vd2ViZ2wvZW51bXMuanNcIjtpbXBvcnR7VGV4dHVyZSBhcyBofWZyb21cIi4uLy4uLy4uL3dlYmdsL1RleHR1cmUuanNcIjtpbXBvcnR7VGV4dHVyZURlc2NyaXB0b3IgYXMgcn1mcm9tXCIuLi8uLi8uLi93ZWJnbC9UZXh0dXJlRGVzY3JpcHRvci5qc1wiO2NsYXNzIG57Y29uc3RydWN0b3IoZSxzLGkpe3RoaXMud2lkdGg9MCx0aGlzLmhlaWdodD0wLHRoaXMuX2RpcnRpZXM9W10sdGhpcy5fZ2x5cGhEYXRhPVtdLHRoaXMuX2N1cnJlbnRQYWdlPTAsdGhpcy5fZ2x5cGhJbmRleD17fSx0aGlzLl90ZXh0dXJlcz1bXSx0aGlzLl9yYW5nZVByb21pc2VzPW5ldyBNYXAsdGhpcy53aWR0aD1lLHRoaXMuaGVpZ2h0PXMsdGhpcy5fZ2x5cGhTb3VyY2U9aSx0aGlzLl9iaW5QYWNrPW5ldyB0KGUtNCxzLTQpLHRoaXMuX2dseXBoRGF0YS5wdXNoKG5ldyBVaW50OEFycmF5KGUqcykpLHRoaXMuX2RpcnRpZXMucHVzaCghMCksdGhpcy5fdGV4dHVyZXMucHVzaCh2b2lkIDApfWdldEdseXBoSXRlbXMocyxpKXtjb25zdCBoPVtdLHI9dGhpcy5fZ2x5cGhTb3VyY2Usbj1uZXcgU2V0LG89MS8yNTY7Zm9yKGNvbnN0IHQgb2YgaSl7Y29uc3QgZT1NYXRoLmZsb29yKHQqbyk7bi5hZGQoZSl9Y29uc3QgYT1bXTtyZXR1cm4gbi5mb3JFYWNoKCh0PT57Y29uc3QgZT1zK3Q7aWYodGhpcy5fcmFuZ2VQcm9taXNlcy5oYXMoZSkpYS5wdXNoKHRoaXMuX3JhbmdlUHJvbWlzZXMuZ2V0KGUpKTtlbHNle2NvbnN0IGk9ci5nZXRSYW5nZShzLHQpLnRoZW4oKCgpPT57dGhpcy5fcmFuZ2VQcm9taXNlcy5kZWxldGUoZSl9KSwoKCk9Pnt0aGlzLl9yYW5nZVByb21pc2VzLmRlbGV0ZShlKX0pKTt0aGlzLl9yYW5nZVByb21pc2VzLnNldChlLGkpLGEucHVzaChpKX19KSksUHJvbWlzZS5hbGwoYSkudGhlbigoKCk9PntsZXQgbj10aGlzLl9nbHlwaEluZGV4W3NdO258fChuPXt9LHRoaXMuX2dseXBoSW5kZXhbc109bik7Zm9yKGNvbnN0IG8gb2YgaSl7Y29uc3QgaT1uW29dO2lmKGkpe2hbb109e3NkZjohMCxyZWN0OmkucmVjdCxtZXRyaWNzOmkubWV0cmljcyxwYWdlOmkucGFnZSxjb2RlOm99O2NvbnRpbnVlfWNvbnN0IGE9ci5nZXRHbHlwaChzLG8pO2lmKCFhPy5tZXRyaWNzKWNvbnRpbnVlO2NvbnN0IGw9YS5tZXRyaWNzO2xldCBjO2lmKDA9PT1sLndpZHRoKWM9bmV3IGUoMCwwLDAsMCk7ZWxzZXtjb25zdCBlPTMscz1sLndpZHRoKzIqZSxpPWwuaGVpZ2h0KzIqZTtsZXQgaD1zJTQ/NC1zJTQ6NCxyPWklND80LWklNDo0OzE9PT1oJiYoaD01KSwxPT09ciYmKHI9NSksYz10aGlzLl9iaW5QYWNrLmFsbG9jYXRlKHMraCxpK3IpLGMuaXNFbXB0eSYmKHRoaXMuX2RpcnRpZXNbdGhpcy5fY3VycmVudFBhZ2VdfHwodGhpcy5fZ2x5cGhEYXRhW3RoaXMuX2N1cnJlbnRQYWdlXT1udWxsKSx0aGlzLl9jdXJyZW50UGFnZT10aGlzLl9nbHlwaERhdGEubGVuZ3RoLHRoaXMuX2dseXBoRGF0YS5wdXNoKG5ldyBVaW50OEFycmF5KHRoaXMud2lkdGgqdGhpcy5oZWlnaHQpKSx0aGlzLl9kaXJ0aWVzLnB1c2goITApLHRoaXMuX3RleHR1cmVzLnB1c2godm9pZCAwKSx0aGlzLl9iaW5QYWNrPW5ldyB0KHRoaXMud2lkdGgtNCx0aGlzLmhlaWdodC00KSxjPXRoaXMuX2JpblBhY2suYWxsb2NhdGUocytoLGkrcikpO2NvbnN0IG49dGhpcy5fZ2x5cGhEYXRhW3RoaXMuX2N1cnJlbnRQYWdlXSxvPWEuYml0bWFwO2xldCBnLF87aWYobylmb3IobGV0IHQ9MDt0PGk7dCsrKXtnPXMqdCxfPXRoaXMud2lkdGgqKGMueSt0KzEpK2MueDtmb3IobGV0IHQ9MDt0PHM7dCsrKW5bXyt0KzFdPW8uYXQoZyt0KX19bltvXT17cmVjdDpjLG1ldHJpY3M6bCx0aWxlSURzOm51bGwscGFnZTp0aGlzLl9jdXJyZW50UGFnZX0saFtvXT17c2RmOiEwLHJlY3Q6YyxtZXRyaWNzOmwscGFnZTp0aGlzLl9jdXJyZW50UGFnZSxjb2RlOm99LHRoaXMuX2RpcnRpZXNbdGhpcy5fY3VycmVudFBhZ2VdPSEwfXJldHVybiBofSkpfXJlbW92ZUdseXBocyh0KXtmb3IoY29uc3QgZSBpbiB0aGlzLl9nbHlwaEluZGV4KXtjb25zdCBzPXRoaXMuX2dseXBoSW5kZXhbZV07aWYoIXMpY29udGludWU7bGV0IGk7Zm9yKGNvbnN0IGUgaW4gcylpZihpPXNbZV0saS50aWxlSURzLmRlbGV0ZSh0KSwwPT09aS50aWxlSURzLnNpemUpe2NvbnN0IHQ9dGhpcy5fZ2x5cGhEYXRhW2kucGFnZV0saD1pLnJlY3Q7bGV0IHIsbjtmb3IobGV0IGU9MDtlPGguaGVpZ2h0O2UrKylmb3Iocj10aGlzLndpZHRoKihoLnkrZSkraC54LG49MDtuPGgud2lkdGg7bisrKXRbcituXT0wO2RlbGV0ZSBzW2VdLHRoaXMuX2RpcnRpZXNbaS5wYWdlXT0hMH19fWJpbmQodCxlLG4sbz0wKXtpZighdGhpcy5fdGV4dHVyZXNbbl0pe2NvbnN0IGU9bmV3IHI7ZS5waXhlbEZvcm1hdD1zLkFMUEhBLGUud3JhcE1vZGU9aS5DTEFNUF9UT19FREdFLGUud2lkdGg9dGhpcy53aWR0aCxlLmhlaWdodD10aGlzLmhlaWdodCx0aGlzLl90ZXh0dXJlc1tuXT1uZXcgaCh0LGUsbmV3IFVpbnQ4QXJyYXkodGhpcy53aWR0aCp0aGlzLmhlaWdodCkpfWNvbnN0IGE9dGhpcy5fdGV4dHVyZXNbbl07YS5zZXRTYW1wbGluZ01vZGUoZSksdGhpcy5fZGlydGllc1tuXSYmYS5zZXREYXRhKHRoaXMuX2dseXBoRGF0YVtuXSksdC5iaW5kVGV4dHVyZShhLG8pLHRoaXMuX2RpcnRpZXNbbl09ITF9ZGVzdHJveSgpe3RoaXMuZGlzcG9zZSgpfWRpc3Bvc2UoKXt0aGlzLl9nbHlwaERhdGEubGVuZ3RoPTAsdGhpcy5fYmluUGFjaz1udWxsO2Zvcihjb25zdCB0IG9mIHRoaXMuX3RleHR1cmVzKXQmJnQuZGlzcG9zZSgpO3RoaXMuX3RleHR1cmVzLmxlbmd0aD0wfX1leHBvcnR7biBhcyBkZWZhdWx0fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnQgdCBmcm9tXCIuLi8uLi8uLi8uLi9yZXF1ZXN0LmpzXCI7aW1wb3J0IGUgZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9wYmYuanNcIjtjbGFzcyBze2NvbnN0cnVjdG9yKHQpe2lmKHRoaXMuX21ldHJpY3M9W10sIXQpcmV0dXJuIHZvaWQodGhpcy5fYWxsQml0bWFwcz1udWxsKTtjb25zdCBlPW5ldyBNYXA7bGV0IHM9MDtmb3IoO3QubmV4dCgpOylzd2l0Y2godC50YWcoKSl7Y2FzZSAxOntjb25zdCBhPXQuZ2V0TWVzc2FnZSgpO2Zvcig7YS5uZXh0KCk7KXN3aXRjaChhLnRhZygpKXtjYXNlIDM6e2NvbnN0IHQ9YS5nZXRNZXNzYWdlKCk7bGV0IHIsbixpLGMsbyxnLGg7Zm9yKDt0Lm5leHQoKTspc3dpdGNoKHQudGFnKCkpe2Nhc2UgMTpyPXQuZ2V0VUludDMyKCk7YnJlYWs7Y2FzZSAyOm49dC5nZXRCeXRlcygpO2JyZWFrO2Nhc2UgMzppPXQuZ2V0VUludDMyKCk7YnJlYWs7Y2FzZSA0OmM9dC5nZXRVSW50MzIoKTticmVhaztjYXNlIDU6bz10LmdldFNJbnQzMigpO2JyZWFrO2Nhc2UgNjpnPXQuZ2V0U0ludDMyKCk7YnJlYWs7Y2FzZSA3Omg9dC5nZXRVSW50MzIoKTticmVhaztkZWZhdWx0OnQuc2tpcCgpfWlmKHQucmVsZWFzZSgpLHIpe2NvbnN0IHQ9bj8ubGVuZ3RoPz8wO3RoaXMuX21ldHJpY3Nbcl09e3dpZHRoOmksaGVpZ2h0OmMsbGVmdDpvLHRvcDpnLGFkdmFuY2U6aCxzdGFydE9mZnNldDpzLGxlbmd0aDp0fSxlLnNldChyLG4pLHMrPXR9YnJlYWt9ZGVmYXVsdDphLnNraXAoKX1hLnJlbGVhc2UoKTticmVha31kZWZhdWx0OnQuc2tpcCgpfWNvbnN0IGE9bmV3IFVpbnQ4QXJyYXkocykscj10aGlzLl9tZXRyaWNzO2Zvcihjb25zdFtuLGldb2YgZSl7Y29uc3R7c3RhcnRPZmZzZXQ6dCxsZW5ndGg6ZX09cltuXTtpZihpKWZvcihsZXQgcz0wO3M8ZTsrK3MpYVt0K3NdPWlbc119dGhpcy5fYWxsQml0bWFwcz1hfWdldE1ldHJpY3ModCl7cmV0dXJuIHRoaXMuX21ldHJpY3NbdF19Z2V0Qml0bWFwKHQpe2lmKCF0aGlzLl9hbGxCaXRtYXBzKXJldHVybjtjb25zdCBlPXRoaXMuX21ldHJpY3NbdF07aWYodm9pZCAwPT09ZSlyZXR1cm47Y29uc3R7c3RhcnRPZmZzZXQ6cyxsZW5ndGg6YX09ZTtyZXR1cm4gMCE9PWE/bmV3IG4odGhpcy5fYWxsQml0bWFwcyxzLGEpOnZvaWQgMH19Y2xhc3MgYXtjb25zdHJ1Y3Rvcigpe3RoaXMuX3Jhbmdlcz1bXX1nZXQgcmFuZ2VzKCl7cmV0dXJuIHRoaXMuX3Jhbmdlc31nZXRSYW5nZSh0KXtyZXR1cm4gdGhpcy5fcmFuZ2VzW3RdfWFkZFJhbmdlKHQsZSl7dGhpcy5fcmFuZ2VzW3RdPWV9fWNsYXNzIHJ7Y29uc3RydWN0b3IodCl7dGhpcy5fZ2x5cGhJbmZvPXt9LHRoaXMuX2Jhc2VVUkw9dH1nZXRSYW5nZShhLHIpe2NvbnN0IG49dGhpcy5fZ2V0Rm9udFN0YWNrKGEpO2lmKG4uZ2V0UmFuZ2UocikpcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO2NvbnN0IGk9MjU2KnIsYz1pKzI1NTtpZih0aGlzLl9iYXNlVVJMKXtjb25zdCBvPXRoaXMuX2Jhc2VVUkwucmVwbGFjZShcIntmb250c3RhY2t9XCIsYSkucmVwbGFjZShcIntyYW5nZX1cIixpK1wiLVwiK2MpO3JldHVybiB0KG8se3Jlc3BvbnNlVHlwZTpcImFycmF5LWJ1ZmZlclwifSkudGhlbigodD0+e24uYWRkUmFuZ2UocixuZXcgcyhuZXcgZShuZXcgVWludDhBcnJheSh0LmRhdGEpLG5ldyBEYXRhVmlldyh0LmRhdGEpKSkpfSkpLmNhdGNoKCgoKT0+e24uYWRkUmFuZ2UocixuZXcgcyl9KSl9cmV0dXJuIG4uYWRkUmFuZ2UocixuZXcgcyksUHJvbWlzZS5yZXNvbHZlKCl9Z2V0R2x5cGgodCxlKXtjb25zdCBzPXRoaXMuX2dldEZvbnRTdGFjayh0KTtpZighcylyZXR1cm47Y29uc3QgYT1NYXRoLmZsb29yKGUvMjU2KSxyPXMuZ2V0UmFuZ2UoYSk7cmV0dXJuIHI/e21ldHJpY3M6ci5nZXRNZXRyaWNzKGUpLGJpdG1hcDpyLmdldEJpdG1hcChlKX06dm9pZCAwfV9nZXRGb250U3RhY2sodCl7bGV0IGU9dGhpcy5fZ2x5cGhJbmZvW3RdO3JldHVybiBlfHwoZT10aGlzLl9nbHlwaEluZm9bdF09bmV3IGEpLGV9fWNsYXNzIG57Y29uc3RydWN0b3IodCxlLHMpe3RoaXMuX2FycmF5PXQsdGhpcy5fc3RhcnQ9ZSx0aGlzLmxlbmd0aD1zfWF0KHQpe3JldHVybiAwPD10JiZ0PHRoaXMubGVuZ3RoP3RoaXMuX2FycmF5W3RoaXMuX3N0YXJ0K3RdOnZvaWQgMH19ZXhwb3J0e3IgYXMgZGVmYXVsdH07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0IGggZnJvbVwiLi4vd2ViZ2wvUmVjdC5qc1wiO2NsYXNzIGV7Y29uc3RydWN0b3IoZSx0KXt0aGlzLl93aWR0aD0wLHRoaXMuX2hlaWdodD0wLHRoaXMuX2ZyZWU9W10sdGhpcy5fd2lkdGg9ZSx0aGlzLl9oZWlnaHQ9dCx0aGlzLl9mcmVlLnB1c2gobmV3IGgoMCwwLGUsdCkpfWdldCB3aWR0aCgpe3JldHVybiB0aGlzLl93aWR0aH1nZXQgaGVpZ2h0KCl7cmV0dXJuIHRoaXMuX2hlaWdodH1hbGxvY2F0ZShlLHQpe2lmKGU+dGhpcy5fd2lkdGh8fHQ+dGhpcy5faGVpZ2h0KXJldHVybiBuZXcgaDtsZXQgaT1udWxsLHM9LTE7Zm9yKGxldCBoPTA7aDx0aGlzLl9mcmVlLmxlbmd0aDsrK2gpe2NvbnN0IHc9dGhpcy5fZnJlZVtoXTtlPD13LndpZHRoJiZ0PD13LmhlaWdodCYmKG51bGw9PT1pfHx3Lnk8PWkueSYmdy54PD1pLngpJiYoaT13LHM9aCl9cmV0dXJuIG51bGw9PT1pP25ldyBoOih0aGlzLl9mcmVlLnNwbGljZShzLDEpLGkud2lkdGg8aS5oZWlnaHQ/KGkud2lkdGg+ZSYmdGhpcy5fZnJlZS5wdXNoKG5ldyBoKGkueCtlLGkueSxpLndpZHRoLWUsdCkpLGkuaGVpZ2h0PnQmJnRoaXMuX2ZyZWUucHVzaChuZXcgaChpLngsaS55K3QsaS53aWR0aCxpLmhlaWdodC10KSkpOihpLndpZHRoPmUmJnRoaXMuX2ZyZWUucHVzaChuZXcgaChpLngrZSxpLnksaS53aWR0aC1lLGkuaGVpZ2h0KSksaS5oZWlnaHQ+dCYmdGhpcy5fZnJlZS5wdXNoKG5ldyBoKGkueCxpLnkrdCxlLGkuaGVpZ2h0LXQpKSksbmV3IGgoaS54LGkueSxlLHQpKX1yZWxlYXNlKGgpe2ZvcihsZXQgZT0wO2U8dGhpcy5fZnJlZS5sZW5ndGg7KytlKXtjb25zdCB0PXRoaXMuX2ZyZWVbZV07aWYodC55PT09aC55JiZ0LmhlaWdodD09PWguaGVpZ2h0JiZ0LngrdC53aWR0aD09PWgueCl0LndpZHRoKz1oLndpZHRoO2Vsc2UgaWYodC54PT09aC54JiZ0LndpZHRoPT09aC53aWR0aCYmdC55K3QuaGVpZ2h0PT09aC55KXQuaGVpZ2h0Kz1oLmhlaWdodDtlbHNlIGlmKGgueT09PXQueSYmaC5oZWlnaHQ9PT10LmhlaWdodCYmaC54K2gud2lkdGg9PT10LngpdC54PWgueCx0LndpZHRoKz1oLndpZHRoO2Vsc2V7aWYoaC54IT09dC54fHxoLndpZHRoIT09dC53aWR0aHx8aC55K2guaGVpZ2h0IT09dC55KWNvbnRpbnVlO3QueT1oLnksdC5oZWlnaHQrPWguaGVpZ2h0fXRoaXMuX2ZyZWUuc3BsaWNlKGUsMSksdGhpcy5yZWxlYXNlKGgpfXRoaXMuX2ZyZWUucHVzaChoKX19ZXhwb3J0e2UgYXMgZGVmYXVsdH07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e3Jhc3Rlcml6ZURhc2ggYXMgdH1mcm9tXCIuLi8uLi8uLi8uLi9zeW1ib2xzL2NpbS9yYXN0ZXJpemluZ1V0aWxzLmpzXCI7aW1wb3J0IGkgZnJvbVwiLi9SZWN0YW5nbGVCaW5QYWNrLmpzXCI7aW1wb3J0IGUgZnJvbVwiLi4vd2ViZ2wvUmVjdC5qc1wiO2ltcG9ydHtUZXh0dXJlV3JhcE1vZGUgYXMgc31mcm9tXCIuLi8uLi8uLi93ZWJnbC9lbnVtcy5qc1wiO2ltcG9ydHtUZXh0dXJlIGFzIGh9ZnJvbVwiLi4vLi4vLi4vd2ViZ2wvVGV4dHVyZS5qc1wiO2ltcG9ydHtUZXh0dXJlRGVzY3JpcHRvciBhcyBhfWZyb21cIi4uLy4uLy4uL3dlYmdsL1RleHR1cmVEZXNjcmlwdG9yLmpzXCI7Y29uc3Qgcj1cImRhc2hhcnJheS1cIjtjbGFzcyBve2NvbnN0cnVjdG9yKHQsZSxzPTApe3RoaXMuX3NpemU9W10sdGhpcy5fbW9zYWljc0RhdGE9W10sdGhpcy5fdGV4dHVyZXM9W10sdGhpcy5fZGlydGllcz1bXSx0aGlzLl9tYXhJdGVtU2l6ZT0wLHRoaXMuX2N1cnJlbnRQYWdlPTAsdGhpcy5fcGFnZVdpZHRoPTAsdGhpcy5fcGFnZUhlaWdodD0wLHRoaXMuX21vc2FpY1JlY3RzPXt9LHRoaXMucGl4ZWxSYXRpbz0xLCh0PD0wfHxlPD0wKSYmY29uc29sZS5lcnJvcihcIlNwcml0ZXMgbW9zYWljIGRlZmF1bHRXaWR0aCBhbmQgZGVmYXVsdEhlaWdodCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiB6ZXJvIVwiKSx0aGlzLl9wYWdlV2lkdGg9dCx0aGlzLl9wYWdlSGVpZ2h0PWUscz4wJiYodGhpcy5fbWF4SXRlbVNpemU9cyksdGhpcy5fYmluUGFjaz1uZXcgaSh0LTQsZS00KX1kZXN0cm95KCl7dGhpcy5kaXNwb3NlKCl9ZGlzcG9zZSgpe3RoaXMuX2JpblBhY2s9bnVsbCx0aGlzLl9tb3NhaWNzRGF0YS5sZW5ndGg9MCx0aGlzLl9tb3NhaWNSZWN0cz17fTtmb3IoY29uc3QgdCBvZiB0aGlzLl90ZXh0dXJlcyl0JiZ0LmRpc3Bvc2UoKTt0aGlzLl90ZXh0dXJlcy5sZW5ndGg9MH1nZXRXaWR0aCh0KXtyZXR1cm4gdD49dGhpcy5fc2l6ZS5sZW5ndGg/LTE6dGhpcy5fc2l6ZVt0XVswXX1nZXRIZWlnaHQodCl7cmV0dXJuIHQ+PXRoaXMuX3NpemUubGVuZ3RoPy0xOnRoaXMuX3NpemVbdF1bMV19Z2V0UGFnZVNpemUodCl7cmV0dXJuIHQ+PXRoaXMuX3NpemUubGVuZ3RoP251bGw6dGhpcy5fc2l6ZVt0XX1zZXRTcHJpdGVTb3VyY2UodCl7aWYodGhpcy5kaXNwb3NlKCksdGhpcy5waXhlbFJhdGlvPXQuZGV2aWNlUGl4ZWxSYXRpbywwPT09dGhpcy5fbW9zYWljc0RhdGEubGVuZ3RoKXt0aGlzLl9iaW5QYWNrPW5ldyBpKHRoaXMuX3BhZ2VXaWR0aC00LHRoaXMuX3BhZ2VIZWlnaHQtNCk7Y29uc3QgdD1NYXRoLmZsb29yKHRoaXMuX3BhZ2VXaWR0aCksZT1NYXRoLmZsb29yKHRoaXMuX3BhZ2VIZWlnaHQpLHM9bmV3IFVpbnQzMkFycmF5KHQqZSk7dGhpcy5fbW9zYWljc0RhdGFbMF09cyx0aGlzLl9kaXJ0aWVzLnB1c2goITApLHRoaXMuX3NpemUucHVzaChbdGhpcy5fcGFnZVdpZHRoLHRoaXMuX3BhZ2VIZWlnaHRdKSx0aGlzLl90ZXh0dXJlcy5wdXNoKHZvaWQgMCl9dGhpcy5fc3ByaXRlcz10fWdldFNwcml0ZUl0ZW0odCxpPSExKXtsZXQgZSxzLGg9dGhpcy5fbW9zYWljUmVjdHNbdF07aWYoaClyZXR1cm4gaDtpZighdGhpcy5fc3ByaXRlc3x8XCJsb2FkZWRcIiE9PXRoaXMuX3Nwcml0ZXMubG9hZFN0YXR1cylyZXR1cm4gbnVsbDtpZih0JiZ0LnN0YXJ0c1dpdGgocik/KFtlLHNdPXRoaXMuX3Jhc3Rlcml6ZURhc2godCksaT0hMCk6ZT10aGlzLl9zcHJpdGVzLmdldFNwcml0ZUluZm8odCksIWU/LndpZHRofHwhZS5oZWlnaHR8fGUud2lkdGg8MHx8ZS5oZWlnaHQ8MClyZXR1cm4gbnVsbDtjb25zdCBhPWUud2lkdGgsbz1lLmhlaWdodCxbbixfLGddPXRoaXMuX2FsbG9jYXRlSW1hZ2UoYSxvKTtyZXR1cm4gbi53aWR0aDw9MD9udWxsOih0aGlzLl9jb3B5KG4sZSxfLGcsaSxzKSxoPXtyZWN0Om4sd2lkdGg6YSxoZWlnaHQ6byxzZGY6ZS5zZGYsc2ltcGxlUGF0dGVybjohMSxwaXhlbFJhdGlvOmUucGl4ZWxSYXRpbyxwYWdlOl99LHRoaXMuX21vc2FpY1JlY3RzW3RdPWgsaCl9Z2V0U3ByaXRlSXRlbXModCl7Y29uc3QgaT17fTtmb3IoY29uc3QgZSBvZiB0KWlbZS5uYW1lXT10aGlzLmdldFNwcml0ZUl0ZW0oZS5uYW1lLGUucmVwZWF0KTtyZXR1cm4gaX1nZXRNb3NhaWNJdGVtUG9zaXRpb24odCxpKXtjb25zdCBlPXRoaXMuZ2V0U3ByaXRlSXRlbSh0LGkpLHM9ZSYmZS5yZWN0O2lmKCFzKXJldHVybiBudWxsO3Mud2lkdGg9ZS53aWR0aCxzLmhlaWdodD1lLmhlaWdodDtjb25zdCBoPWUud2lkdGgsYT1lLmhlaWdodCxyPTI7cmV0dXJue3RsOltzLngrcixzLnkrcl0sYnI6W3MueCtyK2gscy55K3IrYV0scGFnZTplLnBhZ2V9fWJpbmQodCxpLGU9MCxyPTApe2lmKGU+PXRoaXMuX3NpemUubGVuZ3RofHxlPj10aGlzLl9tb3NhaWNzRGF0YS5sZW5ndGgpcmV0dXJuO2lmKCF0aGlzLl90ZXh0dXJlc1tlXSl7Y29uc3QgaT1uZXcgYTtpLndyYXBNb2RlPXMuQ0xBTVBfVE9fRURHRSxpLndpZHRoPXRoaXMuX3NpemVbZV1bMF0saS5oZWlnaHQ9dGhpcy5fc2l6ZVtlXVsxXSx0aGlzLl90ZXh0dXJlc1tlXT1uZXcgaCh0LGksbmV3IFVpbnQ4QXJyYXkodGhpcy5fbW9zYWljc0RhdGFbZV0uYnVmZmVyKSl9Y29uc3Qgbz10aGlzLl90ZXh0dXJlc1tlXTtvLnNldFNhbXBsaW5nTW9kZShpKSx0aGlzLl9kaXJ0aWVzW2VdJiZvLnNldERhdGEobmV3IFVpbnQ4QXJyYXkodGhpcy5fbW9zYWljc0RhdGFbZV0uYnVmZmVyKSksdC5iaW5kVGV4dHVyZShvLHIpLHRoaXMuX2RpcnRpZXNbZV09ITF9c3RhdGljIF9jb3B5Qml0cyh0LGksZSxzLGgsYSxyLG8sbixfLGcpe2xldCBjPXMqaStlLGw9byphK3I7aWYoZyl7bC09YTtmb3IobGV0IHI9LTE7cjw9XztyKyssYz0oKHIrXyklXytzKSppK2UsbCs9YSlmb3IobGV0IGk9LTE7aTw9bjtpKyspaFtsK2ldPXRbYysoaStuKSVuXX1lbHNlIGZvcihsZXQgcD0wO3A8XztwKyspe2ZvcihsZXQgaT0wO2k8bjtpKyspaFtsK2ldPXRbYytpXTtjKz1pLGwrPWF9fV9jb3B5KHQsaSxlLHMsaCxhKXtpZighdGhpcy5fc3ByaXRlc3x8XCJsb2FkZWRcIiE9PXRoaXMuX3Nwcml0ZXMubG9hZFN0YXR1c3x8ZT49dGhpcy5fbW9zYWljc0RhdGEubGVuZ3RoKXJldHVybjtjb25zdCByPW5ldyBVaW50MzJBcnJheShhP2EuYnVmZmVyOnRoaXMuX3Nwcml0ZXMuaW1hZ2UuYnVmZmVyKSxuPXRoaXMuX21vc2FpY3NEYXRhW2VdO24mJnJ8fGNvbnNvbGUuZXJyb3IoXCJTb3VyY2Ugb3IgdGFyZ2V0IGltYWdlcyBhcmUgdW5pbml0aWFsaXplZCFcIik7Y29uc3QgXz0yLGc9YT9pLndpZHRoOnRoaXMuX3Nwcml0ZXMud2lkdGg7by5fY29weUJpdHMocixnLGkueCxpLnksbixzWzBdLHQueCtfLHQueStfLGkud2lkdGgsaS5oZWlnaHQsaCksdGhpcy5fZGlydGllc1tlXT0hMH1fYWxsb2NhdGVJbWFnZSh0LHMpe3QrPTIscys9Mjtjb25zdCBoPU1hdGgubWF4KHQscyk7aWYodGhpcy5fbWF4SXRlbVNpemUmJnRoaXMuX21heEl0ZW1TaXplPGgpe2NvbnN0IGk9bmV3IGUoMCwwLHQscyk7cmV0dXJuIHRoaXMuX21vc2FpY3NEYXRhLnB1c2gobmV3IFVpbnQzMkFycmF5KHQqcykpLHRoaXMuX2RpcnRpZXMucHVzaCghMCksdGhpcy5fc2l6ZS5wdXNoKFt0LHNdKSx0aGlzLl90ZXh0dXJlcy5wdXNoKHZvaWQgMCksW2ksdGhpcy5fbW9zYWljc0RhdGEubGVuZ3RoLTEsW3Qsc11dfWxldCBhPXQlND80LXQlNDo0LHI9cyU0PzQtcyU0OjQ7MT09PWEmJihhPTUpLDE9PT1yJiYocj01KTtjb25zdCBvPXRoaXMuX2JpblBhY2suYWxsb2NhdGUodCthLHMrcik7cmV0dXJuIG8ud2lkdGg8PTA/KHRoaXMuX2RpcnRpZXNbdGhpcy5fY3VycmVudFBhZ2VdfHwodGhpcy5fbW9zYWljc0RhdGFbdGhpcy5fY3VycmVudFBhZ2VdPW51bGwpLHRoaXMuX2N1cnJlbnRQYWdlPXRoaXMuX21vc2FpY3NEYXRhLmxlbmd0aCx0aGlzLl9tb3NhaWNzRGF0YS5wdXNoKG5ldyBVaW50MzJBcnJheSh0aGlzLl9wYWdlV2lkdGgqdGhpcy5fcGFnZUhlaWdodCkpLHRoaXMuX2RpcnRpZXMucHVzaCghMCksdGhpcy5fc2l6ZS5wdXNoKFt0aGlzLl9wYWdlV2lkdGgsdGhpcy5fcGFnZUhlaWdodF0pLHRoaXMuX3RleHR1cmVzLnB1c2godm9pZCAwKSx0aGlzLl9iaW5QYWNrPW5ldyBpKHRoaXMuX3BhZ2VXaWR0aC00LHRoaXMuX3BhZ2VIZWlnaHQtNCksdGhpcy5fYWxsb2NhdGVJbWFnZSh0LHMpKTpbbyx0aGlzLl9jdXJyZW50UGFnZSxbdGhpcy5fcGFnZVdpZHRoLHRoaXMuX3BhZ2VIZWlnaHRdXX1fcmFzdGVyaXplRGFzaChpKXtjb25zdCBlPS9cXFsoLio/KVxcXS8scz1pLm1hdGNoKGUpO2lmKCFzKXJldHVybiBudWxsO2NvbnN0IGg9c1sxXS5zcGxpdChcIixcIikubWFwKE51bWJlciksYT1pLnNsaWNlKGkubGFzdEluZGV4T2YoXCItXCIpKzEpLFtyLG8sbl09dChoLGEpO3JldHVyblt7eDowLHk6MCx3aWR0aDpvLGhlaWdodDpuLHNkZjohMCxwaXhlbFJhdGlvOjF9LG5ldyBVaW50OEFycmF5KHIuYnVmZmVyKV19fWV4cG9ydHtvIGFzIGRlZmF1bHR9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHthYm9ydE1heWJlIGFzIHR9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9tYXliZS5qc1wiO2ltcG9ydHt0aHJvd0lmTm90QWJvcnRFcnJvciBhcyBlLHRocm93SWZBYm9ydEVycm9yIGFzIHMsaXNBYm9ydEVycm9yIGFzIHJ9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9wcm9taXNlVXRpbHMuanNcIjtpbXBvcnR7YWRkUXVlcnlQYXJhbWV0ZXJzIGFzIGl9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS91cmxVdGlscy5qc1wiO2ltcG9ydHtvcGVuIGFzIG99ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS93b3JrZXJzL3dvcmtlcnMuanNcIjtpbXBvcnQgbiBmcm9tXCIuL0dseXBoTW9zYWljLmpzXCI7aW1wb3J0IGwgZnJvbVwiLi9HbHlwaFNvdXJjZS5qc1wiO2ltcG9ydCBhIGZyb21cIi4vU3ByaXRlTW9zYWljLmpzXCI7aW1wb3J0IGMgZnJvbVwiLi4vLi4vdGlsaW5nL1RpbGVLZXkuanNcIjtjbGFzcyB1e2NvbnN0cnVjdG9yKHQsZSxzKXt0aGlzLl9sYXllcj10LHRoaXMuX3N0eWxlUmVwb3NpdG9yeT1lLHRoaXMuZGV2aWNlUGl4ZWxSYXRpbz1zLHRoaXMuX3Nwcml0ZU1vc2FpYz1udWxsLHRoaXMuX2dseXBoTW9zYWljPW51bGwsdGhpcy5fY29ubmVjdGlvbj1udWxsLHRoaXMuX3Nwcml0ZVNvdXJjZUFib3J0Q29udHJvbGxlcj1udWxsLHRoaXMuX3N0YXJ0T3B0aW9uc0lucHV0U2lnbmFsPW51bGwsdGhpcy5faW5wdXRTaWduYWxFdmVudExpc3RlbmVyPW51bGx9ZGVzdHJveSgpe3RoaXMuX2Nvbm5lY3Rpb24/LmNsb3NlKCksdGhpcy5fY29ubmVjdGlvbj1udWxsLHRoaXMuX3N0eWxlUmVwb3NpdG9yeT1udWxsLHRoaXMuX2xheWVyPW51bGwsdGhpcy5fc3ByaXRlTW9zYWljPy5kZXN0cm95KCksdGhpcy5fc3ByaXRlTW9zYWljPW51bGwsdGhpcy5fZ2x5cGhNb3NhaWM9bnVsbCx0aGlzLl9zcHJpdGVTb3VyY2VBYm9ydENvbnRyb2xsZXI9dCh0aGlzLl9zcHJpdGVTb3VyY2VBYm9ydENvbnRyb2xsZXIpLHRoaXMuX3Nwcml0ZVNvdXJjZVByb21pc2U9bnVsbCx0aGlzLl9pbnB1dFNpZ25hbEV2ZW50TGlzdGVuZXImJnRoaXMuX3N0YXJ0T3B0aW9uc0lucHV0U2lnbmFsPy5yZW1vdmVFdmVudExpc3RlbmVyKFwiYWJvcnRcIix0aGlzLl9pbnB1dFNpZ25hbEV2ZW50TGlzdGVuZXIpLHRoaXMuX3N0YXJ0T3B0aW9uc0lucHV0U2lnbmFsPW51bGwsdGhpcy5faW5wdXRTaWduYWxFdmVudExpc3RlbmVyPW51bGx9Z2V0IHNwcml0ZU1vc2FpYygpe3JldHVybiB0aGlzLl9zcHJpdGVTb3VyY2VQcm9taXNlLnRoZW4oKCgpPT50aGlzLl9zcHJpdGVNb3NhaWMpKX1nZXQgZ2x5cGhNb3NhaWMoKXtyZXR1cm4gdGhpcy5fZ2x5cGhNb3NhaWN9YXN5bmMgc3RhcnQodCl7dGhpcy5fcmVxdWVzdFNwcml0ZSh0KTtjb25zdCBzPXRoaXMuX2xheWVyLmN1cnJlbnRTdHlsZUluZm8uZ2x5cGhzVXJsLHI9bmV3IGwocz9pKHMsey4uLnRoaXMuX2xheWVyLmN1c3RvbVBhcmFtZXRlcnMsdG9rZW46dGhpcy5fbGF5ZXIuYXBpS2V5fSk6bnVsbCk7dGhpcy5fZ2x5cGhNb3NhaWM9bmV3IG4oMTAyNCwxMDI0LHIpLHRoaXMuX2Jyb2FkY2FzdFByb21pc2U9byhcIldvcmtlclRpbGVIYW5kbGVyXCIse2NsaWVudDp0aGlzLHNjaGVkdWxlOnQuc2NoZWR1bGUsc2lnbmFsOnQuc2lnbmFsfSkudGhlbigocz0+e2lmKHRoaXMuX2xheWVyJiYodGhpcy5fY29ubmVjdGlvbj8uY2xvc2UoKSx0aGlzLl9jb25uZWN0aW9uPXMsdGhpcy5fbGF5ZXImJiF0aGlzLl9jb25uZWN0aW9uLmNsb3NlZCkpe2NvbnN0IHI9cy5icm9hZGNhc3QoXCJzZXRTdHlsZVwiLHRoaXMuX2xheWVyLmN1cnJlbnRTdHlsZUluZm8uc3R5bGUsdCk7UHJvbWlzZS5hbGwocikuY2F0Y2goKHQ9PmUodCkpKX19KSl9X3JlcXVlc3RTcHJpdGUodCl7dGhpcy5fc3ByaXRlU291cmNlQWJvcnRDb250cm9sbGVyPy5hYm9ydCgpO2NvbnN0IGU9bmV3IEFib3J0Q29udHJvbGxlcjt0aGlzLl9zcHJpdGVTb3VyY2VBYm9ydENvbnRyb2xsZXI9ZTtjb25zdCByPXQ/LnNpZ25hbDt0aGlzLl9pbnB1dFNpZ25hbEV2ZW50TGlzdGVuZXImJnRoaXMuX3N0YXJ0T3B0aW9uc0lucHV0U2lnbmFsPy5yZW1vdmVFdmVudExpc3RlbmVyKFwiYWJvcnRcIix0aGlzLl9pbnB1dFNpZ25hbEV2ZW50TGlzdGVuZXIpLHRoaXMuX3N0YXJ0T3B0aW9uc0lucHV0U2lnbmFsPW51bGwsciYmKHRoaXMuX2lucHV0U2lnbmFsRXZlbnRMaXN0ZW5lcj1oKGUpLHIuYWRkRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsdGhpcy5faW5wdXRTaWduYWxFdmVudExpc3RlbmVyLHtvbmNlOiEwfSkpO2NvbnN0e3NpZ25hbDppfT1lLG89ey4uLnQsc2lnbmFsOml9O3RoaXMuX3Nwcml0ZVNvdXJjZVByb21pc2U9dGhpcy5fbGF5ZXIubG9hZFNwcml0ZVNvdXJjZSh0aGlzLmRldmljZVBpeGVsUmF0aW8sbyksdGhpcy5fc3ByaXRlU291cmNlUHJvbWlzZS50aGVuKCh0PT57cyhpKSx0aGlzLl9zcHJpdGVNb3NhaWM9bmV3IGEoMTAyNCwxMDI0LDI1MCksdGhpcy5fc3ByaXRlTW9zYWljLnNldFNwcml0ZVNvdXJjZSh0KX0pKX1hc3luYyB1cGRhdGVTdHlsZSh0KXtyZXR1cm4gYXdhaXQgdGhpcy5fYnJvYWRjYXN0UHJvbWlzZSx0aGlzLl9icm9hZGNhc3RQcm9taXNlPVByb21pc2UuYWxsKHRoaXMuX2Nvbm5lY3Rpb24uYnJvYWRjYXN0KFwidXBkYXRlU3R5bGVcIix0KSksdGhpcy5fYnJvYWRjYXN0UHJvbWlzZX1zZXRTcHJpdGVTb3VyY2UodCl7Y29uc3QgZT1uZXcgYSgxMDI0LDEwMjQsMjUwKTtyZXR1cm4gZS5zZXRTcHJpdGVTb3VyY2UodCksdGhpcy5fc3ByaXRlTW9zYWljPWUsdGhpcy5fc3ByaXRlU291cmNlUHJvbWlzZT1Qcm9taXNlLnJlc29sdmUodCksdGhpcy5fc3ByaXRlU291cmNlQWJvcnRDb250cm9sbGVyPW51bGwsZX1hc3luYyBzZXRTdHlsZSh0LGUpe2F3YWl0IHRoaXMuX2Jyb2FkY2FzdFByb21pc2UsdGhpcy5fc3R5bGVSZXBvc2l0b3J5PXQsdGhpcy5fcmVxdWVzdFNwcml0ZSgpO2NvbnN0IHM9bmV3IGwodGhpcy5fbGF5ZXIuY3VycmVudFN0eWxlSW5mby5nbHlwaHNVcmw/aSh0aGlzLl9sYXllci5jdXJyZW50U3R5bGVJbmZvLmdseXBoc1VybCx7Li4udGhpcy5fbGF5ZXIuY3VzdG9tUGFyYW1ldGVycyx0b2tlbjp0aGlzLl9sYXllci5hcGlLZXl9KTpudWxsKTtyZXR1cm4gdGhpcy5fZ2x5cGhNb3NhaWM9bmV3IG4oMTAyNCwxMDI0LHMpLHRoaXMuX2Jyb2FkY2FzdFByb21pc2U9UHJvbWlzZS5hbGwodGhpcy5fY29ubmVjdGlvbi5icm9hZGNhc3QoXCJzZXRTdHlsZVwiLGUpKSx0aGlzLl9icm9hZGNhc3RQcm9taXNlfWZldGNoVGlsZURhdGEodCxlKXtyZXR1cm4gdGhpcy5fZ2V0UmVmS2V5cyh0LGUpLnRoZW4oKHQ9Pntjb25zdCBzPXRoaXMuX2xheWVyLnNvdXJjZU5hbWVUb1NvdXJjZSxyPVtdO2Zvcihjb25zdCBlIGluIHMpci5wdXNoKGUpO3JldHVybiB0aGlzLl9nZXRTb3VyY2VzRGF0YShyLHQsZSl9KSl9cGFyc2VUaWxlRGF0YSh0LGUpe2NvbnN0IHM9dCYmdC5kYXRhO2lmKCFzKXJldHVybiBQcm9taXNlLnJlc29sdmUobnVsbCk7Y29uc3R7c291cmNlTmFtZTJEYXRhQW5kUmVmS2V5OnIsdHJhbnNmZXJMaXN0Oml9PXM7cmV0dXJuIDA9PT1PYmplY3Qua2V5cyhyKS5sZW5ndGg/UHJvbWlzZS5yZXNvbHZlKG51bGwpOnRoaXMuX2Jyb2FkY2FzdFByb21pc2UudGhlbigoKCk9PnRoaXMuX2Nvbm5lY3Rpb24uaW52b2tlKFwiY3JlYXRlVGlsZUFuZFBhcnNlXCIse2tleTp0LmtleS5pZCxzb3VyY2VOYW1lMkRhdGFBbmRSZWZLZXk6cixzdHlsZUxheWVyVUlEczp0LnN0eWxlTGF5ZXJVSURzfSx7Li4uZSx0cmFuc2Zlckxpc3Q6aX0pKSl9YXN5bmMgZ2V0U3ByaXRlcyh0KXtyZXR1cm4gYXdhaXQgdGhpcy5fc3ByaXRlU291cmNlUHJvbWlzZSx0aGlzLl9zcHJpdGVNb3NhaWMuZ2V0U3ByaXRlSXRlbXModCl9Z2V0R2x5cGhzKHQpe3JldHVybiB0aGlzLl9nbHlwaE1vc2FpYy5nZXRHbHlwaEl0ZW1zKHQuZm9udCx0LmNvZGVQb2ludHMpfWFzeW5jIF9nZXRUaWxlUGF5bG9hZCh0LGUscyl7Y29uc3QgaT1jLnBvb2wuYWNxdWlyZSh0LmlkKSxvPXRoaXMuX2xheWVyLnNvdXJjZU5hbWVUb1NvdXJjZVtlXSx7bGV2ZWw6bixyb3c6bCxjb2w6YX09aTtjLnBvb2wucmVsZWFzZShpKTt0cnl7cmV0dXJue3Byb3RvYnVmZjphd2FpdCBvLnJlcXVlc3RUaWxlKG4sbCxhLHMpLHNvdXJjZU5hbWU6ZX19Y2F0Y2godSl7aWYocih1KSl0aHJvdyB1O3JldHVybntwcm90b2J1ZmY6bnVsbCxzb3VyY2VOYW1lOmV9fX1fZ2V0UmVmS2V5cyh0LGUpe2NvbnN0IHM9dGhpcy5fbGF5ZXIuc291cmNlTmFtZVRvU291cmNlLHI9bmV3IEFycmF5O2Zvcihjb25zdCBpIGluIHMpe2NvbnN0IG89c1tpXS5nZXRSZWZLZXkodCxlKTtyLnB1c2gobyl9cmV0dXJuIFByb21pc2UuYWxsU2V0dGxlZChyKX1fZ2V0U291cmNlc0RhdGEodCxlLHMpe2NvbnN0IHI9W107Zm9yKGxldCBpPTA7aTxlLmxlbmd0aDtpKyspe2NvbnN0IG89ZVtpXSxuPVwiZnVsZmlsbGVkXCI9PT1vLnN0YXR1cz9vLnZhbHVlOm51bGw7aWYobnVsbD09bnx8bnVsbD09dFtpXSlyLnB1c2gobnVsbCk7ZWxzZXtjb25zdCBlPXRoaXMuX2dldFRpbGVQYXlsb2FkKG4sdFtpXSxzKTtyLnB1c2goZSl9fXJldHVybiBQcm9taXNlLmFsbFNldHRsZWQocikudGhlbigodD0+e2NvbnN0IHM9e30scj1bXTtmb3IobGV0IGk9MDtpPHQubGVuZ3RoO2krKyl7Y29uc3Qgbz10W2ldLG49XCJmdWxmaWxsZWRcIj09PW8uc3RhdHVzP28udmFsdWU6bnVsbCxsPW4/LnByb3RvYnVmZjtpZighbnx8IWw/LmJ5dGVMZW5ndGgpY29udGludWU7Y29uc3QgYT1lW2ldLGM9XCJmdWxmaWxsZWRcIj09PWEuc3RhdHVzP2EudmFsdWU6bnVsbDtpZihjKXtjb25zdCB0PWMuaWQ7c1tuLnNvdXJjZU5hbWVdPXtyZWZLZXk6dCxwcm90b2J1ZmY6bH0sci5wdXNoKGwpfX1yZXR1cm57c291cmNlTmFtZTJEYXRhQW5kUmVmS2V5OnMsdHJhbnNmZXJMaXN0OnJ9fSkpfX1mdW5jdGlvbiBoKHQpe3JldHVybigpPT50LmFib3J0KCl9ZXhwb3J0e3UgYXMgVGlsZUhhbmRsZXJ9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtmYWRlRHVyYXRpb24gYXMgb31mcm9tXCIuL2NvbmZpZy5qc1wiO2Z1bmN0aW9uIHQobyx0KXtpZihvLnByaW9yaXR5LXQucHJpb3JpdHkpcmV0dXJuIG8ucHJpb3JpdHktdC5wcmlvcml0eTtjb25zdCBlPW8udGlsZS5rZXksaT10LnRpbGUua2V5O3JldHVybiBlLndvcmxkLWkud29ybGQ/ZS53b3JsZC1pLndvcmxkOmUubGV2ZWwtaS5sZXZlbD9lLmxldmVsLWkubGV2ZWw6ZS5yb3ctaS5yb3c/ZS5yb3ctaS5yb3c6ZS5jb2wtaS5jb2w/ZS5jb2wtaS5jb2w6by54VGlsZS10LnhUaWxlP28ueFRpbGUtdC54VGlsZTpvLnlUaWxlLXQueVRpbGV9Y2xhc3MgZXtnZXQgcnVubmluZygpe3JldHVybiB0aGlzLl9ydW5uaW5nfWNvbnN0cnVjdG9yKG8sdCxlLGkscyxuKXt0aGlzLl92aXNpYmxlVGlsZXM9byx0aGlzLl9zeW1ib2xSZXBvc2l0b3J5PXQsdGhpcy5fY3JlYXRlQ29sbGlzaW9uSm9iPWUsdGhpcy5fYXNzaWduVGlsZVN5bWJvbHNPcGFjaXR5PWksdGhpcy5fc3ltYm9sTGF5ZXJTb3J0ZXI9cyx0aGlzLl9pc0xheWVyVmlzaWJsZT1uLHRoaXMuX3NlbGVjdGlvbkpvYj1udWxsLHRoaXMuX3NlbGVjdGlvbkpvYkNvbXBsZXRlZD0hMSx0aGlzLl9jb2xsaXNpb25Kb2I9bnVsbCx0aGlzLl9jb2xsaXNpb25Kb2JDb21wbGV0ZWQ9ITEsdGhpcy5fb3BhY2l0eUpvYj1udWxsLHRoaXMuX29wYWNpdHlKb2JDb21wbGV0ZWQ9ITEsdGhpcy5fcnVubmluZz0hMH1zZXRTY3JlZW5TaXplKG8sdCl7dGhpcy5fc2NyZWVuV2lkdGg9PT1vJiZ0aGlzLl9zY3JlZW5IZWlnaHQ9PT10fHx0aGlzLnJlc3RhcnQoKSx0aGlzLl9zY3JlZW5XaWR0aD1vLHRoaXMuX3NjcmVlbkhlaWdodD10fXJlc3RhcnQoKXt0aGlzLl9zZWxlY3Rpb25Kb2I9bnVsbCx0aGlzLl9zZWxlY3Rpb25Kb2JDb21wbGV0ZWQ9ITEsdGhpcy5fY29sbGlzaW9uSm9iPW51bGwsdGhpcy5fY29sbGlzaW9uSm9iQ29tcGxldGVkPSExLHRoaXMuX29wYWNpdHlKb2I9bnVsbCx0aGlzLl9vcGFjaXR5Sm9iQ29tcGxldGVkPSExLHRoaXMuX3J1bm5pbmc9ITB9Y29udGludWUobyl7aWYodGhpcy5fc2VsZWN0aW9uSm9ifHwodGhpcy5fc2VsZWN0aW9uSm9iPXRoaXMuX2NyZWF0ZVNlbGVjdGlvbkpvYigpKSwhdGhpcy5fc2VsZWN0aW9uSm9iQ29tcGxldGVkKXtjb25zdCB0PXBlcmZvcm1hbmNlLm5vdygpO2lmKCF0aGlzLl9zZWxlY3Rpb25Kb2Iud29yayhvKSlyZXR1cm4hMTtpZih0aGlzLl9zZWxlY3Rpb25Kb2JDb21wbGV0ZWQ9ITAsMD09PShvPU1hdGgubWF4KDAsby0ocGVyZm9ybWFuY2Uubm93KCktdCkpKSlyZXR1cm4hMX1pZih0aGlzLl9jb2xsaXNpb25Kb2J8fCh0aGlzLl9jb2xsaXNpb25Kb2I9dGhpcy5fY3JlYXRlQ29sbGlzaW9uSm9iKHRoaXMuX3NlbGVjdGlvbkpvYi5zb3J0ZWRTeW1ib2xzLHRoaXMuX3NjcmVlbldpZHRoLHRoaXMuX3NjcmVlbkhlaWdodCkpLCF0aGlzLl9jb2xsaXNpb25Kb2JDb21wbGV0ZWQpe2NvbnN0IHQ9cGVyZm9ybWFuY2Uubm93KCk7aWYoIXRoaXMuX2NvbGxpc2lvbkpvYi53b3JrKG8pKXJldHVybiExO2lmKHRoaXMuX2NvbGxpc2lvbkpvYkNvbXBsZXRlZD0hMCwwPT09KG89TWF0aC5tYXgoMCxvLShwZXJmb3JtYW5jZS5ub3coKS10KSkpKXJldHVybiExfWlmKHRoaXMuX29wYWNpdHlKb2J8fCh0aGlzLl9vcGFjaXR5Sm9iPXRoaXMuX2NyZWF0ZU9wYWNpdHlKb2IoKSksIXRoaXMuX29wYWNpdHlKb2JDb21wbGV0ZWQpe2NvbnN0IHQ9cGVyZm9ybWFuY2Uubm93KCk7aWYoIXRoaXMuX29wYWNpdHlKb2Iud29yayhvKSlyZXR1cm4hMTtpZih0aGlzLl9vcGFjaXR5Sm9iQ29tcGxldGVkPSEwLDA9PT0obz1NYXRoLm1heCgwLG8tKHBlcmZvcm1hbmNlLm5vdygpLXQpKSkpcmV0dXJuITF9cmV0dXJuIHRoaXMuX3J1bm5pbmc9ITEsITB9X2NyZWF0ZVNlbGVjdGlvbkpvYigpe2NvbnN0IG89dGhpcy5fc3ltYm9sUmVwb3NpdG9yeS51bmlxdWVTeW1ib2xzO2ZvcihsZXQgdD0wO3Q8by5sZW5ndGg7dCsrKXtjb25zdCBlPW9bdF07Zm9yKGxldCBvPTA7bzxlLnVuaXF1ZVN5bWJvbHMubGVuZ3RoO28rKyl7Y29uc3QgdD1lLnVuaXF1ZVN5bWJvbHNbb107Zm9yKGNvbnN0IG8gb2YgdC50aWxlU3ltYm9scylvLnNlbGVjdGVkRm9yUmVuZGVyaW5nPSExfX1jb25zdCBlPVtdO2xldCBpPTAscz0wO2NvbnN0IG49dGhpcy5faXNMYXllclZpc2libGU7ZnVuY3Rpb24gcihyKXtsZXQgbDtjb25zdCBjPXBlcmZvcm1hbmNlLm5vdygpO2Zvcig7czxvLmxlbmd0aDtzKyssaT0wKXtjb25zdCB0PW9bc10saD10LnN0eWxlTGF5ZXJVSUQ7aWYoIW4oaCkpe2Vbc118fChlW3NdPXtzdHlsZUxheWVyVUlEOmgsc3ltYm9sczpbXX0pO2NvbnRpbnVlfWVbc109ZVtzXXx8e3N0eWxlTGF5ZXJVSUQ6aCxzeW1ib2xzOltdfTtjb25zdCBhPWVbc107Zm9yKDtpPHQudW5pcXVlU3ltYm9scy5sZW5ndGg7aSsrKXtpZihsPXQudW5pcXVlU3ltYm9sc1tpXSxpJTEwMD09OTkmJnBlcmZvcm1hbmNlLm5vdygpLWM+cilyZXR1cm4hMTtsZXQgbz1udWxsLGU9ITEscz0hMTtmb3IoY29uc3QgdCBvZiBsLnRpbGVTeW1ib2xzKWlmKCFzfHwhZSl7Y29uc3QgaT10LnRpbGU7KCFvfHxpLmlzQ292ZXJhZ2V8fGkubmVlZGVkRm9yQ292ZXJhZ2UmJiFlKSYmKG89dCwoaS5uZWVkZWRGb3JDb3ZlcmFnZXx8aS5pc0NvdmVyYWdlKSYmKHM9ITApLGkuaXNDb3ZlcmFnZSYmKGU9ITApKX1pZihvLnNlbGVjdGVkRm9yUmVuZGVyaW5nPSEwLHMpe2Euc3ltYm9scy5wdXNoKG8pLGwuc2hvdz0hMDtmb3IoY29uc3QgbyBvZiBsLnBhcnRzKW8uc2hvdz0hMH1lbHNlIGwuc2hvdz0hMX19Zm9yKGNvbnN0IG8gb2YgZSlvLnN5bWJvbHMuc29ydCh0KTtyZXR1cm4hMH1jb25zdCBsPXRoaXMuX3N5bWJvbExheWVyU29ydGVyO3JldHVybnt3b3JrOnIsZ2V0IHNvcnRlZFN5bWJvbHMoKXtyZXR1cm4gZS5zb3J0KGwpfX19X2NyZWF0ZU9wYWNpdHlKb2IoKXtjb25zdCBvPXRoaXMuX2Fzc2lnblRpbGVTeW1ib2xzT3BhY2l0eSx0PXRoaXMuX3Zpc2libGVUaWxlcztsZXQgZT0wO2Z1bmN0aW9uIHModCxlKXtjb25zdCBuPXQuc3ltYm9scztmb3IoY29uc3RbbyxzXW9mIG4paShzLGUpO28odCxlKTtmb3IoY29uc3QgbyBvZiB0LmNoaWxkcmVuVGlsZXMpcyhvLGUpfXJldHVybnt3b3JrKG8pe2NvbnN0IGk9cGVyZm9ybWFuY2Uubm93KCk7Zm9yKDtlPHQubGVuZ3RoO2UrKyl7aWYocGVyZm9ybWFuY2Uubm93KCktaT5vKXJldHVybiExO2NvbnN0IG49dFtlXTtpZihudWxsIT1uLnBhcmVudFRpbGUpY29udGludWU7cyhuLHBlcmZvcm1hbmNlLm5vdygpKX1yZXR1cm4hMH19fX1mdW5jdGlvbiBpKHQsZSl7Zm9yKGNvbnN0IGkgb2YgdCl7Y29uc3QgdD1pLnVuaXF1ZTtmb3IoY29uc3QgaSBvZiB0LnBhcnRzKXtjb25zdCBzPWkudGFyZ2V0T3BhY2l0eT4uNT8xOi0xO2kuc3RhcnRPcGFjaXR5Kz1zKigoZS1pLnN0YXJ0VGltZSkvbyksaS5zdGFydE9wYWNpdHk9TWF0aC5taW4oTWF0aC5tYXgoaS5zdGFydE9wYWNpdHksMCksMSksaS5zdGFydFRpbWU9ZSxpLnRhcmdldE9wYWNpdHk9dC5zaG93JiZpLnNob3c/MTowfX19ZXhwb3J0e2UgYXMgU3ltYm9sRGVjbHV0dGVyZXJ9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtHcmlkSW5kZXggYXMgZSx0aWxlQ29vcmRDaGFuZ2UgYXMgc31mcm9tXCIuL3V0aWwuanNcIjtjb25zdCBsPTMyLG89OCx0PTY0O2NsYXNzIGl7Y29uc3RydWN0b3IoZSxzLGwpe3RoaXMudGlsZUNvb3JkUmFuZ2U9ZSx0aGlzLl92aXNpYmxlVGlsZXM9cyx0aGlzLl9jcmVhdGVVbmlxdWU9bCx0aGlzLl90aWxlcz1uZXcgTWFwLHRoaXMuX3VuaXF1ZVN5bWJvbHNSZWZlcmVuY2VzPW5ldyBNYXB9Z2V0IHVuaXF1ZVN5bWJvbHMoKXtyZXR1cm4gbnVsbD09dGhpcy5fdW5pcXVlU3ltYm9sTGF5ZXJBcnJheSYmKHRoaXMuX3VuaXF1ZVN5bWJvbExheWVyQXJyYXk9dGhpcy5fY3JlYXRlVW5pcXVlU3ltYm9sTGF5ZXJBcnJheSgpKSx0aGlzLl91bmlxdWVTeW1ib2xMYXllckFycmF5fWFkZChzLGkpe3RoaXMuX3VuaXF1ZVN5bWJvbExheWVyQXJyYXk9bnVsbDtsZXQgbj10aGlzLl90aWxlcy5nZXQocy5pZCk7bnx8KG49e3N5bWJvbHM6bmV3IE1hcH0sdGhpcy5fdGlsZXMuc2V0KHMuaWQsbikpO2NvbnN0IHI9bmV3IE1hcDtpZihpKWZvcihjb25zdCBlIG9mIGkpbi5zeW1ib2xzLmhhcyhlKSYmKHIuc2V0KGUsbi5zeW1ib2xzLmdldChlKSksbi5zeW1ib2xzLmRlbGV0ZShlKSk7ZWxzZSBmb3IoY29uc3RbZSxsXW9mIHMubGF5ZXJEYXRhKW4uc3ltYm9scy5oYXMoZSkmJihyLnNldChlLG4uc3ltYm9scy5nZXQoZSkpLG4uc3ltYm9scy5kZWxldGUoZSkpO3RoaXMuX3JlbW92ZVN5bWJvbHMocik7Y29uc3QgeT1zLnN5bWJvbHMsYT1uZXcgTWFwO2Zvcihjb25zdFtmLGNdb2YgeSl7bGV0IHM9Yy5sZW5ndGg7aWYocz49bCl7bGV0IGw9dGhpcy50aWxlQ29vcmRSYW5nZTtkb3tsLz0yLHMvPTR9d2hpbGUocz5vJiZsPnQpO2NvbnN0IGk9bmV3IGUodGhpcy50aWxlQ29vcmRSYW5nZSx0aGlzLnRpbGVDb29yZFJhbmdlLGwpO2Euc2V0KGYse2ZsYXQ6YyxpbmRleDppfSksbi5zeW1ib2xzLnNldChmLHtmbGF0OmMsaW5kZXg6aX0pO2Zvcihjb25zdCBlIG9mIGMpaS5nZXRDZWxsKGUueFRpbGUsZS55VGlsZSkucHVzaChlKX1lbHNlIGEuc2V0KGYse2ZsYXQ6Y30pLG4uc3ltYm9scy5zZXQoZix7ZmxhdDpjfSl9dGhpcy5fYWRkU3ltYm9scyhzLmtleSx5KX1kZWxldGVTdHlsZUxheWVycyhlKXt0aGlzLl91bmlxdWVTeW1ib2xMYXllckFycmF5PW51bGw7Zm9yKGNvbnN0W3MsbF1vZiB0aGlzLl90aWxlcyl7Y29uc3Qgbz1uZXcgTWFwO2Zvcihjb25zdCBzIG9mIGUpbC5zeW1ib2xzLmhhcyhzKSYmKG8uc2V0KHMsbC5zeW1ib2xzLmdldChzKSksbC5zeW1ib2xzLmRlbGV0ZShzKSk7dGhpcy5fcmVtb3ZlU3ltYm9scyhvKSwwPT09bC5zeW1ib2xzLnNpemUmJnRoaXMuX3RpbGVzLmRlbGV0ZShzKX19cmVtb3ZlVGlsZShlKXt0aGlzLl91bmlxdWVTeW1ib2xMYXllckFycmF5PW51bGw7Y29uc3Qgcz10aGlzLl90aWxlcy5nZXQoZS5pZCk7aWYoIXMpcmV0dXJuO2NvbnN0IGw9bmV3IE1hcDtmb3IoY29uc3Rbbyx0XW9mIGUuc3ltYm9scylzLnN5bWJvbHMuaGFzKG8pJiYobC5zZXQobyxzLnN5bWJvbHMuZ2V0KG8pKSxzLnN5bWJvbHMuZGVsZXRlKG8pKTt0aGlzLl9yZW1vdmVTeW1ib2xzKGwpLDA9PT1zLnN5bWJvbHMuc2l6ZSYmdGhpcy5fdGlsZXMuZGVsZXRlKGUuaWQpfV9yZW1vdmVTeW1ib2xzKGUpe2Zvcihjb25zdFtzLHtmbGF0Omx9XW9mIGUpZm9yKGNvbnN0IGUgb2YgbCl7Y29uc3QgbD1lLnVuaXF1ZSxvPWwudGlsZVN5bWJvbHMsdD1vLmxlbmd0aC0xO2ZvcihsZXQgcz0wO3M8dDtzKyspaWYob1tzXT09PWUpe29bc109b1t0XTticmVha31pZihvLmxlbmd0aD10LDA9PT10KXtjb25zdCBlPXRoaXMuX3VuaXF1ZVN5bWJvbHNSZWZlcmVuY2VzLmdldChzKTtlLmRlbGV0ZShsKSwwPT09ZS5zaXplJiZ0aGlzLl91bmlxdWVTeW1ib2xzUmVmZXJlbmNlcy5kZWxldGUocyl9ZS51bmlxdWU9bnVsbH19X2FkZFN5bWJvbHMoZSxzKXtpZigwPT09cy5zaXplKXJldHVybjtjb25zdCBsPXRoaXMuX3Zpc2libGVUaWxlcztmb3IoY29uc3QgbyBvZiBsKW8ucGFyZW50VGlsZXx8by5rZXkud29ybGQhPT1lLndvcmxkfHxvLmtleS5sZXZlbD09PWUubGV2ZWwmJiFvLmtleS5lcXVhbHMoZSl8fHRoaXMuX21hdGNoU3ltYm9scyhvLGUscyk7Zm9yKGNvbnN0W28sdF1vZiBzKWZvcihjb25zdCBlIG9mIHQpaWYobnVsbD09ZS51bmlxdWUpe2NvbnN0IHM9dGhpcy5fY3JlYXRlVW5pcXVlKCk7ZS51bmlxdWU9cyxzLnRpbGVTeW1ib2xzLnB1c2goZSk7bGV0IGw9dGhpcy5fdW5pcXVlU3ltYm9sc1JlZmVyZW5jZXMuZ2V0KG8pO2x8fChsPW5ldyBTZXQsdGhpcy5fdW5pcXVlU3ltYm9sc1JlZmVyZW5jZXMuc2V0KG8sbCkpLGwuYWRkKHMpfX1fbWF0Y2hTeW1ib2xzKGUsbCxvKXtpZihlLmtleS5sZXZlbD5sLmxldmVsKXtjb25zdCBzPWUua2V5LmxldmVsLWwubGV2ZWw7aWYoZS5rZXkucm93Pj5zIT09bC5yb3d8fGUua2V5LmNvbD4+cyE9PWwuY29sKXJldHVybn1pZihsLmxldmVsPmUua2V5LmxldmVsKXtjb25zdCBzPWwubGV2ZWwtZS5rZXkubGV2ZWw7aWYobC5yb3c+PnMhPT1lLmtleS5yb3d8fGwuY29sPj5zIT09ZS5rZXkuY29sKXJldHVybn1pZihsLmVxdWFscyhlLmtleSkpe2Zvcihjb25zdCBzIG9mIGUuY2hpbGRyZW5UaWxlcyl0aGlzLl9tYXRjaFN5bWJvbHMocyxsLG8pO3JldHVybn1jb25zdCB0PW5ldyBNYXA7Zm9yKGNvbnN0W2ksbl1vZiBvKXtjb25zdCBvPVtdO2Zvcihjb25zdCB0IG9mIG4pe2NvbnN0IGk9cyh0aGlzLnRpbGVDb29yZFJhbmdlLHQueFRpbGUsbC5sZXZlbCxsLmNvbCxlLmtleS5sZXZlbCxlLmtleS5jb2wpLG49cyh0aGlzLnRpbGVDb29yZFJhbmdlLHQueVRpbGUsbC5sZXZlbCxsLnJvdyxlLmtleS5sZXZlbCxlLmtleS5yb3cpO2k+PTAmJmk8dGhpcy50aWxlQ29vcmRSYW5nZSYmbj49MCYmbjx0aGlzLnRpbGVDb29yZFJhbmdlJiZvLnB1c2goe3N5bWJvbDp0LHhUcmFuc2Zvcm1lZDppLHlUcmFuc2Zvcm1lZDpufSl9Y29uc3Qgcj1bXSx5PWUua2V5LmxldmVsPGwubGV2ZWw/MToxPDxlLmtleS5sZXZlbC1sLmxldmVsLGE9dGhpcy5fdGlsZXMuZ2V0KGUuaWQpLnN5bWJvbHMuZ2V0KGkpO2lmKGEpe2NvbnN0IGU9YS5mbGF0O2Zvcihjb25zdCBzIG9mIG8pe2xldCBsLG89ITE7Y29uc3QgdD1zLnhUcmFuc2Zvcm1lZCxpPXMueVRyYW5zZm9ybWVkO2w9bnVsbCE9YS5pbmRleD9hLmluZGV4LmdldENlbGwodCxpKTplO2NvbnN0IG49cy5zeW1ib2wsZj1uLmhhc2g7Zm9yKGNvbnN0IGUgb2YgbClpZihmPT09ZS5oYXNoJiZNYXRoLmFicyh0LWUueFRpbGUpPD15JiZNYXRoLmFicyhpLWUueVRpbGUpPD15KXtjb25zdCBzPWUudW5pcXVlO24udW5pcXVlPXMscy50aWxlU3ltYm9scy5wdXNoKG4pLG89ITA7YnJlYWt9b3x8ci5wdXNoKG4pfX1yLmxlbmd0aD4wJiZ0LnNldChpLHIpfWZvcihjb25zdCBzIG9mIGUuY2hpbGRyZW5UaWxlcyl0aGlzLl9tYXRjaFN5bWJvbHMocyxsLHQpfV9jcmVhdGVVbmlxdWVTeW1ib2xMYXllckFycmF5KCl7Y29uc3QgZT10aGlzLl91bmlxdWVTeW1ib2xzUmVmZXJlbmNlcyxzPW5ldyBBcnJheShlLnNpemUpO2xldCBsLG89MDtmb3IoY29uc3RbdCxpXW9mIGUpe2NvbnN0IGU9bmV3IEFycmF5KGkuc2l6ZSk7bD0wO2Zvcihjb25zdCBzIG9mIGkpZVtsKytdPXM7c1tvXT17c3R5bGVMYXllclVJRDp0LHVuaXF1ZVN5bWJvbHM6ZX0sbysrfXJldHVybiBzfX1leHBvcnR7aSBhcyBTeW1ib2xSZXBvc2l0b3J5fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7YSBhcyBlfWZyb21cIi4uLy4uLy4uLy4uLy4uL2NodW5rcy9tYXQzZjMyLmpzXCI7aW1wb3J0e2NvbGxpc2lvbkdyaWRDZWxsU2l6ZSBhcyB0fWZyb21cIi4vY29uZmlnLmpzXCI7aW1wb3J0e0dyaWRJbmRleCBhcyBufWZyb21cIi4vdXRpbC5qc1wiO2ltcG9ydHtTeW1ib2xQbGFjZW1lbnQgYXMgbyxSb3RhdGlvbkFsaWdubWVudCBhcyByLFRyYW5zbGF0ZUFuY2hvciBhcyBzfWZyb21cIi4uL3N0eWxlL1N0eWxlRGVmaW5pdGlvbi5qc1wiO2Z1bmN0aW9uIGkoZSx0LG4sbyxpLGwpe2NvbnN0e2ljb25Sb3RhdGlvbkFsaWdubWVudDphLHRleHRSb3RhdGlvbkFsaWdubWVudDpjLGljb25UcmFuc2xhdGU6aCxpY29uVHJhbnNsYXRlQW5jaG9yOnUsdGV4dFRyYW5zbGF0ZTpkLHRleHRUcmFuc2xhdGVBbmNob3I6eX09bztsZXQgeD0wO2Zvcihjb25zdCBnIG9mIGUuY29sbGlkZXJzKXtjb25zdFtlLG9dPTA9PT1nLnBhcnRJbmRleD9oOmQsbT0wPT09Zy5wYXJ0SW5kZXg/dTp5LGY9Zy5taW5Mb2Q8PWwmJmw8PWcubWF4TG9kO3grPWY/MDoxLGcuZW5hYmxlZD1mLGcueFNjcmVlbj1nLnhUaWxlKmlbMF0rZy55VGlsZSppWzNdK2lbNl0sZy55U2NyZWVuPWcueFRpbGUqaVsxXStnLnlUaWxlKmlbNF0raVs3XSxtPT09cy5NQVA/KGcueFNjcmVlbis9biplLXQqbyxnLnlTY3JlZW4rPXQqZStuKm8pOihnLnhTY3JlZW4rPWUsZy55U2NyZWVuKz1vKSxyLlZJRVdQT1JUPT09KDA9PT1nLnBhcnRJbmRleD9hOmMpPyhnLmR4U2NyZWVuPWcuZHhQaXhlbHMsZy5keVNjcmVlbj1nLmR5UGl4ZWxzKTooZy5keFNjcmVlbj1uKihnLmR4UGl4ZWxzK2cud2lkdGgvMiktdCooZy5keVBpeGVscytnLmhlaWdodC8yKS1nLndpZHRoLzIsZy5keVNjcmVlbj10KihnLmR4UGl4ZWxzK2cud2lkdGgvMikrbiooZy5keVBpeGVscytnLmhlaWdodC8yKS1nLmhlaWdodC8yKX1lLmNvbGxpZGVycy5sZW5ndGg+MCYmeD09PWUuY29sbGlkZXJzLmxlbmd0aCYmKGUudW5pcXVlLnNob3c9ITEpfWNsYXNzIGx7Y29uc3RydWN0b3IobyxyLHMsaSxsLGEpe3RoaXMuX3N5bWJvbHM9byx0aGlzLl9zdHlsZVJlcG9zaXRvcnk9aSx0aGlzLl96b29tPWwsdGhpcy5fY3VycmVudExheWVyQ3Vyc29yPTAsdGhpcy5fY3VycmVudFN5bWJvbEN1cnNvcj0wLHRoaXMuX3N0eWxlUHJvcHM9bmV3IE1hcCx0aGlzLl9hbGxOZWVkZWRNYXRyaWNlcz1uZXcgTWFwLHRoaXMuX2dyaWRJbmRleD1uZXcgbihyLHMsdCksdGhpcy5fc2k9TWF0aC5zaW4oTWF0aC5QSSphLzE4MCksdGhpcy5fY289TWF0aC5jb3MoTWF0aC5QSSphLzE4MCk7Zm9yKGNvbnN0IHQgb2Ygbylmb3IoY29uc3QgbiBvZiB0LnN5bWJvbHMpdGhpcy5fYWxsTmVlZGVkTWF0cmljZXMuaGFzKG4udGlsZSl8fHRoaXMuX2FsbE5lZWRlZE1hdHJpY2VzLnNldChuLnRpbGUsZShuLnRpbGUudHJhbnNmb3Jtcy50aWxlVW5pdHNUb1BpeGVscykpfXdvcmsoZSl7Y29uc3QgdD10aGlzLl9ncmlkSW5kZXg7ZnVuY3Rpb24gbihlKXtjb25zdCBuPWUueFNjcmVlbitlLmR4U2NyZWVuLG89ZS55U2NyZWVuK2UuZHlTY3JlZW4scj1uK2Uud2lkdGgscz1vK2UuaGVpZ2h0LFtpLGwsYSxjXT10LmdldENlbGxTcGFuKG4sbyxyLHMpO2ZvcihsZXQgaD1sO2g8PWM7aCsrKWZvcihsZXQgZT1pO2U8PWE7ZSsrKXtjb25zdCBpPXQuY2VsbHNbaF1bZV07Zm9yKGNvbnN0IGUgb2YgaSl7Y29uc3QgdD1lLnhTY3JlZW4rZS5keFNjcmVlbixpPWUueVNjcmVlbitlLmR5U2NyZWVuLGw9dCtlLndpZHRoLGE9aStlLmhlaWdodDtpZighKHI8dHx8bj5sfHxzPGl8fG8+YSkpcmV0dXJuITB9fXJldHVybiExfWNvbnN0IG89cGVyZm9ybWFuY2Uubm93KCk7Zm9yKDt0aGlzLl9jdXJyZW50TGF5ZXJDdXJzb3I8dGhpcy5fc3ltYm9scy5sZW5ndGg7dGhpcy5fY3VycmVudExheWVyQ3Vyc29yKyssdGhpcy5fY3VycmVudFN5bWJvbEN1cnNvcj0wKXtjb25zdCB0PXRoaXMuX3N5bWJvbHNbdGhpcy5fY3VycmVudExheWVyQ3Vyc29yXSxyPXRoaXMuX2dldFByb3BlcnRpZXModC5zdHlsZUxheWVyVUlEKTtmb3IoO3RoaXMuX2N1cnJlbnRTeW1ib2xDdXJzb3I8dC5zeW1ib2xzLmxlbmd0aDt0aGlzLl9jdXJyZW50U3ltYm9sQ3Vyc29yKyspe2lmKHRoaXMuX2N1cnJlbnRTeW1ib2xDdXJzb3IlMTAwPT05OSYmcGVyZm9ybWFuY2Uubm93KCktbz5lKXJldHVybiExO2NvbnN0IHM9dC5zeW1ib2xzW3RoaXMuX2N1cnJlbnRTeW1ib2xDdXJzb3JdO2lmKCFzLnVuaXF1ZS5zaG93KWNvbnRpbnVlO2kocyx0aGlzLl9zaSx0aGlzLl9jbyxyLHRoaXMuX2FsbE5lZWRlZE1hdHJpY2VzLmdldChzLnRpbGUpLHRoaXMuX3pvb20pO2NvbnN0IGw9cy51bmlxdWU7aWYoIWwuc2hvdyljb250aW51ZTtjb25zdHtpY29uQWxsb3dPdmVybGFwOmEsaWNvbklnbm9yZVBsYWNlbWVudDpjLHRleHRBbGxvd092ZXJsYXA6aCx0ZXh0SWdub3JlUGxhY2VtZW50OnV9PXI7Zm9yKGNvbnN0IGUgb2Ygcy5jb2xsaWRlcnMpe2lmKCFlLmVuYWJsZWQpY29udGludWU7Y29uc3QgdD1sLnBhcnRzW2UucGFydEluZGV4XTtpZighdC5zaG93KWNvbnRpbnVlOyEoZS5wYXJ0SW5kZXg/aDphKSYmbihlKSYmKGUuaGFyZD9sLnNob3c9ITE6dC5zaG93PSExKX1pZihsLnNob3cpZm9yKGNvbnN0IGUgb2Ygcy5jb2xsaWRlcnMpe2lmKCFlLmVuYWJsZWQpY29udGludWU7aWYoZS5wYXJ0SW5kZXg/dTpjKWNvbnRpbnVlO2lmKCFsLnBhcnRzW2UucGFydEluZGV4XS5zaG93KWNvbnRpbnVlO2NvbnN0IHQ9ZS54U2NyZWVuK2UuZHhTY3JlZW4sbj1lLnlTY3JlZW4rZS5keVNjcmVlbixvPXQrZS53aWR0aCxyPW4rZS5oZWlnaHQsW3MsaSxhLGhdPXRoaXMuX2dyaWRJbmRleC5nZXRDZWxsU3Bhbih0LG4sbyxyKTtmb3IobGV0IGw9aTtsPD1oO2wrKylmb3IobGV0IHQ9czt0PD1hO3QrKyl7dGhpcy5fZ3JpZEluZGV4LmNlbGxzW2xdW3RdLnB1c2goZSl9fX19cmV0dXJuITB9X2dldFByb3BlcnRpZXMoZSl7Y29uc3QgdD10aGlzLl9zdHlsZVByb3BzLmdldChlKTtpZih0KXJldHVybiB0O2NvbnN0IG49dGhpcy5fem9vbSxzPXRoaXMuX3N0eWxlUmVwb3NpdG9yeS5nZXRTdHlsZUxheWVyQnlVSUQoZSksaT1zLmdldExheW91dFZhbHVlKFwic3ltYm9sLXBsYWNlbWVudFwiLG4pIT09by5QT0lOVDtsZXQgbD1zLmdldExheW91dFZhbHVlKFwiaWNvbi1yb3RhdGlvbi1hbGlnbm1lbnRcIixuKTtsPT09ci5BVVRPJiYobD1pP3IuTUFQOnIuVklFV1BPUlQpO2xldCBhPXMuZ2V0TGF5b3V0VmFsdWUoXCJ0ZXh0LXJvdGF0aW9uLWFsaWdubWVudFwiLG4pO2E9PT1yLkFVVE8mJihhPWk/ci5NQVA6ci5WSUVXUE9SVCk7Y29uc3QgYz1zLmdldFBhaW50VmFsdWUoXCJpY29uLXRyYW5zbGF0ZVwiLG4pLGg9cy5nZXRQYWludFZhbHVlKFwiaWNvbi10cmFuc2xhdGUtYW5jaG9yXCIsbiksdT1zLmdldFBhaW50VmFsdWUoXCJ0ZXh0LXRyYW5zbGF0ZVwiLG4pLGQ9cy5nZXRQYWludFZhbHVlKFwidGV4dC10cmFuc2xhdGUtYW5jaG9yXCIsbikseT17aWNvbkFsbG93T3ZlcmxhcDpzLmdldExheW91dFZhbHVlKFwiaWNvbi1hbGxvdy1vdmVybGFwXCIsbiksaWNvbklnbm9yZVBsYWNlbWVudDpzLmdldExheW91dFZhbHVlKFwiaWNvbi1pZ25vcmUtcGxhY2VtZW50XCIsbiksdGV4dEFsbG93T3ZlcmxhcDpzLmdldExheW91dFZhbHVlKFwidGV4dC1hbGxvdy1vdmVybGFwXCIsbiksdGV4dElnbm9yZVBsYWNlbWVudDpzLmdldExheW91dFZhbHVlKFwidGV4dC1pZ25vcmUtcGxhY2VtZW50XCIsbiksaWNvblJvdGF0aW9uQWxpZ25tZW50OmwsdGV4dFJvdGF0aW9uQWxpZ25tZW50OmEsaWNvblRyYW5zbGF0ZUFuY2hvcjpoLGljb25UcmFuc2xhdGU6Yyx0ZXh0VHJhbnNsYXRlQW5jaG9yOmQsdGV4dFRyYW5zbGF0ZTp1fTtyZXR1cm4gdGhpcy5fc3R5bGVQcm9wcy5zZXQoZSx5KSx5fX1leHBvcnR7bCBhcyBDb2xsaXNpb25Kb2J9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmNsYXNzIHR7Y29uc3RydWN0b3IodD0wLGg9MCxpPTAscz0wKXt0aGlzLng9dCx0aGlzLnk9aCx0aGlzLndpZHRoPWksdGhpcy5oZWlnaHQ9c31nZXQgaXNFbXB0eSgpe3JldHVybiB0aGlzLndpZHRoPD0wfHx0aGlzLmhlaWdodDw9MH11bmlvbih0KXt0aGlzLng9TWF0aC5taW4odGhpcy54LHQueCksdGhpcy55PU1hdGgubWluKHRoaXMueSx0LnkpLHRoaXMud2lkdGg9TWF0aC5tYXgodGhpcy53aWR0aCx0LndpZHRoKSx0aGlzLmhlaWdodD1NYXRoLm1heCh0aGlzLmhlaWdodCx0LmhlaWdodCl9fWV4cG9ydHt0IGFzIGRlZmF1bHR9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydCBlIGZyb21cIi4uLy4uLy4uL2xheWVycy9zdXBwb3J0L1RpbGVJbmZvLmpzXCI7aW1wb3J0IGwgZnJvbVwiLi9UaWxlSW5mb1ZpZXcuanNcIjtpbXBvcnQgcyBmcm9tXCIuL1RpbGVLZXkuanNcIjtjbGFzcyB0IGV4dGVuZHMgbHtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5fZnVsbENhY2hlTG9kSW5mb3M9bnVsbCx0aGlzLl9sZXZlbEJ5U2NhbGU9e319Z2V0VGlsZVBhcmVudElkKGUpe2NvbnN0IGw9cy5wb29sLmFjcXVpcmUoZSksdD0wPT09bC5sZXZlbD9udWxsOnMuZ2V0SWQobC5sZXZlbC0xLGwucm93Pj4xLGwuY29sPj4xLGwud29ybGQpO3JldHVybiBzLnBvb2wucmVsZWFzZShsKSx0fWdldFRpbGVDb3ZlcmFnZShlLGwscz0hMCx0KXtjb25zdCBvPXN1cGVyLmdldFRpbGVDb3ZlcmFnZShlLGwscyx0KTtpZighbylyZXR1cm4gbztjb25zdCBpPTE8PG8ubG9kSW5mby5sZXZlbDtyZXR1cm4gby5zcGFucz1vLnNwYW5zLmZpbHRlcigoZT0+ZS5yb3c+PTAmJmUucm93PGkpKSxvfXNjYWxlVG9MZXZlbChlKXtpZih0aGlzLl9mdWxsQ2FjaGVMb2RJbmZvc3x8dGhpcy5faW5pdGlhbGl6ZUZ1bGxDYWNoZUxPRHModGhpcy5fbG9kSW5mb3MpLHRoaXMuX2xldmVsQnlTY2FsZVtlXSlyZXR1cm4gdGhpcy5fbGV2ZWxCeVNjYWxlW2VdO3tjb25zdCBsPXRoaXMuX2Z1bGxDYWNoZUxvZEluZm9zO2lmKGU+bFswXS5zY2FsZSlyZXR1cm4gbFswXS5sZXZlbDtsZXQgcyx0O2ZvcihsZXQgbz0wO288bC5sZW5ndGgtMTtvKyspaWYodD1sW28rMV0sZT50LnNjYWxlKXJldHVybiBzPWxbb10scy5sZXZlbCsocy5zY2FsZS1lKS8ocy5zY2FsZS10LnNjYWxlKTtyZXR1cm4gbFtsLmxlbmd0aC0xXS5sZXZlbH19X2luaXRpYWxpemVGdWxsQ2FjaGVMT0RzKGwpe2xldCBzO2lmKDA9PT1sWzBdLmxldmVsKXM9bC5tYXAoKGU9Pih7bGV2ZWw6ZS5sZXZlbCxyZXNvbHV0aW9uOmUucmVzb2x1dGlvbixzY2FsZTplLnNjYWxlfSkpKTtlbHNle2NvbnN0IGw9dGhpcy50aWxlSW5mby5zaXplWzBdLHQ9dGhpcy50aWxlSW5mby5zcGF0aWFsUmVmZXJlbmNlO3M9ZS5jcmVhdGUoe3NpemU6bCxzcGF0aWFsUmVmZXJlbmNlOnR9KS5sb2RzLm1hcCgoZT0+KHtsZXZlbDplLmxldmVsLHJlc29sdXRpb246ZS5yZXNvbHV0aW9uLHNjYWxlOmUuc2NhbGV9KSkpfWZvcihsZXQgZT0wO2U8cy5sZW5ndGg7ZSsrKXRoaXMuX2xldmVsQnlTY2FsZVtzW2VdLnNjYWxlXT1zW2VdLmxldmVsO3RoaXMuX2Z1bGxDYWNoZUxvZEluZm9zPXN9fWV4cG9ydHt0IGFzIGRlZmF1bHR9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9