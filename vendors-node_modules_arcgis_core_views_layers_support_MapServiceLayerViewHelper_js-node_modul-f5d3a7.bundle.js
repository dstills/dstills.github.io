"use strict";
(self["webpackChunksynview"] = self["webpackChunksynview"] || []).push([["vendors-node_modules_arcgis_core_views_layers_support_MapServiceLayerViewHelper_js-node_modul-f5d3a7"],{

/***/ "./node_modules/@arcgis/core/layers/support/floorFilterUtils.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/support/floorFilterUtils.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getFloorFilterClause: () => (/* binding */ o),
/* harmony export */   getLayerFloorFilterClause: () => (/* binding */ n)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function o(o){const n=o.layer;if("floorInfo"in n&&n.floorInfo?.floorField&&"floors"in o.view){return l(o.view.floors,n.floorInfo.floorField)}return null}function n(o,n){return"floorInfo"in n&&n.floorInfo?.floorField?l(o,n.floorInfo.floorField):null}function l(o,n){if(!o?.length)return null;const l=o.filter((o=>""!==o)).map((o=>`'${o}'`));return l.push("''"),`${n} IN (${l.join(",")}) OR ${n} IS NULL`}


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/support/sublayerUtils.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/support/sublayerUtils.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isExportDynamic: () => (/* binding */ n),
/* harmony export */   isSublayerOverhaul: () => (/* binding */ o),
/* harmony export */   shouldWriteSublayerStructure: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _core_accessorSupport_PropertyOrigin_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/accessorSupport/PropertyOrigin.js */ "./node_modules/@arcgis/core/core/accessorSupport/PropertyOrigin.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function e(r,e,n){const o=e.flatten((({sublayers:r})=>r)).length;if(o!==r.length)return!0;return!!r.some((r=>r.originIdOf("minScale")>n||r.originIdOf("maxScale")>n||r.originIdOf("renderer")>n||r.originIdOf("labelingInfo")>n||r.originIdOf("opacity")>n||r.originIdOf("labelsVisible")>n||r.originIdOf("source")>n))||!i(r,e)}function n(e,n,o){return!!e.some((e=>{const n=e.source;return!(!n||"map-layer"===n.type&&n.mapLayerId===e.id&&(null==n.gdbVersion||n.gdbVersion===o))||e.originIdOf("renderer")>_core_accessorSupport_PropertyOrigin_js__WEBPACK_IMPORTED_MODULE_0__.OriginId.SERVICE||e.originIdOf("labelingInfo")>_core_accessorSupport_PropertyOrigin_js__WEBPACK_IMPORTED_MODULE_0__.OriginId.SERVICE||e.originIdOf("opacity")>_core_accessorSupport_PropertyOrigin_js__WEBPACK_IMPORTED_MODULE_0__.OriginId.SERVICE||e.originIdOf("labelsVisible")>_core_accessorSupport_PropertyOrigin_js__WEBPACK_IMPORTED_MODULE_0__.OriginId.SERVICE}))||!i(e,n)}function i(r,e){if(!r?.length||null==e)return!0;const n=e.slice().reverse().flatten((({sublayers:r})=>r&&r.toArray().reverse())).map((r=>r.id)).toArray();if(r.length>n.length)return!1;let i=0;const o=n.length;for(const{id:t}of r){for(;i<o&&n[i]!==t;)i++;if(i>=o)return!1}return!0}function o(r){return!!r&&r.some((r=>null!=r.minScale||null!=r.layerDefinition?.minScale))}


/***/ }),

/***/ "./node_modules/@arcgis/core/renderers/support/clickToleranceUtils.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@arcgis/core/renderers/support/clickToleranceUtils.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   calculateTolerance: () => (/* binding */ o)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function t(t,e){return e?"xoffset"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):"yoffset"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function e(t){let e=0,n=0;for(let r=0;r<t.length;r++){const o=t[r].size;"number"==typeof o&&(e+=o,n++)}return e/n}function n(t,n){return"number"==typeof t?t:t?.stops?.length?e(t.stops):n}function r(t,e){if(!e)return t;const r=e.filter((t=>"size"===t.type)).map((e=>{const{maxSize:r,minSize:o}=e;return(n(r,t)+n(o,t))/2}));let o=0;const s=r.length;if(0===s)return t;for(let n=0;n<s;n++)o+=r[n];const f=Math.floor(o/s);return Math.max(f,t)}function o(e){const n=e?.renderer,o=e?.event?.pointerType,s="touch"===o?9:6;if(!n)return s;const f="visualVariables"in n?r(s,n.visualVariables):s;if("simple"===n.type)return t(f,n.symbol);if("unique-value"===n.type){let e=f;return n.uniqueValueInfos?.forEach((n=>{e=t(e,n.symbol)})),e}if("class-breaks"===n.type){let e=f;return n.classBreakInfos.forEach((n=>{e=t(e,n.symbol)})),e}return"dot-density"===n.type||n.type,f}


/***/ }),

/***/ "./node_modules/@arcgis/core/rest/identify.js":
/*!****************************************************!*\
  !*** ./node_modules/@arcgis/core/rest/identify.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   identify: () => (/* binding */ f)
/* harmony export */ });
/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../request.js */ "./node_modules/@arcgis/core/request.js");
/* harmony import */ var _geometry_support_normalizeUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../geometry/support/normalizeUtils.js */ "./node_modules/@arcgis/core/geometry/support/normalizeUtils.js");
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils.js */ "./node_modules/@arcgis/core/rest/utils.js");
/* harmony import */ var _operations_identify_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./operations/identify.js */ "./node_modules/@arcgis/core/rest/operations/identify.js");
/* harmony import */ var _support_IdentifyParameters_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./support/IdentifyParameters.js */ "./node_modules/@arcgis/core/rest/support/IdentifyParameters.js");
/* harmony import */ var _support_IdentifyResult_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./support/IdentifyResult.js */ "./node_modules/@arcgis/core/rest/support/IdentifyResult.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
async function f(u,i,f){const c=(i=a(i)).geometry?[i.geometry]:[],l=(0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.parseUrl)(u);return l.path+="/identify",(0,_geometry_support_normalizeUtils_js__WEBPACK_IMPORTED_MODULE_1__.normalizeCentralMeridian)(c).then((e=>{const t=(0,_operations_identify_js__WEBPACK_IMPORTED_MODULE_3__.identifyToIdentifyRESTParameters)(i,{geometry:e?.[0]}),u=(0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.encode)({...l.query,f:"json",...t}),a=(0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.asValidOptions)(u,f);return (0,_request_js__WEBPACK_IMPORTED_MODULE_0__["default"])(l.path,a).then(m).then((r=>p(r,i.sublayers)))}))}function m(r){const e=r.data;return e.results=e.results||[],e.exceededTransferLimit=Boolean(e.exceededTransferLimit),e.results=e.results.map((r=>_support_IdentifyResult_js__WEBPACK_IMPORTED_MODULE_5__["default"].fromJSON(r))),e}function a(r){return r=_support_IdentifyParameters_js__WEBPACK_IMPORTED_MODULE_4__["default"].from(r)}function p(r,e){if(!e?.length)return r;const t=new Map;function o(r){t.set(r.id,r),r.sublayers&&r.sublayers.forEach(o)}e.forEach(o);for(const s of r.results)s.feature.sourceLayer=t.get(s.layerId);return r}


/***/ }),

/***/ "./node_modules/@arcgis/core/rest/operations/identify.js":
/*!***************************************************************!*\
  !*** ./node_modules/@arcgis/core/rest/operations/identify.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   identifyToIdentifyRESTParameters: () => (/* binding */ l),
/* harmony export */   toDynamicLayersJSON: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _core_sql_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/sql.js */ "./node_modules/@arcgis/core/core/sql.js");
/* harmony import */ var _geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../geometry/support/jsonUtils.js */ "./node_modules/@arcgis/core/geometry/support/jsonUtils.js");
/* harmony import */ var _geometry_support_scaleUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../geometry/support/scaleUtils.js */ "./node_modules/@arcgis/core/geometry/support/scaleUtils.js");
/* harmony import */ var _geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../geometry/support/spatialReferenceUtils.js */ "./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js");
/* harmony import */ var _layers_support_floorFilterUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../layers/support/floorFilterUtils.js */ "./node_modules/@arcgis/core/layers/support/floorFilterUtils.js");
/* harmony import */ var _layers_support_sublayerUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../layers/support/sublayerUtils.js */ "./node_modules/@arcgis/core/layers/support/sublayerUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function l(e,t){const{dpi:i,gdbVersion:s,geometry:l,geometryPrecision:a,height:p,layerOption:f,mapExtent:m,maxAllowableOffset:y,returnFieldName:u,returnGeometry:c,returnUnformattedValues:d,returnZ:g,spatialReference:x,timeExtent:b,tolerance:h,width:E}=e.toJSON(),{dynamicLayers:O,layerDefs:S,layerIds:j}=o(e),N=null!=t?.geometry?t.geometry:null,$={geometryPrecision:a,maxAllowableOffset:y,returnFieldName:u,returnGeometry:c,returnUnformattedValues:d,returnZ:g,tolerance:h},I=N&&N.toJSON()||l;$.imageDisplay=`${E},${p},${i}`,s&&($.gdbVersion=s),I&&(delete I.spatialReference,$.geometry=JSON.stringify(I),$.geometryType=(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_1__.getJsonType)(I));const R=x??I?.spatialReference??m?.spatialReference;if(R&&($.sr=(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_3__.srToRESTValue)(R)),$.time=b?[b.start,b.end].join(","):null,m){const{xmin:e,ymin:r,xmax:t,ymax:n}=m;$.mapExtent=`${e},${r},${t},${n}`}return S&&($.layerDefs=S),O&&!S&&($.dynamicLayers=O),$.layers="popup"===f?"visible":f,j&&!O&&($.layers+=`:${j.join(",")}`),$}function o(e){const{mapExtent:r,floors:n,width:l,sublayers:o,layerIds:p,layerOption:f,gdbVersion:m}=e,y=o?.find((e=>null!=e.layer))?.layer?.serviceSublayers,u="popup"===f,c={},d=(0,_geometry_support_scaleUtils_js__WEBPACK_IMPORTED_MODULE_2__.getScale)({extent:r,width:l,spatialReference:r?.spatialReference}),g=[],x=e=>{const r=0===d,t=0===e.minScale||d<=e.minScale,n=0===e.maxScale||d>=e.maxScale;if(e.visible&&(r||t&&n))if(e.sublayers)e.sublayers.forEach(x);else{if(!1===p?.includes(e.id)||u&&(!e.popupTemplate||!e.popupEnabled))return;g.unshift(e)}};if(o?.forEach(x),o&&!g.length)c.layerIds=[];else{const e=(0,_layers_support_sublayerUtils_js__WEBPACK_IMPORTED_MODULE_5__.isExportDynamic)(g,y,m),r=g.map((e=>{const r=(0,_layers_support_floorFilterUtils_js__WEBPACK_IMPORTED_MODULE_4__.getLayerFloorFilterClause)(n,e);return e.toExportImageJSON(r)}));if(e)c.dynamicLayers=JSON.stringify(r);else{if(o){let e=g.map((({id:e})=>e));p&&(e=e.filter((e=>p.includes(e)))),c.layerIds=e}else p?.length&&(c.layerIds=p);const e=a(n,g);if(null!=e&&e.length){const r={};for(const t of e)t.definitionExpression&&(r[t.id]=t.definitionExpression);Object.keys(r).length&&(c.layerDefs=JSON.stringify(r))}}}return c}function a(r,t){const n=!!r?.length,s=t.filter((e=>null!=e.definitionExpression||n&&null!=e.floorInfo));return s.length?s.map((t=>{const n=(0,_layers_support_floorFilterUtils_js__WEBPACK_IMPORTED_MODULE_4__.getLayerFloorFilterClause)(r,t),s=(0,_core_sql_js__WEBPACK_IMPORTED_MODULE_0__.sqlAnd)(n,t.definitionExpression);return{id:t.id,definitionExpression:s??void 0}})):null}


/***/ }),

/***/ "./node_modules/@arcgis/core/rest/support/IdentifyParameters.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@arcgis/core/rest/support/IdentifyParameters.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ u)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _geometry_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../geometry.js */ "./node_modules/@arcgis/core/geometry.js");
/* harmony import */ var _TimeExtent_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../TimeExtent.js */ "./node_modules/@arcgis/core/TimeExtent.js");
/* harmony import */ var _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/JSONSupport.js */ "./node_modules/@arcgis/core/core/JSONSupport.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../geometry/support/jsonUtils.js */ "./node_modules/@arcgis/core/geometry/support/jsonUtils.js");
/* harmony import */ var _geometry_Extent_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../geometry/Extent.js */ "./node_modules/@arcgis/core/geometry/Extent.js");
/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../geometry/SpatialReference.js */ "./node_modules/@arcgis/core/geometry/SpatialReference.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var m;let a=m=class extends _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_3__.JSONSupport{static from(t){return (0,_core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_5__.ensureClass)(m,t)}constructor(t){super(t),this.dpi=96,this.floors=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=null,this.height=400,this.layerIds=null,this.layerOption="top",this.mapExtent=null,this.maxAllowableOffset=null,this.returnFieldName=!0,this.returnGeometry=!1,this.returnM=!1,this.returnUnformattedValues=!0,this.returnZ=!1,this.spatialReference=null,this.sublayers=null,this.timeExtent=null,this.tolerance=null,this.width=400}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({type:Number,json:{write:!0}})],a.prototype,"dpi",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)()],a.prototype,"floors",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({type:String,json:{write:!0}})],a.prototype,"gdbVersion",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({types:_geometry_js__WEBPACK_IMPORTED_MODULE_1__.geometryTypes,json:{read:_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_9__.fromJSON,write:!0}})],a.prototype,"geometry",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({type:Number,json:{write:!0}})],a.prototype,"geometryPrecision",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({type:Number,json:{write:!0}})],a.prototype,"height",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({type:[Number],json:{write:!0}})],a.prototype,"layerIds",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({type:["top","visible","all","popup"],json:{write:!0}})],a.prototype,"layerOption",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({type:_geometry_Extent_js__WEBPACK_IMPORTED_MODULE_10__["default"],json:{write:!0}})],a.prototype,"mapExtent",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({type:Number,json:{write:!0}})],a.prototype,"maxAllowableOffset",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({type:Boolean,json:{write:!0}})],a.prototype,"returnFieldName",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({type:Boolean,json:{write:!0}})],a.prototype,"returnGeometry",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({type:Boolean,json:{write:!0}})],a.prototype,"returnM",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({type:Boolean,json:{write:!0}})],a.prototype,"returnUnformattedValues",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({type:Boolean,json:{write:!0}})],a.prototype,"returnZ",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({type:_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_11__["default"],json:{write:!0}})],a.prototype,"spatialReference",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)()],a.prototype,"sublayers",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({type:_TimeExtent_js__WEBPACK_IMPORTED_MODULE_2__["default"],json:{write:!0}})],a.prototype,"timeExtent",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({type:Number,json:{write:!0}})],a.prototype,"tolerance",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({type:Number,json:{write:!0}})],a.prototype,"width",void 0),a=m=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__.subclass)("esri.rest.support.IdentifyParameters")],a);const u=a;


/***/ }),

/***/ "./node_modules/@arcgis/core/rest/support/IdentifyResult.js":
/*!******************************************************************!*\
  !*** ./node_modules/@arcgis/core/rest/support/IdentifyResult.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ m)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _geometry_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../geometry.js */ "./node_modules/@arcgis/core/geometry.js");
/* harmony import */ var _Graphic_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../Graphic.js */ "./node_modules/@arcgis/core/Graphic.js");
/* harmony import */ var _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/JSONSupport.js */ "./node_modules/@arcgis/core/core/JSONSupport.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_reader_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/reader.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/reader.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _core_accessorSupport_decorators_writer_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/writer.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/writer.js");
/* harmony import */ var _geometry_support_typeUtils_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../geometry/support/typeUtils.js */ "./node_modules/@arcgis/core/geometry/support/typeUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
let u=class extends _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_3__.JSONSupport{constructor(r){super(r),this.displayFieldName=null,this.feature=null,this.layerId=null,this.layerName=null}readFeature(r,t){return _Graphic_js__WEBPACK_IMPORTED_MODULE_2__["default"].fromJSON({attributes:{...t.attributes},geometry:{...t.geometry}})}writeFeature(r,e){if(!r)return;const{attributes:t,geometry:o}=r;t&&(e.attributes={...t}),null!=o&&(e.geometry=o.toJSON(),e.geometryType=_geometry_support_typeUtils_js__WEBPACK_IMPORTED_MODULE_11__.typeKebabDictionary.toJSON(o.type))}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({type:String,json:{write:!0}})],u.prototype,"displayFieldName",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({type:_Graphic_js__WEBPACK_IMPORTED_MODULE_2__["default"]})],u.prototype,"feature",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_reader_js__WEBPACK_IMPORTED_MODULE_8__.reader)("feature",["attributes","geometry"])],u.prototype,"readFeature",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_writer_js__WEBPACK_IMPORTED_MODULE_10__.writer)("feature")],u.prototype,"writeFeature",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({type:Number,json:{write:!0}})],u.prototype,"layerId",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({type:String,json:{write:!0}})],u.prototype,"layerName",void 0),u=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__.subclass)("esri.rest.support.IdentifyResult")],u);const m=u;


/***/ }),

/***/ "./node_modules/@arcgis/core/views/layers/support/MapServiceLayerViewHelper.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/layers/support/MapServiceLayerViewHelper.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MapServiceLayerViewHelper: () => (/* binding */ G),
/* harmony export */   collectPopupProviders: () => (/* binding */ U),
/* harmony export */   isMapServiceLayerView: () => (/* binding */ S)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _Graphic_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../Graphic.js */ "./node_modules/@arcgis/core/Graphic.js");
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/Accessor.js */ "./node_modules/@arcgis/core/core/Accessor.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_Collection_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../core/Collection.js */ "./node_modules/@arcgis/core/core/Collection.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_handleUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../core/handleUtils.js */ "./node_modules/@arcgis/core/core/handleUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_MapUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../core/MapUtils.js */ "./node_modules/@arcgis/core/core/MapUtils.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../core/reactiveUtils.js */ "./node_modules/@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _core_unitUtils_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../core/unitUtils.js */ "./node_modules/@arcgis/core/core/unitUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _geometry_Extent_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../geometry/Extent.js */ "./node_modules/@arcgis/core/geometry/Extent.js");
/* harmony import */ var _geometry_support_scaleUtils_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../geometry/support/scaleUtils.js */ "./node_modules/@arcgis/core/geometry/support/scaleUtils.js");
/* harmony import */ var _layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../layers/support/fieldUtils.js */ "./node_modules/@arcgis/core/layers/support/fieldUtils.js");
/* harmony import */ var _layers_support_floorFilterUtils_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../layers/support/floorFilterUtils.js */ "./node_modules/@arcgis/core/layers/support/floorFilterUtils.js");
/* harmony import */ var _renderers_support_clickToleranceUtils_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../renderers/support/clickToleranceUtils.js */ "./node_modules/@arcgis/core/renderers/support/clickToleranceUtils.js");
/* harmony import */ var _rest_identify_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../rest/identify.js */ "./node_modules/@arcgis/core/rest/identify.js");
/* harmony import */ var _rest_support_IdentifyParameters_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../rest/support/IdentifyParameters.js */ "./node_modules/@arcgis/core/rest/support/IdentifyParameters.js");
/* harmony import */ var _support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../support/arcadeOnDemand.js */ "./node_modules/@arcgis/core/support/arcadeOnDemand.js");
/* harmony import */ var _symbols_SimpleMarkerSymbol_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../../symbols/SimpleMarkerSymbol.js */ "./node_modules/@arcgis/core/symbols/SimpleMarkerSymbol.js");
/* harmony import */ var _popupUtils_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./popupUtils.js */ "./node_modules/@arcgis/core/views/layers/support/popupUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
let P=null;function S(e,t){return"tile"===t.type||"map-image"===t.type}let G=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_2__["default"]{constructor(e){super(e),this._featuresResolutions=new WeakMap,this.highlightGraphics=null,this.highlightGraphicUpdated=null,this.updateHighlightedFeatures=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_9__.debounce)((async e=>{this.destroyed||this.updatingHandles.addPromise(this._updateHighlightedFeaturesGeometries(e).catch((()=>{})))}))}initialize(){const e=e=>{this.updatingHandles.addPromise(this._updateHighlightedFeaturesSymbols(e).catch((()=>{}))),this.updateHighlightedFeatures(this._highlightGeometriesResolution)};this.addHandles([(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_10__.on)((()=>this.highlightGraphics),"change",(t=>e(t.added)),{onListenerAdd:t=>e(t)})])}async fetchPopupFeatures(e,t){const{layerView:{layer:r,view:{scale:s}}}=this;if(!e)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_5__["default"]("fetchPopupFeatures:invalid-area","Nothing to fetch without area",{layer:r});const i=U(r.sublayers,s,t);if(!i.length)return[];const a=await R(r,i);if(!((r.capabilities?.operations?.supportsIdentify??!0)&&r.version>=10.5)&&!a)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_5__["default"]("fetchPopupFeatures:not-supported","query operation is disabled for this service",{layer:r});return a?this._fetchPopupFeaturesUsingQueries(e,i,t):this._fetchPopupFeaturesUsingIdentify(e,i,t)}clearHighlights(){this.highlightGraphics?.removeAll()}highlight(e){const r=this.highlightGraphics;if(!r)return (0,_core_handleUtils_js__WEBPACK_IMPORTED_MODULE_6__.makeHandle)();let o=null;if(e instanceof _Graphic_js__WEBPACK_IMPORTED_MODULE_1__["default"]?o=[e]:_core_Collection_js__WEBPACK_IMPORTED_MODULE_4__["default"].isCollection(e)&&e.length>0?o=e.toArray():Array.isArray(e)&&e.length>0&&(o=e),o=o?.filter(_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_3__.isSome),!o?.length)return (0,_core_handleUtils_js__WEBPACK_IMPORTED_MODULE_6__.makeHandle)();for(const t of o){const e=t.sourceLayer;null!=e&&"geometryType"in e&&"point"===e.geometryType&&(t.visible=!1)}return r.addMany(o),(0,_core_handleUtils_js__WEBPACK_IMPORTED_MODULE_6__.makeHandle)((()=>r.removeMany(o??[])))}async _updateHighlightedFeaturesSymbols(e){const{layerView:{view:t},highlightGraphics:r,highlightGraphicUpdated:s}=this;if(r&&s)for(const i of e){const e=i.sourceLayer&&"renderer"in i.sourceLayer&&i.sourceLayer.renderer;i.sourceLayer&&"geometryType"in i.sourceLayer&&"point"===i.sourceLayer.geometryType&&e&&"getSymbolAsync"in e&&e.getSymbolAsync(i).then((async o=>{o||=new _symbols_SimpleMarkerSymbol_js__WEBPACK_IMPORTED_MODULE_23__["default"];let a=null;const n="visualVariables"in e?e.visualVariables?.find((e=>"size"===e.type)):void 0;n&&(P||(P=(await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../../../renderers/visualVariables/support/visualVariableUtils.js */ "./node_modules/@arcgis/core/renderers/visualVariables/support/visualVariableUtils.js"))).getSize),a=P(n,i,{view:t.type,scale:t.scale,shape:"simple-marker"===o.type?o.style:null})),a||="width"in o&&"height"in o&&null!=o.width&&null!=o.height?Math.max(o.width,o.height):"size"in o?o.size:16,r.includes(i)&&(i.symbol=new _symbols_SimpleMarkerSymbol_js__WEBPACK_IMPORTED_MODULE_23__["default"]({style:"square",size:a,xoffset:"xoffset"in o?o.xoffset:0,yoffset:"yoffset"in o?o.yoffset:0}),s(i,"symbol"),i.visible=!0)}))}}async _updateHighlightedFeaturesGeometries(e){const{layerView:{layer:t,view:r},highlightGraphics:s,highlightGraphicUpdated:i}=this;if(this._highlightGeometriesResolution=e,!i||!s?.length||!t.capabilities.operations.supportsQuery)return;const o=this._getTargetResolution(e),a=new Map;for(const c of s)if(!this._featuresResolutions.has(c)||this._featuresResolutions.get(c)>o){const e=c.sourceLayer;(0,_core_MapUtils_js__WEBPACK_IMPORTED_MODULE_8__.getOrCreateMapValue)(a,e,(()=>new Map)).set(c.getObjectId(),c)}const l=Array.from(a,(([e,t])=>{const s=e.createQuery();return s.objectIds=[...t.keys()],s.outFields=[e.objectIdField],s.returnGeometry=!0,s.maxAllowableOffset=o,s.outSpatialReference=r.spatialReference,e.queryFeatures(s)})),p=await Promise.all(l);if(!this.destroyed)for(const{features:n}of p)for(const e of n){const t=e.sourceLayer,r=a.get(t).get(e.getObjectId());r&&s.includes(r)&&(r.geometry=e.geometry,i(r,"geometry"),this._featuresResolutions.set(r,o))}}_getTargetResolution(e){const t=e*(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_11__.getMetersPerUnitForSR)(this.layerView.view.spatialReference),r=t/16;return r<=10?0:e/t*r}async _fetchPopupFeaturesUsingIdentify(e,t,r){const s=await this._createIdentifyParameters(e,t,r);if(null==s)return[];const{results:i}=await (0,_rest_identify_js__WEBPACK_IMPORTED_MODULE_20__.identify)(this.layerView.layer.parsedUrl,s);return i.map((e=>e.feature))}async _createIdentifyParameters(e,t,r){const{floors:s,layer:i,timeExtent:o,view:{spatialReference:a,scale:n}}=this.layerView,l=null!=r?r.event:null;if(!t.length)return null;await Promise.all(t.map((({sublayer:e})=>e.load().catch((()=>{})))));const p=Math.min((0,_core_has_js__WEBPACK_IMPORTED_MODULE_7__["default"])("mapservice-popup-identify-max-tolerance"),i.allSublayers.reduce(((e,t)=>t.renderer?(0,_renderers_support_clickToleranceUtils_js__WEBPACK_IMPORTED_MODULE_19__.calculateTolerance)({renderer:t.renderer,event:l}):e),2)),c=this.createFetchPopupFeaturesQueryGeometry(e,p),u=(0,_geometry_support_scaleUtils_js__WEBPACK_IMPORTED_MODULE_16__.getResolutionForScale)(n,a),h=Math.round(c.width/u),f=new _geometry_Extent_js__WEBPACK_IMPORTED_MODULE_15__["default"]({xmin:c.center.x-u*h,ymin:c.center.y-u*h,xmax:c.center.x+u*h,ymax:c.center.y+u*h,spatialReference:c.spatialReference});return new _rest_support_IdentifyParameters_js__WEBPACK_IMPORTED_MODULE_21__["default"]({floors:s,gdbVersion:"gdbVersion"in i?i.gdbVersion:void 0,geometry:e,height:h,layerOption:"popup",mapExtent:f,returnGeometry:!0,spatialReference:a,sublayers:i.sublayers,timeExtent:o,tolerance:p,width:h})}async _fetchPopupFeaturesUsingQueries(e,t,r){const{layerView:{floors:i,timeExtent:o}}=this,a=null!=r?r.event:null,n=t.map((async({sublayer:t,popupTemplate:r})=>{if(await t.load().catch((()=>{})),t.capabilities&&!t.capabilities.operations.supportsQuery)return[];const s=t.createQuery(),n=(0,_renderers_support_clickToleranceUtils_js__WEBPACK_IMPORTED_MODULE_19__.calculateTolerance)({renderer:t.renderer,event:a}),l=this.createFetchPopupFeaturesQueryGeometry(e,n),p=new Set,[c]=await Promise.all([(0,_popupUtils_js__WEBPACK_IMPORTED_MODULE_24__.getRequiredFields)(t,r),t.renderer?.collectRequiredFields(p,t.fieldsIndex)]);(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_17__.collectFields)(p,t.fieldsIndex,c);const u=Array.from(p).sort();if(s.geometry=l,s.outFields=u,s.timeExtent=o,i){const e=i.clone(),r=(0,_layers_support_floorFilterUtils_js__WEBPACK_IMPORTED_MODULE_18__.getLayerFloorFilterClause)(e,t);null!=r&&(s.where=s.where?`(${s.where}) AND (${r})`:r)}const h=this._getTargetResolution(l.width/n),y=await _(r),m="point"===t.geometryType||y&&y.arcadeUtils.hasGeometryOperations(r);m||(s.maxAllowableOffset=h);let{features:w}=await t.queryFeatures(s);const b=m?0:h;w=await A(t,w);for(const e of w)this._featuresResolutions.set(e,b);return w}));return(await Promise.allSettled(n)).reduce(((e,t)=>"fulfilled"===t.status?[...e,...t.value]:e),[]).filter(_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_3__.isSome)}};function U(e,t,r){const s=[];if(!e)return s;const i=e=>{const o=0===e.minScale||t<=e.minScale,a=0===e.maxScale||t>=e.maxScale;if(e.visible&&o&&a)if(e.sublayers)e.sublayers.forEach(i);else if(e.popupEnabled){const t=(0,_popupUtils_js__WEBPACK_IMPORTED_MODULE_24__.getFetchPopupTemplate)(e,{...r,defaultPopupTemplateEnabled:!1});null!=t&&s.unshift({sublayer:e,popupTemplate:t})}};return e.map(i),s}function _(e){return e.expressionInfos?.length||Array.isArray(e.content)&&e.content.some((e=>"expression"===e.type))?(0,_support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_22__.loadArcade)():Promise.resolve()}async function R(e,t){if(e.capabilities?.operations?.supportsQuery)return!0;try{return await Promise.any(t.map((({sublayer:e})=>e.load().then((()=>e.capabilities.operations.supportsQuery)))))}catch{return!1}}async function A(e,t){const r=e.renderer;return r&&"defaultSymbol"in r&&!r.defaultSymbol&&(t=r.valueExpression?await Promise.all(t.map((e=>r.getSymbolAsync(e).then((t=>t?e:null))))).then((e=>e.filter((e=>null!=e)))):t.filter((e=>null!=r.getSymbol(e)))),t}(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_12__.property)({constructOnly:!0})],G.prototype,"createFetchPopupFeaturesQueryGeometry",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_12__.property)({constructOnly:!0})],G.prototype,"layerView",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_12__.property)({constructOnly:!0})],G.prototype,"highlightGraphics",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_12__.property)({constructOnly:!0})],G.prototype,"highlightGraphicUpdated",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_12__.property)({constructOnly:!0})],G.prototype,"updatingHandles",void 0),G=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_14__.subclass)("esri.views.layers.support.MapService")],G);


/***/ }),

/***/ "./node_modules/@arcgis/core/views/layers/support/popupUtils.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/layers/support/popupUtils.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getFetchPopupTemplate: () => (/* binding */ p),
/* harmony export */   getRequiredFields: () => (/* binding */ n),
/* harmony export */   hasPopupTemplate: () => (/* binding */ u)
/* harmony export */ });
/* harmony import */ var _layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../layers/support/fieldUtils.js */ "./node_modules/@arcgis/core/layers/support/fieldUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
async function n(n,p=n.popupTemplate){if(null==p)return[];const u=await p.getRequiredFields(n.fieldsIndex),{lastEditInfoEnabled:t}=p,{objectIdField:d,typeIdField:s,globalIdField:i,relationships:a}=n;if(u.includes("*"))return["*"];const o=t?(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_0__.getFeatureEditFields)(n):[],f=(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_0__.fixFields)(n.fieldsIndex,[...u,...o]);return s&&f.push(s),f&&d&&n.fieldsIndex?.has(d)&&!f.includes(d)&&f.push(d),f&&i&&n.fieldsIndex?.has(i)&&!f.includes(i)&&f.push(i),a&&a.forEach((e=>{const{keyField:l}=e;f&&l&&n.fieldsIndex?.has(l)&&!f.includes(l)&&f.push(l)})),f}function p(e,l){return e.popupTemplate?e.popupTemplate:null!=l&&l.defaultPopupTemplateEnabled&&null!=e.defaultPopupTemplate?e.defaultPopupTemplate:null}function u(e,l){return null!=p(e,{defaultPopupTemplateEnabled:l})}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/support/drapedUtils.js":
/*!****************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/support/drapedUtils.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createQueryGeometry: () => (/* binding */ r),
/* harmony export */   intersectsDrapedGeometry: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _geometry_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../geometry.js */ "./node_modules/@arcgis/core/geometry.js");
/* harmony import */ var _core_unitUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/unitUtils.js */ "./node_modules/@arcgis/core/core/unitUtils.js");
/* harmony import */ var _renderers_support_clickToleranceUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../renderers/support/clickToleranceUtils.js */ "./node_modules/@arcgis/core/renderers/support/clickToleranceUtils.js");
/* harmony import */ var _geometry_Extent_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../geometry/Extent.js */ "./node_modules/@arcgis/core/geometry/Extent.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function r(t,r,i,a=new _geometry_Extent_js__WEBPACK_IMPORTED_MODULE_3__["default"]){let o=0;if("2d"===i.type)o=r*(i.resolution??0);else if("3d"===i.type){const n=i.overlayPixelSizeInMapUnits(t),a=i.basemapSpatialReference;o=null==a||a.equals(i.spatialReference)?r*n:(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_1__.getMetersPerUnitForSR)(a)/(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_1__.getMetersPerUnitForSR)(i.spatialReference)}const s=t.x-o,l=t.y-o,m=t.x+o,p=t.y+o,{spatialReference:c}=i;return a.xmin=Math.min(s,m),a.ymin=Math.min(l,p),a.xmax=Math.max(s,m),a.ymax=Math.max(l,p),a.spatialReference=c,a}function i(e,n,i){const o=i.toMap(e);if(null==o)return!1;return r(o,(0,_renderers_support_clickToleranceUtils_js__WEBPACK_IMPORTED_MODULE_2__.calculateTolerance)(),i,a).intersects(n)}const a=new _geometry_Extent_js__WEBPACK_IMPORTED_MODULE_3__["default"];


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfYXJjZ2lzX2NvcmVfdmlld3NfbGF5ZXJzX3N1cHBvcnRfTWFwU2VydmljZUxheWVyVmlld0hlbHBlcl9qcy1ub2RlX21vZHVsLWY1ZDNhNy5idW5kbGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsZ0JBQWdCLGdFQUFnRSwrQ0FBK0MsWUFBWSxnQkFBZ0IsZ0ZBQWdGLGdCQUFnQiwwQkFBMEIsMENBQTBDLEVBQUUsS0FBSyx1QkFBdUIsR0FBRyxNQUFNLFlBQVksT0FBTyxHQUFHLFNBQTBFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKcGQ7QUFDQTtBQUNBO0FBQ0E7QUFDd0Usa0JBQWtCLHFCQUFxQixZQUFZLGNBQWMseUJBQXlCLHVPQUF1TyxrQkFBa0Isb0JBQW9CLGlCQUFpQix5SEFBeUgsNkVBQUMsdUNBQXVDLDZFQUFDLGtDQUFrQyw2RUFBQyx3Q0FBd0MsNkVBQUMsU0FBUyxZQUFZLGdCQUFnQixnQ0FBZ0MsdUNBQXVDLFlBQVksdURBQXVELDhCQUE4QixRQUFRLGlCQUFpQixVQUFVLEtBQUssTUFBTSxLQUFLLGNBQWMsS0FBSyxpQkFBaUIsU0FBUyxjQUFjLDRFQUFtSzs7Ozs7Ozs7Ozs7Ozs7O0FDSjVvQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixrSUFBa0ksY0FBYyxZQUFZLFlBQVksV0FBVyxLQUFLLGtCQUFrQiwrQkFBK0IsV0FBVyxnQkFBZ0IseURBQXlELGdCQUFnQixlQUFlLGdEQUFnRCxNQUFNLG9CQUFvQixHQUFHLHdCQUF3QixHQUFHLFFBQVEsaUJBQWlCLGtCQUFrQixZQUFZLElBQUksWUFBWSx3QkFBd0IscUJBQXFCLGNBQWMsOERBQThELGVBQWUsdURBQXVELDBDQUEwQyw0QkFBNEIsUUFBUSx3Q0FBd0MsZ0JBQWdCLEtBQUssNEJBQTRCLFFBQVEsc0NBQXNDLGdCQUFnQixLQUFLLHVDQUF1RTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FD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LHNCQUFzQixzREFBc0QsSUFBSSxrQ0FBa0MsV0FBVyxtRUFBbUUsTUFBTSxVQUFVLHNCQUFzQixtQkFBbUIsc05BQXNOLHVEQUFDLEVBQUUsdUZBQUMsRUFBRSxpQkFBaUIsK0RBQStELHVEQUFDLEVBQUUsdUZBQUMsRUFBRSxpQkFBaUIsbUNBQW1DLHVEQUFDLEVBQUUsdUZBQUMsRUFBRSxpQkFBaUIsMkNBQTJDLHVEQUFDLEVBQUUsdUZBQUMsRUFBRSxpQkFBaUIsaURBQWlELHVEQUFDLEVBQUUsdUZBQUMsRUFBRSxpQkFBaUIsMkNBQTJDLHVEQUFDLEVBQUUsdUZBQUMsNkNBQTBJOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKaHpRO0FBQ0E7QUFDQTtBQUNBO0FBQzRGLHNDQUFzQyxvQkFBb0Isa0RBQWtELHNCQUFzQixJQUFJLDhEQUE4RCxHQUFHLCtCQUErQixVQUFVLG1GQUFDLFNBQVMsd0VBQUMsNEJBQTRCLG9KQUFvSixNQUFNLFdBQVcsR0FBRyx1REFBdUQsS0FBSyxnQkFBZ0Isd0lBQXdJLGdCQUFnQixrQkFBa0IsOEJBQThCLEVBQWtGOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0pqNEI7QUFDQTtBQUNBO0FBQ0E7QUFDc04sdUJBQXVCLDJEQUFDLEVBQUUsUUFBUSx1Q0FBdUMsdUJBQXVCLG9FQUFvRSw0Q0FBNEMseUVBQUMsSUFBSSx5RUFBQyxxQkFBcUIsdUNBQXVDLG1CQUFtQixHQUFHLGtIQUFrSCxrQkFBa0IsbUJBQW1CLG9CQUFvQixXQUFXLDZGQUFDLHNCQUFzQixZQUFZLDJEQUFDLENBQWdFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3ludmlldy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvbGF5ZXJzL3N1cHBvcnQvZmxvb3JGaWx0ZXJVdGlscy5qcyIsIndlYnBhY2s6Ly9zeW52aWV3Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9sYXllcnMvc3VwcG9ydC9zdWJsYXllclV0aWxzLmpzIiwid2VicGFjazovL3N5bnZpZXcvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3JlbmRlcmVycy9zdXBwb3J0L2NsaWNrVG9sZXJhbmNlVXRpbHMuanMiLCJ3ZWJwYWNrOi8vc3ludmlldy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvcmVzdC9pZGVudGlmeS5qcyIsIndlYnBhY2s6Ly9zeW52aWV3Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9yZXN0L29wZXJhdGlvbnMvaWRlbnRpZnkuanMiLCJ3ZWJwYWNrOi8vc3ludmlldy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvcmVzdC9zdXBwb3J0L0lkZW50aWZ5UGFyYW1ldGVycy5qcyIsIndlYnBhY2s6Ly9zeW52aWV3Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9yZXN0L3N1cHBvcnQvSWRlbnRpZnlSZXN1bHQuanMiLCJ3ZWJwYWNrOi8vc3ludmlldy8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvbGF5ZXJzL3N1cHBvcnQvTWFwU2VydmljZUxheWVyVmlld0hlbHBlci5qcyIsIndlYnBhY2s6Ly9zeW52aWV3Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy9sYXllcnMvc3VwcG9ydC9wb3B1cFV0aWxzLmpzIiwid2VicGFjazovL3N5bnZpZXcvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzL3N1cHBvcnQvZHJhcGVkVXRpbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmZ1bmN0aW9uIG8obyl7Y29uc3Qgbj1vLmxheWVyO2lmKFwiZmxvb3JJbmZvXCJpbiBuJiZuLmZsb29ySW5mbz8uZmxvb3JGaWVsZCYmXCJmbG9vcnNcImluIG8udmlldyl7cmV0dXJuIGwoby52aWV3LmZsb29ycyxuLmZsb29ySW5mby5mbG9vckZpZWxkKX1yZXR1cm4gbnVsbH1mdW5jdGlvbiBuKG8sbil7cmV0dXJuXCJmbG9vckluZm9cImluIG4mJm4uZmxvb3JJbmZvPy5mbG9vckZpZWxkP2wobyxuLmZsb29ySW5mby5mbG9vckZpZWxkKTpudWxsfWZ1bmN0aW9uIGwobyxuKXtpZighbz8ubGVuZ3RoKXJldHVybiBudWxsO2NvbnN0IGw9by5maWx0ZXIoKG89PlwiXCIhPT1vKSkubWFwKChvPT5gJyR7b30nYCkpO3JldHVybiBsLnB1c2goXCInJ1wiKSxgJHtufSBJTiAoJHtsLmpvaW4oXCIsXCIpfSkgT1IgJHtufSBJUyBOVUxMYH1leHBvcnR7byBhcyBnZXRGbG9vckZpbHRlckNsYXVzZSxuIGFzIGdldExheWVyRmxvb3JGaWx0ZXJDbGF1c2V9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtPcmlnaW5JZCBhcyByfWZyb21cIi4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L1Byb3BlcnR5T3JpZ2luLmpzXCI7ZnVuY3Rpb24gZShyLGUsbil7Y29uc3Qgbz1lLmZsYXR0ZW4oKCh7c3VibGF5ZXJzOnJ9KT0+cikpLmxlbmd0aDtpZihvIT09ci5sZW5ndGgpcmV0dXJuITA7cmV0dXJuISFyLnNvbWUoKHI9PnIub3JpZ2luSWRPZihcIm1pblNjYWxlXCIpPm58fHIub3JpZ2luSWRPZihcIm1heFNjYWxlXCIpPm58fHIub3JpZ2luSWRPZihcInJlbmRlcmVyXCIpPm58fHIub3JpZ2luSWRPZihcImxhYmVsaW5nSW5mb1wiKT5ufHxyLm9yaWdpbklkT2YoXCJvcGFjaXR5XCIpPm58fHIub3JpZ2luSWRPZihcImxhYmVsc1Zpc2libGVcIik+bnx8ci5vcmlnaW5JZE9mKFwic291cmNlXCIpPm4pKXx8IWkocixlKX1mdW5jdGlvbiBuKGUsbixvKXtyZXR1cm4hIWUuc29tZSgoZT0+e2NvbnN0IG49ZS5zb3VyY2U7cmV0dXJuISghbnx8XCJtYXAtbGF5ZXJcIj09PW4udHlwZSYmbi5tYXBMYXllcklkPT09ZS5pZCYmKG51bGw9PW4uZ2RiVmVyc2lvbnx8bi5nZGJWZXJzaW9uPT09bykpfHxlLm9yaWdpbklkT2YoXCJyZW5kZXJlclwiKT5yLlNFUlZJQ0V8fGUub3JpZ2luSWRPZihcImxhYmVsaW5nSW5mb1wiKT5yLlNFUlZJQ0V8fGUub3JpZ2luSWRPZihcIm9wYWNpdHlcIik+ci5TRVJWSUNFfHxlLm9yaWdpbklkT2YoXCJsYWJlbHNWaXNpYmxlXCIpPnIuU0VSVklDRX0pKXx8IWkoZSxuKX1mdW5jdGlvbiBpKHIsZSl7aWYoIXI/Lmxlbmd0aHx8bnVsbD09ZSlyZXR1cm4hMDtjb25zdCBuPWUuc2xpY2UoKS5yZXZlcnNlKCkuZmxhdHRlbigoKHtzdWJsYXllcnM6cn0pPT5yJiZyLnRvQXJyYXkoKS5yZXZlcnNlKCkpKS5tYXAoKHI9PnIuaWQpKS50b0FycmF5KCk7aWYoci5sZW5ndGg+bi5sZW5ndGgpcmV0dXJuITE7bGV0IGk9MDtjb25zdCBvPW4ubGVuZ3RoO2Zvcihjb25zdHtpZDp0fW9mIHIpe2Zvcig7aTxvJiZuW2ldIT09dDspaSsrO2lmKGk+PW8pcmV0dXJuITF9cmV0dXJuITB9ZnVuY3Rpb24gbyhyKXtyZXR1cm4hIXImJnIuc29tZSgocj0+bnVsbCE9ci5taW5TY2FsZXx8bnVsbCE9ci5sYXllckRlZmluaXRpb24/Lm1pblNjYWxlKSl9ZXhwb3J0e24gYXMgaXNFeHBvcnREeW5hbWljLG8gYXMgaXNTdWJsYXllck92ZXJoYXVsLGUgYXMgc2hvdWxkV3JpdGVTdWJsYXllclN0cnVjdHVyZX07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuZnVuY3Rpb24gdCh0LGUpe3JldHVybiBlP1wieG9mZnNldFwiaW4gZSYmZS54b2Zmc2V0P01hdGgubWF4KHQsTWF0aC5hYnMoZS54b2Zmc2V0KSk6XCJ5b2Zmc2V0XCJpbiBlJiZlLnlvZmZzZXQ/TWF0aC5tYXgodCxNYXRoLmFicyhlLnlvZmZzZXR8fDApKTp0OnR9ZnVuY3Rpb24gZSh0KXtsZXQgZT0wLG49MDtmb3IobGV0IHI9MDtyPHQubGVuZ3RoO3IrKyl7Y29uc3Qgbz10W3JdLnNpemU7XCJudW1iZXJcIj09dHlwZW9mIG8mJihlKz1vLG4rKyl9cmV0dXJuIGUvbn1mdW5jdGlvbiBuKHQsbil7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIHQ/dDp0Py5zdG9wcz8ubGVuZ3RoP2UodC5zdG9wcyk6bn1mdW5jdGlvbiByKHQsZSl7aWYoIWUpcmV0dXJuIHQ7Y29uc3Qgcj1lLmZpbHRlcigodD0+XCJzaXplXCI9PT10LnR5cGUpKS5tYXAoKGU9Pntjb25zdHttYXhTaXplOnIsbWluU2l6ZTpvfT1lO3JldHVybihuKHIsdCkrbihvLHQpKS8yfSkpO2xldCBvPTA7Y29uc3Qgcz1yLmxlbmd0aDtpZigwPT09cylyZXR1cm4gdDtmb3IobGV0IG49MDtuPHM7bisrKW8rPXJbbl07Y29uc3QgZj1NYXRoLmZsb29yKG8vcyk7cmV0dXJuIE1hdGgubWF4KGYsdCl9ZnVuY3Rpb24gbyhlKXtjb25zdCBuPWU/LnJlbmRlcmVyLG89ZT8uZXZlbnQ/LnBvaW50ZXJUeXBlLHM9XCJ0b3VjaFwiPT09bz85OjY7aWYoIW4pcmV0dXJuIHM7Y29uc3QgZj1cInZpc3VhbFZhcmlhYmxlc1wiaW4gbj9yKHMsbi52aXN1YWxWYXJpYWJsZXMpOnM7aWYoXCJzaW1wbGVcIj09PW4udHlwZSlyZXR1cm4gdChmLG4uc3ltYm9sKTtpZihcInVuaXF1ZS12YWx1ZVwiPT09bi50eXBlKXtsZXQgZT1mO3JldHVybiBuLnVuaXF1ZVZhbHVlSW5mb3M/LmZvckVhY2goKG49PntlPXQoZSxuLnN5bWJvbCl9KSksZX1pZihcImNsYXNzLWJyZWFrc1wiPT09bi50eXBlKXtsZXQgZT1mO3JldHVybiBuLmNsYXNzQnJlYWtJbmZvcy5mb3JFYWNoKChuPT57ZT10KGUsbi5zeW1ib2wpfSkpLGV9cmV0dXJuXCJkb3QtZGVuc2l0eVwiPT09bi50eXBlfHxuLnR5cGUsZn1leHBvcnR7byBhcyBjYWxjdWxhdGVUb2xlcmFuY2V9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydCByIGZyb21cIi4uL3JlcXVlc3QuanNcIjtpbXBvcnR7bm9ybWFsaXplQ2VudHJhbE1lcmlkaWFuIGFzIGV9ZnJvbVwiLi4vZ2VvbWV0cnkvc3VwcG9ydC9ub3JtYWxpemVVdGlscy5qc1wiO2ltcG9ydHtwYXJzZVVybCBhcyB0LGVuY29kZSBhcyBvLGFzVmFsaWRPcHRpb25zIGFzIHN9ZnJvbVwiLi91dGlscy5qc1wiO2ltcG9ydHtpZGVudGlmeVRvSWRlbnRpZnlSRVNUUGFyYW1ldGVycyBhcyBufWZyb21cIi4vb3BlcmF0aW9ucy9pZGVudGlmeS5qc1wiO2ltcG9ydCB1IGZyb21cIi4vc3VwcG9ydC9JZGVudGlmeVBhcmFtZXRlcnMuanNcIjtpbXBvcnQgaSBmcm9tXCIuL3N1cHBvcnQvSWRlbnRpZnlSZXN1bHQuanNcIjthc3luYyBmdW5jdGlvbiBmKHUsaSxmKXtjb25zdCBjPShpPWEoaSkpLmdlb21ldHJ5P1tpLmdlb21ldHJ5XTpbXSxsPXQodSk7cmV0dXJuIGwucGF0aCs9XCIvaWRlbnRpZnlcIixlKGMpLnRoZW4oKGU9Pntjb25zdCB0PW4oaSx7Z2VvbWV0cnk6ZT8uWzBdfSksdT1vKHsuLi5sLnF1ZXJ5LGY6XCJqc29uXCIsLi4udH0pLGE9cyh1LGYpO3JldHVybiByKGwucGF0aCxhKS50aGVuKG0pLnRoZW4oKHI9PnAocixpLnN1YmxheWVycykpKX0pKX1mdW5jdGlvbiBtKHIpe2NvbnN0IGU9ci5kYXRhO3JldHVybiBlLnJlc3VsdHM9ZS5yZXN1bHRzfHxbXSxlLmV4Y2VlZGVkVHJhbnNmZXJMaW1pdD1Cb29sZWFuKGUuZXhjZWVkZWRUcmFuc2ZlckxpbWl0KSxlLnJlc3VsdHM9ZS5yZXN1bHRzLm1hcCgocj0+aS5mcm9tSlNPTihyKSkpLGV9ZnVuY3Rpb24gYShyKXtyZXR1cm4gcj11LmZyb20ocil9ZnVuY3Rpb24gcChyLGUpe2lmKCFlPy5sZW5ndGgpcmV0dXJuIHI7Y29uc3QgdD1uZXcgTWFwO2Z1bmN0aW9uIG8ocil7dC5zZXQoci5pZCxyKSxyLnN1YmxheWVycyYmci5zdWJsYXllcnMuZm9yRWFjaChvKX1lLmZvckVhY2gobyk7Zm9yKGNvbnN0IHMgb2Ygci5yZXN1bHRzKXMuZmVhdHVyZS5zb3VyY2VMYXllcj10LmdldChzLmxheWVySWQpO3JldHVybiByfWV4cG9ydHtmIGFzIGlkZW50aWZ5fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7c3FsQW5kIGFzIGV9ZnJvbVwiLi4vLi4vY29yZS9zcWwuanNcIjtpbXBvcnR7Z2V0SnNvblR5cGUgYXMgcn1mcm9tXCIuLi8uLi9nZW9tZXRyeS9zdXBwb3J0L2pzb25VdGlscy5qc1wiO2ltcG9ydHtnZXRTY2FsZSBhcyB0fWZyb21cIi4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvc2NhbGVVdGlscy5qc1wiO2ltcG9ydHtzclRvUkVTVFZhbHVlIGFzIG59ZnJvbVwiLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9zcGF0aWFsUmVmZXJlbmNlVXRpbHMuanNcIjtpbXBvcnR7Z2V0TGF5ZXJGbG9vckZpbHRlckNsYXVzZSBhcyBpfWZyb21cIi4uLy4uL2xheWVycy9zdXBwb3J0L2Zsb29yRmlsdGVyVXRpbHMuanNcIjtpbXBvcnR7aXNFeHBvcnREeW5hbWljIGFzIHN9ZnJvbVwiLi4vLi4vbGF5ZXJzL3N1cHBvcnQvc3VibGF5ZXJVdGlscy5qc1wiO2Z1bmN0aW9uIGwoZSx0KXtjb25zdHtkcGk6aSxnZGJWZXJzaW9uOnMsZ2VvbWV0cnk6bCxnZW9tZXRyeVByZWNpc2lvbjphLGhlaWdodDpwLGxheWVyT3B0aW9uOmYsbWFwRXh0ZW50Om0sbWF4QWxsb3dhYmxlT2Zmc2V0OnkscmV0dXJuRmllbGROYW1lOnUscmV0dXJuR2VvbWV0cnk6YyxyZXR1cm5VbmZvcm1hdHRlZFZhbHVlczpkLHJldHVyblo6ZyxzcGF0aWFsUmVmZXJlbmNlOngsdGltZUV4dGVudDpiLHRvbGVyYW5jZTpoLHdpZHRoOkV9PWUudG9KU09OKCkse2R5bmFtaWNMYXllcnM6TyxsYXllckRlZnM6UyxsYXllcklkczpqfT1vKGUpLE49bnVsbCE9dD8uZ2VvbWV0cnk/dC5nZW9tZXRyeTpudWxsLCQ9e2dlb21ldHJ5UHJlY2lzaW9uOmEsbWF4QWxsb3dhYmxlT2Zmc2V0OnkscmV0dXJuRmllbGROYW1lOnUscmV0dXJuR2VvbWV0cnk6YyxyZXR1cm5VbmZvcm1hdHRlZFZhbHVlczpkLHJldHVyblo6Zyx0b2xlcmFuY2U6aH0sST1OJiZOLnRvSlNPTigpfHxsOyQuaW1hZ2VEaXNwbGF5PWAke0V9LCR7cH0sJHtpfWAscyYmKCQuZ2RiVmVyc2lvbj1zKSxJJiYoZGVsZXRlIEkuc3BhdGlhbFJlZmVyZW5jZSwkLmdlb21ldHJ5PUpTT04uc3RyaW5naWZ5KEkpLCQuZ2VvbWV0cnlUeXBlPXIoSSkpO2NvbnN0IFI9eD8/ST8uc3BhdGlhbFJlZmVyZW5jZT8/bT8uc3BhdGlhbFJlZmVyZW5jZTtpZihSJiYoJC5zcj1uKFIpKSwkLnRpbWU9Yj9bYi5zdGFydCxiLmVuZF0uam9pbihcIixcIik6bnVsbCxtKXtjb25zdHt4bWluOmUseW1pbjpyLHhtYXg6dCx5bWF4Om59PW07JC5tYXBFeHRlbnQ9YCR7ZX0sJHtyfSwke3R9LCR7bn1gfXJldHVybiBTJiYoJC5sYXllckRlZnM9UyksTyYmIVMmJigkLmR5bmFtaWNMYXllcnM9TyksJC5sYXllcnM9XCJwb3B1cFwiPT09Zj9cInZpc2libGVcIjpmLGomJiFPJiYoJC5sYXllcnMrPWA6JHtqLmpvaW4oXCIsXCIpfWApLCR9ZnVuY3Rpb24gbyhlKXtjb25zdHttYXBFeHRlbnQ6cixmbG9vcnM6bix3aWR0aDpsLHN1YmxheWVyczpvLGxheWVySWRzOnAsbGF5ZXJPcHRpb246ZixnZGJWZXJzaW9uOm19PWUseT1vPy5maW5kKChlPT5udWxsIT1lLmxheWVyKSk/LmxheWVyPy5zZXJ2aWNlU3VibGF5ZXJzLHU9XCJwb3B1cFwiPT09ZixjPXt9LGQ9dCh7ZXh0ZW50OnIsd2lkdGg6bCxzcGF0aWFsUmVmZXJlbmNlOnI/LnNwYXRpYWxSZWZlcmVuY2V9KSxnPVtdLHg9ZT0+e2NvbnN0IHI9MD09PWQsdD0wPT09ZS5taW5TY2FsZXx8ZDw9ZS5taW5TY2FsZSxuPTA9PT1lLm1heFNjYWxlfHxkPj1lLm1heFNjYWxlO2lmKGUudmlzaWJsZSYmKHJ8fHQmJm4pKWlmKGUuc3VibGF5ZXJzKWUuc3VibGF5ZXJzLmZvckVhY2goeCk7ZWxzZXtpZighMT09PXA/LmluY2x1ZGVzKGUuaWQpfHx1JiYoIWUucG9wdXBUZW1wbGF0ZXx8IWUucG9wdXBFbmFibGVkKSlyZXR1cm47Zy51bnNoaWZ0KGUpfX07aWYobz8uZm9yRWFjaCh4KSxvJiYhZy5sZW5ndGgpYy5sYXllcklkcz1bXTtlbHNle2NvbnN0IGU9cyhnLHksbSkscj1nLm1hcCgoZT0+e2NvbnN0IHI9aShuLGUpO3JldHVybiBlLnRvRXhwb3J0SW1hZ2VKU09OKHIpfSkpO2lmKGUpYy5keW5hbWljTGF5ZXJzPUpTT04uc3RyaW5naWZ5KHIpO2Vsc2V7aWYobyl7bGV0IGU9Zy5tYXAoKCh7aWQ6ZX0pPT5lKSk7cCYmKGU9ZS5maWx0ZXIoKGU9PnAuaW5jbHVkZXMoZSkpKSksYy5sYXllcklkcz1lfWVsc2UgcD8ubGVuZ3RoJiYoYy5sYXllcklkcz1wKTtjb25zdCBlPWEobixnKTtpZihudWxsIT1lJiZlLmxlbmd0aCl7Y29uc3Qgcj17fTtmb3IoY29uc3QgdCBvZiBlKXQuZGVmaW5pdGlvbkV4cHJlc3Npb24mJihyW3QuaWRdPXQuZGVmaW5pdGlvbkV4cHJlc3Npb24pO09iamVjdC5rZXlzKHIpLmxlbmd0aCYmKGMubGF5ZXJEZWZzPUpTT04uc3RyaW5naWZ5KHIpKX19fXJldHVybiBjfWZ1bmN0aW9uIGEocix0KXtjb25zdCBuPSEhcj8ubGVuZ3RoLHM9dC5maWx0ZXIoKGU9Pm51bGwhPWUuZGVmaW5pdGlvbkV4cHJlc3Npb258fG4mJm51bGwhPWUuZmxvb3JJbmZvKSk7cmV0dXJuIHMubGVuZ3RoP3MubWFwKCh0PT57Y29uc3Qgbj1pKHIsdCkscz1lKG4sdC5kZWZpbml0aW9uRXhwcmVzc2lvbik7cmV0dXJue2lkOnQuaWQsZGVmaW5pdGlvbkV4cHJlc3Npb246cz8/dm9pZCAwfX0pKTpudWxsfWV4cG9ydHtsIGFzIGlkZW50aWZ5VG9JZGVudGlmeVJFU1RQYXJhbWV0ZXJzLG8gYXMgdG9EeW5hbWljTGF5ZXJzSlNPTn07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e18gYXMgdH1mcm9tXCIuLi8uLi9jaHVua3MvdHNsaWIuZXM2LmpzXCI7aW1wb3J0e2dlb21ldHJ5VHlwZXMgYXMgZX1mcm9tXCIuLi8uLi9nZW9tZXRyeS5qc1wiO2ltcG9ydCBvIGZyb21cIi4uLy4uL1RpbWVFeHRlbnQuanNcIjtpbXBvcnR7SlNPTlN1cHBvcnQgYXMgcn1mcm9tXCIuLi8uLi9jb3JlL0pTT05TdXBwb3J0LmpzXCI7aW1wb3J0e3Byb3BlcnR5IGFzIHN9ZnJvbVwiLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9wcm9wZXJ0eS5qc1wiO2ltcG9ydHtlbnN1cmVDbGFzcyBhcyBpfWZyb21cIi4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2Vuc3VyZVR5cGUuanNcIjtpbXBvcnRcIi4uLy4uL2NvcmUvYXJyYXlVdGlscy5qc1wiO2ltcG9ydFwiLi4vLi4vY29yZS9oYXMuanNcIjtpbXBvcnR7c3ViY2xhc3MgYXMgcH1mcm9tXCIuLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3N1YmNsYXNzLmpzXCI7aW1wb3J0e2Zyb21KU09OIGFzIG59ZnJvbVwiLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9qc29uVXRpbHMuanNcIjtpbXBvcnQgbCBmcm9tXCIuLi8uLi9nZW9tZXRyeS9FeHRlbnQuanNcIjtpbXBvcnQgeSBmcm9tXCIuLi8uLi9nZW9tZXRyeS9TcGF0aWFsUmVmZXJlbmNlLmpzXCI7dmFyIG07bGV0IGE9bT1jbGFzcyBleHRlbmRzIHJ7c3RhdGljIGZyb20odCl7cmV0dXJuIGkobSx0KX1jb25zdHJ1Y3Rvcih0KXtzdXBlcih0KSx0aGlzLmRwaT05Nix0aGlzLmZsb29ycz1udWxsLHRoaXMuZ2RiVmVyc2lvbj1udWxsLHRoaXMuZ2VvbWV0cnk9bnVsbCx0aGlzLmdlb21ldHJ5UHJlY2lzaW9uPW51bGwsdGhpcy5oZWlnaHQ9NDAwLHRoaXMubGF5ZXJJZHM9bnVsbCx0aGlzLmxheWVyT3B0aW9uPVwidG9wXCIsdGhpcy5tYXBFeHRlbnQ9bnVsbCx0aGlzLm1heEFsbG93YWJsZU9mZnNldD1udWxsLHRoaXMucmV0dXJuRmllbGROYW1lPSEwLHRoaXMucmV0dXJuR2VvbWV0cnk9ITEsdGhpcy5yZXR1cm5NPSExLHRoaXMucmV0dXJuVW5mb3JtYXR0ZWRWYWx1ZXM9ITAsdGhpcy5yZXR1cm5aPSExLHRoaXMuc3BhdGlhbFJlZmVyZW5jZT1udWxsLHRoaXMuc3VibGF5ZXJzPW51bGwsdGhpcy50aW1lRXh0ZW50PW51bGwsdGhpcy50b2xlcmFuY2U9bnVsbCx0aGlzLndpZHRoPTQwMH19O3QoW3Moe3R5cGU6TnVtYmVyLGpzb246e3dyaXRlOiEwfX0pXSxhLnByb3RvdHlwZSxcImRwaVwiLHZvaWQgMCksdChbcygpXSxhLnByb3RvdHlwZSxcImZsb29yc1wiLHZvaWQgMCksdChbcyh7dHlwZTpTdHJpbmcsanNvbjp7d3JpdGU6ITB9fSldLGEucHJvdG90eXBlLFwiZ2RiVmVyc2lvblwiLHZvaWQgMCksdChbcyh7dHlwZXM6ZSxqc29uOntyZWFkOm4sd3JpdGU6ITB9fSldLGEucHJvdG90eXBlLFwiZ2VvbWV0cnlcIix2b2lkIDApLHQoW3Moe3R5cGU6TnVtYmVyLGpzb246e3dyaXRlOiEwfX0pXSxhLnByb3RvdHlwZSxcImdlb21ldHJ5UHJlY2lzaW9uXCIsdm9pZCAwKSx0KFtzKHt0eXBlOk51bWJlcixqc29uOnt3cml0ZTohMH19KV0sYS5wcm90b3R5cGUsXCJoZWlnaHRcIix2b2lkIDApLHQoW3Moe3R5cGU6W051bWJlcl0sanNvbjp7d3JpdGU6ITB9fSldLGEucHJvdG90eXBlLFwibGF5ZXJJZHNcIix2b2lkIDApLHQoW3Moe3R5cGU6W1widG9wXCIsXCJ2aXNpYmxlXCIsXCJhbGxcIixcInBvcHVwXCJdLGpzb246e3dyaXRlOiEwfX0pXSxhLnByb3RvdHlwZSxcImxheWVyT3B0aW9uXCIsdm9pZCAwKSx0KFtzKHt0eXBlOmwsanNvbjp7d3JpdGU6ITB9fSldLGEucHJvdG90eXBlLFwibWFwRXh0ZW50XCIsdm9pZCAwKSx0KFtzKHt0eXBlOk51bWJlcixqc29uOnt3cml0ZTohMH19KV0sYS5wcm90b3R5cGUsXCJtYXhBbGxvd2FibGVPZmZzZXRcIix2b2lkIDApLHQoW3Moe3R5cGU6Qm9vbGVhbixqc29uOnt3cml0ZTohMH19KV0sYS5wcm90b3R5cGUsXCJyZXR1cm5GaWVsZE5hbWVcIix2b2lkIDApLHQoW3Moe3R5cGU6Qm9vbGVhbixqc29uOnt3cml0ZTohMH19KV0sYS5wcm90b3R5cGUsXCJyZXR1cm5HZW9tZXRyeVwiLHZvaWQgMCksdChbcyh7dHlwZTpCb29sZWFuLGpzb246e3dyaXRlOiEwfX0pXSxhLnByb3RvdHlwZSxcInJldHVybk1cIix2b2lkIDApLHQoW3Moe3R5cGU6Qm9vbGVhbixqc29uOnt3cml0ZTohMH19KV0sYS5wcm90b3R5cGUsXCJyZXR1cm5VbmZvcm1hdHRlZFZhbHVlc1wiLHZvaWQgMCksdChbcyh7dHlwZTpCb29sZWFuLGpzb246e3dyaXRlOiEwfX0pXSxhLnByb3RvdHlwZSxcInJldHVyblpcIix2b2lkIDApLHQoW3Moe3R5cGU6eSxqc29uOnt3cml0ZTohMH19KV0sYS5wcm90b3R5cGUsXCJzcGF0aWFsUmVmZXJlbmNlXCIsdm9pZCAwKSx0KFtzKCldLGEucHJvdG90eXBlLFwic3VibGF5ZXJzXCIsdm9pZCAwKSx0KFtzKHt0eXBlOm8sanNvbjp7d3JpdGU6ITB9fSldLGEucHJvdG90eXBlLFwidGltZUV4dGVudFwiLHZvaWQgMCksdChbcyh7dHlwZTpOdW1iZXIsanNvbjp7d3JpdGU6ITB9fSldLGEucHJvdG90eXBlLFwidG9sZXJhbmNlXCIsdm9pZCAwKSx0KFtzKHt0eXBlOk51bWJlcixqc29uOnt3cml0ZTohMH19KV0sYS5wcm90b3R5cGUsXCJ3aWR0aFwiLHZvaWQgMCksYT1tPXQoW3AoXCJlc3JpLnJlc3Quc3VwcG9ydC5JZGVudGlmeVBhcmFtZXRlcnNcIildLGEpO2NvbnN0IHU9YTtleHBvcnR7dSBhcyBkZWZhdWx0fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7XyBhcyByfWZyb21cIi4uLy4uL2NodW5rcy90c2xpYi5lczYuanNcIjtpbXBvcnRcIi4uLy4uL2dlb21ldHJ5LmpzXCI7aW1wb3J0IGUgZnJvbVwiLi4vLi4vR3JhcGhpYy5qc1wiO2ltcG9ydHtKU09OU3VwcG9ydCBhcyB0fWZyb21cIi4uLy4uL2NvcmUvSlNPTlN1cHBvcnQuanNcIjtpbXBvcnR7cHJvcGVydHkgYXMgb31mcm9tXCIuLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3Byb3BlcnR5LmpzXCI7aW1wb3J0XCIuLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9lbnN1cmVUeXBlLmpzXCI7aW1wb3J0XCIuLi8uLi9jb3JlL2FycmF5VXRpbHMuanNcIjtpbXBvcnRcIi4uLy4uL2NvcmUvaGFzLmpzXCI7aW1wb3J0e3JlYWRlciBhcyBzfWZyb21cIi4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvcmVhZGVyLmpzXCI7aW1wb3J0e3N1YmNsYXNzIGFzIHB9ZnJvbVwiLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9zdWJjbGFzcy5qc1wiO2ltcG9ydHt3cml0ZXIgYXMgYX1mcm9tXCIuLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3dyaXRlci5qc1wiO2ltcG9ydHt0eXBlS2ViYWJEaWN0aW9uYXJ5IGFzIGl9ZnJvbVwiLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC90eXBlVXRpbHMuanNcIjtsZXQgdT1jbGFzcyBleHRlbmRzIHR7Y29uc3RydWN0b3Iocil7c3VwZXIociksdGhpcy5kaXNwbGF5RmllbGROYW1lPW51bGwsdGhpcy5mZWF0dXJlPW51bGwsdGhpcy5sYXllcklkPW51bGwsdGhpcy5sYXllck5hbWU9bnVsbH1yZWFkRmVhdHVyZShyLHQpe3JldHVybiBlLmZyb21KU09OKHthdHRyaWJ1dGVzOnsuLi50LmF0dHJpYnV0ZXN9LGdlb21ldHJ5OnsuLi50Lmdlb21ldHJ5fX0pfXdyaXRlRmVhdHVyZShyLGUpe2lmKCFyKXJldHVybjtjb25zdHthdHRyaWJ1dGVzOnQsZ2VvbWV0cnk6b309cjt0JiYoZS5hdHRyaWJ1dGVzPXsuLi50fSksbnVsbCE9byYmKGUuZ2VvbWV0cnk9by50b0pTT04oKSxlLmdlb21ldHJ5VHlwZT1pLnRvSlNPTihvLnR5cGUpKX19O3IoW28oe3R5cGU6U3RyaW5nLGpzb246e3dyaXRlOiEwfX0pXSx1LnByb3RvdHlwZSxcImRpc3BsYXlGaWVsZE5hbWVcIix2b2lkIDApLHIoW28oe3R5cGU6ZX0pXSx1LnByb3RvdHlwZSxcImZlYXR1cmVcIix2b2lkIDApLHIoW3MoXCJmZWF0dXJlXCIsW1wiYXR0cmlidXRlc1wiLFwiZ2VvbWV0cnlcIl0pXSx1LnByb3RvdHlwZSxcInJlYWRGZWF0dXJlXCIsbnVsbCkscihbYShcImZlYXR1cmVcIildLHUucHJvdG90eXBlLFwid3JpdGVGZWF0dXJlXCIsbnVsbCkscihbbyh7dHlwZTpOdW1iZXIsanNvbjp7d3JpdGU6ITB9fSldLHUucHJvdG90eXBlLFwibGF5ZXJJZFwiLHZvaWQgMCkscihbbyh7dHlwZTpTdHJpbmcsanNvbjp7d3JpdGU6ITB9fSldLHUucHJvdG90eXBlLFwibGF5ZXJOYW1lXCIsdm9pZCAwKSx1PXIoW3AoXCJlc3JpLnJlc3Quc3VwcG9ydC5JZGVudGlmeVJlc3VsdFwiKV0sdSk7Y29uc3QgbT11O2V4cG9ydHttIGFzIGRlZmF1bHR9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtfIGFzIGV9ZnJvbVwiLi4vLi4vLi4vY2h1bmtzL3RzbGliLmVzNi5qc1wiO2ltcG9ydCB0IGZyb21cIi4uLy4uLy4uL0dyYXBoaWMuanNcIjtpbXBvcnQgciBmcm9tXCIuLi8uLi8uLi9jb3JlL0FjY2Vzc29yLmpzXCI7aW1wb3J0e2lzU29tZSBhcyBzfWZyb21cIi4uLy4uLy4uL2NvcmUvYXJyYXlVdGlscy5qc1wiO2ltcG9ydCBpIGZyb21cIi4uLy4uLy4uL2NvcmUvQ29sbGVjdGlvbi5qc1wiO2ltcG9ydCBvIGZyb21cIi4uLy4uLy4uL2NvcmUvRXJyb3IuanNcIjtpbXBvcnR7bWFrZUhhbmRsZSBhcyBhfWZyb21cIi4uLy4uLy4uL2NvcmUvaGFuZGxlVXRpbHMuanNcIjtpbXBvcnQgaGFzIGZyb21cIi4uLy4uLy4uL2NvcmUvaGFzLmpzXCI7aW1wb3J0e2dldE9yQ3JlYXRlTWFwVmFsdWUgYXMgbn1mcm9tXCIuLi8uLi8uLi9jb3JlL01hcFV0aWxzLmpzXCI7aW1wb3J0e2RlYm91bmNlIGFzIGx9ZnJvbVwiLi4vLi4vLi4vY29yZS9wcm9taXNlVXRpbHMuanNcIjtpbXBvcnR7b24gYXMgcH1mcm9tXCIuLi8uLi8uLi9jb3JlL3JlYWN0aXZlVXRpbHMuanNcIjtpbXBvcnR7Z2V0TWV0ZXJzUGVyVW5pdEZvclNSIGFzIGN9ZnJvbVwiLi4vLi4vLi4vY29yZS91bml0VXRpbHMuanNcIjtpbXBvcnR7cHJvcGVydHkgYXMgdX1mcm9tXCIuLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3Byb3BlcnR5LmpzXCI7aW1wb3J0XCIuLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9lbnN1cmVUeXBlLmpzXCI7aW1wb3J0e3N1YmNsYXNzIGFzIGh9ZnJvbVwiLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9zdWJjbGFzcy5qc1wiO2ltcG9ydCB5IGZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L0V4dGVudC5qc1wiO2ltcG9ydHtnZXRSZXNvbHV0aW9uRm9yU2NhbGUgYXMgbX1mcm9tXCIuLi8uLi8uLi9nZW9tZXRyeS9zdXBwb3J0L3NjYWxlVXRpbHMuanNcIjtpbXBvcnR7Y29sbGVjdEZpZWxkcyBhcyBmfWZyb21cIi4uLy4uLy4uL2xheWVycy9zdXBwb3J0L2ZpZWxkVXRpbHMuanNcIjtpbXBvcnR7Z2V0TGF5ZXJGbG9vckZpbHRlckNsYXVzZSBhcyBkfWZyb21cIi4uLy4uLy4uL2xheWVycy9zdXBwb3J0L2Zsb29yRmlsdGVyVXRpbHMuanNcIjtpbXBvcnR7Y2FsY3VsYXRlVG9sZXJhbmNlIGFzIGd9ZnJvbVwiLi4vLi4vLi4vcmVuZGVyZXJzL3N1cHBvcnQvY2xpY2tUb2xlcmFuY2VVdGlscy5qc1wiO2ltcG9ydHtpZGVudGlmeSBhcyB3fWZyb21cIi4uLy4uLy4uL3Jlc3QvaWRlbnRpZnkuanNcIjtpbXBvcnQgYiBmcm9tXCIuLi8uLi8uLi9yZXN0L3N1cHBvcnQvSWRlbnRpZnlQYXJhbWV0ZXJzLmpzXCI7aW1wb3J0e2xvYWRBcmNhZGUgYXMgdn1mcm9tXCIuLi8uLi8uLi9zdXBwb3J0L2FyY2FkZU9uRGVtYW5kLmpzXCI7aW1wb3J0IGogZnJvbVwiLi4vLi4vLi4vc3ltYm9scy9TaW1wbGVNYXJrZXJTeW1ib2wuanNcIjtpbXBvcnR7Z2V0UmVxdWlyZWRGaWVsZHMgYXMgeCxnZXRGZXRjaFBvcHVwVGVtcGxhdGUgYXMgRn1mcm9tXCIuL3BvcHVwVXRpbHMuanNcIjtsZXQgUD1udWxsO2Z1bmN0aW9uIFMoZSx0KXtyZXR1cm5cInRpbGVcIj09PXQudHlwZXx8XCJtYXAtaW1hZ2VcIj09PXQudHlwZX1sZXQgRz1jbGFzcyBleHRlbmRzIHJ7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5fZmVhdHVyZXNSZXNvbHV0aW9ucz1uZXcgV2Vha01hcCx0aGlzLmhpZ2hsaWdodEdyYXBoaWNzPW51bGwsdGhpcy5oaWdobGlnaHRHcmFwaGljVXBkYXRlZD1udWxsLHRoaXMudXBkYXRlSGlnaGxpZ2h0ZWRGZWF0dXJlcz1sKChhc3luYyBlPT57dGhpcy5kZXN0cm95ZWR8fHRoaXMudXBkYXRpbmdIYW5kbGVzLmFkZFByb21pc2UodGhpcy5fdXBkYXRlSGlnaGxpZ2h0ZWRGZWF0dXJlc0dlb21ldHJpZXMoZSkuY2F0Y2goKCgpPT57fSkpKX0pKX1pbml0aWFsaXplKCl7Y29uc3QgZT1lPT57dGhpcy51cGRhdGluZ0hhbmRsZXMuYWRkUHJvbWlzZSh0aGlzLl91cGRhdGVIaWdobGlnaHRlZEZlYXR1cmVzU3ltYm9scyhlKS5jYXRjaCgoKCk9Pnt9KSkpLHRoaXMudXBkYXRlSGlnaGxpZ2h0ZWRGZWF0dXJlcyh0aGlzLl9oaWdobGlnaHRHZW9tZXRyaWVzUmVzb2x1dGlvbil9O3RoaXMuYWRkSGFuZGxlcyhbcCgoKCk9PnRoaXMuaGlnaGxpZ2h0R3JhcGhpY3MpLFwiY2hhbmdlXCIsKHQ9PmUodC5hZGRlZCkpLHtvbkxpc3RlbmVyQWRkOnQ9PmUodCl9KV0pfWFzeW5jIGZldGNoUG9wdXBGZWF0dXJlcyhlLHQpe2NvbnN0e2xheWVyVmlldzp7bGF5ZXI6cix2aWV3OntzY2FsZTpzfX19PXRoaXM7aWYoIWUpdGhyb3cgbmV3IG8oXCJmZXRjaFBvcHVwRmVhdHVyZXM6aW52YWxpZC1hcmVhXCIsXCJOb3RoaW5nIHRvIGZldGNoIHdpdGhvdXQgYXJlYVwiLHtsYXllcjpyfSk7Y29uc3QgaT1VKHIuc3VibGF5ZXJzLHMsdCk7aWYoIWkubGVuZ3RoKXJldHVybltdO2NvbnN0IGE9YXdhaXQgUihyLGkpO2lmKCEoKHIuY2FwYWJpbGl0aWVzPy5vcGVyYXRpb25zPy5zdXBwb3J0c0lkZW50aWZ5Pz8hMCkmJnIudmVyc2lvbj49MTAuNSkmJiFhKXRocm93IG5ldyBvKFwiZmV0Y2hQb3B1cEZlYXR1cmVzOm5vdC1zdXBwb3J0ZWRcIixcInF1ZXJ5IG9wZXJhdGlvbiBpcyBkaXNhYmxlZCBmb3IgdGhpcyBzZXJ2aWNlXCIse2xheWVyOnJ9KTtyZXR1cm4gYT90aGlzLl9mZXRjaFBvcHVwRmVhdHVyZXNVc2luZ1F1ZXJpZXMoZSxpLHQpOnRoaXMuX2ZldGNoUG9wdXBGZWF0dXJlc1VzaW5nSWRlbnRpZnkoZSxpLHQpfWNsZWFySGlnaGxpZ2h0cygpe3RoaXMuaGlnaGxpZ2h0R3JhcGhpY3M/LnJlbW92ZUFsbCgpfWhpZ2hsaWdodChlKXtjb25zdCByPXRoaXMuaGlnaGxpZ2h0R3JhcGhpY3M7aWYoIXIpcmV0dXJuIGEoKTtsZXQgbz1udWxsO2lmKGUgaW5zdGFuY2VvZiB0P289W2VdOmkuaXNDb2xsZWN0aW9uKGUpJiZlLmxlbmd0aD4wP289ZS50b0FycmF5KCk6QXJyYXkuaXNBcnJheShlKSYmZS5sZW5ndGg+MCYmKG89ZSksbz1vPy5maWx0ZXIocyksIW8/Lmxlbmd0aClyZXR1cm4gYSgpO2Zvcihjb25zdCB0IG9mIG8pe2NvbnN0IGU9dC5zb3VyY2VMYXllcjtudWxsIT1lJiZcImdlb21ldHJ5VHlwZVwiaW4gZSYmXCJwb2ludFwiPT09ZS5nZW9tZXRyeVR5cGUmJih0LnZpc2libGU9ITEpfXJldHVybiByLmFkZE1hbnkobyksYSgoKCk9PnIucmVtb3ZlTWFueShvPz9bXSkpKX1hc3luYyBfdXBkYXRlSGlnaGxpZ2h0ZWRGZWF0dXJlc1N5bWJvbHMoZSl7Y29uc3R7bGF5ZXJWaWV3Ont2aWV3OnR9LGhpZ2hsaWdodEdyYXBoaWNzOnIsaGlnaGxpZ2h0R3JhcGhpY1VwZGF0ZWQ6c309dGhpcztpZihyJiZzKWZvcihjb25zdCBpIG9mIGUpe2NvbnN0IGU9aS5zb3VyY2VMYXllciYmXCJyZW5kZXJlclwiaW4gaS5zb3VyY2VMYXllciYmaS5zb3VyY2VMYXllci5yZW5kZXJlcjtpLnNvdXJjZUxheWVyJiZcImdlb21ldHJ5VHlwZVwiaW4gaS5zb3VyY2VMYXllciYmXCJwb2ludFwiPT09aS5zb3VyY2VMYXllci5nZW9tZXRyeVR5cGUmJmUmJlwiZ2V0U3ltYm9sQXN5bmNcImluIGUmJmUuZ2V0U3ltYm9sQXN5bmMoaSkudGhlbigoYXN5bmMgbz0+e298fD1uZXcgajtsZXQgYT1udWxsO2NvbnN0IG49XCJ2aXN1YWxWYXJpYWJsZXNcImluIGU/ZS52aXN1YWxWYXJpYWJsZXM/LmZpbmQoKGU9Plwic2l6ZVwiPT09ZS50eXBlKSk6dm9pZCAwO24mJihQfHwoUD0oYXdhaXQgaW1wb3J0KFwiLi4vLi4vLi4vcmVuZGVyZXJzL3Zpc3VhbFZhcmlhYmxlcy9zdXBwb3J0L3Zpc3VhbFZhcmlhYmxlVXRpbHMuanNcIikpLmdldFNpemUpLGE9UChuLGkse3ZpZXc6dC50eXBlLHNjYWxlOnQuc2NhbGUsc2hhcGU6XCJzaW1wbGUtbWFya2VyXCI9PT1vLnR5cGU/by5zdHlsZTpudWxsfSkpLGF8fD1cIndpZHRoXCJpbiBvJiZcImhlaWdodFwiaW4gbyYmbnVsbCE9by53aWR0aCYmbnVsbCE9by5oZWlnaHQ/TWF0aC5tYXgoby53aWR0aCxvLmhlaWdodCk6XCJzaXplXCJpbiBvP28uc2l6ZToxNixyLmluY2x1ZGVzKGkpJiYoaS5zeW1ib2w9bmV3IGooe3N0eWxlOlwic3F1YXJlXCIsc2l6ZTphLHhvZmZzZXQ6XCJ4b2Zmc2V0XCJpbiBvP28ueG9mZnNldDowLHlvZmZzZXQ6XCJ5b2Zmc2V0XCJpbiBvP28ueW9mZnNldDowfSkscyhpLFwic3ltYm9sXCIpLGkudmlzaWJsZT0hMCl9KSl9fWFzeW5jIF91cGRhdGVIaWdobGlnaHRlZEZlYXR1cmVzR2VvbWV0cmllcyhlKXtjb25zdHtsYXllclZpZXc6e2xheWVyOnQsdmlldzpyfSxoaWdobGlnaHRHcmFwaGljczpzLGhpZ2hsaWdodEdyYXBoaWNVcGRhdGVkOml9PXRoaXM7aWYodGhpcy5faGlnaGxpZ2h0R2VvbWV0cmllc1Jlc29sdXRpb249ZSwhaXx8IXM/Lmxlbmd0aHx8IXQuY2FwYWJpbGl0aWVzLm9wZXJhdGlvbnMuc3VwcG9ydHNRdWVyeSlyZXR1cm47Y29uc3Qgbz10aGlzLl9nZXRUYXJnZXRSZXNvbHV0aW9uKGUpLGE9bmV3IE1hcDtmb3IoY29uc3QgYyBvZiBzKWlmKCF0aGlzLl9mZWF0dXJlc1Jlc29sdXRpb25zLmhhcyhjKXx8dGhpcy5fZmVhdHVyZXNSZXNvbHV0aW9ucy5nZXQoYyk+byl7Y29uc3QgZT1jLnNvdXJjZUxheWVyO24oYSxlLCgoKT0+bmV3IE1hcCkpLnNldChjLmdldE9iamVjdElkKCksYyl9Y29uc3QgbD1BcnJheS5mcm9tKGEsKChbZSx0XSk9Pntjb25zdCBzPWUuY3JlYXRlUXVlcnkoKTtyZXR1cm4gcy5vYmplY3RJZHM9Wy4uLnQua2V5cygpXSxzLm91dEZpZWxkcz1bZS5vYmplY3RJZEZpZWxkXSxzLnJldHVybkdlb21ldHJ5PSEwLHMubWF4QWxsb3dhYmxlT2Zmc2V0PW8scy5vdXRTcGF0aWFsUmVmZXJlbmNlPXIuc3BhdGlhbFJlZmVyZW5jZSxlLnF1ZXJ5RmVhdHVyZXMocyl9KSkscD1hd2FpdCBQcm9taXNlLmFsbChsKTtpZighdGhpcy5kZXN0cm95ZWQpZm9yKGNvbnN0e2ZlYXR1cmVzOm59b2YgcClmb3IoY29uc3QgZSBvZiBuKXtjb25zdCB0PWUuc291cmNlTGF5ZXIscj1hLmdldCh0KS5nZXQoZS5nZXRPYmplY3RJZCgpKTtyJiZzLmluY2x1ZGVzKHIpJiYoci5nZW9tZXRyeT1lLmdlb21ldHJ5LGkocixcImdlb21ldHJ5XCIpLHRoaXMuX2ZlYXR1cmVzUmVzb2x1dGlvbnMuc2V0KHIsbykpfX1fZ2V0VGFyZ2V0UmVzb2x1dGlvbihlKXtjb25zdCB0PWUqYyh0aGlzLmxheWVyVmlldy52aWV3LnNwYXRpYWxSZWZlcmVuY2UpLHI9dC8xNjtyZXR1cm4gcjw9MTA/MDplL3Qqcn1hc3luYyBfZmV0Y2hQb3B1cEZlYXR1cmVzVXNpbmdJZGVudGlmeShlLHQscil7Y29uc3Qgcz1hd2FpdCB0aGlzLl9jcmVhdGVJZGVudGlmeVBhcmFtZXRlcnMoZSx0LHIpO2lmKG51bGw9PXMpcmV0dXJuW107Y29uc3R7cmVzdWx0czppfT1hd2FpdCB3KHRoaXMubGF5ZXJWaWV3LmxheWVyLnBhcnNlZFVybCxzKTtyZXR1cm4gaS5tYXAoKGU9PmUuZmVhdHVyZSkpfWFzeW5jIF9jcmVhdGVJZGVudGlmeVBhcmFtZXRlcnMoZSx0LHIpe2NvbnN0e2Zsb29yczpzLGxheWVyOmksdGltZUV4dGVudDpvLHZpZXc6e3NwYXRpYWxSZWZlcmVuY2U6YSxzY2FsZTpufX09dGhpcy5sYXllclZpZXcsbD1udWxsIT1yP3IuZXZlbnQ6bnVsbDtpZighdC5sZW5ndGgpcmV0dXJuIG51bGw7YXdhaXQgUHJvbWlzZS5hbGwodC5tYXAoKCh7c3VibGF5ZXI6ZX0pPT5lLmxvYWQoKS5jYXRjaCgoKCk9Pnt9KSkpKSk7Y29uc3QgcD1NYXRoLm1pbihoYXMoXCJtYXBzZXJ2aWNlLXBvcHVwLWlkZW50aWZ5LW1heC10b2xlcmFuY2VcIiksaS5hbGxTdWJsYXllcnMucmVkdWNlKCgoZSx0KT0+dC5yZW5kZXJlcj9nKHtyZW5kZXJlcjp0LnJlbmRlcmVyLGV2ZW50Omx9KTplKSwyKSksYz10aGlzLmNyZWF0ZUZldGNoUG9wdXBGZWF0dXJlc1F1ZXJ5R2VvbWV0cnkoZSxwKSx1PW0obixhKSxoPU1hdGgucm91bmQoYy53aWR0aC91KSxmPW5ldyB5KHt4bWluOmMuY2VudGVyLngtdSpoLHltaW46Yy5jZW50ZXIueS11KmgseG1heDpjLmNlbnRlci54K3UqaCx5bWF4OmMuY2VudGVyLnkrdSpoLHNwYXRpYWxSZWZlcmVuY2U6Yy5zcGF0aWFsUmVmZXJlbmNlfSk7cmV0dXJuIG5ldyBiKHtmbG9vcnM6cyxnZGJWZXJzaW9uOlwiZ2RiVmVyc2lvblwiaW4gaT9pLmdkYlZlcnNpb246dm9pZCAwLGdlb21ldHJ5OmUsaGVpZ2h0OmgsbGF5ZXJPcHRpb246XCJwb3B1cFwiLG1hcEV4dGVudDpmLHJldHVybkdlb21ldHJ5OiEwLHNwYXRpYWxSZWZlcmVuY2U6YSxzdWJsYXllcnM6aS5zdWJsYXllcnMsdGltZUV4dGVudDpvLHRvbGVyYW5jZTpwLHdpZHRoOmh9KX1hc3luYyBfZmV0Y2hQb3B1cEZlYXR1cmVzVXNpbmdRdWVyaWVzKGUsdCxyKXtjb25zdHtsYXllclZpZXc6e2Zsb29yczppLHRpbWVFeHRlbnQ6b319PXRoaXMsYT1udWxsIT1yP3IuZXZlbnQ6bnVsbCxuPXQubWFwKChhc3luYyh7c3VibGF5ZXI6dCxwb3B1cFRlbXBsYXRlOnJ9KT0+e2lmKGF3YWl0IHQubG9hZCgpLmNhdGNoKCgoKT0+e30pKSx0LmNhcGFiaWxpdGllcyYmIXQuY2FwYWJpbGl0aWVzLm9wZXJhdGlvbnMuc3VwcG9ydHNRdWVyeSlyZXR1cm5bXTtjb25zdCBzPXQuY3JlYXRlUXVlcnkoKSxuPWcoe3JlbmRlcmVyOnQucmVuZGVyZXIsZXZlbnQ6YX0pLGw9dGhpcy5jcmVhdGVGZXRjaFBvcHVwRmVhdHVyZXNRdWVyeUdlb21ldHJ5KGUsbikscD1uZXcgU2V0LFtjXT1hd2FpdCBQcm9taXNlLmFsbChbeCh0LHIpLHQucmVuZGVyZXI/LmNvbGxlY3RSZXF1aXJlZEZpZWxkcyhwLHQuZmllbGRzSW5kZXgpXSk7ZihwLHQuZmllbGRzSW5kZXgsYyk7Y29uc3QgdT1BcnJheS5mcm9tKHApLnNvcnQoKTtpZihzLmdlb21ldHJ5PWwscy5vdXRGaWVsZHM9dSxzLnRpbWVFeHRlbnQ9byxpKXtjb25zdCBlPWkuY2xvbmUoKSxyPWQoZSx0KTtudWxsIT1yJiYocy53aGVyZT1zLndoZXJlP2AoJHtzLndoZXJlfSkgQU5EICgke3J9KWA6cil9Y29uc3QgaD10aGlzLl9nZXRUYXJnZXRSZXNvbHV0aW9uKGwud2lkdGgvbikseT1hd2FpdCBfKHIpLG09XCJwb2ludFwiPT09dC5nZW9tZXRyeVR5cGV8fHkmJnkuYXJjYWRlVXRpbHMuaGFzR2VvbWV0cnlPcGVyYXRpb25zKHIpO218fChzLm1heEFsbG93YWJsZU9mZnNldD1oKTtsZXR7ZmVhdHVyZXM6d309YXdhaXQgdC5xdWVyeUZlYXR1cmVzKHMpO2NvbnN0IGI9bT8wOmg7dz1hd2FpdCBBKHQsdyk7Zm9yKGNvbnN0IGUgb2Ygdyl0aGlzLl9mZWF0dXJlc1Jlc29sdXRpb25zLnNldChlLGIpO3JldHVybiB3fSkpO3JldHVybihhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQobikpLnJlZHVjZSgoKGUsdCk9PlwiZnVsZmlsbGVkXCI9PT10LnN0YXR1cz9bLi4uZSwuLi50LnZhbHVlXTplKSxbXSkuZmlsdGVyKHMpfX07ZnVuY3Rpb24gVShlLHQscil7Y29uc3Qgcz1bXTtpZighZSlyZXR1cm4gcztjb25zdCBpPWU9Pntjb25zdCBvPTA9PT1lLm1pblNjYWxlfHx0PD1lLm1pblNjYWxlLGE9MD09PWUubWF4U2NhbGV8fHQ+PWUubWF4U2NhbGU7aWYoZS52aXNpYmxlJiZvJiZhKWlmKGUuc3VibGF5ZXJzKWUuc3VibGF5ZXJzLmZvckVhY2goaSk7ZWxzZSBpZihlLnBvcHVwRW5hYmxlZCl7Y29uc3QgdD1GKGUsey4uLnIsZGVmYXVsdFBvcHVwVGVtcGxhdGVFbmFibGVkOiExfSk7bnVsbCE9dCYmcy51bnNoaWZ0KHtzdWJsYXllcjplLHBvcHVwVGVtcGxhdGU6dH0pfX07cmV0dXJuIGUubWFwKGkpLHN9ZnVuY3Rpb24gXyhlKXtyZXR1cm4gZS5leHByZXNzaW9uSW5mb3M/Lmxlbmd0aHx8QXJyYXkuaXNBcnJheShlLmNvbnRlbnQpJiZlLmNvbnRlbnQuc29tZSgoZT0+XCJleHByZXNzaW9uXCI9PT1lLnR5cGUpKT92KCk6UHJvbWlzZS5yZXNvbHZlKCl9YXN5bmMgZnVuY3Rpb24gUihlLHQpe2lmKGUuY2FwYWJpbGl0aWVzPy5vcGVyYXRpb25zPy5zdXBwb3J0c1F1ZXJ5KXJldHVybiEwO3RyeXtyZXR1cm4gYXdhaXQgUHJvbWlzZS5hbnkodC5tYXAoKCh7c3VibGF5ZXI6ZX0pPT5lLmxvYWQoKS50aGVuKCgoKT0+ZS5jYXBhYmlsaXRpZXMub3BlcmF0aW9ucy5zdXBwb3J0c1F1ZXJ5KSkpKSl9Y2F0Y2h7cmV0dXJuITF9fWFzeW5jIGZ1bmN0aW9uIEEoZSx0KXtjb25zdCByPWUucmVuZGVyZXI7cmV0dXJuIHImJlwiZGVmYXVsdFN5bWJvbFwiaW4gciYmIXIuZGVmYXVsdFN5bWJvbCYmKHQ9ci52YWx1ZUV4cHJlc3Npb24/YXdhaXQgUHJvbWlzZS5hbGwodC5tYXAoKGU9PnIuZ2V0U3ltYm9sQXN5bmMoZSkudGhlbigodD0+dD9lOm51bGwpKSkpKS50aGVuKChlPT5lLmZpbHRlcigoZT0+bnVsbCE9ZSkpKSk6dC5maWx0ZXIoKGU9Pm51bGwhPXIuZ2V0U3ltYm9sKGUpKSkpLHR9ZShbdSh7Y29uc3RydWN0T25seTohMH0pXSxHLnByb3RvdHlwZSxcImNyZWF0ZUZldGNoUG9wdXBGZWF0dXJlc1F1ZXJ5R2VvbWV0cnlcIix2b2lkIDApLGUoW3Uoe2NvbnN0cnVjdE9ubHk6ITB9KV0sRy5wcm90b3R5cGUsXCJsYXllclZpZXdcIix2b2lkIDApLGUoW3Uoe2NvbnN0cnVjdE9ubHk6ITB9KV0sRy5wcm90b3R5cGUsXCJoaWdobGlnaHRHcmFwaGljc1wiLHZvaWQgMCksZShbdSh7Y29uc3RydWN0T25seTohMH0pXSxHLnByb3RvdHlwZSxcImhpZ2hsaWdodEdyYXBoaWNVcGRhdGVkXCIsdm9pZCAwKSxlKFt1KHtjb25zdHJ1Y3RPbmx5OiEwfSldLEcucHJvdG90eXBlLFwidXBkYXRpbmdIYW5kbGVzXCIsdm9pZCAwKSxHPWUoW2goXCJlc3JpLnZpZXdzLmxheWVycy5zdXBwb3J0Lk1hcFNlcnZpY2VcIildLEcpO2V4cG9ydHtHIGFzIE1hcFNlcnZpY2VMYXllclZpZXdIZWxwZXIsVSBhcyBjb2xsZWN0UG9wdXBQcm92aWRlcnMsUyBhcyBpc01hcFNlcnZpY2VMYXllclZpZXd9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtnZXRGZWF0dXJlRWRpdEZpZWxkcyBhcyBlLGZpeEZpZWxkcyBhcyBsfWZyb21cIi4uLy4uLy4uL2xheWVycy9zdXBwb3J0L2ZpZWxkVXRpbHMuanNcIjthc3luYyBmdW5jdGlvbiBuKG4scD1uLnBvcHVwVGVtcGxhdGUpe2lmKG51bGw9PXApcmV0dXJuW107Y29uc3QgdT1hd2FpdCBwLmdldFJlcXVpcmVkRmllbGRzKG4uZmllbGRzSW5kZXgpLHtsYXN0RWRpdEluZm9FbmFibGVkOnR9PXAse29iamVjdElkRmllbGQ6ZCx0eXBlSWRGaWVsZDpzLGdsb2JhbElkRmllbGQ6aSxyZWxhdGlvbnNoaXBzOmF9PW47aWYodS5pbmNsdWRlcyhcIipcIikpcmV0dXJuW1wiKlwiXTtjb25zdCBvPXQ/ZShuKTpbXSxmPWwobi5maWVsZHNJbmRleCxbLi4udSwuLi5vXSk7cmV0dXJuIHMmJmYucHVzaChzKSxmJiZkJiZuLmZpZWxkc0luZGV4Py5oYXMoZCkmJiFmLmluY2x1ZGVzKGQpJiZmLnB1c2goZCksZiYmaSYmbi5maWVsZHNJbmRleD8uaGFzKGkpJiYhZi5pbmNsdWRlcyhpKSYmZi5wdXNoKGkpLGEmJmEuZm9yRWFjaCgoZT0+e2NvbnN0e2tleUZpZWxkOmx9PWU7ZiYmbCYmbi5maWVsZHNJbmRleD8uaGFzKGwpJiYhZi5pbmNsdWRlcyhsKSYmZi5wdXNoKGwpfSkpLGZ9ZnVuY3Rpb24gcChlLGwpe3JldHVybiBlLnBvcHVwVGVtcGxhdGU/ZS5wb3B1cFRlbXBsYXRlOm51bGwhPWwmJmwuZGVmYXVsdFBvcHVwVGVtcGxhdGVFbmFibGVkJiZudWxsIT1lLmRlZmF1bHRQb3B1cFRlbXBsYXRlP2UuZGVmYXVsdFBvcHVwVGVtcGxhdGU6bnVsbH1mdW5jdGlvbiB1KGUsbCl7cmV0dXJuIG51bGwhPXAoZSx7ZGVmYXVsdFBvcHVwVGVtcGxhdGVFbmFibGVkOmx9KX1leHBvcnR7cCBhcyBnZXRGZXRjaFBvcHVwVGVtcGxhdGUsbiBhcyBnZXRSZXF1aXJlZEZpZWxkcyx1IGFzIGhhc1BvcHVwVGVtcGxhdGV9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydFwiLi4vLi4vZ2VvbWV0cnkuanNcIjtpbXBvcnR7Z2V0TWV0ZXJzUGVyVW5pdEZvclNSIGFzIGV9ZnJvbVwiLi4vLi4vY29yZS91bml0VXRpbHMuanNcIjtpbXBvcnR7Y2FsY3VsYXRlVG9sZXJhbmNlIGFzIHR9ZnJvbVwiLi4vLi4vcmVuZGVyZXJzL3N1cHBvcnQvY2xpY2tUb2xlcmFuY2VVdGlscy5qc1wiO2ltcG9ydCBuIGZyb21cIi4uLy4uL2dlb21ldHJ5L0V4dGVudC5qc1wiO2Z1bmN0aW9uIHIodCxyLGksYT1uZXcgbil7bGV0IG89MDtpZihcIjJkXCI9PT1pLnR5cGUpbz1yKihpLnJlc29sdXRpb24/PzApO2Vsc2UgaWYoXCIzZFwiPT09aS50eXBlKXtjb25zdCBuPWkub3ZlcmxheVBpeGVsU2l6ZUluTWFwVW5pdHModCksYT1pLmJhc2VtYXBTcGF0aWFsUmVmZXJlbmNlO289bnVsbD09YXx8YS5lcXVhbHMoaS5zcGF0aWFsUmVmZXJlbmNlKT9yKm46ZShhKS9lKGkuc3BhdGlhbFJlZmVyZW5jZSl9Y29uc3Qgcz10LngtbyxsPXQueS1vLG09dC54K28scD10Lnkrbyx7c3BhdGlhbFJlZmVyZW5jZTpjfT1pO3JldHVybiBhLnhtaW49TWF0aC5taW4ocyxtKSxhLnltaW49TWF0aC5taW4obCxwKSxhLnhtYXg9TWF0aC5tYXgocyxtKSxhLnltYXg9TWF0aC5tYXgobCxwKSxhLnNwYXRpYWxSZWZlcmVuY2U9YyxhfWZ1bmN0aW9uIGkoZSxuLGkpe2NvbnN0IG89aS50b01hcChlKTtpZihudWxsPT1vKXJldHVybiExO3JldHVybiByKG8sdCgpLGksYSkuaW50ZXJzZWN0cyhuKX1jb25zdCBhPW5ldyBuO2V4cG9ydHtyIGFzIGNyZWF0ZVF1ZXJ5R2VvbWV0cnksaSBhcyBpbnRlcnNlY3RzRHJhcGVkR2VvbWV0cnl9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9