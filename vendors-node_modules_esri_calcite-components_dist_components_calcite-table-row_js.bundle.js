"use strict";
(self["webpackChunksynview"] = self["webpackChunksynview"] || []).push([["vendors-node_modules_esri_calcite-components_dist_components_calcite-table-row_js"],{

/***/ "./node_modules/@esri/calcite-components/dist/components/calcite-table-row.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/components/calcite-table-row.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CalciteTableRow: () => (/* binding */ CalciteTableRow),
/* harmony export */   defineCustomElement: () => (/* binding */ defineCustomElement)
/* harmony export */ });
/* harmony import */ var _stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @stencil/core/internal/client/index.js */ "./node_modules/@stencil/core/internal/client/index.js");
/* harmony import */ var _dom_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dom.js */ "./node_modules/@esri/calcite-components/dist/components/dom.js");
/* harmony import */ var _key_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./key.js */ "./node_modules/@esri/calcite-components/dist/components/key.js");
/* harmony import */ var _interactive_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./interactive.js */ "./node_modules/@esri/calcite-components/dist/components/interactive.js");
/* harmony import */ var _icon_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./icon.js */ "./node_modules/@esri/calcite-components/dist/components/icon.js");
/* harmony import */ var _table_cell_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./table-cell.js */ "./node_modules/@esri/calcite-components/dist/components/table-cell.js");
/* harmony import */ var _table_header_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./table-header.js */ "./node_modules/@esri/calcite-components/dist/components/table-header.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.7.0
 */








const tableRowCss = ":host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{--calcite-internal-table-row-background:var(--calcite-table-row-background, var(--calcite-ui-foreground-1));--calcite-internal-table-row-border-color:var(--calcite-table-row-border-color, transparent);display:contents}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) tr{pointer-events:none;opacity:var(--calcite-ui-opacity-disabled)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}tr{border-block-end:1px solid var(--calcite-internal-table-row-border-color);background-color:var(--calcite-internal-table-row-background)}";

const TableRow = /*@__PURE__*/ (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_6__.proxyCustomElement)(class extends _stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_6__.HTMLElement {
  constructor() {
    super();
    this.__registerHost();
    this.__attachShadow();
    this.calciteTableRowSelect = (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_6__.createEvent)(this, "calciteTableRowSelect", 6);
    this.calciteInternalTableRowFocusRequest = (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_6__.createEvent)(this, "calciteInternalTableRowFocusRequest", 6);
    this.rowCells = [];
    this.emitTableRowFocusRequest = (cellPosition, rowPosition, destination, lastCell) => {
      this.calciteInternalTableRowFocusRequest.emit({
        cellPosition,
        rowPosition,
        destination,
        lastCell,
      });
    };
    this.updateCells = () => {
      const slottedCells = this.tableRowSlotEl
        ?.assignedElements({ flatten: true })
        ?.filter((el) => el.matches("calcite-table-cell") || el.matches("calcite-table-header"));
      const renderedCells = Array.from(this.tableRowEl?.querySelectorAll("calcite-table-header, calcite-table-cell"))?.filter((el) => el.numberCell || el.selectionCell);
      const cells = renderedCells ? renderedCells.concat(slottedCells) : slottedCells;
      if (cells.length > 0) {
        cells?.forEach((cell, index) => {
          cell.positionInRow = index + 1;
          cell.parentRowType = this.rowType;
          cell.scale = this.scale;
          if (cell.nodeName === "CALCITE-TABLE-CELL") {
            cell.readCellContentsToAT = this.readCellContentsToAT;
            cell.disabled = this.disabled;
            cell.parentRowIsSelected = this.selected;
          }
        });
      }
      this.rowCells =
        cells || [];
      this.cellCount = cells?.length;
    };
    this.handleSelectionOfRow = () => {
      this.calciteTableRowSelect.emit();
    };
    this.handleKeyboardSelection = (event) => {
      if ((0,_key_js__WEBPACK_IMPORTED_MODULE_1__.i)(event.key)) {
        if (event.key === " ") {
          event.preventDefault();
        }
        this.handleSelectionOfRow();
      }
    };
    this.disabled = false;
    this.selected = false;
    this.cellCount = undefined;
    this.rowType = undefined;
    this.numbered = false;
    this.positionSection = undefined;
    this.positionSectionLocalized = undefined;
    this.positionAll = undefined;
    this.readCellContentsToAT = undefined;
    this.scale = undefined;
    this.selectionMode = "none";
    this.selectedRowCount = undefined;
    this.selectedRowCountLocalized = undefined;
    this.bodyRowCount = undefined;
    this.effectiveLocale = "";
  }
  handleCellChanges() {
    if (this.tableRowEl && this.rowCells.length > 0) {
      this.updateCells();
    }
  }
  handleDelayedCellChanges() {
    if (this.tableRowEl && this.rowCells.length > 0) {
      requestAnimationFrame(() => this.updateCells());
    }
  }
  //--------------------------------------------------------------------------
  //
  //  Lifecycle
  //
  //--------------------------------------------------------------------------
  componentDidLoad() {
    if (this.tableRowEl && this.rowCells.length > 0) {
      this.updateCells();
    }
  }
  connectedCallback() {
    (0,_interactive_js__WEBPACK_IMPORTED_MODULE_2__.c)(this);
  }
  componentDidRender() {
    (0,_interactive_js__WEBPACK_IMPORTED_MODULE_2__.u)(this);
  }
  disconnectedCallback() {
    (0,_interactive_js__WEBPACK_IMPORTED_MODULE_2__.d)(this);
  }
  //--------------------------------------------------------------------------
  //
  //  Event Listeners
  //
  //--------------------------------------------------------------------------
  calciteInternalTableRowFocusChangeHandler(event) {
    if (event.target.contains(this.el)) {
      const position = event.detail.cellPosition;
      const rowPosition = event.detail.rowPosition;
      const destination = event.detail.destination;
      const lastCell = event.detail.lastCell;
      if (rowPosition === this.positionAll) {
        if (this.disabled) {
          const deflectDirection = destination === "last" ? "previous" : destination === "first" ? "next" : destination;
          this.emitTableRowFocusRequest(position, this.positionAll, deflectDirection);
          return;
        }
        const cellPosition = lastCell
          ? this.rowCells[this.rowCells.length - 1]
          : this.rowCells?.find((_, index) => index + 1 === position);
        if (cellPosition) {
          cellPosition.setFocus();
        }
      }
    }
  }
  //--------------------------------------------------------------------------
  //
  //  Private Methods
  //
  //--------------------------------------------------------------------------
  keyDownHandler(event) {
    const el = event.target;
    const key = event.key;
    const isControl = event.ctrlKey;
    const cells = this.rowCells;
    if (el.matches("calcite-table-cell") || el.matches("calcite-table-header")) {
      switch (key) {
        case "ArrowUp":
          this.emitTableRowFocusRequest(el.positionInRow, this.positionAll, "previous");
          event.preventDefault();
          break;
        case "ArrowDown":
          this.emitTableRowFocusRequest(el.positionInRow, this.positionAll, "next");
          event.preventDefault();
          break;
        case "PageUp":
          this.emitTableRowFocusRequest(el.positionInRow, this.positionAll, "first");
          event.preventDefault();
          break;
        case "PageDown":
          this.emitTableRowFocusRequest(el.positionInRow, this.positionAll, "last");
          event.preventDefault();
          break;
        case "ArrowLeft":
          (0,_dom_js__WEBPACK_IMPORTED_MODULE_0__.i)(cells, el, "previous", false);
          event.preventDefault();
          break;
        case "ArrowRight":
          (0,_dom_js__WEBPACK_IMPORTED_MODULE_0__.i)(cells, el, "next", false);
          event.preventDefault();
          break;
        case "Home":
          if (isControl) {
            this.emitTableRowFocusRequest(1, this.positionAll, "first");
            event.preventDefault();
          }
          else {
            (0,_dom_js__WEBPACK_IMPORTED_MODULE_0__.i)(cells, el, "first", false);
            event.preventDefault();
          }
          break;
        case "End":
          if (isControl) {
            this.emitTableRowFocusRequest(this.rowCells?.length, this.positionAll, "last", true);
            event.preventDefault();
          }
          else {
            (0,_dom_js__WEBPACK_IMPORTED_MODULE_0__.i)(cells, el, "last", false);
            event.preventDefault();
          }
          break;
      }
    }
  }
  //--------------------------------------------------------------------------
  //
  //  Render Methods
  //
  //--------------------------------------------------------------------------
  renderSelectionIcon() {
    const icon = this.selectionMode === "multiple" && this.selected
      ? "check-square-f"
      : this.selectionMode === "multiple"
        ? "square"
        : this.selected
          ? "circle-f"
          : "circle";
    return (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_6__.h)("calcite-icon", { icon: icon, scale: this.scale === "l" ? "m" : "s" });
  }
  renderSelectableCell() {
    return this.rowType === "head" ? ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_6__.h)("calcite-table-header", { alignment: "center", bodyRowCount: this.bodyRowCount, key: "selection-head", onClick: this.selectionMode === "multiple" && this.handleSelectionOfRow, onKeyDown: this.selectionMode === "multiple" && this.handleKeyboardSelection, selectedRowCount: this.selectedRowCount, selectedRowCountLocalized: this.selectedRowCountLocalized, selectionCell: true, selectionMode: this.selectionMode })) : this.rowType === "body" ? ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_6__.h)("calcite-table-cell", { alignment: "center", key: "selection-body", onClick: this.handleSelectionOfRow, onKeyDown: this.handleKeyboardSelection, parentRowIsSelected: this.selected, parentRowPositionLocalized: this.positionSectionLocalized, selectionCell: true }, this.renderSelectionIcon())) : ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_6__.h)("calcite-table-cell", { alignment: "center", key: "selection-foot", selectionCell: true }));
  }
  renderNumberedCell() {
    return this.rowType === "head" ? ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_6__.h)("calcite-table-header", { alignment: "center", key: "numbered-head", numberCell: true })) : this.rowType === "body" ? ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_6__.h)("calcite-table-cell", { alignment: "center", key: "numbered-body", numberCell: true }, this.positionSectionLocalized)) : ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_6__.h)("calcite-table-cell", { alignment: "center", key: "numbered-foot", numberCell: true }));
  }
  render() {
    return ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_6__.h)(_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_6__.Host, null, (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_6__.h)("tr", { "aria-disabled": this.disabled, "aria-rowindex": this.positionAll + 1, "aria-selected": this.selected, onKeyDown: (event) => this.keyDownHandler(event),
      // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)
      ref: (el) => (this.tableRowEl = el) }, this.numbered && this.renderNumberedCell(), this.selectionMode !== "none" && this.renderSelectableCell(), (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_6__.h)("slot", { onSlotchange: this.updateCells, ref: (el) => (this.tableRowSlotEl = el) }))));
  }
  get el() { return this; }
  static get watchers() { return {
    "bodyRowCount": ["handleCellChanges"],
    "scale": ["handleCellChanges"],
    "selected": ["handleCellChanges"],
    "selectedRowCount": ["handleCellChanges"],
    "numbered": ["handleDelayedCellChanges"],
    "selectionMode": ["handleDelayedCellChanges"]
  }; }
  static get style() { return tableRowCss; }
}, [1, "calcite-table-row", {
    "disabled": [516],
    "selected": [516],
    "cellCount": [1026, "cell-count"],
    "rowType": [1, "row-type"],
    "numbered": [4],
    "positionSection": [2, "position-section"],
    "positionSectionLocalized": [1, "position-section-localized"],
    "positionAll": [2, "position-all"],
    "readCellContentsToAT": [4, "read-cell-contents-to-a-t"],
    "scale": [1],
    "selectionMode": [1, "selection-mode"],
    "selectedRowCount": [2, "selected-row-count"],
    "selectedRowCountLocalized": [1, "selected-row-count-localized"],
    "bodyRowCount": [2, "body-row-count"],
    "effectiveLocale": [32]
  }, [[4, "calciteInternalTableRowFocusChange", "calciteInternalTableRowFocusChangeHandler"]]]);
function defineCustomElement$1() {
  if (typeof customElements === "undefined") {
    return;
  }
  const components = ["calcite-table-row", "calcite-icon", "calcite-table-cell", "calcite-table-header"];
  components.forEach(tagName => { switch (tagName) {
    case "calcite-table-row":
      if (!customElements.get(tagName)) {
        customElements.define(tagName, TableRow);
      }
      break;
    case "calcite-icon":
      if (!customElements.get(tagName)) {
        (0,_icon_js__WEBPACK_IMPORTED_MODULE_3__.d)();
      }
      break;
    case "calcite-table-cell":
      if (!customElements.get(tagName)) {
        (0,_table_cell_js__WEBPACK_IMPORTED_MODULE_4__.d)();
      }
      break;
    case "calcite-table-header":
      if (!customElements.get(tagName)) {
        (0,_table_header_js__WEBPACK_IMPORTED_MODULE_5__.d)();
      }
      break;
  } });
}
defineCustomElement$1();

const CalciteTableRow = TableRow;
const defineCustomElement = defineCustomElement$1;




/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/components/table-cell.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/components/table-cell.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   T: () => (/* binding */ TableCell),
/* harmony export */   d: () => (/* binding */ defineCustomElement)
/* harmony export */ });
/* harmony import */ var _stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @stencil/core/internal/client/index.js */ "./node_modules/@stencil/core/internal/client/index.js");
/* harmony import */ var _loadable_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./loadable.js */ "./node_modules/@esri/calcite-components/dist/components/loadable.js");
/* harmony import */ var _t9n_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./t9n.js */ "./node_modules/@esri/calcite-components/dist/components/t9n.js");
/* harmony import */ var _interactive_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./interactive.js */ "./node_modules/@esri/calcite-components/dist/components/interactive.js");
/* harmony import */ var _locale_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./locale.js */ "./node_modules/@esri/calcite-components/dist/components/locale.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.7.0
 */






const CSS = {
  numberCell: "number-cell",
  footerCell: "footer-cell",
  selectionCell: "selection-cell",
  selectedCell: "selected-cell",
  assistiveText: "assistive-text",
};

const tableCellCss = ":host{--calcite-internal-table-cell-background-internal:var(--calcite-table-cell-background, transparent);--calcite-internal-table-cell-border-color-internal:var(--calcite-table-cell-border-color, transparent);display:contents}:host([alignment=center]) td{text-align:center}:host([alignment=end]) td{text-align:end}.assistive-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}td{text-align:start;vertical-align:middle;color:var(--calcite-ui-text-1);outline-color:transparent;background:var(--calcite-internal-table-cell-background);border-inline-end:1px solid var(--calcite-ui-border-3);font-size:var(--calcite-internal-table-cell-font-size);padding:var(--calcite-internal-table-cell-padding)}td:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-ui-brand));outline-offset:calc(\n            -2px *\n            calc(\n              1 -\n              2 * clamp(\n                0,\n                var(--calcite-ui-focus-offset-invert),\n                1\n              )\n            )\n          )}.number-cell{background-color:var(--calcite-ui-foreground-2)}.footer-cell{background-color:var(--calcite-ui-background);font-weight:var(--calcite-font-weight-medium);color:var(--calcite-ui-text-1);border-block-start:1px solid var(--calcite-ui-border-3)}.number-cell,.selection-cell{border-inline-end:1px solid var(--calcite-ui-border-3);inline-size:2rem;min-inline-size:2rem}.selection-cell{cursor:pointer;color:var(--calcite-ui-text-3);inset-inline-start:2rem}.selected-cell:not(.number-cell):not(.footer-cell){--calcite-table-cell-background:var(--calcite-ui-foreground-current);background:var(--calcite-ui-foreground-current)}.selection-cell.selected-cell{box-shadow:inset 0.25rem 0 0 0 var(--calcite-ui-brand);color:var(--calcite-ui-brand)}.selection-cell.selected-cell calcite-icon{color:var(--calcite-ui-brand)}.selection-cell{vertical-align:middle}.selection-cell ::slotted(calcite-icon){pointer-events:none;margin-block-start:0.25rem}";

const TableCell = /*@__PURE__*/ (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_4__.proxyCustomElement)(class extends _stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_4__.HTMLElement {
  constructor() {
    super();
    this.__registerHost();
    this.__attachShadow();
    this.updateScreenReaderContentsText = () => {
      this.contentsText = this.el.textContent;
    };
    this.onContainerBlur = () => {
      this.focused = false;
    };
    this.onContainerFocus = () => {
      this.focused = true;
    };
    this.alignment = "start";
    this.colSpan = undefined;
    this.rowSpan = undefined;
    this.disabled = undefined;
    this.numberCell = undefined;
    this.parentRowIsSelected = undefined;
    this.parentRowPositionLocalized = undefined;
    this.parentRowType = undefined;
    this.positionInRow = undefined;
    this.readCellContentsToAT = undefined;
    this.scale = "m";
    this.selectionCell = undefined;
    this.messages = undefined;
    this.messageOverrides = undefined;
    this.contentsText = "";
    this.defaultMessages = undefined;
    this.focused = false;
    this.selectionText = "";
    this.effectiveLocale = "";
  }
  onSelectedChange() {
    this.updateScreenReaderSelectionText();
  }
  onMessagesChange() {
    /* wired up by t9n util */
  }
  effectiveLocaleChange() {
    (0,_t9n_js__WEBPACK_IMPORTED_MODULE_1__.u)(this, this.effectiveLocale);
  }
  // --------------------------------------------------------------------------
  //
  //  Lifecycle
  //
  // --------------------------------------------------------------------------
  async componentWillLoad() {
    (0,_loadable_js__WEBPACK_IMPORTED_MODULE_0__.a)(this);
    await (0,_t9n_js__WEBPACK_IMPORTED_MODULE_1__.s)(this);
    this.updateScreenReaderContentsText();
    this.updateScreenReaderSelectionText();
  }
  componentDidLoad() {
    (0,_loadable_js__WEBPACK_IMPORTED_MODULE_0__.s)(this);
  }
  connectedCallback() {
    (0,_locale_js__WEBPACK_IMPORTED_MODULE_3__.c)(this);
    (0,_t9n_js__WEBPACK_IMPORTED_MODULE_1__.c)(this);
    (0,_interactive_js__WEBPACK_IMPORTED_MODULE_2__.c)(this);
  }
  componentDidRender() {
    (0,_interactive_js__WEBPACK_IMPORTED_MODULE_2__.u)(this);
  }
  disconnectedCallback() {
    (0,_locale_js__WEBPACK_IMPORTED_MODULE_3__.d)(this);
    (0,_t9n_js__WEBPACK_IMPORTED_MODULE_1__.d)(this);
    (0,_interactive_js__WEBPACK_IMPORTED_MODULE_2__.d)(this);
  }
  //--------------------------------------------------------------------------
  //
  //  Public Methods
  //
  // --------------------------------------------------------------------------
  /** Sets focus on the component. */
  async setFocus() {
    await (0,_loadable_js__WEBPACK_IMPORTED_MODULE_0__.c)(this);
    this.containerEl.focus();
  }
  // --------------------------------------------------------------------------
  //
  //  Private Methods
  //
  // --------------------------------------------------------------------------
  updateScreenReaderSelectionText() {
    const selectedText = `${this.messages?.row} ${this.parentRowPositionLocalized} ${this.messages?.selected} ${this.messages?.keyboardDeselect}`;
    const unselectedText = `${this.messages?.row} ${this.parentRowPositionLocalized} ${this.messages?.unselected} ${this.messages?.keyboardSelect}`;
    this.selectionText = this.parentRowIsSelected ? selectedText : unselectedText;
  }
  //--------------------------------------------------------------------------
  //
  //  Render Methods
  //
  //--------------------------------------------------------------------------
  render() {
    return ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_4__.h)(_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_4__.Host, null, (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_4__.h)("td", { "aria-disabled": this.disabled, class: {
        [CSS.footerCell]: this.parentRowType === "foot",
        [CSS.numberCell]: this.numberCell,
        [CSS.selectionCell]: this.selectionCell,
        [CSS.selectedCell]: this.parentRowIsSelected,
      }, colSpan: this.colSpan, onBlur: this.onContainerBlur, onFocus: this.onContainerFocus, role: "gridcell", rowSpan: this.rowSpan, tabIndex: this.disabled ? -1 : 0,
      // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)
      ref: (el) => (this.containerEl = el) }, (this.selectionCell || this.readCellContentsToAT) && this.focused && ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_4__.h)("span", { "aria-hidden": true, "aria-live": "polite", class: CSS.assistiveText }, this.selectionCell && this.selectionText, this.readCellContentsToAT && !this.selectionCell && this.contentsText)), (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_4__.h)("slot", { onSlotchange: this.updateScreenReaderContentsText }))));
  }
  static get assetsDirs() { return ["assets"]; }
  get el() { return this; }
  static get watchers() { return {
    "parentRowIsSelected": ["onSelectedChange"],
    "messageOverrides": ["onMessagesChange"],
    "effectiveLocale": ["effectiveLocaleChange"]
  }; }
  static get style() { return tableCellCss; }
}, [1, "calcite-table-cell", {
    "alignment": [513],
    "colSpan": [514, "col-span"],
    "rowSpan": [514, "row-span"],
    "disabled": [4],
    "numberCell": [4, "number-cell"],
    "parentRowIsSelected": [4, "parent-row-is-selected"],
    "parentRowPositionLocalized": [1, "parent-row-position-localized"],
    "parentRowType": [1, "parent-row-type"],
    "positionInRow": [2, "position-in-row"],
    "readCellContentsToAT": [4, "read-cell-contents-to-a-t"],
    "scale": [1],
    "selectionCell": [4, "selection-cell"],
    "messages": [1040],
    "messageOverrides": [1040],
    "contentsText": [32],
    "defaultMessages": [32],
    "focused": [32],
    "selectionText": [32],
    "effectiveLocale": [32],
    "setFocus": [64]
  }]);
function defineCustomElement() {
  if (typeof customElements === "undefined") {
    return;
  }
  const components = ["calcite-table-cell"];
  components.forEach(tagName => { switch (tagName) {
    case "calcite-table-cell":
      if (!customElements.get(tagName)) {
        customElements.define(tagName, TableCell);
      }
      break;
  } });
}
defineCustomElement();




/***/ }),

/***/ "./node_modules/@esri/calcite-components/dist/components/table-header.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@esri/calcite-components/dist/components/table-header.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   T: () => (/* binding */ TableHeader),
/* harmony export */   d: () => (/* binding */ defineCustomElement)
/* harmony export */ });
/* harmony import */ var _stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @stencil/core/internal/client/index.js */ "./node_modules/@stencil/core/internal/client/index.js");
/* harmony import */ var _loadable_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./loadable.js */ "./node_modules/@esri/calcite-components/dist/components/loadable.js");
/* harmony import */ var _t9n_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./t9n.js */ "./node_modules/@esri/calcite-components/dist/components/t9n.js");
/* harmony import */ var _locale_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./locale.js */ "./node_modules/@esri/calcite-components/dist/components/locale.js");
/* harmony import */ var _icon_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./icon.js */ "./node_modules/@esri/calcite-components/dist/components/icon.js");
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.7.0
 */






const CSS = {
  numberCell: "number-cell",
  selectionCell: "selection-cell",
  bodyRow: "body-row",
  footerRow: "footer-row",
  heading: "heading",
  description: "description",
  multipleSelectionCell: "cell--multiple-selection",
  assistiveText: "assistive-text",
  active: "active",
};

const tableHeaderCss = ":host{--calcite-internal-table-header-background:var(--calcite-table-header-background, var(--calcite-ui-foreground-2));--calcite-internal-table-header-border-color:var(--calcite-table-border-color, var(--calcite-ui-border-3));display:contents}:host([alignment=center]) th{text-align:center}:host([alignment=end]) th{text-align:end}.assistive-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}th{text-align:start;vertical-align:top;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-ui-text-1);outline-color:transparent;font-size:var(--calcite-internal-table-cell-font-size);border-inline-end:1px solid var(--calcite-internal-table-header-border-color);border-block-end:1px solid var(--calcite-internal-table-header-border-color);padding-block:calc(var(--calcite-internal-table-cell-padding) * 1.5);padding-inline:var(--calcite-internal-table-cell-padding);background-color:var(--calcite-internal-table-header-background)}th:focus-within{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-ui-brand));outline-offset:calc(\n            -2px *\n            calc(\n              1 -\n              2 * clamp(\n                0,\n                var(--calcite-ui-focus-offset-invert),\n                1\n              )\n            )\n          )}th.body-row,th.footer-row{vertical-align:middle;border-block-end:0}th.footer-row{border-block-start:1px solid var(--calcite-internal-table-header-border-color)}.cell--multiple-selection{cursor:pointer;vertical-align:middle;color:var(--calcite-ui-text-3)}.number-cell,.selection-cell{color:var(--calcite-ui-text-2);inline-size:2rem;min-inline-size:2rem}.selection-cell calcite-icon.active{color:var(--calcite-ui-brand)}.number-cell calcite-icon,.selection-cell calcite-icon{margin-inline-start:auto;margin-inline-end:auto;vertical-align:middle}.heading{color:var(--calcite-ui-text-1)}.description{color:var(--calcite-ui-text-3);font-size:var(--calcite-internal-table-cell-font-size-secondary)}";

const TableHeader = /*@__PURE__*/ (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_4__.proxyCustomElement)(class extends _stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_4__.HTMLElement {
  constructor() {
    super();
    this.__registerHost();
    this.__attachShadow();
    this.alignment = "start";
    this.colSpan = undefined;
    this.description = undefined;
    this.heading = undefined;
    this.rowSpan = undefined;
    this.numberCell = false;
    this.parentRowPosition = undefined;
    this.parentRowType = undefined;
    this.positionInRow = undefined;
    this.scale = undefined;
    this.selectedRowCount = undefined;
    this.selectedRowCountLocalized = undefined;
    this.selectionCell = false;
    this.selectionMode = undefined;
    this.bodyRowCount = undefined;
    this.messages = undefined;
    this.messageOverrides = undefined;
    this.defaultMessages = undefined;
    this.screenReaderText = "";
    this.effectiveLocale = "";
  }
  onSelectedChange() {
    this.updateScreenReaderText();
  }
  onMessagesChange() {
    /* wired up by t9n util */
  }
  // --------------------------------------------------------------------------
  //
  //  Lifecycle
  //
  // --------------------------------------------------------------------------
  async componentWillLoad() {
    (0,_loadable_js__WEBPACK_IMPORTED_MODULE_0__.a)(this);
    await (0,_t9n_js__WEBPACK_IMPORTED_MODULE_1__.s)(this);
    this.updateScreenReaderText();
  }
  componentDidLoad() {
    (0,_loadable_js__WEBPACK_IMPORTED_MODULE_0__.s)(this);
  }
  connectedCallback() {
    (0,_locale_js__WEBPACK_IMPORTED_MODULE_2__.c)(this);
    (0,_t9n_js__WEBPACK_IMPORTED_MODULE_1__.c)(this);
  }
  disconnectedCallback() {
    (0,_locale_js__WEBPACK_IMPORTED_MODULE_2__.d)(this);
    (0,_t9n_js__WEBPACK_IMPORTED_MODULE_1__.d)(this);
  }
  effectiveLocaleChange() {
    (0,_t9n_js__WEBPACK_IMPORTED_MODULE_1__.u)(this, this.effectiveLocale);
  }
  // --------------------------------------------------------------------------
  //
  //  Public Methods
  //
  // --------------------------------------------------------------------------
  /** Sets focus on the component. */
  async setFocus() {
    await (0,_loadable_js__WEBPACK_IMPORTED_MODULE_0__.c)(this);
    this.containerEl.focus();
  }
  // --------------------------------------------------------------------------
  //
  //  Private Methods
  //
  // --------------------------------------------------------------------------
  updateScreenReaderText() {
    let text = "";
    const sharedText = `${this.selectedRowCountLocalized} ${this.messages?.selected}`;
    if (this.numberCell) {
      text = this.messages?.rowNumber;
    }
    else if (this.selectionMode === "single") {
      text = `${this.messages?.selectionColumn}. ${sharedText}`;
    }
    else if (this.bodyRowCount === this.selectedRowCount) {
      text = `${this.messages?.selectionColumn}. ${this.messages?.all} ${sharedText} ${this.messages?.keyboardDeselectAll}`;
    }
    else {
      text = `${this.messages?.selectionColumn}. ${sharedText} ${this.messages?.keyboardSelectAll}`;
    }
    this.screenReaderText = text;
  }
  //--------------------------------------------------------------------------
  //
  //  Render Methods
  //
  //--------------------------------------------------------------------------
  render() {
    const scope = this.rowSpan
      ? "rowgroup"
      : this.colSpan
        ? "colgroup"
        : this.parentRowType === "body"
          ? "row"
          : "col";
    const allSelected = this.selectedRowCount === this.bodyRowCount;
    const selectionIcon = allSelected ? "check-square-f" : "check-square";
    return ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_4__.h)(_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_4__.Host, null, (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_4__.h)("th", { "aria-colindex": this.parentRowType !== "body" ? this.positionInRow : "", class: {
        [CSS.bodyRow]: this.parentRowType === "body",
        [CSS.footerRow]: this.parentRowType === "foot",
        [CSS.numberCell]: this.numberCell,
        [CSS.selectionCell]: this.selectionCell,
        [CSS.multipleSelectionCell]: this.selectionMode === "multiple",
      }, colSpan: this.colSpan, role: "columnheader", rowSpan: this.rowSpan, scope: scope, tabIndex: 0,
      // eslint-disable-next-line react/jsx-sort-props -- ref should be last so node attrs/props are in sync (see https://github.com/Esri/calcite-design-system/pull/6530)
      ref: (el) => (this.containerEl = el) }, this.heading && (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_4__.h)("div", { class: CSS.heading }, this.heading), this.description && (0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_4__.h)("div", { class: CSS.description }, this.description), this.selectionCell && this.selectionMode === "multiple" && ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_4__.h)("calcite-icon", { class: { [CSS.active]: allSelected }, icon: selectionIcon, scale: this.scale === "l" ? "m" : "s" })), (this.selectionCell || this.numberCell) && ((0,_stencil_core_internal_client_index_js__WEBPACK_IMPORTED_MODULE_4__.h)("span", { "aria-hidden": true, "aria-live": "polite", class: CSS.assistiveText }, this.screenReaderText)))));
  }
  static get assetsDirs() { return ["assets"]; }
  get el() { return this; }
  static get watchers() { return {
    "selectedRowCount": ["onSelectedChange"],
    "selectedRowCountLocalized": ["onSelectedChange"],
    "messageOverrides": ["onMessagesChange"],
    "effectiveLocale": ["effectiveLocaleChange"]
  }; }
  static get style() { return tableHeaderCss; }
}, [1, "calcite-table-header", {
    "alignment": [513],
    "colSpan": [514, "col-span"],
    "description": [513],
    "heading": [513],
    "rowSpan": [514, "row-span"],
    "numberCell": [4, "number-cell"],
    "parentRowPosition": [2, "parent-row-position"],
    "parentRowType": [1, "parent-row-type"],
    "positionInRow": [2, "position-in-row"],
    "scale": [1],
    "selectedRowCount": [2, "selected-row-count"],
    "selectedRowCountLocalized": [1, "selected-row-count-localized"],
    "selectionCell": [4, "selection-cell"],
    "selectionMode": [1, "selection-mode"],
    "bodyRowCount": [2, "body-row-count"],
    "messages": [1040],
    "messageOverrides": [1040],
    "defaultMessages": [32],
    "screenReaderText": [32],
    "effectiveLocale": [32],
    "setFocus": [64]
  }]);
function defineCustomElement() {
  if (typeof customElements === "undefined") {
    return;
  }
  const components = ["calcite-table-header", "calcite-icon"];
  components.forEach(tagName => { switch (tagName) {
    case "calcite-table-header":
      if (!customElements.get(tagName)) {
        customElements.define(tagName, TableHeader);
      }
      break;
    case "calcite-icon":
      if (!customElements.get(tagName)) {
        (0,_icon_js__WEBPACK_IMPORTED_MODULE_3__.d)();
      }
      break;
  } });
}
defineCustomElement();




/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfZXNyaV9jYWxjaXRlLWNvbXBvbmVudHNfZGlzdF9jb21wb25lbnRzX2NhbGNpdGUtdGFibGUtcm93X2pzLmJ1bmRsZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQytHO0FBQzNEO0FBQ0o7QUFDbUU7QUFDNUQ7QUFDTTtBQUNFOztBQUUvRCx1Q0FBdUMsZUFBZSx5QkFBeUIsaUJBQWlCLDJDQUEyQyxtREFBbUQsb0JBQW9CLE1BQU0sNEdBQTRHLDZGQUE2RixpQkFBaUIsZ0JBQWdCLGFBQWEsU0FBUyxhQUFhLHFCQUFxQixvQkFBb0IsMkNBQTJDLHlHQUF5RyxVQUFVLEdBQUcsMEVBQTBFLDhEQUE4RDs7QUFFdnpCLCtCQUErQiwwRkFBa0IsZUFBZSwrRUFBVztBQUMzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxtRkFBVztBQUM1QywrQ0FBK0MsbUZBQVc7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLGVBQWU7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSwwQ0FBZTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksa0RB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LDhEQUE4RCxnREFBZ0QseUVBQUMsV0FBVyxzRUFBc0U7QUFDOWU7QUFDQSw0QkFBNEI7QUFDNUIsYUFBYTtBQUNiLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsMkNBQXFCO0FBQzdCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFc0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zeW52aWV3Ly4vbm9kZV9tb2R1bGVzL0Blc3JpL2NhbGNpdGUtY29tcG9uZW50cy9kaXN0L2NvbXBvbmVudHMvY2FsY2l0ZS10YWJsZS1yb3cuanMiLCJ3ZWJwYWNrOi8vc3ludmlldy8uL25vZGVfbW9kdWxlcy9AZXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvZGlzdC9jb21wb25lbnRzL3RhYmxlLWNlbGwuanMiLCJ3ZWJwYWNrOi8vc3ludmlldy8uL25vZGVfbW9kdWxlcy9AZXNyaS9jYWxjaXRlLWNvbXBvbmVudHMvZGlzdC9jb21wb25lbnRzL3RhYmxlLWhlYWRlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1kZXNpZ24tc3lzdGVtL2Jsb2IvbWFpbi9MSUNFTlNFLm1kIGZvciBkZXRhaWxzLlxuICogdjEuNy4wXG4gKi9cbmltcG9ydCB7IHByb3h5Q3VzdG9tRWxlbWVudCwgSFRNTEVsZW1lbnQsIGNyZWF0ZUV2ZW50LCBoLCBIb3N0IH0gZnJvbSAnQHN0ZW5jaWwvY29yZS9pbnRlcm5hbC9jbGllbnQvaW5kZXguanMnO1xuaW1wb3J0IHsgaSBhcyBmb2N1c0VsZW1lbnRJbkdyb3VwIH0gZnJvbSAnLi9kb20uanMnO1xuaW1wb3J0IHsgaSBhcyBpc0FjdGl2YXRpb25LZXkgfSBmcm9tICcuL2tleS5qcyc7XG5pbXBvcnQgeyBjIGFzIGNvbm5lY3RJbnRlcmFjdGl2ZSwgdSBhcyB1cGRhdGVIb3N0SW50ZXJhY3Rpb24sIGQgYXMgZGlzY29ubmVjdEludGVyYWN0aXZlIH0gZnJvbSAnLi9pbnRlcmFjdGl2ZS5qcyc7XG5pbXBvcnQgeyBkIGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkNCB9IGZyb20gJy4vaWNvbi5qcyc7XG5pbXBvcnQgeyBkIGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkMyB9IGZyb20gJy4vdGFibGUtY2VsbC5qcyc7XG5pbXBvcnQgeyBkIGFzIGRlZmluZUN1c3RvbUVsZW1lbnQkMiB9IGZyb20gJy4vdGFibGUtaGVhZGVyLmpzJztcblxuY29uc3QgdGFibGVSb3dDc3MgPSBcIjpob3N0KFtkaXNhYmxlZF0pe2N1cnNvcjpkZWZhdWx0Oy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lO29wYWNpdHk6dmFyKC0tY2FsY2l0ZS11aS1vcGFjaXR5LWRpc2FibGVkKX06aG9zdChbZGlzYWJsZWRdKSAqLDpob3N0KFtkaXNhYmxlZF0pIDo6c2xvdHRlZCgqKXtwb2ludGVyLWV2ZW50czpub25lfTpob3N0ey0tY2FsY2l0ZS1pbnRlcm5hbC10YWJsZS1yb3ctYmFja2dyb3VuZDp2YXIoLS1jYWxjaXRlLXRhYmxlLXJvdy1iYWNrZ3JvdW5kLCB2YXIoLS1jYWxjaXRlLXVpLWZvcmVncm91bmQtMSkpOy0tY2FsY2l0ZS1pbnRlcm5hbC10YWJsZS1yb3ctYm9yZGVyLWNvbG9yOnZhcigtLWNhbGNpdGUtdGFibGUtcm93LWJvcmRlci1jb2xvciwgdHJhbnNwYXJlbnQpO2Rpc3BsYXk6Y29udGVudHN9Omhvc3QoW2hpZGRlbl0pe2Rpc3BsYXk6bm9uZX1baGlkZGVuXXtkaXNwbGF5Om5vbmV9Omhvc3QoW2Rpc2FibGVkXSkgdHJ7cG9pbnRlci1ldmVudHM6bm9uZTtvcGFjaXR5OnZhcigtLWNhbGNpdGUtdWktb3BhY2l0eS1kaXNhYmxlZCl9Omhvc3QoW2Rpc2FibGVkXSkgOjpzbG90dGVkKFtjYWxjaXRlLWh5ZHJhdGVkXVtkaXNhYmxlZF0pLDpob3N0KFtkaXNhYmxlZF0pIFtjYWxjaXRlLWh5ZHJhdGVkXVtkaXNhYmxlZF17b3BhY2l0eToxfXRye2JvcmRlci1ibG9jay1lbmQ6MXB4IHNvbGlkIHZhcigtLWNhbGNpdGUtaW50ZXJuYWwtdGFibGUtcm93LWJvcmRlci1jb2xvcik7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLWludGVybmFsLXRhYmxlLXJvdy1iYWNrZ3JvdW5kKX1cIjtcblxuY29uc3QgVGFibGVSb3cgPSAvKkBfX1BVUkVfXyovIHByb3h5Q3VzdG9tRWxlbWVudChjbGFzcyBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLl9fcmVnaXN0ZXJIb3N0KCk7XG4gICAgdGhpcy5fX2F0dGFjaFNoYWRvdygpO1xuICAgIHRoaXMuY2FsY2l0ZVRhYmxlUm93U2VsZWN0ID0gY3JlYXRlRXZlbnQodGhpcywgXCJjYWxjaXRlVGFibGVSb3dTZWxlY3RcIiwgNik7XG4gICAgdGhpcy5jYWxjaXRlSW50ZXJuYWxUYWJsZVJvd0ZvY3VzUmVxdWVzdCA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiY2FsY2l0ZUludGVybmFsVGFibGVSb3dGb2N1c1JlcXVlc3RcIiwgNik7XG4gICAgdGhpcy5yb3dDZWxscyA9IFtdO1xuICAgIHRoaXMuZW1pdFRhYmxlUm93Rm9jdXNSZXF1ZXN0ID0gKGNlbGxQb3NpdGlvbiwgcm93UG9zaXRpb24sIGRlc3RpbmF0aW9uLCBsYXN0Q2VsbCkgPT4ge1xuICAgICAgdGhpcy5jYWxjaXRlSW50ZXJuYWxUYWJsZVJvd0ZvY3VzUmVxdWVzdC5lbWl0KHtcbiAgICAgICAgY2VsbFBvc2l0aW9uLFxuICAgICAgICByb3dQb3NpdGlvbixcbiAgICAgICAgZGVzdGluYXRpb24sXG4gICAgICAgIGxhc3RDZWxsLFxuICAgICAgfSk7XG4gICAgfTtcbiAgICB0aGlzLnVwZGF0ZUNlbGxzID0gKCkgPT4ge1xuICAgICAgY29uc3Qgc2xvdHRlZENlbGxzID0gdGhpcy50YWJsZVJvd1Nsb3RFbFxuICAgICAgICA/LmFzc2lnbmVkRWxlbWVudHMoeyBmbGF0dGVuOiB0cnVlIH0pXG4gICAgICAgID8uZmlsdGVyKChlbCkgPT4gZWwubWF0Y2hlcyhcImNhbGNpdGUtdGFibGUtY2VsbFwiKSB8fCBlbC5tYXRjaGVzKFwiY2FsY2l0ZS10YWJsZS1oZWFkZXJcIikpO1xuICAgICAgY29uc3QgcmVuZGVyZWRDZWxscyA9IEFycmF5LmZyb20odGhpcy50YWJsZVJvd0VsPy5xdWVyeVNlbGVjdG9yQWxsKFwiY2FsY2l0ZS10YWJsZS1oZWFkZXIsIGNhbGNpdGUtdGFibGUtY2VsbFwiKSk/LmZpbHRlcigoZWwpID0+IGVsLm51bWJlckNlbGwgfHwgZWwuc2VsZWN0aW9uQ2VsbCk7XG4gICAgICBjb25zdCBjZWxscyA9IHJlbmRlcmVkQ2VsbHMgPyByZW5kZXJlZENlbGxzLmNvbmNhdChzbG90dGVkQ2VsbHMpIDogc2xvdHRlZENlbGxzO1xuICAgICAgaWYgKGNlbGxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY2VsbHM/LmZvckVhY2goKGNlbGwsIGluZGV4KSA9PiB7XG4gICAgICAgICAgY2VsbC5wb3NpdGlvbkluUm93ID0gaW5kZXggKyAxO1xuICAgICAgICAgIGNlbGwucGFyZW50Um93VHlwZSA9IHRoaXMucm93VHlwZTtcbiAgICAgICAgICBjZWxsLnNjYWxlID0gdGhpcy5zY2FsZTtcbiAgICAgICAgICBpZiAoY2VsbC5ub2RlTmFtZSA9PT0gXCJDQUxDSVRFLVRBQkxFLUNFTExcIikge1xuICAgICAgICAgICAgY2VsbC5yZWFkQ2VsbENvbnRlbnRzVG9BVCA9IHRoaXMucmVhZENlbGxDb250ZW50c1RvQVQ7XG4gICAgICAgICAgICBjZWxsLmRpc2FibGVkID0gdGhpcy5kaXNhYmxlZDtcbiAgICAgICAgICAgIGNlbGwucGFyZW50Um93SXNTZWxlY3RlZCA9IHRoaXMuc2VsZWN0ZWQ7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHRoaXMucm93Q2VsbHMgPVxuICAgICAgICBjZWxscyB8fCBbXTtcbiAgICAgIHRoaXMuY2VsbENvdW50ID0gY2VsbHM/Lmxlbmd0aDtcbiAgICB9O1xuICAgIHRoaXMuaGFuZGxlU2VsZWN0aW9uT2ZSb3cgPSAoKSA9PiB7XG4gICAgICB0aGlzLmNhbGNpdGVUYWJsZVJvd1NlbGVjdC5lbWl0KCk7XG4gICAgfTtcbiAgICB0aGlzLmhhbmRsZUtleWJvYXJkU2VsZWN0aW9uID0gKGV2ZW50KSA9PiB7XG4gICAgICBpZiAoaXNBY3RpdmF0aW9uS2V5KGV2ZW50LmtleSkpIHtcbiAgICAgICAgaWYgKGV2ZW50LmtleSA9PT0gXCIgXCIpIHtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaGFuZGxlU2VsZWN0aW9uT2ZSb3coKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB0aGlzLnNlbGVjdGVkID0gZmFsc2U7XG4gICAgdGhpcy5jZWxsQ291bnQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5yb3dUeXBlID0gdW5kZWZpbmVkO1xuICAgIHRoaXMubnVtYmVyZWQgPSBmYWxzZTtcbiAgICB0aGlzLnBvc2l0aW9uU2VjdGlvbiA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnBvc2l0aW9uU2VjdGlvbkxvY2FsaXplZCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnBvc2l0aW9uQWxsID0gdW5kZWZpbmVkO1xuICAgIHRoaXMucmVhZENlbGxDb250ZW50c1RvQVQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5zY2FsZSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnNlbGVjdGlvbk1vZGUgPSBcIm5vbmVcIjtcbiAgICB0aGlzLnNlbGVjdGVkUm93Q291bnQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5zZWxlY3RlZFJvd0NvdW50TG9jYWxpemVkID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuYm9keVJvd0NvdW50ID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuZWZmZWN0aXZlTG9jYWxlID0gXCJcIjtcbiAgfVxuICBoYW5kbGVDZWxsQ2hhbmdlcygpIHtcbiAgICBpZiAodGhpcy50YWJsZVJvd0VsICYmIHRoaXMucm93Q2VsbHMubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy51cGRhdGVDZWxscygpO1xuICAgIH1cbiAgfVxuICBoYW5kbGVEZWxheWVkQ2VsbENoYW5nZXMoKSB7XG4gICAgaWYgKHRoaXMudGFibGVSb3dFbCAmJiB0aGlzLnJvd0NlbGxzLmxlbmd0aCA+IDApIHtcbiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLnVwZGF0ZUNlbGxzKCkpO1xuICAgIH1cbiAgfVxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vXG4gIC8vICBMaWZlY3ljbGVcbiAgLy9cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBjb21wb25lbnREaWRMb2FkKCkge1xuICAgIGlmICh0aGlzLnRhYmxlUm93RWwgJiYgdGhpcy5yb3dDZWxscy5sZW5ndGggPiAwKSB7XG4gICAgICB0aGlzLnVwZGF0ZUNlbGxzKCk7XG4gICAgfVxuICB9XG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIGNvbm5lY3RJbnRlcmFjdGl2ZSh0aGlzKTtcbiAgfVxuICBjb21wb25lbnREaWRSZW5kZXIoKSB7XG4gICAgdXBkYXRlSG9zdEludGVyYWN0aW9uKHRoaXMpO1xuICB9XG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIGRpc2Nvbm5lY3RJbnRlcmFjdGl2ZSh0aGlzKTtcbiAgfVxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vXG4gIC8vICBFdmVudCBMaXN0ZW5lcnNcbiAgLy9cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBjYWxjaXRlSW50ZXJuYWxUYWJsZVJvd0ZvY3VzQ2hhbmdlSGFuZGxlcihldmVudCkge1xuICAgIGlmIChldmVudC50YXJnZXQuY29udGFpbnModGhpcy5lbCkpIHtcbiAgICAgIGNvbnN0IHBvc2l0aW9uID0gZXZlbnQuZGV0YWlsLmNlbGxQb3NpdGlvbjtcbiAgICAgIGNvbnN0IHJvd1Bvc2l0aW9uID0gZXZlbnQuZGV0YWlsLnJvd1Bvc2l0aW9uO1xuICAgICAgY29uc3QgZGVzdGluYXRpb24gPSBldmVudC5kZXRhaWwuZGVzdGluYXRpb247XG4gICAgICBjb25zdCBsYXN0Q2VsbCA9IGV2ZW50LmRldGFpbC5sYXN0Q2VsbDtcbiAgICAgIGlmIChyb3dQb3NpdGlvbiA9PT0gdGhpcy5wb3NpdGlvbkFsbCkge1xuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCkge1xuICAgICAgICAgIGNvbnN0IGRlZmxlY3REaXJlY3Rpb24gPSBkZXN0aW5hdGlvbiA9PT0gXCJsYXN0XCIgPyBcInByZXZpb3VzXCIgOiBkZXN0aW5hdGlvbiA9PT0gXCJmaXJzdFwiID8gXCJuZXh0XCIgOiBkZXN0aW5hdGlvbjtcbiAgICAgICAgICB0aGlzLmVtaXRUYWJsZVJvd0ZvY3VzUmVxdWVzdChwb3NpdGlvbiwgdGhpcy5wb3NpdGlvbkFsbCwgZGVmbGVjdERpcmVjdGlvbik7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNlbGxQb3NpdGlvbiA9IGxhc3RDZWxsXG4gICAgICAgICAgPyB0aGlzLnJvd0NlbGxzW3RoaXMucm93Q2VsbHMubGVuZ3RoIC0gMV1cbiAgICAgICAgICA6IHRoaXMucm93Q2VsbHM/LmZpbmQoKF8sIGluZGV4KSA9PiBpbmRleCArIDEgPT09IHBvc2l0aW9uKTtcbiAgICAgICAgaWYgKGNlbGxQb3NpdGlvbikge1xuICAgICAgICAgIGNlbGxQb3NpdGlvbi5zZXRGb2N1cygpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy9cbiAgLy8gIFByaXZhdGUgTWV0aG9kc1xuICAvL1xuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIGtleURvd25IYW5kbGVyKGV2ZW50KSB7XG4gICAgY29uc3QgZWwgPSBldmVudC50YXJnZXQ7XG4gICAgY29uc3Qga2V5ID0gZXZlbnQua2V5O1xuICAgIGNvbnN0IGlzQ29udHJvbCA9IGV2ZW50LmN0cmxLZXk7XG4gICAgY29uc3QgY2VsbHMgPSB0aGlzLnJvd0NlbGxzO1xuICAgIGlmIChlbC5tYXRjaGVzKFwiY2FsY2l0ZS10YWJsZS1jZWxsXCIpIHx8IGVsLm1hdGNoZXMoXCJjYWxjaXRlLXRhYmxlLWhlYWRlclwiKSkge1xuICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgY2FzZSBcIkFycm93VXBcIjpcbiAgICAgICAgICB0aGlzLmVtaXRUYWJsZVJvd0ZvY3VzUmVxdWVzdChlbC5wb3NpdGlvbkluUm93LCB0aGlzLnBvc2l0aW9uQWxsLCBcInByZXZpb3VzXCIpO1xuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJBcnJvd0Rvd25cIjpcbiAgICAgICAgICB0aGlzLmVtaXRUYWJsZVJvd0ZvY3VzUmVxdWVzdChlbC5wb3NpdGlvbkluUm93LCB0aGlzLnBvc2l0aW9uQWxsLCBcIm5leHRcIik7XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIlBhZ2VVcFwiOlxuICAgICAgICAgIHRoaXMuZW1pdFRhYmxlUm93Rm9jdXNSZXF1ZXN0KGVsLnBvc2l0aW9uSW5Sb3csIHRoaXMucG9zaXRpb25BbGwsIFwiZmlyc3RcIik7XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIlBhZ2VEb3duXCI6XG4gICAgICAgICAgdGhpcy5lbWl0VGFibGVSb3dGb2N1c1JlcXVlc3QoZWwucG9zaXRpb25JblJvdywgdGhpcy5wb3NpdGlvbkFsbCwgXCJsYXN0XCIpO1xuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJBcnJvd0xlZnRcIjpcbiAgICAgICAgICBmb2N1c0VsZW1lbnRJbkdyb3VwKGNlbGxzLCBlbCwgXCJwcmV2aW91c1wiLCBmYWxzZSk7XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIkFycm93UmlnaHRcIjpcbiAgICAgICAgICBmb2N1c0VsZW1lbnRJbkdyb3VwKGNlbGxzLCBlbCwgXCJuZXh0XCIsIGZhbHNlKTtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiSG9tZVwiOlxuICAgICAgICAgIGlmIChpc0NvbnRyb2wpIHtcbiAgICAgICAgICAgIHRoaXMuZW1pdFRhYmxlUm93Rm9jdXNSZXF1ZXN0KDEsIHRoaXMucG9zaXRpb25BbGwsIFwiZmlyc3RcIik7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZvY3VzRWxlbWVudEluR3JvdXAoY2VsbHMsIGVsLCBcImZpcnN0XCIsIGZhbHNlKTtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiRW5kXCI6XG4gICAgICAgICAgaWYgKGlzQ29udHJvbCkge1xuICAgICAgICAgICAgdGhpcy5lbWl0VGFibGVSb3dGb2N1c1JlcXVlc3QodGhpcy5yb3dDZWxscz8ubGVuZ3RoLCB0aGlzLnBvc2l0aW9uQWxsLCBcImxhc3RcIiwgdHJ1ZSk7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZvY3VzRWxlbWVudEluR3JvdXAoY2VsbHMsIGVsLCBcImxhc3RcIiwgZmFsc2UpO1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy9cbiAgLy8gIFJlbmRlciBNZXRob2RzXG4gIC8vXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgcmVuZGVyU2VsZWN0aW9uSWNvbigpIHtcbiAgICBjb25zdCBpY29uID0gdGhpcy5zZWxlY3Rpb25Nb2RlID09PSBcIm11bHRpcGxlXCIgJiYgdGhpcy5zZWxlY3RlZFxuICAgICAgPyBcImNoZWNrLXNxdWFyZS1mXCJcbiAgICAgIDogdGhpcy5zZWxlY3Rpb25Nb2RlID09PSBcIm11bHRpcGxlXCJcbiAgICAgICAgPyBcInNxdWFyZVwiXG4gICAgICAgIDogdGhpcy5zZWxlY3RlZFxuICAgICAgICAgID8gXCJjaXJjbGUtZlwiXG4gICAgICAgICAgOiBcImNpcmNsZVwiO1xuICAgIHJldHVybiBoKFwiY2FsY2l0ZS1pY29uXCIsIHsgaWNvbjogaWNvbiwgc2NhbGU6IHRoaXMuc2NhbGUgPT09IFwibFwiID8gXCJtXCIgOiBcInNcIiB9KTtcbiAgfVxuICByZW5kZXJTZWxlY3RhYmxlQ2VsbCgpIHtcbiAgICByZXR1cm4gdGhpcy5yb3dUeXBlID09PSBcImhlYWRcIiA/IChoKFwiY2FsY2l0ZS10YWJsZS1oZWFkZXJcIiwgeyBhbGlnbm1lbnQ6IFwiY2VudGVyXCIsIGJvZHlSb3dDb3VudDogdGhpcy5ib2R5Um93Q291bnQsIGtleTogXCJzZWxlY3Rpb24taGVhZFwiLCBvbkNsaWNrOiB0aGlzLnNlbGVjdGlvbk1vZGUgPT09IFwibXVsdGlwbGVcIiAmJiB0aGlzLmhhbmRsZVNlbGVjdGlvbk9mUm93LCBvbktleURvd246IHRoaXMuc2VsZWN0aW9uTW9kZSA9PT0gXCJtdWx0aXBsZVwiICYmIHRoaXMuaGFuZGxlS2V5Ym9hcmRTZWxlY3Rpb24sIHNlbGVjdGVkUm93Q291bnQ6IHRoaXMuc2VsZWN0ZWRSb3dDb3VudCwgc2VsZWN0ZWRSb3dDb3VudExvY2FsaXplZDogdGhpcy5zZWxlY3RlZFJvd0NvdW50TG9jYWxpemVkLCBzZWxlY3Rpb25DZWxsOiB0cnVlLCBzZWxlY3Rpb25Nb2RlOiB0aGlzLnNlbGVjdGlvbk1vZGUgfSkpIDogdGhpcy5yb3dUeXBlID09PSBcImJvZHlcIiA/IChoKFwiY2FsY2l0ZS10YWJsZS1jZWxsXCIsIHsgYWxpZ25tZW50OiBcImNlbnRlclwiLCBrZXk6IFwic2VsZWN0aW9uLWJvZHlcIiwgb25DbGljazogdGhpcy5oYW5kbGVTZWxlY3Rpb25PZlJvdywgb25LZXlEb3duOiB0aGlzLmhhbmRsZUtleWJvYXJkU2VsZWN0aW9uLCBwYXJlbnRSb3dJc1NlbGVjdGVkOiB0aGlzLnNlbGVjdGVkLCBwYXJlbnRSb3dQb3NpdGlvbkxvY2FsaXplZDogdGhpcy5wb3NpdGlvblNlY3Rpb25Mb2NhbGl6ZWQsIHNlbGVjdGlvbkNlbGw6IHRydWUgfSwgdGhpcy5yZW5kZXJTZWxlY3Rpb25JY29uKCkpKSA6IChoKFwiY2FsY2l0ZS10YWJsZS1jZWxsXCIsIHsgYWxpZ25tZW50OiBcImNlbnRlclwiLCBrZXk6IFwic2VsZWN0aW9uLWZvb3RcIiwgc2VsZWN0aW9uQ2VsbDogdHJ1ZSB9KSk7XG4gIH1cbiAgcmVuZGVyTnVtYmVyZWRDZWxsKCkge1xuICAgIHJldHVybiB0aGlzLnJvd1R5cGUgPT09IFwiaGVhZFwiID8gKGgoXCJjYWxjaXRlLXRhYmxlLWhlYWRlclwiLCB7IGFsaWdubWVudDogXCJjZW50ZXJcIiwga2V5OiBcIm51bWJlcmVkLWhlYWRcIiwgbnVtYmVyQ2VsbDogdHJ1ZSB9KSkgOiB0aGlzLnJvd1R5cGUgPT09IFwiYm9keVwiID8gKGgoXCJjYWxjaXRlLXRhYmxlLWNlbGxcIiwgeyBhbGlnbm1lbnQ6IFwiY2VudGVyXCIsIGtleTogXCJudW1iZXJlZC1ib2R5XCIsIG51bWJlckNlbGw6IHRydWUgfSwgdGhpcy5wb3NpdGlvblNlY3Rpb25Mb2NhbGl6ZWQpKSA6IChoKFwiY2FsY2l0ZS10YWJsZS1jZWxsXCIsIHsgYWxpZ25tZW50OiBcImNlbnRlclwiLCBrZXk6IFwibnVtYmVyZWQtZm9vdFwiLCBudW1iZXJDZWxsOiB0cnVlIH0pKTtcbiAgfVxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChoKEhvc3QsIG51bGwsIGgoXCJ0clwiLCB7IFwiYXJpYS1kaXNhYmxlZFwiOiB0aGlzLmRpc2FibGVkLCBcImFyaWEtcm93aW5kZXhcIjogdGhpcy5wb3NpdGlvbkFsbCArIDEsIFwiYXJpYS1zZWxlY3RlZFwiOiB0aGlzLnNlbGVjdGVkLCBvbktleURvd246IChldmVudCkgPT4gdGhpcy5rZXlEb3duSGFuZGxlcihldmVudCksXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QvanN4LXNvcnQtcHJvcHMgLS0gcmVmIHNob3VsZCBiZSBsYXN0IHNvIG5vZGUgYXR0cnMvcHJvcHMgYXJlIGluIHN5bmMgKHNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWRlc2lnbi1zeXN0ZW0vcHVsbC82NTMwKVxuICAgICAgcmVmOiAoZWwpID0+ICh0aGlzLnRhYmxlUm93RWwgPSBlbCkgfSwgdGhpcy5udW1iZXJlZCAmJiB0aGlzLnJlbmRlck51bWJlcmVkQ2VsbCgpLCB0aGlzLnNlbGVjdGlvbk1vZGUgIT09IFwibm9uZVwiICYmIHRoaXMucmVuZGVyU2VsZWN0YWJsZUNlbGwoKSwgaChcInNsb3RcIiwgeyBvblNsb3RjaGFuZ2U6IHRoaXMudXBkYXRlQ2VsbHMsIHJlZjogKGVsKSA9PiAodGhpcy50YWJsZVJvd1Nsb3RFbCA9IGVsKSB9KSkpKTtcbiAgfVxuICBnZXQgZWwoKSB7IHJldHVybiB0aGlzOyB9XG4gIHN0YXRpYyBnZXQgd2F0Y2hlcnMoKSB7IHJldHVybiB7XG4gICAgXCJib2R5Um93Q291bnRcIjogW1wiaGFuZGxlQ2VsbENoYW5nZXNcIl0sXG4gICAgXCJzY2FsZVwiOiBbXCJoYW5kbGVDZWxsQ2hhbmdlc1wiXSxcbiAgICBcInNlbGVjdGVkXCI6IFtcImhhbmRsZUNlbGxDaGFuZ2VzXCJdLFxuICAgIFwic2VsZWN0ZWRSb3dDb3VudFwiOiBbXCJoYW5kbGVDZWxsQ2hhbmdlc1wiXSxcbiAgICBcIm51bWJlcmVkXCI6IFtcImhhbmRsZURlbGF5ZWRDZWxsQ2hhbmdlc1wiXSxcbiAgICBcInNlbGVjdGlvbk1vZGVcIjogW1wiaGFuZGxlRGVsYXllZENlbGxDaGFuZ2VzXCJdXG4gIH07IH1cbiAgc3RhdGljIGdldCBzdHlsZSgpIHsgcmV0dXJuIHRhYmxlUm93Q3NzOyB9XG59LCBbMSwgXCJjYWxjaXRlLXRhYmxlLXJvd1wiLCB7XG4gICAgXCJkaXNhYmxlZFwiOiBbNTE2XSxcbiAgICBcInNlbGVjdGVkXCI6IFs1MTZdLFxuICAgIFwiY2VsbENvdW50XCI6IFsxMDI2LCBcImNlbGwtY291bnRcIl0sXG4gICAgXCJyb3dUeXBlXCI6IFsxLCBcInJvdy10eXBlXCJdLFxuICAgIFwibnVtYmVyZWRcIjogWzRdLFxuICAgIFwicG9zaXRpb25TZWN0aW9uXCI6IFsyLCBcInBvc2l0aW9uLXNlY3Rpb25cIl0sXG4gICAgXCJwb3NpdGlvblNlY3Rpb25Mb2NhbGl6ZWRcIjogWzEsIFwicG9zaXRpb24tc2VjdGlvbi1sb2NhbGl6ZWRcIl0sXG4gICAgXCJwb3NpdGlvbkFsbFwiOiBbMiwgXCJwb3NpdGlvbi1hbGxcIl0sXG4gICAgXCJyZWFkQ2VsbENvbnRlbnRzVG9BVFwiOiBbNCwgXCJyZWFkLWNlbGwtY29udGVudHMtdG8tYS10XCJdLFxuICAgIFwic2NhbGVcIjogWzFdLFxuICAgIFwic2VsZWN0aW9uTW9kZVwiOiBbMSwgXCJzZWxlY3Rpb24tbW9kZVwiXSxcbiAgICBcInNlbGVjdGVkUm93Q291bnRcIjogWzIsIFwic2VsZWN0ZWQtcm93LWNvdW50XCJdLFxuICAgIFwic2VsZWN0ZWRSb3dDb3VudExvY2FsaXplZFwiOiBbMSwgXCJzZWxlY3RlZC1yb3ctY291bnQtbG9jYWxpemVkXCJdLFxuICAgIFwiYm9keVJvd0NvdW50XCI6IFsyLCBcImJvZHktcm93LWNvdW50XCJdLFxuICAgIFwiZWZmZWN0aXZlTG9jYWxlXCI6IFszMl1cbiAgfSwgW1s0LCBcImNhbGNpdGVJbnRlcm5hbFRhYmxlUm93Rm9jdXNDaGFuZ2VcIiwgXCJjYWxjaXRlSW50ZXJuYWxUYWJsZVJvd0ZvY3VzQ2hhbmdlSGFuZGxlclwiXV1dKTtcbmZ1bmN0aW9uIGRlZmluZUN1c3RvbUVsZW1lbnQkMSgpIHtcbiAgaWYgKHR5cGVvZiBjdXN0b21FbGVtZW50cyA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBjb21wb25lbnRzID0gW1wiY2FsY2l0ZS10YWJsZS1yb3dcIiwgXCJjYWxjaXRlLWljb25cIiwgXCJjYWxjaXRlLXRhYmxlLWNlbGxcIiwgXCJjYWxjaXRlLXRhYmxlLWhlYWRlclwiXTtcbiAgY29tcG9uZW50cy5mb3JFYWNoKHRhZ05hbWUgPT4geyBzd2l0Y2ggKHRhZ05hbWUpIHtcbiAgICBjYXNlIFwiY2FsY2l0ZS10YWJsZS1yb3dcIjpcbiAgICAgIGlmICghY3VzdG9tRWxlbWVudHMuZ2V0KHRhZ05hbWUpKSB7XG4gICAgICAgIGN1c3RvbUVsZW1lbnRzLmRlZmluZSh0YWdOYW1lLCBUYWJsZVJvdyk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwiY2FsY2l0ZS1pY29uXCI6XG4gICAgICBpZiAoIWN1c3RvbUVsZW1lbnRzLmdldCh0YWdOYW1lKSkge1xuICAgICAgICBkZWZpbmVDdXN0b21FbGVtZW50JDQoKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJjYWxjaXRlLXRhYmxlLWNlbGxcIjpcbiAgICAgIGlmICghY3VzdG9tRWxlbWVudHMuZ2V0KHRhZ05hbWUpKSB7XG4gICAgICAgIGRlZmluZUN1c3RvbUVsZW1lbnQkMygpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcImNhbGNpdGUtdGFibGUtaGVhZGVyXCI6XG4gICAgICBpZiAoIWN1c3RvbUVsZW1lbnRzLmdldCh0YWdOYW1lKSkge1xuICAgICAgICBkZWZpbmVDdXN0b21FbGVtZW50JDIoKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICB9IH0pO1xufVxuZGVmaW5lQ3VzdG9tRWxlbWVudCQxKCk7XG5cbmNvbnN0IENhbGNpdGVUYWJsZVJvdyA9IFRhYmxlUm93O1xuY29uc3QgZGVmaW5lQ3VzdG9tRWxlbWVudCA9IGRlZmluZUN1c3RvbUVsZW1lbnQkMTtcblxuZXhwb3J0IHsgQ2FsY2l0ZVRhYmxlUm93LCBkZWZpbmVDdXN0b21FbGVtZW50IH07XG4iLCIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1kZXNpZ24tc3lzdGVtL2Jsb2IvbWFpbi9MSUNFTlNFLm1kIGZvciBkZXRhaWxzLlxuICogdjEuNy4wXG4gKi9cbmltcG9ydCB7IHByb3h5Q3VzdG9tRWxlbWVudCwgSFRNTEVsZW1lbnQsIGgsIEhvc3QgfSBmcm9tICdAc3RlbmNpbC9jb3JlL2ludGVybmFsL2NsaWVudC9pbmRleC5qcyc7XG5pbXBvcnQgeyBhIGFzIHNldFVwTG9hZGFibGVDb21wb25lbnQsIHMgYXMgc2V0Q29tcG9uZW50TG9hZGVkLCBjIGFzIGNvbXBvbmVudEZvY3VzYWJsZSB9IGZyb20gJy4vbG9hZGFibGUuanMnO1xuaW1wb3J0IHsgdSBhcyB1cGRhdGVNZXNzYWdlcywgcyBhcyBzZXRVcE1lc3NhZ2VzLCBjIGFzIGNvbm5lY3RNZXNzYWdlcywgZCBhcyBkaXNjb25uZWN0TWVzc2FnZXMgfSBmcm9tICcuL3Q5bi5qcyc7XG5pbXBvcnQgeyBjIGFzIGNvbm5lY3RJbnRlcmFjdGl2ZSwgdSBhcyB1cGRhdGVIb3N0SW50ZXJhY3Rpb24sIGQgYXMgZGlzY29ubmVjdEludGVyYWN0aXZlIH0gZnJvbSAnLi9pbnRlcmFjdGl2ZS5qcyc7XG5pbXBvcnQgeyBjIGFzIGNvbm5lY3RMb2NhbGl6ZWQsIGQgYXMgZGlzY29ubmVjdExvY2FsaXplZCB9IGZyb20gJy4vbG9jYWxlLmpzJztcblxuY29uc3QgQ1NTID0ge1xuICBudW1iZXJDZWxsOiBcIm51bWJlci1jZWxsXCIsXG4gIGZvb3RlckNlbGw6IFwiZm9vdGVyLWNlbGxcIixcbiAgc2VsZWN0aW9uQ2VsbDogXCJzZWxlY3Rpb24tY2VsbFwiLFxuICBzZWxlY3RlZENlbGw6IFwic2VsZWN0ZWQtY2VsbFwiLFxuICBhc3Npc3RpdmVUZXh0OiBcImFzc2lzdGl2ZS10ZXh0XCIsXG59O1xuXG5jb25zdCB0YWJsZUNlbGxDc3MgPSBcIjpob3N0ey0tY2FsY2l0ZS1pbnRlcm5hbC10YWJsZS1jZWxsLWJhY2tncm91bmQtaW50ZXJuYWw6dmFyKC0tY2FsY2l0ZS10YWJsZS1jZWxsLWJhY2tncm91bmQsIHRyYW5zcGFyZW50KTstLWNhbGNpdGUtaW50ZXJuYWwtdGFibGUtY2VsbC1ib3JkZXItY29sb3ItaW50ZXJuYWw6dmFyKC0tY2FsY2l0ZS10YWJsZS1jZWxsLWJvcmRlci1jb2xvciwgdHJhbnNwYXJlbnQpO2Rpc3BsYXk6Y29udGVudHN9Omhvc3QoW2FsaWdubWVudD1jZW50ZXJdKSB0ZHt0ZXh0LWFsaWduOmNlbnRlcn06aG9zdChbYWxpZ25tZW50PWVuZF0pIHRke3RleHQtYWxpZ246ZW5kfS5hc3Npc3RpdmUtdGV4dHtwb3NpdGlvbjphYnNvbHV0ZTtpbmxpbmUtc2l6ZToxcHg7YmxvY2stc2l6ZToxcHg7cGFkZGluZzowO21hcmdpbjotMXB4O292ZXJmbG93OmhpZGRlbjtjbGlwOnJlY3QoMCwgMCwgMCwgMCk7d2hpdGUtc3BhY2U6bm93cmFwO2JvcmRlci13aWR0aDowfXRke3RleHQtYWxpZ246c3RhcnQ7dmVydGljYWwtYWxpZ246bWlkZGxlO2NvbG9yOnZhcigtLWNhbGNpdGUtdWktdGV4dC0xKTtvdXRsaW5lLWNvbG9yOnRyYW5zcGFyZW50O2JhY2tncm91bmQ6dmFyKC0tY2FsY2l0ZS1pbnRlcm5hbC10YWJsZS1jZWxsLWJhY2tncm91bmQpO2JvcmRlci1pbmxpbmUtZW5kOjFweCBzb2xpZCB2YXIoLS1jYWxjaXRlLXVpLWJvcmRlci0zKTtmb250LXNpemU6dmFyKC0tY2FsY2l0ZS1pbnRlcm5hbC10YWJsZS1jZWxsLWZvbnQtc2l6ZSk7cGFkZGluZzp2YXIoLS1jYWxjaXRlLWludGVybmFsLXRhYmxlLWNlbGwtcGFkZGluZyl9dGQ6Zm9jdXN7b3V0bGluZToycHggc29saWQgdmFyKC0tY2FsY2l0ZS11aS1mb2N1cy1jb2xvciwgdmFyKC0tY2FsY2l0ZS11aS1icmFuZCkpO291dGxpbmUtb2Zmc2V0OmNhbGMoXFxuICAgICAgICAgICAgLTJweCAqXFxuICAgICAgICAgICAgY2FsYyhcXG4gICAgICAgICAgICAgIDEgLVxcbiAgICAgICAgICAgICAgMiAqIGNsYW1wKFxcbiAgICAgICAgICAgICAgICAwLFxcbiAgICAgICAgICAgICAgICB2YXIoLS1jYWxjaXRlLXVpLWZvY3VzLW9mZnNldC1pbnZlcnQpLFxcbiAgICAgICAgICAgICAgICAxXFxuICAgICAgICAgICAgICApXFxuICAgICAgICAgICAgKVxcbiAgICAgICAgICApfS5udW1iZXItY2VsbHtiYWNrZ3JvdW5kLWNvbG9yOnZhcigtLWNhbGNpdGUtdWktZm9yZWdyb3VuZC0yKX0uZm9vdGVyLWNlbGx7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLXVpLWJhY2tncm91bmQpO2ZvbnQtd2VpZ2h0OnZhcigtLWNhbGNpdGUtZm9udC13ZWlnaHQtbWVkaXVtKTtjb2xvcjp2YXIoLS1jYWxjaXRlLXVpLXRleHQtMSk7Ym9yZGVyLWJsb2NrLXN0YXJ0OjFweCBzb2xpZCB2YXIoLS1jYWxjaXRlLXVpLWJvcmRlci0zKX0ubnVtYmVyLWNlbGwsLnNlbGVjdGlvbi1jZWxse2JvcmRlci1pbmxpbmUtZW5kOjFweCBzb2xpZCB2YXIoLS1jYWxjaXRlLXVpLWJvcmRlci0zKTtpbmxpbmUtc2l6ZToycmVtO21pbi1pbmxpbmUtc2l6ZToycmVtfS5zZWxlY3Rpb24tY2VsbHtjdXJzb3I6cG9pbnRlcjtjb2xvcjp2YXIoLS1jYWxjaXRlLXVpLXRleHQtMyk7aW5zZXQtaW5saW5lLXN0YXJ0OjJyZW19LnNlbGVjdGVkLWNlbGw6bm90KC5udW1iZXItY2VsbCk6bm90KC5mb290ZXItY2VsbCl7LS1jYWxjaXRlLXRhYmxlLWNlbGwtYmFja2dyb3VuZDp2YXIoLS1jYWxjaXRlLXVpLWZvcmVncm91bmQtY3VycmVudCk7YmFja2dyb3VuZDp2YXIoLS1jYWxjaXRlLXVpLWZvcmVncm91bmQtY3VycmVudCl9LnNlbGVjdGlvbi1jZWxsLnNlbGVjdGVkLWNlbGx7Ym94LXNoYWRvdzppbnNldCAwLjI1cmVtIDAgMCAwIHZhcigtLWNhbGNpdGUtdWktYnJhbmQpO2NvbG9yOnZhcigtLWNhbGNpdGUtdWktYnJhbmQpfS5zZWxlY3Rpb24tY2VsbC5zZWxlY3RlZC1jZWxsIGNhbGNpdGUtaWNvbntjb2xvcjp2YXIoLS1jYWxjaXRlLXVpLWJyYW5kKX0uc2VsZWN0aW9uLWNlbGx7dmVydGljYWwtYWxpZ246bWlkZGxlfS5zZWxlY3Rpb24tY2VsbCA6OnNsb3R0ZWQoY2FsY2l0ZS1pY29uKXtwb2ludGVyLWV2ZW50czpub25lO21hcmdpbi1ibG9jay1zdGFydDowLjI1cmVtfVwiO1xuXG5jb25zdCBUYWJsZUNlbGwgPSAvKkBfX1BVUkVfXyovIHByb3h5Q3VzdG9tRWxlbWVudChjbGFzcyBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLl9fcmVnaXN0ZXJIb3N0KCk7XG4gICAgdGhpcy5fX2F0dGFjaFNoYWRvdygpO1xuICAgIHRoaXMudXBkYXRlU2NyZWVuUmVhZGVyQ29udGVudHNUZXh0ID0gKCkgPT4ge1xuICAgICAgdGhpcy5jb250ZW50c1RleHQgPSB0aGlzLmVsLnRleHRDb250ZW50O1xuICAgIH07XG4gICAgdGhpcy5vbkNvbnRhaW5lckJsdXIgPSAoKSA9PiB7XG4gICAgICB0aGlzLmZvY3VzZWQgPSBmYWxzZTtcbiAgICB9O1xuICAgIHRoaXMub25Db250YWluZXJGb2N1cyA9ICgpID0+IHtcbiAgICAgIHRoaXMuZm9jdXNlZCA9IHRydWU7XG4gICAgfTtcbiAgICB0aGlzLmFsaWdubWVudCA9IFwic3RhcnRcIjtcbiAgICB0aGlzLmNvbFNwYW4gPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5yb3dTcGFuID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuZGlzYWJsZWQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5udW1iZXJDZWxsID0gdW5kZWZpbmVkO1xuICAgIHRoaXMucGFyZW50Um93SXNTZWxlY3RlZCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnBhcmVudFJvd1Bvc2l0aW9uTG9jYWxpemVkID0gdW5kZWZpbmVkO1xuICAgIHRoaXMucGFyZW50Um93VHlwZSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnBvc2l0aW9uSW5Sb3cgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5yZWFkQ2VsbENvbnRlbnRzVG9BVCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnNjYWxlID0gXCJtXCI7XG4gICAgdGhpcy5zZWxlY3Rpb25DZWxsID0gdW5kZWZpbmVkO1xuICAgIHRoaXMubWVzc2FnZXMgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5tZXNzYWdlT3ZlcnJpZGVzID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuY29udGVudHNUZXh0ID0gXCJcIjtcbiAgICB0aGlzLmRlZmF1bHRNZXNzYWdlcyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmZvY3VzZWQgPSBmYWxzZTtcbiAgICB0aGlzLnNlbGVjdGlvblRleHQgPSBcIlwiO1xuICAgIHRoaXMuZWZmZWN0aXZlTG9jYWxlID0gXCJcIjtcbiAgfVxuICBvblNlbGVjdGVkQ2hhbmdlKCkge1xuICAgIHRoaXMudXBkYXRlU2NyZWVuUmVhZGVyU2VsZWN0aW9uVGV4dCgpO1xuICB9XG4gIG9uTWVzc2FnZXNDaGFuZ2UoKSB7XG4gICAgLyogd2lyZWQgdXAgYnkgdDluIHV0aWwgKi9cbiAgfVxuICBlZmZlY3RpdmVMb2NhbGVDaGFuZ2UoKSB7XG4gICAgdXBkYXRlTWVzc2FnZXModGhpcywgdGhpcy5lZmZlY3RpdmVMb2NhbGUpO1xuICB9XG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vXG4gIC8vICBMaWZlY3ljbGVcbiAgLy9cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgYXN5bmMgY29tcG9uZW50V2lsbExvYWQoKSB7XG4gICAgc2V0VXBMb2FkYWJsZUNvbXBvbmVudCh0aGlzKTtcbiAgICBhd2FpdCBzZXRVcE1lc3NhZ2VzKHRoaXMpO1xuICAgIHRoaXMudXBkYXRlU2NyZWVuUmVhZGVyQ29udGVudHNUZXh0KCk7XG4gICAgdGhpcy51cGRhdGVTY3JlZW5SZWFkZXJTZWxlY3Rpb25UZXh0KCk7XG4gIH1cbiAgY29tcG9uZW50RGlkTG9hZCgpIHtcbiAgICBzZXRDb21wb25lbnRMb2FkZWQodGhpcyk7XG4gIH1cbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgY29ubmVjdExvY2FsaXplZCh0aGlzKTtcbiAgICBjb25uZWN0TWVzc2FnZXModGhpcyk7XG4gICAgY29ubmVjdEludGVyYWN0aXZlKHRoaXMpO1xuICB9XG4gIGNvbXBvbmVudERpZFJlbmRlcigpIHtcbiAgICB1cGRhdGVIb3N0SW50ZXJhY3Rpb24odGhpcyk7XG4gIH1cbiAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgZGlzY29ubmVjdExvY2FsaXplZCh0aGlzKTtcbiAgICBkaXNjb25uZWN0TWVzc2FnZXModGhpcyk7XG4gICAgZGlzY29ubmVjdEludGVyYWN0aXZlKHRoaXMpO1xuICB9XG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy9cbiAgLy8gIFB1YmxpYyBNZXRob2RzXG4gIC8vXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8qKiBTZXRzIGZvY3VzIG9uIHRoZSBjb21wb25lbnQuICovXG4gIGFzeW5jIHNldEZvY3VzKCkge1xuICAgIGF3YWl0IGNvbXBvbmVudEZvY3VzYWJsZSh0aGlzKTtcbiAgICB0aGlzLmNvbnRhaW5lckVsLmZvY3VzKCk7XG4gIH1cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy9cbiAgLy8gIFByaXZhdGUgTWV0aG9kc1xuICAvL1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICB1cGRhdGVTY3JlZW5SZWFkZXJTZWxlY3Rpb25UZXh0KCkge1xuICAgIGNvbnN0IHNlbGVjdGVkVGV4dCA9IGAke3RoaXMubWVzc2FnZXM/LnJvd30gJHt0aGlzLnBhcmVudFJvd1Bvc2l0aW9uTG9jYWxpemVkfSAke3RoaXMubWVzc2FnZXM/LnNlbGVjdGVkfSAke3RoaXMubWVzc2FnZXM/LmtleWJvYXJkRGVzZWxlY3R9YDtcbiAgICBjb25zdCB1bnNlbGVjdGVkVGV4dCA9IGAke3RoaXMubWVzc2FnZXM/LnJvd30gJHt0aGlzLnBhcmVudFJvd1Bvc2l0aW9uTG9jYWxpemVkfSAke3RoaXMubWVzc2FnZXM/LnVuc2VsZWN0ZWR9ICR7dGhpcy5tZXNzYWdlcz8ua2V5Ym9hcmRTZWxlY3R9YDtcbiAgICB0aGlzLnNlbGVjdGlvblRleHQgPSB0aGlzLnBhcmVudFJvd0lzU2VsZWN0ZWQgPyBzZWxlY3RlZFRleHQgOiB1bnNlbGVjdGVkVGV4dDtcbiAgfVxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vXG4gIC8vICBSZW5kZXIgTWV0aG9kc1xuICAvL1xuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gKGgoSG9zdCwgbnVsbCwgaChcInRkXCIsIHsgXCJhcmlhLWRpc2FibGVkXCI6IHRoaXMuZGlzYWJsZWQsIGNsYXNzOiB7XG4gICAgICAgIFtDU1MuZm9vdGVyQ2VsbF06IHRoaXMucGFyZW50Um93VHlwZSA9PT0gXCJmb290XCIsXG4gICAgICAgIFtDU1MubnVtYmVyQ2VsbF06IHRoaXMubnVtYmVyQ2VsbCxcbiAgICAgICAgW0NTUy5zZWxlY3Rpb25DZWxsXTogdGhpcy5zZWxlY3Rpb25DZWxsLFxuICAgICAgICBbQ1NTLnNlbGVjdGVkQ2VsbF06IHRoaXMucGFyZW50Um93SXNTZWxlY3RlZCxcbiAgICAgIH0sIGNvbFNwYW46IHRoaXMuY29sU3Bhbiwgb25CbHVyOiB0aGlzLm9uQ29udGFpbmVyQmx1ciwgb25Gb2N1czogdGhpcy5vbkNvbnRhaW5lckZvY3VzLCByb2xlOiBcImdyaWRjZWxsXCIsIHJvd1NwYW46IHRoaXMucm93U3BhbiwgdGFiSW5kZXg6IHRoaXMuZGlzYWJsZWQgPyAtMSA6IDAsXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QvanN4LXNvcnQtcHJvcHMgLS0gcmVmIHNob3VsZCBiZSBsYXN0IHNvIG5vZGUgYXR0cnMvcHJvcHMgYXJlIGluIHN5bmMgKHNlZSBodHRwczovL2dpdGh1Yi5jb20vRXNyaS9jYWxjaXRlLWRlc2lnbi1zeXN0ZW0vcHVsbC82NTMwKVxuICAgICAgcmVmOiAoZWwpID0+ICh0aGlzLmNvbnRhaW5lckVsID0gZWwpIH0sICh0aGlzLnNlbGVjdGlvbkNlbGwgfHwgdGhpcy5yZWFkQ2VsbENvbnRlbnRzVG9BVCkgJiYgdGhpcy5mb2N1c2VkICYmIChoKFwic3BhblwiLCB7IFwiYXJpYS1oaWRkZW5cIjogdHJ1ZSwgXCJhcmlhLWxpdmVcIjogXCJwb2xpdGVcIiwgY2xhc3M6IENTUy5hc3Npc3RpdmVUZXh0IH0sIHRoaXMuc2VsZWN0aW9uQ2VsbCAmJiB0aGlzLnNlbGVjdGlvblRleHQsIHRoaXMucmVhZENlbGxDb250ZW50c1RvQVQgJiYgIXRoaXMuc2VsZWN0aW9uQ2VsbCAmJiB0aGlzLmNvbnRlbnRzVGV4dCkpLCBoKFwic2xvdFwiLCB7IG9uU2xvdGNoYW5nZTogdGhpcy51cGRhdGVTY3JlZW5SZWFkZXJDb250ZW50c1RleHQgfSkpKSk7XG4gIH1cbiAgc3RhdGljIGdldCBhc3NldHNEaXJzKCkgeyByZXR1cm4gW1wiYXNzZXRzXCJdOyB9XG4gIGdldCBlbCgpIHsgcmV0dXJuIHRoaXM7IH1cbiAgc3RhdGljIGdldCB3YXRjaGVycygpIHsgcmV0dXJuIHtcbiAgICBcInBhcmVudFJvd0lzU2VsZWN0ZWRcIjogW1wib25TZWxlY3RlZENoYW5nZVwiXSxcbiAgICBcIm1lc3NhZ2VPdmVycmlkZXNcIjogW1wib25NZXNzYWdlc0NoYW5nZVwiXSxcbiAgICBcImVmZmVjdGl2ZUxvY2FsZVwiOiBbXCJlZmZlY3RpdmVMb2NhbGVDaGFuZ2VcIl1cbiAgfTsgfVxuICBzdGF0aWMgZ2V0IHN0eWxlKCkgeyByZXR1cm4gdGFibGVDZWxsQ3NzOyB9XG59LCBbMSwgXCJjYWxjaXRlLXRhYmxlLWNlbGxcIiwge1xuICAgIFwiYWxpZ25tZW50XCI6IFs1MTNdLFxuICAgIFwiY29sU3BhblwiOiBbNTE0LCBcImNvbC1zcGFuXCJdLFxuICAgIFwicm93U3BhblwiOiBbNTE0LCBcInJvdy1zcGFuXCJdLFxuICAgIFwiZGlzYWJsZWRcIjogWzRdLFxuICAgIFwibnVtYmVyQ2VsbFwiOiBbNCwgXCJudW1iZXItY2VsbFwiXSxcbiAgICBcInBhcmVudFJvd0lzU2VsZWN0ZWRcIjogWzQsIFwicGFyZW50LXJvdy1pcy1zZWxlY3RlZFwiXSxcbiAgICBcInBhcmVudFJvd1Bvc2l0aW9uTG9jYWxpemVkXCI6IFsxLCBcInBhcmVudC1yb3ctcG9zaXRpb24tbG9jYWxpemVkXCJdLFxuICAgIFwicGFyZW50Um93VHlwZVwiOiBbMSwgXCJwYXJlbnQtcm93LXR5cGVcIl0sXG4gICAgXCJwb3NpdGlvbkluUm93XCI6IFsyLCBcInBvc2l0aW9uLWluLXJvd1wiXSxcbiAgICBcInJlYWRDZWxsQ29udGVudHNUb0FUXCI6IFs0LCBcInJlYWQtY2VsbC1jb250ZW50cy10by1hLXRcIl0sXG4gICAgXCJzY2FsZVwiOiBbMV0sXG4gICAgXCJzZWxlY3Rpb25DZWxsXCI6IFs0LCBcInNlbGVjdGlvbi1jZWxsXCJdLFxuICAgIFwibWVzc2FnZXNcIjogWzEwNDBdLFxuICAgIFwibWVzc2FnZU92ZXJyaWRlc1wiOiBbMTA0MF0sXG4gICAgXCJjb250ZW50c1RleHRcIjogWzMyXSxcbiAgICBcImRlZmF1bHRNZXNzYWdlc1wiOiBbMzJdLFxuICAgIFwiZm9jdXNlZFwiOiBbMzJdLFxuICAgIFwic2VsZWN0aW9uVGV4dFwiOiBbMzJdLFxuICAgIFwiZWZmZWN0aXZlTG9jYWxlXCI6IFszMl0sXG4gICAgXCJzZXRGb2N1c1wiOiBbNjRdXG4gIH1dKTtcbmZ1bmN0aW9uIGRlZmluZUN1c3RvbUVsZW1lbnQoKSB7XG4gIGlmICh0eXBlb2YgY3VzdG9tRWxlbWVudHMgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgY29tcG9uZW50cyA9IFtcImNhbGNpdGUtdGFibGUtY2VsbFwiXTtcbiAgY29tcG9uZW50cy5mb3JFYWNoKHRhZ05hbWUgPT4geyBzd2l0Y2ggKHRhZ05hbWUpIHtcbiAgICBjYXNlIFwiY2FsY2l0ZS10YWJsZS1jZWxsXCI6XG4gICAgICBpZiAoIWN1c3RvbUVsZW1lbnRzLmdldCh0YWdOYW1lKSkge1xuICAgICAgICBjdXN0b21FbGVtZW50cy5kZWZpbmUodGFnTmFtZSwgVGFibGVDZWxsKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICB9IH0pO1xufVxuZGVmaW5lQ3VzdG9tRWxlbWVudCgpO1xuXG5leHBvcnQgeyBUYWJsZUNlbGwgYXMgVCwgZGVmaW5lQ3VzdG9tRWxlbWVudCBhcyBkIH07XG4iLCIvKiFcbiAqIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1kZXNpZ24tc3lzdGVtL2Jsb2IvbWFpbi9MSUNFTlNFLm1kIGZvciBkZXRhaWxzLlxuICogdjEuNy4wXG4gKi9cbmltcG9ydCB7IHByb3h5Q3VzdG9tRWxlbWVudCwgSFRNTEVsZW1lbnQsIGgsIEhvc3QgfSBmcm9tICdAc3RlbmNpbC9jb3JlL2ludGVybmFsL2NsaWVudC9pbmRleC5qcyc7XG5pbXBvcnQgeyBhIGFzIHNldFVwTG9hZGFibGVDb21wb25lbnQsIHMgYXMgc2V0Q29tcG9uZW50TG9hZGVkLCBjIGFzIGNvbXBvbmVudEZvY3VzYWJsZSB9IGZyb20gJy4vbG9hZGFibGUuanMnO1xuaW1wb3J0IHsgcyBhcyBzZXRVcE1lc3NhZ2VzLCBjIGFzIGNvbm5lY3RNZXNzYWdlcywgZCBhcyBkaXNjb25uZWN0TWVzc2FnZXMsIHUgYXMgdXBkYXRlTWVzc2FnZXMgfSBmcm9tICcuL3Q5bi5qcyc7XG5pbXBvcnQgeyBjIGFzIGNvbm5lY3RMb2NhbGl6ZWQsIGQgYXMgZGlzY29ubmVjdExvY2FsaXplZCB9IGZyb20gJy4vbG9jYWxlLmpzJztcbmltcG9ydCB7IGQgYXMgZGVmaW5lQ3VzdG9tRWxlbWVudCQxIH0gZnJvbSAnLi9pY29uLmpzJztcblxuY29uc3QgQ1NTID0ge1xuICBudW1iZXJDZWxsOiBcIm51bWJlci1jZWxsXCIsXG4gIHNlbGVjdGlvbkNlbGw6IFwic2VsZWN0aW9uLWNlbGxcIixcbiAgYm9keVJvdzogXCJib2R5LXJvd1wiLFxuICBmb290ZXJSb3c6IFwiZm9vdGVyLXJvd1wiLFxuICBoZWFkaW5nOiBcImhlYWRpbmdcIixcbiAgZGVzY3JpcHRpb246IFwiZGVzY3JpcHRpb25cIixcbiAgbXVsdGlwbGVTZWxlY3Rpb25DZWxsOiBcImNlbGwtLW11bHRpcGxlLXNlbGVjdGlvblwiLFxuICBhc3Npc3RpdmVUZXh0OiBcImFzc2lzdGl2ZS10ZXh0XCIsXG4gIGFjdGl2ZTogXCJhY3RpdmVcIixcbn07XG5cbmNvbnN0IHRhYmxlSGVhZGVyQ3NzID0gXCI6aG9zdHstLWNhbGNpdGUtaW50ZXJuYWwtdGFibGUtaGVhZGVyLWJhY2tncm91bmQ6dmFyKC0tY2FsY2l0ZS10YWJsZS1oZWFkZXItYmFja2dyb3VuZCwgdmFyKC0tY2FsY2l0ZS11aS1mb3JlZ3JvdW5kLTIpKTstLWNhbGNpdGUtaW50ZXJuYWwtdGFibGUtaGVhZGVyLWJvcmRlci1jb2xvcjp2YXIoLS1jYWxjaXRlLXRhYmxlLWJvcmRlci1jb2xvciwgdmFyKC0tY2FsY2l0ZS11aS1ib3JkZXItMykpO2Rpc3BsYXk6Y29udGVudHN9Omhvc3QoW2FsaWdubWVudD1jZW50ZXJdKSB0aHt0ZXh0LWFsaWduOmNlbnRlcn06aG9zdChbYWxpZ25tZW50PWVuZF0pIHRoe3RleHQtYWxpZ246ZW5kfS5hc3Npc3RpdmUtdGV4dHtwb3NpdGlvbjphYnNvbHV0ZTtpbmxpbmUtc2l6ZToxcHg7YmxvY2stc2l6ZToxcHg7cGFkZGluZzowO21hcmdpbjotMXB4O292ZXJmbG93OmhpZGRlbjtjbGlwOnJlY3QoMCwgMCwgMCwgMCk7d2hpdGUtc3BhY2U6bm93cmFwO2JvcmRlci13aWR0aDowfXRoe3RleHQtYWxpZ246c3RhcnQ7dmVydGljYWwtYWxpZ246dG9wO2ZvbnQtd2VpZ2h0OnZhcigtLWNhbGNpdGUtZm9udC13ZWlnaHQtbWVkaXVtKTtjb2xvcjp2YXIoLS1jYWxjaXRlLXVpLXRleHQtMSk7b3V0bGluZS1jb2xvcjp0cmFuc3BhcmVudDtmb250LXNpemU6dmFyKC0tY2FsY2l0ZS1pbnRlcm5hbC10YWJsZS1jZWxsLWZvbnQtc2l6ZSk7Ym9yZGVyLWlubGluZS1lbmQ6MXB4IHNvbGlkIHZhcigtLWNhbGNpdGUtaW50ZXJuYWwtdGFibGUtaGVhZGVyLWJvcmRlci1jb2xvcik7Ym9yZGVyLWJsb2NrLWVuZDoxcHggc29saWQgdmFyKC0tY2FsY2l0ZS1pbnRlcm5hbC10YWJsZS1oZWFkZXItYm9yZGVyLWNvbG9yKTtwYWRkaW5nLWJsb2NrOmNhbGModmFyKC0tY2FsY2l0ZS1pbnRlcm5hbC10YWJsZS1jZWxsLXBhZGRpbmcpICogMS41KTtwYWRkaW5nLWlubGluZTp2YXIoLS1jYWxjaXRlLWludGVybmFsLXRhYmxlLWNlbGwtcGFkZGluZyk7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jYWxjaXRlLWludGVybmFsLXRhYmxlLWhlYWRlci1iYWNrZ3JvdW5kKX10aDpmb2N1cy13aXRoaW57b3V0bGluZToycHggc29saWQgdmFyKC0tY2FsY2l0ZS11aS1mb2N1cy1jb2xvciwgdmFyKC0tY2FsY2l0ZS11aS1icmFuZCkpO291dGxpbmUtb2Zmc2V0OmNhbGMoXFxuICAgICAgICAgICAgLTJweCAqXFxuICAgICAgICAgICAgY2FsYyhcXG4gICAgICAgICAgICAgIDEgLVxcbiAgICAgICAgICAgICAgMiAqIGNsYW1wKFxcbiAgICAgICAgICAgICAgICAwLFxcbiAgICAgICAgICAgICAgICB2YXIoLS1jYWxjaXRlLXVpLWZvY3VzLW9mZnNldC1pbnZlcnQpLFxcbiAgICAgICAgICAgICAgICAxXFxuICAgICAgICAgICAgICApXFxuICAgICAgICAgICAgKVxcbiAgICAgICAgICApfXRoLmJvZHktcm93LHRoLmZvb3Rlci1yb3d7dmVydGljYWwtYWxpZ246bWlkZGxlO2JvcmRlci1ibG9jay1lbmQ6MH10aC5mb290ZXItcm93e2JvcmRlci1ibG9jay1zdGFydDoxcHggc29saWQgdmFyKC0tY2FsY2l0ZS1pbnRlcm5hbC10YWJsZS1oZWFkZXItYm9yZGVyLWNvbG9yKX0uY2VsbC0tbXVsdGlwbGUtc2VsZWN0aW9ue2N1cnNvcjpwb2ludGVyO3ZlcnRpY2FsLWFsaWduOm1pZGRsZTtjb2xvcjp2YXIoLS1jYWxjaXRlLXVpLXRleHQtMyl9Lm51bWJlci1jZWxsLC5zZWxlY3Rpb24tY2VsbHtjb2xvcjp2YXIoLS1jYWxjaXRlLXVpLXRleHQtMik7aW5saW5lLXNpemU6MnJlbTttaW4taW5saW5lLXNpemU6MnJlbX0uc2VsZWN0aW9uLWNlbGwgY2FsY2l0ZS1pY29uLmFjdGl2ZXtjb2xvcjp2YXIoLS1jYWxjaXRlLXVpLWJyYW5kKX0ubnVtYmVyLWNlbGwgY2FsY2l0ZS1pY29uLC5zZWxlY3Rpb24tY2VsbCBjYWxjaXRlLWljb257bWFyZ2luLWlubGluZS1zdGFydDphdXRvO21hcmdpbi1pbmxpbmUtZW5kOmF1dG87dmVydGljYWwtYWxpZ246bWlkZGxlfS5oZWFkaW5ne2NvbG9yOnZhcigtLWNhbGNpdGUtdWktdGV4dC0xKX0uZGVzY3JpcHRpb257Y29sb3I6dmFyKC0tY2FsY2l0ZS11aS10ZXh0LTMpO2ZvbnQtc2l6ZTp2YXIoLS1jYWxjaXRlLWludGVybmFsLXRhYmxlLWNlbGwtZm9udC1zaXplLXNlY29uZGFyeSl9XCI7XG5cbmNvbnN0IFRhYmxlSGVhZGVyID0gLypAX19QVVJFX18qLyBwcm94eUN1c3RvbUVsZW1lbnQoY2xhc3MgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5fX3JlZ2lzdGVySG9zdCgpO1xuICAgIHRoaXMuX19hdHRhY2hTaGFkb3coKTtcbiAgICB0aGlzLmFsaWdubWVudCA9IFwic3RhcnRcIjtcbiAgICB0aGlzLmNvbFNwYW4gPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5kZXNjcmlwdGlvbiA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmhlYWRpbmcgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5yb3dTcGFuID0gdW5kZWZpbmVkO1xuICAgIHRoaXMubnVtYmVyQ2VsbCA9IGZhbHNlO1xuICAgIHRoaXMucGFyZW50Um93UG9zaXRpb24gPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5wYXJlbnRSb3dUeXBlID0gdW5kZWZpbmVkO1xuICAgIHRoaXMucG9zaXRpb25JblJvdyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnNjYWxlID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuc2VsZWN0ZWRSb3dDb3VudCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnNlbGVjdGVkUm93Q291bnRMb2NhbGl6ZWQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5zZWxlY3Rpb25DZWxsID0gZmFsc2U7XG4gICAgdGhpcy5zZWxlY3Rpb25Nb2RlID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuYm9keVJvd0NvdW50ID0gdW5kZWZpbmVkO1xuICAgIHRoaXMubWVzc2FnZXMgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5tZXNzYWdlT3ZlcnJpZGVzID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuZGVmYXVsdE1lc3NhZ2VzID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuc2NyZWVuUmVhZGVyVGV4dCA9IFwiXCI7XG4gICAgdGhpcy5lZmZlY3RpdmVMb2NhbGUgPSBcIlwiO1xuICB9XG4gIG9uU2VsZWN0ZWRDaGFuZ2UoKSB7XG4gICAgdGhpcy51cGRhdGVTY3JlZW5SZWFkZXJUZXh0KCk7XG4gIH1cbiAgb25NZXNzYWdlc0NoYW5nZSgpIHtcbiAgICAvKiB3aXJlZCB1cCBieSB0OW4gdXRpbCAqL1xuICB9XG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vXG4gIC8vICBMaWZlY3ljbGVcbiAgLy9cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgYXN5bmMgY29tcG9uZW50V2lsbExvYWQoKSB7XG4gICAgc2V0VXBMb2FkYWJsZUNvbXBvbmVudCh0aGlzKTtcbiAgICBhd2FpdCBzZXRVcE1lc3NhZ2VzKHRoaXMpO1xuICAgIHRoaXMudXBkYXRlU2NyZWVuUmVhZGVyVGV4dCgpO1xuICB9XG4gIGNvbXBvbmVudERpZExvYWQoKSB7XG4gICAgc2V0Q29tcG9uZW50TG9hZGVkKHRoaXMpO1xuICB9XG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIGNvbm5lY3RMb2NhbGl6ZWQodGhpcyk7XG4gICAgY29ubmVjdE1lc3NhZ2VzKHRoaXMpO1xuICB9XG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIGRpc2Nvbm5lY3RMb2NhbGl6ZWQodGhpcyk7XG4gICAgZGlzY29ubmVjdE1lc3NhZ2VzKHRoaXMpO1xuICB9XG4gIGVmZmVjdGl2ZUxvY2FsZUNoYW5nZSgpIHtcbiAgICB1cGRhdGVNZXNzYWdlcyh0aGlzLCB0aGlzLmVmZmVjdGl2ZUxvY2FsZSk7XG4gIH1cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy9cbiAgLy8gIFB1YmxpYyBNZXRob2RzXG4gIC8vXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8qKiBTZXRzIGZvY3VzIG9uIHRoZSBjb21wb25lbnQuICovXG4gIGFzeW5jIHNldEZvY3VzKCkge1xuICAgIGF3YWl0IGNvbXBvbmVudEZvY3VzYWJsZSh0aGlzKTtcbiAgICB0aGlzLmNvbnRhaW5lckVsLmZvY3VzKCk7XG4gIH1cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy9cbiAgLy8gIFByaXZhdGUgTWV0aG9kc1xuICAvL1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICB1cGRhdGVTY3JlZW5SZWFkZXJUZXh0KCkge1xuICAgIGxldCB0ZXh0ID0gXCJcIjtcbiAgICBjb25zdCBzaGFyZWRUZXh0ID0gYCR7dGhpcy5zZWxlY3RlZFJvd0NvdW50TG9jYWxpemVkfSAke3RoaXMubWVzc2FnZXM/LnNlbGVjdGVkfWA7XG4gICAgaWYgKHRoaXMubnVtYmVyQ2VsbCkge1xuICAgICAgdGV4dCA9IHRoaXMubWVzc2FnZXM/LnJvd051bWJlcjtcbiAgICB9XG4gICAgZWxzZSBpZiAodGhpcy5zZWxlY3Rpb25Nb2RlID09PSBcInNpbmdsZVwiKSB7XG4gICAgICB0ZXh0ID0gYCR7dGhpcy5tZXNzYWdlcz8uc2VsZWN0aW9uQ29sdW1ufS4gJHtzaGFyZWRUZXh0fWA7XG4gICAgfVxuICAgIGVsc2UgaWYgKHRoaXMuYm9keVJvd0NvdW50ID09PSB0aGlzLnNlbGVjdGVkUm93Q291bnQpIHtcbiAgICAgIHRleHQgPSBgJHt0aGlzLm1lc3NhZ2VzPy5zZWxlY3Rpb25Db2x1bW59LiAke3RoaXMubWVzc2FnZXM/LmFsbH0gJHtzaGFyZWRUZXh0fSAke3RoaXMubWVzc2FnZXM/LmtleWJvYXJkRGVzZWxlY3RBbGx9YDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0ZXh0ID0gYCR7dGhpcy5tZXNzYWdlcz8uc2VsZWN0aW9uQ29sdW1ufS4gJHtzaGFyZWRUZXh0fSAke3RoaXMubWVzc2FnZXM/LmtleWJvYXJkU2VsZWN0QWxsfWA7XG4gICAgfVxuICAgIHRoaXMuc2NyZWVuUmVhZGVyVGV4dCA9IHRleHQ7XG4gIH1cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvL1xuICAvLyAgUmVuZGVyIE1ldGhvZHNcbiAgLy9cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICByZW5kZXIoKSB7XG4gICAgY29uc3Qgc2NvcGUgPSB0aGlzLnJvd1NwYW5cbiAgICAgID8gXCJyb3dncm91cFwiXG4gICAgICA6IHRoaXMuY29sU3BhblxuICAgICAgICA/IFwiY29sZ3JvdXBcIlxuICAgICAgICA6IHRoaXMucGFyZW50Um93VHlwZSA9PT0gXCJib2R5XCJcbiAgICAgICAgICA/IFwicm93XCJcbiAgICAgICAgICA6IFwiY29sXCI7XG4gICAgY29uc3QgYWxsU2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkUm93Q291bnQgPT09IHRoaXMuYm9keVJvd0NvdW50O1xuICAgIGNvbnN0IHNlbGVjdGlvbkljb24gPSBhbGxTZWxlY3RlZCA/IFwiY2hlY2stc3F1YXJlLWZcIiA6IFwiY2hlY2stc3F1YXJlXCI7XG4gICAgcmV0dXJuIChoKEhvc3QsIG51bGwsIGgoXCJ0aFwiLCB7IFwiYXJpYS1jb2xpbmRleFwiOiB0aGlzLnBhcmVudFJvd1R5cGUgIT09IFwiYm9keVwiID8gdGhpcy5wb3NpdGlvbkluUm93IDogXCJcIiwgY2xhc3M6IHtcbiAgICAgICAgW0NTUy5ib2R5Um93XTogdGhpcy5wYXJlbnRSb3dUeXBlID09PSBcImJvZHlcIixcbiAgICAgICAgW0NTUy5mb290ZXJSb3ddOiB0aGlzLnBhcmVudFJvd1R5cGUgPT09IFwiZm9vdFwiLFxuICAgICAgICBbQ1NTLm51bWJlckNlbGxdOiB0aGlzLm51bWJlckNlbGwsXG4gICAgICAgIFtDU1Muc2VsZWN0aW9uQ2VsbF06IHRoaXMuc2VsZWN0aW9uQ2VsbCxcbiAgICAgICAgW0NTUy5tdWx0aXBsZVNlbGVjdGlvbkNlbGxdOiB0aGlzLnNlbGVjdGlvbk1vZGUgPT09IFwibXVsdGlwbGVcIixcbiAgICAgIH0sIGNvbFNwYW46IHRoaXMuY29sU3Bhbiwgcm9sZTogXCJjb2x1bW5oZWFkZXJcIiwgcm93U3BhbjogdGhpcy5yb3dTcGFuLCBzY29wZTogc2NvcGUsIHRhYkluZGV4OiAwLFxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0L2pzeC1zb3J0LXByb3BzIC0tIHJlZiBzaG91bGQgYmUgbGFzdCBzbyBub2RlIGF0dHJzL3Byb3BzIGFyZSBpbiBzeW5jIChzZWUgaHR0cHM6Ly9naXRodWIuY29tL0VzcmkvY2FsY2l0ZS1kZXNpZ24tc3lzdGVtL3B1bGwvNjUzMClcbiAgICAgIHJlZjogKGVsKSA9PiAodGhpcy5jb250YWluZXJFbCA9IGVsKSB9LCB0aGlzLmhlYWRpbmcgJiYgaChcImRpdlwiLCB7IGNsYXNzOiBDU1MuaGVhZGluZyB9LCB0aGlzLmhlYWRpbmcpLCB0aGlzLmRlc2NyaXB0aW9uICYmIGgoXCJkaXZcIiwgeyBjbGFzczogQ1NTLmRlc2NyaXB0aW9uIH0sIHRoaXMuZGVzY3JpcHRpb24pLCB0aGlzLnNlbGVjdGlvbkNlbGwgJiYgdGhpcy5zZWxlY3Rpb25Nb2RlID09PSBcIm11bHRpcGxlXCIgJiYgKGgoXCJjYWxjaXRlLWljb25cIiwgeyBjbGFzczogeyBbQ1NTLmFjdGl2ZV06IGFsbFNlbGVjdGVkIH0sIGljb246IHNlbGVjdGlvbkljb24sIHNjYWxlOiB0aGlzLnNjYWxlID09PSBcImxcIiA/IFwibVwiIDogXCJzXCIgfSkpLCAodGhpcy5zZWxlY3Rpb25DZWxsIHx8IHRoaXMubnVtYmVyQ2VsbCkgJiYgKGgoXCJzcGFuXCIsIHsgXCJhcmlhLWhpZGRlblwiOiB0cnVlLCBcImFyaWEtbGl2ZVwiOiBcInBvbGl0ZVwiLCBjbGFzczogQ1NTLmFzc2lzdGl2ZVRleHQgfSwgdGhpcy5zY3JlZW5SZWFkZXJUZXh0KSkpKSk7XG4gIH1cbiAgc3RhdGljIGdldCBhc3NldHNEaXJzKCkgeyByZXR1cm4gW1wiYXNzZXRzXCJdOyB9XG4gIGdldCBlbCgpIHsgcmV0dXJuIHRoaXM7IH1cbiAgc3RhdGljIGdldCB3YXRjaGVycygpIHsgcmV0dXJuIHtcbiAgICBcInNlbGVjdGVkUm93Q291bnRcIjogW1wib25TZWxlY3RlZENoYW5nZVwiXSxcbiAgICBcInNlbGVjdGVkUm93Q291bnRMb2NhbGl6ZWRcIjogW1wib25TZWxlY3RlZENoYW5nZVwiXSxcbiAgICBcIm1lc3NhZ2VPdmVycmlkZXNcIjogW1wib25NZXNzYWdlc0NoYW5nZVwiXSxcbiAgICBcImVmZmVjdGl2ZUxvY2FsZVwiOiBbXCJlZmZlY3RpdmVMb2NhbGVDaGFuZ2VcIl1cbiAgfTsgfVxuICBzdGF0aWMgZ2V0IHN0eWxlKCkgeyByZXR1cm4gdGFibGVIZWFkZXJDc3M7IH1cbn0sIFsxLCBcImNhbGNpdGUtdGFibGUtaGVhZGVyXCIsIHtcbiAgICBcImFsaWdubWVudFwiOiBbNTEzXSxcbiAgICBcImNvbFNwYW5cIjogWzUxNCwgXCJjb2wtc3BhblwiXSxcbiAgICBcImRlc2NyaXB0aW9uXCI6IFs1MTNdLFxuICAgIFwiaGVhZGluZ1wiOiBbNTEzXSxcbiAgICBcInJvd1NwYW5cIjogWzUxNCwgXCJyb3ctc3BhblwiXSxcbiAgICBcIm51bWJlckNlbGxcIjogWzQsIFwibnVtYmVyLWNlbGxcIl0sXG4gICAgXCJwYXJlbnRSb3dQb3NpdGlvblwiOiBbMiwgXCJwYXJlbnQtcm93LXBvc2l0aW9uXCJdLFxuICAgIFwicGFyZW50Um93VHlwZVwiOiBbMSwgXCJwYXJlbnQtcm93LXR5cGVcIl0sXG4gICAgXCJwb3NpdGlvbkluUm93XCI6IFsyLCBcInBvc2l0aW9uLWluLXJvd1wiXSxcbiAgICBcInNjYWxlXCI6IFsxXSxcbiAgICBcInNlbGVjdGVkUm93Q291bnRcIjogWzIsIFwic2VsZWN0ZWQtcm93LWNvdW50XCJdLFxuICAgIFwic2VsZWN0ZWRSb3dDb3VudExvY2FsaXplZFwiOiBbMSwgXCJzZWxlY3RlZC1yb3ctY291bnQtbG9jYWxpemVkXCJdLFxuICAgIFwic2VsZWN0aW9uQ2VsbFwiOiBbNCwgXCJzZWxlY3Rpb24tY2VsbFwiXSxcbiAgICBcInNlbGVjdGlvbk1vZGVcIjogWzEsIFwic2VsZWN0aW9uLW1vZGVcIl0sXG4gICAgXCJib2R5Um93Q291bnRcIjogWzIsIFwiYm9keS1yb3ctY291bnRcIl0sXG4gICAgXCJtZXNzYWdlc1wiOiBbMTA0MF0sXG4gICAgXCJtZXNzYWdlT3ZlcnJpZGVzXCI6IFsxMDQwXSxcbiAgICBcImRlZmF1bHRNZXNzYWdlc1wiOiBbMzJdLFxuICAgIFwic2NyZWVuUmVhZGVyVGV4dFwiOiBbMzJdLFxuICAgIFwiZWZmZWN0aXZlTG9jYWxlXCI6IFszMl0sXG4gICAgXCJzZXRGb2N1c1wiOiBbNjRdXG4gIH1dKTtcbmZ1bmN0aW9uIGRlZmluZUN1c3RvbUVsZW1lbnQoKSB7XG4gIGlmICh0eXBlb2YgY3VzdG9tRWxlbWVudHMgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgY29tcG9uZW50cyA9IFtcImNhbGNpdGUtdGFibGUtaGVhZGVyXCIsIFwiY2FsY2l0ZS1pY29uXCJdO1xuICBjb21wb25lbnRzLmZvckVhY2godGFnTmFtZSA9PiB7IHN3aXRjaCAodGFnTmFtZSkge1xuICAgIGNhc2UgXCJjYWxjaXRlLXRhYmxlLWhlYWRlclwiOlxuICAgICAgaWYgKCFjdXN0b21FbGVtZW50cy5nZXQodGFnTmFtZSkpIHtcbiAgICAgICAgY3VzdG9tRWxlbWVudHMuZGVmaW5lKHRhZ05hbWUsIFRhYmxlSGVhZGVyKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJjYWxjaXRlLWljb25cIjpcbiAgICAgIGlmICghY3VzdG9tRWxlbWVudHMuZ2V0KHRhZ05hbWUpKSB7XG4gICAgICAgIGRlZmluZUN1c3RvbUVsZW1lbnQkMSgpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gIH0gfSk7XG59XG5kZWZpbmVDdXN0b21FbGVtZW50KCk7XG5cbmV4cG9ydCB7IFRhYmxlSGVhZGVyIGFzIFQsIGRlZmluZUN1c3RvbUVsZW1lbnQgYXMgZCB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9